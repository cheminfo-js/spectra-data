var _Mathsign=Math.sign,_Mathlog2=Math.log10,_NumberMIN_VALUE=Number.MIN_VALUE,_NumberMAX_VALUE=Number.MAX_VALUE,_NumberisFinite=Number.isFinite,_NumberMIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER,_NumberMAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER,_Mathceil=Math.ceil,_Mathlog=Math.log,_Mathsin=Math.sin,_MathPI=Math.PI,_Mathexp=Math.exp,_Mathpow=Math.pow,_Mathmax=Math.max,_Mathsqrt=Math.sqrt,_Mathround=Math.round,_Mathabs=Math.abs,_NumberisInteger=Number.isInteger,_Mathfloor=Math.floor,_Mathmin=Math.min,_StringfromCharCode=String.fromCharCode;(function(E,I){'object'==typeof exports&&'object'==typeof module?module.exports=I():'function'==typeof define&&define.amd?define([],I):'object'==typeof exports?exports.spectraData=I():E.spectraData=I()})(this,function(){return function(D){function E(R){if(I[R])return I[R].exports;var P=I[R]={i:R,l:!1,exports:{}};return D[R].call(P.exports,P,P.exports,E),P.l=!0,P.exports}var I={};return E.m=D,E.c=I,E.i=function(R){return R},E.d=function(R,P,F){E.o(R,P)||Object.defineProperty(R,P,{configurable:!1,enumerable:!0,get:F})},E.n=function(R){var P=R&&R.__esModule?function(){return R['default']}:function(){return R};return E.d(P,'a',P),P},E.o=function(R,P){return Object.prototype.hasOwnProperty.call(R,P)},E.p='',E(E.s=67)}([function(D,E,I){'use strict';function R(K){return K}function P(K,Q){for(var G=0;G<K.length;++G)Q[G]=255&K.charCodeAt(G);return Q}function F(K){var Q=65536,G=[],ee=K.length,te=E.getTypeOf(K),ne=0,ae=!0;try{'uint8array'===te?_StringfromCharCode.apply(null,new Uint8Array(0)):'nodebuffer'===te?_StringfromCharCode.apply(null,Z(0)):void 0}catch(le){ae=!1}if(!ae){for(var se='',oe=0;oe<K.length;oe++)se+=_StringfromCharCode(K[oe]);return se}for(;ne<ee&&1<Q;)try{'array'===te||'nodebuffer'===te?G.push(_StringfromCharCode.apply(null,K.slice(ne,_Mathmin(ne+Q,ee)))):G.push(_StringfromCharCode.apply(null,K.subarray(ne,_Mathmin(ne+Q,ee)))),ne+=Q}catch(le){Q=_Mathfloor(Q/2)}return G.join('')}function T(K,Q){for(var G=0;G<K.length;G++)Q[G]=K[G];return Q}var O=I(5),$=I(11),Z=I(12);E.string2binary=function(K){for(var Q='',G=0;G<K.length;G++)Q+=_StringfromCharCode(255&K.charCodeAt(G));return Q},E.arrayBuffer2Blob=function(K,Q){E.checkSupport('blob'),Q=Q||'application/zip';try{return new Blob([K],{type:Q})}catch(te){try{var G=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,ee=new G;return ee.append(K),ee.getBlob(Q)}catch(ne){throw new Error('Bug : can\'t construct the Blob.')}}},E.applyFromCharCode=F;var W={};W.string={string:R,array:function(K){return P(K,Array(K.length))},arraybuffer:function(K){return W.string.uint8array(K).buffer},uint8array:function(K){return P(K,new Uint8Array(K.length))},nodebuffer:function(K){return P(K,Z(K.length))}},W.array={string:F,array:R,arraybuffer:function(K){return new Uint8Array(K).buffer},uint8array:function(K){return new Uint8Array(K)},nodebuffer:function(K){return Z(K)}},W.arraybuffer={string:function(K){return F(new Uint8Array(K))},array:function(K){return T(new Uint8Array(K),Array(K.byteLength))},arraybuffer:R,uint8array:function(K){return new Uint8Array(K)},nodebuffer:function(K){return Z(new Uint8Array(K))}},W.uint8array={string:F,array:function(K){return T(K,Array(K.length))},arraybuffer:function(K){return K.buffer},uint8array:R,nodebuffer:function(K){return Z(K)}},W.nodebuffer={string:F,array:function(K){return T(K,Array(K.length))},arraybuffer:function(K){return W.nodebuffer.uint8array(K).buffer},uint8array:function(K){return T(K,new Uint8Array(K.length))},nodebuffer:R},E.transformTo=function(K,Q){if(Q||(Q=''),!K)return Q;E.checkSupport(K);var G=E.getTypeOf(Q),ee=W[G][K](Q);return ee},E.getTypeOf=function(K){return'string'==typeof K?'string':'[object Array]'===Object.prototype.toString.call(K)?'array':O.nodebuffer&&Z.test(K)?'nodebuffer':O.uint8array&&K instanceof Uint8Array?'uint8array':O.arraybuffer&&K instanceof ArrayBuffer?'arraybuffer':void 0},E.checkSupport=function(K){var Q=O[K.toLowerCase()];if(!Q)throw new Error(K+' is not supported by this browser')},E.MAX_VALUE_16BITS=65535,E.MAX_VALUE_32BITS=-1,E.pretty=function(K){var Q='',G,ee;for(ee=0;ee<(K||'').length;ee++)G=K.charCodeAt(ee),Q+='\\x'+(16>G?'0':'')+G.toString(16).toUpperCase();return Q},E.findCompression=function(K){for(var Q in $)if($.hasOwnProperty(Q)&&$[Q].magic===K)return $[Q];return null},E.isRegExp=function(K){return'[object RegExp]'===Object.prototype.toString.call(K)},E.extend=function(){var K={},Q,G;for(Q=0;Q<arguments.length;Q++)for(G in arguments[Q])arguments[Q].hasOwnProperty(G)&&'undefined'==typeof K[G]&&(K[G]=arguments[Q][G]);return K}},function(D,E,I){'use strict';I(117);var R=I(43),P=I(7);class F extends R(Array){constructor(T,O){var $;if(1===arguments.length&&'number'==typeof T)return Array(T);if(F.isMatrix(T))return T.clone();if(_NumberisInteger(T)&&0<T){if(super(T),_NumberisInteger(O)&&0<O)for($=0;$<T;$++)this[$]=Array(O);else throw new TypeError('nColumns must be a positive integer');}else if(Array.isArray(T)){const Z=T;if(T=Z.length,O=Z[0].length,'number'!=typeof O||0===O)throw new TypeError('Data must be a 2D array with at least one element');for(super(T),$=0;$<T;$++){if(Z[$].length!==O)throw new RangeError('Inconsistent array dimensions');this[$]=[].concat(Z[$])}}else throw new TypeError('First argument must be a positive number or an array');return this.rows=T,this.columns=O,this}set(T,O,$){return this[T][O]=$,this}get(T,O){return this[T][O]}clone(){for(var T=new this.constructor[Symbol.species](this.rows,this.columns),O=0;O<this.rows;O++)for(var $=0;$<this.columns;$++)T.set(O,$,this.get(O,$));return T}removeRow(T){if(P.checkRowIndex(this,T),1===this.rows)throw new RangeError('A matrix cannot have less than one row');return this.splice(T,1),this.rows-=1,this}addRow(T,O){return void 0===O&&(O=T,T=this.rows),P.checkRowIndex(this,T,!0),O=P.checkRowVector(this,O,!0),this.splice(T,0,O),this.rows+=1,this}removeColumn(T){if(P.checkColumnIndex(this,T),1===this.columns)throw new RangeError('A matrix cannot have less than one column');for(var O=0;O<this.rows;O++)this[O].splice(T,1);return this.columns-=1,this}addColumn(T,O){'undefined'==typeof O&&(O=T,T=this.columns),P.checkColumnIndex(this,T,!0),O=P.checkColumnVector(this,O);for(var $=0;$<this.rows;$++)this[$].splice(T,0,O[$]);return this.columns+=1,this}}E.Matrix=F,F.abstractMatrix=R},function(D,E){'use strict';var R='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Int32Array;E.assign=function(T){for(var O=Array.prototype.slice.call(arguments,1),$;O.length;)if($=O.shift(),!!$){if('object'!=typeof $)throw new TypeError($+'must be non-object');for(var Z in $)$.hasOwnProperty(Z)&&(T[Z]=$[Z])}return T},E.shrinkBuf=function(T,O){return T.length===O?T:T.subarray?T.subarray(0,O):(T.length=O,T)};var P={arraySet:function(T,O,$,Z,W){if(O.subarray&&T.subarray)return void T.set(O.subarray($,$+Z),W);for(var K=0;K<Z;K++)T[W+K]=O[$+K]},flattenChunks:function(T){var O,$,Z,W,K,Q;for(Z=0,O=0,$=T.length;O<$;O++)Z+=T[O].length;for(Q=new Uint8Array(Z),W=0,(O=0,$=T.length);O<$;O++)K=T[O],Q.set(K,W),W+=K.length;return Q}},F={arraySet:function(T,O,$,Z,W){for(var K=0;K<Z;K++)T[W+K]=O[$+K]},flattenChunks:function(T){return[].concat.apply([],T)}};E.setTyped=function(T){T?(E.Buf8=Uint8Array,E.Buf16=Uint16Array,E.Buf32=Int32Array,E.assign(E,P)):(E.Buf8=Array,E.Buf16=Array,E.Buf32=Array,E.assign(E,F))},E.setTyped(R)},function(D,E,I){'use strict';var R=I(43),P=I(1);class F extends R(){constructor(T,O,$){super(),this.matrix=T,this.rows=O,this.columns=$}static get[Symbol.species](){return P.Matrix}}D.exports=F},function(D){'use strict';function R(O){for(var $=0,Z=O.length,W=Array(Z);$<Z;$++)W[$]=O[$];return W}function P(O,$){var Z=0,Q,G;if(Array.isArray(O)){if(G=$,Q=G?R(O):O,O=Q.length,$=Q[0].length,'undefined'==typeof $)throw new TypeError('Data must be a 2D array');if(0<O&&0<$){for(;Z<O;Z++)if(Q[Z].length!==$)throw new RangeError('Inconsistent array dimensions');else G&&(Q[Z]=R(Q[Z]));}else throw new RangeError('Invalid dimensions: '+O+'x'+$)}else if('number'!=typeof O)throw new TypeError('Invalid arguments');else if(0<O&&0<$)for(Q=Array(O);Z<O;Z++)Q[Z]=Array($);else throw new RangeError('Invalid dimensions: '+O+'x'+$);return Object.defineProperty(Q,'rows',{writable:!0,value:O}),Object.defineProperty(Q,'columns',{writable:!0,value:$}),Q.__proto__=P.prototype,Q}var F=Array.prototype.splice,T=Array.prototype.concat;P.from1DArray=function($,Z,W){var G=0,K,Q;if(K=$*Z,K!==W.length)throw new RangeError('Data length does not match given dimensions');for(Q=Array($);G<$;G++)Q[G]=W.slice(G*Z,(G+1)*Z);return new P(Q)},P.rowVector=function($){return new P([$])},P.columnVector=function($){for(var Z=$.length,W=Array(Z),K=0;K<Z;K++)W[K]=[$[K]];return new P(W)},P.empty=function($,Z){return new P($,Z)},P.zeros=function($,Z){return P.empty($,Z).fill(0)},P.ones=function($,Z){return P.empty($,Z).fill(1)},P.rand=function($,Z){for(var W=P.empty($,Z),K=0,Q=W.rows;K<Q;K++)for(var G=0,ee=W.columns;G<ee;G++)W[K][G]=Math.random();return W},P.eye=function($){for(var Z=P.zeros($,$),W=Z.rows,K=0;K<W;K++)Z[K][K]=1;return Z},P.diag=function($){for(var Z=$.length,W=P.zeros(Z,Z),K=0;K<Z;K++)W[K][K]=$[K];return W},P.indices=function($,Z){for(var W=Array(Z-$),K=0;K<W.length;K++)W[K]=$++;return W},P.stack=function($){var Z,W,K;if(P.isMatrix($)){var Q=0,G=0;for(Z=0;Z<arguments.length;Z++)Q+=arguments[Z].rows,arguments[Z].columns>G&&(G=arguments[Z].columns);var ee=P.zeros(Q,G),te=0;for(Z=0;Z<arguments.length;Z++){var ne=arguments[Z];for(W=0;W<ne.rows;W++){for(K=0;K<ne.columns;K++)ee[te][K]=ne[W][K];te++}}return ee}if(Array.isArray($)){var ae=P.empty(arguments.length,$.length);for(Z=0;Z<arguments.length;Z++)ae.setRow(Z,arguments[Z]);return ae}},P.expand=function($,Z){for(var W=[],K=0;K<Z.length;K++)for(var Q=0;Q<Z[K];Q++)W.push($[K]);return new P(W)},P.checkMatrix=function($){if(!$)throw new TypeError('Argument has to be a matrix');return'Matrix'!==$.klass&&($=new P($)),$},P.isMatrix=function($){return!!$&&'Matrix'===$.klass},Object.defineProperty(P.prototype,'klass',{get:function(){return'Matrix'}}),Object.defineProperty(P.prototype,'size',{get:function(){return this.rows*this.columns}}),P.prototype.checkRowIndex=function($){if(0>$||$>this.rows-1)throw new RangeError('Row index out of range.')},P.prototype.checkColumnIndex=function($){if(0>$||$>this.columns-1)throw new RangeError('Column index out of range.')},P.prototype.checkDimensions=function($){if(this.rows!==$.rows||this.columns!==$.columns)throw new RangeError('Matrices dimensions must be equal.')},P.prototype.apply=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$.call(this,K,Q);return this},P.prototype.clone=function(){return new P(this.to2DArray())},P.prototype.to1DArray=function(){return T.apply([],this)},P.prototype.to2DArray=function(){for(var $=this.rows,Z=Array($),W=0;W<$;W++)Z[W]=R(this[W]);return Z},P.prototype.isRowVector=function(){return 1===this.rows},P.prototype.isColumnVector=function(){return 1===this.columns},P.prototype.isVector=function(){return 1===this.rows||1===this.columns},P.prototype.isSquare=function(){return this.rows===this.columns},P.prototype.isSymmetric=function(){if(this.isSquare()){for(var $=this.rows,Z=0;Z<$;Z++)for(var W=0;W<=Z;W++)if(this[Z][W]!==this[W][Z])return!1;return!0}return!1},P.prototype.set=function($,Z,W){return this[$][Z]=W,this},P.prototype.get=function($,Z){return this[$][Z]},P.prototype.fill=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]=$;return this},P.prototype.neg=function(){return this.mulS(-1)},P.prototype.add=function($){return'number'==typeof $?this.addS($):($=P.checkMatrix($),this.addM($))},P.prototype.addS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$;return this},P.prototype.addM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$[K][Q];return this},P.prototype.sub=function($){return'number'==typeof $?this.subS($):($=P.checkMatrix($),this.subM($))},P.prototype.subS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$;return this},P.prototype.subM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$[K][Q];return this},P.prototype.mul=function($){return'number'==typeof $?this.mulS($):($=P.checkMatrix($),this.mulM($))},P.prototype.mulS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$;return this},P.prototype.mulM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$[K][Q];return this},P.prototype.div=function($){return'number'==typeof $?this.divS($):($=P.checkMatrix($),this.divM($))},P.prototype.divS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$;return this},P.prototype.divM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$[K][Q];return this},P.prototype.getRow=function($){return this.checkRowIndex($),R(this[$])},P.prototype.getRowVector=function($){return P.rowVector(this.getRow($))},P.prototype.setRow=function($,Z){if(this.checkRowIndex($),P.isMatrix(Z)&&(Z=Z.to1DArray()),Z.length!==this.columns)throw new RangeError('Invalid row size');return this[$]=R(Z),this},P.prototype.removeRow=function($){if(this.checkRowIndex($),1===this.rows)throw new RangeError('A matrix cannot have less than one row');return F.call(this,$,1),this.rows-=1,this},P.prototype.addRow=function($,Z){if('undefined'==typeof Z&&(Z=$,$=this.rows),0>$||$>this.rows)throw new RangeError('Row index out of range.');if(P.isMatrix(Z)&&(Z=Z.to1DArray()),Z.length!==this.columns)throw new RangeError('Invalid row size');return F.call(this,$,0,R(Z)),this.rows+=1,this},P.prototype.swapRows=function($,Z){this.checkRowIndex($),this.checkRowIndex(Z);var W=this[$];return this[$]=this[Z],this[Z]=W,this},P.prototype.getColumn=function($){this.checkColumnIndex($);for(var Z=this.rows,W=Array(Z),K=0;K<Z;K++)W[K]=this[K][$];return W},P.prototype.getColumnVector=function($){return P.columnVector(this.getColumn($))},P.prototype.setColumn=function($,Z){this.checkColumnIndex($),P.isMatrix(Z)&&(Z=Z.to1DArray());var W=this.rows;if(Z.length!==W)throw new RangeError('Invalid column size');for(var K=0;K<W;K++)this[K][$]=Z[K];return this},P.prototype.removeColumn=function($){if(this.checkColumnIndex($),1===this.columns)throw new RangeError('A matrix cannot have less than one column');for(var Z=0,W=this.rows;Z<W;Z++)this[Z].splice($,1);return this.columns-=1,this},P.prototype.addColumn=function($,Z){if('undefined'==typeof Z&&(Z=$,$=this.columns),0>$||$>this.columns)throw new RangeError('Column index out of range.');P.isMatrix(Z)&&(Z=Z.to1DArray());var W=this.rows;if(Z.length!==W)throw new RangeError('Invalid column size');for(var K=0;K<W;K++)this[K].splice($,0,Z[K]);return this.columns+=1,this},P.prototype.swapColumns=function($,Z){this.checkRowIndex($),this.checkRowIndex(Z);for(var W=this.rows,G=0,K,Q;G<W;G++)Q=this[G],K=Q[$],Q[$]=Q[Z],Q[Z]=K;return this},P.prototype.checkRowVector=function($){if(P.isMatrix($)&&($=$.to1DArray()),$.length!==this.columns)throw new RangeError('vector size must be the same as the number of columns');return $},P.prototype.checkColumnVector=function($){if(P.isMatrix($)&&($=$.to1DArray()),$.length!==this.rows)throw new RangeError('vector size must be the same as the number of rows');return $},P.prototype.addRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$[Q];return this},P.prototype.subRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$[Q];return this},P.prototype.mulRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$[Q];return this},P.prototype.divRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$[Q];return this},P.prototype.addColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$[K];return this},P.prototype.subColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$[K];return this},P.prototype.mulColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$[K];return this},P.prototype.divColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$[K];return this},P.prototype.mulRow=function($,Z){this.checkRowIndex($);for(var W=0,K=this.columns;W<K;W++)this[$][W]*=Z;return this},P.prototype.mulColumn=function($,Z){this.checkColumnIndex($);for(var W=0,K=this.rows;W<K;W++)this[W][$]*=Z},P.prototype.max=function(){for(var $=-Infinity,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]>$&&($=this[K][Q]);return $},P.prototype.maxIndex=function(){for(var $=-Infinity,Z={},W=this.rows,K=this.columns,Q=0;Q<W;Q++)for(var G=0;G<K;G++)this[Q][G]>$&&($=this[Q][G],Z.row=Q,Z.column=G);return Z},P.prototype.min=function(){for(var $=Infinity,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]<$&&($=this[K][Q]);return $},P.prototype.minIndex=function(){for(var $=Infinity,Z={},W=this.rows,K=this.columns,Q=0;Q<W;Q++)for(var G=0;G<K;G++)this[Q][G]<$&&($=this[Q][G],Z.row=Q,Z.column=G);return Z},P.prototype.maxRow=function($){this.checkRowIndex($);for(var Z=-Infinity,W=0,K=this.columns;W<K;W++)this[$][W]>Z&&(Z=this[$][W]);return Z},P.prototype.maxRowIndex=function($){this.checkRowIndex($);for(var Z=-Infinity,W={row:$},K=0,Q=this.columns;K<Q;K++)this[$][K]>Z&&(Z=this[$][K],W.column=K);return W},P.prototype.minRow=function($){this.checkRowIndex($);for(var Z=Infinity,W=0,K=this.columns;W<K;W++)this[$][W]<Z&&(Z=this[$][W]);return Z},P.prototype.minRowIndex=function($){this.checkRowIndex($);for(var Z=Infinity,W={row:$,column:0},K=0,Q=this.columns;K<Q;K++)this[$][K]<Z&&(Z=this[$][K],W.column=K);return W},P.prototype.maxColumn=function($){this.checkColumnIndex($);for(var Z=-Infinity,W=0,K=this.rows;W<K;W++)this[W][$]>Z&&(Z=this[W][$]);return Z},P.prototype.maxColumnIndex=function($){this.checkColumnIndex($);for(var Z=-Infinity,W={row:0,column:$},K=0,Q=this.rows;K<Q;K++)this[K][$]>Z&&(Z=this[K][$],W.row=K);return W},P.prototype.minColumn=function($){this.checkColumnIndex($);for(var Z=Infinity,W=0,K=this.rows;W<K;W++)this[W][$]<Z&&(Z=this[W][$]);return Z},P.prototype.minColumnIndex=function($){this.checkColumnIndex($);for(var Z=Infinity,W={row:0,column:$},K=0,Q=this.rows;K<Q;K++)this[K][$]<Z&&(Z=this[K][$],W.row=K);return W},P.prototype.diag=function(){if(!this.isSquare())throw new TypeError('Only square matrices have a diagonal.');for(var O=Array(this.rows),$=0,Z=this.rows;$<Z;$++)O[$]=this[$][$];return O},P.prototype.sum=function(){for(var $=0,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$+=this[K][Q];return $},P.prototype.mean=function(){return this.sum()/this.size},P.prototype.prod=function(){for(var O=1,$=this.rows,Z=this.columns,W=0;W<$;W++)for(var K=0;K<Z;K++)O*=this[W][K];return O},P.prototype.cumulativeSum=function(){for(var $=0,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$+=this[K][Q],this[K][Q]=$;return this},P.prototype.dot=function($){if(this.size!==$.size)throw new RangeError('vectors do not have the same size');for(var Z=this.to1DArray(),W=$.to1DArray(),O=0,K=Z.length,Q=0;Q<K;Q++)O+=Z[Q]*W[Q];return O},P.prototype.mmul=function($){if(!P.isMatrix($))throw new TypeError('parameter "other" must be a matrix');this.columns!==$.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');var Z=this.rows,W=this.columns,K=$.columns,Q=new P(Z,K),G=Array(W),ee,te,ne;for(te=0;te<K;te++){for(ne=0;ne<W;ne++)G[ne]=$[ne][te];for(ee=0;ee<Z;ee++){var ae=this[ee],se=0;for(ne=0;ne<W;ne++)se+=ae[ne]*G[ne];Q[ee][te]=se}}return Q},P.prototype.sortRows=function($){for(var Z=0,W=this.rows;Z<W;Z++)this[Z].sort($);return this},P.prototype.sortColumns=function($){for(var Z=0,W=this.columns;Z<W;Z++)this.setColumn(Z,this.getColumn(Z).sort($));return this},P.prototype.transpose=function(){for(var $=new P(this.columns,this.rows),Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$[Q][K]=this[K][Q];return $},P.prototype.subMatrix=function($,Z,W,K){if($>Z||W>K||0>$||$>=this.rows||0>Z||Z>=this.rows||0>W||W>=this.columns||0>K||K>=this.columns)throw new RangeError('Argument out of range');for(var Q=new P(Z-$+1,K-W+1),G=$;G<=Z;G++)for(var ee=W;ee<=K;ee++)Q[G-$][ee-W]=this[G][ee];return Q},P.prototype.subMatrixRow=function($,Z,W){if('undefined'==typeof Z?(Z=0,W=this.columns-1):'undefined'==typeof W&&(W=this.columns-1),Z>W||0>Z||Z>=this.columns||0>W||W>=this.columns)throw new RangeError('Argument out of range.');for(var K=$.length,Q=this.rows,G=new P(K,W-Z+1),ee=0;ee<K;ee++)for(var te=Z;te<=W;te++){if(0>$[ee]||$[ee]>=Q)throw new RangeError('Argument out of range.');G[ee][te-Z]=this[$[ee]][te]}return G},P.prototype.subMatrixColumn=function($,Z,W){if('undefined'==typeof Z?(Z=0,W=this.rows-1):'undefined'==typeof W&&(W=this.rows-1),Z>W||0>Z||Z>=this.rows||0>W||W>=this.rows)throw new RangeError('Argument out of range.');for(var K=$.length,Q=this.columns,G=new P(W-Z+1,K),ee=0;ee<K;ee++)for(var te=Z;te<=W;te++){if(0>$[ee]||$[ee]>=Q)throw new RangeError('Argument out of range.');G[te-Z][ee]=this[te][$[ee]]}return G},P.prototype.trace=function(){if(!this.isSquare())throw new TypeError('The matrix is not square');for(var O=0,$=0,Z=this.rows;$<Z;$++)O+=this[$][$];return O},P.prototype.abs=function(){for(var $=this.rows,Z=this.columns,W=0;W<$;W++)for(var K=0;K<Z;K++)this[W][K]=_Mathabs(this[W][K])},D.exports=P},function(D,E,I){'use strict';(function(R){if(E.base64=!0,E.array=!0,E.string=!0,E.arraybuffer='undefined'!=typeof ArrayBuffer&&'undefined'!=typeof Uint8Array,E.nodebuffer='undefined'!=typeof R,E.uint8array='undefined'!=typeof Uint8Array,'undefined'==typeof ArrayBuffer)E.blob=!1;else{var P=new ArrayBuffer(0);try{E.blob=0===new Blob([P],{type:'application/zip'}).size}catch(O){try{var F=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,T=new F;T.append(P),E.blob=0===T.getBlob('application/zip').size}catch($){E.blob=!1}}}}).call(E,I(26).Buffer)},function(D,E,I){'use strict';E.array=I(50),E.matrix=I(137)},function(D,E,I){'use strict';var R=I(1);E.checkRowIndex=function(F,T,O){var $=O?F.rows:F.rows-1;if(0>T||T>$)throw new RangeError('Row index out of range')},E.checkColumnIndex=function(F,T,O){var $=O?F.columns:F.columns-1;if(0>T||T>$)throw new RangeError('Column index out of range')},E.checkRowVector=function(F,T){if(T.to1DArray&&(T=T.to1DArray()),T.length!==F.columns)throw new RangeError('vector size must be the same as the number of columns');return T},E.checkColumnVector=function(F,T){if(T.to1DArray&&(T=T.to1DArray()),T.length!==F.rows)throw new RangeError('vector size must be the same as the number of rows');return T},E.checkIndices=function(F,T,O){var $=T.some((W)=>{return 0>W||W>=F.rows}),Z=O.some((W)=>{return 0>W||W>=F.columns});if($||Z)throw new RangeError('Indices are out of range');if('object'!=typeof T||'object'!=typeof O)throw new TypeError('Unexpected type for row/column indices');return Array.isArray(T)||(T=Array.from(T)),Array.isArray(O)||(T=Array.from(O)),{row:T,column:O}},E.checkRange=function(F,T,O,$,Z){if(5!==arguments.length)throw new TypeError('Invalid argument type');var W=Array.from(arguments).slice(1).some(function(K){return'number'!=typeof K});if(W)throw new TypeError('Invalid argument type');if(T>O||$>Z||0>T||T>=F.rows||0>O||O>=F.rows||0>$||$>=F.columns||0>Z||Z>=F.columns)throw new RangeError('Submatrix indices are out of range')},E.getRange=function(F,T){for(var O=Array(T-F+1),$=0;$<O.length;$++)O[$]=F+$;return O},E.sumByRow=function(F){for(var T=R.Matrix.zeros(F.rows,1),O=0;O<F.rows;++O)for(var $=0;$<F.columns;++$)T.set(O,0,T.get(O,0)+F.get(O,$));return T},E.sumByColumn=function(F){for(var T=R.Matrix.zeros(1,F.columns),O=0;O<F.rows;++O)for(var $=0;$<F.columns;++$)T.set(0,$,T.get(0,$)+F.get(O,$));return T},E.sumAll=function(F){for(var T=0,O=0;O<F.rows;O++)for(var $=0;$<F.columns;$++)T+=F.get(O,$);return T}},function(D,E,I){'use strict';D.exports=I(4),D.exports.Decompositions=D.exports.DC=I(132)},function(D,E,I){'use strict';const R=I(6).array,P=I(37),F=I(28),T=I(68),O=I(71),Z=2;class W{constructor(K){this.sd=K,this.activeElement=0}static fromJcamp(K,Q){Q=Object.assign({},{keepSpectra:!0,keepRecordsRegExp:/^.+$/},Q,{xy:!0});var G=F.convert(K,Q);return new this(G)}setActiveElement(K){this.activeElement=K}getActiveElement(){return this.activeElement}getXUnits(){return this.getSpectrum().xUnit}setXUnits(K){this.getSpectrum().xUnit=K}getYUnits(){return this.getSpectrum().yUnit}getSpectraVariable(K){return this.sd.ntuples[K]}getPage(K){return this.sd.spectra[K].page}getNbPoints(K){return this.getSpectrumData(K).y.length}getFirstX(K){return void 0===K&&(K=this.activeElement),this.sd.spectra[K].firstX}setFirstX(K,Q){Q===void 0&&(Q=this.activeElement),this.sd.spectra[Q].firstX=K}getLastX(K){return void 0===K&&(K=this.activeElement),this.sd.spectra[K].lastX}setLastX(K,Q){Q===void 0&&(Q=this.activeElement),this.sd.spectra[Q].lastX=K}getFirstY(K){return void 0===K&&(K=this.activeElement),this.sd.spectra[K].firstY}setFirstY(K,Q){Q===void 0&&(Q=this.activeElement),this.sd.spectra[Q].firstY=K}getLastY(K){return void 0===K&&(K=this.activeElement),this.sd.spectra[K].lastY}setLastY(K,Q){Q===void 0&&(Q=this.activeElement),this.sd.spectra[Q].lastY=K}setDataClass(K){K===Z&&(this.getSpectrum().isPeaktable=!0,this.getSpectrum().isXYdata=!1),K===1&&(this.getSpectrum().isXYdata=!0,this.getSpectrum().isPeaktable=!1)}isDataClassPeak(){return!!this.getSpectrum().isPeaktable&&this.getSpectrum().isPeaktable}isDataClassXY(){return!!this.getSpectrum().isXYdata&&this.getSpectrum().isXYdata}setDataType(K){this.getSpectrum().dataType=K}getDataType(){return this.getSpectrum().dataType}getSpectrumData(K){return void 0===K&&(K=this.activeElement),this.sd.spectra[K].data[0]}getSpectrum(K){return void 0===K&&(K=this.activeElement),this.sd.spectra[K]}getNbSubSpectra(){return this.sd.spectra.length}getXData(K){return this.getSpectrumData(K).x}getYData(K){return this.getSpectrumData(K).y}getX(K){return this.getXData()[K]}getY(K){return this.getYData()[K]}getXYData(K){return[this.getXData(K),this.getYData(K)]}getTitle(K){return this.getSpectrum(K).title}setTitle(K,Q){this.getSpectrum(Q).title=K}getMinY(K){return R.min(this.getYData(K))}getMaxY(K){return R.max(this.getYData(K))}getMinMaxY(K){return R.minMax(this.getYData(K))}getNoiseLevel(){var K=R.robustMeanAndStdev(this.getYData()).stdev;return K*this.getNMRPeakThreshold(this.getNucleus(1))}arrayPointToUnits(K){return this.getFirstX()-K*(this.getFirstX()-this.getLastX())/(this.getNbPoints()-1)}unitsToArrayPoint(K){if(this.isDataClassXY())return _Mathround((this.getFirstX()-K)*(-1/this.getDeltaX()));if(this.isDataClassPeak()){var Q=0,G=this.getNbPoints()-1,ee=0,te;if(this.getFirstX()>this.getLastX()){if(G=0,ee=this.getNbPoints()-1,K>this.getFirstX())return this.getNbPoints();if(K<this.getLastX())return-1}else{if(K<this.getFirstX())return-1;if(K>this.getLastX())return this.getNbPoints()}for(;1<_Mathabs(G-ee);){if(te=_Mathround(_Mathfloor((G+ee)/2)),this.getX(te)===K)return te;this.getX(te)>K?G=te:ee=te}return Q=ee,_Mathabs(this.getX(ee)-K)>_Mathabs(this.getX(G)-K)&&(Q=G),Q}return 0}getDeltaX(){return(this.getLastX()-this.getFirstX())/(this.getNbPoints()-1)}setMinMax(K,Q){P.scale(this.getYData(),{min:K,max:Q,inplace:!0})}setMin(K){P.scale(this.getYData(),{min:K,inplace:!0})}setMax(K){P.scale(this.getYData(),{max:K,inplace:!0})}yShift(K){var Q=this.getSpectrumData().y,G=this.getNbPoints(),ee=0;for(ee=0;ee<G;ee++)Q[ee]+=K;this.getSpectrum().firstY+=K,this.getSpectrum().lastY+=K}shift(K){for(let te=0;te<this.getNbSubSpectra();te++){this.setActiveElement(te);var Q=this.getSpectrumData().x,G=this.getNbPoints(),ee=0;for(ee=0;ee<G;ee++)Q[ee]+=K;this.getSpectrum().firstX+=K,this.getSpectrum().lastX+=K}}fill(K,Q,G){var ee,te,ne,ae,se;K>Q&&(ee=K,K=Q,Q=ee);for(var oe=0;oe<this.getNbSubSpectra();oe++)if(this.setActiveElement(oe),ae=this.getXData(),se=this.getYData(),te=this.unitsToArrayPoint(K),ne=this.unitsToArrayPoint(Q),te>ne&&(ee=te,te=ne,ne=ee),0>te&&(te=0),ne>=this.getNbPoints&&(ne=this.getNbPoints-1),'number'!=typeof G)se.splice(te,ne-te),ae.splice(te,ne-te);else for(oe=te;oe<=ne;oe++)se[oe]=G}suppressZone(K,Q){this.fill(K,Q),this.setDataClass(Z)}getMaxPeak(){for(var K=this.getSpectraDataY(),Q=K[0],G=0,ee=0;ee<K.length;ee++)Q<K[ee]&&(Q=K[ee],G=ee);return[this.getX(G),Q]}getParamDouble(K,Q){var G=this.sd.info[K];return G||(G=Q),G}getParamString(K,Q){var G=this.sd.info[K];return G||(G=Q),G+''}getParamInt(K,Q){var G=this.sd.info[K];return G||(G=Q),G}getParam(K,Q){var G=this.sd.info[K];return G||(G=Q),G}containsParam(K){return!!this.sd.info[K]}getSpectraDataY(){return this.getYData()}getSpectraDataX(){return this.getXData()}resetMinMax(){}putParam(K,Q){this.sd.info[K]=Q}getArea(K,Q){var G=this.unitsToArrayPoint(K),ee=this.unitsToArrayPoint(Q),te=0;G>ee&&(G+=ee,ee=G-ee,G-=ee),G=0>G?0:G,ee=ee>=this.getNbPoints()?this.getNbPoints()-1:ee;for(var ne=G;ne<ee;ne++)te+=this.getY(ne);return te*_Mathabs(this.getDeltaX())}updateIntegrals(K,Q){var G=0;if(K.forEach((te)=>{te.integral=this.getArea(te.from,te.to),G+=te.integral}),0!==Q.nH){var ee=Q.nH/G;K.forEach((te)=>{te.integral*=ee})}}getVector(K,Q,G){return G?P.getEquallySpacedData(this.getSpectraDataX(),this.getSpectraDataY(),{from:K,to:Q,numberOfPoints:G}):this.getPointsInWindow(K,Q)}reduceData(K,Q,G){if(!this.isDataClassXY())throw Error('reduceData can only apply on equidistant data');for(let te=0;te<this.getNbSubSpectra();te++)if(this.setActiveElement(te),'hz'!==this.getXUnits().toLowerCase())if('undefined'!=typeof G){let ne=this.getSpectraDataX(),ae=this.getSpectraDataY();ne[0]>ne[1]&&K<Q?(K+=Q,Q=K-Q,K-=Q):K>Q&&(K+=Q,Q=K-Q,K-=Q),ae=P.getEquallySpacedData(ne,ae,{from:K,to:Q,numberOfPoints:G});let se=(Q-K)/(ae.length-1);ne=Array(ae.length).fill(K);for(let oe=0;oe<ae.length;oe++)ne[oe]+=se*oe;this.sd.spectra[te].data[0].x=ne,this.sd.spectra[te].data[0].y=ae,this.setFirstX(ne[0]),this.setLastX(ne[ne.length-1]),this.sd.spectra[te].nbPoints=ae.length}else{var ee=this.getPointsInWindow(K,Q);this.sd.spectra[te].data[0].x=ee[0],this.sd.spectra[te].data[0].y=ee[1],this.setFirstX(ee[0][0]),this.setLastX(ee[0][ee[0].length-1]),this.sd.spectra[te].nbPoints=ee[1].length}return this.setActiveElement(0),this}getPointsInWindow(K,Q){if(!this.isDataClassXY())throw Error('getPointsInWindow can only apply on equidistant data');var G=this.unitsToArrayPoint(K),ee=this.unitsToArrayPoint(Q);if(G>ee&&(G+=ee,ee=G-ee,G-=ee),0<=G&&ee<=this.getNbPoints()-2){var te=this.getSpectraDataY().slice(G,ee+1),ne=this.getSpectraDataX().slice(G,ee+1);return[ne,te]}throw Error('values outside this in range')}is2D(){return'undefined'!=typeof this.sd.twoD&&this.sd.twoD}setTotalIntegral(K){this.totalIntegralValue=K}get totalIntegral(){if(this.totalIntegralValue)return this.totalIntegralValue;if(this.molecule){if(this.getNucleus(0).indexOf('H'))return 1*this.mf.replace(/.*H([0-9]+).*/,'$1');if(this.getNucleus(0).indexOf('C'))return 1*this.mf.replace(/.*C([0-9]+).*/,'$1')}else return 100;return 1}setMolfile(K){this.molfile=K}setMF(K){this.mf=K}createPeaks(K){return this.peaks=null,this.peaks=this.getPeaks(K),this.peaks}getPeaks(K){return this.peaks?this.peaks:O(this,K)}toJcamp(K){var Q=new T;return Q.convert(this,Object.assign({},{yFactor:1,encode:'DIFDUP',type:'SIMPLE'},K))}}D.exports=W},function(D,E){'use strict';var R='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';E.encode=function(P){for(var T='',ee=0,O,$,Z,W,K,Q,G;ee<P.length;)O=P.charCodeAt(ee++),$=P.charCodeAt(ee++),Z=P.charCodeAt(ee++),W=O>>2,K=(3&O)<<4|$>>4,Q=(15&$)<<2|Z>>6,G=63&Z,isNaN($)?Q=G=64:isNaN(Z)&&(G=64),T=T+R.charAt(W)+R.charAt(K)+R.charAt(Q)+R.charAt(G);return T},E.decode=function(P){var T='',O,$,Z,W,K,Q,G,ee=0;for(P=P.replace(/[^A-Za-z0-9\+\/\=]/g,'');ee<P.length;)W=R.indexOf(P.charAt(ee++)),K=R.indexOf(P.charAt(ee++)),Q=R.indexOf(P.charAt(ee++)),G=R.indexOf(P.charAt(ee++)),O=W<<2|K>>4,$=(15&K)<<4|Q>>2,Z=(3&Q)<<6|G,T+=_StringfromCharCode(O),64!=Q&&(T+=_StringfromCharCode($)),64!=G&&(T+=_StringfromCharCode(Z));return T}},function(D,E,I){'use strict';E.STORE={magic:'\0\0',compress:function(R){return R},uncompress:function(R){return R},compressInputType:null,uncompressInputType:null},E.DEFLATE=I(86)},function(D,E,I){'use strict';(function(R){D.exports=function(P,F){return new R(P,F)},D.exports.test=function(P){return R.isBuffer(P)}}).call(E,I(26).Buffer)},function(D,E,I){'use strict';var R=I(5),P=I(0),F=I(84),T=I(33),O=I(32),$=I(10),Z=I(11),W=I(30),K=I(12),Q=I(36),G=I(90),ee=I(91),te=function(be){if(be._data instanceof W&&(be._data=be._data.getContent(),be.options.binary=!0,be.options.base64=!1,'uint8array'===P.getTypeOf(be._data))){var ye=be._data;be._data=new Uint8Array(ye.length),0!==ye.length&&be._data.set(ye,0)}return be._data},ne=function(be){var ye=te(be),ke=P.getTypeOf(ye);return'string'===ke?!be.options.binary&&R.nodebuffer?K(ye,'utf-8'):be.asBinary():ye},ae=function(be){var ye=te(this);return null===ye||'undefined'==typeof ye?'':(this.options.base64&&(ye=$.decode(ye)),ye=be&&this.options.binary?xe.utf8decode(ye):P.transformTo('string',ye),be||this.options.binary||(ye=P.transformTo('string',xe.utf8encode(ye))),ye)},se=function(be,ye,ke){this.name=be,this.dir=ke.dir,this.date=ke.date,this.comment=ke.comment,this.unixPermissions=ke.unixPermissions,this.dosPermissions=ke.dosPermissions,this._data=ye,this.options=ke,this._initialMetadata={dir:ke.dir,date:ke.date}};se.prototype={asText:function(){return ae.call(this,!0)},asBinary:function(){return ae.call(this,!1)},asNodeBuffer:function(){var be=ne(this);return P.transformTo('nodebuffer',be)},asUint8Array:function(){var be=ne(this);return P.transformTo('uint8array',be)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var oe=function(be,ye){var ke='',_e;for(_e=0;_e<ye;_e++)ke+=_StringfromCharCode(255&be),be>>>=8;return ke},le=function(be){return be=be||{},!0===be.base64&&(null===be.binary||void 0===be.binary)&&(be.binary=!0),be=P.extend(be,O),be.date=be.date||new Date,null!==be.compression&&(be.compression=be.compression.toUpperCase()),be},de=function(be,ye,ke){var _e=P.getTypeOf(ye),we;if(ke=le(ke),'string'==typeof ke.unixPermissions&&(ke.unixPermissions=parseInt(ke.unixPermissions,8)),ke.unixPermissions&&16384&ke.unixPermissions&&(ke.dir=!0),ke.dosPermissions&&16&ke.dosPermissions&&(ke.dir=!0),ke.dir&&(be=ce(be)),ke.createFolders&&(we=ue(be))&&he.call(this,we,!0),ke.dir||null===ye||'undefined'==typeof ye)ke.base64=!1,ke.binary=!1,ye=null,_e=null;else if('string'===_e)ke.binary&&!ke.base64&&!0!==ke.optimizedBinaryString&&(ye=P.string2binary(ye));else{if(ke.base64=!1,ke.binary=!0,!_e&&!(ye instanceof W))throw new Error('The data of \''+be+'\' is in an unsupported format !');'arraybuffer'===_e&&(ye=P.transformTo('uint8array',ye))}var je=new se(be,ye,ke);return this.files[be]=je,je},ue=function(be){'/'==be.slice(-1)&&(be=be.substring(0,be.length-1));var ye=be.lastIndexOf('/');return 0<ye?be.substring(0,ye):''},ce=function(be){return'/'!=be.slice(-1)&&(be+='/'),be},he=function(be,ye){return ye='undefined'!=typeof ye&&ye,be=ce(be),this.files[be]||de.call(this,be,null,{dir:!0,createFolders:ye}),this.files[be]},ge=function(be,ye,ke){var _e=new W,we;return be._data instanceof W?(_e.uncompressedSize=be._data.uncompressedSize,_e.crc32=be._data.crc32,0===_e.uncompressedSize||be.dir?(ye=Z.STORE,_e.compressedContent='',_e.crc32=0):be._data.compressionMethod===ye.magic?_e.compressedContent=be._data.getCompressedContent():(we=be._data.getContent(),_e.compressedContent=ye.compress(P.transformTo(ye.compressInputType,we),ke))):(we=ne(be),(!we||0===we.length||be.dir)&&(ye=Z.STORE,we=''),_e.uncompressedSize=we.length,_e.crc32=F(we),_e.compressedContent=ye.compress(P.transformTo(ye.compressInputType,we),ke)),_e.compressedSize=_e.compressedContent.length,_e.compressionMethod=ye.magic,_e},pe=function(be,ye){var ke=be;return be||(ke=ye?16893:33204),(65535&ke)<<16},me=function(be){return 63&(be||0)},fe=function(be,ye,ke,_e,we,je){var ve=ke.compressedContent,Se=je!==Q.utf8encode,De=P.transformTo('string',je(ye.name)),Ce=P.transformTo('string',Q.utf8encode(ye.name)),Ee=ye.comment||'',Ie=P.transformTo('string',je(Ee)),Ae=P.transformTo('string',Q.utf8encode(Ee)),Re=Ce.length!==ye.name.length,Pe=Ae.length!==Ee.length,Fe=ye.options,Me='',Xe='',Ye='',Te,ze,Ne,Oe;Ne=ye._initialMetadata.dir===ye.dir?Fe.dir:ye.dir,Oe=ye._initialMetadata.date===ye.date?Fe.date:ye.date;var Le=0,Ue=0;Ne&&(Le|=16),'UNIX'===we?(Ue=798,Le|=pe(ye.unixPermissions,Ne)):(Ue=20,Le|=me(ye.dosPermissions,Ne)),Te=Oe.getHours(),Te<<=6,Te|=Oe.getMinutes(),Te<<=5,Te|=Oe.getSeconds()/2,ze=Oe.getFullYear()-1980,ze<<=4,ze|=Oe.getMonth()+1,ze<<=5,ze|=Oe.getDate(),Re&&(Xe=oe(1,1)+oe(F(De),4)+Ce,Me+='up'+oe(Xe.length,2)+Xe),Pe&&(Ye=oe(1,1)+oe(this.crc32(Ie),4)+Ae,Me+='uc'+oe(Ye.length,2)+Ye);var Be='';Be+='\n\0',Be+=!Se&&(Re||Pe)?'\0\b':'\0\0',Be+=ke.compressionMethod,Be+=oe(Te,2),Be+=oe(ze,2),Be+=oe(ke.crc32,4),Be+=oe(ke.compressedSize,4),Be+=oe(ke.uncompressedSize,4),Be+=oe(De.length,2),Be+=oe(Me.length,2);var Ve=T.LOCAL_FILE_HEADER+Be+De+Me,qe=T.CENTRAL_FILE_HEADER+oe(Ue,2)+Be+oe(Ie.length,2)+'\0\0\0\0'+oe(Le,4)+oe(_e,4)+De+Me+Ie;return{fileRecord:Ve,dirRecord:qe,compressedObject:ke}},xe={load:function(){throw new Error('Load method is not defined. Is the file jszip-load.js included ?')},filter:function(be){var ye=[],ke,_e,we,je;for(ke in this.files)this.files.hasOwnProperty(ke)&&(we=this.files[ke],je=new se(we.name,we._data,P.extend(we.options)),_e=ke.slice(this.root.length,ke.length),ke.slice(0,this.root.length)===this.root&&be(_e,je)&&ye.push(je));return ye},file:function(be,ye,ke){if(1===arguments.length){if(P.isRegExp(be)){var _e=be;return this.filter(function(we,je){return!je.dir&&_e.test(we)})}return this.filter(function(we,je){return!je.dir&&we===be})[0]||null}return be=this.root+be,de.call(this,be,ye,ke),this},folder:function(be){if(!be)return this;if(P.isRegExp(be))return this.filter(function(we,je){return je.dir&&be.test(we)});var ye=this.root+be,ke=he.call(this,ye),_e=this.clone();return _e.root=ke.name,_e},remove:function(be){be=this.root+be;var ye=this.files[be];if(ye||('/'!=be.slice(-1)&&(be+='/'),ye=this.files[be]),ye&&!ye.dir)delete this.files[be];else for(var ke=this.filter(function(we,je){return je.name.slice(0,be.length)===be}),_e=0;_e<ke.length;_e++)delete this.files[ke[_e].name];return this},generate:function(be){be=P.extend(be||{},{base64:!0,compression:'STORE',compressionOptions:null,type:'base64',platform:'DOS',comment:null,mimeType:'application/zip',encodeFileName:Q.utf8encode}),P.checkSupport(be.type),('darwin'===be.platform||'freebsd'===be.platform||'linux'===be.platform||'sunos'===be.platform)&&(be.platform='UNIX'),'win32'===be.platform&&(be.platform='DOS');var ye=[],ke=0,_e=0,ve=P.transformTo('string',be.encodeFileName(be.comment||this.comment||'')),we,je;for(var Se in this.files)if(this.files.hasOwnProperty(Se)){var De=this.files[Se],Ce=De.options.compression||be.compression.toUpperCase(),Ee=Z[Ce];if(!Ee)throw new Error(Ce+' is not a valid compression method !');var Ie=De.options.compressionOptions||be.compressionOptions||{},Ae=ge.call(this,De,Ee,Ie),Re=fe.call(this,Se,De,Ae,ke,be.platform,be.encodeFileName);ke+=Re.fileRecord.length+Ae.compressedSize,_e+=Re.dirRecord.length,ye.push(Re)}var Pe='';Pe=T.CENTRAL_DIRECTORY_END+'\0\0\0\0'+oe(ye.length,2)+oe(ye.length,2)+oe(_e,4)+oe(ke,4)+oe(ve.length,2)+ve;var Fe=be.type.toLowerCase();for(we='uint8array'===Fe||'arraybuffer'===Fe||'blob'===Fe||'nodebuffer'===Fe?new ee(ke+_e+Pe.length):new G(ke+_e+Pe.length),je=0;je<ye.length;je++)we.append(ye[je].fileRecord),we.append(ye[je].compressedObject.compressedContent);for(je=0;je<ye.length;je++)we.append(ye[je].dirRecord);we.append(Pe);var Te=we.finalize();switch(be.type.toLowerCase()){case'uint8array':case'arraybuffer':case'nodebuffer':return P.transformTo(be.type.toLowerCase(),Te);case'blob':return P.arrayBuffer2Blob(P.transformTo('arraybuffer',Te),be.mimeType);case'base64':return be.base64?$.encode(Te):Te;default:return Te;}},crc32:function(be,ye){return F(be,ye)},utf8encode:function(be){return P.transformTo('string',Q.utf8encode(be))},utf8decode:function(be){return Q.utf8decode(be)}};D.exports=xe},function(D,E,I){'use strict';function R(){this.children=[],this.distance=-1,this.index=[]}const P=I(78);R.prototype.cut=function(F){if(0>F)throw new RangeError('Threshold too small');var T=new R;T.children=this.children,T.distance=this.distance,T.index=this.index;for(var O=[T],$=[],Z;0<O.length;)Z=O.shift(),F>=Z.distance?$.push(Z):O=O.concat(Z.children);return $},R.prototype.group=function(F){if(!_NumberisInteger(F)||1>F)throw new RangeError('Number of groups must be a positive integer');const T=new P(function(Z,W){return W.distance-Z.distance});for(T.push(this);T.size()<F;){var O=T.pop();if(0===O.children.length)break;O.children.forEach((Z)=>T.push(Z))}var $=new R;return $.children=T.toArray(),$.distance=this.distance,$},R.prototype.traverse=function(F){function T(O,$){if($(O),O.children)for(var Z=O.children.length-1;0<=Z;Z--)T(O.children[Z],$)}T(this,F)},D.exports=R},function(D,E){'use strict';E.hypotenuse=function(P,F){var T;return _Mathabs(P)>_Mathabs(F)?(T=F/P,_Mathabs(P)*_Mathsqrt(1+T*T)):0===F?0:(T=P/F,_Mathabs(F)*_Mathsqrt(1+T*T))},E.getEmpty2DArray=function(R,P){for(var F=Array(R),T=0;T<R;T++)F[T]=Array(P);return F},E.getFilled2DArray=function(R,P,F){for(var T=Array(R),O=0;O<R;O++){T[O]=Array(P);for(var $=0;$<P;$++)T[O][$]=F}return T}},function(D,E,I){'use strict';D.exports=I(1).Matrix,D.exports.Decompositions=D.exports.DC=I(116)},function(D,E){'use strict';E.hypotenuse=function(P,F){var T;return _Mathabs(P)>_Mathabs(F)?(T=F/P,_Mathabs(P)*_Mathsqrt(1+T*T)):0===F?0:(T=P/F,_Mathabs(F)*_Mathsqrt(1+T*T))}},function(D){D.exports=function(R,P){R=R||0;for(var F=Array(R),T=0;T<R;T++)F[T]=P;return F}},function(D){'use strict';D.exports={0:'',1:'stream end',2:'need dictionary','-1':'file error','-2':'stream error','-3':'data error','-4':'insufficient memory','-5':'buffer error','-6':'incompatible version'}},function(D,E,I){'use strict';function R(W,K){var Q=K.jc,G=Q===void 0?W.j:Q,ee=K.cont,te=ee===void 0?1:ee,ne=K.pattern,ae=ne===void 0?'':ne,se=K.tolerance,oe=se===void 0?K.tolerance||0.05:se,le=K.newNmrJs,de=le===void 0?[]:le,ue=K.diaIDs,ce=ue===void 0?[]:ue,he=K.atoms,ge=he===void 0?[]:he;if(G&&0<G.length){G.sort(function(fe,xe){return fe.coupling-xe.coupling}),G[0].diaID&&(ce=[G[0].diaID]),G[0].assignment&&(ge=[G[0].assignment]);for(var pe=0;pe<G.length-1;pe++)if(_Mathabs(G[pe].coupling-G[pe+1].coupling)<oe)te++,ce.push(G[pe].diaID),ge.push(G[pe].assignment);else{let fe={coupling:_Mathabs(G[pe].coupling),multiplicity:O[te]};0<ce.length&&(fe.diaID=ce),0<ge.length&&(fe.assignment=ge),de.push(fe),ae+=O[te],te=1,G[0].diaID&&(ce=[G[pe].diaID]),G[0].assignment&&(ge=[G[pe].assignment])}let me={coupling:_Mathabs(G[pe].coupling),multiplicity:O[te]};0<ce.length&&(me.diaID=ce),0<ge.length&&(me.assignment=ge),de.push(me),ae+=O[te],W.j=de}else ae='s';return ae}const P=I(74),F=I(75),T=I(76),O=['s','d','t','q','quint','h','sept','o','n'],$=I(23);class Z extends Array{constructor(W){if(Array.isArray(W)){super(W.length);for(let K=0;K<W.length;K++)this[K]=W[K]}else'number'==typeof W?super(W):super()}static fromPrediction(W,K){K=Object.assign({},{lineWidth:1,frequency:400,nucleus:'1H'},K);const Q=W.length,G=Array(Q);var ee,te,ne,ae,se,oe,le;for(ee=0;ee<Q;ee++)G[W[ee].diaIDs[0]]?G[W[ee].diaIDs[0]].push(ee):G[W[ee].diaIDs[0]]=[ee];const de=Object.keys(G),ue=Array(de.length);for(ee=0;ee<de.length;ee++){if(ne=G[de[ee]],ae=W[ne[0]],se=0,le=ae.j,le)for(te=0;te<le.length;te++)se+=le[te].coupling;se+=2*K.lineWidth,se/=K.frequency,ue[ee]={from:ae.delta-se,to:ae.delta+se,integral:ae.integral,signal:[W[ne[0]]]},ue[ee].multiplicity='';for(var ce=1;ce<ne.length;ce++){ue[ee].signal.push(W[ne[ce]]);for(var he=0;he<W[ne[ce]].j.length;he++)ue[ee].multiplicity+=W[ne[ce]].j[he].multiplicity;ue[ee].integral++}}for(ee=0;ee<ue.length;ee++)for(ue[ee]._highlight=ue[ee].signal[0].diaIDs,oe=(ue[ee].from+ue[ee].to)/2,se=_Mathabs(ue[ee].from-ue[ee].to),te=ue.length-1;te>ee;te--)_Mathabs(oe-(ue[te].from+ue[te].to)/2)<=_Mathabs(se+_Mathabs(ue[te].from-ue[te].to))/2&&(ue[ee].multiplicity='m',ue[ee].from=_Mathmin(ue[ee].from,ue[te].from),ue[ee].to=_Mathmax(ue[ee].to,ue[te].to),ue[ee].integral+=ue[te].integral,ue[ee]._highlight.push(ue[te].signal[0].diaIDs[0]),ue[te].signal.forEach((ge)=>{ue[ee].signal.push(ge)}),ue.splice(te,1),te=ue.length-1,oe=(ue[ee].from+ue[ee].to)/2,se=_Mathabs(ue[ee].from-ue[ee].to));return new Z(ue)}static fromSpectrum(W,K){return this.options=Object.assign({},{nH:99,clean:!0,realTop:!1,thresholdFactor:1,compile:!0,integralType:'sum',optimize:!0,idPrefix:'',format:'new',frequencyCluster:16},K),W.getRanges(this.options)}updateMultiplicity(){for(let Q=0;Q<this.length;Q++){var W=this[Q];for(let G=0;G<W.signal.length;G++){var K=W.signal[G];if(Array.isArray(K.j)&&!K.multiplicity){K.multiplicity='';for(let ee=0;ee<K.j.length;ee++)K.multiplicity+=K.j[ee].multiplicity}}}return this}updateIntegrals(W){var K=W.factor||1,Q;if(W.sum){var G=W.sum||1,ee=0;for(Q=0;Q<this.length;Q++)ee+=this[Q].integral;K=G/ee}for(Q=0;Q<this.length;Q++)this[Q].integral*=K;return this}getVector(W){return F(this.getPeakList(),W)}getPeakList(){var W=[],K,Q;for(K=0;K<this.length;K++){var G=this[K];for(Q=0;Q<G.signal.length;Q++)W=W.concat(G.signal[Q].peak)}return W}getACS(W){return P(this,W)}getAnnotations(W){return T.annotations1D(this,W)}toIndex(W){var K=[];(W.compactPattern||!1)&&this.compactPatterns(W);var Q=!0,G=!1,ee;try{for(var te=this[Symbol.iterator](),ne,ae;!(Q=(ne=te.next()).done);Q=!0)if(ae=ne.value,Array.isArray(ae.signal)&&0<ae.signal.length){var se=!0,oe=!1,le=void 0;try{for(var de=ae.signal[Symbol.iterator](),ue;!(se=(ue=de.next()).done);se=!0){let ce=ue.value;K.push({multiplicity:ce.multiplicity||$(ce),delta:ce.delta})}}catch(ce){oe=!0,le=ce}finally{try{!se&&de.return&&de.return()}finally{if(oe)throw le}}}else K.push({delta:(ae.to+ae.from)/2,multiplicity:'m'})}catch(ce){G=!0,ee=ce}finally{try{!Q&&te.return&&te.return()}finally{if(G)throw ee}}return K}compactPatterns(W){this.forEach((K)=>{K.signal.forEach((Q)=>{Q.multiplicity=R(Q,W)})})}clone(){let W=JSON.parse(JSON.stringify(this));return new Z(W)}}D.exports=Z},function(D,E,I){'use strict';D.exports.fourierTransform=I(63),D.exports.zeroFilling=I(66),D.exports.apodization=I(61),D.exports.phaseCorrection=I(64),D.exports.digitalFilter=I(62)},function(D){'use strict';function R(K,Q,G,ee){var te=F(K,Q,G,-ee[0],!0),ne=0,ae=null,se=null;0>te&&(ae={nucleusX:G.nucleusX,nucleusY:G.nucleusY},ae.resolutionX=G.resolutionX,ae.resolutionY=G.resolutionY,ae.shiftX=G.shiftY,ae.shiftY=G.shiftX,ae.peaks=[{x:G.shiftY,y:G.shiftX,z:1}],K.push(ae),se=[-ee[0],ee[1]],Q.push(se),ne++);var oe=0,le=!1,de=!1,ue;for(oe=K.length-1;0<=oe;oe--)ue=K[oe],0===Q[oe][0]&&(_Mathabs(ue.shiftX-G.shiftX)<Z&&(le=!0),_Mathabs(ue.shiftY-G.shiftY)<Z&&(de=!0));return!1==le&&(ae={nucleusX:G.nucleusX,nucleusY:G.nucleusY},ae.resolutionX=G.resolutionX,ae.resolutionY=G.resolutionY,ae.shiftX=G.shiftX,ae.shiftY=G.shiftX,ae.peaks=[{x:G.shiftX,y:G.shiftX,z:1}],K.push(ae),se=[0,ee[1]],Q.push(se),ne++),!1==de&&(ae={nucleusX:G.nucleusX,nucleusY:G.nucleusY},ae.resolutionX=G.resolutionX,ae.resolutionY=G.resolutionY,ae.shiftX=G.shiftY,ae.shiftY=G.shiftY,ae.peaks=[{x:G.shiftY,y:G.shiftY,z:1}],K.push(ae),se=[0,ee[1]],Q.push(se),ne++),ne}function P(K,Q,G,ee){var te=0,ne=0,ae=4*G.shiftX,se=[],oe=[],le;for(ne=K.length-1;0<=ne;ne--)le=K[ne],0!==Q[ne][0]&&(_Mathabs(le.shiftX-G.shiftX)<Z?(te++,ee&&Q[ne][1]++,se.push(ne),ae+=le.shiftX):_Mathabs(le.shiftY-G.shiftY)<Z&&(te++,ee&&Q[ne][1]++,oe.push(ne),ae+=le.shiftY));if(ae/=se.length+oe.length+4,0<se.length)for(ne=se.length-1;0<=ne;ne--)K[se[ne]].shiftX=ae;if(0<oe.length)for(ne=oe.length-1;0<=ne;ne--)K[oe[ne]].shiftY=ae;return G.shiftX=ae,G.shiftY=ae,te}function F(K,Q,G,ee,te){for(var ne=K.length-1;0<=ne;ne--)if(Q[ne][0]===ee&&O(G,K[ne],te)<W){if(!te){let ae=(K[ne].shiftX+G.shiftX)/2,se=(K[ne].shiftY+G.shiftY)/2;K[ne].shiftX=ae,K[ne].shiftY=se,G.shiftX=ae,G.shiftY=se}else{let ae=G.shiftX,se=K[ne].shiftX;K[ne].shiftY=ae,G.shiftY=se}return ne}return-1}function T(K){for(var Q=Array(K.length),G=K.length-1;0<=G;G--)if(Q[G]=[0,0],_Mathabs(K[G].shiftX-K[G].shiftY)<=Z){Q[G][1]=1;var ee=(2*K[G].shiftX+K[G].shiftY)/3;K[G].shiftX=ee,K[G].shiftY=ee}else Q[G][0]=0<K[G].shiftX-K[G].shiftY?1:-1;return Q}function O(K,Q,G){return G?_Mathsqrt(_Mathpow(K.shiftX-Q.shiftY,2)+_Mathpow(K.shiftY-Q.shiftX,2)):_Mathsqrt(_Mathpow(K.shiftX-Q.shiftX,2)+_Mathpow(K.shiftY-Q.shiftY,2))}function $(K,Q){var G=0,ee=0,te,ne;for(te=0;te<K.length;te++){var ae=K[te];for(ne=0;ne<Q.length;ne++)G=(Q[ne].startX+Q[ne].stopX)/2,ee=_Mathabs(Q[ne].startX-Q[ne].stopX)/2,ae.nucleusX===Q[ne].nucleus&&_Mathabs(ae.shiftX-G)<=ee&&ae._highlight.push(Q[ne]._highlight[0]),ae.nucleusY===Q[ne].nucleus&&_Mathabs(ae.shiftY-G)<=ee&&ae._highlight.push(Q[ne]._highlight[0])}}var Z=0.05,W=0.05;D.exports={clean:function(Q,G){var ee=Number.NEGATIVE_INFINITY,te;for(te=Q.length-1;0<=te;te--)_Mathabs(Q[te].z)>ee&&(ee=_Mathabs(Q[te].z));for(ee*=G,te=Q.length-1;0<=te;te--)_Mathabs(Q[te].z)<ee&&Q.splice(te,1);return Q},enhanceSymmetry:function(Q){var G=T(Q),ee=Q,te,ne,ae,se;for(te=ee.length-1;0<=te;te--)se=ee[te],1<se.peaks.length&&G[te][1]++,1===G[te][0]&&(ae=F(ee,G,se,-1,!0),0<=ae&&(G[te][1]+=2,G[ae][1]+=2));for(te=ee.length-1;0<=te;te--)se=ee[te],0===G[te][0]&&(ne=P(ee,G,se,!0),G[te][1]+=ne);var oe=0;for(te=ee.length-1;0<=te;te--)0!==G[te][0]&&2<G[te][1]&&(oe++,oe+=R(ee,G,ee[te],G[te])),2<=G[te][1]&&0===G[te][0]&&oe++;var le=Array(oe);for(oe--,te=ee.length-1;0<=te;te--)(0!==G[te][0]&&2<G[te][1]||0===G[te][0]&&1<G[te][1])&&(le[oe--]=ee[te]);return le},alignDimensions:function(Q,G){for(var ee=0,te;ee<G.length;ee++)te=G[ee],te&&$(Q,te)}}},function(D){'use strict';D.exports=function(P){let F='';if(P.pubMultiplicity)F=P.pubMultiplicity;else if(P.multiplicity)F=P.multiplicity;else{if(Array.isArray(P.j)&&0<P.j.length){var T=P.j,O=!1,$=!0,Z=!1,W;try{for(var K=T[Symbol.iterator](),Q;!($=(Q=K.next()).done);$=!0){let G=Q.value;1<G.multiplicity.length?(F+=' ',O=!0):O&&(F+=' ',O=!1),F+=G.multiplicity}}catch(G){Z=!0,W=G}finally{try{!$&&K.return&&K.return()}finally{if(Z)throw W}}return F}return P.delta?'s':'m'}return F}},function(D){D.exports=function(I,R,P,F,T){var O,$;if(void 0===F)F=0;else if(F|=0,0>F||F>=I.length)throw new RangeError('invalid lower bound');if(void 0===T)T=I.length-1;else if(T|=0,T<F||T>=I.length)throw new RangeError('invalid upper bound');for(;F<=T;)if(O=F+(T-F>>1),$=+P(I[O],R,O,I),0>$)F=O+1;else if(0<$)T=O-1;else return O;return~F}},function(D,E,I){'use strict';function P(se,oe){oe=oe||{};var le=new Date,de;if(se.ser||se['2rr'])de=T(se,oe);else if(se['1r']||se['1i']||se.fid)de=F(se,oe);else throw new RangeError('The current files are invalid');de.twoD&&!oe.noContours&&(K(de),de.profiling&&de.profiling.push({action:'Finished countour plot calculation',time:new Date-le}),!oe.keepSpectra&&delete de.spectra);var ue=de.spectra;if(oe.xy&&0<ue.length)for(var ce=0,he;ce<ue.length;ce++)if(he=ue[ce],0<he.data.length)for(var ge=0;ge<he.data.length;ge++){for(var pe=he.data[ge],me={x:Array(pe.length/2),y:Array(pe.length/2)},fe=0;fe<pe.length;fe+=2)me.x[fe/2]=pe[fe],me.y[fe/2]=pe[fe+1];he.data[ge]=me}return de}function F(se,oe){for(var le=$(se.procs,oe),de=$(se.acqus,oe),ue=Object.keys(de.info),ce=0,he;ce<ue.length;ce++)he=ue[ce],void 0===le.info[he]&&(le.info[he]=de.info[he]);return se['1r']||se['1i']?(se['1r']&&O(se['1r'],le,'1r',!0),se['1i']&&O(se['1i'],le,'1i',!1)):se.fid&&Z(se.fid,le),le}function T(se,oe){var le,de,ce;if(se['2rr']){for(var he=$(se.procs,oe),ge=$(se.acqus,oe),pe=Object.keys(ge.info),me=0,fe;me<pe.length;me++)fe=pe[me],void 0===he.info[fe]&&(he.info[fe]=ge.info[fe]);ge=$(se.proc2s,oe),he.info.nbSubSpectra=ge.info.$SI=parseInt(ge.info.$SI),le=ge.info.$SF=parseFloat(ge.info.$SF),de=ge.info.$SWP=parseFloat(ge.info.$SWP),ce=ge.info.$OFFSET=parseFloat(ge.info.$OFFSET)}else se.ser&&(he=$(se.acqus,oe),ge=$(se.acqu2s,oe),he.info.nbSubSpectra=ge.info.$SI=parseInt(ge.info.$TD),he.info.$SI=parseInt(he.info.$TD),de=ge.info.$SW,he.info.$SWP=he.info.$SWH,he.info.$SF=parseFloat(ge.info.$SFO1),he.info.$OFFSET=0,le=ge.info.$SFO1=parseFloat(ge.info.$SFO1),le=1,ce=0,he.info.$AXNUC=he.info.$NUC1,ge.info.$AXNUC=ge.info.$NUC1);he.info.firstY=ce,he.info.lastY=ce-de/le,he.info.$BF2=le,he.info.$SFO1=le;var xe=he.info.nbSubSpectra,be=he.info.firstY,ye=(he.info.lastY-he.info.firstY)/(xe-1);se['2rr']?O(se['2rr'],he,'2rr',!0):se.ser&&Z(se.ser,he,'ser',!0);for(var me=0;me<xe;me++)be+=ye,he.spectra[me].pageValue=be;se.ser?'TYPE_2DNMR_FID':'TYPE_2DNMR_SPECTRUM';return he.info['2D_Y_NUCLEUS']=ge.info.$AXNUC,he.info['2D_X_NUCLEUS']=he.info.$AXNUC,he.info['2D_Y_FRECUENCY']=le,he.info['2D_Y_OFFSET']=ce,he.info['2D_X_FRECUENCY']=he.info.$SF,he.info['2D_X_OFFSET']=he.info.$OFFSET,he.twoD=!0,he}function O(se,oe,le,de){var ue=oe.info.$SI=parseInt(oe.info.$SI),ce=parseFloat(oe.info.$SWP),he=parseFloat(oe.info.$SF),ge=he,pe=oe.shiftOffsetVal;oe.info.observeFrequency=he,oe.info.$BF1=ge,oe.info.$SFO1=he,oe.info.brukerReference=ge;var me=parseInt(oe.info.$BYTORDP);me=me?0:1;var fe=oe.info.nbSubSpectra?oe.info.nbSubSpectra:1;me?se.setLittleEndian():se.setBigEndian();for(var xe=0;xe<fe;xe++){var be={dataType:'NMR Spectrum',dataTable:'(X++(R..R))',nbPoints:ue,firstX:pe,lastX:pe-ce/he,xUnit:'PPM',yUnit:'Arbitrary',data:[Array(2*ue)],isXYdata:!0,observeFrequency:he,title:oe.info.TITLE,deltaX:-(ce/he)/(ue-1)},ye=pe,ke=be.deltaX;if(de)for(var _e=0;_e<ue;++_e)be.data[0][2*_e]=ye,be.data[0][2*_e+1]=se.readInt32(),(null===be.data[0][2*_e+1]||isNaN(be.data[0][2*_e+1]))&&(be.data[0][2*_e+1]=0),ye+=ke;else for(_e=ue-1;0<=_e;--_e)be.data[0][2*_e]=ye,be.data[0][2*_e+1]=se.readInt32(),(null===be.data[0][2*_e+1]||isNaN(be.data[0][2*_e+1]))&&(be.data[0][2*_e+1]=0),ye+=ke;oe.spectra.push(be)}}function $(se,oe){var le=/.*/;return oe.keepRecordsRegExp&&(le=oe.keepRecordsRegExp),G.convert(se,{keepRecordsRegExp:le})}function Z(se,oe){var le=oe.info.$TD=parseInt(oe.info.$TD),de=oe.info.$SWH=parseFloat(oe.info.$SWH),ue=oe.info.$SW=parseFloat(oe.info.$SW),ce=oe.info.$SFO1=parseFloat(oe.info.$SFO1),he=parseFloat(oe.info.$BF1);oe.info.$BF1=he;var ge=ue,pe=ge/(le-1),me=parseInt(oe.info.$BYTORDP);me=me?0:1,me?se.setLittleEndian():se.setBigEndian();var fe=oe.info.nbSubSpectra?oe.info.nbSubSpectra:1;oe.spectra=Array(fe);for(var xe=0,be;xe<fe/2;xe++){be={dataType:'NMR FID',dataTable:'(X++(R..R))',nbPoints:le,firstX:0,lastX:ge,nucleus:oe.info.$NUC1?oe.info.$NUC1:void 0,xUnit:'Sec',yUnit:'Arbitrary',data:[Array(2*le)],isXYdata:!0,observeFrequency:ce,title:oe.info.TITLE,deltaX:pe},oe.spectra[2*xe]=be,be={dataType:'NMR FID',dataTable:'(X++(I..I))',nbPoints:le,firstX:0,lastX:ge,nucleus:oe.info.$NUC1?oe.info.$NUC1:void 0,xUnit:'Sec',yUnit:'Arbitrary',data:[Array(2*le)],isXYdata:!0,observeFrequency:ce,title:oe.info.TITLE,deltaX:pe},oe.spectra[2*xe+1]=be;for(var ye=0,_e=0,ke;se.available(8)&&_e<le;_e++,ye=_e*pe)ke=se.readInt32(),(null===ke||isNaN(ke))&&(ke=0),oe.spectra[2*xe].data[0][2*_e+1]=ke,oe.spectra[2*xe].data[0][2*_e]=ye,ke=se.readInt32(),(null===ke||isNaN(ke))&&(ke=0),oe.spectra[2*xe+1].data[0][2*_e+1]=ke,oe.spectra[2*xe+1].data[0][2*_e]=ye;for(;_e<le;_e++,ye=_e*pe)oe.spectra[2*xe].data[0][2*_e+1]=0,oe.spectra[2*xe].data[0][2*_e]=ye,oe.spectra[2*xe+1].data[0][2*_e+1]=0,oe.spectra[2*xe+1].data[0][2*_e]=ye}}function W(se){for(var oe=0,le=se[0].data[0][0],de=le,ue=se.length,ce=se[0].data[0].length/2,he=Array(ue),ge=0;ge<ue;ge++){he[ge]=Array(ce);for(var pe=0;pe<ce;pe++)he[ge][pe]=se[ge].data[0][2*pe+1],he[ge][pe]<le&&(le=se[ge].data[0][2*pe+1]),he[ge][pe]>de&&(de=se[ge].data[0][2*pe+1]),0!==ge&&0!==pe&&(oe+=_Mathabs(he[ge][pe]-he[ge][pe-1])+_Mathabs(he[ge][pe]-he[ge-1][pe]))}return{z:he,minX:se[0].data[0][0],maxX:se[0].data[0][se[0].data[0].length-2],minY:se[0].pageValue,maxY:se[ue-1].pageValue,minZ:le,maxZ:de,noise:oe/(2*((ue-1)*(ce-1)))}}function K(se){var oe=W(se.spectra);se.contourLines=Q(oe),delete oe.z,se.minMax=oe}function Q(se){for(var le=se.noise,de=se.z,ue=[],ce=7,he=new Float32Array(4),ge=[],pe=de.length,me=de[0].length,ke=se.minX,_e=se.maxX,we=(_e-ke)/(me-1),je=se.minY,ve=se.maxY,Se=(ve-je)/(pe-1),De=se.minZ,Ce=se.maxZ,Ie=0,fe,xe,be,ye,Ee,Ae;Ie<2*ce;Ie++){Ae={},ue.push(Ae);var Re=Ie%2;Ee=0==Re?(Ce-5*le)*_Mathexp(Ie/2-ce)+5*le:-(Ce-5*le)*_Mathexp(Ie/2-ce)-5*le;var Pe=[];if(Ae.zValue=Ee,Ae.lines=Pe,!(Ee<=De||Ee>=Ce))for(var Fe=0;Fe<pe-1;Fe++)for(var Te=0;Te<me-1;Te++){he[0]=de[Fe][Te],he[1]=de[Fe][Te+1],he[2]=de[Fe+1][Te],he[3]=de[Fe+1][Te+1];for(var ze=0;4>ze;ze++)ge[ze]=he[ze]>Ee;ge[0]!==ge[1]&&ge[0]!==ge[2]&&(fe=Te+(Ee-he[0])/(he[1]-he[0]),xe=Fe,be=Te,ye=Fe+(Ee-he[0])/(he[2]-he[0]),Pe.push(fe*we+ke,xe*Se+je,be*we+ke,ye*Se+je)),ge[3]!==ge[1]&&ge[3]!==ge[2]&&(fe=Te+1,xe=Fe+1-(Ee-he[3])/(he[1]-he[3]),be=Te+1-(Ee-he[3])/(he[2]-he[3]),ye=Fe+1,Pe.push(fe*we+ke,xe*Se+je,be*we+ke,ye*Se+je)),ge[1]!==ge[2]&&(fe=Te+1-(Ee-he[1])/(he[2]-he[1]),xe=Fe+(Ee-he[1])/(he[2]-he[1]),ge[1]!==ge[0]&&(be=Te+1-(Ee-he[1])/(he[0]-he[1]),ye=Fe,Pe.push(fe*we+ke,xe*Se+je,be*we+ke,ye*Se+je)),ge[2]!==ge[0]&&(be=Te,ye=Fe+1-(Ee-he[2])/(he[0]-he[2]),Pe.push(fe*we+ke,xe*Se+je,be*we+ke,ye*Se+je)),ge[1]!==ge[3]&&(be=Te+1,ye=Fe+(Ee-he[1])/(he[3]-he[1]),Pe.push(fe*we+ke,xe*Se+je,be*we+ke,ye*Se+je)),ge[2]!==ge[3]&&(be=Te+(Ee-he[2])/(he[3]-he[2]),ye=Fe+1,Pe.push(fe*we+ke,xe*Se+je,be*we+ke,ye*Se+je)))}}return{minX:se.minX,maxX:se.maxX,minY:se.minY,maxY:se.maxY,segments:ue}}const G=I(28),ee=I(81),te=I(87);var ne=1,ae=2;D.exports={convertZip:function(se,oe){oe=oe||{};var le=new te;le.load(se,oe);for(var de={ser:ne,fid:ne,acqus:ae,acqu2s:ae,procs:ae,proc2s:ae,'1r':ne,'1i':ne,'2rr':ne},ue=le.filter(function(ke){return 0<=ke.indexOf('ser')||0<=ke.indexOf('fid')||0<=ke.indexOf('1r')||0<=ke.indexOf('2rr')}),ce=Array(ue.length),he=0;he<ue.length;++he){var ge=ue[he].name.length,pe=ue[he].name;pe=pe.substr(0,pe.lastIndexOf('/')+1);var me=le.folder(pe),fe=me.filter(function(ke){return!!de[ke]}),xe={};0<=pe.indexOf('pdata')&&(xe.acqus=le.file(pe.replace(/pdata\/[0-9]\//,'acqus')).asText());for(var be=0;be<fe.length;++be){var ye=fe[be].name.lastIndexOf('/'),pe=fe[be].name.substr(ye+1);xe[pe]=de[pe]===ne?new ee(fe[be].asArrayBuffer()):fe[be].asText()}ce[he]={filename:ue[he].name,value:P(xe,oe)}}return ce},converFolder:P}},function(D,E,I){'use strict';(function(R){function F(){return O.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function T(qe,$e){if(F()<$e)throw new RangeError('Invalid typed array length');return O.TYPED_ARRAY_SUPPORT?(qe=new Uint8Array($e),qe.__proto__=O.prototype):(null===qe&&(qe=new O($e)),qe.length=$e),qe}function O(qe,$e,Ze){if(!O.TYPED_ARRAY_SUPPORT&&!(this instanceof O))return new O(qe,$e,Ze);if('number'==typeof qe){if('string'==typeof $e)throw new Error('If encoding is specified then the first argument must be a string');return K(this,qe)}return $(this,qe,$e,Ze)}function $(qe,$e,Ze,We){if('number'==typeof $e)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&$e instanceof ArrayBuffer?ee(qe,$e,Ze,We):'string'==typeof $e?Q(qe,$e,Ze):te(qe,$e)}function Z(qe){if('number'!=typeof qe)throw new TypeError('"size" argument must be a number');else if(0>qe)throw new RangeError('"size" argument must not be negative')}function W(qe,$e,Ze,We){return Z($e),0>=$e?T(qe,$e):void 0===Ze?T(qe,$e):'string'==typeof We?T(qe,$e).fill(Ze,We):T(qe,$e).fill(Ze)}function K(qe,$e){if(Z($e),qe=T(qe,0>$e?0:0|ne($e)),!O.TYPED_ARRAY_SUPPORT)for(var Ze=0;Ze<$e;++Ze)qe[Ze]=0;return qe}function Q(qe,$e,Ze){if(('string'!=typeof Ze||''===Ze)&&(Ze='utf8'),!O.isEncoding(Ze))throw new TypeError('"encoding" must be a valid string encoding');var We=0|se($e,Ze);qe=T(qe,We);var He=qe.write($e,Ze);return He!==We&&(qe=qe.slice(0,He)),qe}function G(qe,$e){var Ze=0>$e.length?0:0|ne($e.length);qe=T(qe,Ze);for(var We=0;We<Ze;We+=1)qe[We]=255&$e[We];return qe}function ee(qe,$e,Ze,We){if($e.byteLength,0>Ze||$e.byteLength<Ze)throw new RangeError('\'offset\' is out of bounds');if($e.byteLength<Ze+(We||0))throw new RangeError('\'length\' is out of bounds');return $e=void 0===Ze&&void 0===We?new Uint8Array($e):void 0===We?new Uint8Array($e,Ze):new Uint8Array($e,Ze,We),O.TYPED_ARRAY_SUPPORT?(qe=$e,qe.__proto__=O.prototype):qe=G(qe,$e),qe}function te(qe,$e){if(O.isBuffer($e)){var Ze=0|ne($e.length);return(qe=T(qe,Ze),0===qe.length)?qe:($e.copy(qe,0,0,Ze),qe)}if($e){if('undefined'!=typeof ArrayBuffer&&$e.buffer instanceof ArrayBuffer||'length'in $e)return'number'!=typeof $e.length||Ne($e.length)?T(qe,0):G(qe,$e);if('Buffer'===$e.type&&Ue($e.data))return G(qe,$e.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function ne(qe){if(qe>=F())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+F().toString(16)+' bytes');return 0|qe}function se(qe,$e){if(O.isBuffer(qe))return qe.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(qe)||qe instanceof ArrayBuffer))return qe.byteLength;'string'!=typeof qe&&(qe=''+qe);var Ze=qe.length;if(0===Ze)return 0;for(var We=!1;;)switch($e){case'ascii':case'latin1':case'binary':return Ze;case'utf8':case'utf-8':case void 0:return Te(qe).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*Ze;case'hex':return Ze>>>1;case'base64':return Xe(qe).length;default:if(We)return Te(qe).length;$e=(''+$e).toLowerCase(),We=!0;}}function oe(qe,$e,Ze){var We=!1;if((void 0===$e||0>$e)&&($e=0),$e>this.length)return'';if((void 0===Ze||Ze>this.length)&&(Ze=this.length),0>=Ze)return'';if(Ze>>>=0,$e>>>=0,Ze<=$e)return'';for(qe||(qe='utf8');;)switch(qe){case'hex':return we(this,$e,Ze);case'utf8':case'utf-8':return be(this,$e,Ze);case'ascii':return ke(this,$e,Ze);case'latin1':case'binary':return _e(this,$e,Ze);case'base64':return xe(this,$e,Ze);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return je(this,$e,Ze);default:if(We)throw new TypeError('Unknown encoding: '+qe);qe=(qe+'').toLowerCase(),We=!0;}}function le(qe,$e,Ze){var We=qe[$e];qe[$e]=qe[Ze],qe[Ze]=We}function de(qe,$e,Ze,We,He){if(0===qe.length)return-1;if('string'==typeof Ze?(We=Ze,Ze=0):2147483647<Ze?Ze=2147483647:-2147483648>Ze&&(Ze=-2147483648),Ze=+Ze,isNaN(Ze)&&(Ze=He?0:qe.length-1),0>Ze&&(Ze=qe.length+Ze),Ze>=qe.length){if(He)return-1;Ze=qe.length-1}else if(0>Ze)if(He)Ze=0;else return-1;if('string'==typeof $e&&($e=O.from($e,We)),O.isBuffer($e))return 0===$e.length?-1:ue(qe,$e,Ze,We,He);if('number'==typeof $e)return $e&=255,O.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?He?Uint8Array.prototype.indexOf.call(qe,$e,Ze):Uint8Array.prototype.lastIndexOf.call(qe,$e,Ze):ue(qe,[$e],Ze,We,He);throw new TypeError('val must be string, number or Buffer')}function ue(qe,$e,Ze,We,He){function Je(at,st){return 1==Ke?at[st]:at.readUInt16BE(st*Ke)}var Ke=1,Qe=qe.length,Ge=$e.length;if(void 0!==We&&(We=(We+'').toLowerCase(),'ucs2'===We||'ucs-2'===We||'utf16le'===We||'utf-16le'===We)){if(2>qe.length||2>$e.length)return-1;Ke=2,Qe/=2,Ge/=2,Ze/=2}var et;if(He){var tt=-1;for(et=Ze;et<Qe;et++)if(Je(qe,et)!==Je($e,-1==tt?0:et-tt))-1!=tt&&(et-=et-tt),tt=-1;else if(-1==tt&&(tt=et),et-tt+1===Ge)return tt*Ke}else for(Ze+Ge>Qe&&(Ze=Qe-Ge),et=Ze;0<=et;et--){for(var it=!0,nt=0;nt<Ge;nt++)if(Je(qe,et+nt)!==Je($e,nt)){it=!1;break}if(it)return et}return-1}function ce(qe,$e,Ze,We){Ze=+Ze||0;var He=qe.length-Ze;We?(We=+We,We>He&&(We=He)):We=He;var Je=$e.length;if(0!=Je%2)throw new TypeError('Invalid hex string');We>Je/2&&(We=Je/2);for(var Ke=0,Qe;Ke<We;++Ke){if(Qe=parseInt($e.substr(2*Ke,2),16),isNaN(Qe))return Ke;qe[Ze+Ke]=Qe}return Ke}function he(qe,$e,Ze,We){return Ye(Te($e,qe.length-Ze),qe,Ze,We)}function ge(qe,$e,Ze,We){return Ye(ze($e),qe,Ze,We)}function pe(qe,$e,Ze,We){return ge(qe,$e,Ze,We)}function me(qe,$e,Ze,We){return Ye(Xe($e),qe,Ze,We)}function fe(qe,$e,Ze,We){return Ye(Me($e,qe.length-Ze),qe,Ze,We)}function xe(qe,$e,Ze){return 0===$e&&Ze===qe.length?Oe.fromByteArray(qe):Oe.fromByteArray(qe.slice($e,Ze))}function be(qe,$e,Ze){Ze=_Mathmin(qe.length,Ze);for(var We=[],He=$e;He<Ze;){var Je=qe[He],Ke=null,Qe=239<Je?4:223<Je?3:191<Je?2:1;if(He+Qe<=Ze){var Ge,et,tt,it;1==Qe?128>Je&&(Ke=Je):2==Qe?(Ge=qe[He+1],128==(192&Ge)&&(it=(31&Je)<<6|63&Ge,127<it&&(Ke=it))):3==Qe?(Ge=qe[He+1],et=qe[He+2],128==(192&Ge)&&128==(192&et)&&(it=(15&Je)<<12|(63&Ge)<<6|63&et,2047<it&&(55296>it||57343<it)&&(Ke=it))):4==Qe?(Ge=qe[He+1],et=qe[He+2],tt=qe[He+3],128==(192&Ge)&&128==(192&et)&&128==(192&tt)&&(it=(15&Je)<<18|(63&Ge)<<12|(63&et)<<6|63&tt,65535<it&&1114112>it&&(Ke=it))):void 0}null===Ke?(Ke=65533,Qe=1):65535<Ke&&(Ke-=65536,We.push(55296|1023&Ke>>>10),Ke=56320|1023&Ke),We.push(Ke),He+=Qe}return ye(We)}function ye(qe){var $e=qe.length;if($e<=Be)return _StringfromCharCode.apply(String,qe);for(var Ze='',We=0;We<$e;)Ze+=_StringfromCharCode.apply(String,qe.slice(We,We+=Be));return Ze}function ke(qe,$e,Ze){var We='';Ze=_Mathmin(qe.length,Ze);for(var He=$e;He<Ze;++He)We+=_StringfromCharCode(127&qe[He]);return We}function _e(qe,$e,Ze){var We='';Ze=_Mathmin(qe.length,Ze);for(var He=$e;He<Ze;++He)We+=_StringfromCharCode(qe[He]);return We}function we(qe,$e,Ze){var We=qe.length;(!$e||0>$e)&&($e=0),(!Ze||0>Ze||Ze>We)&&(Ze=We);for(var He='',Je=$e;Je<Ze;++Je)He+=Fe(qe[Je]);return He}function je(qe,$e,Ze){for(var We=qe.slice($e,Ze),He='',Je=0;Je<We.length;Je+=2)He+=_StringfromCharCode(We[Je]+256*We[Je+1]);return He}function ve(qe,$e,Ze){if(0!=qe%1||0>qe)throw new RangeError('offset is not uint');if(qe+$e>Ze)throw new RangeError('Trying to access beyond buffer length')}function Se(qe,$e,Ze,We,He,Je){if(!O.isBuffer(qe))throw new TypeError('"buffer" argument must be a Buffer instance');if($e>He||$e<Je)throw new RangeError('"value" argument is out of bounds');if(Ze+We>qe.length)throw new RangeError('Index out of range')}function De(qe,$e,Ze,We){0>$e&&($e=65535+$e+1);for(var He=0,Je=_Mathmin(qe.length-Ze,2);He<Je;++He)qe[Ze+He]=($e&255<<8*(We?He:1-He))>>>8*(We?He:1-He)}function Ce(qe,$e,Ze,We){0>$e&&($e=4294967295+$e+1);for(var He=0,Je=_Mathmin(qe.length-Ze,4);He<Je;++He)qe[Ze+He]=255&$e>>>8*(We?He:3-He)}function Ee(qe,$e,Ze,We){if(Ze+We>qe.length)throw new RangeError('Index out of range');if(0>Ze)throw new RangeError('Index out of range')}function Ie(qe,$e,Ze,We,He){return He||Ee(qe,$e,Ze,4,3.4028234663852886e38,-3.4028234663852886e38),Le.write(qe,$e,Ze,We,23,4),Ze+4}function Ae(qe,$e,Ze,We,He){return He||Ee(qe,$e,Ze,8,1.7976931348623157e308,-1.7976931348623157e308),Le.write(qe,$e,Ze,We,52,8),Ze+8}function Re(qe){if(qe=Pe(qe).replace(Ve,''),2>qe.length)return'';for(;0!=qe.length%4;)qe+='=';return qe}function Pe(qe){return qe.trim?qe.trim():qe.replace(/^\s+|\s+$/g,'')}function Fe(qe){return 16>qe?'0'+qe.toString(16):qe.toString(16)}function Te(qe,$e){$e=$e||Infinity;for(var We=qe.length,He=null,Je=[],Ke=0,Ze;Ke<We;++Ke){if(Ze=qe.charCodeAt(Ke),55295<Ze&&57344>Ze){if(!He){if(56319<Ze){-1<($e-=3)&&Je.push(239,191,189);continue}else if(Ke+1===We){-1<($e-=3)&&Je.push(239,191,189);continue}He=Ze;continue}if(56320>Ze){-1<($e-=3)&&Je.push(239,191,189),He=Ze;continue}Ze=(He-55296<<10|Ze-56320)+65536}else He&&-1<($e-=3)&&Je.push(239,191,189);if(He=null,128>Ze){if(0>($e-=1))break;Je.push(Ze)}else if(2048>Ze){if(0>($e-=2))break;Je.push(192|Ze>>6,128|63&Ze)}else if(65536>Ze){if(0>($e-=3))break;Je.push(224|Ze>>12,128|63&Ze>>6,128|63&Ze)}else if(1114112>Ze){if(0>($e-=4))break;Je.push(240|Ze>>18,128|63&Ze>>12,128|63&Ze>>6,128|63&Ze)}else throw new Error('Invalid code point')}return Je}function ze(qe){for(var $e=[],Ze=0;Ze<qe.length;++Ze)$e.push(255&qe.charCodeAt(Ze));return $e}function Me(qe,$e){for(var Je=[],Ke=0,Ze,We,He;Ke<qe.length&&!(0>($e-=2));++Ke)Ze=qe.charCodeAt(Ke),We=Ze>>8,He=Ze%256,Je.push(He),Je.push(We);return Je}function Xe(qe){return Oe.toByteArray(Re(qe))}function Ye(qe,$e,Ze,We){for(var He=0;He<We&&!(He+Ze>=$e.length||He>=qe.length);++He)$e[He+Ze]=qe[He];return He}function Ne(qe){return qe!==qe}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var Oe=I(77),Le=I(80),Ue=I(82);E.Buffer=O,E.SlowBuffer=function(qe){return+qe!=qe&&(qe=0),O.alloc(+qe)},E.INSPECT_MAX_BYTES=50,O.TYPED_ARRAY_SUPPORT=R.TYPED_ARRAY_SUPPORT===void 0?function(){try{var qe=new Uint8Array(1);return qe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===qe.foo()&&'function'==typeof qe.subarray&&0===qe.subarray(1,1).byteLength}catch($e){return!1}}():R.TYPED_ARRAY_SUPPORT,E.kMaxLength=F(),O.poolSize=8192,O._augment=function(qe){return qe.__proto__=O.prototype,qe},O.from=function(qe,$e,Ze){return $(null,qe,$e,Ze)},O.TYPED_ARRAY_SUPPORT&&(O.prototype.__proto__=Uint8Array.prototype,O.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&O[Symbol.species]===O&&Object.defineProperty(O,Symbol.species,{value:null,configurable:!0})),O.alloc=function(qe,$e,Ze){return W(null,qe,$e,Ze)},O.allocUnsafe=function(qe){return K(null,qe)},O.allocUnsafeSlow=function(qe){return K(null,qe)},O.isBuffer=function($e){return!!(null!=$e&&$e._isBuffer)},O.compare=function($e,Ze){if(!O.isBuffer($e)||!O.isBuffer(Ze))throw new TypeError('Arguments must be Buffers');if($e===Ze)return 0;for(var We=$e.length,He=Ze.length,Je=0,Ke=_Mathmin(We,He);Je<Ke;++Je)if($e[Je]!==Ze[Je]){We=$e[Je],He=Ze[Je];break}return We<He?-1:He<We?1:0},O.isEncoding=function($e){switch(($e+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},O.concat=function($e,Ze){if(!Ue($e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===$e.length)return O.alloc(0);var We;if(Ze===void 0)for(Ze=0,We=0;We<$e.length;++We)Ze+=$e[We].length;var He=O.allocUnsafe(Ze),Je=0;for(We=0;We<$e.length;++We){var Ke=$e[We];if(!O.isBuffer(Ke))throw new TypeError('"list" argument must be an Array of Buffers');Ke.copy(He,Je),Je+=Ke.length}return He},O.byteLength=se,O.prototype._isBuffer=!0,O.prototype.swap16=function(){var $e=this.length;if(0!=$e%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var Ze=0;Ze<$e;Ze+=2)le(this,Ze,Ze+1);return this},O.prototype.swap32=function(){var $e=this.length;if(0!=$e%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var Ze=0;Ze<$e;Ze+=4)le(this,Ze,Ze+3),le(this,Ze+1,Ze+2);return this},O.prototype.swap64=function(){var $e=this.length;if(0!=$e%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var Ze=0;Ze<$e;Ze+=8)le(this,Ze,Ze+7),le(this,Ze+1,Ze+6),le(this,Ze+2,Ze+5),le(this,Ze+3,Ze+4);return this},O.prototype.toString=function(){var $e=0|this.length;return 0==$e?'':0===arguments.length?be(this,0,$e):oe.apply(this,arguments)},O.prototype.equals=function($e){if(!O.isBuffer($e))throw new TypeError('Argument must be a Buffer');return this===$e||0===O.compare(this,$e)},O.prototype.inspect=function(){var $e='',Ze=E.INSPECT_MAX_BYTES;return 0<this.length&&($e=this.toString('hex',0,Ze).match(/.{2}/g).join(' '),this.length>Ze&&($e+=' ... ')),'<Buffer '+$e+'>'},O.prototype.compare=function($e,Ze,We,He,Je){if(!O.isBuffer($e))throw new TypeError('Argument must be a Buffer');if(void 0===Ze&&(Ze=0),void 0===We&&(We=$e?$e.length:0),void 0===He&&(He=0),void 0===Je&&(Je=this.length),0>Ze||We>$e.length||0>He||Je>this.length)throw new RangeError('out of range index');if(He>=Je&&Ze>=We)return 0;if(He>=Je)return-1;if(Ze>=We)return 1;if(Ze>>>=0,We>>>=0,He>>>=0,Je>>>=0,this===$e)return 0;for(var Ke=Je-He,Qe=We-Ze,Ge=_Mathmin(Ke,Qe),et=this.slice(He,Je),tt=$e.slice(Ze,We),it=0;it<Ge;++it)if(et[it]!==tt[it]){Ke=et[it],Qe=tt[it];break}return Ke<Qe?-1:Qe<Ke?1:0},O.prototype.includes=function($e,Ze,We){return-1!==this.indexOf($e,Ze,We)},O.prototype.indexOf=function($e,Ze,We){return de(this,$e,Ze,We,!0)},O.prototype.lastIndexOf=function($e,Ze,We){return de(this,$e,Ze,We,!1)},O.prototype.write=function($e,Ze,We,He){if(void 0===Ze)He='utf8',We=this.length,Ze=0;else if(void 0===We&&'string'==typeof Ze)He=Ze,We=this.length,Ze=0;else if(isFinite(Ze))Ze|=0,isFinite(We)?(We|=0,void 0===He&&(He='utf8')):(He=We,We=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var Je=this.length-Ze;if((void 0===We||We>Je)&&(We=Je),0<$e.length&&(0>We||0>Ze)||Ze>this.length)throw new RangeError('Attempt to write outside buffer bounds');He||(He='utf8');for(var Ke=!1;;)switch(He){case'hex':return ce(this,$e,Ze,We);case'utf8':case'utf-8':return he(this,$e,Ze,We);case'ascii':return ge(this,$e,Ze,We);case'latin1':case'binary':return pe(this,$e,Ze,We);case'base64':return me(this,$e,Ze,We);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return fe(this,$e,Ze,We);default:if(Ke)throw new TypeError('Unknown encoding: '+He);He=(''+He).toLowerCase(),Ke=!0;}},O.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var Be=4096;O.prototype.slice=function($e,Ze){var We=this.length;$e=~~$e,Ze=Ze===void 0?We:~~Ze,0>$e?($e+=We,0>$e&&($e=0)):$e>We&&($e=We),0>Ze?(Ze+=We,0>Ze&&(Ze=0)):Ze>We&&(Ze=We),Ze<$e&&(Ze=$e);var He;if(O.TYPED_ARRAY_SUPPORT)He=this.subarray($e,Ze),He.__proto__=O.prototype;else{var Je=Ze-$e;He=new O(Je,void 0);for(var Ke=0;Ke<Je;++Ke)He[Ke]=this[Ke+$e]}return He},O.prototype.readUIntLE=function($e,Ze,We){$e|=0,Ze|=0,We||ve($e,Ze,this.length);for(var He=this[$e],Je=1,Ke=0;++Ke<Ze&&(Je*=256);)He+=this[$e+Ke]*Je;return He},O.prototype.readUIntBE=function($e,Ze,We){$e|=0,Ze|=0,We||ve($e,Ze,this.length);for(var He=this[$e+--Ze],Je=1;0<Ze&&(Je*=256);)He+=this[$e+--Ze]*Je;return He},O.prototype.readUInt8=function($e,Ze){return Ze||ve($e,1,this.length),this[$e]},O.prototype.readUInt16LE=function($e,Ze){return Ze||ve($e,2,this.length),this[$e]|this[$e+1]<<8},O.prototype.readUInt16BE=function($e,Ze){return Ze||ve($e,2,this.length),this[$e]<<8|this[$e+1]},O.prototype.readUInt32LE=function($e,Ze){return Ze||ve($e,4,this.length),(this[$e]|this[$e+1]<<8|this[$e+2]<<16)+16777216*this[$e+3]},O.prototype.readUInt32BE=function($e,Ze){return Ze||ve($e,4,this.length),16777216*this[$e]+(this[$e+1]<<16|this[$e+2]<<8|this[$e+3])},O.prototype.readIntLE=function($e,Ze,We){$e|=0,Ze|=0,We||ve($e,Ze,this.length);for(var He=this[$e],Je=1,Ke=0;++Ke<Ze&&(Je*=256);)He+=this[$e+Ke]*Je;return Je*=128,He>=Je&&(He-=_Mathpow(2,8*Ze)),He},O.prototype.readIntBE=function($e,Ze,We){$e|=0,Ze|=0,We||ve($e,Ze,this.length);for(var He=Ze,Je=1,Ke=this[$e+--He];0<He&&(Je*=256);)Ke+=this[$e+--He]*Je;return Je*=128,Ke>=Je&&(Ke-=_Mathpow(2,8*Ze)),Ke},O.prototype.readInt8=function($e,Ze){return Ze||ve($e,1,this.length),128&this[$e]?-1*(255-this[$e]+1):this[$e]},O.prototype.readInt16LE=function($e,Ze){Ze||ve($e,2,this.length);var We=this[$e]|this[$e+1]<<8;return 32768&We?4294901760|We:We},O.prototype.readInt16BE=function($e,Ze){Ze||ve($e,2,this.length);var We=this[$e+1]|this[$e]<<8;return 32768&We?4294901760|We:We},O.prototype.readInt32LE=function($e,Ze){return Ze||ve($e,4,this.length),this[$e]|this[$e+1]<<8|this[$e+2]<<16|this[$e+3]<<24},O.prototype.readInt32BE=function($e,Ze){return Ze||ve($e,4,this.length),this[$e]<<24|this[$e+1]<<16|this[$e+2]<<8|this[$e+3]},O.prototype.readFloatLE=function($e,Ze){return Ze||ve($e,4,this.length),Le.read(this,$e,!0,23,4)},O.prototype.readFloatBE=function($e,Ze){return Ze||ve($e,4,this.length),Le.read(this,$e,!1,23,4)},O.prototype.readDoubleLE=function($e,Ze){return Ze||ve($e,8,this.length),Le.read(this,$e,!0,52,8)},O.prototype.readDoubleBE=function($e,Ze){return Ze||ve($e,8,this.length),Le.read(this,$e,!1,52,8)},O.prototype.writeUIntLE=function($e,Ze,We,He){if($e=+$e,Ze|=0,We|=0,!He){var Je=_Mathpow(2,8*We)-1;Se(this,$e,Ze,We,Je,0)}var Ke=1,Qe=0;for(this[Ze]=255&$e;++Qe<We&&(Ke*=256);)this[Ze+Qe]=255&$e/Ke;return Ze+We},O.prototype.writeUIntBE=function($e,Ze,We,He){if($e=+$e,Ze|=0,We|=0,!He){var Je=_Mathpow(2,8*We)-1;Se(this,$e,Ze,We,Je,0)}var Ke=We-1,Qe=1;for(this[Ze+Ke]=255&$e;0<=--Ke&&(Qe*=256);)this[Ze+Ke]=255&$e/Qe;return Ze+We},O.prototype.writeUInt8=function($e,Ze,We){return $e=+$e,Ze|=0,We||Se(this,$e,Ze,1,255,0),O.TYPED_ARRAY_SUPPORT||($e=_Mathfloor($e)),this[Ze]=255&$e,Ze+1},O.prototype.writeUInt16LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||Se(this,$e,Ze,2,65535,0),O.TYPED_ARRAY_SUPPORT?(this[Ze]=255&$e,this[Ze+1]=$e>>>8):De(this,$e,Ze,!0),Ze+2},O.prototype.writeUInt16BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||Se(this,$e,Ze,2,65535,0),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>8,this[Ze+1]=255&$e):De(this,$e,Ze,!1),Ze+2},O.prototype.writeUInt32LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||Se(this,$e,Ze,4,4294967295,0),O.TYPED_ARRAY_SUPPORT?(this[Ze+3]=$e>>>24,this[Ze+2]=$e>>>16,this[Ze+1]=$e>>>8,this[Ze]=255&$e):Ce(this,$e,Ze,!0),Ze+4},O.prototype.writeUInt32BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||Se(this,$e,Ze,4,4294967295,0),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>24,this[Ze+1]=$e>>>16,this[Ze+2]=$e>>>8,this[Ze+3]=255&$e):Ce(this,$e,Ze,!1),Ze+4},O.prototype.writeIntLE=function($e,Ze,We,He){if($e=+$e,Ze|=0,!He){var Je=_Mathpow(2,8*We-1);Se(this,$e,Ze,We,Je-1,-Je)}var Ke=0,Qe=1,Ge=0;for(this[Ze]=255&$e;++Ke<We&&(Qe*=256);)0>$e&&0==Ge&&0!==this[Ze+Ke-1]&&(Ge=1),this[Ze+Ke]=255&($e/Qe>>0)-Ge;return Ze+We},O.prototype.writeIntBE=function($e,Ze,We,He){if($e=+$e,Ze|=0,!He){var Je=_Mathpow(2,8*We-1);Se(this,$e,Ze,We,Je-1,-Je)}var Ke=We-1,Qe=1,Ge=0;for(this[Ze+Ke]=255&$e;0<=--Ke&&(Qe*=256);)0>$e&&0==Ge&&0!==this[Ze+Ke+1]&&(Ge=1),this[Ze+Ke]=255&($e/Qe>>0)-Ge;return Ze+We},O.prototype.writeInt8=function($e,Ze,We){return $e=+$e,Ze|=0,We||Se(this,$e,Ze,1,127,-128),O.TYPED_ARRAY_SUPPORT||($e=_Mathfloor($e)),0>$e&&($e=255+$e+1),this[Ze]=255&$e,Ze+1},O.prototype.writeInt16LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||Se(this,$e,Ze,2,32767,-32768),O.TYPED_ARRAY_SUPPORT?(this[Ze]=255&$e,this[Ze+1]=$e>>>8):De(this,$e,Ze,!0),Ze+2},O.prototype.writeInt16BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||Se(this,$e,Ze,2,32767,-32768),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>8,this[Ze+1]=255&$e):De(this,$e,Ze,!1),Ze+2},O.prototype.writeInt32LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||Se(this,$e,Ze,4,2147483647,-2147483648),O.TYPED_ARRAY_SUPPORT?(this[Ze]=255&$e,this[Ze+1]=$e>>>8,this[Ze+2]=$e>>>16,this[Ze+3]=$e>>>24):Ce(this,$e,Ze,!0),Ze+4},O.prototype.writeInt32BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||Se(this,$e,Ze,4,2147483647,-2147483648),0>$e&&($e=4294967295+$e+1),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>24,this[Ze+1]=$e>>>16,this[Ze+2]=$e>>>8,this[Ze+3]=255&$e):Ce(this,$e,Ze,!1),Ze+4},O.prototype.writeFloatLE=function($e,Ze,We){return Ie(this,$e,Ze,!0,We)},O.prototype.writeFloatBE=function($e,Ze,We){return Ie(this,$e,Ze,!1,We)},O.prototype.writeDoubleLE=function($e,Ze,We){return Ae(this,$e,Ze,!0,We)},O.prototype.writeDoubleBE=function($e,Ze,We){return Ae(this,$e,Ze,!1,We)},O.prototype.copy=function($e,Ze,We,He){if(We||(We=0),He||0===He||(He=this.length),Ze>=$e.length&&(Ze=$e.length),Ze||(Ze=0),0<He&&He<We&&(He=We),He===We)return 0;if(0===$e.length||0===this.length)return 0;if(0>Ze)throw new RangeError('targetStart out of bounds');if(0>We||We>=this.length)throw new RangeError('sourceStart out of bounds');if(0>He)throw new RangeError('sourceEnd out of bounds');He>this.length&&(He=this.length),$e.length-Ze<He-We&&(He=$e.length-Ze+We);var Je=He-We,Ke;if(this===$e&&We<Ze&&Ze<He)for(Ke=Je-1;0<=Ke;--Ke)$e[Ke+Ze]=this[Ke+We];else if(1e3>Je||!O.TYPED_ARRAY_SUPPORT)for(Ke=0;Ke<Je;++Ke)$e[Ke+Ze]=this[Ke+We];else Uint8Array.prototype.set.call($e,this.subarray(We,We+Je),Ze);return Je},O.prototype.fill=function($e,Ze,We,He){if('string'==typeof $e){if('string'==typeof Ze?(He=Ze,Ze=0,We=this.length):'string'==typeof We&&(He=We,We=this.length),1===$e.length){var Je=$e.charCodeAt(0);256>Je&&($e=Je)}if(void 0!==He&&'string'!=typeof He)throw new TypeError('encoding must be a string');if('string'==typeof He&&!O.isEncoding(He))throw new TypeError('Unknown encoding: '+He)}else'number'==typeof $e&&($e&=255);if(0>Ze||this.length<Ze||this.length<We)throw new RangeError('Out of range index');if(We<=Ze)return this;Ze>>>=0,We=We===void 0?this.length:We>>>0,$e||($e=0);var Ke;if('number'==typeof $e)for(Ke=Ze;Ke<We;++Ke)this[Ke]=$e;else{var Qe=O.isBuffer($e)?$e:Te(new O($e,He).toString()),Ge=Qe.length;for(Ke=0;Ke<We-Ze;++Ke)this[Ke+Ze]=Qe[Ke%Ge]}return this};var Ve=/[^+\/0-9A-Za-z-_]/g}).call(E,I(58))},function(D){'use strict';var R=Object.prototype.hasOwnProperty,P=Object.prototype.toString,F=function($){return'function'==typeof Array.isArray?Array.isArray($):'[object Array]'===P.call($)},T=function($){if(!$||'[object Object]'!==P.call($))return!1;var Z=R.call($,'constructor'),W=$.constructor&&$.constructor.prototype&&R.call($.constructor.prototype,'isPrototypeOf');if($.constructor&&!Z&&!W)return!1;for(var K in $);return'undefined'==typeof K||R.call($,K)};D.exports=function O(){var ee=arguments[0],te=1,ne=arguments.length,ae=!1,$,Z,W,K,Q,G;for('boolean'==typeof ee?(ae=ee,ee=arguments[1]||{},te=2):('object'!=typeof ee&&'function'!=typeof ee||null==ee)&&(ee={});te<ne;++te)if($=arguments[te],null!=$)for(Z in $)W=ee[Z],K=$[Z],ee!==K&&(ae&&K&&(T(K)||(Q=F(K)))?(Q?(Q=!1,G=W&&F(W)?W:[]):G=W&&T(W)?W:{},ee[Z]=O(ae,G,K)):'undefined'!=typeof K&&(ee[Z]=K));return ee}},function(D,E,I){'use strict';function R(){function K(fe){for(var xe=fe.length,be=Array(xe),ye=0;ye<xe;ye++)be[ye]=parseFloat(fe[ye]);return be}function Q(){}function ee(fe){return fe.toLowerCase().replace(/[^a-z0-9]/g,'')}function te(fe){return-1!==me.indexOf(fe)}function ne(fe){var xe=fe.spectra,be=xe.length,ye={times:Array(be),series:[{name:'ms',dimension:2,data:Array(be)}]},ke,_e=[];for(ke=0;ke<me.length;ke++){var we=ee(me[ke]);xe[0][we]&&(_e.push(we),ye.series.push({name:we,dimension:1,data:Array(be)}))}for(ke=0;ke<be;ke++){var je=xe[ke];ye.times[ke]=je.pageValue;for(var ve=0;ve<_e.length;ve++)ye.series[ve+1].data[ke]=parseFloat(je[_e[ve]]);je.data&&(ye.series[0].data[ke]=[je.data[0].x,je.data[0].y])}fe.gcms=ye}function ae(fe){var xe=fe.spectra,be=[],ye;for(ye=0;ye<me.length;ye++){var ke=ee(me[ye]);xe[0][ke]&&be.push(ke)}if(0!==be.length){var _e={gc:{},ms:[]};for(ye=0;ye<be.length;ye++)_e.gc[be[ye]]=[];for(ye=0;ye<xe.length;ye++){for(var we=xe[ye],je=0;je<be.length;je++)_e.gc[be[je]].push(we.pageValue),_e.gc[be[je]].push(parseFloat(we[be[je]]));we.data&&(_e.ms[ye]=we.data[0])}fe.gcms=_e}}function se(fe,xe){if(xe.xFactor||(xe.xFactor=1),xe.yFactor||(xe.yFactor=1),xe.observeFrequency&&xe.xUnit&&'HZ'===xe.xUnit.toUpperCase()&&(xe.xUnit='PPM',xe.xFactor/=xe.observeFrequency,xe.firstX/=xe.observeFrequency,xe.lastX/=xe.observeFrequency,xe.deltaX/=xe.observeFrequency),fe.shiftOffsetVal){var be=xe.firstX-fe.shiftOffsetVal;xe.firstX-=be,xe.lastX-=be}}function oe(fe){fe=fe.sort(le);var xe=fe.length;return fe[_Mathfloor(xe/2)]}function le(fe,xe){return fe-xe}function de(fe){for(var xe=fe[0].data[0][0],be=xe,ye=fe.length,ke=fe[0].data[0].length/2,_e=Array(ye),we=0;we<ye;we++){_e[we]=Array(ke);for(var je=fe[we].data[0],ve=0,Se;ve<ke;ve++)Se=je[2*ve+1],_e[we][ve]=Se,Se<xe&&(xe=Se),Se>be&&(be=Se)}return{z:_e,minX:fe[0].data[0][0],maxX:fe[0].data[0][fe[0].data[0].length-2],minY:fe[0].pageValue,maxY:fe[ye-1].pageValue,minZ:xe,maxZ:be,noise:oe(_e[0].map(Math.abs))}}function ue(fe,xe){var be=de(fe.spectra);xe.noContour||(fe.contourLines=ce(be,xe),delete be.z),fe.minMax=be}function ce(fe,xe){for(var be=fe.noise,ye=fe.z,ke=xe.nbContourLevels||7,_e=void 0===xe.noiseMultiplier?5:xe.noiseMultiplier,Ae=ye.length,Re=ye[0].length,Me=fe.minX,Xe=fe.maxX,Ye=(Xe-Me)/(Re-1),Ne=fe.minY,Oe=fe.maxY,Le=(Oe-Ne)/(Ae-1),Ue=fe.minZ,Be=fe.maxZ,Ve=2*ke,qe=Array(Ve),Ze=0,we,je,ve,Se,De,Ce,Ee,Ie,Pe,Fe,Te,ze,$e,We;Ze<Ve;Ze++){We={},qe[Ze]=We;var He=Ze%2,Je=(Be-_e*be)*_Mathexp((Ze>>1)-ke);$e=0==He?Je+_e*be:0-Je-_e*be;var Ke=[];if(We.zValue=$e,We.lines=Ke,!($e<=Ue||$e>=Be))for(var Qe=0;Qe<Ae-1;Qe++)for(var Ge=ye[Qe],et=ye[Qe+1],tt=0;tt<Re-1;tt++)we=Ge[tt],je=Ge[tt+1],ve=et[tt],Se=et[tt+1],De=we>$e,Ce=je>$e,Ee=ve>$e,Ie=Se>$e,De!==Ce&&De!==Ee&&(Pe=tt+($e-we)/(je-we),Fe=Qe,Te=tt,ze=Qe+($e-we)/(ve-we),Ke.push(Pe*Ye+Me),Ke.push(Fe*Le+Ne),Ke.push(Te*Ye+Me),Ke.push(ze*Le+Ne)),Ie!==Ce&&Ie!==Ee&&(Pe=tt+1,Fe=Qe+1-($e-Se)/(je-Se),Te=tt+1-($e-Se)/(ve-Se),ze=Qe+1,Ke.push(Pe*Ye+Me),Ke.push(Fe*Le+Ne),Ke.push(Te*Ye+Me),Ke.push(ze*Le+Ne)),Ce!==Ee&&(Pe=(tt+1-($e-je)/(ve-je))*Ye+Me,Fe=(Qe+($e-je)/(ve-je))*Le+Ne,Ce!==De&&(Te=tt+1-($e-je)/(we-je),ze=Qe,Ke.push(Pe),Ke.push(Fe),Ke.push(Te*Ye+Me),Ke.push(ze*Le+Ne)),Ee!==De&&(Te=tt,ze=Qe+1-($e-ve)/(we-ve),Ke.push(Pe),Ke.push(Fe),Ke.push(Te*Ye+Me),Ke.push(ze*Le+Ne)),Ce!==Ie&&(Te=tt+1,ze=Qe+($e-je)/(Se-je),Ke.push(Pe),Ke.push(Fe),Ke.push(Te*Ye+Me),Ke.push(ze*Le+Ne)),Ee!==Ie&&(Te=tt+($e-ve)/(Se-ve),ze=Qe+1,Ke.push(Pe),Ke.push(Fe),Ke.push(Te*Ye+Me),Ke.push(ze*Le+Ne)))}return{minX:fe.minX,maxX:fe.maxX,minY:fe.minY,maxY:fe.maxY,segments:qe}}function he(fe,xe){var be=fe.yFactor,ye=fe.deltaX;fe.isXYdata=!0;var ke=[];fe.data=[ke];for(var _e=fe.firstX,we=fe.firstY,je=!1,ve=0,Se;ve<xe.length;ve++)if(Se=xe.charCodeAt(ve),13===Se||10===Se)je=!0;else if(je)break;for(var De=!0,Ce=!1,Ee=!1,Ie=0,Ae=!1,Re=!1,Pe=0,Fe=!1,Te=!1,ze=!1,Me=0,Se;ve<=xe.length;ve++)if(Se=ve===xe.length?13:xe.charCodeAt(ve),Re)(13===Se||10===Se)&&(De=!0,Re=!1);else if(57>=Se&&48<=Se)Te=!0,0<Me?Pe+=(Se-48)/_Mathpow(10,Me++):(Pe*=10,Pe+=Se-48);else if(44===Se||46===Se)Te=!0,Me++;else{if(Te){if(De)De=!1,Ee&&(ze=!0);else if(ze)ze=!1;else{Ce&&(Ie=Fe?0-Pe:Pe,Ee=!0,Ce=!1);for(var Xe=Ae?Pe-1:1,Ye=0;Ye<Xe;Ye++)Ee?we+=Ie:we=Fe?0-Pe:Pe,ke.push(_e),ke.push(we*be),_e+=ye}Fe=!1,Pe=0,Me=0,Te=!1,Ae=!1}if(74>Se&&63<Se)Te=!0,Ee=!1,Pe=Se-64;else if(96<Se&&106>Se)Te=!0,Ee=!1,Pe=Se-96,Fe=!0;else if(115===Se)Te=!0,Ae=!0,Pe=9;else if(82<Se&&91>Se)Te=!0,Ae=!0,Pe=Se-82;else if(73<Se&&83>Se)Te=!0,Ce=!0,Pe=Se-73;else if(105<Se&&115>Se)Te=!0,Ce=!0,Pe=Se-105,Fe=!0;else if(36===Se&&36===xe.charCodeAt(ve+1))Te=!0,Re=!0;else if(37===Se)Te=!0,Ce=!0,Pe=0,Fe=!1;else if(45===Se){var Ne=xe.charCodeAt(ve+1);(48<=Ne&&57>=Ne||44===Ne||46===Ne)&&(Te=!0,Ee=!1,Fe=!0)}else(13===Se||10===Se)&&(De=!0,Re=!1)}}function ge(fe,xe,be){var ye=/\$\$.*/,ke=/[,\t ]+/;fe.isPeaktable=!0;var _e,we,je,ve,Se,De=[];fe.data=[De];var Ce=xe.split(/,? *,?[;\r\n]+ */);for(_e=1,we=Ce.length;_e<we;_e++)if(Se=Ce[_e].trim().replace(ye,'').split(ke),0==Se.length%2)for(je=0,ve=Se.length;je<ve;je+=2)De.push(parseFloat(Se[je])*fe.xFactor),De.push(parseFloat(Se[je+1])*fe.yFactor);else be.logs.push('Format error: '+Se)}var pe=/[, \t]{1,}/,me=['TIC','.RIC','SCANNUMBER'];return function(fe,xe){xe=xe||{};var be=/^$/;xe.keepRecordsRegExp&&(be=xe.keepRecordsRegExp);var ye=!xe.withoutXY,ke=Date.now(),_e={},Re={},we,je,ve,Se,De,Ce,Ee,Ie,Ae;Re.profiling=[],Re.logs=[];var Pe=[];Re.spectra=Pe,Re.info={};var Fe=new Q;if('string'!=typeof fe)return Re;for(Re.profiling&&Re.profiling.push({action:'Before split to LDRS',time:Date.now()-ke}),Se=fe.split(/[\r\n]+##/),Re.profiling&&Re.profiling.push({action:'Split to LDRS',time:Date.now()-ke}),Se[0]&&(Se[0]=Se[0].replace(/^[\r\n ]*##/,'')),(De=0,Ce=Se.length);De<Ce;De++){if(we=Se[De],Ee=we.indexOf('='),0<Ee?(je=we.substring(0,Ee),ve=we.substring(Ee+1).trim()):(je=we,ve=''),je=je.replace(/[_ -]/g,'').toUpperCase(),'DATATABLE'===je&&(Ie=ve.indexOf('\n'),-1===Ie&&(Ie=ve.indexOf('\r')),0<Ie)){var Te=-1,ze=-1;if(Ae=ve.substring(0,Ie).split(/[ ,;\t]+/),0<Ae[0].indexOf('++')){var Me=Ae[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,'$1'),Xe=Ae[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,'$1');Te=_e.symbol.indexOf(Me),ze=_e.symbol.indexOf(Xe)}-1===Te&&(Te=0),-1===ze&&(ze=0),_e.first&&(_e.first.length>Te&&(Fe.firstX=_e.first[Te]),_e.first.length>ze&&(Fe.firstY=_e.first[ze])),_e.last&&(_e.last.length>Te&&(Fe.lastX=_e.last[Te]),_e.last.length>ze&&(Fe.lastY=_e.last[ze])),_e.vardim&&_e.vardim.length>Te&&(Fe.nbPoints=_e.vardim[Te]),_e.factor&&(_e.factor.length>Te&&(Fe.xFactor=_e.factor[Te]),_e.factor.length>ze&&(Fe.yFactor=_e.factor[ze])),_e.units&&(_e.units.length>Te&&(Fe.xUnit=_e.units[Te]),_e.units.length>ze&&(Fe.yUnit=_e.units[ze])),Fe.datatable=Ae[0],Ae[1]&&-1<Ae[1].indexOf('PEAKS')?je='PEAKTABLE':Ae[1]&&(Ae[1].indexOf('XYDATA')||0<Ae[0].indexOf('++'))&&(je='XYDATA',Fe.deltaX=(Fe.lastX-Fe.firstX)/(Fe.nbPoints-1))}if('XYDATA'===je){ye&&(se(Re,Fe),ve.match(/.*\+\+.*/)?!1===xe.fastParse?O(Fe,ve,Re):(!Fe.deltaX&&(Fe.deltaX=(Fe.lastX-Fe.firstX)/(Fe.nbPoints-1)),he(Fe,ve,Re)):ge(Fe,ve,Re),Pe.push(Fe),Fe=new Q);continue}else if('PEAKTABLE'===je){ye&&(se(Re,Fe),ge(Fe,ve,Re),Pe.push(Fe),Fe=new Q);continue}if('TITLE'===je)Fe.title=ve;else if('DATATYPE'===je)Fe.dataType=ve,-1<ve.indexOf('nD')&&(Re.twoD=!0);else if('NTUPLES'===je)-1<ve.indexOf('nD')&&(Re.twoD=!0);else if('XUNITS'===je)Fe.xUnit=ve;else if('YUNITS'===je)Fe.yUnit=ve;else if('FIRSTX'===je)Fe.firstX=parseFloat(ve);else if('LASTX'===je)Fe.lastX=parseFloat(ve);else if('FIRSTY'===je)Fe.firstY=parseFloat(ve);else if('LASTY'===je)Fe.lastY=parseFloat(ve);else if('NPOINTS'===je)Fe.nbPoints=parseFloat(ve);else if('XFACTOR'===je)Fe.xFactor=parseFloat(ve);else if('YFACTOR'===je)Fe.yFactor=parseFloat(ve);else if('DELTAX'===je)Fe.deltaX=parseFloat(ve);else if('.OBSERVEFREQUENCY'===je||'$SFO1'===je)Fe.observeFrequency||(Fe.observeFrequency=parseFloat(ve));else if('.OBSERVENUCLEUS'===je)Fe.xType||(Re.xType=ve.replace(/[^a-zA-Z0-9]/g,''));else if('$SFO2'===je)Re.indirectFrequency||(Re.indirectFrequency=parseFloat(ve));else if('$OFFSET'===je)Re.shiftOffsetNum=0,Re.shiftOffsetVal||(Re.shiftOffsetVal=parseFloat(ve));else if('$REFERENCEPOINT'===je);else if('VARNAME'===je)_e.varname=ve.split(pe);else if('SYMBOL'===je)_e.symbol=ve.split(pe);else if('VARTYPE'===je)_e.vartype=ve.split(pe);else if('VARFORM'===je)_e.varform=ve.split(pe);else if('VARDIM'===je)_e.vardim=K(ve.split(pe));else if('UNITS'===je)_e.units=ve.split(pe);else if('FACTOR'===je)_e.factor=K(ve.split(pe));else if('FIRST'===je)_e.first=K(ve.split(pe));else if('LAST'===je)_e.last=K(ve.split(pe));else if('MIN'===je)_e.min=K(ve.split(pe));else if('MAX'===je)_e.max=K(ve.split(pe));else if('.NUCLEUS'===je)Re.twoD&&(Re.yType=ve.split(pe)[0]);else if('PAGE'===je){Fe.page=ve.trim(),Fe.pageValue=parseFloat(ve.replace(/^.*=/,'')),Fe.pageSymbol=Fe.page.replace(/=.*/,'');var Ye=_e.symbol.indexOf(Fe.pageSymbol),Ne='';_e.units&&_e.units[Ye]&&(Ne=_e.units[Ye]),Re.indirectFrequency&&'PPM'!==Ne&&(Fe.pageValue/=Re.indirectFrequency)}else'RETENTIONTIME'===je?Fe.pageValue=parseFloat(ve):te(je)&&(Fe[ee(je)]=ve);je.match(be)&&(Re.info[je]=ve.trim())}if(Re.profiling&&Re.profiling.push({action:'Finished parsing',time:Date.now()-ke}),0<Object.keys(_e).length){for(var Oe=[],Le=Object.keys(_e),De=0;De<Le.length;De++)for(var Ue=Le[De],Be=_e[Ue],Ve=0;Ve<Be.length;Ve++)Oe[Ve]||(Oe[Ve]={}),Oe[Ve][Ue]=Be[Ve];Re.ntuples=Oe}Re.twoD&&ye&&(ue(Re,xe),Re.profiling&&Re.profiling.push({action:'Finished countour plot calculation',time:Date.now()-ke}),!xe.keepSpectra&&delete Re.spectra);var qe=1<Pe.length&&(!Pe[0].dataType||Pe[0].dataType.match(/.*mass.*/i));if(qe&&xe.newGCMS&&(xe.xy=!0),xe.xy&&ye&&0<Pe.length)for(var De=0,Fe;De<Pe.length;De++)if(Fe=Pe[De],0<Fe.data.length)for(var Ve=0;Ve<Fe.data.length;Ve++){for(var $e=Fe.data[Ve],Ze={x:Array($e.length/2),y:Array($e.length/2)},We=0;We<$e.length;We+=2)Ze.x[We/2]=$e[We],Ze.y[We/2]=$e[We+1];Fe.data[Ve]=Ze}return qe&&ye&&(xe.newGCMS?ne(Re):ae(Re),Re.profiling&&Re.profiling.push({action:'Finished GCMS calculation',time:Date.now()-ke})),Re.profiling&&Re.profiling.push({action:'Total time',time:Date.now()-ke}),Re}}function F(K,Q){return W||T(),new Promise(function(G){var ee=Date.now()+''+Math.random();Z[ee]=G,W.postMessage(JSON.stringify({stamp:ee,input:K,options:Q}))})}function T(){var K=URL.createObjectURL(new Blob(['var getConverter ='+R.toString()+';var convert = getConverter(); onmessage = function (event) { var data = JSON.parse(event.data); postMessage(JSON.stringify({stamp: data.stamp, output: convert(data.input, data.options)})); };'],{type:'application/javascript'}));W=new Worker(K),URL.revokeObjectURL(K),W.addEventListener('message',function(Q){var G=JSON.parse(Q.data),ee=G.stamp;Z[ee]&&Z[ee](G.output)})}var O=I(83),$=R(),Z={},W;D.exports={convert:function(K,Q,G){return'boolean'==typeof Q&&(G=Q,Q={}),G?F(K,Q):$(K,Q)}}},function(D,E,I){'use strict';function R(F){if(F){this.data=F,this.length=this.data.length,this.index=0,this.zero=0;for(var T=0;T<this.data.length;T++)F[T]&=255}}var P=I(31);R.prototype=new P,R.prototype.byteAt=function(F){return this.data[this.zero+F]},R.prototype.lastIndexOfSignature=function(F){for(var T=F.charCodeAt(0),O=F.charCodeAt(1),$=F.charCodeAt(2),Z=F.charCodeAt(3),W=this.length-4;0<=W;--W)if(this.data[W]===T&&this.data[W+1]===O&&this.data[W+2]===$&&this.data[W+3]===Z)return W-this.zero;return-1},R.prototype.readData=function(F){if(this.checkOffset(F),0===F)return[];var T=this.data.slice(this.zero+this.index,this.zero+this.index+F);return this.index+=F,T},D.exports=R},function(D){'use strict';function R(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}R.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},D.exports=R},function(D,E,I){'use strict';function R(){this.data=null,this.length=0,this.index=0,this.zero=0}var P=I(0);R.prototype={checkOffset:function(F){this.checkIndex(this.index+F)},checkIndex:function(F){if(this.length<this.zero+F||0>F)throw new Error('End of data reached (data length = '+this.length+', asked index = '+F+'). Corrupted zip ?')},setIndex:function(F){this.checkIndex(F),this.index=F},skip:function(F){this.setIndex(this.index+F)},byteAt:function(){},readInt:function(F){var T=0,O;for(this.checkOffset(F),O=this.index+F-1;O>=this.index;O--)T=(T<<8)+this.byteAt(O);return this.index+=F,T},readString:function(F){return P.transformTo('string',this.readData(F))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var F=this.readInt(4);return new Date((127&F>>25)+1980,(15&F>>21)-1,31&F>>16,31&F>>11,63&F>>5,(31&F)<<1)}},D.exports=R},function(D,E){'use strict';E.base64=!1,E.binary=!1,E.dir=!1,E.createFolders=!1,E.date=null,E.compression=null,E.compressionOptions=null,E.comment=null,E.unixPermissions=null,E.dosPermissions=null},function(D,E){'use strict';E.LOCAL_FILE_HEADER='PK\x03\x04',E.CENTRAL_FILE_HEADER='PK\x01\x02',E.CENTRAL_DIRECTORY_END='PK\x05\x06',E.ZIP64_CENTRAL_DIRECTORY_LOCATOR='PK\x06\x07',E.ZIP64_CENTRAL_DIRECTORY_END='PK\x06\x06',E.DATA_DESCRIPTOR='PK\x07\b'},function(D,E,I){'use strict';function R(T,O){this.data=T,O||(this.data=F.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}var P=I(31),F=I(0);R.prototype=new P,R.prototype.byteAt=function(T){return this.data.charCodeAt(this.zero+T)},R.prototype.lastIndexOfSignature=function(T){return this.data.lastIndexOf(T)-this.zero},R.prototype.readData=function(T){this.checkOffset(T);var O=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,O},D.exports=R},function(D,E,I){'use strict';function R(F){F&&(this.data=F,this.length=this.data.length,this.index=0,this.zero=0)}var P=I(29);R.prototype=new P,R.prototype.readData=function(F){if(this.checkOffset(F),0===F)return new Uint8Array(0);var T=this.data.subarray(this.zero+this.index,this.zero+this.index+F);return this.index+=F,T},D.exports=R},function(D,E,I){'use strict';for(var R=I(0),P=I(5),F=I(12),T=Array(256),O=0;256>O;O++)T[O]=252<=O?6:248<=O?5:240<=O?4:224<=O?3:192<=O?2:1;T[254]=T[254]=1;var $=function(K){var ae=K.length,se=0,Q,G,ee,te,ne;for(te=0;te<ae;te++)G=K.charCodeAt(te),55296==(64512&G)&&te+1<ae&&(ee=K.charCodeAt(te+1),56320==(64512&ee)&&(G=65536+(G-55296<<10)+(ee-56320),te++)),se+=128>G?1:2048>G?2:65536>G?3:4;for(Q=P.uint8array?new Uint8Array(se):Array(se),ne=0,te=0;ne<se;te++)G=K.charCodeAt(te),55296==(64512&G)&&te+1<ae&&(ee=K.charCodeAt(te+1),56320==(64512&ee)&&(G=65536+(G-55296<<10)+(ee-56320),te++)),128>G?Q[ne++]=G:2048>G?(Q[ne++]=192|G>>>6,Q[ne++]=128|63&G):65536>G?(Q[ne++]=224|G>>>12,Q[ne++]=128|63&G>>>6,Q[ne++]=128|63&G):(Q[ne++]=240|G>>>18,Q[ne++]=128|63&G>>>12,Q[ne++]=128|63&G>>>6,Q[ne++]=128|63&G);return Q},Z=function(K,Q){var G;for(Q=Q||K.length,Q>K.length&&(Q=K.length),G=Q-1;0<=G&&128==(192&K[G]);)G--;return 0>G?Q:0===G?Q:G+T[K[G]]>Q?G:Q},W=function(K){var ae=K.length,se=Array(2*ae),G,ee,te,ne;for(ee=0,G=0;G<ae;){if(te=K[G++],128>te){se[ee++]=te;continue}if(ne=T[te],4<ne){se[ee++]=65533,G+=ne-1;continue}for(te&=2===ne?31:3===ne?15:7;1<ne&&G<ae;)te=te<<6|63&K[G++],ne--;if(1<ne){se[ee++]=65533;continue}65536>te?se[ee++]=te:(te-=65536,se[ee++]=55296|1023&te>>10,se[ee++]=56320|1023&te)}return se.length!==ee&&(se.subarray?se=se.subarray(0,ee):se.length=ee),R.applyFromCharCode(se)};E.utf8encode=function(Q){return P.nodebuffer?F(Q,'utf-8'):$(Q)},E.utf8decode=function(Q){if(P.nodebuffer)return R.transformTo('nodebuffer',Q).toString('utf-8');Q=R.transformTo(P.uint8array?'uint8array':'array',Q);for(var G=[],ee=0,te=Q.length,ae;ee<te;)ae=Z(Q,_Mathmin(ee+65536,te)),P.uint8array?G.push(W(Q.subarray(ee,ae))):G.push(W(Q.slice(ee,ae))),ee=ae;return G.join('')}},function(D,E,I){D.exports=E=I(94),E.getEquallySpacedData=I(95).getEquallySpacedData,E.SNV=I(96).SNV},function(D){'use strict';function R(F,T){for(var O=0,$=0;$<F.length;$++)O+=(F[$]-T[$])*(F[$]-T[$]);return O}function P(F,T){return _Mathsqrt(R(F,T))}D.exports=P,P.squared=R},function(D,E){(function(){var P=0?{}:E;var F={release:'0.3.0',date:'2013-03'};P.toString=function(){return'version '+F.release+', released '+F.date};for(var T=0,O=null,$=null,Z={init:function(Q){if(0!==Q&&0==(Q&Q-1))T=Q,Z._initArray(),Z._makeBitReversalTable(),Z._makeCosSinTable();else throw new Error('init: radix-2 required')},fft1d:function(Q,G){Z.fft(Q,G,1)},ifft1d:function(Q,G){var ee=1/T;Z.fft(Q,G,-1);for(var te=0;te<T;te++)Q[te]*=ee,G[te]*=ee},bt1d:function(Q,G){Z.fft(Q,G,-1)},fft2d:function(Q,G){for(var ee=[],te=[],ne=0,ae=0;ae<T;ae++){ne=ae*T;for(var se=0;se<T;se++)ee[se]=Q[se+ne],te[se]=G[se+ne];Z.fft1d(ee,te);for(var oe=0;oe<T;oe++)Q[oe+ne]=ee[oe],G[oe+ne]=te[oe]}for(var le=0;le<T;le++){for(var de=0;de<T;de++)ne=le+de*T,ee[de]=Q[ne],te[de]=G[ne];Z.fft1d(ee,te);for(var ue=0;ue<T;ue++)ne=le+ue*T,Q[ne]=ee[ue],G[ne]=te[ue]}},ifft2d:function(Q,G){for(var ee=[],te=[],ne=0,ae=0;ae<T;ae++){ne=ae*T;for(var se=0;se<T;se++)ee[se]=Q[se+ne],te[se]=G[se+ne];Z.ifft1d(ee,te);for(var oe=0;oe<T;oe++)Q[oe+ne]=ee[oe],G[oe+ne]=te[oe]}for(var le=0;le<T;le++){for(var de=0;de<T;de++)ne=le+de*T,ee[de]=Q[ne],te[de]=G[ne];Z.ifft1d(ee,te);for(var ue=0;ue<T;ue++)ne=le+ue*T,Q[ne]=ee[ue],G[ne]=te[ue]}},fft:function(Q,G,ee){for(var he=T>>2,ge=0,te,ne,ae,se,oe,le,de,ue,ce;ge<T;ge++)se=O[ge],ge<se&&(oe=Q[ge],Q[ge]=Q[se],Q[se]=oe,oe=G[ge],G[ge]=G[se],G[se]=oe);for(var pe=1;pe<T;pe<<=1){ne=0,te=T/(pe<<1);for(var me=0;me<pe;me++){le=$[ne+he],de=ee*$[ne];for(var fe=me;fe<T;fe+=pe<<1)ae=fe+pe,ue=le*Q[ae]+de*G[ae],ce=le*G[ae]-de*Q[ae],Q[ae]=Q[fe]-ue,Q[fe]+=ue,G[ae]=G[fe]-ce,G[fe]+=ce;ne+=te}}},_initArray:function(){O='undefined'==typeof Uint32Array?[]:new Uint32Array(T),$='undefined'==typeof Float64Array?[]:new Float64Array(1.25*T)},_paddingZero:function(){},_makeBitReversalTable:function(){var Q=0,G=0,ee=0;for(O[0]=0;++Q<T;){for(ee=T>>1;ee<=G;)G-=ee,ee>>=1;G+=ee,O[Q]=G}},_makeCosSinTable:function(){var Q=T>>1,G=T>>2,ee=T>>3,ne=_Mathsin(_MathPI/T),ae=2*ne*ne,se=_Mathsqrt(ae*(2-ae)),oe=$[G]=1,le=$[0]=0;ne=2*ae;for(var de=1;de<ee;de++)oe-=ae,ae+=ne*oe,le+=se,se-=ne*le,$[de]=le,$[G-de]=oe;0!=ee&&($[ee]=0.7071067811865476);for(var ue=0;ue<G;ue++)$[Q-ue]=$[ue];for(var ce=0;ce<Q+G;ce++)$[ce+Q]=-$[ce]}},W=['init','fft1d','ifft1d','fft2d','ifft2d'],K=0;K<W.length;K++)P[W[K]]=Z[W[K]];return P.bt=Z.bt1d,P.fft=Z.fft1d,P.ifft=Z.ifft1d,P}).call(this)},function(D,E,I){'use strict';E.FFTUtils=I(99),E.FFT=I(39)},function(D,E,I){'use strict';function R(T){P.call(this),this.index=T,this.distance=0,this.children=[]}const P=I(14),F=I(155);F.inherits(R,P),D.exports=R},function(D,E){(function(){var P=0?{}:E;var F={release:'0.3.0',date:'2013-03'};P.toString=function(){return'version '+F.release+', released '+F.date};for(var T=0,O=null,$=null,Z={init:function(Q){if(0!==Q&&0==(Q&Q-1))T=Q,Z._initArray(),Z._makeBitReversalTable(),Z._makeCosSinTable();else throw new Error('init: radix-2 required')},fft1d:function(Q,G){Z.fft(Q,G,1)},ifft1d:function(Q,G){var ee=1/T;Z.fft(Q,G,-1);for(var te=0;te<T;te++)Q[te]*=ee,G[te]*=ee},bt1d:function(Q,G){Z.fft(Q,G,-1)},fft2d:function(Q,G){for(var ee=[],te=[],ne=0,ae=0;ae<T;ae++){ne=ae*T;for(var se=0;se<T;se++)ee[se]=Q[se+ne],te[se]=G[se+ne];Z.fft1d(ee,te);for(var oe=0;oe<T;oe++)Q[oe+ne]=ee[oe],G[oe+ne]=te[oe]}for(var le=0;le<T;le++){for(var de=0;de<T;de++)ne=le+de*T,ee[de]=Q[ne],te[de]=G[ne];Z.fft1d(ee,te);for(var ue=0;ue<T;ue++)ne=le+ue*T,Q[ne]=ee[ue],G[ne]=te[ue]}},ifft2d:function(Q,G){for(var ee=[],te=[],ne=0,ae=0;ae<T;ae++){ne=ae*T;for(var se=0;se<T;se++)ee[se]=Q[se+ne],te[se]=G[se+ne];Z.ifft1d(ee,te);for(var oe=0;oe<T;oe++)Q[oe+ne]=ee[oe],G[oe+ne]=te[oe]}for(var le=0;le<T;le++){for(var de=0;de<T;de++)ne=le+de*T,ee[de]=Q[ne],te[de]=G[ne];Z.ifft1d(ee,te);for(var ue=0;ue<T;ue++)ne=le+ue*T,Q[ne]=ee[ue],G[ne]=te[ue]}},fft:function(Q,G,ee){for(var he=T>>2,ge=0,te,ne,ae,se,oe,le,de,ue,ce;ge<T;ge++)se=O[ge],ge<se&&(oe=Q[ge],Q[ge]=Q[se],Q[se]=oe,oe=G[ge],G[ge]=G[se],G[se]=oe);for(var pe=1;pe<T;pe<<=1){ne=0,te=T/(pe<<1);for(var me=0;me<pe;me++){le=$[ne+he],de=ee*$[ne];for(var fe=me;fe<T;fe+=pe<<1)ae=fe+pe,ue=le*Q[ae]+de*G[ae],ce=le*G[ae]-de*Q[ae],Q[ae]=Q[fe]-ue,Q[fe]+=ue,G[ae]=G[fe]-ce,G[fe]+=ce;ne+=te}}},_initArray:function(){O='undefined'==typeof Uint32Array?[]:new Uint32Array(T),$='undefined'==typeof Float64Array?[]:new Float64Array(1.25*T)},_paddingZero:function(){},_makeBitReversalTable:function(){var Q=0,G=0,ee=0;for(O[0]=0;++Q<T;){for(ee=T>>1;ee<=G;)G-=ee,ee>>=1;G+=ee,O[Q]=G}},_makeCosSinTable:function(){var Q=T>>1,G=T>>2,ee=T>>3,ne=_Mathsin(_MathPI/T),ae=2*ne*ne,se=_Mathsqrt(ae*(2-ae)),oe=$[G]=1,le=$[0]=0;ne=2*ae;for(var de=1;de<ee;de++)oe-=ae,ae+=ne*oe,le+=se,se-=ne*le,$[de]=le,$[G-de]=oe;0!=ee&&($[ee]=0.7071067811865476);for(var ue=0;ue<G;ue++)$[Q-ue]=$[ue];for(var ce=0;ce<Q+G;ce++)$[ce+Q]=-$[ce]}},W=['init','fft1d','ifft1d','fft2d','ifft2d'],K=0;K<W.length;K++)P[W[K]]=Z[W[K]];return P.bt=Z.bt1d,P.fft=Z.fft1d,P.ifft=Z.ifft1d,P}).call(this)},function(module,exports,__webpack_require__){'use strict';function abstractMatrix(superCtor){function checkDimensions(D,E){if(D.rows!==E.rows||D.columns!==E.columns)throw new RangeError('Matrices dimensions must be equal')}function compareNumbers(D,E){return D-E}function fillTemplateFunction(D,E){for(var I in E)D=D.replace(new RegExp('%'+I+'%','g'),E[I]);return D}superCtor===void 0&&(superCtor=Object);class Matrix extends superCtor{static get[Symbol.species](){return this}static from1DArray(D,E,I){if(D*E!==I.length)throw new RangeError('Data length does not match given dimensions');for(var P=new this(D,E),F=0;F<D;F++)for(var T=0;T<E;T++)P.set(F,T,I[F*E+T]);return P}static rowVector(D){for(var E=new this(1,D.length),I=0;I<D.length;I++)E.set(0,I,D[I]);return E}static columnVector(D){for(var E=new this(D.length,1),I=0;I<D.length;I++)E.set(I,0,D[I]);return E}static empty(D,E){return new this(D,E)}static zeros(D,E){return this.empty(D,E).fill(0)}static ones(D,E){return this.empty(D,E).fill(1)}static rand(D,E,I){I===void 0&&(I=Math.random);for(var R=this.empty(D,E),P=0;P<D;P++)for(var F=0;F<E;F++)R.set(P,F,I());return R}static randInt(D,E,I,R){I===void 0&&(I=1e3),R===void 0&&(R=Math.random);for(var P=this.empty(D,E),F=0;F<D;F++)for(var T=0,O;T<E;T++)O=_Mathfloor(R()*I),P.set(F,T,O);return P}static eye(D,E,I){E===void 0&&(E=D),I===void 0&&(I=1);for(var R=_Mathmin(D,E),P=this.zeros(D,E),F=0;F<R;F++)P.set(F,F,I);return P}static diag(D,E,I){var R=D.length;E===void 0&&(E=R),I===void 0&&(I=E);for(var P=_Mathmin(R,E,I),F=this.zeros(E,I),T=0;T<P;T++)F.set(T,T,D[T]);return F}static min(D,E){D=this.checkMatrix(D),E=this.checkMatrix(E);for(var I=D.rows,R=D.columns,P=new this(I,R),F=0;F<I;F++)for(var T=0;T<R;T++)P.set(F,T,_Mathmin(D.get(F,T),E.get(F,T)));return P}static max(D,E){D=this.checkMatrix(D),E=this.checkMatrix(E);for(var I=D.rows,R=D.columns,P=new this(I,R),F=0;F<I;F++)for(var T=0;T<R;T++)P.set(F,T,_Mathmax(D.get(F,T),E.get(F,T)));return P}static checkMatrix(D){return Matrix.isMatrix(D)?D:new this(D)}static isMatrix(D){return null!=D&&'Matrix'===D.klass}get size(){return this.rows*this.columns}apply(D){if('function'!=typeof D)throw new TypeError('callback must be a function');for(var E=this.rows,I=this.columns,R=0;R<E;R++)for(var P=0;P<I;P++)D.call(this,R,P);return this}to1DArray(){for(var D=Array(this.size),E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)D[E*this.columns+I]=this.get(E,I);return D}to2DArray(){for(var D=Array(this.rows),E=0;E<this.rows;E++){D[E]=Array(this.columns);for(var I=0;I<this.columns;I++)D[E][I]=this.get(E,I)}return D}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var D=0;D<this.rows;D++)for(var E=0;E<=D;E++)if(this.get(D,E)!==this.get(E,D))return!1;return!0}return!1}set(){throw new Error('set method is unimplemented')}get(){throw new Error('get method is unimplemented')}repeat(D,E){D=D||1,E=E||1;for(var I=new this.constructor[Symbol.species](this.rows*D,this.columns*E),R=0;R<D;R++)for(var P=0;P<E;P++)I.setSubMatrix(this,this.rows*R,this.columns*P);return I}fill(D){for(var E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.set(E,I,D);return this}neg(){return this.mulS(-1)}getRow(D){util.checkRowIndex(this,D);for(var E=Array(this.columns),I=0;I<this.columns;I++)E[I]=this.get(D,I);return E}getRowVector(D){return this.constructor.rowVector(this.getRow(D))}setRow(D,E){util.checkRowIndex(this,D),E=util.checkRowVector(this,E);for(var I=0;I<this.columns;I++)this.set(D,I,E[I]);return this}swapRows(D,E){util.checkRowIndex(this,D),util.checkRowIndex(this,E);for(var I=0,R;I<this.columns;I++)R=this.get(D,I),this.set(D,I,this.get(E,I)),this.set(E,I,R);return this}getColumn(D){util.checkColumnIndex(this,D);for(var E=Array(this.rows),I=0;I<this.rows;I++)E[I]=this.get(I,D);return E}getColumnVector(D){return this.constructor.columnVector(this.getColumn(D))}setColumn(D,E){util.checkColumnIndex(this,D),E=util.checkColumnVector(this,E);for(var I=0;I<this.rows;I++)this.set(I,D,E[I]);return this}swapColumns(D,E){util.checkColumnIndex(this,D),util.checkColumnIndex(this,E);for(var I=0,R;I<this.rows;I++)R=this.get(I,D),this.set(I,D,this.get(I,E)),this.set(I,E,R);return this}addRowVector(D){D=util.checkRowVector(this,D);for(var E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.set(E,I,this.get(E,I)+D[I]);return this}subRowVector(D){D=util.checkRowVector(this,D);for(var E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.set(E,I,this.get(E,I)-D[I]);return this}mulRowVector(D){D=util.checkRowVector(this,D);for(var E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.set(E,I,this.get(E,I)*D[I]);return this}divRowVector(D){D=util.checkRowVector(this,D);for(var E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.set(E,I,this.get(E,I)/D[I]);return this}addColumnVector(D){D=util.checkColumnVector(this,D);for(var E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.set(E,I,this.get(E,I)+D[E]);return this}subColumnVector(D){D=util.checkColumnVector(this,D);for(var E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.set(E,I,this.get(E,I)-D[E]);return this}mulColumnVector(D){D=util.checkColumnVector(this,D);for(var E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.set(E,I,this.get(E,I)*D[E]);return this}divColumnVector(D){D=util.checkColumnVector(this,D);for(var E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.set(E,I,this.get(E,I)/D[E]);return this}mulRow(D,E){util.checkRowIndex(this,D);for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)*E);return this}mulColumn(D,E){util.checkColumnIndex(this,D);for(var I=0;I<this.rows;I++)this.set(I,D,this.get(I,D)*E);return this}max(){for(var D=this.get(0,0),E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.get(E,I)>D&&(D=this.get(E,I));return D}maxIndex(){for(var D=this.get(0,0),E=[0,0],I=0;I<this.rows;I++)for(var R=0;R<this.columns;R++)this.get(I,R)>D&&(D=this.get(I,R),E[0]=I,E[1]=R);return E}min(){for(var D=this.get(0,0),E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)this.get(E,I)<D&&(D=this.get(E,I));return D}minIndex(){for(var D=this.get(0,0),E=[0,0],I=0;I<this.rows;I++)for(var R=0;R<this.columns;R++)this.get(I,R)<D&&(D=this.get(I,R),E[0]=I,E[1]=R);return E}maxRow(D){util.checkRowIndex(this,D);for(var E=this.get(D,0),I=1;I<this.columns;I++)this.get(D,I)>E&&(E=this.get(D,I));return E}maxRowIndex(D){util.checkRowIndex(this,D);for(var E=this.get(D,0),I=[D,0],R=1;R<this.columns;R++)this.get(D,R)>E&&(E=this.get(D,R),I[1]=R);return I}minRow(D){util.checkRowIndex(this,D);for(var E=this.get(D,0),I=1;I<this.columns;I++)this.get(D,I)<E&&(E=this.get(D,I));return E}minRowIndex(D){util.checkRowIndex(this,D);for(var E=this.get(D,0),I=[D,0],R=1;R<this.columns;R++)this.get(D,R)<E&&(E=this.get(D,R),I[1]=R);return I}maxColumn(D){util.checkColumnIndex(this,D);for(var E=this.get(0,D),I=1;I<this.rows;I++)this.get(I,D)>E&&(E=this.get(I,D));return E}maxColumnIndex(D){util.checkColumnIndex(this,D);for(var E=this.get(0,D),I=[0,D],R=1;R<this.rows;R++)this.get(R,D)>E&&(E=this.get(R,D),I[0]=R);return I}minColumn(D){util.checkColumnIndex(this,D);for(var E=this.get(0,D),I=1;I<this.rows;I++)this.get(I,D)<E&&(E=this.get(I,D));return E}minColumnIndex(D){util.checkColumnIndex(this,D);for(var E=this.get(0,D),I=[0,D],R=1;R<this.rows;R++)this.get(R,D)<E&&(E=this.get(R,D),I[0]=R);return I}diag(){for(var D=_Mathmin(this.rows,this.columns),E=Array(D),I=0;I<D;I++)E[I]=this.get(I,I);return E}sum(D){return'row'===D?util.sumByRow(this):'column'===D?util.sumByColumn(this):util.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var D=1,E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)D*=this.get(E,I);return D}cumulativeSum(){for(var D=0,E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)D+=this.get(E,I),this.set(E,I,D);return this}dot(D){Matrix.isMatrix(D)&&(D=D.to1DArray());var E=this.to1DArray();if(E.length!==D.length)throw new RangeError('vectors do not have the same size');for(var I=0,R=0;R<E.length;R++)I+=E[R]*D[R];return I}mmul(D){D=this.constructor.checkMatrix(D),this.columns!==D.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');for(var E=this.rows,I=this.columns,R=D.columns,P=new this.constructor[Symbol.species](E,R),F=Array(I),T=0;T<R;T++){for(var O=0;O<I;O++)F[O]=D.get(O,T);for(var $=0,Z;$<E;$++){for(Z=0,O=0;O<I;O++)Z+=this.get($,O)*F[O];P.set($,T,Z)}}return P}strassen2x2(D){var E=new this.constructor[Symbol.species](2,2);const I=this.get(0,0),R=D.get(0,0),P=this.get(0,1),F=D.get(0,1),T=this.get(1,0),O=D.get(1,0),$=this.get(1,1),Z=D.get(1,1),W=(I+$)*(R+Z),K=(T+$)*R,Q=I*(F-Z),G=$*(O-R),ee=(I+P)*Z;return E.set(0,0,W+G-ee+(P-$)*(O+Z)),E.set(0,1,Q+ee),E.set(1,0,K+G),E.set(1,1,W-K+Q+(T-I)*(R+F)),E}strassen3x3(D){var E=new this.constructor[Symbol.species](3,3);const I=this.get(0,0),R=this.get(0,1),P=this.get(0,2),F=this.get(1,0),T=this.get(1,1),O=this.get(1,2),$=this.get(2,0),Z=this.get(2,1),W=this.get(2,2),K=D.get(0,0),Q=D.get(0,1),G=D.get(0,2),ee=D.get(1,0),te=D.get(1,1),ne=D.get(1,2),ae=D.get(2,0),se=D.get(2,1),oe=D.get(2,2),de=(I-F)*(-Q+te),ce=(-I+F+T)*(K-Q+te),he=(F+T)*(-K+Q),ge=I*K,pe=(-I+$+Z)*(K-G+ne),me=(-I+$)*(G-ne),fe=($+Z)*(-K+G),ye=(-P+Z+W)*(te+ae-se),ke=(P-W)*(te-se),_e=P*ae,we=(Z+W)*(-ae+se),je=(-P+T+O)*(ne+ae-oe),ve=(P-O)*(ne-oe),Se=(T+O)*(-ae+oe);return E.set(0,0,ge+_e+R*ee),E.set(0,1,(I+R+P-F-T-Z-W)*te+ce+he+ge+ye+_e+we),E.set(0,2,ge+pe+fe+(I+R+P-T-O-$-Z)*ne+_e+je+Se),E.set(1,0,de+T*(-K+Q+ee-te-ne-ae+oe)+ce+ge+_e+je+ve),E.set(1,1,de+ce+he+ge+O*se),E.set(1,2,_e+je+ve+Se+F*G),E.set(2,0,ge+pe+me+Z*(-K+G+ee-te-ne-ae+se)+ye+ke+_e),E.set(2,1,ye+ke+_e+we+$*Q),E.set(2,2,ge+pe+me+fe+W*oe),E}mmulStrassen(D){function E(W,K,Q){var G=W.rows,ee=W.columns;if(G===K&&ee===Q)return W;var te=Matrix.zeros(K,Q);return te=te.setSubMatrix(W,0,0),te}function I(W,K,Q,G){if(512>=Q||512>=G)return W.mmul(K);1==Q%2&&1==G%2?(W=E(W,Q+1,G+1),K=E(K,Q+1,G+1)):1==Q%2?(W=E(W,Q+1,G),K=E(K,Q+1,G)):1==G%2&&(W=E(W,Q,G+1),K=E(K,Q,G+1));var ee=parseInt(W.rows/2),te=parseInt(W.columns/2),ne=W.subMatrix(0,ee-1,0,te-1),ae=K.subMatrix(0,ee-1,0,te-1),se=W.subMatrix(0,ee-1,te,W.columns-1),oe=K.subMatrix(0,ee-1,te,K.columns-1),le=W.subMatrix(ee,W.rows-1,0,te-1),de=K.subMatrix(ee,K.rows-1,0,te-1),ue=W.subMatrix(ee,W.rows-1,te,W.columns-1),ce=K.subMatrix(ee,K.rows-1,te,K.columns-1),he=I(Matrix.add(ne,ue),Matrix.add(ae,ce),ee,te),ge=I(Matrix.add(le,ue),ae,ee,te),pe=I(ne,Matrix.sub(oe,ce),ee,te),me=I(ue,Matrix.sub(de,ae),ee,te),fe=I(Matrix.add(ne,se),ce,ee,te),xe=I(Matrix.sub(le,ne),Matrix.add(ae,oe),ee,te),be=I(Matrix.sub(se,ue),Matrix.add(de,ce),ee,te),ye=Matrix.add(he,me);ye.sub(fe),ye.add(be);var ke=Matrix.add(pe,fe),_e=Matrix.add(ge,me),we=Matrix.sub(he,ge);we.add(pe),we.add(xe);var je=Matrix.zeros(2*ye.rows,2*ye.columns);return je=je.setSubMatrix(ye,0,0),je=je.setSubMatrix(ke,ye.rows,0),je=je.setSubMatrix(_e,0,ye.columns),je=je.setSubMatrix(we,ye.rows,ye.columns),je.subMatrix(0,Q-1,0,G-1)}var R=this.clone(),P=R.rows,F=R.columns,T=D.rows,O=D.columns;F!==T&&console.warn(`Multiplying ${P} x ${F} and ${T} x ${O} matrix: dimensions do not match.`);var $=_Mathmax(P,T),Z=_Mathmax(F,O);return R=E(R,$,Z),D=E(D,$,Z),I(R,D,$,Z)}scaleRows(D,E){if(D=void 0===D?0:D,E=void 0===E?1:E,D>=E)throw new RangeError('min should be strictly smaller than max');for(var I=this.constructor.empty(this.rows,this.columns),R=0,P;R<this.rows;R++)P=arrayUtils.scale(this.getRow(R),{min:D,max:E}),I.setRow(R,P);return I}scaleColumns(D,E){if(D=void 0===D?0:D,E=void 0===E?1:E,D>=E)throw new RangeError('min should be strictly smaller than max');for(var I=this.constructor.empty(this.rows,this.columns),R=0,P;R<this.columns;R++)P=arrayUtils.scale(this.getColumn(R),{min:D,max:E}),I.setColumn(R,P);return I}kroneckerProduct(D){D=this.constructor.checkMatrix(D);for(var E=this.rows,I=this.columns,R=D.rows,P=D.columns,F=new this.constructor[Symbol.species](E*R,I*P),T=0;T<E;T++)for(var O=0;O<I;O++)for(var $=0;$<R;$++)for(var Z=0;Z<P;Z++)F[R*T+$][P*O+Z]=this.get(T,O)*D.get($,Z);return F}transpose(){for(var D=new this.constructor[Symbol.species](this.columns,this.rows),E=0;E<this.rows;E++)for(var I=0;I<this.columns;I++)D.set(I,E,this.get(E,I));return D}sortRows(D){D===void 0&&(D=compareNumbers);for(var E=0;E<this.rows;E++)this.setRow(E,this.getRow(E).sort(D));return this}sortColumns(D){D===void 0&&(D=compareNumbers);for(var E=0;E<this.columns;E++)this.setColumn(E,this.getColumn(E).sort(D));return this}subMatrix(D,E,I,R){util.checkRange(this,D,E,I,R);for(var P=new this.constructor[Symbol.species](E-D+1,R-I+1),F=D;F<=E;F++)for(var T=I;T<=R;T++)P[F-D][T-I]=this.get(F,T);return P}subMatrixRow(D,E,I){if(void 0===E&&(E=0),void 0===I&&(I=this.columns-1),E>I||0>E||E>=this.columns||0>I||I>=this.columns)throw new RangeError('Argument out of range');for(var R=new this.constructor[Symbol.species](D.length,I-E+1),P=0;P<D.length;P++)for(var F=E;F<=I;F++){if(0>D[P]||D[P]>=this.rows)throw new RangeError('Row index out of range: '+D[P]);R.set(P,F-E,this.get(D[P],F))}return R}subMatrixColumn(D,E,I){if(void 0===E&&(E=0),void 0===I&&(I=this.rows-1),E>I||0>E||E>=this.rows||0>I||I>=this.rows)throw new RangeError('Argument out of range');for(var R=new this.constructor[Symbol.species](I-E+1,D.length),P=0;P<D.length;P++)for(var F=E;F<=I;F++){if(0>D[P]||D[P]>=this.columns)throw new RangeError('Column index out of range: '+D[P]);R.set(F-E,P,this.get(F,D[P]))}return R}setSubMatrix(D,E,I){D=this.constructor.checkMatrix(D);var R=E+D.rows-1,P=I+D.columns-1;util.checkRange(this,E,R,I,P);for(var F=0;F<D.rows;F++)for(var T=0;T<D.columns;T++)this[E+F][I+T]=D.get(F,T);return this}selection(D,E){for(var I=util.checkIndices(this,D,E),R=new this.constructor[Symbol.species](D.length,E.length),P=0,F;P<I.row.length;P++){F=I.row[P];for(var T=0,O;T<I.column.length;T++)O=I.column[T],R[P][T]=this.get(F,O)}return R}trace(){for(var D=_Mathmin(this.rows,this.columns),E=0,I=0;I<D;I++)E+=this.get(I,I);return E}transposeView(){return new MatrixTransposeView(this)}rowView(D){return util.checkRowIndex(this,D),new MatrixRowView(this,D)}columnView(D){return util.checkColumnIndex(this,D),new MatrixColumnView(this,D)}flipRowView(){return new MatrixFlipRowView(this)}flipColumnView(){return new MatrixFlipColumnView(this)}subMatrixView(D,E,I,R){return new MatrixSubView(this,D,E,I,R)}selectionView(D,E){return new MatrixSelectionView(this,D,E)}det(){if(this.isSquare()){var D,E,I,R;if(2===this.columns)return D=this.get(0,0),E=this.get(0,1),I=this.get(1,0),R=this.get(1,1),D*R-E*I;if(3===this.columns){var P,F,T;return P=this.selectionView([1,2],[1,2]),F=this.selectionView([1,2],[0,2]),T=this.selectionView([1,2],[0,1]),D=this.get(0,0),E=this.get(0,1),I=this.get(0,2),D*P.det()-E*F.det()+I*T.det()}return new LuDecomposition(this).determinant}throw Error('Determinant can only be calculated for a square matrix.')}pseudoInverse(D){void 0===D&&(D=Number.EPSILON);for(var E=new SvDecomposition(this,{autoTranspose:!0}),I=E.leftSingularVectors,R=E.rightSingularVectors,P=E.diagonal,F=0;F<P.length;F++)P[F]=_Mathabs(P[F])>D?1/P[F]:0;return P=this.constructor[Symbol.species].diag(P),R.mmul(P.mmul(I.transposeView()))}}Matrix.prototype.klass='Matrix',Matrix.random=Matrix.rand,Matrix.diagonal=Matrix.diag,Matrix.prototype.diagonal=Matrix.prototype.diag,Matrix.identity=Matrix.eye,Matrix.prototype.negate=Matrix.prototype.neg,Matrix.prototype.tensorProduct=Matrix.prototype.kroneckerProduct,Matrix.prototype.determinant=Matrix.prototype.det;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,inplaceMethodWithArgs=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,staticMethodWithArgs=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,inplaceMethodWithOneArgScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,inplaceMethodWithOneArgMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,inplaceMethodWithOneArg=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,staticMethodWithOneArg=staticMethodWithArgs,operators=[['+','add'],['-','sub','subtract'],['*','mul','multiply'],['/','div','divide'],['%','mod','modulus'],['&','and'],['|','or'],['^','xor'],['<<','leftShift'],['>>','signPropagatingRightShift'],['>>>','rightShift','zeroFillRightShift']],i;for(var operator of operators){var inplaceOp=eval(fillTemplateFunction(inplaceOperator,{name:operator[1],op:operator[0]})),inplaceOpS=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[1]+'S',op:operator[0]})),inplaceOpM=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[1]+'M',op:operator[0]})),staticOp=eval(fillTemplateFunction(staticOperator,{name:operator[1]}));for(i=1;i<operator.length;i++)Matrix.prototype[operator[i]]=inplaceOp,Matrix.prototype[operator[i]+'S']=inplaceOpS,Matrix.prototype[operator[i]+'M']=inplaceOpM,Matrix[operator[i]]=staticOp}var methods=[['~','not']];['abs','acos','acosh','asin','asinh','atan','atanh','cbrt','ceil','clz32','cos','cosh','exp','expm1','floor','fround','log','log1p','log10','log2','round','sign','sin','sinh','sqrt','tan','tanh','trunc'].forEach(function(D){methods.push(['Math.'+D,D])});for(var method of methods){var inplaceMeth=eval(fillTemplateFunction(inplaceMethod,{name:method[1],method:method[0]})),staticMeth=eval(fillTemplateFunction(staticMethod,{name:method[1]}));for(i=1;i<method.length;i++)Matrix.prototype[method[i]]=inplaceMeth,Matrix[method[i]]=staticMeth}var methodsWithArgs=[['Math.pow',1,'pow']];for(var methodWithArg of methodsWithArgs){var args='arg0';for(i=1;i<methodWithArg[1];i++)args+=`, arg${i}`;if(1!==methodWithArg[1]){var inplaceMethWithArgs=eval(fillTemplateFunction(inplaceMethodWithArgs,{name:methodWithArg[2],method:methodWithArg[0],args:args})),staticMethWithArgs=eval(fillTemplateFunction(staticMethodWithArgs,{name:methodWithArg[2],args:args}));for(i=2;i<methodWithArg.length;i++)Matrix.prototype[methodWithArg[i]]=inplaceMethWithArgs,Matrix[methodWithArg[i]]=staticMethWithArgs}else{var tmplVar={name:methodWithArg[2],args:args,method:methodWithArg[0]},inplaceMethod2=eval(fillTemplateFunction(inplaceMethodWithOneArg,tmplVar)),inplaceMethodS=eval(fillTemplateFunction(inplaceMethodWithOneArgScalar,tmplVar)),inplaceMethodM=eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix,tmplVar)),staticMethod2=eval(fillTemplateFunction(staticMethodWithOneArg,tmplVar));for(i=2;i<methodWithArg.length;i++)Matrix.prototype[methodWithArg[i]]=inplaceMethod2,Matrix.prototype[methodWithArg[i]+'M']=inplaceMethodM,Matrix.prototype[methodWithArg[i]+'S']=inplaceMethodS,Matrix[methodWithArg[i]]=staticMethod2}}return Matrix}module.exports=abstractMatrix;var LuDecomposition=__webpack_require__(44),SvDecomposition=__webpack_require__(45),arrayUtils=__webpack_require__(37),util=__webpack_require__(7),MatrixTransposeView=__webpack_require__(124),MatrixRowView=__webpack_require__(121),MatrixSubView=__webpack_require__(123),MatrixSelectionView=__webpack_require__(122),MatrixColumnView=__webpack_require__(118),MatrixFlipRowView=__webpack_require__(120),MatrixFlipColumnView=__webpack_require__(119)},function(D,E,I){'use strict';function R(F){if(!(this instanceof R))return new R(F);F=P.Matrix.checkMatrix(F);var T=F.clone(),O=T.rows,$=T.columns,Z=Array(O),W=1,K,Q,G,ee,te,ne,ae,se,oe,le;for(K=0;K<O;K++)Z[K]=K;for(oe=Array(O),Q=0;Q<$;Q++){for(K=0;K<O;K++)oe[K]=T[K][Q];for(K=0;K<O;K++){for(se=T[K],le=_Mathmin(K,Q),te=0,G=0;G<le;G++)te+=se[G]*oe[G];se[Q]=oe[K]-=te}for(ee=Q,K=Q+1;K<O;K++)_Mathabs(oe[K])>_Mathabs(oe[ee])&&(ee=K);if(ee!==Q){for(G=0;G<$;G++)ne=T[ee][G],T[ee][G]=T[Q][G],T[Q][G]=ne;ae=Z[ee],Z[ee]=Z[Q],Z[Q]=ae,W=-W}if(Q<O&&0!==T[Q][Q])for(K=Q+1;K<O;K++)T[K][Q]/=T[Q][Q]}this.LU=T,this.pivotVector=Z,this.pivotSign=W}var P=I(1);R.prototype={isSingular:function(){for(var F=this.LU,T=F.columns,O=0;O<T;O++)if(0===F[O][O])return!0;return!1},get determinant(){var F=this.LU;if(!F.isSquare())throw new Error('Matrix must be square');for(var T=this.pivotSign,O=F.columns,$=0;$<O;$++)T*=F[$][$];return T},get lowerTriangularMatrix(){for(var F=this.LU,T=F.rows,O=F.columns,$=new P.Matrix(T,O),Z=0;Z<T;Z++)for(var W=0;W<O;W++)$[Z][W]=Z>W?F[Z][W]:Z===W?1:0;return $},get upperTriangularMatrix(){for(var F=this.LU,T=F.rows,O=F.columns,$=new P.Matrix(T,O),Z=0;Z<T;Z++)for(var W=0;W<O;W++)$[Z][W]=Z<=W?F[Z][W]:0;return $},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(F){F=P.Matrix.checkMatrix(F);var T=this.LU,O=T.rows;if(O!==F.rows)throw new Error('Invalid matrix dimensions');if(this.isSingular())throw new Error('LU matrix is singular');var $=F.columns,Z=F.subMatrixRow(this.pivotVector,0,$-1),W=T.columns,K,Q,G;for(G=0;G<W;G++)for(K=G+1;K<W;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*T[K][G];for(G=W-1;0<=G;G--){for(Q=0;Q<$;Q++)Z[G][Q]/=T[G][G];for(K=0;K<G;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*T[K][G]}return Z}},D.exports=R},function(D,E,I){'use strict';function R($,Z){if(!(this instanceof R))return new R($,Z);$=P.Matrix.checkMatrix($),Z=Z||{};var W=$.rows,K=$.columns,Q=_Mathmin(W,K),G=!0,ee=!0;!1===Z.computeLeftSingularVectors&&(G=!1),!1===Z.computeRightSingularVectors&&(ee=!1);var te=!0===Z.autoTranspose,ne=!1,ae;if(!(W<K))ae=$.clone();else if(!te)ae=$.clone(),console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');else{ae=$.transpose(),W=ae.rows,K=ae.columns,ne=!0;var se=G;G=ee,ee=se}var oe=Array(_Mathmin(W+1,K)),le=O(W,Q,0),de=O(K,K,0),ue=Array(K),ce=Array(W),he=_Mathmin(W-1,K),ge=_Mathmax(0,_Mathmin(K-2,W)),pe,me,fe,xe,be,ye,ke,_e,we,je,ve,Se,De,Ce,Ee,Ie,Ae,Re,Pe,Fe,Te;for(fe=0,je=_Mathmax(he,ge);fe<je;fe++){if(fe<he){for(oe[fe]=0,pe=fe;pe<W;pe++)oe[fe]=T(oe[fe],ae[pe][fe]);if(0!==oe[fe]){for(0>ae[fe][fe]&&(oe[fe]=-oe[fe]),pe=fe;pe<W;pe++)ae[pe][fe]/=oe[fe];ae[fe][fe]+=1}oe[fe]=-oe[fe]}for(me=fe+1;me<K;me++){if(fe<he&&0!==oe[fe]){for(be=0,pe=fe;pe<W;pe++)be+=ae[pe][fe]*ae[pe][me];for(be=-be/ae[fe][fe],pe=fe;pe<W;pe++)ae[pe][me]+=be*ae[pe][fe]}ue[me]=ae[fe][me]}if(G&&fe<he)for(pe=fe;pe<W;pe++)le[pe][fe]=ae[pe][fe];if(fe<ge){for(ue[fe]=0,pe=fe+1;pe<K;pe++)ue[fe]=T(ue[fe],ue[pe]);if(0!==ue[fe]){for(0>ue[fe+1]&&(ue[fe]=0-ue[fe]),pe=fe+1;pe<K;pe++)ue[pe]/=ue[fe];ue[fe+1]+=1}if(ue[fe]=-ue[fe],fe+1<W&&0!==ue[fe]){for(pe=fe+1;pe<W;pe++)ce[pe]=0;for(me=fe+1;me<K;me++)for(pe=fe+1;pe<W;pe++)ce[pe]+=ue[me]*ae[pe][me];for(me=fe+1;me<K;me++)for(be=-ue[me]/ue[fe+1],pe=fe+1;pe<W;pe++)ae[pe][me]+=be*ce[pe]}if(ee)for(pe=fe+1;pe<K;pe++)de[pe][fe]=ue[pe]}}if(xe=_Mathmin(K,W+1),he<K&&(oe[he]=ae[he][he]),W<xe&&(oe[xe-1]=0),ge+1<xe&&(ue[ge]=ae[ge][xe-1]),ue[xe-1]=0,G){for(me=he;me<Q;me++){for(pe=0;pe<W;pe++)le[pe][me]=0;le[me][me]=1}for(fe=he-1;0<=fe;fe--)if(0!==oe[fe]){for(me=fe+1;me<Q;me++){for(be=0,pe=fe;pe<W;pe++)be+=le[pe][fe]*le[pe][me];for(be=-be/le[fe][fe],pe=fe;pe<W;pe++)le[pe][me]+=be*le[pe][fe]}for(pe=fe;pe<W;pe++)le[pe][fe]=-le[pe][fe];for(le[fe][fe]=1+le[fe][fe],pe=0;pe<fe-1;pe++)le[pe][fe]=0}else{for(pe=0;pe<W;pe++)le[pe][fe]=0;le[fe][fe]=1}}if(ee)for(fe=K-1;0<=fe;fe--){if(fe<ge&&0!==ue[fe])for(me=fe+1;me<K;me++){for(be=0,pe=fe+1;pe<K;pe++)be+=de[pe][fe]*de[pe][me];for(be=-be/de[fe+1][fe],pe=fe+1;pe<K;pe++)de[pe][me]+=be*de[pe][fe]}for(pe=0;pe<K;pe++)de[pe][fe]=0;de[fe][fe]=1}for(var ze=xe-1,Me=0,Xe=2.220446049250313e-16;0<xe;){for(fe=xe-2;-1<=fe&&-1!==fe;fe--)if(_Mathabs(ue[fe])<=Xe*(_Mathabs(oe[fe])+_Mathabs(oe[fe+1]))){ue[fe]=0;break}if(fe===xe-2)ve=4;else{for(ye=xe-1;ye>=fe&&ye!==fe;ye--)if(be=(ye===xe?0:_Mathabs(ue[ye]))+(ye===fe+1?0:_Mathabs(ue[ye-1])),_Mathabs(oe[ye])<=Xe*be){oe[ye]=0;break}ye===fe?ve=3:ye===xe-1?ve=1:(ve=2,fe=ye)}switch(fe++,ve){case 1:{for(ke=ue[xe-2],ue[xe-2]=0,me=xe-2;me>=fe;me--)if(be=T(oe[me],ke),_e=oe[me]/be,we=ke/be,oe[me]=be,me!==fe&&(ke=-we*ue[me-1],ue[me-1]=_e*ue[me-1]),ee)for(pe=0;pe<K;pe++)be=_e*de[pe][me]+we*de[pe][xe-1],de[pe][xe-1]=-we*de[pe][me]+_e*de[pe][xe-1],de[pe][me]=be;break}case 2:{for(ke=ue[fe-1],ue[fe-1]=0,me=fe;me<xe;me++)if(be=T(oe[me],ke),_e=oe[me]/be,we=ke/be,oe[me]=be,ke=-we*ue[me],ue[me]=_e*ue[me],G)for(pe=0;pe<W;pe++)be=_e*le[pe][me]+we*le[pe][fe-1],le[pe][fe-1]=-we*le[pe][me]+_e*le[pe][fe-1],le[pe][me]=be;break}case 3:{for(Se=_Mathmax(_Mathmax(_Mathmax(_Mathmax(_Mathabs(oe[xe-1]),_Mathabs(oe[xe-2])),_Mathabs(ue[xe-2])),_Mathabs(oe[fe])),_Mathabs(ue[fe])),De=oe[xe-1]/Se,Ce=oe[xe-2]/Se,Ee=ue[xe-2]/Se,Ie=oe[fe]/Se,Ae=ue[fe]/Se,Re=((Ce+De)*(Ce-De)+Ee*Ee)/2,Pe=De*Ee*(De*Ee),Fe=0,(0!==Re||0!==Pe)&&(Fe=_Mathsqrt(Re*Re+Pe),0>Re&&(Fe=-Fe),Fe=Pe/(Re+Fe)),ke=(Ie+De)*(Ie-De)+Fe,Te=Ie*Ae,me=fe;me<xe-1;me++){if(be=T(ke,Te),_e=ke/be,we=Te/be,me!==fe&&(ue[me-1]=be),ke=_e*oe[me]+we*ue[me],ue[me]=_e*ue[me]-we*oe[me],Te=we*oe[me+1],oe[me+1]=_e*oe[me+1],ee)for(pe=0;pe<K;pe++)be=_e*de[pe][me]+we*de[pe][me+1],de[pe][me+1]=-we*de[pe][me]+_e*de[pe][me+1],de[pe][me]=be;if(be=T(ke,Te),_e=ke/be,we=Te/be,oe[me]=be,ke=_e*ue[me]+we*oe[me+1],oe[me+1]=-we*ue[me]+_e*oe[me+1],Te=we*ue[me+1],ue[me+1]=_e*ue[me+1],G&&me<W-1)for(pe=0;pe<W;pe++)be=_e*le[pe][me]+we*le[pe][me+1],le[pe][me+1]=-we*le[pe][me]+_e*le[pe][me+1],le[pe][me]=be}ue[xe-2]=ke,++Me;break}case 4:{if(0>=oe[fe]&&(oe[fe]=0>oe[fe]?-oe[fe]:0,ee))for(pe=0;pe<=ze;pe++)de[pe][fe]=-de[pe][fe];for(;fe<ze&&!(oe[fe]>=oe[fe+1]);){if(be=oe[fe],oe[fe]=oe[fe+1],oe[fe+1]=be,ee&&fe<K-1)for(pe=0;pe<K;pe++)be=de[pe][fe+1],de[pe][fe+1]=de[pe][fe],de[pe][fe]=be;if(G&&fe<W-1)for(pe=0;pe<W;pe++)be=le[pe][fe+1],le[pe][fe+1]=le[pe][fe],le[pe][fe]=be;fe++}Me=0,xe--;break}}}if(ne){var Ye=de;de=le,le=Ye}this.m=W,this.n=K,this.s=oe,this.U=le,this.V=de}var P=I(1),F=I(15),T=F.hypotenuse,O=F.getFilled2DArray;R.prototype={get condition(){return this.s[0]/this.s[_Mathmin(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var Z=_Mathmax(this.m,this.n)*this.s[0]*2.220446049250313e-16,W=0,K=this.s,Q=0,G=K.length;Q<G;Q++)K[Q]>Z&&W++;return W},get diagonal(){return this.s},get threshold(){return 2.220446049250313e-16/2*_Mathmax(this.m,this.n)*this.s[0]},get leftSingularVectors(){return P.Matrix.isMatrix(this.U)||(this.U=new P.Matrix(this.U)),this.U},get rightSingularVectors(){return P.Matrix.isMatrix(this.V)||(this.V=new P.Matrix(this.V)),this.V},get diagonalMatrix(){return P.Matrix.diag(this.s)},solve:function($){var W=this.threshold,K=this.s.length,Q=P.Matrix.zeros(K,K),G;for(G=0;G<K;G++)Q[G][G]=_Mathabs(this.s[G])<=W?0:1/this.s[G];var ee=this.U,te=this.rightSingularVectors,ne=te.mmul(Q),ae=te.rows,se=ee.length,oe=P.Matrix.zeros(ae,se),le,de,ue;for(G=0;G<ae;G++)for(le=0;le<se;le++){for(ue=0,de=0;de<K;de++)ue+=ne[G][de]*ee[le][de];oe[G][le]=ue}return oe.mmul($)},solveForDiagonal:function($){return this.solve(P.Matrix.diag($))},inverse:function(){var $=this.V,Z=this.threshold,W=$.length,K=$[0].length,Q=new P.Matrix(W,this.s.length),G,ee;for(G=0;G<W;G++)for(ee=0;ee<K;ee++)Q[G][ee]=_Mathabs(this.s[ee])>Z?$[G][ee]/this.s[ee]:0;var te=this.U,ne=te.length,ae=te[0].length,se=new P.Matrix(W,ne),oe,le;for(G=0;G<W;G++)for(ee=0;ee<ne;ee++){for(le=0,oe=0;oe<ae;oe++)le+=Q[G][oe]*te[ee][oe];se[G][ee]=le}return se}},D.exports=R},function(D,E,I){'use strict';var ce=I(8);D.exports={transpose:function(he){if('number'==typeof he)return he;var ge=he.clone();return ge.transpose()},add:function(he,ge){if('number'==typeof he&&'number'==typeof ge)return he+ge;if('number'==typeof he)return this.add(ge,he);var pe=he.clone();return pe.add(ge)},subtract:function(he,ge){if('number'==typeof he&&'number'==typeof ge)return he-ge;if('number'==typeof he)return this.subtract(ge,he);var pe=he.clone();return pe.sub(ge)},multiply:function(he,ge){if('number'==typeof he&&'number'==typeof ge)return he*ge;if('number'==typeof he)return this.multiply(ge,he);var pe=he.clone();return'number'==typeof ge?pe.mul(ge):pe=pe.mmul(ge),1==pe.rows&&1==pe.columns?pe[0][0]:pe},dotMultiply:function(he,ge){var pe=he.clone();return pe.mul(ge)},dotDivide:function(he,ge){var pe=he.clone();return pe.div(ge)},diag:function(he){var ge=null,pe=he.rows,me=he.columns,fe,xe;if('undefined'==typeof me&&'object'==typeof he)if(he[0]&&he[0].length)for(pe=he.length,me=he[0].length,xe=_Mathmin(pe,me),ge=ce.zeros(me,me),fe=0;fe<me;fe++)ge[fe][fe]=he[fe][fe];else for(me=he.length,ge=ce.zeros(me,me),fe=0;fe<me;fe++)ge[fe][fe]=he[fe];if(1==pe)for(ge=ce.zeros(me,me),fe=0;fe<me;fe++)ge[fe][fe]=he[0][fe];else if(0<pe&&0<me)for(xe=_Mathmin(pe,me),ge=Array(xe),fe=0;fe<xe;fe++)ge[fe]=he[fe][fe];return ge},min:function(he,ge){if('number'==typeof he&&'number'==typeof ge)return _Mathmin(he,ge);for(var pe=he.rows,me=he.columns,fe=new ce(pe,me),xe=0;xe<pe;xe++)for(var be=0;be<me;be++)fe[xe][be]=he[xe][be]<ge[xe][be]?he[xe][be]:ge[xe][be];return fe},max:function(he,ge){if('number'==typeof he&&'number'==typeof ge)return _Mathmax(he,ge);for(var pe=he.rows,me=he.columns,fe=new ce(pe,me),xe=0;xe<pe;xe++)for(var be=0;be<me;be++)fe[xe][be]=he[xe][be]>ge[xe][be]?he[xe][be]:ge[xe][be];return fe},solve:function(he,ge){return he.solve(ge)},inv:function(he){return'number'==typeof he?1/he:he.inverse()},sqrt:function(he){if('number'==typeof he)return _Mathsqrt(he);for(var ge=he.rows,pe=he.columns,me=new ce(ge,pe),fe=0;fe<ge;fe++)for(var xe=0;xe<pe;xe++)me[fe][xe]=_Mathsqrt(he[fe][xe]);return me},exp:function(he){if('number'==typeof he)return _Mathsqrt(he);for(var ge=he.rows,pe=he.columns,me=new ce(ge,pe),fe=0;fe<ge;fe++)for(var xe=0;xe<pe;xe++)me[fe][xe]=_Mathexp(he[fe][xe]);return me},dotPow:function(he,ge){if('number'==typeof he)return _Mathpow(he,ge);for(var pe=he.rows,me=he.columns,fe=new ce(pe,me),xe=0;xe<pe;xe++)for(var be=0;be<me;be++)fe[xe][be]=_Mathpow(he[xe][be],ge);return fe},abs:function(he){if('number'==typeof he)return _Mathabs(he);for(var ge=he.rows,pe=he.columns,me=new ce(ge,pe),fe=0;fe<ge;fe++)for(var xe=0;xe<pe;xe++)me[fe][xe]=_Mathabs(he[fe][xe]);return me},matrix:function(he,ge){return new ce(he,ge)},ones:function(he,ge){return ce.ones(he,ge)},zeros:function(he,ge){return ce.zeros(he,ge)},random:function(he,ge){return ce.rand(he,ge)},eye:function(he,ge){return ce.eye(he,ge)}}},function(D,E){'use strict';function R(P,F){return P-F}E.sum=function(F){for(var P=0,T=0;T<F.length;T++)P+=F[T];return P},E.max=function(F){for(var P=-Infinity,T=F.length,O=0;O<T;O++)F[O]>P&&(P=F[O]);return P},E.min=function(F){for(var P=Infinity,T=F.length,O=0;O<T;O++)F[O]<P&&(P=F[O]);return P},E.minMax=function(F){for(var T=Infinity,O=-Infinity,$=F.length,Z=0;Z<$;Z++)F[Z]<T&&(T=F[Z]),F[Z]>O&&(O=F[Z]);return{min:T,max:O}},E.arithmeticMean=function(F){for(var T=0,O=F.length,$=0;$<O;$++)T+=F[$];return T/O},E.mean=E.arithmeticMean,E.geometricMean=function(F){for(var T=1,O=F.length,$=0;$<O;$++)T*=F[$];return _Mathpow(T,1/O)},E.logMean=function(F){for(var T=0,O=F.length,$=0;$<O;$++)T+=_Mathlog(F[$]);return T/O},E.grandMean=function(F,T){for(var O=0,$=0,Z=F.length,W=0;W<Z;W++)O+=T[W]*F[W],$+=T[W];return O/$},E.truncatedMean=function(F,T,O){O===void 0&&(O=!1),O||(F=F.slice().sort(R));for(var $=F.length,Z=_Mathfloor($*T),W=0,K=Z;K<$-Z;K++)W+=F[K];return W/($-2*Z)},E.harmonicMean=function(F){for(var T=0,O=F.length,$=0;$<O;$++){if(0===F[$])throw new RangeError('value at index '+$+'is zero');T+=1/F[$]}return O/T},E.contraHarmonicMean=function(F){for(var T=0,O=0,$=F.length,Z=0;Z<$;Z++)T+=F[Z]*F[Z],O+=F[Z];if(0>O)throw new RangeError('sum of values is negative');return T/O},E.median=function(F,T){T===void 0&&(T=!1),T||(F=F.slice().sort(R));var O=F.length,$=_Mathfloor(O/2);return 0==O%2?0.5*(F[$-1]+F[$]):F[$]},E.variance=function(F,T){T===void 0&&(T=!0);for(var O=E.mean(F),$=0,Z=F.length,W=0,K;W<Z;W++)K=F[W]-O,$+=K*K;return T?$/(Z-1):$/Z},E.standardDeviation=function(F,T){return _Mathsqrt(E.variance(F,T))},E.standardError=function(F){return E.standardDeviation(F)/_Mathsqrt(F.length)},E.quartiles=function(F,T){'undefined'==typeof T&&(T=!1),T||(F=F.slice(),F.sort(R));var O=F.length/4,$=F[_Mathceil(O)-1],Z=E.median(F,!0),W=F[_Mathceil(3*O)-1];return{q1:$,q2:Z,q3:W}},E.pooledStandardDeviation=function(F,T){return _Mathsqrt(E.pooledVariance(F,T))},E.pooledVariance=function(F,T){'undefined'==typeof T&&(T=!0);for(var O=0,$=0,Z=F.length,W=0;W<Z;W++){var K=F[W],Q=E.variance(K);O+=(K.length-1)*Q,$+=T?K.length-1:K.length}return O/$},E.mode=function(F){var T=F.length,O=Array(T),$;for($=0;$<T;$++)O[$]=0;var Z=Array(T),W=0;for($=0;$<T;$++){var K=Z.indexOf(F[$]);0<=K?O[K]++:(Z[W]=F[$],O[W]=1,W++)}var Q=0,G=0;for($=0;$<W;$++)O[$]>Q&&(Q=O[$],G=$);return Z[G]},E.covariance=function(F,T,O){'undefined'==typeof O&&(O=!0);var $=E.mean(F),Z=E.mean(T);if(F.length!==T.length)throw'Vectors do not have the same dimensions';for(var W=0,K=F.length,Q=0;Q<K;Q++){var G=F[Q]-$,ee=T[Q]-Z;W+=G*ee}return O?W/(K-1):W/K},E.skewness=function(F,T){'undefined'==typeof T&&(T=!0);for(var O=E.mean(F),$=0,Z=0,W=F.length,K=0,Q;K<W;K++)Q=F[K]-O,$+=Q*Q,Z+=Q*Q*Q;var G=$/W,ee=Z/W,te=ee/_Mathpow(G,3/2);if(T){var ne=_Mathsqrt(W*(W-1));return ne/(W-2)*te}return te},E.kurtosis=function(F,T){'undefined'==typeof T&&(T=!0);for(var O=E.mean(F),$=F.length,Z=0,W=0,K=0,Q;K<$;K++)Q=F[K]-O,Z+=Q*Q,W+=Q*Q*Q*Q;var G=Z/$,ee=W/$;if(T){var te=Z/($-1),ae=W/(te*te);return $*($+1)/(($-1)*($-2)*($-3))*ae-3*(($-1)*($-1)/(($-2)*($-3)))}return ee/(G*G)-3},E.entropy=function(F,T){'undefined'==typeof T&&(T=0);for(var O=0,$=F.length,Z=0;Z<$;Z++)O+=F[Z]*_Mathlog(F[Z]+T);return-O},E.weightedMean=function(F,T){for(var O=0,$=F.length,Z=0;Z<$;Z++)O+=F[Z]*T[Z];return O},E.weightedStandardDeviation=function(F,T){return _Mathsqrt(E.weightedVariance(F,T))},E.weightedVariance=function(F,T){for(var O=E.weightedMean(F,T),$=0,Z=F.length,W=0,K=0,Q=0;Q<Z;Q++){var G=F[Q]-O,ee=T[Q];$+=ee*(G*G),K+=ee,W+=ee*ee}return $*(K/(K*K-W))},E.center=function(F,T){'undefined'==typeof T&&(T=!1);var O=F;T||(O=F.slice());for(var $=E.mean(O),Z=O.length,W=0;W<Z;W++)O[W]-=$},E.standardize=function(F,T,O){'undefined'==typeof T&&(T=E.standardDeviation(F)),'undefined'==typeof O&&(O=!1);for(var $=F.length,Z=O?F:Array($),W=0;W<$;W++)Z[W]=F[W]/T;return Z},E.cumulativeSum=function(F){var T=F.length,O=Array(T);O[0]=F[0];for(var $=1;$<T;$++)O[$]=O[$-1]+F[$];return O}},function(D){'use strict';function R(F){var T=_Mathsqrt(2*F.length+0.25)-0.5,O=[],$=Array(T),Z=T,W=0,K=[];for(W=T-1;0<=W;W--)$[W]=1;for(var Q=-1,G=[];0<Z;){if(0===G.length){for(K=Array(T),W=0;W<T;W++)K[W]=0;for(O.push(K),Q=0;0==$[Q];Q++);}else Q=G.splice(0,1);K[Q]=1,$[Q]=0,Z--;var ee=Array(T);for(W=0;W<T;W++){var te=_Mathmax(Q,W),ne=_Mathmin(Q,W);ee[W]=F[ne*(2*T-ne-1)/2+te],1==ee[W]&&1==$[W]&&0==K[W]&&(G.push(W),K[W]=1)}}return O}const P={threshold:0,out:'assignment'};D.exports=function(T,O){const $=Object.assign({},P,O);var Z,W,K,Q;if('number'==typeof T[0])Z=R(T);else if('object'==typeof T[0]){for(var G=T.length,ee=Array(G*(G+1)/2),te=0,W=0;W<G;W++)for(var K=W;K<G;K++)ee[te++]=T[W][K]>$.threshold?1:0;Z=R(ee)}if('indexes'===$.out||'values'===$.out){var ne=Array(Z.length);for(W=0;W<Z.length;W++)for(ne[W]=[],K=0;K<Z[W].length;K++)0!=Z[W][K]&&ne[W].push(K);if('values'===$.out){var ae=Array(ne.length);for(W=0;W<ne.length;W++)for(ae[W]=Array(ne[W].length),K=0;K<ne[W].length;K++)for(ae[W][K]=Array(ne[W].length),Q=0;Q<ne[W].length;Q++)ae[W][K][Q]=T[ne[W][K]][ne[W][Q]];return ae}return ne}return Z}},function(module,exports,__webpack_require__){function fillTemplateFunction(D,E){for(var I in E)D=D.replace(new RegExp('%'+I+'%','g'),E[I]);return D}const HashTable=__webpack_require__(103);class SparseMatrix{constructor(D,E,I={}){if(D instanceof SparseMatrix){const T=D;return void this._init(T.rows,T.columns,T.elements.clone(),T.threshold)}if(Array.isArray(D)){const T=D;D=T.length,I=E||{},E=T[0].length,this._init(D,E,new HashTable(I),I.threshold);for(var R=0;R<D;R++)for(var P=0,F;P<E;P++)F=T[R][P],this.threshold&&_Mathabs(F)<this.threshold&&(F=0),0!==F&&this.elements.set(R*E+P,T[R][P])}else this._init(D,E,new HashTable(I),I.threshold)}_init(D,E,I,R){this.rows=D,this.columns=E,this.elements=I,this.threshold=R||0}static eye(D=1,E=D){const I=_Mathmin(D,E),R=new SparseMatrix(D,E,{initialCapacity:I});for(var P=0;P<I;P++)R.set(P,P,1);return R}clone(){return new SparseMatrix(this)}to2DArray(){const D=Array(this.rows);for(var E=0;E<this.rows;E++){D[E]=Array(this.columns);for(var I=0;I<this.columns;I++)D[E][I]=this.get(E,I)}return D}isSquare(){return this.rows===this.columns}isSymmetric(){if(!this.isSquare())return!1;var D=!0;return this.forEachNonZero((E,I,R)=>{return this.get(I,E)===R?R:(D=!1,!1)}),D}get cardinality(){return this.elements.size}get size(){return this.rows*this.columns}get(D,E){return this.elements.get(D*this.columns+E)}set(D,E,I){return this.threshold&&_Mathabs(I)<this.threshold&&(I=0),0===I?this.elements.remove(D*this.columns+E):this.elements.set(D*this.columns+E,I),this}mmul(D){this.columns!==D.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');const E=this.rows,I=D.columns,R=new SparseMatrix(E,I);return this.forEachNonZero((P,F,T)=>{return D.forEachNonZero((O,$,Z)=>{return F===O&&R.set(P,$,R.get(P,$)+T*Z),Z}),T}),R}kroneckerProduct(D){const E=this.rows,I=this.columns,R=D.rows,P=D.columns,F=new SparseMatrix(E*R,I*P,{initialCapacity:this.cardinality*D.cardinality});return this.forEachNonZero((T,O,$)=>{return D.forEachNonZero((Z,W,K)=>{return F.set(R*T+Z,P*O+W,$*K),K}),$}),F}forEachNonZero(D){return this.elements.forEachPair((E,I)=>{const R=0|E/this.columns,P=E%this.columns;let F=D(R,P,I);return!1!==F&&(this.threshold&&_Mathabs(F)<this.threshold&&(F=0),F!==I&&(0===F?this.elements.remove(E,!0):this.elements.set(E,F)),!0)}),this.elements.maybeShrinkCapacity(),this}getNonZeros(){const D=this.cardinality,E=Array(D),I=Array(D),R=Array(D);var P=0;return this.forEachNonZero((F,T,O)=>{return E[P]=F,I[P]=T,R[P]=O,P++,O}),{rows:E,columns:I,values:R}}setThreshold(D){return 0!==D&&D!==this.threshold&&(this.threshold=D,this.forEachNonZero((E,I,R)=>R)),this}}SparseMatrix.prototype.klass='Matrix',SparseMatrix.identity=SparseMatrix.eye,SparseMatrix.prototype.tensorProduct=SparseMatrix.prototype.kroneckerProduct,module.exports=SparseMatrix;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    this.forEachNonZero((i, j, v) => v %op% value);
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix.forEachNonZero((i, j, v) => {
        this.set(i, j, this.get(i, j) %op% v);
        return v;
    });
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new SparseMatrix(matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    this.forEachNonZero((i, j, v) => %method%(v));
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new SparseMatrix(matrix);
    return newMatrix.%name%();
})
`,operators=[['+','add'],['-','sub','subtract'],['*','mul','multiply'],['/','div','divide'],['%','mod','modulus'],['&','and'],['|','or'],['^','xor'],['<<','leftShift'],['>>','signPropagatingRightShift'],['>>>','rightShift','zeroFillRightShift']];for(var operator of operators)for(var i=1;i<operator.length;i++)SparseMatrix.prototype[operator[i]]=eval(fillTemplateFunction(inplaceOperator,{name:operator[i],op:operator[0]})),SparseMatrix.prototype[operator[i]+'S']=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[i]+'S',op:operator[0]})),SparseMatrix.prototype[operator[i]+'M']=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[i]+'M',op:operator[0]})),SparseMatrix[operator[i]]=eval(fillTemplateFunction(staticOperator,{name:operator[i]}));var methods=[['~','not']];['abs','acos','acosh','asin','asinh','atan','atanh','cbrt','ceil','clz32','cos','cosh','exp','expm1','floor','fround','log','log1p','log10','log2','round','sign','sin','sinh','sqrt','tan','tanh','trunc'].forEach(function(D){methods.push(['Math.'+D,D])});for(var method of methods)for(var i=1;i<method.length;i++)SparseMatrix.prototype[method[i]]=eval(fillTemplateFunction(inplaceMethod,{name:method[i],method:method[0]})),SparseMatrix[method[i]]=eval(fillTemplateFunction(staticMethod,{name:method[i]}))},function(D,E){'use strict';function R(P,F){return P-F}E.sum=function(F){for(var P=0,T=0;T<F.length;T++)P+=F[T];return P},E.max=function(F){for(var P=F[0],T=F.length,O=1;O<T;O++)F[O]>P&&(P=F[O]);return P},E.min=function(F){for(var P=F[0],T=F.length,O=1;O<T;O++)F[O]<P&&(P=F[O]);return P},E.minMax=function(F){for(var T=F[0],O=F[0],$=F.length,Z=1;Z<$;Z++)F[Z]<T&&(T=F[Z]),F[Z]>O&&(O=F[Z]);return{min:T,max:O}},E.arithmeticMean=function(F){for(var T=0,O=F.length,$=0;$<O;$++)T+=F[$];return T/O},E.mean=E.arithmeticMean,E.geometricMean=function(F){for(var T=1,O=F.length,$=0;$<O;$++)T*=F[$];return _Mathpow(T,1/O)},E.logMean=function(F){for(var T=0,O=F.length,$=0;$<O;$++)T+=_Mathlog(F[$]);return T/O},E.grandMean=function(F,T){for(var O=0,$=0,Z=F.length,W=0;W<Z;W++)O+=T[W]*F[W],$+=T[W];return O/$},E.truncatedMean=function(F,T,O){O===void 0&&(O=!1),O||(F=[].concat(F).sort(R));for(var $=F.length,Z=_Mathfloor($*T),W=0,K=Z;K<$-Z;K++)W+=F[K];return W/($-2*Z)},E.harmonicMean=function(F){for(var T=0,O=F.length,$=0;$<O;$++){if(0===F[$])throw new RangeError('value at index '+$+'is zero');T+=1/F[$]}return O/T},E.contraHarmonicMean=function(F){for(var T=0,O=0,$=F.length,Z=0;Z<$;Z++)T+=F[Z]*F[Z],O+=F[Z];if(0>O)throw new RangeError('sum of values is negative');return T/O},E.median=function(F,T){T===void 0&&(T=!1),T||(F=[].concat(F).sort(R));var O=F.length,$=_Mathfloor(O/2);return 0==O%2?0.5*(F[$-1]+F[$]):F[$]},E.variance=function(F,T){T===void 0&&(T=!0);for(var O=E.mean(F),$=0,Z=F.length,W=0,K;W<Z;W++)K=F[W]-O,$+=K*K;return T?$/(Z-1):$/Z},E.standardDeviation=function(F,T){return _Mathsqrt(E.variance(F,T))},E.standardError=function(F){return E.standardDeviation(F)/_Mathsqrt(F.length)},E.robustMeanAndStdev=function(F){var T=0,O=0,$=F.length,Z=0;for(Z=0;Z<$;Z++)T+=F[Z];T/=$;var W=Array($);for(Z=0;Z<$;Z++)W[Z]=_Mathabs(F[Z]-T);return W.sort(R),O=1==$%2?W[($-1)/2]/0.6745:0.5*(W[$/2]+W[$/2-1])/0.6745,{mean:T,stdev:O}},E.quartiles=function(F,T){'undefined'==typeof T&&(T=!1),T||(F=[].concat(F).sort(R));var O=F.length/4,$=F[_Mathceil(O)-1],Z=E.median(F,!0),W=F[_Mathceil(3*O)-1];return{q1:$,q2:Z,q3:W}},E.pooledStandardDeviation=function(F,T){return _Mathsqrt(E.pooledVariance(F,T))},E.pooledVariance=function(F,T){'undefined'==typeof T&&(T=!0);for(var O=0,$=0,Z=F.length,W=0;W<Z;W++){var K=F[W],Q=E.variance(K);O+=(K.length-1)*Q,$+=T?K.length-1:K.length}return O/$},E.mode=function(F){var T=F.length,O=Array(T),$;for($=0;$<T;$++)O[$]=0;var Z=Array(T),W=0;for($=0;$<T;$++){var K=Z.indexOf(F[$]);0<=K?O[K]++:(Z[W]=F[$],O[W]=1,W++)}var Q=0,G=0;for($=0;$<W;$++)O[$]>Q&&(Q=O[$],G=$);return Z[G]},E.covariance=function(F,T,O){'undefined'==typeof O&&(O=!0);var $=E.mean(F),Z=E.mean(T);if(F.length!==T.length)throw'Vectors do not have the same dimensions';for(var W=0,K=F.length,Q=0;Q<K;Q++){var G=F[Q]-$,ee=T[Q]-Z;W+=G*ee}return O?W/(K-1):W/K},E.skewness=function(F,T){'undefined'==typeof T&&(T=!0);for(var O=E.mean(F),$=0,Z=0,W=F.length,K=0,Q;K<W;K++)Q=F[K]-O,$+=Q*Q,Z+=Q*Q*Q;var G=$/W,ee=Z/W,te=ee/_Mathpow(G,3/2);if(T){var ne=_Mathsqrt(W*(W-1));return ne/(W-2)*te}return te},E.kurtosis=function(F,T){'undefined'==typeof T&&(T=!0);for(var O=E.mean(F),$=F.length,Z=0,W=0,K=0,Q;K<$;K++)Q=F[K]-O,Z+=Q*Q,W+=Q*Q*Q*Q;var G=Z/$,ee=W/$;if(T){var te=Z/($-1),ae=W/(te*te);return $*($+1)/(($-1)*($-2)*($-3))*ae-3*(($-1)*($-1)/(($-2)*($-3)))}return ee/(G*G)-3},E.entropy=function(F,T){'undefined'==typeof T&&(T=0);for(var O=0,$=F.length,Z=0;Z<$;Z++)O+=F[Z]*_Mathlog(F[Z]+T);return-O},E.weightedMean=function(F,T){for(var O=0,$=F.length,Z=0;Z<$;Z++)O+=F[Z]*T[Z];return O},E.weightedStandardDeviation=function(F,T){return _Mathsqrt(E.weightedVariance(F,T))},E.weightedVariance=function(F,T){for(var O=E.weightedMean(F,T),$=0,Z=F.length,W=0,K=0,Q=0;Q<Z;Q++){var G=F[Q]-O,ee=T[Q];$+=ee*(G*G),K+=ee,W+=ee*ee}return $*(K/(K*K-W))},E.center=function(F,T){'undefined'==typeof T&&(T=!1);var O=F;T||(O=[].concat(F));for(var $=E.mean(O),Z=O.length,W=0;W<Z;W++)O[W]-=$},E.standardize=function(F,T,O){'undefined'==typeof T&&(T=E.standardDeviation(F)),'undefined'==typeof O&&(O=!1);for(var $=F.length,Z=O?F:Array($),W=0;W<$;W++)Z[W]=F[W]/T;return Z},E.cumulativeSum=function(F){var T=F.length,O=Array(T);O[0]=F[0];for(var $=1;$<T;$++)O[$]=O[$-1]+F[$];return O}},function(D,E,I){'use strict';E.SpinSystem=I(138),E.simulate1D=I(140),E.simulate2D=I(141)},function(D,E,I){'use strict';function R(F){if('number'!=typeof F||P(F))throw new TypeError('Expected a number')}var P=I(142);E.asc=function(F,T){return R(F),R(T),F-T},E.desc=function(F,T){return R(F),R(T),T-F}},function(D,E,I){'use strict';function R(Z,W){if(65537>W&&(Z.subarray&&T||!Z.subarray&&F))return _StringfromCharCode.apply(null,P.shrinkBuf(Z,W));for(var K='',Q=0;Q<W;Q++)K+=_StringfromCharCode(Z[Q]);return K}var P=I(2),F=!0,T=!0;try{_StringfromCharCode.apply(null,[0])}catch(Z){F=!1}try{_StringfromCharCode.apply(null,new Uint8Array(1))}catch(Z){T=!1}for(var O=new P.Buf8(256),$=0;256>$;$++)O[$]=252<=$?6:248<=$?5:240<=$?4:224<=$?3:192<=$?2:1;O[254]=O[254]=1,E.string2buf=function(Z){var te=Z.length,ne=0,W,K,Q,G,ee;for(G=0;G<te;G++)K=Z.charCodeAt(G),55296==(64512&K)&&G+1<te&&(Q=Z.charCodeAt(G+1),56320==(64512&Q)&&(K=65536+(K-55296<<10)+(Q-56320),G++)),ne+=128>K?1:2048>K?2:65536>K?3:4;for(W=new P.Buf8(ne),ee=0,G=0;ee<ne;G++)K=Z.charCodeAt(G),55296==(64512&K)&&G+1<te&&(Q=Z.charCodeAt(G+1),56320==(64512&Q)&&(K=65536+(K-55296<<10)+(Q-56320),G++)),128>K?W[ee++]=K:2048>K?(W[ee++]=192|K>>>6,W[ee++]=128|63&K):65536>K?(W[ee++]=224|K>>>12,W[ee++]=128|63&K>>>6,W[ee++]=128|63&K):(W[ee++]=240|K>>>18,W[ee++]=128|63&K>>>12,W[ee++]=128|63&K>>>6,W[ee++]=128|63&K);return W},E.buf2binstring=function(Z){return R(Z,Z.length)},E.binstring2buf=function(Z){for(var W=new P.Buf8(Z.length),K=0,Q=W.length;K<Q;K++)W[K]=Z.charCodeAt(K);return W},E.buf2string=function(Z,W){var K,Q,G,ee,te=W||Z.length,ne=Array(2*te);for(Q=0,K=0;K<te;){if(G=Z[K++],128>G){ne[Q++]=G;continue}if(ee=O[G],4<ee){ne[Q++]=65533,K+=ee-1;continue}for(G&=2===ee?31:3===ee?15:7;1<ee&&K<te;)G=G<<6|63&Z[K++],ee--;if(1<ee){ne[Q++]=65533;continue}65536>G?ne[Q++]=G:(G-=65536,ne[Q++]=55296|1023&G>>10,ne[Q++]=56320|1023&G)}return R(ne,Q)},E.utf8border=function(Z,W){var K;for(W=W||Z.length,W>Z.length&&(W=Z.length),K=W-1;0<=K&&128==(192&Z[K]);)K--;return 0>K?W:0===K?W:K+O[Z[K]]>W?K:W}},function(D){'use strict';D.exports=function(P,F,T,O){for(var $=0|65535&P,Z=0|65535&P>>>16,W=0;0!==T;){W=2e3<T?2e3:T,T-=W;do $=0|$+F[O++],Z=0|Z+$;while(--W);$%=65521,Z%=65521}return 0|($|Z<<16)}},function(D){'use strict';D.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(D){'use strict';var F=function(){for(var O=[],$=0,T;256>$;$++){T=$;for(var Z=0;8>Z;Z++)T=1&T?3988292384^T>>>1:T>>>1;O[$]=T}return O}();D.exports=function(T,O,$,Z){T^=-1;for(var Q=Z;Q<Z+$;Q++)T=T>>>8^F[255&(T^O[Q])];return-1^T}},function(D){'use strict';D.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg='',this.state=null,this.data_type=2,this.adler=0}},function(D){var I=function(){return this}();try{I=I||Function('return this')()||(1,eval)('this')}catch(R){'object'==typeof window&&(I=window)}D.exports=I},function(D,E,I){'use strict';const R=I(9),P=I(21),F=I(25),T=I(73),O=I(51);class $ extends R{constructor(Z){super(Z)}static fromPrediction(Z,W){const K=O.SpinSystem.fromSignals(Z);let Q=Object.assign({},W,{nbPoints:16384,maxClusterSize:8,output:'xy'});K.ensureClusterSize(Q);var G=O.simulate1D(K,Q);return $.fromXY(G.x,G.y,W)}static fromXY(Z, W, K){var Q={profiling:[],logs:[]},G=[];Q.spectra=G,Q.info={};var ee={};return ee.isXYdata=!0,ee.nbPoints=Z.length,ee.firstX=Z[0],ee.firstY=W[0],ee.lastX=Z[ee.nbPoints-1],ee.lastY=W[ee.nbPoints-1],ee.xFactor=1,ee.yFactor=1,ee.xUnit=K.xUnit||'PPM',ee.yUnit=K.yUnit||'Intensity',ee.deltaX=(ee.lastX-ee.firstX)/(ee.nbPoints-1),ee.title=K.title||'spectra-data from xy',ee.dataType=K.dataType||'NMR',ee.observeFrequency=K.frequency||400,Q.info.observefrequency=ee.observeFrequency,Q.info['.SOLVENTNAME']=K.solvent||'none',Q.info.$SW_h=_Mathabs(ee.lastX-ee.firstX)*ee.observeFrequency,Q.info.$SW=_Mathabs(ee.lastX-ee.firstX),Q.info.$TD=ee.nbPoints,Q.xType=K.nucleus||'1H',ee.data=[{x:Z,y:W}],Q.twoD=!1,G.push(ee),new $(Q)}static fromBruker(Z,W){W=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},W);var K=null;return K=Array.isArray(Z)?F.converFolder(Z,W):F.convertZip(Z,W),K?K.map(function(Q){return new $(Q)}):null}getNucleus(Z){return Z&&0!==Z&&1!==Z?'':this.sd.xType}getSolventName(){return(this.sd.info['.SOLVENTNAME']||this.sd.info.$SOLVENT||'').replace('<','').replace('>','')}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}getNMRPeakThreshold(Z){return'1H'===Z?3:'13C'===Z?5:1}fourierTransform(){return P.fourierTransform(this)}postFourierTransform(Z){return P.phaseCorrection(0,Z)}zeroFilling(Z,W){return P.zeroFilling(this,Z,W)}brukerFilter(){return P.digitalFilter(this,{brukerFilter:!0})}digitalFilter(Z){return P.digitalFilter(this,Z)}apodization(Z,W){return P.apodization(this,{functionName:Z,lineBroadening:W})}echoAntiechoFilter(){return this}SNVFilter(){return this}powerFilter(Z){var W=this.getMinY();return 1>Z&&0>W&&this.YShift(-1*W),this}phaseCorrection(Z,W){return P.phaseCorrection(this,Z,W)}getRanges(Z){if(this.ranges)return this.ranges;var W=this.getPeaks(Z),K=Object.assign({},{nH:this.totalIntegral},Z);return T(this,W,K)}createRanges(Z){return this.ranges=null,this.peaks=null,this.ranges=this.getRanges(Z),this.ranges}}D.exports=$},function(D,E,I){'use strict';const R=I(9),P=I(72),F=I(22),T=I(25),O=I(21),$=I(6).array,Z=I(51).simulate2D;class W extends R{constructor(K){super(K)}static fromPrediction(K,Q){var G=Z(K,Q),ee=W.fromMatrix(G,Q),te=ee.toJcamp({type:'NTUPLES'});return W.fromJcamp(te)}static fromBruker(K,Q){Q=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},Q);var G=null;return G=Array.isArray(K)?T.converFolder(K,Q):T.convertZip(K,Q),G?G.map(function(ee){return new W(ee)}):null}static fromMatrix(K,Q){var G={profiling:[],logs:[]},ee=[];let te=K[0].length;G.spectra=ee,G.info={};let ne=Q.firstY||0,ae=Q.lastY||K.length-1,se=(ae-ne)/(K.length-1),oe=Q.firstX||0,le=Q.lastX||te-1,ue=Q.x;if(!ue){ue=Array(te);for(let pe=0;pe<te;pe++)ue[pe]=oe+(ae-ne)/(te-1)*pe}let ce=Q.frequencyX||400,he=_NumberMAX_SAFE_INTEGER,ge=_NumberMIN_SAFE_INTEGER;return K.forEach((pe,me)=>{var fe={};fe.isXYdata=!0,fe.nbPoints=te,fe.firstX=oe,fe.firstY=pe[0],fe.lastX=le,fe.lastY=pe[fe.nbPoints-1],fe.xFactor=1,fe.yFactor=1,fe.deltaX=(fe.lastX-fe.firstX)/(fe.nbPoints-1),fe.title=Q.title||'spectra-data from matrix',fe.dataType=Q.dataType||'nD NMR SPECTRUM',fe.observeFrequency=ce,fe.data=[{x:ue,y:pe}],fe.page=ne+me*se,G.xType=Q.xType||Q.nucleusX||'1H',ee.push(fe);let xe=$.minMax(pe);he=_Mathmin(he,xe.min),ge=_Mathmax(ge,xe.max)}),G.ntuples=[{units:Q.xUnit||'PPM'},{units:Q.yUnit||'PPM'},{units:Q.zUnit||'Intensity'}],G.info['2D_Y_FREQUENCY']=Q.frequencyY||400,G.info['2D_X_FREQUENCY']=Q.frequencyX||400,G.info.observefrequency=G.info['2D_X_FREQUENCY'],G.info.$BF1=G.info.observefrequency,G.info['.SOLVENTNAME']=Q.solvent||'none',G.info.$SW_h=_Mathabs(le-oe)*ce,G.info.$SW=_Mathabs(le-oe),G.info.$TD=te,G.info.firstY=ne,G.info.lastY=ae,G.minMax={minY:ne,maxY:ae,minX:oe,maxX:le,minZ:he,maxZ:ge},G.yType=Q.yType||Q.nucleusY||'1H',G.twoD=!0,new W(G)}isHomoNuclear(){return this.sd.xType===this.sd.yType}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}observeFrequencyY(){return this.sd.indirectFrequency}getSolventName(){return(this.sd.info['.SOLVENTNAME']||this.sd.info.$SOLVENT).replace('<','').replace('>','')}getXUnits(){return this.sd.ntuples[1].units}getYUnits(){return this.sd.ntuples[0].units}getZUnits(){return this.sd.ntuples[2].units}getLastY(){return this.sd.minMax.maxY}getFirstY(){return this.sd.minMax.minY}getDeltaY(){return(this.getLastY()-this.getFirstY())/(this.getNbSubSpectra()-1)}getMinZ(){return this.sd.minMax.minZ}getMaxZ(){return this.sd.minMax.maxZ}getZones(K){K=K||{},K.thresholdFactor||(K.thresholdFactor=1);var Q=_Mathround(255*Math.random());K.idPrefix&&(Q=K.idPrefix);for(var G=P(this,K.thresholdFactor),ee=0;ee<G.length;ee++)G[ee]._highlight=[Q+'_'+ee],G[ee].signalID=Q+'_'+ee;if(K.references&&F.alignDimensions(G,K.references),'new'===K.format){for(var te=Array(G.length),ne=G.length-1,ae;0<=ne;ne--)ae=G[ne],te[ne]={fromTo:ae.fromTo,integral:ae.intensity||1,remark:'',signal:[{peak:ae.peaks,delta:[ae.shiftX,ae.shiftY]}],_highlight:ae._highlight,signalID:ae.signalID};G=te}return this.zones=G,this.zones}getNMRPeakThreshold(K){return'1H'===K?3:'13C'===K?5:1}getNucleus(K){return 1===K?this.sd.xType:2===K?this.sd.yType:this.sd.xType}zeroFilling(K,Q){return O.zeroFilling(this,K,Q)}brukerFilter(){return O.digitalFilter(this,{brukerFilter:!0})}digitalFilter(K){return O.digitalFilter(this,K)}fourierTransform(){return O.fourierTransform(this)}postFourierTransform(K){return O.phaseCorrection(0,K)}}D.exports=W},function(D){'use strict';D.exports=function(P,F){let T=Object.assign({},F);return T?P:P}},function(D,E,I){'use strict';var P=I(65);D.exports=function(F,T){let O=F.activeElement;var $=0;T.nbPoints?$=T.nbPoints:T.brukerFilter&&($=0);var Z=F.getNbSubSpectra();if(0!==$)for(var W=0;W<Z;W++)F.setActiveElement(W),P(F.getYData(),$),T.rotateX&&(P(F.getXData(),$),F.setFirstX(F.getX(0)),F.setLastX(F.getX(F.getNbPoints()-1)));return F.setActiveElement(O),F}},function(D,E,I){'use strict';function P(T,O){var $=T.getParamDouble('$BF1',NaN),Z=T.getParamDouble('$SFO1',NaN),W=T.getParamDouble('$SW',NaN),K=1e6*((Z-$)/$),Q=0.5*W*Z/$;T.setDataType(O),T.setFirstX(K+Q),T.setLastX(K-Q),T.setXUnits('PPM');var G=T.getXData(),ee=K+Q;Q=-2*Q/(G.length-1);for(var te=0;te<G.length;te++)G[te]=ee,ee+=Q}const F=I(40);D.exports=function(T){var O=T.getNbPoints(),$=T.getNbSubSpectra()/2,Z='NMR SPECTRUM',W=F.FFT;1<$&&(Z='nD NMR SPECTRUM'),W.init(O);for(var K=T.getParamDouble('$FCOR',0),Q=0;Q<$;Q++){var G=T.getYData(2*Q),ee=T.getYData(2*Q+1);G[0]*=K,ee[0]*=K,W.fft(G,ee),G=G.concat(G.slice(0,(O+1)/2)),G.splice(0,(O+1)/2),ee=ee.concat(ee.slice(0,(O+1)/2)),ee.splice(0,(O+1)/2),T.setActiveElement(2*Q),P(T,Z),T.setActiveElement(2*Q+1),P(T,Z)}return T.is2D(),T.setActiveElement(0),T}},function(D){'use strict';D.exports=function(P,F,T){F=_NumberisFinite(F)?F:0,T=_NumberisFinite(T)?T:0;for(var O=P.getNbPoints(),$=P.getYData(0),Z=P.getYData(1),W=T/O,K=2*_Mathpow(_Mathsin(W/2),2),Q=_Mathsin(W),G=Math.cos(F),ee=_Mathsin(F),le=0,te,ne,ae,se,oe;le<O;le++)oe=O-le-1,oe=le,ae=$[oe]*G-Z[oe]*ee,se=$[oe]*ee+Z[oe]*G,$[oe]=ae,Z[oe]=se,te=G-(K*G+Q*ee),ne=ee-(K*ee-Q*G),G=te,ee=ne;return P.resetMinMax(),P.putParam('PHC0',F),P.putParam('PHC1',T),P}},function(D){'use strict';function P(F,T){return 0>F&&(F+=T),F>=T&&(F-=T),F}D.exports=function(F,T){var O=F.length;if(T%=O,_Mathabs(T)>O/2&&(T=0<T?T-O:T+O),0!==T)for(var $=0,Z=T,W=O,K=F[$],G=T,ee=0<T?1:-1,Q;0<W;)Z=P(Z,O),Q=F[Z],F[Z]=K,Z+=T,K=Q,W--,Z===G&&(Z=P(Z+ee,O),G=Z,$=P(Z-T,O),K=F[$])}},function(D){'use strict';D.exports=function(P,F){var T=P.getNbSubSpectra(),O,$,Z,W,K,Q;if(0!==F)for(var G=0;G<T;G++){for(P.setActiveElement(G),O=P.getNbPoints(),Q=P.getYData(),K=P.getXData(),$=P.getLastX(),Z=($-K[0])/(O-1),W=O;W<F;W++)Q.push(0),K.push($+Z);F<O&&(Q.splice(F,Q.length-1),K.splice(F,K.length-1)),P.setFirstX(K[0]),P.setLastX(K[K.length-1])}return P.setActiveElement(0),P}},function(D,E,I){'use strict';E.SD=I(9),E.NMR=I(59),E.NMR2D=I(60),E.Ranges=I(20)},function(D,E,I){'use strict';function R(K,Q,G,ee,te){var ne='',ae=K.getSpectraVariable(0),se=K.getSpectraVariable(1),oe=K.getSpectraVariable(2);ne+='##DATA CLASS= NTUPLES'+O,ne+='##NUM DIM= 2'+O;var le=K.getDataType().trim(),de={},ue;for(ue=0;ue<K.getNbSubSpectra();ue++)K.setActiveElement(ue),de[K.getXUnits()]?de[K.getXUnits()].value++:de[K.getXUnits()]={value:1,index:ue};var ce=Object.keys(de),he=ce[0],ge=0;for(ue=1;ue<ce.length;ue++)de[ce[ue]].value>de[he].value&&(he=ce[ue],ge=de[ce[ue]].index);var pe=!1;K.setActiveElement(ge);var me=0<=K.getDataType().indexOf('NMR');me&&(ne+='##.OBSERVE FREQUENCY= '+K.getParamDouble('observefrequency',0)+O,ne+='##.OBSERVE NUCLEUS= ^'+K.getNucleus()+O,ne+='##$DECIM= '+K.getParamDouble('$DECIM',0)+O,ne+='##$DSPFVS= '+K.getParamDouble('$DSPFVS',0)+O,ne+='##$FCOR= '+_Mathfloor(K.getParamDouble('$FCOR',0))+O,K.containsParam('$SW_h')?ne+='##$SW_h= '+K.getParamDouble('$SW_h',0)+O:K.containsParam('$SW_p')&&(ne+='##$SW_p= '+K.getParamDouble('$SW_p',0)+O),ne+='##$SW= '+K.getParamDouble('$SW',0)+O,ne+='##$TD= '+_Mathfloor(K.getParamDouble('$TD',0))+O,ne+='##$BF1= '+K.getParamDouble('$BF1',0)+O,ne+='##$GRPDLY= '+K.getParamDouble('$GRPDLY',0)+O,ne+='##.DIGITISER RES= '+K.getParamInt('.DIGITISER RES',0)+O,ne+='##.PULSE SEQUENCE= '+K.getParamString('.PULSE SEQUENCE','')+O,ne+='##.SOLVENT NAME= '+K.getSolventName()+O,ne+='##$NUC1= <'+K.getNucleus()+'>'+O,ne+=K.containsParam('2D_X_FREQUENCY')?'##$SFO1= '+K.getParamDouble('2D_X_FREQUENCY',0)+O:'##$SFO1= '+K.getParamDouble('$SFO1',0)+O,K.containsParam('2D_X_OFFSET')&&(ne+='##$OFFSET= '+K.getParamDouble('2D_X_OFFSET',0)+O),K.is2D()&&(ne+='$$Parameters for 2D NMR Spectrum'+O,ne+='##$NUC1= <'+K.getNucleus(2)+'>'+O,K.containsParam('2D_Y_FREQUENCY')&&(ne+='##$SFO1= '+K.getParamDouble('2D_Y_FREQUENCY',0)+O,ne+='##$SFO2= '+K.getParamDouble('2D_Y_FREQUENCY',0)+O,ne+='##$BF2= '+K.getParamDouble('2D_Y_FREQUENCY',0)+O),K.containsParam('2D_Y_OFFSET')&&(ne+='##$OFFSET= '+K.getParamDouble('2D_Y_OFFSET',0)+O),ne+='$$End of Parameters for 2D NMR Spectrum'+O)),ne+='##NTUPLES=\t'+le+O;var fe=1,xe=1;if(!K.is2D()&&1<K.getNbSubSpectra()&&me&&(pe=!0),pe?(ne+='##VAR_NAME=\t'+K.getXUnits()+',\t'+le.substring(4)+'/REAL,\t'+le.substring(4)+'/IMAG'+O,ne+='##SYMBOL=\tX,\tR,\tI'+O,ne+='##VAR_TYPE=\tINDEPENDENT,\tDEPENDENT,\tDEPENDENT'+O,ne+='CSV'!==ee||'PAC'!==ee?'##VAR_FORM=\tAFFN,\tASDF,\tASDF'+O:'##VAR_FORM=\tAFFN,\tAFFN,\tAFFN'+O,ne+='##VAR_DIM=\t'+K.getNbPoints()+',\t'+K.getNbPoints()+',\t'+K.getNbPoints()+O,ne+='##UNITS=\\tHZ,\\t'+K.getYUnits()+',\t'+oe.units+O,ne+='##FACTOR=\t'+1/G+',\t'+1/Q+',\t'+1/Q+O,'PPM'===K.getXUnits()&&(fe=K.observeFrequencyX()),ne+='##FIRST=\t'+K.getFirstX()*fe+',\t'+K.getY(0)+',\t0'+O,ne+='##LAST=\t'+K.getLastX()*fe+',\t'+K.getLastY()+',\t0'+O):(fe=1,K.is2D()?(ne+='##VAR_NAME=\tFREQUENCY1,\tFREQUENCY2,\tSPECTRUM'+O,ne+='##SYMBOL=\tF1,\tF2,\tY'+O,ne+='##.NUCLEUS=\t'+K.getNucleus(2)+',\t'+K.getNucleus(1)+O,ne+='##VAR_TYPE=\tINDEPENDENT,\tINDEPENDENT,\tDEPENDENT'+O,ne+='CSV'!==ee||'PAC'!==ee?'##VAR_FORM=\tAFFN,\tAFFN,\tASDF'+O:'##VAR_FORM=\tAFFN,\tAFFN,\tASDF'+O,ne+='##VAR_DIM=\t'+K.getNbSubSpectra()+',\t'+K.getNbPoints()+',\t'+K.getNbPoints()+O,ne+='##UNITS=\tHZ,\tHZ,\t'+K.getZUnits()+O,'PPM'===K.getXUnits()&&(fe=K.getParamDouble('2D_Y_FREQUENCY',1)),'PPM'===K.getYUnits()&&(xe=K.getParamDouble('2D_X_FREQUENCY',1)),ne+='##FACTOR=\t1,\t'+xe/G+',\t'+1/Q+O,ne+='##FIRST=\t'+K.getParamDouble('firstY',0)*fe+',\t'+K.getFirstX()*xe+',\t'+K.getY(0)+O,ne+='##LAST=\t'+K.getParamDouble('lastY',0)*fe+',\t'+K.getLastX()*xe+',\t'+K.getY(K.getNbPoints()-1)+O):(ne+='##VAR_NAME=\t'+ae.varname+',\t'+se.varname+',\t'+ae.varname+O,ne+='##SYMBOL=\t'+ae.symbol+',\t'+se.symbol+',\t'+oe.symbol+O,ne+='##VAR_TYPE=\t'+ae.vartype+',\t'+se.vartype+',\t'+oe.vartype+O,ne+='CSV'!==ee||'PAC'!==ee?'##VAR_FORM=\tAFFN,\tASDF,\tASDF'+O:'##VAR_FORM=\tAFFN,\tAFFN,\tAFFN'+O,ne+='##VAR_DIM=\t'+ae.vardim+',\t'+se.vardim+',\t'+oe.vardim+O,ne+='##UNITS=\\tHZ,\\t'+K.getYUnits()+',\t'+oe.units+O,'PPM'===K.getXUnits()&&(fe=K.observeFrequencyX()),ne+='##FACTOR=\t'+1/G+',\t'+1/Q+O,ne+='##FIRST=\t'+ae.first*fe+',\t'+se.first+',\t'+oe.first+O,ne+='##LAST=\t'+ae.last*fe+',\t'+se.last+',\t'+oe.last+O)),null!==te)for(var be=te.length-1;0<=be;be--)K.containsParam(te[be])&&(ne+='##'+te[be]+'= '+K.getParam(te[be],'')+O);var ye=0,ke=0,_e=1;for(K.is2D()&&me&&(ye=K.getParamDouble('firstY',0)*fe,ke=K.getParamDouble('lastY',0)*fe,_e=(ke-ye)/(K.getNbSubSpectra()-1)),ue=0;ue<K.getNbSubSpectra();ue++)if(K.setActiveElement(ue),ye=K.getParamDouble('firstY',0)*fe+_e*ue,ne+='##PAGE= '+ye+O,K.is2D()&&me&&(ne+='##FIRST=\t'+K.getParamDouble('firstY',0)*fe+',\t'+K.getFirstX()*xe+',\t'+K.getY(0)+O),ne+='##DATA TABLE= ',K.isDataClassPeak()){ne+='(XY..XY), PEAKS'+O;for(let ve=0;ve<K.getNbPoints();ve++)ne+=K.getX(ve)+', '+K.getY(ve)+O}else if(K.isDataClassXY()){ne+=me?K.is2D()?'(F2++(Y..Y)), PROFILE'+O:0==ue%2?'(X++(R..R)), XYDATA'+O:'(X++(I..I)), XYDATA'+O:'(X++(Y..Y)), XYDATA'+O;var we='',je=Array(K.getNbPoints());for(let ve=je.length-1;0<=ve;ve--)je[ve]=_Mathround(K.getY(ve)*Q);we+=F.encode(je,K.getFirstX()*G,K.getDeltaX()*G,ee),ne+=we+O}return ne+='##END NTUPLES= '+le+O,ne+='##END= ',K.setActiveElement(0),ne}function P(K,Q,G,ee,te){var ne='';if(K.isDataClassPeak()&&(ne+='##DATA CLASS= PEAK TABLE'+O),K.isDataClassXY()&&(ne+='##DATA CLASS= XYDATA'+O),K.setActiveElement(0),0<=K.getDataType().indexOf('NMR')&&(ne+='##.OBSERVE FREQUENCY= '+K.getParamDouble('observefrequency',0)+O,ne+='##.OBSERVE NUCLEUS= ^'+K.getNucleus()+O,ne+='##$DECIM= '+_Mathround(K.getParamDouble('$DECIM',0))+O,ne+='##$DSPFVS= '+_Mathround(K.getParamDouble('$DSPFVS',0))+O,ne+='##$FCOR= '+_Mathround(K.getParamDouble('$FCOR',0))+O,ne+='##$SW_h= '+K.getParamDouble('$SW_h',0)+O,ne+='##$SW= '+K.getParamDouble('$SW',0)+O,ne+='##$TD= '+_Mathround(K.getParamDouble('$TD',0))+O,ne+='##$GRPDLY= '+K.getParamDouble('$GRPDLY',0)+O,ne+='##$BF1= '+K.getParamDouble('$BF1',0)+O,ne+='##$SFO1= '+K.getParamDouble('$SFO1',0)+O,ne+='##$NUC1= <'+K.getNucleus()+'>'+O,ne+='##.SOLVENT NAME= '+K.getSolventName()+O),ne+='##XUNITS=\t'+K.getXUnits()+O,ne+='##YUNITS=\t'+K.getYUnits()+O,ne+='##NPOINTS=\t'+K.getNbPoints()+O,ne+='##FIRSTX=\t'+K.getFirstX()+O,ne+='##LASTX=\t'+K.getLastX()+O,ne+='##FIRSTY=\t'+K.getFirstY()+O,ne+='##LASTY=\t'+K.getLastY()+O,K.isDataClassPeak()?(ne+='##XFACTOR=1'+O,ne+='##YFACTOR=1'+O):K.isDataClassXY()&&(ne+='##XFACTOR= '+1/G+O,ne+='##YFACTOR= '+1/Q+O),ne+='##MAXY= '+K.getMaxY()+O,ne+='##MINY= '+K.getMinY()+O,null!==te)for(var ae=te.length-1;0<=ae;ae--)K.containsParam(te[ae])&&(ne+='##'+te[ae]+'= '+K.getParam(te[ae],'')+O);if(K.isDataClassPeak()){ne+='##PEAK TABLE= (XY..XY)'+O;for(var se=0;se<K.getNbPoints();se++)ne+=K.getX(se)+', '+K.getY(se)+O;ne+='##END '}else if(K.isDataClassXY()){ne+='##DELTAX= '+K.getDeltaX()+O,ne+='##XYDATA=(X++(Y..Y))'+O;var oe='',le=Array(K.getNbPoints());for(let de=le.length-1;0<=de;de--)le[de]=_Mathround(K.getY(de)*Q);oe+=F.encode(le,K.getFirstX()*G,K.getDeltaX()*G,ee),ne+=oe+O,ne+='##END= '}return K.setActiveElement(0),ne}const F=I(69),T={MAX_VALUE:_NumberMAX_SAFE_INTEGER,MIN_VALUE:_NumberMIN_SAFE_INTEGER},O='\r\n',$='Cheminfo tools '+I(156).version,Z={encode:'DIFDUP',yFactor:1,type:'SIMPLE',keep:[]};D.exports=class{convert(K,Q){Q=Object.assign({},Z,Q);const G=Q.encode.toUpperCase().trim(),ee=Q.yFactor||1;let te=Q.type;const ne=Q.keep;(null===te||0===te.length)&&(te='SIMPLE');var ae='';K.setActiveElement(0);var se=ee/K.getParamDouble('YFACTOR',1);let oe={};oe=K.is2D()?{min:K.getMinZ(),max:K.getMaxZ()}:K.getMinMaxY(),oe.max*se>=T.MAX_VALUE/2&&(se=T.MAX_VALUE/(2*oe.max)),16>_Mathabs(oe.max-oe.min)*se&&(se=16/_Mathabs(oe.max-oe.min));var le=_Mathabs(1/K.getDeltaX());return ae+='##TITLE= '+K.getTitle()+O,ae+='##JCAMP-DX= 5.00\t$$'+$+O,ae+='##OWNER= '+K.getParamString('##OWNER=','')+O,ae+='##DATA TYPE= '+K.getDataType()+O,'NTUPLES'===te&&(ae+=R(K,se,le,G,ne)),'SIMPLE'===te&&(ae+=P(K,se,le,G,ne)),ae}}},function(D){'use strict';function P(de,ue,ce){return F(de,ue,ce,',')}function F(de,ue,ce,he){he||(he=' ');for(var ge='',pe=0,me=de.length,fe;pe<me-7;){for(ge+=_Mathceil(ue+pe*ce),fe=0;8>fe;fe++)ge+=he+de[pe++];ge+=G}if(pe<me)for(ge+=_Mathceil(ue+pe*ce),fe=pe;fe<me;fe++)ge+=he+de[fe];return ge}function T(de,ue,ce){for(var he='',ge=0,pe=de.length,me;ge<pe-7;){for(he+=_Mathceil(ue+ge*ce),me=0;8>me;me++)he+=0>de[ge]?'-'+de[ge++]:'+'+de[ge++];he+=G}if(ge<pe)for(he+=_Mathceil(ue+ge*ce),me=ge;me<pe;me++)he+=0>de[me]?'-'+de[me]:'+'+de[me];return he}function O(de,ue,ce){for(var he='',ge=0,pe=de.length,me;ge<pe-10;){for(he+=_Mathceil(ue+ge*ce),me=0;10>me;me++)he+=W(de[ge++].toString());he+=G}if(ge<pe)for(he+=_Mathceil(ue+ge*ce),me=ge;me<pe;me++)he+=W(de[me].toString());return he}function $(de,ue,ce){var he=0,ge=0,pe=0,fe='',xe='',be='',ye=Array(de.length-1),me;for(me=0;me<ye.length;me++)ye[me]=de[me+1]-de[me];for(var ke=ye.length;ge<ke;)0==pe?(xe=_Mathceil(ue+ge*ce)+W(de[ge].toString())+K(ye[ge].toString()),fe+=xe,pe+=xe.length):ye[ge-1]===ye[ge]?he++:0<he?(he++,xe=Q(he.toString()),fe+=xe,pe+=xe.length,he=0,ge--):(xe=K(ye[ge].toString()),xe.length+pe<le?(fe+=xe,pe+=xe.length):(fe+=G,be=_Mathceil(ue+ge*ce)+W(de[ge].toString())+xe,fe+=be,pe=be.length)),ge++;return 0<he&&(fe+=Q((he+1).toString())),fe+=G+_Mathceil(ue+ge*ce)+W(de[ge].toString()),fe}function Z(de,ue,ce){var he=0,ge=0,me='',fe='',xe='',be=Array(de.length-1),pe;for(pe=0;pe<be.length;pe++)be[pe]=de[pe+1]-de[pe];he=0;for(var ye=be.length;he<ye;)0==ge?(fe=_Mathceil(ue+he*ce)+W(de[he].toString())+K(be[he].toString()),me+=fe,ge+=fe.length):(fe=K(be[he].toString()),fe.length+ge<le?(me+=fe,ge+=fe.length):(me+=G,xe=_Mathceil(ue+he*ce)+W(de[he].toString())+fe,me+=xe,ge=xe.length)),he++;return me+=G+_Mathceil(ue+he*ce)+W(de[he].toString()),me}function W(de){var ue='';return'-'===de.charAt(0)?(ue+=ee[ne][de.charAt(1)],2<de.length&&(ue+=de.substring(2))):(ue+=ee[te][de.charAt(0)],1<de.length&&(ue+=de.substring(1))),ue}function K(de){var ue='';return'-'===de.charAt(0)?(ue+=ee[se][de.charAt(1)],2<de.length&&(ue+=de.substring(2))):(ue+=ee[ae][de.charAt(0)],1<de.length&&(ue+=de.substring(1))),ue}function Q(de){var ue='';return ue+=ee[oe][de.charAt(0)],1<de.length&&(ue+=de.substring(1)),ue}const G='\r\n',ee=[['0','1','2','3','4','5','6','7','8','9'],['@','A','B','C','D','E','F','G','H','I'],['@','a','b','c','d','e','f','g','h','i'],['%','J','K','L','M','N','O','P','Q','R'],['%','j','k','l','m','n','o','p','q','r'],[' ','S','T','U','V','W','X','Y','Z','s']],te=1,ne=2,ae=3,se=4,oe=5,le=100;D.exports={encode:function(de,ue,ce,he){return'FIX'===he?F(de,ue,ce):'SQZ'===he?O(de,ue,ce):'DIF'===he?Z(de,ue,ce):'DIFDUP'===he?$(de,ue,ce):'CSV'===he?P(de,ue,ce):'PAC'===he?T(de,ue,ce):Z(de,ue,ce)},fixEncoding:F,commaSeparatedValuesEncoding:P,packedEncoding:T,squeezedEncoding:O,differenceDuplicateEncoding:$,differenceEncoding:Z}},function(D){'use strict';function R(se,oe){var le=se.peaksComp,de=le.length;se.startX=le[0].x/se.observe-le[0].width,se.stopX=le[de-1].x/se.observe+le[de-1].width,se.integralData.from=le[0].x/se.observe-3*le[0].width,se.integralData.to=le[de-1].x/se.observe+3*le[de-1].width,se.maskPattern=se.mask2,se.multiplicity=P(se,oe),se.pattern=se.multiplicity}function P(se,oe){var ue='',ce=1,he=[],de;if(oe&&0<oe.length){for(oe.sort(function(ge,pe){return ge-pe}),de=0;de<oe.length-1;de++)_Mathabs(oe[de]-oe[de+1])<0.05?ce++:(he.push({coupling:_Mathabs(oe[de]),multiplicity:ee[ce]}),ue+=ee[ce],ce=1);he.push({coupling:_Mathabs(oe[de]),multiplicity:ee[ce]}),ue+=ee[ce],se.nmrJs=he}else ue='s',16<_Mathabs(se.startX-se.stopX)*se.observe&&(ue='br s');return ue}function F(se){var oe=_Mathpow(2,se.length),le,de,ue=[{x:0,intensity:oe}];for(le=0;le<se.length;le++)for(de=ue.length-1;0<=de;de--)ue.push({x:ue[de].x+se[le]/2,intensity:ue[de].intensity/2}),ue[de].x-=se[le]/2,ue[de].intensity/=2;for(ue.sort(function(he,ge){return he.x-ge.x}),de=ue.length-2;0<=de;de--)0.1>_Mathabs(ue[de].x-ue[de+1].x)&&(ue[de].intensity+=ue[de+1].intensity,ue.splice(de+1,1));return ue}function T(se,oe){for(var le=_Mathceil(se.values.length/2),de=se.values.length,ue=0,ce,he;ue!==oe;){for(he=!1;!he;)if(he=!0,se.currentIndex[se.active]++,se.currentIndex[se.active]>=se.values[se.active].length){if(se.active+1===le)return null;se.currentIndex[se.active]=0,he=!1,se.active++}else se.active=0;for(ue=0,ce=0;ce<le;ce++)ue+=2*se.values[ce][se.currentIndex[ce]];0!=se.values.length%2&&(ue-=se.values[le-1][se.currentIndex[le-1]])}if(ue===oe){var ge=Array(de);for(ce=0;ce<le;ce++)ge[ce]=se.values[ce][se.currentIndex[ce]],ge[de-ce-1]=se.values[ce][se.currentIndex[ce]];return ge}return null}function O(se){var oe=Array(se.length),le=Array(se.length),de,ue;oe[0]=[1],oe[se.length-1]=[1],le[0]=-1,le[se.length-1]=0;for(var ce=1;ce<se.length-1;ce++){de=_Mathround(0.85*se[ce].intensity),ue=_Mathround(1.15*se[ce].intensity),oe[ce]=[];for(var he=de;he<=ue;he++)oe[ce].push(he);le[ce]=0}return{values:oe,currentIndex:le,active:0}}function $(se,oe,le){var de=Z(se,oe,le),ue=se.peaksComp,ce=se.mask,he=se.delta1;se.delta1=(se.peaks[0].x+se.peaks[se.peaks.length-1].x)/2;var ge=Z(se,oe,le);return se.peaksComp.length>ue.length?ge:(se.delta1=he,se.peaksComp=ue,se.mask=ce,de)}function Z(se,oe,le){var me=Array(se.peaks.length),de,ue,ce,he,ge,pe;for(pe=0;pe<me.length;pe++)me[pe]={x:se.peaks[pe].x*se.observe,intensity:se.peaks[pe].intensity,width:se.peaks[pe].width};for(pe=me.length-2;0<=pe;pe--)0.25>_Mathabs(me[pe].x-me[pe+1].x)&&(me[pe].x=me[pe].x*me[pe].intensity+me[pe+1].x*me[pe+1].intensity,me[pe].intensity+=me[pe+1].intensity,me[pe].x/=me[pe].intensity,me[pe].intensity/=2,me[pe].width+=me[pe+1].width,me.splice(pe+1,1));se.peaksComp=me;var fe=me.length,xe=Array(fe);se.mask=xe;var be=0,ye=me.length-1,ke=se.delta1*se.observe,_e=[(me[0].x+me[fe-1].x)/2,1];oe=W(_Mathabs(ke-_e[0]));for(var we=0,je=0;je<fe;je++)xe[je]=!0,we+=se.peaks[je].intensity;for(;be<=ye;){if(xe[be]=!0,xe[ye]=!0,be==ye)2<fe&&_Mathabs(me[be].x-ke)>oe&&(xe[be]=!1);else if(de=_Mathmax(me[be].intensity,me[ye].intensity),ue=_Mathmin(me[be].intensity,me[ye].intensity),he=de/ue,he>te)me[be].intensity===ue?(xe[be]=!1,ye++):(xe[ye]=!1,be--);else{var ve=_Mathabs(me[be].x-ke),Se=_Mathabs(me[ye].x-ke);_Mathabs(ve-Se)<oe?(ce=_Mathmin(me[be].intensity,me[ye].intensity),ge=_Mathmin(me[be].width,me[ye].width),me[be].intensity=me[ye].intensity=ce,me[be].width=me[ye].width=ge,_e=[_e[0]+(me[ye].x+me[be].x)/2,_e[1]+1]):_Mathmax(ve,Se)===Se?(xe[ye]=!1,be--):(xe[be]=!1,ye++)}if(be++,ye--,1===le&&(ke=Q(me,xe),isNaN(ke)))return 0;oe=W(_Mathabs(ke-_e[0]/_e[1]))}for(je=fe-1;0<=je;je--)!1===xe[je]&&me.splice(je,1);if(ke=Q(me),isNaN(ke))return 0;se.delta1=ke/se.observe;let De=0,Ce=0;if(1<me.length){for(je=_Mathceil(me.length/2)-1;0<=je;je--)De+=(3+_Mathmin(_Mathabs(me[je].x-ke),_Mathabs(me[me.length-1-je].x-ke)))/(3+_Mathmax(_Mathabs(me[je].x-ke),_Mathabs(me[me.length-1-je].x-ke)))*me[je].intensity,Ce+=me[je].intensity;De/=Ce}else 1===me.length&&(De=1);var Ee=0;for(je=0;je<me.length;je++)Ee+=me[je].intensity;if(De-=0.12*((we-Ee)/we),0.8<De&&0.97>De&&2>le)return Z(se,ae,2);if(1<me.length){let Ie;for(je=_Mathceil(me.length/2)-1;0<=je;je--)Ie=(me[je].x-me[me.length-1-je].x)/2,me[je].x=ke+Ie,me[me.length-1-je].x=ke-Ie}return De}function W(se){var oe=2.5*se;return 0.75>oe&&(oe=0.75),3<oe&&(oe=3),oe}function K(se,oe){var le=JSON.parse(JSON.stringify(se.peaksComp)),de=0,ue=0,ce;for(ce=0;ce<le.length;ce++)de+=le[ce].intensity;de=_Mathpow(2,oe)/de,se.mask2=JSON.parse(JSON.stringify(se.mask));var he=se.mask2.length-1;for(ce=le.length-1;0<=ce;ce--){for(le[ce].intensity*=de;0<=he&&!1===se.mask2[he];)he--;0.75>le[ce].intensity?(le.splice(ce,1),se.mask2[he]=!1):ue+=le[ce].intensity,he--}for(ue=_Mathpow(2,oe)/ue,ce=le.length-1;0<=ce;ce--)le[ce].intensity*=ue;return le}function Q(se,oe){var le=0,de=0,ue,ce;if(oe)for(ue=0;ue<se.length;ue++)!0===oe[ue]&&(ce=G(se[ue]),le+=ce,de+=ce*se[ue].x);else for(ue=0;ue<se.length;ue++)ce=G(se[ue]),le+=ce,de+=ce*se[ue].x;return de/le}function G(se){return _Mathabs(1.57*(se.intensity*se.width))}const ee=['s','d','t','q','quint','h','sept','o','n'];var te=1.5,ae=1;D.exports={compilePattern:function(oe){if(oe.multiplicity='m',oe.symRank=$(oe,2.5,1),oe.asymmetric=!0,0.95<=oe.symRank&&32>oe.peaksComp.length){oe.asymmetric=!1;var ce=1,ge=[],le,de,ue,he,pe,me;for(ue=0;9>ue;ue++){var fe=K(oe,ue),xe=!1;if(1===fe.length&&0===ue)xe=!0;else if(1>=fe.length)continue;var be=O(fe);pe=_Mathpow(2,ue);for(var ye=null,ke;!xe&&null!==(ye=T(be,pe));){for(ke=Array(ye.length),ce=1,le=0;le<ye.length;le++)for(ke[le]=Array(ye[le]),de=0;de<ye[le];de++)ke[le][de]=ce++;ge=[],de=1,ge.push(fe[1].x-fe[0].x),he=fe[0].x,ke[0].splice(0,1),ke[1].splice(0,1),ce=1;var _e=2;for(me=_Mathpow(2,ue)-1;ge.length<ue&&_e<me&&ce<fe.length;){for(de++;ce<fe.length&&0===ke[ce].length;)ce++;if(ce<fe.length){ge.push(fe[ce].x-fe[0].x),ke[ce].splice(0,1),_e++;for(var we=2,je;we<=de;we++){for(je=0,le=0;le<we;le++)je+=ge[le];for(le=1;le<ke.length;le++)if(0.25>_Mathabs(fe[le].x-(he+je))){ke[le].splice(0,1),_e++;break}}}}var ve=F(ge);for(xe=!0,le=0;le<ve.length;le++)ve[le].intensity!==ye[le]&&(xe=!1)}xe&&R(oe,ge)}}for(le=0;le<oe.peaksComp.length;le++)oe.peaksComp[le].x/=oe.observe}}},function(D,E,I){'use strict';function P(O,$){for(var Z=O.length-1;0<=Z;Z--)_Mathabs(O[Z].y)<$&&O.splice(Z,1);return O}const F=I(101),T={thresholdFactor:1,optimize:!1,minMaxRatio:0.01,broadRatio:2.5e-4,smoothY:!0,nL:4,functionType:'gaussian',broadWidth:0.25,sgOptions:{windowSize:9,polynomial:3}};D.exports=function(O,$){var Z=Object.assign({},T,$),W=_Mathabs(O.getNoiseLevel())*Z.thresholdFactor,K=O.getXYData();Z.from&&Z.to&&(K=O.getVector(Z.from,Z.to));var Q=F.gsd(K[0],K[1],Z);return Z.broadWidth&&(Q=F.post.joinBroadPeaks(Q,{width:Z.broadWidth})),Z.optimize&&(Q=F.post.optimizePeaks(Q,K[0],K[1],Z.nL,Z.functionType)),P(Q,W)}},function(D,E,I){'use strict';function P(K){return K.isHomoNuclear()?1.5:3}function F(K,Q,G){var ee=Q.observeFrequencyX(),te=Q.observeFrequencyY(),ne=Q.getFirstY(),ae=Q.getDeltaY(),se;for(se=K.length-1;0<=se;se--)K[se].x=Q.arrayPointToUnits(K[se].x),K[se].y=ne+ae*K[se].y,(-1>K[se].y||210<=K[se].y)&&K.splice(se,1);var oe=[],le=0;for(G*=G,se=0;se<K.length;se++)for(var de=se;de<K.length;de++)le=_Mathpow((K[se].x-K[de].x)*ee,2)+_Mathpow((K[se].y-K[de].y)*te,2),le<G?oe.push(1):oe.push(0);var ue=O(oe),ce=[];if(null!=K)for(var he=0,ge;he<ue.length;he++){ge={nucleusX:Q.getNucleus(1),nucleusY:Q.getNucleus(2)},ge.resolutionX=(Q.getLastX()-Q.getFirstX())/Q.getNbPoints(),ge.resolutionY=ae;var pe=[];ge.shiftX=0,ge.shiftY=0;for(var me=[_NumberMAX_VALUE,0],fe=[_NumberMAX_VALUE,0],xe=0,be=ue[he].length-1;0<=be;be--)1===ue[he][be]&&(pe.push({x:K[be].x,y:K[be].y,z:K[be].z}),ge.shiftX+=K[be].x*K[be].z,ge.shiftY+=K[be].y*K[be].z,xe+=K[be].z,K[be].x<me[0]&&(me[0]=K[be].x),K[be].x>me[1]&&(me[1]=K[be].x),K[be].y<fe[0]&&(fe[0]=K[be].y),K[be].y>fe[1]&&(fe[1]=K[be].y));ge.fromTo=[{from:me[0],to:me[1]},{from:fe[0],to:fe[1]}],ge.shiftX/=xe,ge.shiftY/=xe,ge.peaks=pe,ce.push(ge)}return ce}var T=I(22),O=I(48),$=I(112),Z=I(40).FFTUtils;const W=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];D.exports=function(K,Q){0===Q&&(Q=1),0>Q&&(Q=-Q);for(var G=K.getNbPoints(),ee=K.getNbSubSpectra(),te=Array(G*ee),ne=K.isHomoNuclear(),ae=0,se;ae<ee;ae++){se=K.getYData(ae);for(var oe=0;oe<G;oe++)te[ae*G+oe]=ne?0<se[oe]?se[oe]:0:_Mathabs(se[oe])}var le=P(K);if(ne){let ce=Z.convolute(te,W,ee,G),he=$.findPeaks2DRegion(te,{filteredData:ce,rows:ee,cols:G,nStdDev:le*Q});for(var de=$.findPeaks2DMax(te,{filteredData:ce,rows:ee,cols:G,nStdDev:(le+0.5)*Q}),ue=0;ue<he.length;ue++)de.push(he[ue]);return T.enhanceSymmetry(F(de,K,24))}let ce=Z.convolute(te,W,ee,G),he=$.findPeaks2DRegion(te,{filteredData:ce,rows:ee,cols:G,nStdDev:le*Q});return F(T.clean(he,0.05),K,24)}},function(D,E,I){'use strict';function P(Z,W,K,Q,G){const ee=W.observeFrequencyX();var te=W.cs,ne=W.sum,ae=W.i,se=W.j,oe=W.signals,le=oe===void 0?[]:oe,de=W.signal1D,ue=de===void 0?{}:de,ce=W.peaks,he=ce===void 0?null:ce,ge=W.prevPeak,pe=ge===void 0?{x:1e5,y:0,width:0}:ge,me=W.spectrumIntegral,fe=me===void 0?0:me;for(G=_NumberisFinite(G)?G:16,Q='sum'===Q||'peaks'===Q?Q:'sum',ae=0;ae<Z.length;ae++){if(_Mathabs(Z[ae].x-pe.x)>G/ee)ue={nbPeaks:1,units:'PPM',startX:Z[ae].x-Z[ae].width,stopX:Z[ae].x+Z[ae].width,multiplicity:'',pattern:'',observe:ee,nucleus:'1H',integralData:{from:Z[ae].x-3*Z[ae].width,to:Z[ae].x+3*Z[ae].width},peaks:[]},ue.peaks.push({x:Z[ae].x,intensity:Z[ae].y,width:Z[ae].width}),le.push(ue);else{var xe=Z[ae].x+Z[ae].width;ue.stopX=_Mathmax(ue.stopX,xe),xe=Z[ae].x-Z[ae].width,ue.startX=_Mathmin(ue.startX,xe),ue.nbPeaks++,ue.peaks.push({x:Z[ae].x,intensity:Z[ae].y,width:Z[ae].width}),ue.integralData.from=_Mathmin(ue.integralData.from,Z[ae].x-3*Z[ae].width),ue.integralData.to=_Mathmax(ue.integralData.to,Z[ae].x+3*Z[ae].width)}pe=Z[ae]}for(ae=0;ae<le.length;ae++){he=le[ae].peaks;let be=le[ae].integralData;for(te=0,ne=0,se=0;se<he.length;se++)te+=he[se].x*F(he[se]),ne+=F(he[se]);le[ae].delta1=te/ne,be.value='sum'===Q?W.getArea(be.from,be.to):ne,fe+=be.value}if(0!==K)for(ae=0;ae<le.length;ae++){let be=le[ae].integralData;be.value*=K/fe}return le}function F(Z){return _Mathabs(1.57*(Z.intensity*Z.width))}const T=I(70),O=I(20),$={nH:99,clean:!0,compile:!0,integralType:'sum',idPrefix:'',frequencyCluster:16};D.exports=function(Z,W,K){K=Object.assign({},$,K);var ne=P(W,Z,K.nH,K.integralType,K.frequencyCluster),Q,G,ee,te;if(K.clean||!1)for(Q=ne.length-1;0<=Q;Q--)0.5>ne[Q].integralData.value&&ne.splice(Q,1);if(K.compile||!1){for(Q=0;Q<ne.length;Q++)if(T.compilePattern(ne[Q]),ne[Q].maskPattern&&'m'!==ne[Q].multiplicity&&''!==ne[Q].multiplicity){ee=0,te=0;var ae=[];for(G=ne[Q].maskPattern.length-1;0<=G;G--)if(te+=F(ne[Q].peaks[G]),!1===ne[Q].maskPattern[G]){var se=ne[Q].peaks.splice(G,1)[0];ae.push({x:se.x,y:se.intensity,width:se.width}),ne[Q].mask.splice(G,1),ne[Q].mask2.splice(G,1),ne[Q].maskPattern.splice(G,1),ne[Q].nbPeaks--,ee+=F(se)}if(0<ae.length){ee=ee*ne[Q].integralData.value/te,ne[Q].integralData.value-=ee;var oe=[];for(G=ae.length-1;0<=G;G--)oe.push(ae[G]);let he=P(oe,Z,ee,K.integralType,K.frequencyCluster);for(G=0;G<he.length;G++)ne.push(he[G])}}var le=0,de=0;for(Q=0;Q<ne.length;Q++)de+=_Mathround(ne[Q].integralData.value);if(de!==K.nH)for(le=K.nH/de,Q=0;Q<ne.length;Q++)ne[Q].integralData.value*=le}if(ne.sort(function(he,ge){return ge.delta1-he.delta1}),K.clean||!1)for(Q=ne.length-1;0<=Q;Q--)0.5>ne[Q].integralData.value&&ne.splice(Q,1);for(Q=0;Q<ne.length;Q++)ne[Q].signalID=K.idPrefix&&0<K.idPrefix.length?K.idPrefix+'_'+(Q+1):Q+1+'',ne[Q]._highlight=[ne[Q].signalID];let ue=Array(ne.length);for(Q=0;Q<ne.length;Q++){var ce=ne[Q];ue[Q]={from:ce.integralData.from,to:ce.integralData.to,integral:ce.integralData.value,signal:[{nbAtoms:0,diaID:[],multiplicity:ce.multiplicity,peak:ce.peaks,kind:'',remark:''}],signalID:ce.signalID,_highlight:ce._highlight},ce.nmrJs&&(ue[Q].signal[0].j=ce.nmrJs),ce.asymmetric&&'m'!==ce.multiplicity||(ue[Q].signal[0].delta=ce.delta1)}return ne=new O(ue),ne}},function(D,E,I){'use strict';function P(oe,le){var de=F(le);0===de.length&&(de='\u03B4 ');var ue=[],ce=!0,he=!1,ge;try{for(var pe=oe[Symbol.iterator](),me;!(ce=(me=pe.next()).done);ce=!0){let fe=me.value;T(fe,ue,le)}}catch(fe){he=!0,ge=fe}finally{try{!ce&&pe.return&&pe.return()}finally{if(he)throw ge}}return 0<ue.length?de+ue.join(', '):''}function F(oe){let le=[],de=Q(oe.nucleus)+' NMR';return oe.solvent&&le.push(K(oe.solvent)),oe.frequencyObserved&&le.push((1*oe.frequencyObserved).toFixed(0)+' MHz'),de+=0<le.length?' ('+le.join(', ')+'): \u03B4 ':' : \u03B4 ',de}function T(oe,le,de){var ue='',ce=[];let he=[oe.from,oe.to];if(Array.isArray(oe.signal)&&0<oe.signal.length){var ge=oe.signal;if(1<ge.length){ue+=_Mathmin(...he).toFixed(de.nbDecimalDelta)+'-'+_Mathmax(...he).toFixed(de.nbDecimalDelta),ue+=' ('+O(oe,de);var pe=!0,me=!1,fe;try{for(var xe=ge[Symbol.iterator](),be;!(pe=(be=xe.next()).done);pe=!0){let ye=be.value;ce=[],ye.delta!==void 0&&(ue=G(ue),ue+=ye.delta.toFixed(de.nbDecimalDelta),W({},ye,ce,de),0<ce.length&&(ue+=' ('+ce.join(', ')+')'))}}catch(ye){me=!0,fe=ye}finally{try{!pe&&xe.return&&xe.return()}finally{if(me)throw fe}}ue+=')'}else ce=[],void 0===ge[0].delta?(ue+=_Mathmin(...he).toFixed(de.nbDecimalDelta)+'-'+_Mathmax(...he).toFixed(de.nbDecimalDelta),W(oe,ge[0],ce,de),0<ce.length&&(ue+=' ('+ce+')')):(ue+=ge[0].delta.toFixed(de.nbDecimalDelta),W(oe,ge[0],ce,de),0<ce.length&&(ue+=' ('+ce.join(', ')+')'))}else ue+=_Mathmin(...he).toFixed(de.nbDecimalDelta)+'-'+_Mathmax(...he).toFixed(de.nbDecimalDelta),W(oe,[],ce,de),0<ce.length&&(ue+=' ('+ce.join(', ')+')');le.push(ue)}function O(oe,le){let de='';return oe.pubIntegral?de=oe.pubIntegral:oe.integral&&(de=oe.integral.toFixed(0)+le.nucleus[le.nucleus.length-1]),de}function $(oe,le,de){let ue=O(oe,de);0<ue.length&&le.push(ue)}function Z(oe,le){let de=ae(oe);0<de.length&&le.push(de)}function W(oe,le,de,ue){var ce=!0,he=!1,ge;try{for(var pe=ue.format[Symbol.iterator](),me;!(ce=(me=pe.next()).done);ce=!0){const fe=me.value;switch(fe.toUpperCase()){case'I':$(oe,de,ue);break;case'M':Z(le,de);break;case'A':ne(le,de);break;case'J':te(le,de,ue);break;default:throw new Error('Unknow format letter: '+fe);}}}catch(fe){he=!0,ge=fe}finally{try{!ce&&pe.return&&pe.return()}finally{if(he)throw ge}}}function K(oe){return oe.replace(/([0-9]+)/g,'<sub>$1</sub>')}function Q(oe){return oe.replace(/([0-9]+)/g,'<sup>$1</sup>')}function G(oe){return!(0<oe.length)||oe.match(/ $/)||oe.match(/\($/)||(oe+=', '),oe}function ee(oe){return oe=oe.replace(/([0-9]+)/g,'<sub>$1</sub>'),oe=oe.replace(/\"([^\"]*)\"/g,'<i>$1</i>'),oe}function te(oe,le,de){if(Array.isArray(oe.j)&&0<oe.j.length){var ue=[],ce=!0,he=!1,ge;try{for(var pe=oe.j[Symbol.iterator](),me;!(ce=(me=pe.next()).done);ce=!0){let fe=me.value;fe.coupling!==void 0&&ue.push(fe.coupling.toFixed(de.nbDecimalJ))}}catch(fe){he=!0,ge=fe}finally{try{!ce&&pe.return&&pe.return()}finally{if(he)throw ge}}0<ue.length&&le.push('<i>J</i> = '+ue.join(', ')+' Hz')}}function ne(oe,le){oe.pubAssignment?le.push(ee(oe.pubAssignment)):oe.assignment&&le.push(ee(oe.assignment))}const ae=I(23);var se={h:{nucleus:'1H',nbDecimalDelta:2,nbDecimalJ:1,observedFrequency:400},c:{nucleus:'13C',nbDecimalDelta:1,nbDecimalJ:1,observedFrequency:100},f:{nucleus:'19F',nbDecimalDelta:2,nbDecimalJ:1,observedFrequency:400}};D.exports=function(oe,le={}){var de=(le.nucleus||'1H').toLowerCase().replace(/[0-9]/g,''),ue=se[de];le=Object.assign({},ue,{ascending:!1,format:'IMJA'},le),oe=oe.clone(),le.ascending?oe.sort(function(he,ge){let pe=_Mathmin(he.from,he.to),me=_Mathmin(ge.from,ge.to);return me-pe}):oe.sort(function(he,ge){let pe=_Mathmin(he.from,he.to),me=_Mathmin(ge.from,ge.to);return pe-me});var ce=P(oe,le);return 0<ce.length&&(ce+='.'),ce}},function(D){'use strict';D.exports=function(P,F){F=F||{};var T=F.from,O=F.to,$=F.nbPoints||16384,Z=F.fnName||'gaussian',W=F.nWidth||4;if(!T){T=_NumberMAX_VALUE;for(let le=0;le<P.length;le++)P[le].x-P[le].width*W<T&&(T=P[le].x-P[le].width*W)}if(!O){O=_NumberMIN_VALUE;for(let le=0;le<P.length;le++)P[le].x+P[le].width*W>O&&(O=P[le].x+P[le].width*W)}var K=Array($),Q=Array($),G=(O-T)/($-1);for(let le=0;le<$;le++)K[le]=T+le*G,Q[le]=0;var ee='intensity';P[0].y&&(ee='y');for(let le=0;le<P.length;le++){var te=P[le];if(te.x>T&&te.x<O){var ne=_Mathround((te.x-T)/G),ae=_Mathround(te.width*W/G);if('gaussian'===Z)for(var se=ne-ae;se<ne+ae;se++)0<=se&&se<$&&(Q[se]+=te[ee]*_Mathexp(-0.5*_Mathpow((te.x-K[se])/(te.width/2),2)));else{var oe=te[ee]*_Mathpow(te.width,2)/4;for(let de=ne-ae;de<ne+ae;de++)0<=de&&de<$&&(Q[de]+=oe/(_Mathpow(te.x-K[de],2)+_Mathpow(te.width/2,2)))}}}return{x:K,y:Q}}},function(D){'use strict';var F={type:'rect',line:0,lineLabel:1,labelColor:'red',strokeColor:'red',strokeWidth:'1px',fillColor:'green',width:0.05,height:10,toFixed:1},T={type:'rect',labelColor:'red',strokeColor:'red',strokeWidth:'1px',fillColor:'green',width:'6px',height:'6px'};D.exports={annotations2D:function(O,$){for(var Z=Object.assign({},T,$),W=[],K=O.length-1;0<=K;K--){var Q=O[K],G={};G.type=Z.type,G._highlight=Q._highlight,G._highlight&&0!==G._highlight.length||(G._highlight=[Q.signalID]),Q._highlight=G._highlight,G.position=[{x:Q.fromTo[0].from-0.01,y:Q.fromTo[1].from-0.01,dx:Z.width,dy:Z.height},{x:Q.fromTo[0].to+0.01,y:Q.fromTo[1].to+0.01}],G.fillColor=Z.fillColor,G.label={text:Q.remark,position:{x:Q.signal[0].delta[0],y:Q.signal[0].delta[1]-0.025}},G.strokeColor=1===Q.integral?Z.strokeColor:'rgb(0,128,0)',G.strokeWidth=Z.strokeWidth,G.width=Z.width,G.height=Z.height,G.info=Q,W.push(G)}return W},annotations1D:function(O,$){for(var Z=Object.assign({},F,$),W=Z.height,K=[],Q=0;Q<O.length;Q++){var G=O[Q],ee={};K.push(ee),ee.line=Z.line,ee._highlight=G._highlight,ee._highlight&&0!==ee._highlight.length||(ee._highlight=[G.signalID],G.signal.forEach(function(te){for(let ne=0;ne<te.diaID.length;ne++)ee._highlight.push(te.diaID[ne])})),G._highlight=ee._highlight,ee.type=Z.type,ee.position=G.to&&G.from&&G.to!==G.from?[{x:G.to,y:Z.line*W+'px'},{x:G.from,y:Z.line*W+3+'px'}]:[{x:G.signal[0].delta-Z.width,y:Z.line*W+'px'},{x:G.signal[0].delta+Z.width,y:Z.line*W+3+'px'}],!Z.noLabel&&G.integral&&(ee.label={text:G.integral.toFixed(Z.toFixed),size:'11px',anchor:'middle',color:Z.labelColor,position:{x:(ee.position[0].x+ee.position[1].x)/2,y:(Z.line+Z.lineLabel)*W+'px',dy:'5px'}}),ee.strokeColor=Z.strokeColor,ee.strokeWidth=Z.strokeWidth,ee.fillColor=Z.fillColor,ee.info=G}return K}}},function(D,E){'use strict';function R(te){var ne=te.length;if(0<ne%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===te[ne-2]?2:'='===te[ne-1]?1:0}function T(te){return Z[63&te>>18]+Z[63&te>>12]+Z[63&te>>6]+Z[63&te]}function O(te,ne,ae){for(var oe=[],le=ne,se;le<ae;le+=3)se=(te[le]<<16)+(te[le+1]<<8)+te[le+2],oe.push(T(se));return oe.join('')}E.byteLength=function(te){return 3*te.length/4-R(te)},E.toByteArray=function(te){var ue=te.length,ne,ae,se,oe,le,de;le=R(te),de=new K(3*ue/4-le),se=0<le?ue-4:ue;var ce=0;for(ne=0,ae=0;ne<se;ne+=4,ae+=3)oe=W[te.charCodeAt(ne)]<<18|W[te.charCodeAt(ne+1)]<<12|W[te.charCodeAt(ne+2)]<<6|W[te.charCodeAt(ne+3)],de[ce++]=255&oe>>16,de[ce++]=255&oe>>8,de[ce++]=255&oe;return 2===le?(oe=W[te.charCodeAt(ne)]<<2|W[te.charCodeAt(ne+1)]>>4,de[ce++]=255&oe):1===le&&(oe=W[te.charCodeAt(ne)]<<10|W[te.charCodeAt(ne+1)]<<4|W[te.charCodeAt(ne+2)]>>2,de[ce++]=255&oe>>8,de[ce++]=255&oe),de},E.fromByteArray=function(te){for(var ae=te.length,se=ae%3,oe='',le=[],de=16383,ue=0,ce=ae-se,ne;ue<ce;ue+=de)le.push(O(te,ue,ue+de>ce?ce:ue+de));return 1==se?(ne=te[ae-1],oe+=Z[ne>>2],oe+=Z[63&ne<<4],oe+='=='):2==se&&(ne=(te[ae-2]<<8)+te[ae-1],oe+=Z[ne>>10],oe+=Z[63&ne>>4],oe+=Z[63&ne<<2],oe+='='),le.push(oe),le.join('')};for(var Z=[],W=[],K='undefined'==typeof Uint8Array?Array:Uint8Array,Q='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',G=0,ee=Q.length;G<ee;++G)Z[G]=Q[G],W[Q.charCodeAt(G)]=G;W['-'.charCodeAt(0)]=62,W['_'.charCodeAt(0)]=63},function(D,E,I){D.exports=I(79)},function(D,E){var R,P,F;(function(){var T,O,$,Z,W,K,Q,G,ee,te,ne,ae,se,oe,le;$=_Mathfloor,te=_Mathmin,O=function(de,ue){return de<ue?-1:de>ue?1:0},ee=function(de,ue,ce,he,ge){var pe;if(null==ce&&(ce=0),null==ge&&(ge=O),0>ce)throw new Error('lo must be non-negative');for(null==he&&(he=de.length);ce<he;)pe=$((ce+he)/2),0>ge(ue,de[pe])?he=pe:ce=pe+1;return[].splice.apply(de,[ce,ce-ce].concat(ue)),ue},K=function(de,ue,ce){return null==ce&&(ce=O),de.push(ue),oe(de,0,de.length-1,ce)},W=function(de,ue){var ce,he;return null==ue&&(ue=O),ce=de.pop(),de.length?(he=de[0],de[0]=ce,le(de,0,ue)):he=ce,he},G=function(de,ue,ce){var he;return null==ce&&(ce=O),he=de[0],de[0]=ue,le(de,0,ce),he},Q=function(de,ue,ce){var he;return null==ce&&(ce=O),de.length&&0>ce(de[0],ue)&&(he=[de[0],ue],ue=he[0],de[0]=he[1],le(de,0,ce)),ue},Z=function(de,ue){var ce,he,pe,fe,xe,be;for(null==ue&&(ue=O),fe=function(){be=[];for(var ye=0,ke=$(de.length/2);0<=ke?ye<ke:ye>ke;0<=ke?ye++:ye--)be.push(ye);return be}.apply(this).reverse(),xe=[],(he=0,pe=fe.length);he<pe;he++)ce=fe[he],xe.push(le(de,ce,ue));return xe},se=function(de,ue,ce){var he;if(null==ce&&(ce=O),he=de.indexOf(ue),-1!==he)return oe(de,0,he,ce),le(de,he,ce)},ne=function(de,ue,ce){var he,ge,pe,me,fe;if(null==ce&&(ce=O),ge=de.slice(0,ue),!ge.length)return ge;for(Z(ge,ce),fe=de.slice(ue),(pe=0,me=fe.length);pe<me;pe++)he=fe[pe],Q(ge,he,ce);return ge.sort(ce).reverse()},ae=function(de,ue,ce){var he,ge,pe,me,fe,xe,be,ye,ke,_e;if(null==ce&&(ce=O),10*ue<=de.length){if(me=de.slice(0,ue).sort(ce),!me.length)return me;for(pe=me[me.length-1],ye=de.slice(ue),(fe=0,be=ye.length);fe<be;fe++)he=ye[fe],0>ce(he,pe)&&(ee(me,he,0,null,ce),me.pop(),pe=me[me.length-1]);return me}for(Z(de,ce),_e=[],(ge=xe=0,ke=te(ue,de.length));0<=ke?xe<ke:xe>ke;ge=0<=ke?++xe:--xe)_e.push(W(de,ce));return _e},oe=function(de,ue,ce,he){var ge,pe,me;for(null==he&&(he=O),ge=de[ce];ce>ue;){if(me=ce-1>>1,pe=de[me],0>he(ge,pe)){de[ce]=pe,ce=me;continue}break}return de[ce]=ge},le=function(de,ue,ce){var he,ge,pe,me,fe;for(null==ce&&(ce=O),ge=de.length,fe=ue,pe=de[ue],he=2*ue+1;he<ge;)me=he+1,me<ge&&!(0>ce(de[he],de[me]))&&(he=me),de[ue]=de[he],ue=he,he=2*ue+1;return de[ue]=pe,oe(de,fe,ue,ce)},T=function(){function de(ue){this.cmp=null==ue?O:ue,this.nodes=[]}return de.push=K,de.pop=W,de.replace=G,de.pushpop=Q,de.heapify=Z,de.updateItem=se,de.nlargest=ne,de.nsmallest=ae,de.prototype.push=function(ue){return K(this.nodes,ue,this.cmp)},de.prototype.pop=function(){return W(this.nodes,this.cmp)},de.prototype.peek=function(){return this.nodes[0]},de.prototype.contains=function(ue){return-1!==this.nodes.indexOf(ue)},de.prototype.replace=function(ue){return G(this.nodes,ue,this.cmp)},de.prototype.pushpop=function(ue){return Q(this.nodes,ue,this.cmp)},de.prototype.heapify=function(){return Z(this.nodes,this.cmp)},de.prototype.updateItem=function(ue){return se(this.nodes,ue,this.cmp)},de.prototype.clear=function(){return this.nodes=[]},de.prototype.empty=function(){return 0===this.nodes.length},de.prototype.size=function(){return this.nodes.length},de.prototype.clone=function(){var ue;return ue=new de,ue.nodes=this.nodes.slice(0),ue},de.prototype.toArray=function(){return this.nodes.slice(0)},de.prototype.insert=de.prototype.push,de.prototype.top=de.prototype.peek,de.prototype.front=de.prototype.peek,de.prototype.has=de.prototype.contains,de.prototype.copy=de.prototype.clone,de}(),function(de,ue){return P=[],R=ue,F='function'==typeof R?R.apply(E,P):R,!(void 0!==F&&(D.exports=F))}(this,function(){return T})}).call(this)},function(D,E){E.read=function(I,R,P,F,T){var O,$,Z=8*T-F-1,W=(1<<Z)-1,K=W>>1,Q=-7,G=P?T-1:0,ee=P?-1:1,te=I[R+G];for(G+=ee,O=te&(1<<-Q)-1,te>>=-Q,Q+=Z;0<Q;O=256*O+I[R+G],G+=ee,Q-=8);for($=O&(1<<-Q)-1,O>>=-Q,Q+=F;0<Q;$=256*$+I[R+G],G+=ee,Q-=8);if(0===O)O=1-K;else{if(O===W)return $?NaN:(te?-1:1)*Infinity;$+=_Mathpow(2,F),O-=K}return(te?-1:1)*$*_Mathpow(2,O-F)},E.write=function(I,R,P,F,T,O){var $,Z,W,K=8*O-T-1,Q=(1<<K)-1,G=Q>>1,ee=23===T?5.960464477539063e-8-6.617444900424222e-24:0,te=F?0:O-1,ne=F?1:-1,ae=0>R||0===R&&0>1/R?1:0;for(R=_Mathabs(R),isNaN(R)||R===Infinity?(Z=isNaN(R)?1:0,$=Q):($=_Mathfloor(_Mathlog(R)/Math.LN2),1>R*(W=_Mathpow(2,-$))&&($--,W*=2),R+=1<=$+G?ee/W:ee*_Mathpow(2,1-G),2<=R*W&&($++,W/=2),$+G>=Q?(Z=0,$=Q):1<=$+G?(Z=(R*W-1)*_Mathpow(2,T),$+=G):(Z=R*_Mathpow(2,G-1)*_Mathpow(2,T),$=0));8<=T;I[P+te]=255&Z,te+=ne,Z/=256,T-=8);for($=$<<T|Z,K+=T;0<K;I[P+te]=255&$,te+=ne,$/=256,K-=8);I[P+te-ne]|=128*ae}},function(D){'use strict';const R=8192,P=[];D.exports=class{constructor(T,O){O=O||{},T===void 0&&(T=R),'number'==typeof T&&(T=new ArrayBuffer(T));let $=T.byteLength;const Z=O.offset?O.offset>>>0:0;T.buffer&&($=T.byteLength-Z,T=T.byteLength===T.buffer.byteLength?Z?T.buffer.slice(Z):T.buffer:T.buffer.slice(T.byteOffset+Z,T.byteOffset+T.byteLength)),this.buffer=T,this.length=$,this.byteLength=$,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=$||R,this._mark=0}available(T){return void 0===T&&(T=1),this.offset+T<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(T){T===void 0&&(T=1),this.offset+=T}seek(T){this.offset=T}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(T){if(void 0===T&&(T=1),!this.available(T)){const O=this._increment+this._increment;this._increment=O;const $=this.length+O,Z=new Uint8Array($);Z.set(new Uint8Array(this.buffer)),this.buffer=Z.buffer,this.length=$,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(T){T===void 0&&(T=1);for(var O=new Uint8Array(T),$=0;$<T;$++)O[$]=this.readByte();return O}readInt16(){var T=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,T}readUint16(){var T=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,T}readInt32(){var T=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,T}readUint32(){var T=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,T}readFloat32(){var T=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,T}readFloat64(){var T=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,T}readChar(){return _StringfromCharCode(this.readInt8())}readChars(T){T===void 0&&(T=1),P.length=T;for(var O=0;O<T;O++)P[O]=this.readChar();return P.join('')}writeBoolean(T){this.writeUint8(T?255:0)}writeInt8(T){this.ensureAvailable(1),this._data.setInt8(this.offset++,T)}writeUint8(T){this.ensureAvailable(1),this._data.setUint8(this.offset++,T)}writeByte(T){this.writeUint8(T)}writeBytes(T){this.ensureAvailable(T.length);for(var O=0;O<T.length;O++)this._data.setUint8(this.offset++,T[O])}writeInt16(T){this.ensureAvailable(2),this._data.setInt16(this.offset,T,this.littleEndian),this.offset+=2}writeUint16(T){this.ensureAvailable(2),this._data.setUint16(this.offset,T,this.littleEndian),this.offset+=2}writeInt32(T){this.ensureAvailable(4),this._data.setInt32(this.offset,T,this.littleEndian),this.offset+=4}writeUint32(T){this.ensureAvailable(4),this._data.setUint32(this.offset,T,this.littleEndian),this.offset+=4}writeFloat32(T){this.ensureAvailable(4),this._data.setFloat32(this.offset,T,this.littleEndian),this.offset+=4}writeFloat64(T){this.ensureAvailable(8),this._data.setFloat64(this.offset,T,this.littleEndian),this.offset+=8}writeChar(T){this.writeUint8(T.charCodeAt(0))}writeChars(T){for(var O=0;O<T.length;O++)this.writeUint8(T.charCodeAt(O))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},function(D){var I={}.toString;D.exports=Array.isArray||function(R){return'[object Array]'==I.call(R)}},function(D){'use strict';var R=/[,\t \+-]*(?=[^\d,\t \.])|[ \t]+(?=[\d+\.-])/,P=/\$\$.*/;D.exports=function(T,O){T.deltaX||(T.deltaX=(T.lastX-T.firstX)/(T.nbPoints-1)),T.isXYdata=!0;var Z=[],W=0;T.data=[Z];var K=T.firstX,Q=T.firstY,G=O.split(/[\r\n]+/),ee,te,ne;te=[];for(var se=1,oe=G.length;se<oe;se++)if(te=G[se].trim().replace(P,'').split(R),0<te.length)for(var de=1,ue=te.length;de<ue;de++)if(1===de&&(ee||0===ee))ee=null,ne=te[de].charCodeAt(0),!1;else if(0<te[de].length)if(ne=te[de].charCodeAt(0),43===ne||45===ne||46===ne||47<ne&&58>ne)ee=null,Q=+te[de],Z[W++]=K,Z[W++]=Q*T.yFactor,K+=T.deltaX;else if(63<ne&&74>ne)ee=null,Q=+(_StringfromCharCode(ne-16)+te[de].substring(1)),Z[W++]=K,Z[W++]=Q*T.yFactor,K+=T.deltaX;else if(96<ne&&106>ne)ee=null,Q=1*-(_StringfromCharCode(ne-48)+te[de].substring(1)),Z[W++]=K,Z[W++]=Q*T.yFactor,K+=T.deltaX;else if(82<ne&&91>ne||115===ne){var ce=_StringfromCharCode(ne-34)+te[de].substring(1)-1;115===ne&&(ce='9'+te[de].substring(1)-1);for(var he=0;he<ce;he++)ee&&(Q+=ee),Z[W++]=K,Z[W++]=Q*T.yFactor,K+=T.deltaX}else 37===ne?(ee=+('0'+te[de].substring(1)),Q+=ee,Z[W++]=K,Z[W++]=Q*T.yFactor,K+=T.deltaX):73<ne&&83>ne?(ee=1*(_StringfromCharCode(ne-25)+te[de].substring(1)),Q+=ee,Z[W++]=K,Z[W++]=Q*T.yFactor,K+=T.deltaX):105<ne&&115>ne&&(ee=1*-(_StringfromCharCode(ne-57)+te[de].substring(1)),Q+=ee,Z[W++]=K,Z[W++]=Q*T.yFactor,K+=T.deltaX)}},function(D,E,I){'use strict';var R=I(0),P=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];D.exports=function(T,O){if('undefined'==typeof T||!T.length)return 0;var $='string'!==R.getTypeOf(T);'undefined'==typeof O&&(O=0);var Z=0,W=0,K=0;O^=-1;for(var Q=0,G=T.length;Q<G;Q++)K=$?T[Q]:T.charCodeAt(Q),W=255&(O^K),Z=P[W],O=O>>>8^Z;return-1^O}},function(D,E,I){'use strict';var R=I(0);E.string2binary=function(P){return R.string2binary(P)},E.string2Uint8Array=function(P){return R.transformTo('uint8array',P)},E.uint8Array2String=function(P){return R.transformTo('string',P)},E.string2Blob=function(P){var F=R.transformTo('arraybuffer',P);return R.arrayBuffer2Blob(F)},E.arrayBuffer2Blob=function(P){return R.arrayBuffer2Blob(P)},E.transformTo=function(P,F){return R.transformTo(P,F)},E.getTypeOf=function(P){return R.getTypeOf(P)},E.checkSupport=function(P){return R.checkSupport(P)},E.MAX_VALUE_16BITS=R.MAX_VALUE_16BITS,E.MAX_VALUE_32BITS=R.MAX_VALUE_32BITS,E.pretty=function(P){return R.pretty(P)},E.findCompression=function(P){return R.findCompression(P)},E.isRegExp=function(P){return R.isRegExp(P)}},function(D,E,I){'use strict';var R='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Uint32Array,P=I(143);E.uncompressInputType=R?'uint8array':'array',E.compressInputType=R?'uint8array':'array',E.magic='\b\0',E.compress=function(F,T){return P.deflateRaw(F,{level:T.level||-1})},E.uncompress=function(F){return P.inflateRaw(F)}},function(D,E,I){'use strict';function R(F,T){return this instanceof R?void(this.files={},this.comment=null,this.root='',F&&this.load(F,T),this.clone=function(){var O=new R;for(var $ in this)'function'!=typeof this[$]&&(O[$]=this[$]);return O}):new R(F,T)}var P=I(10);R.prototype=I(13),R.prototype.load=I(88),R.support=I(5),R.defaults=I(32),R.utils=I(85),R.base64={encode:function(F){return P.encode(F)},decode:function(F){return P.decode(F)}},R.compressions=I(11),D.exports=R},function(D,E,I){'use strict';var R=I(10),P=I(36),F=I(0),T=I(92);D.exports=function(O,$){var Z,W,K,Q;for($=F.extend($||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:P.utf8decode}),$.base64&&(O=R.decode(O)),W=new T(O,$),Z=W.files,K=0;K<Z.length;K++)Q=Z[K],this.file(Q.fileNameStr,Q.decompressed,{binary:!0,optimizedBinaryString:!0,date:Q.date,dir:Q.dir,comment:Q.fileCommentStr.length?Q.fileCommentStr:null,unixPermissions:Q.unixPermissions,dosPermissions:Q.dosPermissions,createFolders:$.createFolders});return W.zipComment.length&&(this.comment=W.zipComment),this}},function(D,E,I){'use strict';function R(F){this.data=F,this.length=this.data.length,this.index=0,this.zero=0}var P=I(35);R.prototype=new P,R.prototype.readData=function(F){this.checkOffset(F);var T=this.data.slice(this.zero+this.index,this.zero+this.index+F);return this.index+=F,T},D.exports=R},function(D,E,I){'use strict';var R=I(0),P=function(){this.data=[]};P.prototype={append:function(F){F=R.transformTo('string',F),this.data.push(F)},finalize:function(){return this.data.join('')}},D.exports=P},function(D,E,I){'use strict';var R=I(0),P=function(F){this.data=new Uint8Array(F),this.index=0};P.prototype={append:function(F){0!==F.length&&(F=R.transformTo('uint8array',F),this.data.set(F,this.index),this.index+=F.length)},finalize:function(){return this.data}},D.exports=P},function(D,E,I){'use strict';function R(G,ee){this.files=[],this.loadOptions=ee,G&&this.load(G)}var P=I(34),F=I(89),T=I(35),O=I(29),$=I(0),Z=I(33),W=I(93),K=I(5),Q=I(13);R.prototype={checkSignature:function(G){var ee=this.reader.readString(4);if(ee!==G)throw new Error('Corrupted zip or bug : unexpected signature ('+$.pretty(ee)+', expected '+$.pretty(G)+')')},isSignature:function(G,ee){var te=this.reader.index;this.reader.setIndex(G);var ne=this.reader.readString(4);return this.reader.setIndex(te),ne===ee},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var G=this.reader.readData(this.zipCommentLength),ee=K.uint8array?'uint8array':'array',te=$.transformTo(ee,G);this.zipComment=this.loadOptions.decodeFileName(te)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var G=this.zip64EndOfCentralSize-44,te,ne,ae;0<G;)te=this.reader.readInt(2),ne=this.reader.readInt(4),ae=this.reader.readString(ne),this.zip64ExtensibleData[te]={id:te,length:ne,value:ae}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error('Multi-volumes zip are not supported')},readLocalFiles:function(){var G,ee;for(G=0;G<this.files.length;G++)ee=this.files[G],this.reader.setIndex(ee.localHeaderOffset),this.checkSignature(Z.LOCAL_FILE_HEADER),ee.readLocalPart(this.reader),ee.handleUTF8(),ee.processAttributes()},readCentralDir:function(){var G;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===Z.CENTRAL_FILE_HEADER;)G=new W({zip64:this.zip64},this.loadOptions),G.readCentralPart(this.reader),this.files.push(G);if(this.centralDirRecords!==this.files.length)if(0!==this.centralDirRecords&&0===this.files.length)throw new Error('Corrupted zip or bug: expected '+this.centralDirRecords+' records in central dir, got '+this.files.length);else;},readEndOfCentral:function(){var G=this.reader.lastIndexOfSignature(Z.CENTRAL_DIRECTORY_END);if(0>G){var ee=!this.isSignature(0,Z.LOCAL_FILE_HEADER);if(ee)throw new Error('Can\\\'t find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html');else throw new Error('Corrupted zip : can\'t find end of central directory')}this.reader.setIndex(G);var te=G;if(this.checkSignature(Z.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===$.MAX_VALUE_16BITS||this.diskWithCentralDirStart===$.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===$.MAX_VALUE_16BITS||this.centralDirRecords===$.MAX_VALUE_16BITS||this.centralDirSize===$.MAX_VALUE_32BITS||this.centralDirOffset===$.MAX_VALUE_32BITS){if(this.zip64=!0,G=this.reader.lastIndexOfSignature(Z.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>G)throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory locator');if(this.reader.setIndex(G),this.checkSignature(Z.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,Z.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(Z.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory');this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(Z.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var ne=this.centralDirOffset+this.centralDirSize;this.zip64&&(ne+=20,ne+=12+this.zip64EndOfCentralSize);var ae=te-ne;if(0<ae)this.isSignature(te,Z.CENTRAL_FILE_HEADER)||(this.reader.zero=ae);else if(0>ae)throw new Error('Corrupted zip: missing '+_Mathabs(ae)+' bytes.')},prepareReader:function(G){var ee=$.getTypeOf(G);if($.checkSupport(ee),'string'===ee&&!K.uint8array)this.reader=new P(G,this.loadOptions.optimizedBinaryString);else if('nodebuffer'===ee)this.reader=new F(G);else if(K.uint8array)this.reader=new T($.transformTo('uint8array',G));else if(K.array)this.reader=new O($.transformTo('array',G));else throw new Error('Unexpected error: unsupported type \''+ee+'\'')},load:function(G){this.prepareReader(G),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},D.exports=R},function(D,E,I){'use strict';function R(K,Q){this.options=K,this.loadOptions=Q}var P=I(34),F=I(0),T=I(30),O=I(13),$=I(5);R.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(K,Q,G){return function(){var ee=K.index;K.setIndex(Q);var te=K.readData(G);return K.setIndex(ee),te}},prepareContent:function(K,Q,G,ee,te){return function(){var ne=F.transformTo(ee.uncompressInputType,this.getCompressedContent()),ae=ee.uncompress(ne);if(ae.length!==te)throw new Error('Bug : uncompressed data size mismatch');return ae}},readLocalPart:function(K){var Q,G;if(K.skip(22),this.fileNameLength=K.readInt(2),G=K.readInt(2),this.fileName=K.readData(this.fileNameLength),K.skip(G),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error('Bug or corrupted zip : didn\\\'t get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)');if(Q=F.findCompression(this.compressionMethod),null===Q)throw new Error('Corrupted zip : compression '+F.pretty(this.compressionMethod)+' unknown (inner file : '+F.transformTo('string',this.fileName)+')');if(this.decompressed=new T,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(K,K.index,this.compressedSize,Q),this.decompressed.getContent=this.prepareContent(K,K.index,this.compressedSize,Q,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=F.transformTo('string',this.decompressed.getContent()),O.crc32(this.decompressed)!==this.crc32))throw new Error('Corrupted zip : CRC32 mismatch')},readCentralPart:function(K){if(this.versionMadeBy=K.readInt(2),this.versionNeeded=K.readInt(2),this.bitFlag=K.readInt(2),this.compressionMethod=K.readString(2),this.date=K.readDate(),this.crc32=K.readInt(4),this.compressedSize=K.readInt(4),this.uncompressedSize=K.readInt(4),this.fileNameLength=K.readInt(2),this.extraFieldsLength=K.readInt(2),this.fileCommentLength=K.readInt(2),this.diskNumberStart=K.readInt(2),this.internalFileAttributes=K.readInt(2),this.externalFileAttributes=K.readInt(4),this.localHeaderOffset=K.readInt(4),this.isEncrypted())throw new Error('Encrypted zip are not supported');this.fileName=K.readData(this.fileNameLength),this.readExtraFields(K),this.parseZIP64ExtraField(K),this.fileComment=K.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var K=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),K==0&&(this.dosPermissions=63&this.externalFileAttributes),K==3&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||'/'!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var Q=new P(this.extraFields[1].value);this.uncompressedSize===F.MAX_VALUE_32BITS&&(this.uncompressedSize=Q.readInt(8)),this.compressedSize===F.MAX_VALUE_32BITS&&(this.compressedSize=Q.readInt(8)),this.localHeaderOffset===F.MAX_VALUE_32BITS&&(this.localHeaderOffset=Q.readInt(8)),this.diskNumberStart===F.MAX_VALUE_32BITS&&(this.diskNumberStart=Q.readInt(4))}},readExtraFields:function(K){var Q=K.index,G,ee,te;for(this.extraFields=this.extraFields||{};K.index<Q+this.extraFieldsLength;)G=K.readInt(2),ee=K.readInt(2),te=K.readString(ee),this.extraFields[G]={id:G,length:ee,value:te}},handleUTF8:function(){var K=$.uint8array?'uint8array':'array';if(this.useUTF8())this.fileNameStr=O.utf8decode(this.fileName),this.fileCommentStr=O.utf8decode(this.fileComment);else{var Q=this.findExtraFieldUnicodePath();if(null!==Q)this.fileNameStr=Q;else{var G=F.transformTo(K,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(G)}var ee=this.findExtraFieldUnicodeComment();if(null!==ee)this.fileCommentStr=ee;else{var te=F.transformTo(K,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(te)}}},findExtraFieldUnicodePath:function(){var K=this.extraFields[28789];if(K){var Q=new P(K.value);return 1===Q.readInt(1)?O.crc32(this.fileName)===Q.readInt(4)?O.utf8decode(Q.readString(K.length-5)):null:null}return null},findExtraFieldUnicodeComment:function(){var K=this.extraFields[25461];if(K){var Q=new P(K.value);return 1===Q.readInt(1)?O.crc32(this.fileComment)===Q.readInt(4)?O.utf8decode(Q.readString(K.length-5)):null:null}return null}},D.exports=R},function(D,E,I){'use strict';function T(K){for(var Q=Array(K[0].length),G=0;G<Q.length;++G)Q[G]=Array(K.length);for(G=0;G<K.length;++G)for(var ee=0;ee<K[0].length;++ee)Q[ee][G]=K[G][ee];return Q}const W=I(6).array;D.exports={coordArrayToPoints:function(K,Q){if(0!=K.length%Q)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var G=K.length/Q,ee=Array(G),te=0,ne=0,ae;ne<K.length;ne+=Q){ae=Array(Q);for(var se=0;se<Q;++se)ae[se]=K[ne+se];ee[te]=ae,te++}return ee},coordArrayToCoordMatrix:function(K,Q){if(0!=K.length%Q)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var G=Array(Q),ee=K.length/Q,te=0;te<G.length;te++)G[te]=Array(ee);for(te=0;te<K.length;te+=Q)for(var ne=0,ae;ne<Q;++ne)ae=_Mathfloor(te/Q),G[ne][ae]=K[te+ne];return G},coordMatrixToCoordArray:function(K){for(var Q=Array(K.length*K[0].length),G=0,ee=0;ee<K[0].length;++ee)for(var te=0;te<K.length;++te)Q[G]=K[te][ee],++G;return Q},coordMatrixToPoints:T,pointsToCoordArray:function(K){for(var Q=Array(K.length*K[0].length),G=0,ee=0;ee<K.length;++ee)for(var te=0;te<K[0].length;++te)Q[G]=K[ee][te],++G;return Q},pointsToCoordMatrix:T,applyDotProduct:function(K,Q){var G,ee;K.length<=Q.length?(ee=K,G=Q):(ee=Q,G=K);for(var te=G.length-ee.length+1,ne=Array(te),ae=0,se;ae<te;++ae){se=0;for(var oe=0;oe<ee.length;++oe)se+=ee[oe]*G[ae+oe];ne[ae]=se}return ne},scale:function(K,Q){var G=Q.inPlace?K:Array(K.length);const ee=Q.max,te=Q.min;if('number'==typeof ee){if('number'==typeof te)for(var ne=W.minMax(K),ae=(ee-te)/(ne.max-ne.min),se=0;se<G.length;se++)G[se]=(K[se]-ne.min)*ae+te;else for(var oe=W.max(K),ae=ee/oe,se=0;se<G.length;se++)G[se]=K[se]*ae;}else if('number'==typeof te)for(var oe=W.min(K),ae=te/oe,se=0;se<G.length;se++)G[se]=K[se]*ae;return G}}},function(D,E){'use strict';function P(O,$,Z,W,K){function Q(we,je,ve,Se){return(Se-je)/(ve-we)}var G=O.length,ee=(W-Z)/(K-1),ne=Z-ee/2,ae=Array(K),se=O[1]-O[0],oe=O[O.length-1]-O[O.length-2],le=ne,de=ne+ee,ue=_NumberMIN_VALUE,ce=0,he=O[0]-se,ge=0,pe=0,me=0,fe=0,xe=0,be=0,ye=0,ke=0;main:for(;;){for(;0<=he-de;){var _e=T(0,de-ue,me,ce);if(be=pe+_e,ae[ke]=(be-xe)/ee,ke++,ke===K)break main;le=de,de+=ee,xe=be}ue<=le&&le<=he&&(_e=T(0,le-ue,me,ce),xe=pe+_e),pe+=T(ue,he,me,fe),ue=he,ce=ge,ye<G?(he=O[ye],ge=$[ye],ye++):ye===G&&(he+=oe,ge=0),me=Q(ue,ce,he,ge),fe=-me*ue+ce}return ae}function F(O,$,Z,W,K){var Q=O.length,G=(W-Z)/(K-1),te=O[O.length-1]-O[O.length-2],ne=Z-G/2,ae=Array(K),se=ne,oe=ne+G,le=-_NumberMAX_VALUE,de=0,ue=O[0],ce=$[0],he=0,ge=!0,pe=0,me=0,fe=1,xe=0;main:for(;;){if(le>=ue)throw new Error('x must be an increasing serie');for(;0<le-oe;){if(ge&&(me++,ge=!1),ae[xe]=0>=me?0:pe/me,xe++,xe===K)break main;se=oe,oe+=G,pe=0,me=0}le>se&&(pe+=de,me++),(le==-_NumberMAX_VALUE||1<he)&&me--,le=ue,de=ce,fe<Q?(ue=O[fe],ce=$[fe],fe++):(ue+=te,ce=0,he++)}return ae}function T(O,$,Z,W){return 0.5*Z*$*$+W*$-(0.5*Z*O*O+W*O)}E.getEquallySpacedData=function(O,$,Z){1<O.length&&O[0]>O[1]&&(O=O.slice().reverse(),$=$.slice().reverse());var W=O.length;if(W!==$.length)throw new RangeError('the x and y vector doesn\'t have the same size.');Z===void 0&&(Z={});var K=Z.from===void 0?O[0]:Z.from;if(isNaN(K)||!isFinite(K))throw new RangeError('\'From\' value must be a number');var Q=Z.to===void 0?O[O.length-1]:Z.to;if(isNaN(Q)||!isFinite(Q))throw new RangeError('\'To\' value must be a number');var G=K>Q;if(G){var ee=K;K=Q,Q=ee}var te=Z.numberOfPoints===void 0?100:Z.numberOfPoints;if(isNaN(te)||!isFinite(te))throw new RangeError('\'Number of points\' value must be a number');if(1>te)throw new RangeError('the number of point must be higher than 1');var ne='slot'===Z.variant?'slot':'smooth',ae='slot'==ne?F(O,$,K,Q,te):P(O,$,K,Q,te);return G?ae.reverse():ae},E.integral=T},function(D,E,I){'use strict';E.SNV=function(F){for(var T=P.mean(F),O=P.standardDeviation(F),$=F.slice(),Z=0;Z<F.length;Z++)$[Z]=($[Z]-T)/O;return $};var P=I(6).array},function(D){'use strict';function R(F){this.value=F,this.parent=null,this.rank=0}D.exports=class{constructor(){this.nodes=new Map}add(F){var T=this.nodes.get(F);return T||(T=new R(F),this.nodes.set(F,T)),T}union(F,T){const O=this.find(F),$=this.find(T);O===$||(O.rank<$.rank?O.parent=$:O.rank>$.rank?$.parent=O:($.parent=O,O.rank++))}find(F){for(var T=F;null!==T.parent;)T=T.parent;for(var O=F,$;null!==O.parent;)$=O,O=O.parent,$.parent=T;return T}connected(F,T){return this.find(F)===this.find(T)}}},function(D){'use strict';D.exports=function(P,F){const T=P.length;let O=Array.from({length:T}).map(()=>Array.from({length:T}));for(let $=0;$<T;$++)for(let Z=0;Z<=$;Z++)O[$][Z]=F(P[$],P[Z]);for(let $=0;$<T;$++)for(let Z=$+1;Z<T;Z++)O[$][Z]=O[Z][$];return O}},function(D,E,I){'use strict';var R=I(39);D.exports={DEBUG:!1,ifft2DArray:function(F,T,O){var $=Array(T*O),Z=T/2,W=2*(O-1);R.init(Z);for(var K={re:Array(Z),im:Array(Z)},Q=0;Q<O;Q++){for(var G=Z-1;0<=G;G--)K.re[G]=F[2*G*O+Q],K.im[G]=F[(2*G+1)*O+Q];R.bt(K.re,K.im);for(var G=Z-1;0<=G;G--)$[2*G*O+Q]=K.re[G],$[(2*G+1)*O+Q]=K.im[G]}var ee=Array(Z*W);R.init(W);for(var te={re:Array(W),im:Array(W)},G=0;G<T;G+=2){te.re[0]=$[G*O],te.im[0]=$[(G+1)*O];for(var Q=1;Q<O;Q++)te.re[Q]=$[G*O+Q],te.im[Q]=$[(G+1)*O+Q],te.re[W-Q]=$[G*O+Q],te.im[W-Q]=-$[(G+1)*O+Q];R.bt(te.re,te.im);for(var ae=G/2*W,Q=W-1;0<=Q;Q--)ee[ae+Q]=te.re[Q]/(W*Z)}return ee},fft2DArray:function(F,T,O){var Z=Object.assign({},{inplace:!0}),W=O/2+1,K=2*T,Q=Array(K*W);R.init(O);for(var G={re:Array(O),im:Array(O)},ee={re:Array(O),im:Array(O)},te={re:Array(O),im:Array(O)},de=0,ne,ae,se,oe,le;de<T/2;de++){ne=2*de*O,G.re=F.slice(ne,ne+O),ne=(2*de+1)*O,G.im=F.slice(ne,ne+O),R.fft1d(G.re,G.im),this.reconstructTwoRealFFT(G,ee,te),ae=4*de*W,se=(4*de+1)*W,oe=(4*de+2)*W,le=(4*de+3)*W;for(var ue=W-1;0<=ue;ue--)Q[ae+ue]=ee.re[ue],Q[se+ue]=ee.im[ue],Q[oe+ue]=te.re[ue],Q[le+ue]=te.im[ue]}ee=null,te=null;var ce=Array(K*W);R.init(T);for(var he={re:Array(T),im:Array(T)},ge=W-1;0<=ge;ge--){for(var de=T-1;0<=de;de--)he.re[de]=Q[2*de*W+ge],he.im[de]=Q[(2*de+1)*W+ge],isNaN(he.re[de])&&(he.re[de]=0),isNaN(he.im[de])&&(he.im[de]=0);R.fft1d(he.re,he.im);for(var de=T-1;0<=de;de--)ce[2*de*W+ge]=he.re[de],ce[(2*de+1)*W+ge]=he.im[de]}return ce},reconstructTwoRealFFT:function(F,T,O){var $=F.re.length;T.re[0]=F.re[0],T.im[0]=0,O.re[0]=F.im[0],O.im[0]=0;for(var ee=$/2,Z,W,K,Q,G;0<ee;ee--)G=$-ee,Z=0.5*(F.re[ee]-F.re[G]),W=0.5*(F.re[ee]+F.re[G]),K=0.5*(F.im[ee]-F.im[G]),Q=0.5*(F.im[ee]+F.im[G]),T.re[ee]=W,T.im[ee]=K,T.re[G]=W,T.im[G]=-K,O.re[ee]=Q,O.im[ee]=-Z,O.re[G]=Q,O.im[G]=Z},convolute2DI:function(F,T,O,$){for(var K=0,Z,W;K<O/2;K++)for(var Q=0;Q<$;Q++)Z=F[2*K*$+Q]*T[2*K*$+Q]-F[(2*K+1)*$+Q]*T[(2*K+1)*$+Q],W=F[2*K*$+Q]*T[(2*K+1)*$+Q]+F[(2*K+1)*$+Q]*T[2*K*$+Q],F[2*K*$+Q]=Z,F[(2*K+1)*$+Q]=W},convolute:function(F,T,O,$){for(var W=Array($*O),K=0;K<O*$;K++)W[K]=F[K];W=this.fft2DArray(W,O,$);for(var Q=T.length,G=T[0].length,ee=Array($*O),K=0;K<$*O;K++)ee[K]=0;for(var ae=_Mathfloor((Q-1)/2),se=_Mathfloor((G-1)/2),oe=0,te,ne;oe<Q;oe++){te=(oe-ae+O)%O;for(var le=0;le<G;le++)ne=(le-se+$)%$,ee[te*$+ne]=T[oe][le]}ee=this.fft2DArray(ee,O,$);var de=2*O,ue=$/2+1;return this.convolute2DI(W,ee,de,ue),this.ifft2DArray(W,de,ue)},toRadix2:function(F,T,O){var $,Z,W,K,Q=O,G=T,ee=0,te=0;if(0===O||0!=(O&O-1)){for(Q=0;0!=O>>++Q;);Q=1<<Q,te=Q-O}if(0===T||0!=(T&T-1)){for(G=0;0!=T>>++G;);G=1<<G,ee=(G-T)*Q}if(G==T&&Q==O)return{data:F,rows:T,cols:O};var ne=Array(G*Q),ae=_Mathfloor((G-T)/2)-T,se=_Mathfloor((Q-O)/2)-O;for($=0;$<G;$++)for(W=$*Q,K=($-ae)%T*O,Z=0;Z<Q;Z++)ne[W+Z]=F[K+(Z-se)%O];return{data:ne,rows:G,cols:Q}},crop:function(F,T,O,$,Z,W){if(T==$&&O==Z)return F;var K=Object.assign({},W),Q=Array(Z*$),G=_Mathfloor((T-$)/2),ee=_Mathfloor((O-Z)/2),te,ne,ae,se;for(ae=0;ae<$;ae++)for(te=ae*Z,ne=(ae+G)*O,se=0;se<Z;se++)Q[te+se]=F[ne+(se+ee)];return Q}}},function(D,E,I){'use strict';function P(Z){var W=0,K=0,Q=Z.length;for(let ee=0;ee<Q;++ee)W+=Z[ee];W/=Q;var G=Array(Q);for(let ee=0;ee<Q;++ee)G[ee]=_Mathabs(Z[ee]-W);return G.sort(),K=1==Q%2?G[(Q-1)/2]/0.6745:0.5*(G[Q/2]+G[Q/2-1])/0.6745,K}function F(Z,W,K){for(var ae=0,Q,G,ee,te,ne;ae<Z.length;ae++)ne=Z[ae].i,K[ne-1]>=K[ne-2]&&K[ne-1]>=K[ne]?ne--:K[ne+1]>=K[ne]&&K[ne+1]>=K[ne+2]?ne++:K[ne-2]>=K[ne-3]&&K[ne-2]>=K[ne-1]?ne-=2:K[ne+2]>=K[ne+1]&&K[ne+2]>=K[ne+3]&&(ne+=2),0<K[ne-1]&&0<K[ne+1]&&K[ne]>=K[ne-1]&&K[ne]>=K[ne+1]&&(Q=20*_Mathlog2(K[ne-1]),G=20*_Mathlog2(K[ne]),ee=20*_Mathlog2(K[ne+1]),te=0.5*(Q-ee)/(Q-2*G+ee),Z[ae].x=W[ne]+(W[ne]-W[ne-1])*te,Z[ae].y=K[ne]-0.25*(K[ne-1]-K[ne+1])*te)}const T=I(27),O=I(136),$={sgOptions:{windowSize:9,polynomial:3},minMaxRatio:2.5e-4,broadRatio:0,maxCriteria:!0,smoothY:!0,realTopDetection:!1,heightFactor:0,boundaries:!1,derivativeThreshold:-1};D.exports=function(Z,W,K){K=T({},$,K);let Q=K.sgOptions;const G=[].concat(W);if(!('noiseLevel'in K)){var ee=0,te=_NumberMAX_VALUE,ne;for(let Re=0;Re<Z.length-1;++Re)ne=_Mathabs(Z[Re+1]-Z[Re]),ne<te&&(te=ne),ne>ee&&(ee=ne);K.noiseLevel=0.05>(ee-te)/ee?P(G):0}const ae={m:1,b:K.noiseLevel};K.maxCriteria||(ae.m=-1,ae.b*=-1);for(let Re=0;Re<G.length;Re++)G[Re]=ae.m*G[Re]-ae.b;for(let Re=0;Re<G.length;Re++)0>G[Re]&&(G[Re]=0);let se=G,oe,le;0.05>(ee-te)/ee?(K.smoothY&&(se=O(G,Z[1]-Z[0],{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:0})),oe=O(G,Z[1]-Z[0],{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:1}),le=O(G,Z[1]-Z[0],{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:2})):(K.smoothY&&(se=O(G,Z,{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:0})),oe=O(G,Z,{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:1}),le=O(G,Z,{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:2}));const de=Z,ue=Z[1]-Z[0];var ce=0,he=0;for(let Re=0;Re<se.length;Re++)_Mathabs(le[Re])>ce&&(ce=_Mathabs(le[Re])),_Mathabs(se[Re])>he&&(he=_Mathabs(se[Re]));var ge=null,pe=null,me=Array(se.length-2),fe=Array(se.length),xe=Array(se.length),be=Array(se.length-2),ye=0,ke=0,_e=0,we=0;for(let Re=1;Re<se.length-1;++Re)_Mathabs(oe[Re])>K.derivativeThreshold&&((oe[Re]<oe[Re-1]&&oe[Re]<=oe[Re+1]||oe[Re]<=oe[Re-1]&&oe[Re]<oe[Re+1])&&(pe={x:de[Re],index:Re},0<ue&&null!=ge&&(fe[ke++]=ge,xe[_e++]=pe)),(oe[Re]>=oe[Re-1]&&oe[Re]>oe[Re+1]||oe[Re]>oe[Re-1]&&oe[Re]>=oe[Re+1])&&(ge={x:de[Re],index:Re},0>ue&&null!==pe&&(fe[ke++]=ge,xe[_e++]=pe))),le[Re]<le[Re-1]&&le[Re]<le[Re+1]&&(me[ye++]=Re,be[we++]=_Mathabs(le[Re])<=K.broadRatio*ce);me.length=ye,fe.length=ke,xe.length=_e,be.length=we;let je=Array(me.length),ve=0,Se=-1,De,Ce,Ee,Ie,Ae;for(let Re=0;Re<me.length;++Re){Ce=de[me[Re]],De=-1;let Pe=Se+1;for(Ie=_NumberMAX_VALUE,Ee=0,Ae=!0;-1===De&&Pe<fe.length&&Ae;)Ee=_Mathabs(Ce-(fe[Pe].x+xe[Pe].x)/2),Ee<Ie?Ie=Ee:Ae=!1,Ee<_Mathabs(fe[Pe].x-xe[Pe].x)/2&&(De=Pe,Se=Pe),++Pe;if(-1!==De&&_Mathabs(se[me[Re]])>K.minMaxRatio*he&&(je[ve++]={index:me[Re],x:Ce,y:(se[me[Re]]+ae.b)/ae.m,width:_Mathabs(xe[De].x-fe[De].x),soft:be[Re]},K.boundaries&&(je[ve-1].left=fe[De],je[ve-1].right=xe[De]),K.heightFactor)){let Fe=se[fe[De].index],Te=se[xe[De].index];je[ve-1].height=K.heightFactor*(je[ve-1].y-(Fe+Te)/2)}}je.length=ve,K.realTopDetection&&F(je,de,se);for(let Re=0;Re<je.length;Re++)je[Re].base=K.noiseLevel;return je.sort(function(Re,Pe){return Re.x-Pe.x}),je}},function(D,E,I){'use strict';D.exports.post=I(102),D.exports.gsd=I(100)},function(D,E,I){'use strict';function R($,Z,W,K,Q){var G=W.length,ee=[],te=[],ne=_Mathsign(W[1]-W[0]);-1===ne&&(Q[0]=W.length-1);for(var ae=_Mathabs(Z-$)/2,se=($+Z)/2,oe=!1,le=Q[0];!oe&&le<G&&0<=le;)_Mathabs(W[le]-se)<=ae?(ee.push(W[le]),te.push(K[le]),le+=ne):1===_Mathsign(se-W[le])?le+=ne:oe=!0;return Q[0]=le,[ee,te]}function F($,Z){var W=[],K=[],Q,G,ee=[$[0].x,Z*$[0].width],te,ne;for(Q=0;Q<$.length;Q++)_Mathabs($[Q].x-ee[0])<Z*$[Q].width+ee[1]?(W.push($[Q]),te=ee[0]+ee[1],$[Q].x+Z*$[Q].width>te&&(te=$[Q].x+Z*$[Q].width),ne=ee[0]-ee[1],$[Q].x-Z*$[Q].width<ne&&(ne=$[Q].x-Z*$[Q].width),ee=[(te+ne)/2,_Mathabs(te-ne)/2]):(K.push({limits:ee,group:W}),W=[$[Q]],ee=[$[Q].x,Z*$[Q].width]);for(K.push({limits:ee,group:W}),Q=K.length-2;0<=Q;Q--)if(_Mathabs(K[Q].limits[0]-K[Q+1].limits[0])<(K[Q].limits[1]+K[Q+1].limits[1])/2){for(G=0;G<K[Q+1].group.length;G++)K[Q].group.push(K[Q+1].group[G]);te=K[Q].limits[0]+K[Q].limits[1],K[Q+1].limits[0]+K[Q+1].limits[1]>te&&(te=K[Q+1].limits[0]+K[Q+1].limits[1]),ne=K[Q].limits[0]-K[Q].limits[1],K[Q+1].limits[0]-K[Q+1].limits[1]<ne&&(ne=K[Q+1].limits[0]-K[Q+1].limits[1]),K[Q].limits=[(te+ne)/2,_Mathabs(te-ne)/2],K.splice(Q+1,1)}return K}var O=I(133);D.exports={optimizePeaks:function($,Z,W,K,Q){var te=[0],G,ee,ne=F($,K),ae=[],se=1;'gaussian'===Q&&(se=1.17741);var oe,le,de;for(G=0;G<ne.length;G++){var ue=ne[G].group;if(1<ue.length){if(oe=R(ne[G].limits[0]-ne[G].limits[1],ne[G].limits[0]+ne[G].limits[1],Z,W,te),5<oe[0].length){le=ue[0].width/1e3,de=[3,100,le,le,le,10*le,10*le,11,9,1];var ce=[];for('gaussian'===Q?ce=O.optimizeGaussianSum(oe,ue,de):'lorentzian'===Q&&(ce=O.optimizeLorentzianSum(oe,ue,de)),ee=0;ee<ce.length;ee++)ae.push({x:ce[ee][0][0],y:ce[ee][1][0],width:ce[ee][2][0]*se})}}else if(ue=ue[0],oe=R(ue.x-K*ue.width,ue.x+K*ue.width,Z,W,te),5<oe[0].length){le=ue.width/1e3,de=[3,100,le,le,le,10*le,10*le,11,9,1];var he=[];'gaussian'===Q?he=O.optimizeSingleGaussian([oe[0],oe[1]],ue,de):'lorentzian'===Q&&(he=O.optimizeSingleLorentzian([oe[0],oe[1]],ue,de)),ae.push({x:he[0][0],y:he[1][0],width:he[2][0]*se})}}return ae},joinBroadPeaks:function($,Z){var W=Z.width,K=[],Q=0,G=0,ee=1;for(let se=$.length-1;0<=se;se--)$[se].soft&&K.push($.splice(se,1)[0]);K.push({x:_NumberMAX_VALUE});var te=[[K[0].x,K[0].y]],ne=[0];for(let se=1;se<K.length;se++)if(_Mathabs(K[se-1].x-K[se].x)<W)te.push([K[se].x,K[se].y]),K[se].y>Q&&(Q=K[se].y,G=se),ne.push(se),ee++;else{if(2<ee){var ae=O.optimizeSingleLorentzian(te,{x:K[G].x,y:Q,width:_Mathabs(te[0][0]-te[te.length-1][0])});$.push({x:ae[0][0],y:ae[1][0],width:ae[2][0],soft:!1})}else ne.map(function(oe){$.push(K[oe])});te=[[K[se].x,K[se].y]],ne=[se],Q=K[se].y,G=se,ee=1}return $.sort(function(se,oe){return se.x-oe.x}),$}}},function(D,E,I){'use strict';function R(se,oe){return 0|se*oe}function P(se,oe){return _Mathmin(se-2,0|se*oe)}function F(se,oe,le){return Z(_Mathmax(se+1,0|4*se/(3*oe+le)))}function T(se,oe,le){return Z(_Mathmax(se+1,0|4*se/(oe+3*le)))}const O=I(18),$=I(104),Z=$.nextPrime,W=$.largestPrime,K=0,Q=1,G=2;class ae{constructor(se={}){if(se instanceof ae)return this.table=se.table.slice(),this.values=se.values.slice(),this.state=se.state.slice(),this.minLoadFactor=se.minLoadFactor,this.maxLoadFactor=se.maxLoadFactor,this.distinct=se.distinct,this.freeEntries=se.freeEntries,this.lowWaterMark=se.lowWaterMark,void(this.highWaterMark=se.maxLoadFactor);const oe=se.initialCapacity===void 0?150:se.initialCapacity;if(0>oe)throw new RangeError(`initial capacity must not be less than zero: ${oe}`);const le=se.minLoadFactor===void 0?1/6:se.minLoadFactor,de=se.maxLoadFactor===void 0?2/3:se.maxLoadFactor;if(0>le||1<=le)throw new RangeError(`invalid minLoadFactor: ${le}`);if(0>=de||1<=de)throw new RangeError(`invalid maxLoadFactor: ${de}`);if(le>=de)throw new RangeError(`minLoadFactor (${le}) must be smaller than maxLoadFactor (${de})`);let ue=oe;ue=0|ue/de,ue=Z(ue),0===ue&&(ue=1),this.table=O(ue,0),this.values=O(ue,0),this.state=O(ue,0),this.minLoadFactor=le,this.maxLoadFactor=ue===W?1:de,this.distinct=0,this.freeEntries=ue,this.lowWaterMark=0,this.highWaterMark=P(ue,this.maxLoadFactor)}clone(){return new ae(this)}get size(){return this.distinct}get(se){const oe=this.indexOfKey(se);return 0>oe?0:this.values[oe]}set(se,oe){let le=this.indexOfInsertion(se);if(0>le)return le=-le-1,this.values[le]=oe,!1;if(this.distinct>this.highWaterMark){const de=F(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);return this.rehash(de),this.set(se,oe)}if(this.table[le]=se,this.values[le]=oe,this.state[le]===K&&this.freeEntries--,this.state[le]=Q,this.distinct++,1>this.freeEntries){const de=F(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);this.rehash(de)}return!0}remove(se,oe){const le=this.indexOfKey(se);return!(0>le)&&(this.state[le]=G,this.distinct--,oe||this.maybeShrinkCapacity(),!0)}delete(se,oe){const le=this.indexOfKey(se);return!(0>le)&&(this.state[le]=K,this.distinct--,oe||this.maybeShrinkCapacity(),!0)}maybeShrinkCapacity(){if(this.distinct<this.lowWaterMark){const se=T(this.distinct,this.minLoadFactor,this.maxLoadFactor);this.rehash(se)}}containsKey(se){return 0<=this.indexOfKey(se)}indexOfKey(se){const oe=this.table,le=this.state,de=this.table.length,ue=2147483647&se;let ce=ue%de,he=ue%(de-2);for(0==he&&(he=1);le[ce]!==K&&(le[ce]===G||oe[ce]!==se);)ce-=he,0>ce&&(ce+=de);return le[ce]===K?-1:ce}containsValue(se){return 0<=this.indexOfValue(se)}indexOfValue(se){const oe=this.values,le=this.state;for(var de=0;de<le.length;de++)if(le[de]===Q&&oe[de]===se)return de;return-1}indexOfInsertion(se){const oe=this.table,le=this.state,de=oe.length,ue=2147483647&se;let ce=ue%de,he=ue%(de-2);for(0==he&&(he=1);le[ce]===Q&&oe[ce]!==se;)ce-=he,0>ce&&(ce+=de);if(le[ce]===G){const ge=ce;for(;le[ce]!==K&&(le[ce]===G||oe[ce]!==se);)ce-=he,0>ce&&(ce+=de);le[ce]===K&&(ce=ge)}return le[ce]===Q?-ce-1:ce}ensureCapacity(se){if(this.table.length<se){const oe=Z(se);this.rehash(oe)}}rehash(se){const oe=this.table.length;if(se<=this.distinct)throw new Error('Unexpected');const le=this.table,de=this.values,ue=this.state,ce=O(se,0),he=O(se,0),ge=O(se,0);this.lowWaterMark=R(se,this.minLoadFactor),this.highWaterMark=P(se,this.maxLoadFactor),this.table=ce,this.values=he,this.state=ge,this.freeEntries=se-this.distinct;for(var pe=0;pe<oe;pe++)if(ue[pe]===Q){var me=le[pe],fe=this.indexOfInsertion(me);ce[fe]=me,he[fe]=de[pe],ge[fe]=Q}}forEachKey(se){for(var oe=0;oe<this.state.length;oe++)if(this.state[oe]===Q&&!se(this.table[oe]))return!1;return!0}forEachValue(se){for(var oe=0;oe<this.state.length;oe++)if(this.state[oe]===Q&&!se(this.values[oe]))return!1;return!0}forEachPair(se){for(var oe=0;oe<this.state.length;oe++)if(this.state[oe]===Q&&!se(this.table[oe],this.values[oe]))return!1;return!0}}D.exports=ae},function(D,E,I){const P=I(24),F=I(52).asc,T=2147483647,O=[T,5,11,23,47,97,197,397,797,1597,3203,6421,12853,25717,51437,102877,205759,411527,823117,1646237,3292489,6584983,13169977,26339969,52679969,105359939,210719881,421439783,842879579,1685759167,433,877,1759,3527,7057,14143,28289,56591,113189,226379,452759,905551,1811107,3622219,7244441,14488931,28977863,57955739,115911563,231823147,463646329,927292699,1854585413,953,1907,3821,7643,15287,30577,61169,122347,244703,489407,978821,1957651,3915341,7830701,15661423,31322867,62645741,125291483,250582987,501165979,1002331963,2004663929,1039,2081,4177,8363,16729,33461,66923,133853,267713,535481,1070981,2141977,4283963,8567929,17135863,34271747,68543509,137087021,274174111,548348231,1096696463,31,67,137,277,557,1117,2237,4481,8963,17929,35863,71741,143483,286973,573953,1147921,2295859,4591721,9183457,18366923,36733847,73467739,146935499,293871013,587742049,1175484103,599,1201,2411,4831,9677,19373,38747,77509,155027,310081,620171,1240361,2480729,4961459,9922933,19845871,39691759,79383533,158767069,317534141,635068283,1270136683,311,631,1277,2557,5119,10243,20507,41017,82037,164089,328213,656429,1312867,2625761,5251529,10503061,21006137,42012281,84024581,168049163,336098327,672196673,1344393353,3,7,17,37,79,163,331,673,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,43,89,179,359,719,1439,2879,5779,11579,23159,46327,92657,185323,370661,741337,1482707,2965421,5930887,11861791,23723597,47447201,94894427,189788857,379577741,759155483,1518310967,379,761,1523,3049,6101,12203,24407,48817,97649,195311,390647,781301,1562611,3125257,6250537,12501169,25002389,50004791,100009607,200019221,400038451,800076929,1600153859,13,29,59,127,257,521,1049,2099,4201,8419,16843,33703,67409,134837,269683,539389,1078787,2157587,4315183,8630387,17260781,34521589,69043189,138086407,276172823,552345671,1104691373,19,41,83,167,337,677,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,53,107,223,449,907,1823,3659,7321,14653,29311,58631,117269,234539,469099,938207,1876417,3752839,7505681,15011389,30022781,60045577,120091177,240182359,480364727,960729461,1921458943];O.sort(F),E.nextPrime=function($){let Z=P(O,$,F);return 0>Z&&(Z=~Z),O[Z]},E.largestPrime=T},function(D,E,I){'use strict';function R(ne,ae,se){for(var oe=1e101,le=0;le<ne.length;le++)for(var de=0,ue;de<ae.length;de++)ue=se[ne[le]][ae[de]],oe=_Mathmin(ue,oe);return oe}function P(ne,ae,se){for(var oe=-1,le=0;le<ne.length;le++)for(var de=0,ue;de<ae.length;de++)ue=se[ne[le]][ae[de]],oe=_Mathmax(ue,oe);return oe}function F(ne,ae,se){for(var oe=0,le=0;le<ne.length;le++)for(var de=0;de<ae.length;de++)oe+=se[ne[le]][ae[de]];return oe/(ne.length*ae.length)}function T(ne,ae,se){for(var oe=Array(ne.length*ae.length),le=0;le<ne.length;le++)for(var de=0;de<ae.length;de++)oe[le*ae.length+de]=se[ne[le]][ae[de]];return Z(oe)}function O(ne,ae,se){return T(ne,ae,se)*ne.length*ae.length/(ne.length+ae.length)}function $(ne,ae){return ne-ae}function Z(ne,ae){ae===void 0&&(ae=!1),ae||(ne=[].concat(ne).sort($));var se=ne.length,oe=_Mathfloor(se/2);return 0==se%2?0.5*(ne[oe-1]+ne[oe]):ne[oe]}const K=I(38),Q=I(41),G=I(14),ee=I(98);var te={disFunc:K,kind:'single',isDistanceMatrix:!1};D.exports=function(ne,ae){ae=Object.assign({},te,ae);var se=ne.length,oe=ne;if(ae.isDistanceMatrix||(oe=ee(ne,ae.disFunc)),'string'==typeof ae.kind)switch(ae.kind){case'single':ae.kind=R;break;case'complete':ae.kind=P;break;case'average':ae.kind=F;break;case'centroid':ae.kind=T;break;case'ward':ae.kind=O;break;default:throw new RangeError('Unknown kind of similarity');}else if('function'!=typeof ae.kind)throw new TypeError('Undefined kind of similarity');for(var le=Array(se),de=0;de<oe.length;de++)le[de]=new Q(de);for(var ue=1e6,ce={},he=0;1<le.length;){ce={},ue=1e6;for(var ge=0;ge<le.length;ge++)for(var pe=ge+1;pe<le.length;pe++){var me,fe;if(le[ge]instanceof Q)me=[le[ge].index];else{me=Array(le[ge].index.length);for(var xe=0;xe<me.length;xe++)me[xe]=le[ge].index[xe].index}if(le[pe]instanceof Q)fe=[le[pe].index];else{fe=Array(le[pe].index.length);for(var be=0;be<fe.length;be++)fe[be]=le[pe].index[be].index}he=ae.kind(me,fe,oe).toFixed(4),he in ce?ce[he].push([le[ge],le[pe]]):ce[he]=[[le[ge],le[pe]]],ue=_Mathmin(he,ue)}for(var ye=ce[ue.toFixed(4)],ke=Array(ye.length),we=0,_e;0<ye.length;){_e=ye.shift();for(var je=0,ve;je<ye.length;je++)if(ve=ye[je].filter(function(Ae){return-1!==_e.indexOf(Ae)}),0<ve.length){var Se=ye[je].filter(function(Ae){return-1===_e.indexOf(Ae)});_e=_e.concat(Se),ye.splice(je--,1)}ke[we++]=_e}ke.length=we;for(var De=0,Ce;De<ke.length;De++){Ce=new G,Ce.children=ke[De].concat(),Ce.distance=ue,Ce.index=Array(se);for(var Ee=0,Ie=0;Ie<ke[De].length;Ie++)ke[De][Ie]instanceof Q?Ce.index[Ee++]=ke[De][Ie]:(Ee+=ke[De][Ie].index.length,Ce.index=ke[De][Ie].index.concat(Ce.index)),le.splice(le.indexOf(ke[De][Ie]),1);Ce.index.length=Ee,le.push(Ce)}}return le[0]}},function(D,E,I){'use strict';function R(te,ne,ae){for(var se=1e101,oe=0;oe<te.length;oe++)for(var le=oe,de;le<ne.length;le++)de=ae(te[oe],ne[le]),se=_Mathmin(de,se);return se}function P(te,ne,ae){for(var se=-1,oe=0;oe<te.length;oe++)for(var le=oe,de;le<ne.length;le++)de=ae(te[oe],ne[le]),se=_Mathmax(de,se);return se}function F(te,ne,ae){for(var se=0,oe=0;oe<te.length;oe++)for(var le=0;le<ne.length;le++)se+=ae(te[oe],ne[le]);return se/(te.length*ne.length)}function T(te,ne,ae){for(var se=0,oe=0,le=0,de=0,ue=0;ue<te.length;ue++)se+=te[ue][0],oe+=te[ue][1];for(var ce=0;ce<ne.length;ce++)le+=ne[ce][0],de+=ne[ce][1];return se/=te.length,oe/=te.length,le/=ne.length,de/=ne.length,ae([se,oe],[le,de])}function O(te,ne,ae){for(var se=0,oe=0,le=0,de=0,ue=0;ue<te.length;ue++)se+=te[ue][0],oe+=te[ue][1];for(var ce=0;ce<ne.length;ce++)le+=ne[ce][0],de+=ne[ce][1];return se/=te.length,oe/=te.length,le/=ne.length,de/=ne.length,ae([se,oe],[le,de])*te.length*ne.length/(te.length+ne.length)}function $(te,ne,ae){for(var se={d:0,p:0},oe=Array(te[0].length),le=0;le<te[0].length;le++)oe[le]=ne[te[0][le]];for(var de=Array(te[1].length),ue=0;ue<te[1].length;ue++)de[ue]=ne[te[1][ue]];for(var ge=0,ce,he;ge<oe.length;ge++){ce=0;for(var pe=0;pe<oe.length;pe++)ge!==pe&&(ce+=ae(oe[ge],oe[pe]));ce/=oe.length-1,he=0;for(var me=0;me<de.length;me++)he+=ae(oe[ge],de[me]);he/=de.length,ce-he>se.d&&(se.d=ce-he,se.p=ge)}return se}function Z(te,ne,ae){for(var se=0,oe=0,le=0;le<te.length;le++)for(var de=le;de<te.length;de++)se+=ae(ne[te[le].index],ne[te[de].index]),oe++;return se/oe}const K=I(38),Q=I(41),G=I(14);var ee={dist:K,kind:'single'};D.exports=function(te,ne){if(ne=Object.assign({},ee,ne),'string'==typeof ne.kind)switch(ne.kind){case'single':ne.kind=R;break;case'complete':ne.kind=P;break;case'average':ne.kind=F;break;case'centroid':ne.kind=T;break;case'ward':ne.kind=O;break;default:throw new RangeError('Unknown kind of similarity');}else if('function'!=typeof ne.kind)throw new TypeError('Undefined kind of similarity');var ae=new G;ae.children=Array(te.length),ae.index=Array(te.length);for(var se=0;se<te.length;se++)ae.children[se]=new Q(se),ae.index[se]=new Q(se);ae.distance=Z(ae.index,te,ne.dist);for(var he=[ae],oe,le,de,ue,ce;0<he.length;){le=0,de=0;for(var ge=0;ge<he.length;ge++){oe=0;for(var pe=0;pe<he[ge].length;pe++)for(var me=pe+1;me<he[ge].length;me++)oe=_Mathmax(ne.dist(te[he[ge].index[pe].index],te[he[ge].index[me].index]),oe);oe>le&&(le=oe,de=ge)}if(le=0,2===he[de].index.length)he[de].children=[he[de].index[0],he[de].index[1]],he[de].distance=ne.dist(te[he[de].index[0].index],te[he[de].index[1].index]);else if(3===he[de].index.length){he[de].children=[he[de].index[0],he[de].index[1],he[de].index[2]];var fe=[ne.dist(te[he[de].index[0].index],te[he[de].index[1].index]),ne.dist(te[he[de].index[1].index],te[he[de].index[2].index])];he[de].distance=(fe[0]+fe[1])/2}else{for(var xe=new G,be=new G,ye=[Array(he[de].index.length),[]],ke=0;ke<ye[0].length;ke++)ye[0][ke]=ke;for(var _e=0;_e<ye[0].length;_e++){ue=0;for(var we=0;we<ye[0].length;we++)_e!==we&&(ue+=ne.dist(te[he[de].index[ye[0][we]].index],te[he[de].index[ye[0][_e]].index]));ue/=ye[0].length-1,ue>le&&(le=ue,ce=_e)}for(ye[1]=[ce],ye[0].splice(ce,1),ue=$(ye,te,ne.dist);0<ue.d;)ye[1].push(ye[0][ue.p]),ye[0].splice(ue.p,1),ue=$(ye,te,ne.dist);var je=Array(ye[0].length);xe.index=Array(ye[0].length);for(var ve=0;ve<je.length;ve++)je[ve]=te[he[de].index[ye[0][ve]].index],xe.index[ve]=he[de].index[ye[0][ve]],xe.children[ve]=he[de].index[ye[0][ve]];var Se=Array(ye[1].length);be.index=Array(ye[1].length);for(var De=0;De<Se.length;De++)Se[De]=te[he[de].index[ye[1][De]].index],be.index[De]=he[de].index[ye[1][De]],be.children[De]=he[de].index[ye[1][De]];xe.distance=Z(xe.index,te,ne.dist),be.distance=Z(be.index,te,ne.dist),he.push(xe),he.push(be),he[de].children=[xe,be]}he.splice(de,1)}return ae}},function(D,E,I){'use strict';E.agnes=I(105),E.diana=I(106)},function(D,E,I){'use strict';var R=I(42);D.exports={DEBUG:!1,ifft2DArray:function(F,T,O){var $=Array(T*O),Z=T/2,W=2*(O-1);R.init(Z);for(var K={re:Array(Z),im:Array(Z)},Q=0;Q<O;Q++){for(var G=Z-1;0<=G;G--)K.re[G]=F[2*G*O+Q],K.im[G]=F[(2*G+1)*O+Q];R.bt(K.re,K.im);for(var G=Z-1;0<=G;G--)$[2*G*O+Q]=K.re[G],$[(2*G+1)*O+Q]=K.im[G]}var ee=Array(Z*W);R.init(W);for(var te={re:Array(W),im:Array(W)},G=0;G<T;G+=2){te.re[0]=$[G*O],te.im[0]=$[(G+1)*O];for(var Q=1;Q<O;Q++)te.re[Q]=$[G*O+Q],te.im[Q]=$[(G+1)*O+Q],te.re[W-Q]=$[G*O+Q],te.im[W-Q]=-$[(G+1)*O+Q];R.bt(te.re,te.im);for(var ae=G/2*W,Q=W-1;0<=Q;Q--)ee[ae+Q]=te.re[Q]/(W*Z)}return ee},fft2DArray:function(F,T,O){var Z=Object.assign({},{inplace:!0}),W=O/2+1,K=2*T,Q=Array(K*W);R.init(O);for(var G={re:Array(O),im:Array(O)},ee={re:Array(O),im:Array(O)},te={re:Array(O),im:Array(O)},de=0,ne,ae,se,oe,le;de<T/2;de++){ne=2*de*O,G.re=F.slice(ne,ne+O),ne=(2*de+1)*O,G.im=F.slice(ne,ne+O),R.fft1d(G.re,G.im),this.reconstructTwoRealFFT(G,ee,te),ae=4*de*W,se=(4*de+1)*W,oe=(4*de+2)*W,le=(4*de+3)*W;for(var ue=W-1;0<=ue;ue--)Q[ae+ue]=ee.re[ue],Q[se+ue]=ee.im[ue],Q[oe+ue]=te.re[ue],Q[le+ue]=te.im[ue]}ee=null,te=null;var ce=Array(K*W);R.init(T);for(var he={re:Array(T),im:Array(T)},ge=W-1;0<=ge;ge--){for(var de=T-1;0<=de;de--)he.re[de]=Q[2*de*W+ge],he.im[de]=Q[(2*de+1)*W+ge],isNaN(he.re[de])&&(he.re[de]=0),isNaN(he.im[de])&&(he.im[de]=0);R.fft1d(he.re,he.im);for(var de=T-1;0<=de;de--)ce[2*de*W+ge]=he.re[de],ce[(2*de+1)*W+ge]=he.im[de]}return ce},reconstructTwoRealFFT:function(F,T,O){var $=F.re.length;T.re[0]=F.re[0],T.im[0]=0,O.re[0]=F.im[0],O.im[0]=0;for(var ee=$/2,Z,W,K,Q,G;0<ee;ee--)G=$-ee,Z=0.5*(F.re[ee]-F.re[G]),W=0.5*(F.re[ee]+F.re[G]),K=0.5*(F.im[ee]-F.im[G]),Q=0.5*(F.im[ee]+F.im[G]),T.re[ee]=W,T.im[ee]=K,T.re[G]=W,T.im[G]=-K,O.re[ee]=Q,O.im[ee]=-Z,O.re[G]=Q,O.im[G]=Z},convolute2DI:function(F,T,O,$){for(var K=0,Z,W;K<O/2;K++)for(var Q=0;Q<$;Q++)Z=F[2*K*$+Q]*T[2*K*$+Q]-F[(2*K+1)*$+Q]*T[(2*K+1)*$+Q],W=F[2*K*$+Q]*T[(2*K+1)*$+Q]+F[(2*K+1)*$+Q]*T[2*K*$+Q],F[2*K*$+Q]=Z,F[(2*K+1)*$+Q]=W},convolute:function(F,T,O,$){for(var W=Array($*O),K=0;K<O*$;K++)W[K]=F[K];W=this.fft2DArray(W,O,$);for(var Q=T.length,G=T[0].length,ee=Array($*O),K=0;K<$*O;K++)ee[K]=0;for(var ae=_Mathfloor((Q-1)/2),se=_Mathfloor((G-1)/2),oe=0,te,ne;oe<Q;oe++){te=(oe-ae+O)%O;for(var le=0;le<G;le++)ne=(le-se+$)%$,ee[te*$+ne]=T[oe][le]}ee=this.fft2DArray(ee,O,$);var de=2*O,ue=$/2+1;return this.convolute2DI(W,ee,de,ue),this.ifft2DArray(W,de,ue)},toRadix2:function(F,T,O){var $,Z,W,K,Q=O,G=T,ee=0,te=0;if(0===O||0!=(O&O-1)){for(Q=0;0!=O>>++Q;);Q=1<<Q,te=Q-O}if(0===T||0!=(T&T-1)){for(G=0;0!=T>>++G;);G=1<<G,ee=(G-T)*Q}if(G==T&&Q==O)return{data:F,rows:T,cols:O};var ne=Array(G*Q),ae=_Mathfloor((G-T)/2)-T,se=_Mathfloor((Q-O)/2)-O;for($=0;$<G;$++)for(W=$*Q,K=($-ae)%T*O,Z=0;Z<Q;Z++)ne[W+Z]=F[K+(Z-se)%O];return{data:ne,rows:G,cols:Q}},crop:function(F,T,O,$,Z,W){if(T==$&&O==Z)return F;var K=Object.assign({},W),Q=Array(Z*$),G=_Mathfloor((T-$)/2),ee=_Mathfloor((O-Z)/2),te,ne,ae,se;for(ae=0;ae<$;ae++)for(te=ae*$,ne=(ae+G)*O,se=0;se<Z;se++)Q[te+se]=F[ne+(se+ee)];return Q}}},function(D,E,I){'use strict';E.FFTUtils=I(108),E.FFT=I(42)},function(D,E,I){'use strict;';function T($){var Z=$,W,K;if('number'!=typeof $[0]){W=$.length,K=$[0].length,Z=Array(W*K);for(var Q=0;Q<W;Q++)for(var G=0;G<K;G++)Z[Q*K+G]=$[Q][G]}else{var ee=_Mathsqrt($.length);_NumberisInteger(ee)&&(W=ee,K=ee)}return{data:Z,rows:W,cols:K}}var O=I(109).FFTUtils;D.exports={fft:function($,Z,W){var K=T($),Q=K.data,G=Object.assign({normalize:!1,divisor:1,rows:K.rows,cols:K.cols},W),ee,te;if(G.rows&&G.cols)ee=G.rows,te=G.cols;else throw new Error('Invalid number of rows or columns '+ee+' '+te);var ne=G.divisor,oe=Z.length,le=Z[0].length,ae,se;if(G.normalize)for(ne=0,ae=0;ae<oe;ae++)for(se=0;se<le;se++)ne+=Z[ae][se];if(0===ne)throw new RangeError('convolution: The divisor is equal to zero');var de=O.toRadix2(Q,ee,te),ue=O.convolute(de.data,Z,de.rows,de.cols);if(ue=O.crop(ue,de.rows,de.cols,ee,te),0!=ne)for(ae=0;ae<ue.length;ae++)ue[ae]/ne;return ue},direct:function($,Z,W){var K=T($),Q=K.data,G=Object.assign({normalize:!1,divisor:1,rows:K.rows,cols:K.cols},W),ee,te;if(G.rows&&G.cols)ee=G.rows,te=G.cols;else throw new Error('Invalid number of rows or columns '+ee+' '+te);var ne=G.divisor,ae=Z.length,se=Z[0].length,oe,le,de,ue,ce,he,ge,pe,me;if(G.normalize)for(ne=0,oe=0;oe<ae;oe++)for(le=0;le<se;le++)ne+=Z[oe][le];if(0===ne)throw new RangeError('convolution: The divisor is equal to zero');var fe=Array(ee*te),xe=_Mathfloor(ae/2),be=_Mathfloor(se/2);for(ue=0;ue<ee;ue++)for(de=0;de<te;de++){for(he=0,le=0;le<ae;le++)for(oe=0;oe<se;oe++)ge=Z[ae-le-1][se-oe-1],pe=(ue+le-xe+ee)%ee,me=(de+oe-be+te)%te,ce=pe*te+me,he+=Q[ce]*ge;ce=ue*te+de,fe[ce]=he/ne}return fe},kernelFactory:{LoG:function($,Z,W){var K=1e3;W&&W.factor&&(K=W.factor);var Q=Array(Z),G,ee,te,ne;K*=-1;var se=(Z-1)/2;for(G=0;G<Z;G++)for(Q[G]=Array(Z),ne=(G-se)*(G-se),ee=0;ee<Z;ee++)te=-((ee-se)*(ee-se)+ne)/(2*$*$),Q[G][ee]=_Mathround(K*(1+te)*_Mathexp(te));return Q}},matrix2Array:T}},function(D,E,I){'use strict';const P=I(97),F=[-1,0],T=[0,-1],O=[null,null],$=[-1,-1,0,1],Z=[0,-1,-1,-1],W=[null,null,null,null];D.exports=function(K,Q,G,ee){ee=ee||{};const te=ee.neighbours||8;var ne,ae,se;if(8===te)ne=$,ae=Z,se=W;else if(4===te)ne=F,ae=T,se=O;else throw new RangeError('unsupported neighbours count: '+te);const oe=K.length,le=Array(oe),de=new Int16Array(oe),ue=new P;for(var he=1,ge=0,ce;ge<G;ge++)for(var pe=0,me;pe<Q;pe++)if(me=null,ce=pe+ge*Q,K[ce]){for(var fe=0;fe<se.length;fe++){var xe=pe+ne[fe],be=ge+ae[fe];if(0<=xe&&0<=be&&xe<Q&&be<G){var ye=le[xe+be*Q];ye?(se[fe]=ye,(!me||se[fe].value<me.value)&&(me=se[fe])):se[fe]=null}}if(!me)le[ce]=ue.add(he++);else{le[ce]=me;for(var fe=0;fe<se.length;fe++)se[fe]&&se[fe]!==me&&ue.union(me,se[fe])}}for(var ge=0;ge<G;ge++)for(var pe=0;pe<Q;pe++)ce=pe+ge*Q,K[ce]&&(de[ce]=ue.find(le[ce]).value);return de}},function(D,E,I){'use strict';function F(K,Q,G,ee){var te={},ne,ae,se,oe;for(oe=0;oe<K.length;oe++)0!=K[oe]&&(ae=oe%ee,ne=(oe-ae)/ee,te[K[oe]]?(se=te[K[oe]],se.x+=ae*Q[oe],se.y+=ne*Q[oe],se.z+=Q[oe],ae<se.minX&&(se.minX=ae),ae>se.maxX&&(se.maxX=ae),ne<se.minY&&(se.minY=ne),ne>se.maxY&&(se.maxY=ne)):te[K[oe]]={x:ae*Q[oe],y:ne*Q[oe],z:Q[oe],minX:ae,maxX:ae,minY:ne,maxY:ne});var le=Object.keys(te),de=Array(le.length);for(oe=0;oe<le.length;oe++)de[oe]=te[le[oe]],de[oe].x/=de[oe].z,de[oe].y/=de[oe].z;return de}var T=I(6).array,O=I(110),$=I(111);const Z=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];D.exports={findPeaks2DRegion:function(K,Q){var G=Object.assign({},{nStdev:3,kernel:Z},Q),ee=O.matrix2Array(K),te=ee.data,ne;ee.rows&&ee.cols&&(G.rows=ee.rows,G.cols=ee.cols);var ae=G.rows,se=G.cols;if(!ae||!se)throw new Error('Invalid number of rows or columns '+ae+' '+se);var oe=G.kernel,le=G.filteredData;le||(le=O.fft(te,oe,G));var de=G.nStdev,ue=0;for(ne=se*ae-2;0<=ne;ne--)ue+=_Mathpow(le[ne]-le[ne+1],2);ue=-_Mathsqrt(ue),ue*=de/ae;var ce=Array(se*ae);for(ne=se*ae-1;0<=ne;ne--)ce[ne]=0;var he=0;for(ne=le.length-1;0<=ne;ne--)le[ne]<ue&&(ce[ne]=1,he++);var ge=$(ce,se,ae,{neighbours:8}),pe=F(ge,te,ae,se);return 0<pe.length,pe},findPeaks2DMax:function(K,Q){var G=Object.assign({},{nStdev:3,kernel:Z},Q),ee=O.matrix2Array(K),te=ee.data;ee.rows&&ee.cols&&(G.rows=ee.rows,G.cols=ee.cols);var ne=G.rows,ae=G.cols;if(!ne||!ae)throw new Error('Invalid number of rows or columns '+ne+' '+ae);var se=G.kernel,oe=G.filteredData;oe||(oe=O.fft(te,se,G));for(var le=G.nStdev,de=0,ue=ae*ne-2;0<=ue;ue--)de+=_Mathpow(oe[ue]-oe[ue+1],2);de=-_Mathsqrt(de),de*=le/ne;for(var ge=[],pe=0,ue=0,ce,he;ue<oe.length;ue++)oe[ue]<de&&(ce=_Mathfloor(ue/ae),he=ue%ae,0<ce&&ce+1<ne&&he+1<ae&&0<he&&oe[ue]<oe[ue+1]&&oe[ue]<oe[ue-1]&&(pe=(ce-1)*ae+he,oe[ue]<oe[pe-1]&&oe[ue]<oe[pe]&&oe[ue]<oe[pe+1]&&(pe=(ce+1)*ae+he,oe[ue]<oe[pe-1]&&oe[ue]<oe[pe]&&oe[ue]<oe[pe+1]&&ge.push({x:he,y:ce,z:te[ue]}))));return ge}}},function(D,E,I){'use strict';function R(F){if(!(this instanceof R))return new R(F);if(F=P.checkMatrix(F),!F.isSymmetric())throw new Error('Matrix is not symmetric');var T=F,O=T.rows,$=new P(O,O),Z=!0,W,K,Q;for(K=0;K<O;K++){var G=$[K],ee=0;for(Q=0;Q<K;Q++){var te=$[Q],ne=0;for(W=0;W<Q;W++)ne+=te[W]*G[W];G[Q]=ne=(T[K][Q]-ne)/$[Q][Q],ee+=ne*ne}for(ee=T[K][K]-ee,Z&=0<ee,$[K][K]=_Mathsqrt(_Mathmax(ee,0)),Q=K+1;Q<O;Q++)$[K][Q]=0}if(!Z)throw new Error('Matrix is not positive definite');this.L=$}var P=I(1).Matrix;R.prototype={get lowerTriangularMatrix(){return this.L},solve:function(F){F=P.checkMatrix(F);var T=this.L,O=T.rows;if(F.rows!==O)throw new Error('Matrix dimensions do not match');var $=F.columns,Z=F.clone(),W,K,Q;for(Q=0;Q<O;Q++)for(K=0;K<$;K++){for(W=0;W<Q;W++)Z[Q][K]-=Z[W][K]*T[Q][W];Z[Q][K]/=T[Q][Q]}for(Q=O-1;0<=Q;Q--)for(K=0;K<$;K++){for(W=Q+1;W<O;W++)Z[Q][K]-=Z[W][K]*T[W][Q];Z[Q][K]/=T[Q][Q]}return Z}},D.exports=R},function(D,E,I){'use strict';function R(ee,te){if(te=Object.assign({},G,te),!(this instanceof R))return new R(ee,te);if(ee=Z.checkMatrix(ee),!ee.isSquare())throw new Error('Matrix is not a square matrix');var ne=ee.columns,ae=Q(ne,ne,0),se=Array(ne),oe=Array(ne),le=ee,ce=!1,de,ue;if(ce=!!te.assumeSymmetric||ee.isSymmetric(),ce){for(de=0;de<ne;de++)for(ue=0;ue<ne;ue++)ae[de][ue]=le.get(de,ue);P(ne,oe,se,ae),F(ne,oe,se,ae)}else{var he=Q(ne,ne,0),ge=Array(ne);for(ue=0;ue<ne;ue++)for(de=0;de<ne;de++)he[de][ue]=le.get(de,ue);T(ne,he,ge,ae),O(ne,oe,se,ae,he)}this.n=ne,this.e=oe,this.d=se,this.V=ae}function P(ee,te,ne,ae){var se,oe,le,de,ue,ce,he,ge;for(ue=0;ue<ee;ue++)ne[ue]=ae[ee-1][ue];for(de=ee-1;0<de;de--){for(ge=0,le=0,ce=0;ce<de;ce++)ge+=_Mathabs(ne[ce]);if(0===ge)for(te[de]=ne[de-1],ue=0;ue<de;ue++)ne[ue]=ae[de-1][ue],ae[de][ue]=0,ae[ue][de]=0;else{for(ce=0;ce<de;ce++)ne[ce]/=ge,le+=ne[ce]*ne[ce];for(se=ne[de-1],oe=_Mathsqrt(le),0<se&&(oe=-oe),te[de]=ge*oe,le-=se*oe,ne[de-1]=se-oe,ue=0;ue<de;ue++)te[ue]=0;for(ue=0;ue<de;ue++){for(se=ne[ue],ae[ue][de]=se,oe=te[ue]+ae[ue][ue]*se,ce=ue+1;ce<=de-1;ce++)oe+=ae[ce][ue]*ne[ce],te[ce]+=ae[ce][ue]*se;te[ue]=oe}for(se=0,ue=0;ue<de;ue++)te[ue]/=le,se+=te[ue]*ne[ue];for(he=se/(le+le),ue=0;ue<de;ue++)te[ue]-=he*ne[ue];for(ue=0;ue<de;ue++){for(se=ne[ue],oe=te[ue],ce=ue;ce<=de-1;ce++)ae[ce][ue]-=se*te[ce]+oe*ne[ce];ne[ue]=ae[de-1][ue],ae[de][ue]=0}}ne[de]=le}for(de=0;de<ee-1;de++){if(ae[ee-1][de]=ae[de][de],ae[de][de]=1,le=ne[de+1],0!==le){for(ce=0;ce<=de;ce++)ne[ce]=ae[ce][de+1]/le;for(ue=0;ue<=de;ue++){for(oe=0,ce=0;ce<=de;ce++)oe+=ae[ce][de+1]*ae[ce][ue];for(ce=0;ce<=de;ce++)ae[ce][ue]-=oe*ne[ce]}}for(ce=0;ce<=de;ce++)ae[ce][de+1]=0}for(ue=0;ue<ee;ue++)ne[ue]=ae[ee-1][ue],ae[ee-1][ue]=0;ae[ee-1][ee-1]=1,te[0]=0}function F(ee,te,ne,ae){var se,oe,le,de,ue,ce,he,ge,pe,me,fe,xe,be,ye,ke,_e,we;for(le=1;le<ee;le++)te[le-1]=te[le];te[ee-1]=0;var je=0,ve=0,Se=2.220446049250313e-16;for(ce=0;ce<ee;ce++){for(ve=_Mathmax(ve,_Mathabs(ne[ce])+_Mathabs(te[ce])),he=ce;he<ee&&!(_Mathabs(te[he])<=Se*ve);)he++;if(he>ce){we=0;do{for(++we,se=ne[ce],ge=(ne[ce+1]-se)/(2*te[ce]),pe=K(ge,1),0>ge&&(pe=-pe),ne[ce]=te[ce]/(ge+pe),ne[ce+1]=te[ce]*(ge+pe),me=ne[ce+1],oe=se-ne[ce],le=ce+2;le<ee;le++)ne[le]-=oe;for(je+=oe,ge=ne[he],fe=1,xe=fe,be=fe,ye=te[ce+1],ke=0,_e=0,le=he-1;le>=ce;le--)for(be=xe,xe=fe,_e=ke,se=fe*te[le],oe=fe*ge,pe=K(ge,te[le]),te[le+1]=ke*pe,ke=te[le]/pe,fe=ge/pe,ge=fe*ne[le]-ke*se,ne[le+1]=oe+ke*(fe*se+ke*ne[le]),ue=0;ue<ee;ue++)oe=ae[ue][le+1],ae[ue][le+1]=ke*ae[ue][le]+fe*oe,ae[ue][le]=fe*ae[ue][le]-ke*oe;ge=-ke*_e*be*ye*te[ce]/me,te[ce]=ke*ge,ne[ce]=fe*ge}while(_Mathabs(te[ce])>Se*ve)}ne[ce]+=je,te[ce]=0}for(le=0;le<ee-1;le++){for(ue=le,ge=ne[le],de=le+1;de<ee;de++)ne[de]<ge&&(ue=de,ge=ne[de]);if(ue!==le)for(ne[ue]=ne[le],ne[le]=ge,de=0;de<ee;de++)ge=ae[de][le],ae[de][le]=ae[de][ue],ae[de][ue]=ge}}function T(ee,te,ne,ae){var se=0,oe=ee-1,le,de,ue,ce,he,ge,pe;for(ge=se+1;ge<=oe-1;ge++){for(pe=0,ce=ge;ce<=oe;ce++)pe+=_Mathabs(te[ce][ge-1]);if(0!==pe){for(ue=0,ce=oe;ce>=ge;ce--)ne[ce]=te[ce][ge-1]/pe,ue+=ne[ce]*ne[ce];for(de=_Mathsqrt(ue),0<ne[ge]&&(de=-de),ue-=ne[ge]*de,ne[ge]-=de,he=ge;he<ee;he++){for(le=0,ce=oe;ce>=ge;ce--)le+=ne[ce]*te[ce][he];for(le/=ue,ce=ge;ce<=oe;ce++)te[ce][he]-=le*ne[ce]}for(ce=0;ce<=oe;ce++){for(le=0,he=oe;he>=ge;he--)le+=ne[he]*te[ce][he];for(le/=ue,he=ge;he<=oe;he++)te[ce][he]-=le*ne[he]}ne[ge]=pe*ne[ge],te[ge][ge-1]=pe*de}}for(ce=0;ce<ee;ce++)for(he=0;he<ee;he++)ae[ce][he]=ce===he?1:0;for(ge=oe-1;ge>=se+1;ge--)if(0!==te[ge][ge-1]){for(ce=ge+1;ce<=oe;ce++)ne[ce]=te[ce][ge-1];for(he=ge;he<=oe;he++){for(de=0,ce=ge;ce<=oe;ce++)de+=ne[ce]*ae[ce][he];for(de=de/ne[ge]/te[ge][ge-1],ce=ge;ce<=oe;ce++)ae[ce][he]+=de*ne[ce]}}}function O(ee,te,ne,ae,se){var oe=ee-1,le=0,de=ee-1,ue=2.220446049250313e-16,ce=0,he=0,ge=0,pe=0,me=0,fe=0,xe=0,be=0,ye,ke,_e,we,je,ve,Se,De,Ce,Ee,Ie,Ae,Re,Pe,Fe;for(ye=0;ye<ee;ye++)for((ye<le||ye>de)&&(ne[ye]=se[ye][ye],te[ye]=0),ke=_Mathmax(ye-1,0);ke<ee;ke++)he+=_Mathabs(se[ye][ke]);for(;oe>=le;){for(we=oe;we>le&&(fe=_Mathabs(se[we-1][we-1])+_Mathabs(se[we][we]),0===fe&&(fe=he),!(_Mathabs(se[we][we-1])<ue*fe));)we--;if(we===oe)se[oe][oe]+=ce,ne[oe]=se[oe][oe],te[oe]=0,oe--,be=0;else if(we===oe-1){if(Se=se[oe][oe-1]*se[oe-1][oe],ge=(se[oe-1][oe-1]-se[oe][oe])/2,pe=ge*ge+Se,xe=_Mathsqrt(_Mathabs(pe)),se[oe][oe]+=ce,se[oe-1][oe-1]=se[oe-1][oe-1]+ce,De=se[oe][oe],0<=pe){for(xe=0<=ge?ge+xe:ge-xe,ne[oe-1]=De+xe,ne[oe]=ne[oe-1],0!==xe&&(ne[oe]=De-Se/xe),te[oe-1]=0,te[oe]=0,De=se[oe][oe-1],fe=_Mathabs(De)+_Mathabs(xe),ge=De/fe,pe=xe/fe,me=_Mathsqrt(ge*ge+pe*pe),ge/=me,pe/=me,ke=oe-1;ke<ee;ke++)xe=se[oe-1][ke],se[oe-1][ke]=pe*xe+ge*se[oe][ke],se[oe][ke]=pe*se[oe][ke]-ge*xe;for(ye=0;ye<=oe;ye++)xe=se[ye][oe-1],se[ye][oe-1]=pe*xe+ge*se[ye][oe],se[ye][oe]=pe*se[ye][oe]-ge*xe;for(ye=le;ye<=de;ye++)xe=ae[ye][oe-1],ae[ye][oe-1]=pe*xe+ge*ae[ye][oe],ae[ye][oe]=pe*ae[ye][oe]-ge*xe}else ne[oe-1]=De+ge,ne[oe]=De+ge,te[oe-1]=xe,te[oe]=-xe;oe-=2,be=0}else{if(De=se[oe][oe],Ce=0,Se=0,we<oe&&(Ce=se[oe-1][oe-1],Se=se[oe][oe-1]*se[oe-1][oe]),10==be){for(ce+=De,ye=le;ye<=oe;ye++)se[ye][ye]-=De;fe=_Mathabs(se[oe][oe-1])+_Mathabs(se[oe-1][oe-2]),De=Ce=0.75*fe,Se=-0.4375*fe*fe}if(30==be&&(fe=(Ce-De)/2,fe=fe*fe+Se,0<fe)){for(fe=_Mathsqrt(fe),Ce<De&&(fe=-fe),fe=De-Se/((Ce-De)/2+fe),ye=le;ye<=oe;ye++)se[ye][ye]-=fe;ce+=fe,De=Ce=Se=0.964}for(++be,je=oe-2;je>=we&&(xe=se[je][je],me=De-xe,fe=Ce-xe,ge=(me*fe-Se)/se[je+1][je]+se[je][je+1],pe=se[je+1][je+1]-xe-me-fe,me=se[je+2][je+1],fe=_Mathabs(ge)+_Mathabs(pe)+_Mathabs(me),ge/=fe,pe/=fe,me/=fe,je!==we)&&!(_Mathabs(se[je][je-1])*(_Mathabs(pe)+_Mathabs(me))<ue*(_Mathabs(ge)*(_Mathabs(se[je-1][je-1])+_Mathabs(xe)+_Mathabs(se[je+1][je+1]))));)je--;for(ye=je+2;ye<=oe;ye++)se[ye][ye-2]=0,ye>je+2&&(se[ye][ye-3]=0);for(_e=je;_e<=oe-1&&(Pe=_e!==oe-1,_e!==je&&(ge=se[_e][_e-1],pe=se[_e+1][_e-1],me=Pe?se[_e+2][_e-1]:0,De=_Mathabs(ge)+_Mathabs(pe)+_Mathabs(me),0!==De&&(ge/=De,pe/=De,me/=De)),0!==De);_e++)if(fe=_Mathsqrt(ge*ge+pe*pe+me*me),0>ge&&(fe=-fe),0!==fe){for(_e===je?we!==je&&(se[_e][_e-1]=-se[_e][_e-1]):se[_e][_e-1]=-fe*De,ge+=fe,De=ge/fe,Ce=pe/fe,xe=me/fe,pe/=ge,me/=ge,ke=_e;ke<ee;ke++)ge=se[_e][ke]+pe*se[_e+1][ke],Pe&&(ge+=me*se[_e+2][ke],se[_e+2][ke]=se[_e+2][ke]-ge*xe),se[_e][ke]-=ge*De,se[_e+1][ke]=se[_e+1][ke]-ge*Ce;for(ye=0;ye<=_Mathmin(oe,_e+3);ye++)ge=De*se[ye][_e]+Ce*se[ye][_e+1],Pe&&(ge+=xe*se[ye][_e+2],se[ye][_e+2]=se[ye][_e+2]-ge*me),se[ye][_e]-=ge,se[ye][_e+1]=se[ye][_e+1]-ge*pe;for(ye=le;ye<=de;ye++)ge=De*ae[ye][_e]+Ce*ae[ye][_e+1],Pe&&(ge+=xe*ae[ye][_e+2],ae[ye][_e+2]=ae[ye][_e+2]-ge*me),ae[ye][_e]-=ge,ae[ye][_e+1]=ae[ye][_e+1]-ge*pe}}}if(0!==he){for(oe=ee-1;0<=oe;oe--)if(ge=ne[oe],pe=te[oe],0===pe)for(we=oe,se[oe][oe]=1,ye=oe-1;0<=ye;ye--){for(Se=se[ye][ye]-ge,me=0,ke=we;ke<=oe;ke++)me+=se[ye][ke]*se[ke][oe];if(0>te[ye])xe=Se,fe=me;else if(we=ye,0===te[ye]?se[ye][oe]=0===Se?-me/(ue*he):-me/Se:(De=se[ye][ye+1],Ce=se[ye+1][ye],pe=(ne[ye]-ge)*(ne[ye]-ge)+te[ye]*te[ye],ve=(De*fe-xe*me)/pe,se[ye][oe]=ve,se[ye+1][oe]=_Mathabs(De)>_Mathabs(xe)?(-me-Se*ve)/De:(-fe-Ce*ve)/xe),ve=_Mathabs(se[ye][oe]),1<ue*ve*ve)for(ke=ye;ke<=oe;ke++)se[ke][oe]/=ve}else if(0>pe)for(we=oe-1,_Mathabs(se[oe][oe-1])>_Mathabs(se[oe-1][oe])?(se[oe-1][oe-1]=pe/se[oe][oe-1],se[oe-1][oe]=-(se[oe][oe]-ge)/se[oe][oe-1]):(Fe=$(0,-se[oe-1][oe],se[oe-1][oe-1]-ge,pe),se[oe-1][oe-1]=Fe[0],se[oe-1][oe]=Fe[1]),se[oe][oe-1]=0,se[oe][oe]=1,ye=oe-2;0<=ye;ye--){for(Ee=0,Ie=0,ke=we;ke<=oe;ke++)Ee+=se[ye][ke]*se[ke][oe-1],Ie+=se[ye][ke]*se[ke][oe];if(Se=se[ye][ye]-ge,0>te[ye])xe=Se,me=Ee,fe=Ie;else if(we=ye,0===te[ye]?(Fe=$(-Ee,-Ie,Se,pe),se[ye][oe-1]=Fe[0],se[ye][oe]=Fe[1]):(De=se[ye][ye+1],Ce=se[ye+1][ye],Ae=(ne[ye]-ge)*(ne[ye]-ge)+te[ye]*te[ye]-pe*pe,Re=2*(ne[ye]-ge)*pe,0===Ae&&0===Re&&(Ae=ue*he*(_Mathabs(Se)+_Mathabs(pe)+_Mathabs(De)+_Mathabs(Ce)+_Mathabs(xe))),Fe=$(De*me-xe*Ee+pe*Ie,De*fe-xe*Ie-pe*Ee,Ae,Re),se[ye][oe-1]=Fe[0],se[ye][oe]=Fe[1],_Mathabs(De)>_Mathabs(xe)+_Mathabs(pe)?(se[ye+1][oe-1]=(-Ee-Se*se[ye][oe-1]+pe*se[ye][oe])/De,se[ye+1][oe]=(-Ie-Se*se[ye][oe]-pe*se[ye][oe-1])/De):(Fe=$(-me-Ce*se[ye][oe-1],-fe-Ce*se[ye][oe],xe,pe),se[ye+1][oe-1]=Fe[0],se[ye+1][oe]=Fe[1])),ve=_Mathmax(_Mathabs(se[ye][oe-1]),_Mathabs(se[ye][oe])),1<ue*ve*ve)for(ke=ye;ke<=oe;ke++)se[ke][oe-1]=se[ke][oe-1]/ve,se[ke][oe]/=ve}for(ye=0;ye<ee;ye++)if(ye<le||ye>de)for(ke=ye;ke<ee;ke++)ae[ye][ke]=se[ye][ke];for(ke=ee-1;ke>=le;ke--)for(ye=le;ye<=de;ye++){for(xe=0,_e=le;_e<=_Mathmin(ke,de);_e++)xe+=ae[ye][_e]*se[_e][ke];ae[ye][ke]=xe}}}function $(ee,te,ne,ae){var se,oe;return _Mathabs(ne)>_Mathabs(ae)?(se=ae/ne,oe=ne+se*ae,[(ee+se*te)/oe,(te-se*ee)/oe]):(se=ne/ae,oe=ae+se*ne,[(se*ee+te)/oe,(se*te-ee)/oe])}const Z=I(1).Matrix,W=I(15),K=W.hypotenuse,Q=W.getFilled2DArray,G={assumeSymmetric:!1};R.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return Z.isMatrix(this.V)||(this.V=new Z(this.V)),this.V},get diagonalMatrix(){var ee=this.n,te=this.e,ne=this.d,ae=new Z(ee,ee),se,oe;for(se=0;se<ee;se++){for(oe=0;oe<ee;oe++)ae[se][oe]=0;ae[se][se]=ne[se],0<te[se]?ae[se][se+1]=te[se]:0>te[se]&&(ae[se][se-1]=te[se])}return ae}},D.exports=R},function(D,E,I){'use strict';function R(T){if(!(this instanceof R))return new R(T);T=P.checkMatrix(T);var O=T.clone(),$=T.rows,Z=T.columns,W=Array(Z),K,Q,G,ee;for(G=0;G<Z;G++){var te=0;for(K=G;K<$;K++)te=F(te,O[K][G]);if(0!==te){for(0>O[G][G]&&(te=-te),K=G;K<$;K++)O[K][G]/=te;for(O[G][G]+=1,Q=G+1;Q<Z;Q++){for(ee=0,K=G;K<$;K++)ee+=O[K][G]*O[K][Q];for(ee=-ee/O[G][G],K=G;K<$;K++)O[K][Q]+=ee*O[K][G]}}W[G]=-te}this.QR=O,this.Rdiag=W}var P=I(1).Matrix,F=I(15).hypotenuse;R.prototype={solve:function(T){T=P.checkMatrix(T);var O=this.QR,$=O.rows;if(T.rows!==$)throw new Error('Matrix row dimensions must agree');if(!this.isFullRank())throw new Error('Matrix is rank deficient');var Z=T.columns,W=T.clone(),K=O.columns,Q,G,ee,te;for(ee=0;ee<K;ee++)for(G=0;G<Z;G++){for(te=0,Q=ee;Q<$;Q++)te+=O[Q][ee]*W[Q][G];for(te=-te/O[ee][ee],Q=ee;Q<$;Q++)W[Q][G]+=te*O[Q][ee]}for(ee=K-1;0<=ee;ee--){for(G=0;G<Z;G++)W[ee][G]/=this.Rdiag[ee];for(Q=0;Q<ee;Q++)for(G=0;G<Z;G++)W[Q][G]-=W[ee][G]*O[Q][ee]}return W.subMatrix(0,K-1,0,Z-1)},isFullRank:function(){for(var T=this.QR.columns,O=0;O<T;O++)if(0===this.Rdiag[O])return!1;return!0},get upperTriangularMatrix(){var T=this.QR,O=T.columns,$=new P(O,O),Z,W;for(Z=0;Z<O;Z++)for(W=0;W<O;W++)$[Z][W]=Z<W?T[Z][W]:Z===W?this.Rdiag[Z]:0;return $},get orthogonalMatrix(){var T=this.QR,O=T.rows,$=T.columns,Z=new P(O,$),W,K,Q,G;for(Q=$-1;0<=Q;Q--){for(W=0;W<O;W++)Z[W][Q]=0;for(Z[Q][Q]=1,K=Q;K<$;K++)if(0!==T[Q][Q]){for(G=0,W=Q;W<O;W++)G+=T[W][Q]*Z[W][K];for(G=-G/T[Q][Q],W=Q;W<O;W++)Z[W][K]+=G*T[W][Q]}}return Z}},D.exports=R},function(D,E,I){'use strict';function R(K){return K=F.checkMatrix(K),P(K,F.eye(K.rows))}function P(K,Q){return K=F.checkMatrix(K),Q=F.checkMatrix(Q),K.isSquare()?new $(K).solve(Q):new Z(K).solve(Q)}var F=I(1).Matrix,T=I(45),O=I(114),$=I(44),Z=I(115),W=I(113);F.inverse=F.inv=R,F.prototype.inverse=F.prototype.inv=function(){return R(this)},F.solve=P,F.prototype.solve=function(K){return P(this,K)},D.exports={SingularValueDecomposition:T,SVD:T,EigenvalueDecomposition:O,EVD:O,LuDecomposition:$,LU:$,QrDecomposition:Z,QR:Z,CholeskyDecomposition:W,CHO:W,inverse:R,solve:P}},function(){'use strict';Symbol.species||(Symbol.species=Symbol.for('@@species'))},function(D,E,I){'use strict';var R=I(3);D.exports=class extends R{constructor(F,T){super(F,F.rows,1),this.column=T}set(F,T,O){return this.matrix.set(F,this.column,O),this}get(F){return this.matrix.get(F,this.column)}}},function(D,E,I){'use strict';var R=I(3);D.exports=class extends R{constructor(F){super(F,F.rows,F.columns)}set(F,T,O){return this.matrix.set(F,this.columns-T-1,O),this}get(F,T){return this.matrix.get(F,this.columns-T-1)}}},function(D,E,I){'use strict';var R=I(3);D.exports=class extends R{constructor(F){super(F,F.rows,F.columns)}set(F,T,O){return this.matrix.set(this.rows-F-1,T,O),this}get(F,T){return this.matrix.get(this.rows-F-1,T)}}},function(D,E,I){'use strict';var R=I(3);D.exports=class extends R{constructor(F,T){super(F,1,F.columns),this.row=T}set(F,T,O){return this.matrix.set(this.row,T,O),this}get(F,T){return this.matrix.get(this.row,T)}}},function(D,E,I){'use strict';var R=I(3),P=I(7);D.exports=class extends R{constructor(T,O,$){var Z=P.checkIndices(T,O,$);super(T,Z.row.length,Z.column.length),this.rowIndices=Z.row,this.columnIndices=Z.column}set(T,O,$){return this.matrix.set(this.rowIndices[T],this.columnIndices[O],$),this}get(T,O){return this.matrix.get(this.rowIndices[T],this.columnIndices[O])}}},function(D,E,I){'use strict';var R=I(3),P=I(7);D.exports=class extends R{constructor(T,O,$,Z,W){P.checkRange(T,O,$,Z,W),super(T,$-O+1,W-Z+1),this.startRow=O,this.startColumn=Z}set(T,O,$){return this.matrix.set(this.startRow+T,this.startColumn+O,$),this}get(T,O){return this.matrix.get(this.startRow+T,this.startColumn+O)}}},function(D,E,I){'use strict';var R=I(3);D.exports=class extends R{constructor(F){super(F,F.columns,F.rows)}set(F,T,O){return this.matrix.set(T,F,O),this}get(F,T){return this.matrix.get(T,F)}}},function(D,E,I){var R=I(8),P=I(46);D.exports={optimize:function(O,$,Z,W,K,Q,G,ee,te,ne){var se=0;if('object'!=typeof $[0])for(var oe=0;oe<$.length;oe++)$[oe]=[$[oe]];var de=-50,ue=$.length,ce=W.length,he=R.zeros(ue,1),ge=R.zeros(ce,1),pe=0.01/de,me=0.01/de,fe=R.zeros(ce,ue),oe,le;if(Z.length!=W.length){console.log('lm.m error: the length of t must equal the length of y_dat'),length_t=Z.length,length_y_dat=W.length;var pe=0;return}K=K||_Mathsqrt((ce-ue+1)/P.multiply(P.transpose(W),W)),Q=Q||1e-3,G=G||P.multiply(_Mathabs($),-100),ee=ee||P.multiply(_Mathabs($),100),te=te||1,ne=ne||[3,10*ue,1e-3,1e-3,1e-3,0.01,0.01,11,9,1];var we=ne[0],je=ne[1],ve=ne[2],Se=ne[3],De=ne[4],Ce=ne[5],Ee=ne[6],Ie=ne[7],Ae=ne[8],Re=ne[9];if(0,!Q.length||1==Q.length){for(var Pe=Array(ue),oe=0;oe<ue;oe++)Pe[oe]=[Q];Q=Pe}var Fe=[];for(oe=0;oe<Q.length;oe++)0!=Q[oe][0]&&Fe.push(oe);var Te=Fe.length,ze=!1,Me=null;if(!K.length||K.length<ce){var Xe=P.multiply(R.ones(ce,1),K[0]);Me=P.dotMultiply(Xe,Xe)}else Me=P.dotMultiply(K,K);var Ye=this.lm_matx(O,Z,he,ge,1,fe,$,W,Me,Q,te),Ne=Ye.JtWJ,Oe=Ye.JtWdy,pe=Ye.Chi_sq,Le=Ye.y_hat,fe=Ye.J;_Mathmax(_Mathabs(Oe))<ve&&(console.log(' *** Your Initial Guess is Extremely Close to Optimal ***'),console.log(' *** epsilon_1 = ',ve),ze=!0),1===Re?lambda=Ee:(lambda=Ee*_Mathmax(P.diag(Ne)),nu=2),me=pe;for(var Ue=null;!ze&&se<=je;){++se,Ue=1===Re?P.solve(P.add(Ne,P.multiply(P.diag(P.diag(Ne)),lambda)),Oe):P.solve(P.add(Ne,P.multiply(R.eye(ue),lambda)),Oe);var Be=Array(Fe.length);for(le=0;le<Fe.length;le++)Be[le]=Ue[Fe[le]];var Ve=P.add($,Be);for(le=0;le<Ve.length;le++)Ve[le][0]=_Mathmin(_Mathmax(G[le][0],Ve[le][0]),ee[le][0]);var qe=P.subtract(W,O(Z,Ve,te)),$e=P.multiply(P.transpose(qe),P.dotMultiply(qe,Me));if(2==Re){var Ze=P.multiply(P.transpose(Oe),Ue),We=P.multiply(Ze,P.inv(P.add(P.multiply(P.subtract($e-pe),1/2)),P.multiply(Ze,2)));Ue=P.multiply(We,Ue);for(var le=0;le<Fe.length;le++)Be[le]=Ue[Fe[le]];Ve=P.add($,Be),Ve=P.min(P.max(G,Ve),ee),qe=P.subtract(W,O(Z,Ve,te)),$e=P.multiply(P.transpose(qe),mat.dotMultiply(qe,Me))}var He=(pe-$e)/P.multiply(P.multiply(P.transpose(Ue),2),P.add(P.multiply(lambda,Ue),Oe));He>Ce?(dX2=pe-me,me=pe,he=$,ge=Le,$=Ve,Ye=this.lm_matx(O,Z,he,ge,dX2,fe,$,W,Me,Q,te),Ne=Ye.JtWJ,Oe=Ye.JtWdy,pe=Ye.Chi_sq,Le=Ye.y_hat,fe=Ye.J,1===Re?lambda=_Mathmax(lambda/Ae,1e-7):2===Re?lambda=_Mathmax(lambda/(1+We),1e-7):3===Re?(lambda=P.multiply(_Mathmax(1/3,3^1-(2*He-1)),lambda),nu=2):void 0):(pe=me,0==se%(2*ue)&&(Ye=this.lm_matx(O,Z,he,ge,-1,fe,$,W,Me,Q,te),Ne=Ye.JtWJ,Oe=Ye.JtWdy,dX2=Ye.Chi_sq,Le=Ye.y_hat,fe=Ye.J),1===Re?lambda=_Mathmin(lambda*Ie,1e7):2===Re?lambda+=_Mathabs(($e-pe)/2/We):3===Re?(lambda*=nu,nu=2*nu):void 0)}return Me=P.multiply(P.multiply(P.transpose(qe),qe),R.ones(ce,1)),Me.apply(function(Je,Ke){Me[Je][Ke]=(ce-Te+1)/Me[Je][Ke]}),Ye=this.lm_matx(O,Z,he,ge,-1,fe,$,W,Me,Q,te),Ne=Ye.JtWJ,Oe=Ye.JtWdy,pe=Ye.Chi_sq,Le=Ye.y_hat,fe=Ye.J,{p:$,X2:pe}},lm_FD_J:function(O,$,Z,W,K,Q){var G=W.length,ee=Z.length;K=K||P.multiply(R.ones(ee,1),1e-3);for(var te=Z.clone(),ne=new R(G,ee),ae=Array(ee),se=0;se<ee;se++){if(ae[se]=K[se]*(1+_Mathabs(Z[se][0])),Z[se]=[te[se][0]+ae[se]],0!=ae[se])if(y1=O($,Z,Q),0>K[se][0])for(var oe=P.dotDivide(P.subtract(y1,W),ae[se]),le=0;le<G;le++)ne[le][se]=oe[le][0];else{Z[se][0]=te[se][0]-ae[se];for(var oe=P.dotDivide(P.subtract(y1,O($,Z,Q)),2*ae[se]),le=0;le<G;le++)ne[le][se]=oe[le][0]}Z[se]=te[se]}return ne},lm_Broyden_J:function(O,$,Z,W,K){var Q=P.subtract(W,O),G=P.transpose(Q);return G.div(P.multiply(G,Q)),Z=P.add(Z,P.multiply(P.subtract(K,P.add($,P.multiply(Z,Q))),G)),Z},lm_matx:function(O,$,Z,W,K,Q,G,ee,te,ne,ae,se){var oe=ee.length,le=G.length;ne=ne||1e-3;var de=O($,G,ae);Q=0==se%(2*le)||0<K?this.lm_FD_J(O,$,G,de,ne,ae):this.lm_Broyden_J(Z,W,Q,G,de);var ue=P.subtract(ee,de),ce=P.multiply(P.transpose(ue),P.dotMultiply(ue,te)),he=P.transpose(Q),ge=P.multiply(he,P.dotMultiply(Q,P.multiply(te,R.ones(1,le)))),pe=P.multiply(he,P.dotMultiply(te,ue));return{JtWJ:ge,JtWdy:pe,Chi_sq:ce,y_hat:de,J:Q}}}},function(D,E,I){'use strict';D.exports=I(125),D.exports.Matrix=I(8),D.exports.Matrix.algebra=I(46)},function(D,E,I){'use strict';function R(F){if(!(this instanceof R))return new R(F);if(F=P.checkMatrix(F),!F.isSymmetric())throw new Error('Matrix is not symmetric');var T=F,O=T.rows,$=new P(O,O),Z=!0,W,K,Q;for(K=0;K<O;K++){var G=$[K],ee=0;for(Q=0;Q<K;Q++){var te=$[Q],ne=0;for(W=0;W<Q;W++)ne+=te[W]*G[W];G[Q]=ne=(T[K][Q]-ne)/$[Q][Q],ee+=ne*ne}for(ee=T[K][K]-ee,Z&=0<ee,$[K][K]=_Mathsqrt(_Mathmax(ee,0)),Q=K+1;Q<O;Q++)$[K][Q]=0}if(!Z)throw new Error('Matrix is not positive definite');this.L=$}var P=I(4);R.prototype={get leftTriangularFactor(){return this.L},solve:function(F){F=P.checkMatrix(F);var T=this.L,O=T.rows;if(F.rows!==O)throw new Error('Matrix dimensions do not match');var $=F.columns,Z=F.clone(),W,K,Q;for(Q=0;Q<O;Q++)for(K=0;K<$;K++){for(W=0;W<Q;W++)Z[Q][K]-=Z[W][K]*T[Q][W];Z[Q][K]/=T[Q][Q]}for(Q=O-1;0<=Q;Q--)for(K=0;K<$;K++){for(W=Q+1;W<O;W++)Z[Q][K]-=Z[W][K]*T[W][Q];Z[Q][K]/=T[Q][Q]}return Z}},D.exports=R},function(D,E,I){'use strict';function R(K){if(!(this instanceof R))return new R(K);if(K=Z.checkMatrix(K),!K.isSquare())throw new Error('Matrix is not a square matrix');var Q=K.columns,G=Z.zeros(Q,Q),ee=Array(Q),te=Array(Q),ne=K,ae,se;if(K.isSymmetric()){for(ae=0;ae<Q;ae++)for(se=0;se<Q;se++)G[ae][se]=ne[ae][se];P(Q,te,ee,G),F(Q,te,ee,G)}else{var oe=Z.zeros(Q,Q),le=Array(Q);for(se=0;se<Q;se++)for(ae=0;ae<Q;ae++)oe[ae][se]=ne[ae][se];T(Q,oe,le,G),O(Q,te,ee,G,oe)}this.n=Q,this.e=te,this.d=ee,this.V=G}function P(K,Q,G,ee){var te,ne,ae,se,oe,le,de,ue;for(oe=0;oe<K;oe++)G[oe]=ee[K-1][oe];for(se=K-1;0<se;se--){for(ue=0,ae=0,le=0;le<se;le++)ue+=_Mathabs(G[le]);if(0===ue)for(Q[se]=G[se-1],oe=0;oe<se;oe++)G[oe]=ee[se-1][oe],ee[se][oe]=0,ee[oe][se]=0;else{for(le=0;le<se;le++)G[le]/=ue,ae+=G[le]*G[le];for(te=G[se-1],ne=_Mathsqrt(ae),0<te&&(ne=-ne),Q[se]=ue*ne,ae-=te*ne,G[se-1]=te-ne,oe=0;oe<se;oe++)Q[oe]=0;for(oe=0;oe<se;oe++){for(te=G[oe],ee[oe][se]=te,ne=Q[oe]+ee[oe][oe]*te,le=oe+1;le<=se-1;le++)ne+=ee[le][oe]*G[le],Q[le]+=ee[le][oe]*te;Q[oe]=ne}for(te=0,oe=0;oe<se;oe++)Q[oe]/=ae,te+=Q[oe]*G[oe];for(de=te/(ae+ae),oe=0;oe<se;oe++)Q[oe]-=de*G[oe];for(oe=0;oe<se;oe++){for(te=G[oe],ne=Q[oe],le=oe;le<=se-1;le++)ee[le][oe]-=te*Q[le]+ne*G[le];G[oe]=ee[se-1][oe],ee[se][oe]=0}}G[se]=ae}for(se=0;se<K-1;se++){if(ee[K-1][se]=ee[se][se],ee[se][se]=1,ae=G[se+1],0!==ae){for(le=0;le<=se;le++)G[le]=ee[le][se+1]/ae;for(oe=0;oe<=se;oe++){for(ne=0,le=0;le<=se;le++)ne+=ee[le][se+1]*ee[le][oe];for(le=0;le<=se;le++)ee[le][oe]-=ne*G[le]}}for(le=0;le<=se;le++)ee[le][se+1]=0}for(oe=0;oe<K;oe++)G[oe]=ee[K-1][oe],ee[K-1][oe]=0;ee[K-1][K-1]=1,Q[0]=0}function F(K,Q,G,ee){var te,ne,ae,se,oe,le,de,ue,ce,he,ge,pe,me,fe,xe,be,ye;for(ae=1;ae<K;ae++)Q[ae-1]=Q[ae];Q[K-1]=0;var ke=0,_e=0,we=2.220446049250313e-16;for(le=0;le<K;le++){for(_e=_Mathmax(_e,_Mathabs(G[le])+_Mathabs(Q[le])),de=le;de<K&&!(_Mathabs(Q[de])<=we*_e);)de++;if(de>le){ye=0;do{for(++ye,te=G[le],ue=(G[le+1]-te)/(2*Q[le]),ce=W(ue,1),0>ue&&(ce=-ce),G[le]=Q[le]/(ue+ce),G[le+1]=Q[le]*(ue+ce),he=G[le+1],ne=te-G[le],ae=le+2;ae<K;ae++)G[ae]-=ne;for(ke+=ne,ue=G[de],ge=1,pe=ge,me=ge,fe=Q[le+1],xe=0,be=0,ae=de-1;ae>=le;ae--)for(me=pe,pe=ge,be=xe,te=ge*Q[ae],ne=ge*ue,ce=W(ue,Q[ae]),Q[ae+1]=xe*ce,xe=Q[ae]/ce,ge=ue/ce,ue=ge*G[ae]-xe*te,G[ae+1]=ne+xe*(ge*te+xe*G[ae]),oe=0;oe<K;oe++)ne=ee[oe][ae+1],ee[oe][ae+1]=xe*ee[oe][ae]+ge*ne,ee[oe][ae]=ge*ee[oe][ae]-xe*ne;ue=-xe*be*me*fe*Q[le]/he,Q[le]=xe*ue,G[le]=ge*ue}while(_Mathabs(Q[le])>we*_e)}G[le]+=ke,Q[le]=0}for(ae=0;ae<K-1;ae++){for(oe=ae,ue=G[ae],se=ae+1;se<K;se++)G[se]<ue&&(oe=se,ue=G[se]);if(oe!==ae)for(G[oe]=G[ae],G[ae]=ue,se=0;se<K;se++)ue=ee[se][ae],ee[se][ae]=ee[se][oe],ee[se][oe]=ue}}function T(K,Q,G,ee){var te=0,ne=K-1,ae,se,oe,le,de,ue,ce;for(ue=te+1;ue<=ne-1;ue++){for(ce=0,le=ue;le<=ne;le++)ce+=_Mathabs(Q[le][ue-1]);if(0!==ce){for(oe=0,le=ne;le>=ue;le--)G[le]=Q[le][ue-1]/ce,oe+=G[le]*G[le];for(se=_Mathsqrt(oe),0<G[ue]&&(se=-se),oe-=G[ue]*se,G[ue]-=se,de=ue;de<K;de++){for(ae=0,le=ne;le>=ue;le--)ae+=G[le]*Q[le][de];for(ae/=oe,le=ue;le<=ne;le++)Q[le][de]-=ae*G[le]}for(le=0;le<=ne;le++){for(ae=0,de=ne;de>=ue;de--)ae+=G[de]*Q[le][de];for(ae/=oe,de=ue;de<=ne;de++)Q[le][de]-=ae*G[de]}G[ue]=ce*G[ue],Q[ue][ue-1]=ce*se}}for(le=0;le<K;le++)for(de=0;de<K;de++)ee[le][de]=le===de?1:0;for(ue=ne-1;ue>=te+1;ue--)if(0!==Q[ue][ue-1]){for(le=ue+1;le<=ne;le++)G[le]=Q[le][ue-1];for(de=ue;de<=ne;de++){for(se=0,le=ue;le<=ne;le++)se+=G[le]*ee[le][de];for(se=se/G[ue]/Q[ue][ue-1],le=ue;le<=ne;le++)ee[le][de]+=se*G[le]}}}function O(K,Q,G,ee,te){var ne=K-1,ae=0,se=K-1,oe=2.220446049250313e-16,le=0,de=0,ue=0,ce=0,he=0,ge=0,pe=0,me=0,fe,xe,be,ye,ke,_e,we,je,ve,Se,De,Ce,Ee,Ie,Ae;for(fe=0;fe<K;fe++)for((fe<ae||fe>se)&&(G[fe]=te[fe][fe],Q[fe]=0),xe=_Mathmax(fe-1,0);xe<K;xe++)de+=_Mathabs(te[fe][xe]);for(;ne>=ae;){for(ye=ne;ye>ae&&(ge=_Mathabs(te[ye-1][ye-1])+_Mathabs(te[ye][ye]),0===ge&&(ge=de),!(_Mathabs(te[ye][ye-1])<oe*ge));)ye--;if(ye===ne)te[ne][ne]+=le,G[ne]=te[ne][ne],Q[ne]=0,ne--,me=0;else if(ye===ne-1){if(we=te[ne][ne-1]*te[ne-1][ne],ue=(te[ne-1][ne-1]-te[ne][ne])/2,ce=ue*ue+we,pe=_Mathsqrt(_Mathabs(ce)),te[ne][ne]+=le,te[ne-1][ne-1]=te[ne-1][ne-1]+le,je=te[ne][ne],0<=ce){for(pe=0<=ue?ue+pe:ue-pe,G[ne-1]=je+pe,G[ne]=G[ne-1],0!==pe&&(G[ne]=je-we/pe),Q[ne-1]=0,Q[ne]=0,je=te[ne][ne-1],ge=_Mathabs(je)+_Mathabs(pe),ue=je/ge,ce=pe/ge,he=_Mathsqrt(ue*ue+ce*ce),ue/=he,ce/=he,xe=ne-1;xe<K;xe++)pe=te[ne-1][xe],te[ne-1][xe]=ce*pe+ue*te[ne][xe],te[ne][xe]=ce*te[ne][xe]-ue*pe;for(fe=0;fe<=ne;fe++)pe=te[fe][ne-1],te[fe][ne-1]=ce*pe+ue*te[fe][ne],te[fe][ne]=ce*te[fe][ne]-ue*pe;for(fe=ae;fe<=se;fe++)pe=ee[fe][ne-1],ee[fe][ne-1]=ce*pe+ue*ee[fe][ne],ee[fe][ne]=ce*ee[fe][ne]-ue*pe}else G[ne-1]=je+ue,G[ne]=je+ue,Q[ne-1]=pe,Q[ne]=-pe;ne-=2,me=0}else{if(je=te[ne][ne],ve=0,we=0,ye<ne&&(ve=te[ne-1][ne-1],we=te[ne][ne-1]*te[ne-1][ne]),10==me){for(le+=je,fe=ae;fe<=ne;fe++)te[fe][fe]-=je;ge=_Mathabs(te[ne][ne-1])+_Mathabs(te[ne-1][ne-2]),je=ve=0.75*ge,we=-0.4375*ge*ge}if(30==me&&(ge=(ve-je)/2,ge=ge*ge+we,0<ge)){for(ge=_Mathsqrt(ge),ve<je&&(ge=-ge),ge=je-we/((ve-je)/2+ge),fe=ae;fe<=ne;fe++)te[fe][fe]-=ge;le+=ge,je=ve=we=0.964}for(++me,ke=ne-2;ke>=ye&&(pe=te[ke][ke],he=je-pe,ge=ve-pe,ue=(he*ge-we)/te[ke+1][ke]+te[ke][ke+1],ce=te[ke+1][ke+1]-pe-he-ge,he=te[ke+2][ke+1],ge=_Mathabs(ue)+_Mathabs(ce)+_Mathabs(he),ue/=ge,ce/=ge,he/=ge,ke!==ye)&&!(_Mathabs(te[ke][ke-1])*(_Mathabs(ce)+_Mathabs(he))<oe*(_Mathabs(ue)*(_Mathabs(te[ke-1][ke-1])+_Mathabs(pe)+_Mathabs(te[ke+1][ke+1]))));)ke--;for(fe=ke+2;fe<=ne;fe++)te[fe][fe-2]=0,fe>ke+2&&(te[fe][fe-3]=0);for(be=ke;be<=ne-1&&(Ie=be!==ne-1,be!==ke&&(ue=te[be][be-1],ce=te[be+1][be-1],he=Ie?te[be+2][be-1]:0,je=_Mathabs(ue)+_Mathabs(ce)+_Mathabs(he),0!==je&&(ue/=je,ce/=je,he/=je)),0!==je);be++)if(ge=_Mathsqrt(ue*ue+ce*ce+he*he),0>ue&&(ge=-ge),0!==ge){for(be===ke?ye!==ke&&(te[be][be-1]=-te[be][be-1]):te[be][be-1]=-ge*je,ue+=ge,je=ue/ge,ve=ce/ge,pe=he/ge,ce/=ue,he/=ue,xe=be;xe<K;xe++)ue=te[be][xe]+ce*te[be+1][xe],Ie&&(ue+=he*te[be+2][xe],te[be+2][xe]=te[be+2][xe]-ue*pe),te[be][xe]-=ue*je,te[be+1][xe]=te[be+1][xe]-ue*ve;for(fe=0;fe<=_Mathmin(ne,be+3);fe++)ue=je*te[fe][be]+ve*te[fe][be+1],Ie&&(ue+=pe*te[fe][be+2],te[fe][be+2]=te[fe][be+2]-ue*he),te[fe][be]-=ue,te[fe][be+1]=te[fe][be+1]-ue*ce;for(fe=ae;fe<=se;fe++)ue=je*ee[fe][be]+ve*ee[fe][be+1],Ie&&(ue+=pe*ee[fe][be+2],ee[fe][be+2]=ee[fe][be+2]-ue*he),ee[fe][be]-=ue,ee[fe][be+1]=ee[fe][be+1]-ue*ce}}}if(0!==de){for(ne=K-1;0<=ne;ne--)if(ue=G[ne],ce=Q[ne],0===ce)for(ye=ne,te[ne][ne]=1,fe=ne-1;0<=fe;fe--){for(we=te[fe][fe]-ue,he=0,xe=ye;xe<=ne;xe++)he+=te[fe][xe]*te[xe][ne];if(0>Q[fe])pe=we,ge=he;else if(ye=fe,0===Q[fe]?te[fe][ne]=0===we?-he/(oe*de):-he/we:(je=te[fe][fe+1],ve=te[fe+1][fe],ce=(G[fe]-ue)*(G[fe]-ue)+Q[fe]*Q[fe],_e=(je*ge-pe*he)/ce,te[fe][ne]=_e,te[fe+1][ne]=_Mathabs(je)>_Mathabs(pe)?(-he-we*_e)/je:(-ge-ve*_e)/pe),_e=_Mathabs(te[fe][ne]),1<oe*_e*_e)for(xe=fe;xe<=ne;xe++)te[xe][ne]/=_e}else if(0>ce)for(ye=ne-1,_Mathabs(te[ne][ne-1])>_Mathabs(te[ne-1][ne])?(te[ne-1][ne-1]=ce/te[ne][ne-1],te[ne-1][ne]=-(te[ne][ne]-ue)/te[ne][ne-1]):(Ae=$(0,-te[ne-1][ne],te[ne-1][ne-1]-ue,ce),te[ne-1][ne-1]=Ae[0],te[ne-1][ne]=Ae[1]),te[ne][ne-1]=0,te[ne][ne]=1,fe=ne-2;0<=fe;fe--){for(Se=0,De=0,xe=ye;xe<=ne;xe++)Se+=te[fe][xe]*te[xe][ne-1],De+=te[fe][xe]*te[xe][ne];if(we=te[fe][fe]-ue,0>Q[fe])pe=we,he=Se,ge=De;else if(ye=fe,0===Q[fe]?(Ae=$(-Se,-De,we,ce),te[fe][ne-1]=Ae[0],te[fe][ne]=Ae[1]):(je=te[fe][fe+1],ve=te[fe+1][fe],Ce=(G[fe]-ue)*(G[fe]-ue)+Q[fe]*Q[fe]-ce*ce,Ee=2*(G[fe]-ue)*ce,0===Ce&&0===Ee&&(Ce=oe*de*(_Mathabs(we)+_Mathabs(ce)+_Mathabs(je)+_Mathabs(ve)+_Mathabs(pe))),Ae=$(je*he-pe*Se+ce*De,je*ge-pe*De-ce*Se,Ce,Ee),te[fe][ne-1]=Ae[0],te[fe][ne]=Ae[1],_Mathabs(je)>_Mathabs(pe)+_Mathabs(ce)?(te[fe+1][ne-1]=(-Se-we*te[fe][ne-1]+ce*te[fe][ne])/je,te[fe+1][ne]=(-De-we*te[fe][ne]-ce*te[fe][ne-1])/je):(Ae=$(-he-ve*te[fe][ne-1],-ge-ve*te[fe][ne],pe,ce),te[fe+1][ne-1]=Ae[0],te[fe+1][ne]=Ae[1])),_e=_Mathmax(_Mathabs(te[fe][ne-1]),_Mathabs(te[fe][ne])),1<oe*_e*_e)for(xe=fe;xe<=ne;xe++)te[xe][ne-1]=te[xe][ne-1]/_e,te[xe][ne]/=_e}for(fe=0;fe<K;fe++)if(fe<ae||fe>se)for(xe=fe;xe<K;xe++)ee[fe][xe]=te[fe][xe];for(xe=K-1;xe>=ae;xe--)for(fe=ae;fe<=se;fe++){for(pe=0,be=ae;be<=_Mathmin(xe,se);be++)pe+=ee[fe][be]*te[be][xe];ee[fe][xe]=pe}}}function $(K,Q,G,ee){var te,ne;return _Mathabs(G)>_Mathabs(ee)?(te=ee/G,ne=G+te*ee,[(K+te*Q)/ne,(Q-te*K)/ne]):(te=G/ee,ne=ee+te*G,[(te*K+Q)/ne,(te*Q-K)/ne])}var Z=I(4),W=I(17).hypotenuse;R.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return this.V},get diagonalMatrix(){var K=this.n,Q=this.e,G=this.d,ee=new Z(K,K),te,ne;for(te=0;te<K;te++){for(ne=0;ne<K;ne++)ee[te][ne]=0;ee[te][te]=G[te],0<Q[te]?ee[te][te+1]=Q[te]:0>Q[te]&&(ee[te][te-1]=Q[te])}return ee}},D.exports=R},function(D,E,I){'use strict';function R(F){if(!(this instanceof R))return new R(F);F=P.checkMatrix(F);var T=F.clone(),O=T.rows,$=T.columns,Z=Array(O),W=1,K,Q,G,ee,te,ne,ae,se,oe,le;for(K=0;K<O;K++)Z[K]=K;for(oe=Array(O),Q=0;Q<$;Q++){for(K=0;K<O;K++)oe[K]=T[K][Q];for(K=0;K<O;K++){for(se=T[K],le=_Mathmin(K,Q),te=0,G=0;G<le;G++)te+=se[G]*oe[G];se[Q]=oe[K]-=te}for(ee=Q,K=Q+1;K<O;K++)_Mathabs(oe[K])>_Mathabs(oe[ee])&&(ee=K);if(ee!==Q){for(G=0;G<$;G++)ne=T[ee][G],T[ee][G]=T[Q][G],T[Q][G]=ne;ae=Z[ee],Z[ee]=Z[Q],Z[Q]=ae,W=-W}if(Q<O&&0!==T[Q][Q])for(K=Q+1;K<O;K++)T[K][Q]/=T[Q][Q]}this.LU=T,this.pivotVector=Z,this.pivotSign=W}var P=I(4);R.prototype={isSingular:function(){for(var F=this.LU,T=F.columns,O=0;O<T;O++)if(0===F[O][O])return!0;return!1},get determinant(){var F=this.LU;if(!F.isSquare())throw new Error('Matrix must be square');for(var T=this.pivotSign,O=F.columns,$=0;$<O;$++)T*=F[$][$];return T},get lowerTriangularFactor(){for(var F=this.LU,T=F.rows,O=F.columns,$=new P(T,O),Z=0;Z<T;Z++)for(var W=0;W<O;W++)$[Z][W]=Z>W?F[Z][W]:Z===W?1:0;return $},get upperTriangularFactor(){for(var F=this.LU,T=F.rows,O=F.columns,$=new P(T,O),Z=0;Z<T;Z++)for(var W=0;W<O;W++)$[Z][W]=Z<=W?F[Z][W]:0;return $},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(F){F=P.checkMatrix(F);var T=this.LU,O=T.rows;if(O!==F.rows)throw new Error('Invalid matrix dimensions');if(this.isSingular())throw new Error('LU matrix is singular');var $=F.columns,Z=F.subMatrixRow(this.pivotVector,0,$-1),W=T.columns,K,Q,G;for(G=0;G<W;G++)for(K=G+1;K<W;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*T[K][G];for(G=W-1;0<=G;G--){for(Q=0;Q<$;Q++)Z[G][Q]/=T[G][G];for(K=0;K<G;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*T[K][G]}return Z}},D.exports=R},function(D,E,I){'use strict';function R(T){if(!(this instanceof R))return new R(T);T=P.checkMatrix(T);var O=T.clone(),$=T.rows,Z=T.columns,W=Array(Z),K,Q,G,ee;for(G=0;G<Z;G++){var te=0;for(K=G;K<$;K++)te=F(te,O[K][G]);if(0!==te){for(0>O[G][G]&&(te=-te),K=G;K<$;K++)O[K][G]/=te;for(O[G][G]+=1,Q=G+1;Q<Z;Q++){for(ee=0,K=G;K<$;K++)ee+=O[K][G]*O[K][Q];for(ee=-ee/O[G][G],K=G;K<$;K++)O[K][Q]+=ee*O[K][G]}}W[G]=-te}this.QR=O,this.Rdiag=W}var P=I(4),F=I(17).hypotenuse;R.prototype={solve:function(T){T=P.checkMatrix(T);var O=this.QR,$=O.rows;if(T.rows!==$)throw new Error('Matrix row dimensions must agree');if(!this.isFullRank())throw new Error('Matrix is rank deficient');var Z=T.columns,W=T.clone(),K=O.columns,Q,G,ee,te;for(ee=0;ee<K;ee++)for(G=0;G<Z;G++){for(te=0,Q=ee;Q<$;Q++)te+=O[Q][ee]*W[Q][G];for(te=-te/O[ee][ee],Q=ee;Q<$;Q++)W[Q][G]+=te*O[Q][ee]}for(ee=K-1;0<=ee;ee--){for(G=0;G<Z;G++)W[ee][G]/=this.Rdiag[ee];for(Q=0;Q<ee;Q++)for(G=0;G<Z;G++)W[Q][G]-=W[ee][G]*O[Q][ee]}return W.subMatrix(0,K-1,0,Z-1)},isFullRank:function(){for(var T=this.QR.columns,O=0;O<T;O++)if(0===this.Rdiag[O])return!1;return!0},get upperTriangularFactor(){var T=this.QR,O=T.columns,$=new P(O,O),Z,W;for(Z=0;Z<O;Z++)for(W=0;W<O;W++)$[Z][W]=Z<W?T[Z][W]:Z===W?this.Rdiag[Z]:0;return $},get orthogonalFactor(){var T=this.QR,O=T.rows,$=T.columns,Z=new P(O,$),W,K,Q,G;for(Q=$-1;0<=Q;Q--){for(W=0;W<O;W++)Z[W][Q]=0;for(Z[Q][Q]=1,K=Q;K<$;K++)if(0!==T[Q][Q]){for(G=0,W=Q;W<O;W++)G+=T[W][Q]*Z[W][K];for(G=-G/T[Q][Q],W=Q;W<O;W++)Z[W][K]+=G*T[W][Q]}}return Z}},D.exports=R},function(D,E,I){'use strict';function R(T,O){if(!(this instanceof R))return new R(T,O);T=P.checkMatrix(T),O=O||{};var $=T.clone(),Z=T.rows,W=T.columns,K=_Mathmin(Z,W),Q=!0,G=!0;!1===O.computeLeftSingularVectors&&(Q=!1),!1===O.computeRightSingularVectors&&(G=!1);var ee=!0===O.autoTranspose,te=!1;if(Z<W)if(!ee)console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');else{$=$.transpose(),Z=$.rows,W=$.columns,te=!0;var ne=Q;Q=G,G=ne}var ae=Array(_Mathmin(Z+1,W)),se=P.zeros(Z,K),oe=P.zeros(W,W),le=Array(W),de=Array(Z),ue=_Mathmin(Z-1,W),ce=_Mathmax(0,_Mathmin(W-2,Z)),he,ge,pe,me,fe,xe,be,ye,ke,_e,we,je,ve,Se,De,Ce,Ee,Ie,Ae,Re,Pe;for(pe=0,_e=_Mathmax(ue,ce);pe<_e;pe++){if(pe<ue){for(ae[pe]=0,he=pe;he<Z;he++)ae[pe]=F(ae[pe],$[he][pe]);if(0!==ae[pe]){for(0>$[pe][pe]&&(ae[pe]=-ae[pe]),he=pe;he<Z;he++)$[he][pe]/=ae[pe];$[pe][pe]+=1}ae[pe]=-ae[pe]}for(ge=pe+1;ge<W;ge++){if(pe<ue&&0!==ae[pe]){for(fe=0,he=pe;he<Z;he++)fe+=$[he][pe]*$[he][ge];for(fe=-fe/$[pe][pe],he=pe;he<Z;he++)$[he][ge]+=fe*$[he][pe]}le[ge]=$[pe][ge]}if(Q&&pe<ue)for(he=pe;he<Z;he++)se[he][pe]=$[he][pe];if(pe<ce){for(le[pe]=0,he=pe+1;he<W;he++)le[pe]=F(le[pe],le[he]);if(0!==le[pe]){for(0>le[pe+1]&&(le[pe]=-le[pe]),he=pe+1;he<W;he++)le[he]/=le[pe];le[pe+1]+=1}if(le[pe]=-le[pe],pe+1<Z&&0!==le[pe]){for(he=pe+1;he<Z;he++)de[he]=0;for(ge=pe+1;ge<W;ge++)for(he=pe+1;he<Z;he++)de[he]+=le[ge]*$[he][ge];for(ge=pe+1;ge<W;ge++)for(fe=-le[ge]/le[pe+1],he=pe+1;he<Z;he++)$[he][ge]+=fe*de[he]}if(G)for(he=pe+1;he<W;he++)oe[he][pe]=le[he]}}if(me=_Mathmin(W,Z+1),ue<W&&(ae[ue]=$[ue][ue]),Z<me&&(ae[me-1]=0),ce+1<me&&(le[ce]=$[ce][me-1]),le[me-1]=0,Q){for(ge=ue;ge<K;ge++){for(he=0;he<Z;he++)se[he][ge]=0;se[ge][ge]=1}for(pe=ue-1;0<=pe;pe--)if(0!==ae[pe]){for(ge=pe+1;ge<K;ge++){for(fe=0,he=pe;he<Z;he++)fe+=se[he][pe]*se[he][ge];for(fe=-fe/se[pe][pe],he=pe;he<Z;he++)se[he][ge]+=fe*se[he][pe]}for(he=pe;he<Z;he++)se[he][pe]=-se[he][pe];for(se[pe][pe]=1+se[pe][pe],he=0;he<pe-1;he++)se[he][pe]=0}else{for(he=0;he<Z;he++)se[he][pe]=0;se[pe][pe]=1}}if(G)for(pe=W-1;0<=pe;pe--){if(pe<ce&&0!==le[pe])for(ge=pe+1;ge<W;ge++){for(fe=0,he=pe+1;he<W;he++)fe+=oe[he][pe]*oe[he][ge];for(fe=-fe/oe[pe+1][pe],he=pe+1;he<W;he++)oe[he][ge]+=fe*oe[he][pe]}for(he=0;he<W;he++)oe[he][pe]=0;oe[pe][pe]=1}for(var Fe=me-1,Te=0,ze=2.220446049250313e-16;0<me;){for(pe=me-2;-1<=pe&&-1!==pe;pe--)if(_Mathabs(le[pe])<=ze*(_Mathabs(ae[pe])+_Mathabs(ae[pe+1]))){le[pe]=0;break}if(pe===me-2)we=4;else{for(xe=me-1;xe>=pe&&xe!==pe;xe--)if(fe=(xe===me?0:_Mathabs(le[xe]))+(xe===pe+1?0:_Mathabs(le[xe-1])),_Mathabs(ae[xe])<=ze*fe){ae[xe]=0;break}xe===pe?we=3:xe===me-1?we=1:(we=2,pe=xe)}switch(pe++,we){case 1:{for(be=le[me-2],le[me-2]=0,ge=me-2;ge>=pe;ge--)if(fe=F(ae[ge],be),ye=ae[ge]/fe,ke=be/fe,ae[ge]=fe,ge!==pe&&(be=-ke*le[ge-1],le[ge-1]=ye*le[ge-1]),G)for(he=0;he<W;he++)fe=ye*oe[he][ge]+ke*oe[he][me-1],oe[he][me-1]=-ke*oe[he][ge]+ye*oe[he][me-1],oe[he][ge]=fe;break}case 2:{for(be=le[pe-1],le[pe-1]=0,ge=pe;ge<me;ge++)if(fe=F(ae[ge],be),ye=ae[ge]/fe,ke=be/fe,ae[ge]=fe,be=-ke*le[ge],le[ge]=ye*le[ge],Q)for(he=0;he<Z;he++)fe=ye*se[he][ge]+ke*se[he][pe-1],se[he][pe-1]=-ke*se[he][ge]+ye*se[he][pe-1],se[he][ge]=fe;break}case 3:{for(je=_Mathmax(_Mathmax(_Mathmax(_Mathmax(_Mathabs(ae[me-1]),_Mathabs(ae[me-2])),_Mathabs(le[me-2])),_Mathabs(ae[pe])),_Mathabs(le[pe])),ve=ae[me-1]/je,Se=ae[me-2]/je,De=le[me-2]/je,Ce=ae[pe]/je,Ee=le[pe]/je,Ie=((Se+ve)*(Se-ve)+De*De)/2,Ae=ve*De*(ve*De),Re=0,(0!==Ie||0!==Ae)&&(Re=_Mathsqrt(Ie*Ie+Ae),0>Ie&&(Re=-Re),Re=Ae/(Ie+Re)),be=(Ce+ve)*(Ce-ve)+Re,Pe=Ce*Ee,ge=pe;ge<me-1;ge++){if(fe=F(be,Pe),ye=be/fe,ke=Pe/fe,ge!==pe&&(le[ge-1]=fe),be=ye*ae[ge]+ke*le[ge],le[ge]=ye*le[ge]-ke*ae[ge],Pe=ke*ae[ge+1],ae[ge+1]=ye*ae[ge+1],G)for(he=0;he<W;he++)fe=ye*oe[he][ge]+ke*oe[he][ge+1],oe[he][ge+1]=-ke*oe[he][ge]+ye*oe[he][ge+1],oe[he][ge]=fe;if(fe=F(be,Pe),ye=be/fe,ke=Pe/fe,ae[ge]=fe,be=ye*le[ge]+ke*ae[ge+1],ae[ge+1]=-ke*le[ge]+ye*ae[ge+1],Pe=ke*le[ge+1],le[ge+1]=ye*le[ge+1],Q&&ge<Z-1)for(he=0;he<Z;he++)fe=ye*se[he][ge]+ke*se[he][ge+1],se[he][ge+1]=-ke*se[he][ge]+ye*se[he][ge+1],se[he][ge]=fe}le[me-2]=be,++Te;break}case 4:{if(0>=ae[pe]&&(ae[pe]=0>ae[pe]?-ae[pe]:0,G))for(he=0;he<=Fe;he++)oe[he][pe]=-oe[he][pe];for(;pe<Fe&&!(ae[pe]>=ae[pe+1]);){if(fe=ae[pe],ae[pe]=ae[pe+1],ae[pe+1]=fe,G&&pe<W-1)for(he=0;he<W;he++)fe=oe[he][pe+1],oe[he][pe+1]=oe[he][pe],oe[he][pe]=fe;if(Q&&pe<Z-1)for(he=0;he<Z;he++)fe=se[he][pe+1],se[he][pe+1]=se[he][pe],se[he][pe]=fe;pe++}Te=0,me--;break}}}if(te){var Me=oe;oe=se,se=Me}this.m=Z,this.n=W,this.s=ae,this.U=se,this.V=oe}var P=I(4),F=I(17).hypotenuse;R.prototype={get condition(){return this.s[0]/this.s[_Mathmin(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var O=_Mathmax(this.m,this.n)*this.s[0]*2.220446049250313e-16,$=0,Z=this.s,W=0,K=Z.length;W<K;W++)Z[W]>O&&$++;return $},get diagonal(){return this.s},get threshold(){return 2.220446049250313e-16/2*_Mathmax(this.m,this.n)*this.s[0]},get leftSingularVectors(){return this.U},get rightSingularVectors(){return this.V},get diagonalMatrix(){return P.diag(this.s)},solve:function(T){var $=this.threshold,Z=this.s.length,W=P.zeros(Z,Z),K;for(K=0;K<Z;K++)W[K][K]=_Mathabs(this.s[K])<=$?0:1/this.s[K];var Q=this.V.mmul(W),G=this.V.rows,ee=this.U.rows,te=P.zeros(G,ee),ne,ae,se;for(K=0;K<G;K++)for(ne=0;ne<ee;ne++){for(se=0,ae=0;ae<Z;ae++)se+=Q[K][ae]*this.U[ne][ae];te[K][ne]=se}return te.mmul(T)},solveForDiagonal:function(T){return this.solve(P.diag(T))},inverse:function(){var T=this.threshold,O=this.V.rows,$=this.V.columns,Z=new P(O,this.s.length),W,K;for(W=0;W<O;W++)for(K=0;K<$;K++)Z[W][K]=_Mathabs(this.s[K])>T?this.V[W][K]/this.s[K]:0;var Q=this.U.rows,G=this.U.columns,ee=new P(O,Q),te,ne;for(W=0;W<O;W++)for(K=0;K<Q;K++){for(ne=0,te=0;te<G;te++)ne+=Z[W][te]*this.U[K][te];ee[W][K]=ne}return ee}},D.exports=R},function(D,E,I){'use strict';function R(K){return P(K,F.eye(K.rows))}function P(K,Q){return K.isSquare()?new $(K).solve(Q):new Z(K).solve(Q)}var F=I(4),T=I(131),O=I(128),$=I(129),Z=I(130),W=I(127);F.prototype.inverse=function(){return R(this)},F.prototype.solve=function(K){return P(this,K)},D.exports={SingularValueDecomposition:T,SVD:T,EigenvalueDecomposition:O,EVD:O,LuDecomposition:$,LU:$,QrDecomposition:Z,QR:Z,CholeskyDecomposition:W,CHO:W,inverse:R,solve:P}},function(D,E,I){'use strict';function R(se,oe){var de=oe.length/3,pe=se.rows,ue,ce,he,ge,me=ae.zeros(se.length,1);for(ce=0;ce<de;ce++)for(ge=_Mathpow(oe[ce+2*de][0]/2,2),ue=oe[ce+de][0]*ge,he=0;he<pe;he++)me[he][0]+=ue/(_Mathpow(se[he][0]-oe[ce][0],2)+ge);return me}function F(se,oe){for(var de=oe[1][0]*_Mathpow(oe[2][0]/2,2),ue=se.rows,ce=new ae(se.rows,se.columns),he=0;he<ue;he++)ce[he][0]=de/(_Mathpow(se[he][0]-oe[0][0],2)+_Mathpow(oe[2][0]/2,2));return ce}function T(se,oe){for(var de=oe[2][0]*oe[2][0]/2,ue=se.rows,ce=new ae(se.rows,se.columns),he=0;he<ue;he++)ce[he][0]=oe[1][0]*_Mathexp(-(se[he][0]-oe[0][0])*(se[he][0]-oe[0][0])/de);return ce}function O(se,oe,le){le=le||{};var de=G(se,le.percentage||0);if(null===de||3>de[0].rows)return null;var ue=de[0],ce=de[1],he=de[2],ge=ue.rows,me=[ge/_Mathsqrt(ce.dot(ce))],le=Object.create(le.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),xe=_Mathabs(ue[0][0]-ue[1][0]),be=new ae([[-xe/1e4],[-0.001],[-xe/1e4]]),ye=new ae([[oe.x],[1],[oe.width]]),ke=new ae([[oe.x-xe],[0.75],[oe.width/4]]),_e=new ae([[oe.x+xe],[1.25],[4*oe.width]]),we=te.optimize(F,ye,ue,ce,me,be,ke,_e,[],le);return we=we.p,[we[0],[we[1][0]*he],we[2]]}function $(se,oe,le){le=le||{};var de=G(se,le.percentage||0);if(null===de||3>de[0].rows)return null;var ue=de[0],ce=de[1],he=de[2],ge=ue.rows,me=[ge/_Mathsqrt(ce.dot(ce))],le=Object.create(le.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),xe=_Mathabs(ue[0][0]-ue[1][0]),be=new ae([[-xe/1e4],[-0.001],[-xe/1e4]]),be=new ae([[-_Mathabs(ue[0][0]-ue[1][0])/1e3],[-0.001],[-oe.width/1e3]]),ye=new ae([[oe.x],[1],[oe.width]]),ke=new ae([[oe.x-xe],[0.75],[oe.width/4]]),_e=new ae([[oe.x+xe],[1.25],[4*oe.width]]),we=te.optimize(T,ye,ue,ce,me,be,ke,_e,[],le);return we=we.p,[we[0],[we[1][0]*he],we[2]]}function G(se,oe){var le=se.length,de=null,ue=null,ce,he,ge=0,pe;if(2==le){var fe=se[0].length;if(de=Array(fe),ue=Array(fe),ce=se[0],he=se[1],'number'==typeof ce[0])for(pe=0;pe<fe;pe++)de[pe]=ce[pe],ue[pe]=he[pe],he[pe]>ge&&(ge=he[pe]);else if('object'==typeof ce[0])for(pe=0;pe<fe;pe++)de[pe]=ce[pe][0],ue[pe]=he[pe][0],he[pe][0]>ge&&(ge=he[pe][0])}else{var fe=le;for(de=Array(fe),ue=Array(fe),pe=0;pe<fe;pe++)de[pe]=se[pe][0],ue[pe]=se[pe][1],ue[pe]>ge&&(ge=ue[pe])}for(pe=0;pe<fe;pe++)ue[pe]/=ge;if(oe)for(pe=fe-1;0<=pe;pe--)ue[pe]<oe&&(ue.splice(pe,1),de.splice(pe,1));return 0<de.length?[new ae([de]).transpose(),new ae([ue]).transpose(),ge]:null}var te=I(126),ne=te.Matrix.algebra,ae=I(8);D.exports.optimizeSingleLorentzian=O,D.exports.optimizeLorentzianSum=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;var ue=de[0],ce=de[1],he=de[2],ge=ue.rows,pe,me=[ge/ne.sqrt(ce.dot(ce))],le=Object.create(le||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),xe=oe.length,be=new ae(3*xe,1),ye=new ae(3*xe,1),ke=new ae(3*xe,1),_e=new ae(3*xe,1),we=_Mathabs(ue[0][0]-ue[1][0]);for(pe=0;pe<xe;pe++)be[pe][0]=oe[pe].x,be[pe+xe][0]=1,be[pe+2*xe][0]=oe[pe].width,ye[pe][0]=oe[pe].x-we,ye[pe+xe][0]=0,ye[pe+2*xe][0]=oe[pe].width/4,ke[pe][0]=oe[pe].x+we,ke[pe+xe][0]=1.5,ke[pe+2*xe][0]=4*oe[pe].width,_e[pe][0]=-we/1e3,_e[pe+xe][0]=-1e-3,_e[pe+2*xe][0]=-we/1e3;var _e=-_Mathabs(ue[0][0]-ue[1][0])/1e4,je=te.optimize(R,be,ue,ce,me,_e,ye,ke,[],le);je=je.p;var ve=Array(xe);for(pe=0;pe<xe;pe++)ve[pe]=[je[pe],[je[pe+xe][0]*he],je[pe+2*xe]];return ve},D.exports.optimizeSingleGaussian=$,D.exports.optimizeGaussianSum=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;var ue=de[0],ce=de[1],he=de[2],ge=ue.rows,pe,me=new ae(ge,1),fe=ge/ne.sqrt(ce.dot(ce));for(pe=0;pe<ge;pe++)me[pe][0]=fe;var le=Object.create(le||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,2]),be=oe.length,ye=new ae(3*be,1),ke=new ae(3*be,1),_e=new ae(3*be,1),we=new ae(3*be,1),je=_Mathabs(ue[0][0]-ue[1][0]);for(pe=0;pe<be;pe++)ye[pe][0]=oe[pe].x,ye[pe+be][0]=oe[pe].y/he,ye[pe+2*be][0]=oe[pe].width,ke[pe][0]=oe[pe].x-je,ke[pe+be][0]=0.8*oe[pe].y/he,ke[pe+2*be][0]=oe[pe].width/2,_e[pe][0]=oe[pe].x+je,_e[pe+be][0]=1.2*oe[pe].y/he,_e[pe+2*be][0]=2*oe[pe].width,we[pe][0]=-je/1e3,we[pe+be][0]=-1e-3,we[pe+2*be][0]=-je/1e3;var ve=te.optimize(R,ye,ue,ce,me,we,ke,_e,[],le);ve=ve.p;var Se=Array(be);for(pe=0;pe<be;pe++)Se[pe]=[ve[pe],[ve[pe+be][0]*he],ve[pe+2*be]];return Se},D.exports.singleGaussian=T,D.exports.singleLorentzian=F,D.exports.optimizeGaussianTrain=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;for(var ue=de[0],ce=de[1],he=de[2],ge=0,pe=ue.length,be=[],ke=0,me,fe,xe,he,ye;ke<oe.length;ke++){for(me=oe[ke].x-4*oe[ke].width;ue[ge++]<me&&ge<pe;);for(me=oe[ke].x+4*oe[ke].width,fe=[],xe=[];ue[ge]<=me&&ge<pe;)fe.push(ue[ge][0]),xe.push(ce[ge][0]*he),ge++;ye=$([fe,xe],oe[ke],le),ye?be.push({x:ye[0][0],y:ye[1][0],width:ye[2][0],opt:!0}):be.push({x:oe[ke].x,y:oe[ke].y,width:oe[ke].width,opt:!1})}return be},D.exports.optimizeLorentzianTrain=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;for(var ue=de[0],ce=de[1],he=de[2],ge=0,pe=ue.length,be=[],ke=0,me,fe,xe,he,ye;ke<oe.length;ke++){for(me=oe[ke].x-4*oe[ke].width;ue[ge++]<me&&ge<pe;);for(me=oe[ke].x+4*oe[ke].width,fe=[],xe=[];ue[ge]<=me&&ge<pe;)fe.push(ue[ge][0]),xe.push(ce[ge][0]*he),ge++;ye=O([fe,xe],oe[ke],le),ye?be.push({x:ye[0][0],y:ye[1][0],width:ye[2][0],opt:!0}):be.push({x:oe[ke].x,y:oe[ke].y,width:oe[ke].width,opt:!1})}return be}},function(D,E,I){'use strict';E.array=I(47),E.matrix=I(135)},function(D,E,I){'use strict';function P(ce,he){'undefined'==typeof he&&(he=0);var ge=ce.length,pe=ce[0].length,me,fe,xe,be;if(-1===he){for(me=[0],fe=ge*pe,xe=0;xe<ge;xe++)for(be=0;be<pe;be++)me[0]+=ce[xe][be];me[0]/=fe}else if(0===he)for(me=Array(pe),fe=ge,be=0;be<pe;be++){for(me[be]=0,xe=0;xe<ge;xe++)me[be]+=ce[xe][be];me[be]/=fe}else if(1===he)for(me=Array(ge),fe=pe,be=0;be<ge;be++){for(me[be]=0,xe=0;xe<pe;xe++)me[be]+=ce[be][xe];me[be]/=fe}else throw new Error('Invalid dimension');return me}function F(ce,he,ge){for(var pe=T(ce,he,ge),me=pe.length,fe=0;fe<me;fe++)pe[fe]=_Mathsqrt(pe[fe]);return pe}function T(ce,he,ge){'undefined'==typeof ge&&(ge=!0),he=he||P(ce);var pe=ce.length;if(0===pe)return[];for(var me=ce[0].length,fe=Array(me),xe=0;xe<me;xe++){for(var be=0,ye=0,ke=0,_e=0;_e<pe;_e++)ke=ce[_e][xe]-he[xe],be+=ke,ye+=ke*ke;fe[xe]=ge?(ye-be*be/pe)/(pe-1):(ye-be*be/pe)/pe}return fe}function G(ce,he,ge){'undefined'==typeof ge&&(ge=0),'undefined'==typeof he&&(0===ge?he=ce.length-1:1===ge&&(he=ce[0].length-1));var pe=P(ce,ge),me=ce.length;if(0===me)return[[]];var fe=ce[0].length,xe,be,ye,ke,_e;if(0===ge){for(xe=Array(fe),be=0;be<fe;be++)xe[be]=Array(fe);for(be=0;be<fe;be++)for(ye=be;ye<fe;ye++){for(ke=0,_e=0;_e<me;_e++)ke+=(ce[_e][ye]-pe[ye])*(ce[_e][be]-pe[be]);ke/=he,xe[be][ye]=ke,xe[ye][be]=ke}}else if(1===ge){for(xe=Array(me),be=0;be<me;be++)xe[be]=Array(me);for(be=0;be<me;be++)for(ye=be;ye<me;ye++){for(ke=0,_e=0;_e<fe;_e++)ke+=(ce[ye][_e]-pe[ye])*(ce[be][_e]-pe[be]);ke/=he,xe[be][ye]=ke,xe[ye][be]=ke}}else throw new Error('Invalid dimension');return xe}function te(ce,he,ge){return he=he||P(ce),'undefined'==typeof ge&&(ge=F(ce,!0,he)),ae(ne(ce,he,!1),ge,!0)}function ne(ce,he,ge){he=he||P(ce);var pe=ce,me=ce.length,fe,xe,be;if(!ge)for(pe=Array(me),fe=0;fe<me;fe++)pe[fe]=Array(ce[fe].length);for(fe=0;fe<me;fe++){var ye=pe[fe];for(xe=0,be=ye.length;xe<be;xe++)ye[xe]=ce[fe][xe]-he[xe]}return pe}function ae(ce,he,ge){'undefined'==typeof he&&(he=F(ce));var pe=ce,me=ce.length,fe,xe,be;if(!ge)for(pe=Array(me),fe=0;fe<me;fe++)pe[fe]=Array(ce[fe].length);for(fe=0;fe<me;fe++){var ye=pe[fe],ke=ce[fe];for(xe=0,be=ye.length;xe<be;xe++)0===he[xe]||isNaN(he[xe])||(ye[xe]=ke[xe]/he[xe])}return pe}function oe(ce,he,ge){'undefined'==typeof ge&&(ge=0);var pe=ce.length;if(0===pe)return[];var me=ce[0].length,fe,xe,be,ye,ke,_e;if(0===ge){for(fe=Array(me),xe=0;xe<me;xe++)fe[xe]=0;for(xe=0;xe<pe;xe++)for(_e=ce[xe],ke=he[xe],ye=0;ye<me;ye++)fe[ye]+=_e[ye]*ke}else if(1===ge){for(fe=Array(pe),xe=0;xe<pe;xe++)fe[xe]=0;for(ye=0;ye<pe;ye++)for(_e=ce[ye],ke=he[ye],xe=0;xe<me;xe++)fe[ye]+=_e[xe]*ke}else throw new Error('Invalid dimension');var we=ue.sum(he);if(0!==we)for(xe=0,be=fe.length;xe<be;xe++)fe[xe]/=we;return fe}function de(ce,he,ge,pe,me){me=me||0,ge=ge||oe(ce,he,me),'undefined'==typeof pe&&(pe=1);var fe=ce.length;if(0===fe)return[[]];var xe=ce[0].length,be,ye,ke,_e,we;if(0===me){for(be=Array(xe),ye=0;ye<xe;ye++)be[ye]=Array(xe);for(ye=0;ye<xe;ye++)for(ke=ye;ke<xe;ke++){for(we=0,_e=0;_e<fe;_e++)we+=he[_e]*(ce[_e][ke]-ge[ke])*(ce[_e][ye]-ge[ye]);be[ye][ke]=we*pe,be[ke][ye]=we*pe}}else if(1===me){for(be=Array(fe),ye=0;ye<fe;ye++)be[ye]=Array(fe);for(ye=0;ye<fe;ye++)for(ke=ye;ke<fe;ke++){for(we=0,_e=0;_e<xe;_e++)we+=he[_e]*(ce[ke][_e]-ge[ke])*(ce[ye][_e]-ge[ye]);be[ye][ke]=we*pe,be[ke][ye]=we*pe}}else throw new Error('Invalid dimension');return be}var ue=I(47);D.exports={entropy:function(ce,he){'undefined'==typeof he&&(he=0);for(var ge=0,pe=ce.length,me=ce[0].length,fe=0;fe<pe;fe++)for(var xe=0;xe<me;xe++)ge+=ce[fe][xe]*_Mathlog(ce[fe][xe]+he);return-ge},mean:P,standardDeviation:F,variance:T,median:function(ce){for(var he=ce.length,ge=ce[0].length,pe=Array(ge),me=0,fe;me<ge;me++){fe=Array(he);for(var xe=0;xe<he;xe++)fe[xe]=ce[xe][me];fe.sort();var be=fe.length;pe[me]=0==be%2?0.5*(fe[be/2]+fe[be/2-1]):fe[_Mathfloor(be/2)]}return pe},mode:function(ce){var he=ce.length,ge=ce[0].length,pe=Array(ge),me,fe;for(me=0;me<ge;me++){for(var xe=Array(he),be=0;be<he;be++)xe[be]=0;var ye=Array(he),ke=0;for(fe=0;fe<he;fe++){var _e=ye.indexOf(ce[fe][me]);0<=_e?xe[_e]++:(ye[ke]=ce[fe][me],xe[ke]=1,ke++)}var we=0,je=0;for(fe=0;fe<ke;fe++)xe[fe]>we&&(we=xe[fe],je=fe);pe[me]=ye[je]}return pe},skewness:function(ce,he){'undefined'==typeof he&&(he=!0);for(var ge=P(ce),pe=ce.length,me=ge.length,fe=Array(me),xe=0;xe<me;xe++){for(var be=0,ye=0,ke=0,_e;ke<pe;ke++)_e=ce[ke][xe]-ge[xe],be+=_e*_e,ye+=_e*_e*_e;var we=be/pe,je=ye/pe,ve=je/_Mathpow(we,3/2);if(he){var Se=_Mathsqrt(pe*(pe-1));fe[xe]=Se/(pe-2)*ve}else fe[xe]=ve}return fe},kurtosis:function(ce,he){'undefined'==typeof he&&(he=!0);for(var ge=P(ce),pe=ce.length,me=ce[0].length,fe=Array(me),xe=0;xe<me;xe++){for(var be=0,ye=0,ke=0,_e;ke<pe;ke++)_e=ce[ke][xe]-ge[xe],be+=_e*_e,ye+=_e*_e*_e*_e;var we=be/pe,je=ye/pe;if(he){var ve=be/(pe-1),De=ye/(ve*ve);fe[xe]=pe*(pe+1)/((pe-1)*(pe-2)*(pe-3))*De-3*((pe-1)*(pe-1)/((pe-2)*(pe-3)))}else fe[xe]=je/(we*we)-3}return fe},standardError:function(ce){for(var he=ce.length,ge=F(ce),pe=ge.length,me=Array(pe),fe=_Mathsqrt(he),xe=0;xe<pe;xe++)me[xe]=ge[xe]/fe;return me},covariance:function(ce,he){return G(ce,void 0,he)},scatter:G,correlation:function(ce){var he=P(ce),ge=F(ce,!0,he),pe=te(ce,he,ge),me=ce.length,fe=ce[0].length,xe,be,ye=Array(fe);for(xe=0;xe<fe;xe++)ye[xe]=Array(fe);for(xe=0;xe<fe;xe++)for(be=xe;be<fe;be++){for(var ke=0,_e=0,we=pe.length;_e<we;_e++)ke+=pe[_e][be]*pe[_e][xe];ke/=me-1,ye[xe][be]=ke,ye[be][xe]=ke}return ye},zScores:te,center:ne,standardize:ae,weightedVariance:function(ce,he){var ge=P(ce),pe=ce.length;if(0===pe)return[];for(var me=ce[0].length,fe=Array(me),xe=0;xe<me;xe++){for(var be=0,ye=0,ke=0,_e=0;_e<pe;_e++){var we=ce[_e][xe]-ge[xe],je=he[_e];be+=je*(we*we),ke+=je,ye+=je*je}fe[xe]=be*(ke/(ke*ke-ye))}return fe},weightedMean:oe,weightedCovariance:function(ce,he,ge,pe){pe=pe||0,ge=ge||oe(ce,he,pe);for(var me=0,fe=0,xe=0,be=he.length;xe<be;xe++)me+=he[xe],fe+=he[xe]*he[xe];var ye=me/(me*me-fe);return de(ce,he,ge,ye,pe)},weightedScatter:de}},function(D,E,I){function P(Q,G,ee,te){for(var ne=0,ae=0,se=G-ee;se<G+ee;se++)0<=se&&se<Q.length-1&&(ne+=Q[se+1]-Q[se],ae++);return _Mathpow(ne/ae,te)}function F(Q,G,ee,te){var ne=0;return ne=0<ee?(4*ee-2)/(ee*(2*G-ee+1))*(Q*F(Q,G,ee-1,te)+te*F(Q,G,ee-1,te-1))-(ee-1)*(2*G+ee)/(ee*(2*G-ee+1))*F(Q,G,ee-2,te):0==ee&&0==te?1:0,ne}function T(Q,G){var ee=1;if(Q>=G)for(var te=Q-G+1;te<=Q;te++)ee*=te;return ee}function O(Q,G,ee,te,ne){for(var ae=0,se=0;se<=te;se++)ae+=(2*se+1)*(T(2*ee,se)/T(2*ee+se+1,se+1))*F(Q,ee,se,0)*F(G,ee,se,ne);return ae}function $(Q,G,ee){for(var te=Array(Q),ne=_Mathfloor(Q/2),ae=-ne;ae<=ne;ae++){te[ae+ne]=Array(Q);for(var se=-ne;se<=ne;se++)te[ae+ne][se+ne]=O(se,ae,ne,G,ee)}return te}var Z=I(27),W=I(134),K={windowSize:9,derivative:0,polynomial:3};D.exports=function(Q,G,ee){if(ee=Z({},K,ee),0==ee.windowSize%2||5>ee.windowSize||!_NumberisInteger(ee.windowSize))throw new RangeError('Invalid window size (should be odd and at least 5 integer number)');if(ee.windowSize>Q.length)throw new RangeError('Window size is higher than the data length '+ee.windowSize+'>'+Q.length);if(0>ee.derivative||!_NumberisInteger(ee.derivative))throw new RangeError('Derivative should be a positive integer');if(1>ee.polynomial||!_NumberisInteger(ee.polynomial))throw new RangeError('Polynomial should be a positive integer');6<=ee.polynomial&&console.warn('You should not use polynomial grade higher than 5 if you are not sure that your data arises from such a model. Possible polynomial oscillation problems');var te=ee.windowSize,ne=_Mathfloor(te/2),ae=Q.length,se=Array(ae),oe=$(te,ee.polynomial,ee.derivative),le=0,de=!0;'[object Array]'===Object.prototype.toString.call(G)?de=!1:le=_Mathpow(G,ee.derivative);for(var ue=0;ue<ne;ue++){for(var ce=oe[ne-ue-1],he=oe[ne+ue+1],ge=0,pe=0,me=0;me<te;me++)ge+=ce[me]*Q[me],pe+=he[me]*Q[ae-te+me-1];de?(se[ne-ue-1]=ge/le,se[ae-ne+ue]=pe/le):(le=P(G,ne-ue-1,ne,ee.derivative),se[ne-ue-1]=ge/le,le=P(G,ae-ne+ue,ne,ee.derivative),se[ae-ne+ue]=pe/le)}for(var fe=oe[ne],ue=te,xe;ue<ae+1;ue++){xe=0;for(var me=0;me<te;me++)xe+=fe[me]*Q[me+ue-te];de||(le=P(G,ue-ne-1,ne,ee.derivative)),se[ue-ne-1]=xe/le}return se}},function(D,E,I){'use strict';function R(F,T){return F-T}var P=I(50);E.max=function(T){for(var F=-Infinity,O=0;O<T.length;O++)for(var $=0;$<T[O].length;$++)T[O][$]>F&&(F=T[O][$]);return F},E.min=function(T){for(var F=Infinity,O=0;O<T.length;O++)for(var $=0;$<T[O].length;$++)T[O][$]<F&&(F=T[O][$]);return F},E.minMax=function(T){for(var O=Infinity,$=-Infinity,Z=0;Z<T.length;Z++)for(var W=0;W<T[Z].length;W++)T[Z][W]<O&&(O=T[Z][W]),T[Z][W]>$&&($=T[Z][W]);return{min:O,max:$}},E.entropy=function(T,O){'undefined'==typeof O&&(O=0);for(var $=0,Z=T.length,W=T[0].length,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$+=T[K][Q]*_Mathlog(T[K][Q]+O);return-$},E.mean=function(T,O){'undefined'==typeof O&&(O=0);var $=T.length,Z=T[0].length,W,K,Q,G;if(-1===O){for(W=[0],K=$*Z,Q=0;Q<$;Q++)for(G=0;G<Z;G++)W[0]+=T[Q][G];W[0]/=K}else if(0===O)for(W=Array(Z),K=$,G=0;G<Z;G++){for(W[G]=0,Q=0;Q<$;Q++)W[G]+=T[Q][G];W[G]/=K}else if(1===O)for(W=Array($),K=Z,G=0;G<$;G++){for(W[G]=0,Q=0;Q<Z;Q++)W[G]+=T[G][Q];W[G]/=K}else throw new Error('Invalid dimension');return W},E.sum=function(T,O){'undefined'==typeof O&&(O=0);var $=T.length,Z=T[0].length,W,K,Q;if(-1===O)for(W=[0],K=0;K<$;K++)for(Q=0;Q<Z;Q++)W[0]+=T[K][Q];else if(0===O)for(W=Array(Z),Q=0;Q<Z;Q++)for(W[Q]=0,K=0;K<$;K++)W[Q]+=T[K][Q];else if(1===O)for(W=Array($),Q=0;Q<$;Q++)for(W[Q]=0,K=0;K<Z;K++)W[Q]+=T[Q][K];else throw new Error('Invalid dimension');return W},E.product=function(T,O){'undefined'==typeof O&&(O=0);var $=T.length,Z=T[0].length,W,K,Q;if(-1===O)for(W=[1],K=0;K<$;K++)for(Q=0;Q<Z;Q++)W[0]*=T[K][Q];else if(0===O)for(W=Array(Z),Q=0;Q<Z;Q++)for(W[Q]=1,K=0;K<$;K++)W[Q]*=T[K][Q];else if(1===O)for(W=Array($),Q=0;Q<$;Q++)for(W[Q]=1,K=0;K<Z;K++)W[Q]*=T[Q][K];else throw new Error('Invalid dimension');return W},E.standardDeviation=function(T,O,$){for(var Z=E.variance(T,O,$),W=Z.length,K=0;K<W;K++)Z[K]=_Mathsqrt(Z[K]);return Z},E.variance=function(T,O,$){'undefined'==typeof $&&($=!0),O=O||E.mean(T);var Z=T.length;if(0===Z)return[];for(var W=T[0].length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne=0;ne<Z;ne++)te=T[ne][Q]-O[Q],G+=te,ee+=te*te;K[Q]=$?(ee-G*G/Z)/(Z-1):(ee-G*G/Z)/Z}return K},E.median=function(T){for(var O=T.length,$=T[0].length,Z=Array($),W=0,K;W<$;W++){K=Array(O);for(var Q=0;Q<O;Q++)K[Q]=T[Q][W];K.sort(R);var G=K.length;Z[W]=0==G%2?0.5*(K[G/2]+K[G/2-1]):K[_Mathfloor(G/2)]}return Z},E.mode=function(T){var O=T.length,$=T[0].length,Z=Array($),W,K;for(W=0;W<$;W++){for(var Q=Array(O),G=0;G<O;G++)Q[G]=0;var ee=Array(O),te=0;for(K=0;K<O;K++){var ne=ee.indexOf(T[K][W]);0<=ne?Q[ne]++:(ee[te]=T[K][W],Q[te]=1,te++)}var ae=0,se=0;for(K=0;K<te;K++)Q[K]>ae&&(ae=Q[K],se=K);Z[W]=ee[se]}return Z},E.skewness=function(T,O){'undefined'==typeof O&&(O=!0);for(var $=E.mean(T),Z=T.length,W=$.length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne;te<Z;te++)ne=T[te][Q]-$[Q],G+=ne*ne,ee+=ne*ne*ne;var ae=G/Z,se=ee/Z,oe=se/_Mathpow(ae,3/2);if(O){var le=_Mathsqrt(Z*(Z-1));K[Q]=le/(Z-2)*oe}else K[Q]=oe}return K},E.kurtosis=function(T,O){'undefined'==typeof O&&(O=!0);for(var $=E.mean(T),Z=T.length,W=T[0].length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne;te<Z;te++)ne=T[te][Q]-$[Q],G+=ne*ne,ee+=ne*ne*ne*ne;var ae=G/Z,se=ee/Z;if(O){var oe=G/(Z-1),de=ee/(oe*oe);K[Q]=Z*(Z+1)/((Z-1)*(Z-2)*(Z-3))*de-3*((Z-1)*(Z-1)/((Z-2)*(Z-3)))}else K[Q]=se/(ae*ae)-3}return K},E.standardError=function(T){for(var O=T.length,$=E.standardDeviation(T),Z=$.length,W=Array(Z),K=_Mathsqrt(O),Q=0;Q<Z;Q++)W[Q]=$[Q]/K;return W},E.covariance=function(T,O){return E.scatter(T,void 0,O)},E.scatter=function(T,O,$){'undefined'==typeof $&&($=0),'undefined'==typeof O&&(0===$?O=T.length-1:1===$&&(O=T[0].length-1));var Z=E.mean(T,$),W=T.length;if(0===W)return[[]];var K=T[0].length,Q,G,ee,te,ne;if(0===$){for(Q=Array(K),G=0;G<K;G++)Q[G]=Array(K);for(G=0;G<K;G++)for(ee=G;ee<K;ee++){for(te=0,ne=0;ne<W;ne++)te+=(T[ne][ee]-Z[ee])*(T[ne][G]-Z[G]);te/=O,Q[G][ee]=te,Q[ee][G]=te}}else if(1===$){for(Q=Array(W),G=0;G<W;G++)Q[G]=Array(W);for(G=0;G<W;G++)for(ee=G;ee<W;ee++){for(te=0,ne=0;ne<K;ne++)te+=(T[ee][ne]-Z[ee])*(T[G][ne]-Z[G]);te/=O,Q[G][ee]=te,Q[ee][G]=te}}else throw new Error('Invalid dimension');return Q},E.correlation=function(T){var O=E.mean(T),$=E.standardDeviation(T,!0,O),Z=E.zScores(T,O,$),W=T.length,K=T[0].length,Q,G,ee=Array(K);for(Q=0;Q<K;Q++)ee[Q]=Array(K);for(Q=0;Q<K;Q++)for(G=Q;G<K;G++){for(var te=0,ne=0,ae=Z.length;ne<ae;ne++)te+=Z[ne][G]*Z[ne][Q];te/=W-1,ee[Q][G]=te,ee[G][Q]=te}return ee},E.zScores=function(T,O,$){return O=O||E.mean(T),'undefined'==typeof $&&($=E.standardDeviation(T,!0,O)),E.standardize(E.center(T,O,!1),$,!0)},E.center=function(T,O,$){O=O||E.mean(T);var Z=T,W=T.length,K,Q,G;if(!$)for(Z=Array(W),K=0;K<W;K++)Z[K]=Array(T[K].length);for(K=0;K<W;K++){var ee=Z[K];for(Q=0,G=ee.length;Q<G;Q++)ee[Q]=T[K][Q]-O[Q]}return Z},E.standardize=function(T,O,$){'undefined'==typeof O&&(O=E.standardDeviation(T));var Z=T,W=T.length,K,Q,G;if(!$)for(Z=Array(W),K=0;K<W;K++)Z[K]=Array(T[K].length);for(K=0;K<W;K++){var ee=Z[K],te=T[K];for(Q=0,G=ee.length;Q<G;Q++)0===O[Q]||isNaN(O[Q])||(ee[Q]=te[Q]/O[Q])}return Z},E.weightedVariance=function(T,O){var $=E.mean(T),Z=T.length;if(0===Z)return[];for(var W=T[0].length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne=0;ne<Z;ne++){var ae=T[ne][Q]-$[Q],se=O[ne];G+=se*(ae*ae),te+=se,ee+=se*se}K[Q]=G*(te/(te*te-ee))}return K},E.weightedMean=function(T,O,$){'undefined'==typeof $&&($=0);var Z=T.length;if(0===Z)return[];var W=T[0].length,K,Q,G,ee,te,ne;if(0===$){for(K=Array(W),Q=0;Q<W;Q++)K[Q]=0;for(Q=0;Q<Z;Q++)for(ne=T[Q],te=O[Q],ee=0;ee<W;ee++)K[ee]+=ne[ee]*te}else if(1===$){for(K=Array(Z),Q=0;Q<Z;Q++)K[Q]=0;for(ee=0;ee<Z;ee++)for(ne=T[ee],te=O[ee],Q=0;Q<W;Q++)K[ee]+=ne[Q]*te}else throw new Error('Invalid dimension');var ae=P.sum(O);if(0!==ae)for(Q=0,G=K.length;Q<G;Q++)K[Q]/=ae;return K},E.weightedCovariance=function(T,O,$,Z){Z=Z||0,$=$||E.weightedMean(T,O,Z);for(var W=0,K=0,Q=0,G=O.length;Q<G;Q++)W+=O[Q],K+=O[Q]*O[Q];var ee=W/(W*W-K);return E.weightedScatter(T,O,$,ee,Z)},E.weightedScatter=function(T,O,$,Z,W){W=W||0,$=$||E.weightedMean(T,O,W),'undefined'==typeof Z&&(Z=1);var K=T.length;if(0===K)return[[]];var Q=T[0].length,G,ee,te,ne,ae;if(0===W){for(G=Array(Q),ee=0;ee<Q;ee++)G[ee]=Array(Q);for(ee=0;ee<Q;ee++)for(te=ee;te<Q;te++){for(ae=0,ne=0;ne<K;ne++)ae+=O[ne]*(T[ne][te]-$[te])*(T[ne][ee]-$[ee]);G[ee][te]=ae*Z,G[te][ee]=ae*Z}}else if(1===W){for(G=Array(K),ee=0;ee<K;ee++)G[ee]=Array(K);for(ee=0;ee<K;ee++)for(te=ee;te<K;te++){for(ae=0,ne=0;ne<Q;ne++)ae+=O[ne]*(T[te][ne]-$[te])*(T[ee][ne]-$[ee]);G[ee][te]=ae*Z,G[te][ee]=ae*Z}}else throw new Error('Invalid dimension');return G}},function(D,E,I){'use strict';const R=I(16),P=I(18),F=I(48),T=I(107);class O{constructor($,Z,W){this.chemicalShifts=$,this.couplingConstants=Z,this.multiplicity=W,this.nSpins=$.length,this._initConnectivity(),this._initClusters()}static fromSpinusPrediction($){var Z=$.split('\n'),W=Z.length-1,K=Array(W),Q=Array(W),G={},ee=R.zeros(W,W);for(let de=0;de<W;de++){var te=Z[de].split('\t');K[de]=+te[2],G[te[0]-1]=de,Q[de]=+te[5]}for(let de=0;de<W;de++){te=Z[de].split('\t');var ne=(te.length-4)/3;for(oe=0;oe<ne;oe++){var ae=te[4+3*oe]-1,se=G[ae];ee[de][se]=+te[6+3*oe]}}for(var oe=0;oe<W;oe++)for(var le=oe;le<W;le++)ee[oe][le]=ee[le][oe];return new O(K,ee,P(W,2))}static fromPrediction($){let Z=O.ungroupAtoms($);const W=Z.length,K=Array(W),Q=R.zeros(W,W),G=Array(W),ee={};var te,ne,ae;for(te=0;te<W;te++)K[te]=Z[te].delta,ee[Z[te].atomIDs[0]]=te;for(te=0;te<W;te++){for(K[te]=Z[te].delta,ae=Z[te].j,ne=0;ne<ae.length;ne++)Q[ee[Z[te].atomIDs[0]]][ee[ae[ne].assignment]]=ae[ne].coupling,Q[ee[ae[ne].assignment]][ee[Z[te].atomIDs[0]]]=ae[ne].coupling;G[te]=Z[te].integral+1}return new O(K,Q,G)}static ungroupAtoms($){let Z=[];return $.forEach((W)=>{let K=W.atomIDs;for(let Q=0,G;Q<K.length;Q++)G=JSON.parse(JSON.stringify(W)),G.atomIDs=[K[Q]],G.integral=1,Z.push(G)}),Z}_initClusters(){this.clusters=F(this.connectivity,{out:'indexes'})}_initConnectivity(){const $=this.couplingConstants,Z=R.ones($.length,$.length);for(var W=0;W<$.length;W++)for(var K=W;K<$[W].length;K++)0===$[W][K]&&(Z[W][K]=0,Z[K][W]=0);this.connectivity=Z}_calculateBetas($,Z){var W=R.zeros($.length,$.length),K,Q;for(K=0;K<$.rows;K++)for(Q=K;Q<$.columns;Q++)0==this.chemicalShifts[K]-this.chemicalShifts[Q]?K!==Q&&0===$[K][Q]&&(W[K][Q]=1,W[Q][K]=1):(W[K][Q]=1-_Mathabs($[K][Q]/((this.chemicalShifts[K]-this.chemicalShifts[Q])*Z)),W[Q][K]=W[K][Q]);return W}ensureClusterSize($){var Z=this._calculateBetas(this.couplingConstants,$.frequency||400),W=T.agnes(Z,{isDistanceMatrix:!0}),K=[];this._splitCluster(W,K,$.maxClusterSize||8,!1);var Q=this._mergeClusters(K);this.nClusters=Q.length,this.clusters=Array(Q.length);for(var G=0;G<this.nClusters;G++){this.clusters[G]=[];for(var ee=0;ee<this.nSpins;ee++)0!==Q[G][ee]&&(0>Q[G][ee]?this.clusters[G].push(-(ee+1)):this.clusters[G].push(ee))}}_splitCluster($,Z,W,K){if(!K&&$.index.length<=W)Z.push(this._getMembers($));else for(var Q of $.children)if(!isNaN(Q.index)||Q.index.length<=W){for(var G=this._getMembers(Q),ee=0,te=0;te<this.nSpins;te++)if(1===G[te]){ee++;for(var ne=0;ne<this.nSpins;ne++)1===this.connectivity[te][ne]&&0===G[ne]&&(G[ne]=-1,ee++)}ee<=W?Z.push(G):isNaN(Q.index)?this._splitCluster(Q,Z,W,!0):(G[Q.index]=2,Z.push(G))}else this._splitCluster(Q,Z,W,!1)}_getMembers($){for(var Z=Array(this.nSpins),W=0;W<this.nSpins;W++)Z[W]=0;if(!isNaN($.index))Z[1*$.index]=1;else for(var K of $.index)Z[1*K.index]=1;return Z}_mergeClusters($){var Z=0,W,K,Q,G,ee,te,ne;for(Q=$.length-1;0<=Q;Q--){for(W=$[Q],Z=W.length,ee=0;ee<Z&&-1!==W[ee++];);if(ee<Z)for(G=$.length-1;G>=Q+1;G--){for(K=$[G],ee=0,te=0,ne=0;ee<Z;)-1==W[ee]*K[ee]&&te++,(0!==W[ee]||0!==K[ee])&&ne++,ee++;if(0<te&&ne<=this.maxClusterSize){for(ee=0;ee<Z;)1===K[ee]?W[ee]=1:-1===K[ee]&&1!==W[ee]&&(W[ee]=-1),ee++;$.splice(G,1),G++}}}return $}}D.exports=O},function(D,E,I){'use strict';function R($){const Z=($-1)/2,W=Array($),K=Array($);for(var Q=0;Q<$;Q++)W[Q]=$-1-Q-Z,K[Q]=_Mathsqrt(Z*(Z+1)-W[Q]*(W[Q]+1));const G=P(K,1,$,$);for(Q=0;Q<$;Q++)K[Q]=_Mathsqrt(Z*(Z+1)-W[Q]*(W[Q]-1));const ee=P(K,-1,$,$),te=G.clone().add(ee).mul(0.5),ne=ee.clone().mul(-1).add(G).mul(-0.5),ae=P(W,0,$,$);return{x:te,y:ne,z:ae,m:ee,p:G}}function P($,Z,W,K){const Q=new T(W,K,{initialCapacity:20});for(var G=0;G<$.length;G++)0<=G-Z&&G-Z<W&&G<K&&Q.set(G-Z,G,$[G]);return Q}const T=I(49),O=R(2);D.exports=function($){return 2===$?O:R($)}},function(D,E,I){'use strict';function P(te,ne,ae,se,oe,le,de){const ue=0|le*(-ne-se)/(oe-se),ce=de.length;for(var he=0,ge=0,pe=ue-ce/2;pe<ue+ce/2;pe++)he=0|pe,0<=pe&&pe<le&&(te[he]+=de[ge]*ae),ge++}function F(te,ne){te.forEachNonZero((ae,se,oe)=>{return ae>se?0:_Mathabs(oe)<=ne?0:oe})}function T(te,ne,ae,se,oe){let le=1;for(var de=0;de<oe.length;de++)le*=ae[oe[de]];const ue=new Z(le,le);for(var ce=0,he;ce<oe.length;ce++){he=oe[ce];const pe=G(ae[he]);let me,fe,xe=1;for(let ke=0;ke<ce;ke++)xe*=ae[oe[ke]];me=Z.eye(xe),xe=1;for(let ke=ce+1;ke<oe.length;ke++)xe*=ae[oe[ke]];fe=Z.eye(xe);const be=te[he],ye=me.kroneckerProduct(pe.z).kroneckerProduct(fe);ue.add(ye.mul(be));for(var ge=0;ge<oe.length;ge++){const ke=oe[ge];if(1===se[he][ke]){const _e=G(ae[ke]);let we,je,ve=1;for(let De=0;De<ge;De++)ve*=ae[oe[De]];we=Z.eye(ve),ve=1;for(let De=ge+1;De<oe.length;De++)ve*=ae[oe[De]];je=Z.eye(ve);const Se=me.kroneckerProduct(pe.x).kroneckerProduct(fe).mmul(we.kroneckerProduct(_e.x).kroneckerProduct(je));Se.add(me.kroneckerProduct(pe.y).kroneckerProduct(fe).mul(-1).mmul(we.kroneckerProduct(_e.y).kroneckerProduct(je))),Se.add(me.kroneckerProduct(pe.z).kroneckerProduct(fe).mmul(we.kroneckerProduct(_e.z).kroneckerProduct(je))),ue.add(Se.mul(ne[he][ke]/2))}}}return ue}function O(te,ne,ae){const se=Array(ae);for(var le=0;le<ae;le++)se[le]=te+le*((ne-te)/(ae-1));return se}const $=I(16),Z=I(49),W=I(24),K=I(52).asc,Q=I(18),G=I(139),ee=0.01;D.exports=function(te,ne){var ae,se;const oe=ne.frequency||400,le=(ne.from||0)*oe,de=(ne.to||10)*oe,ue=ne.lineWidth||1,ce=ne.nbPoints||1024,he=ne.maxClusterSize||10,ge=ne.output||'y',pe=te.chemicalShifts.slice();for(ae=0;ae<pe.length;ae++)pe[ae]*=oe;let me=ce*ue/_Mathabs(de-le)/2.355,fe=20*me;const xe=0|fe,be=Array(xe),ye=fe/2;for(ae=0;ae<xe;ae++)be[ae]=1e12*_Mathexp(-((ae-ye)*(ae-ye))/(2*(me*me)));const _e=new Q(ce,0),we=te.multiplicity;for(var je=0;je<te.clusters.length;je++){const Re=te.clusters[je];var ve=Array(Re.length);for(ae=0;ae<Re.length;ae++)ve[ae]=0>Re[ae]?-Re[ae]-1:Re[ae];var Se=1,De=0;const Pe=[],Fe=[];if(Re.length>he){for(var Ce=0;0>Re[Ce++];);Ce=Re[Ce-1];var Ee,Ie;for(Pe.push(-pe[Ce]),ae=0;ae<Re.length;ae++)if(0>Re[ae])for(Ie=te.couplingConstants[Ce][ve[ae]]/2,Ee=Pe.length,se=0;se<Ee;se++)Pe.push(Pe[se]+Ie),Pe[se]-=Ie;for(Pe.sort(K),De=Pe.length,Se=1,ae=0;ae<De;ae++)Fe.push(1)}else{const ze=T(pe,te.couplingConstants,we,te.connectivity,ve),Me=ze.rows,Xe=new $.DC.EVD(ze),Ye=Xe.eigenvectorMatrix,Ne=Xe.realEigenvalues,Oe=new Z(Me,Me),Le=Re.length;Se=0;for(var Ae=0;Ae<Le;Ae++){const qe=G(we[ve[Ae]]);let $e=1;for(se=0;se<Ae;se++)$e*=we[ve[se]];const Ze=Z.eye($e);for($e=1,se=Ae+1;se<Le;se++)$e*=we[ve[se]];const We=Z.eye($e),He=Ze.kroneckerProduct(qe.m).kroneckerProduct(We);0<=Re[Ae]?(Oe.add(He.mul(Re[Ae]+1)),Se++):Oe.add(He.mul(Re[Ae]))}let Ue=$.zeros(Me,Me);Oe.forEachNonZero((qe,$e,Ze)=>{if(0<Ze){const He=Ye[$e];for(var We=0;We<He.length;We++)0!==He[We]&&Ue.set(qe,We,Ue.get(qe,We)+He[We])}return Ze});let Be=Ue.clone();Oe.forEachNonZero((qe,$e,Ze)=>{if(0>Ze){const He=Ye[$e];for(var We=0;We<He.length;We++)0!==He[We]&&Be.set(qe,We,Be.get(qe,We)+He[We])}return Ze});const Ve=Ye.transpose();Ue=Ve.mmul(Ue),Ue=new Z(Ue,{threshold:ee}),F(Ue,ee),Be=Ve.mmul(Be),Be=new Z(Be,{threshold:ee}),F(Be,ee),Be.forEachNonZero((qe,$e,Ze)=>{var We=Ue.get(qe,$e);We=_Mathmin(_Mathabs(We),_Mathabs(Ze)),We*=We,De+=We;var He=Ne[qe]-Ne[$e],Je=W(Pe,He,K);0>Je?(Pe.splice(-1-Je,0,He),Fe.splice(-1-Je,0,We)):Fe[Je]+=We})}const Te=Pe.length;if(0<Te){Se/=De;let Me=Pe[0],Xe=Fe[0],Ye=1;for(ae=1;ae<Te;ae++)_Mathabs(Pe[ae]-Me/Ye)<ue/32?(Xe+=Fe[ae],Me+=Pe[ae],Ye++):(P(_e,Me/Ye,Xe*Se,le,de,ce,be),Me=Pe[ae],Xe=Fe[ae],Ye=1);P(_e,Me/Ye,Xe*Se,le,de,ce,be)}}if('xy'===ge)return{x:O(ne.from,ne.to,ce),y:_e};if('y'===ge)return _e;throw new RangeError('wrong output option')}},function(D,E,I){'use strict';function P($,Z,W,K){return(($-Z)*K-1)/(W-Z)}function F($,Z){for(var W=4,K=_Mathmax(0,_Mathround(Z.x-Z.widthX*W)),Q=_Mathmin($[0].length-1,_Mathround(Z.x+Z.widthX*W)),G=_Mathmax(0,_Mathround(Z.y-Z.widthY*W)),ee=_Mathmin($.length-1,_Mathround(Z.y+Z.widthY*W)),te=Z.widthX*Z.widthX,ne=Z.widthY*Z.widthY,ae=G;ae<ee;ae++)for(var se=K;se<Q;se++){var oe=_Mathpow(Z.x-se,2)/te+_Mathpow(Z.y-ae,2)/ne,le=1e4*Z.z*_Mathexp(-oe);$[ae][se]+=le}}const T=I(16);let O={H:{frequency:400,lineWidth:10},C:{frequency:100,lineWidth:10}};D.exports=function($,Z){var W;const K=$[0].fromAtomLabel,Q=$[0].toLabel,G=Z.frequencyX||O[K].frequency,ee=Z.frequencyY||O[Q].frequency;var te=Z.lineWidthX||O[K].lineWidth,ne=Z.lineWidthY||O[Q].lineWidth,oe=$[0].fromChemicalShift,le=$[0].fromChemicalShift,de=$[0].toChemicalShift,ue=$[0].toChemicalShift;for(W=1;W<$.length;)oe=_Mathmin(oe,$[W].fromChemicalShift),le=_Mathmax(le,$[W].fromChemicalShift),de=_Mathmin(de,$[W].toChemicalShift),ue=_Mathmax(ue,$[W].toChemicalShift),W++;null===Z.firstX||isNaN(Z.firstX)||(oe=Z.firstX),null===Z.firstY||isNaN(Z.firstY)||(de=Z.firstY),null===Z.lastX||isNaN(Z.lastX)||(le=Z.lastX),null===Z.lastY||isNaN(Z.lastY)||(ue=Z.lastY);var ce=Z.nbPointsX||512,he=Z.nbPointsY||512,ge=new T(he,ce).fill(0);for(W=0;W<$.length;){let pe={x:P($[W].fromChemicalShift,oe,le,ce),y:P($[W].toChemicalShift,de,ue,he),z:$[W].fromAtoms.length+$[W].toAtoms.length,widthX:P(te/G+oe,oe,le,ce),widthY:P(ne/ee+de,de,ue,he)};F(ge,pe),W++}return ge}},function(D){'use strict';D.exports=Number.isNaN||function(R){return R!==R}},function(D,E,I){'use strict';var R=I(2).assign,P=I(144),F=I(145),T=I(55),O={};R(O,P,F,T),D.exports=O},function(D,E,I){'use strict';function R(de){if(!(this instanceof R))return new R(de);this.options=$.assign({level:se,method:le,chunkSize:16384,windowBits:15,memLevel:8,strategy:oe,to:''},de||{});var ue=this.options;ue.raw&&0<ue.windowBits?ue.windowBits=-ue.windowBits:ue.gzip&&0<ue.windowBits&&16>ue.windowBits&&(ue.windowBits+=16),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new K,this.strm.avail_out=0;var ce=O.deflateInit2(this.strm,ue.level,ue.method,ue.windowBits,ue.memLevel,ue.strategy);if(ce!==te)throw new Error(W[ce]);if(ue.header&&O.deflateSetHeader(this.strm,ue.header),ue.dictionary){var he;if(he='string'==typeof ue.dictionary?Z.string2buf(ue.dictionary):'[object ArrayBuffer]'===Q.call(ue.dictionary)?new Uint8Array(ue.dictionary):ue.dictionary,ce=O.deflateSetDictionary(this.strm,he),ce!==te)throw new Error(W[ce]);this._dict_set=!0}}function P(de,ue){var ce=new R(ue);if(ce.push(de,!0),ce.err)throw ce.msg||W[ce.err];return ce.result}var O=I(146),$=I(2),Z=I(53),W=I(19),K=I(57),Q=Object.prototype.toString,ee=4,te=0,ne=1,ae=2,se=-1,oe=0,le=8;R.prototype.push=function(de,ue){var ce=this.strm,he=this.options.chunkSize,ge,pe;if(this.ended)return!1;pe=ue===~~ue?ue:!0===ue?ee:0,ce.input='string'==typeof de?Z.string2buf(de):'[object ArrayBuffer]'===Q.call(de)?new Uint8Array(de):de,ce.next_in=0,ce.avail_in=ce.input.length;do{if(0===ce.avail_out&&(ce.output=new $.Buf8(he),ce.next_out=0,ce.avail_out=he),ge=O.deflate(ce,pe),ge!==ne&&ge!==te)return this.onEnd(ge),this.ended=!0,!1;(0===ce.avail_out||0===ce.avail_in&&(pe===ee||pe===ae))&&('string'===this.options.to?this.onData(Z.buf2binstring($.shrinkBuf(ce.output,ce.next_out))):this.onData($.shrinkBuf(ce.output,ce.next_out)))}while((0<ce.avail_in||0===ce.avail_out)&&ge!==ne);return pe===ee?(ge=O.deflateEnd(this.strm),this.onEnd(ge),this.ended=!0,ge===te):pe!==ae||(this.onEnd(te),ce.avail_out=0,!0)},R.prototype.onData=function(de){this.chunks.push(de)},R.prototype.onEnd=function(de){de===te&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=$.flattenChunks(this.chunks)),this.chunks=[],this.err=de,this.msg=this.strm.msg},E.Deflate=R,E.deflate=P,E.deflateRaw=function(de,ue){return ue=ue||{},ue.raw=!0,P(de,ue)},E.gzip=function(de,ue){return ue=ue||{},ue.gzip=!0,P(de,ue)}},function(D,E,I){'use strict';function R(ee){if(!(this instanceof R))return new R(ee);this.options=O.assign({chunkSize:16384,windowBits:0,to:''},ee||{});var te=this.options;te.raw&&0<=te.windowBits&&16>te.windowBits&&(te.windowBits=-te.windowBits,0===te.windowBits&&(te.windowBits=-15)),0<=te.windowBits&&16>te.windowBits&&!(ee&&ee.windowBits)&&(te.windowBits+=32),15<te.windowBits&&48>te.windowBits&&0==(15&te.windowBits)&&(te.windowBits|=15),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new K,this.strm.avail_out=0;var ne=T.inflateInit2(this.strm,te.windowBits);if(ne!==Z.Z_OK)throw new Error(W[ne]);this.header=new Q,T.inflateGetHeader(this.strm,this.header)}function P(ee,te){var ne=new R(te);if(ne.push(ee,!0),ne.err)throw ne.msg||W[ne.err];return ne.result}var T=I(149),O=I(2),$=I(53),Z=I(55),W=I(19),K=I(57),Q=I(147),G=Object.prototype.toString;R.prototype.push=function(ee,te){var ne=this.strm,ae=this.options.chunkSize,se=this.options.dictionary,ge=!1,oe,le,de,ue,ce,he;if(this.ended)return!1;le=te===~~te?te:!0===te?Z.Z_FINISH:Z.Z_NO_FLUSH,ne.input='string'==typeof ee?$.binstring2buf(ee):'[object ArrayBuffer]'===G.call(ee)?new Uint8Array(ee):ee,ne.next_in=0,ne.avail_in=ne.input.length;do{if(0===ne.avail_out&&(ne.output=new O.Buf8(ae),ne.next_out=0,ne.avail_out=ae),oe=T.inflate(ne,Z.Z_NO_FLUSH),oe===Z.Z_NEED_DICT&&se&&(he='string'==typeof se?$.string2buf(se):'[object ArrayBuffer]'===G.call(se)?new Uint8Array(se):se,oe=T.inflateSetDictionary(this.strm,he)),oe===Z.Z_BUF_ERROR&&!0==ge&&(oe=Z.Z_OK,ge=!1),oe!==Z.Z_STREAM_END&&oe!==Z.Z_OK)return this.onEnd(oe),this.ended=!0,!1;ne.next_out&&(0===ne.avail_out||oe===Z.Z_STREAM_END||0===ne.avail_in&&(le===Z.Z_FINISH||le===Z.Z_SYNC_FLUSH))&&('string'===this.options.to?(de=$.utf8border(ne.output,ne.next_out),ue=ne.next_out-de,ce=$.buf2string(ne.output,de),ne.next_out=ue,ne.avail_out=ae-ue,ue&&O.arraySet(ne.output,ne.output,de,ue,0),this.onData(ce)):this.onData(O.shrinkBuf(ne.output,ne.next_out))),0===ne.avail_in&&0===ne.avail_out&&(ge=!0)}while((0<ne.avail_in||0===ne.avail_out)&&oe!==Z.Z_STREAM_END);return oe===Z.Z_STREAM_END&&(le=Z.Z_FINISH),le===Z.Z_FINISH?(oe=T.inflateEnd(this.strm),this.onEnd(oe),this.ended=!0,oe===Z.Z_OK):le!==Z.Z_SYNC_FLUSH||(this.onEnd(Z.Z_OK),ne.avail_out=0,!0)},R.prototype.onData=function(ee){this.chunks.push(ee)},R.prototype.onEnd=function(ee){ee===Z.Z_OK&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=O.flattenChunks(this.chunks)),this.chunks=[],this.err=ee,this.msg=this.strm.msg},E.Inflate=R,E.inflate=P,E.inflateRaw=function(ee,te){return te=te||{},te.raw=!0,P(ee,te)},E.ungzip=P},function(D,E,I){'use strict';function R(mt,xt){return mt.msg=_e[xt],xt}function P(mt){return(mt<<1)-(4<mt?9:0)}function F(mt){for(var xt=mt.length;0<=--xt;)mt[xt]=0}function T(mt){var xt=mt.state,bt=xt.pending;bt>mt.avail_out&&(bt=mt.avail_out);0===bt||(xe.arraySet(mt.output,xt.pending_buf,xt.pending_out,bt,mt.next_out),mt.next_out+=bt,xt.pending_out+=bt,mt.total_out+=bt,mt.avail_out-=bt,xt.pending-=bt,0===xt.pending&&(xt.pending_out=0))}function O(mt,xt){be._tr_flush_block(mt,0<=mt.block_start?mt.block_start:-1,mt.strstart-mt.block_start,xt),mt.block_start=mt.strstart,T(mt.strm)}function $(mt,xt){mt.pending_buf[mt.pending++]=xt}function Z(mt,xt){mt.pending_buf[mt.pending++]=255&xt>>>8,mt.pending_buf[mt.pending++]=255&xt}function W(mt,xt,bt,yt){var kt=mt.avail_in;return(kt>yt&&(kt=yt),0===kt)?0:(mt.avail_in-=kt,xe.arraySet(xt,mt.input,mt.next_in,kt,bt),1===mt.state.wrap?mt.adler=ye(mt.adler,xt,kt,bt):2===mt.state.wrap&&(mt.adler=ke(mt.adler,xt,kt,bt)),mt.next_in+=kt,mt.total_in+=kt,kt)}function K(mt,xt){var bt=mt.max_chain_length,yt=mt.strstart,kt,_t,wt=mt.prev_length,jt=mt.nice_match,vt=mt.strstart>mt.w_size-Qe?mt.strstart-(mt.w_size-Qe):0,St=mt.window,Dt=mt.w_mask,Ct=mt.prev,Et=mt.strstart+Ke,It=St[yt+wt-1],At=St[yt+wt];mt.prev_length>=mt.good_match&&(bt>>=2),jt>mt.lookahead&&(jt=mt.lookahead);do{if(kt=xt,St[kt+wt]!==At||St[kt+wt-1]!==It||St[kt]!==St[yt]||St[++kt]!==St[yt+1])continue;yt+=2,kt++;do;while(St[++yt]===St[++kt]&&St[++yt]===St[++kt]&&St[++yt]===St[++kt]&&St[++yt]===St[++kt]&&St[++yt]===St[++kt]&&St[++yt]===St[++kt]&&St[++yt]===St[++kt]&&St[++yt]===St[++kt]&&yt<Et);if(_t=Ke-(Et-yt),yt=Et-Ke,_t>wt){if(mt.match_start=xt,wt=_t,_t>=jt)break;It=St[yt+wt-1],At=St[yt+wt]}}while((xt=Ct[xt&Dt])>vt&&0!=--bt);return wt<=mt.lookahead?wt:mt.lookahead}function Q(mt){var xt=mt.w_size,bt,yt,kt,_t,wt;do{if(_t=mt.window_size-mt.lookahead-mt.strstart,mt.strstart>=xt+(xt-Qe)){xe.arraySet(mt.window,mt.window,xt,xt,0),mt.match_start-=xt,mt.strstart-=xt,mt.block_start-=xt,yt=mt.hash_size,bt=yt;do kt=mt.head[--bt],mt.head[bt]=kt>=xt?kt-xt:0;while(--yt);yt=xt,bt=yt;do kt=mt.prev[--bt],mt.prev[bt]=kt>=xt?kt-xt:0;while(--yt);_t+=xt}if(0===mt.strm.avail_in)break;if(yt=W(mt.strm,mt.window,mt.strstart+mt.lookahead,_t),mt.lookahead+=yt,mt.lookahead+mt.insert>=Je)for(wt=mt.strstart-mt.insert,mt.ins_h=mt.window[wt],mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[wt+1])&mt.hash_mask;mt.insert&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[wt+Je-1])&mt.hash_mask,mt.prev[wt&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=wt,wt++,mt.insert--,!(mt.lookahead+mt.insert<Je)););}while(mt.lookahead<Qe&&0!==mt.strm.avail_in)}function ee(mt,xt){for(var bt,yt;;){if(mt.lookahead<Qe){if(Q(mt),mt.lookahead<Qe&&xt===we)return lt;if(0===mt.lookahead)break}if(bt=0,mt.lookahead>=Je&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Je-1])&mt.hash_mask,bt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart),0!==bt&&mt.strstart-bt<=mt.w_size-Qe&&(mt.match_length=K(mt,bt)),!(mt.match_length>=Je))yt=be._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++;else if(yt=be._tr_tally(mt,mt.strstart-mt.match_start,mt.match_length-Je),mt.lookahead-=mt.match_length,mt.match_length<=mt.max_lazy_match&&mt.lookahead>=Je){mt.match_length--;do mt.strstart++,mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Je-1])&mt.hash_mask,bt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart;while(0!=--mt.match_length);mt.strstart++}else mt.strstart+=mt.match_length,mt.match_length=0,mt.ins_h=mt.window[mt.strstart],mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+1])&mt.hash_mask;if(yt&&(O(mt,!1),0===mt.strm.avail_out))return lt}return mt.insert=mt.strstart<Je-1?mt.strstart:Je-1,xt===Se?(O(mt,!0),0===mt.strm.avail_out?ct:ht):mt.last_lit&&(O(mt,!1),0===mt.strm.avail_out)?lt:ut}function te(mt,xt){for(var bt,yt,kt;;){if(mt.lookahead<Qe){if(Q(mt),mt.lookahead<Qe&&xt===we)return lt;if(0===mt.lookahead)break}if(bt=0,mt.lookahead>=Je&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Je-1])&mt.hash_mask,bt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart),mt.prev_length=mt.match_length,mt.prev_match=mt.match_start,mt.match_length=Je-1,0!==bt&&mt.prev_length<mt.max_lazy_match&&mt.strstart-bt<=mt.w_size-Qe&&(mt.match_length=K(mt,bt),5>=mt.match_length&&(mt.strategy===Fe||mt.match_length===Je&&4096<mt.strstart-mt.match_start)&&(mt.match_length=Je-1)),mt.prev_length>=Je&&mt.match_length<=mt.prev_length){kt=mt.strstart+mt.lookahead-Je,yt=be._tr_tally(mt,mt.strstart-1-mt.prev_match,mt.prev_length-Je),mt.lookahead-=mt.prev_length-1,mt.prev_length-=2;do++mt.strstart<=kt&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Je-1])&mt.hash_mask,bt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart);while(0!=--mt.prev_length);if(mt.match_available=0,mt.match_length=Je-1,mt.strstart++,yt&&(O(mt,!1),0===mt.strm.avail_out))return lt}else if(!mt.match_available)mt.match_available=1,mt.strstart++,mt.lookahead--;else if(yt=be._tr_tally(mt,0,mt.window[mt.strstart-1]),yt&&O(mt,!1),mt.strstart++,mt.lookahead--,0===mt.strm.avail_out)return lt}return mt.match_available&&(yt=be._tr_tally(mt,0,mt.window[mt.strstart-1]),mt.match_available=0),mt.insert=mt.strstart<Je-1?mt.strstart:Je-1,xt===Se?(O(mt,!0),0===mt.strm.avail_out?ct:ht):mt.last_lit&&(O(mt,!1),0===mt.strm.avail_out)?lt:ut}function ne(mt,xt){for(var wt=mt.window,bt,yt,kt,_t;;){if(mt.lookahead<=Ke){if(Q(mt),mt.lookahead<=Ke&&xt===we)return lt;if(0===mt.lookahead)break}if(mt.match_length=0,mt.lookahead>=Je&&0<mt.strstart&&(kt=mt.strstart-1,yt=wt[kt],yt===wt[++kt]&&yt===wt[++kt]&&yt===wt[++kt])){_t=mt.strstart+Ke;do;while(yt===wt[++kt]&&yt===wt[++kt]&&yt===wt[++kt]&&yt===wt[++kt]&&yt===wt[++kt]&&yt===wt[++kt]&&yt===wt[++kt]&&yt===wt[++kt]&&kt<_t);mt.match_length=Ke-(_t-kt),mt.match_length>mt.lookahead&&(mt.match_length=mt.lookahead)}if(mt.match_length>=Je?(bt=be._tr_tally(mt,1,mt.match_length-Je),mt.lookahead-=mt.match_length,mt.strstart+=mt.match_length,mt.match_length=0):(bt=be._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++),bt&&(O(mt,!1),0===mt.strm.avail_out))return lt}return mt.insert=0,xt===Se?(O(mt,!0),0===mt.strm.avail_out?ct:ht):mt.last_lit&&(O(mt,!1),0===mt.strm.avail_out)?lt:ut}function ae(mt,xt){for(var bt;;){if(0===mt.lookahead&&(Q(mt),0===mt.lookahead)){if(xt===we)return lt;break}if(mt.match_length=0,bt=be._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++,bt&&(O(mt,!1),0===mt.strm.avail_out))return lt}return mt.insert=0,xt===Se?(O(mt,!0),0===mt.strm.avail_out?ct:ht):mt.last_lit&&(O(mt,!1),0===mt.strm.avail_out)?lt:ut}function se(mt,xt,bt,yt,kt){this.good_length=mt,this.max_lazy=xt,this.nice_length=bt,this.max_chain=yt,this.func=kt}function oe(mt){mt.window_size=2*mt.w_size,F(mt.head),mt.max_lazy_match=pt[mt.level].max_lazy,mt.good_match=pt[mt.level].good_length,mt.nice_match=pt[mt.level].nice_length,mt.max_chain_length=pt[mt.level].max_chain,mt.strstart=0,mt.block_start=0,mt.lookahead=0,mt.insert=0,mt.match_length=mt.prev_length=Je-1,mt.match_available=0,mt.ins_h=0}function le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ne,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new xe.Buf16(2*We),this.dyn_dtree=new xe.Buf16(2*(2*$e+1)),this.bl_tree=new xe.Buf16(2*(2*Ze+1)),F(this.dyn_ltree),F(this.dyn_dtree),F(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new xe.Buf16(He+1),this.heap=new xe.Buf16(2*qe+1),F(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new xe.Buf16(2*qe+1),F(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(mt){var xt;return mt&&mt.state?(mt.total_in=mt.total_out=0,mt.data_type=Ye,xt=mt.state,xt.pending=0,xt.pending_out=0,0>xt.wrap&&(xt.wrap=-xt.wrap),xt.status=xt.wrap?et:st,mt.adler=2===xt.wrap?0:1,xt.last_flush=we,be._tr_init(xt),Ce):R(mt,Ie)}function ue(mt){var xt=de(mt);return xt===Ce&&oe(mt.state),xt}function he(mt,xt,bt,yt,kt,_t){if(!mt)return Ie;var wt=1;if(xt===Pe&&(xt=6),0>yt?(wt=0,yt=-yt):15<yt&&(wt=2,yt-=16),1>kt||kt>Oe||bt!==Ne||8>yt||15<yt||0>xt||9<xt||0>_t||_t>Me)return R(mt,Ie);8===yt&&(yt=9);var jt=new le;return mt.state=jt,jt.strm=mt,jt.wrap=wt,jt.gzhead=null,jt.w_bits=yt,jt.w_size=1<<jt.w_bits,jt.w_mask=jt.w_size-1,jt.hash_bits=kt+7,jt.hash_size=1<<jt.hash_bits,jt.hash_mask=jt.hash_size-1,jt.hash_shift=~~((jt.hash_bits+Je-1)/Je),jt.window=new xe.Buf8(2*jt.w_size),jt.head=new xe.Buf16(jt.hash_size),jt.prev=new xe.Buf16(jt.w_size),jt.lit_bufsize=1<<kt+6,jt.pending_buf_size=4*jt.lit_bufsize,jt.pending_buf=new xe.Buf8(jt.pending_buf_size),jt.d_buf=1*jt.lit_bufsize,jt.l_buf=3*jt.lit_bufsize,jt.level=xt,jt.strategy=_t,jt.method=bt,ue(mt)}var xe=I(2),be=I(151),ye=I(54),ke=I(56),_e=I(19),we=0,Se=4,De=5,Ce=0,Ee=1,Ie=-2,Re=-5,Pe=-1,Fe=1,Te=2,Me=4,Ye=2,Ne=8,Oe=9,qe=256+1+29,$e=30,Ze=19,We=2*qe+1,He=15,Je=3,Ke=258,Qe=Ke+Je+1,et=42,tt=69,it=73,nt=91,at=103,st=113,ot=666,lt=1,ut=2,ct=3,ht=4,pt;pt=[new se(0,0,0,0,function(mt,xt){var bt=65535;for(bt>mt.pending_buf_size-5&&(bt=mt.pending_buf_size-5);;){if(1>=mt.lookahead){if(Q(mt),0===mt.lookahead&&xt===we)return lt;if(0===mt.lookahead)break}mt.strstart+=mt.lookahead,mt.lookahead=0;var yt=mt.block_start+bt;if((0===mt.strstart||mt.strstart>=yt)&&(mt.lookahead=mt.strstart-yt,mt.strstart=yt,O(mt,!1),0===mt.strm.avail_out))return lt;if(mt.strstart-mt.block_start>=mt.w_size-Qe&&(O(mt,!1),0===mt.strm.avail_out))return lt}return mt.insert=0,xt===Se?(O(mt,!0),0===mt.strm.avail_out?ct:ht):mt.strstart>mt.block_start&&(O(mt,!1),0===mt.strm.avail_out)?lt:lt}),new se(4,4,8,4,ee),new se(4,5,16,8,ee),new se(4,6,32,32,ee),new se(4,4,16,16,te),new se(8,16,32,32,te),new se(8,16,128,128,te),new se(8,32,128,256,te),new se(32,128,258,1024,te),new se(32,258,258,4096,te)],E.deflateInit=function(mt,xt){return he(mt,xt,Ne,15,8,0)},E.deflateInit2=he,E.deflateReset=ue,E.deflateResetKeep=de,E.deflateSetHeader=function(mt,xt){return mt&&mt.state?2===mt.state.wrap?(mt.state.gzhead=xt,Ce):Ie:Ie},E.deflate=function(mt,xt){var bt,yt,kt,_t;if(!mt||!mt.state||xt>De||0>xt)return mt?R(mt,Ie):Ie;if(yt=mt.state,!mt.output||!mt.input&&0!==mt.avail_in||yt.status===ot&&xt!==Se)return R(mt,0===mt.avail_out?Re:Ie);if(yt.strm=mt,bt=yt.last_flush,yt.last_flush=xt,yt.status===et)if(2===yt.wrap)mt.adler=0,$(yt,31),$(yt,139),$(yt,8),yt.gzhead?($(yt,(yt.gzhead.text?1:0)+(yt.gzhead.hcrc?2:0)+(yt.gzhead.extra?4:0)+(yt.gzhead.name?8:0)+(yt.gzhead.comment?16:0)),$(yt,255&yt.gzhead.time),$(yt,255&yt.gzhead.time>>8),$(yt,255&yt.gzhead.time>>16),$(yt,255&yt.gzhead.time>>24),$(yt,9===yt.level?2:yt.strategy>=Te||2>yt.level?4:0),$(yt,255&yt.gzhead.os),yt.gzhead.extra&&yt.gzhead.extra.length&&($(yt,255&yt.gzhead.extra.length),$(yt,255&yt.gzhead.extra.length>>8)),yt.gzhead.hcrc&&(mt.adler=ke(mt.adler,yt.pending_buf,yt.pending,0)),yt.gzindex=0,yt.status=tt):($(yt,0),$(yt,0),$(yt,0),$(yt,0),$(yt,0),$(yt,9===yt.level?2:yt.strategy>=Te||2>yt.level?4:0),$(yt,3),yt.status=st);else{var wt=Ne+(yt.w_bits-8<<4)<<8,jt=-1;jt=yt.strategy>=Te||2>yt.level?0:6>yt.level?1:6===yt.level?2:3,wt|=jt<<6,0!==yt.strstart&&(wt|=32),wt+=31-wt%31,yt.status=st,Z(yt,wt),0!==yt.strstart&&(Z(yt,mt.adler>>>16),Z(yt,65535&mt.adler)),mt.adler=1}if(yt.status===tt)if(yt.gzhead.extra){for(kt=yt.pending;yt.gzindex<(65535&yt.gzhead.extra.length)&&!(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>kt&&(mt.adler=ke(mt.adler,yt.pending_buf,yt.pending-kt,kt)),T(mt),kt=yt.pending,yt.pending===yt.pending_buf_size));)$(yt,255&yt.gzhead.extra[yt.gzindex]),yt.gzindex++;yt.gzhead.hcrc&&yt.pending>kt&&(mt.adler=ke(mt.adler,yt.pending_buf,yt.pending-kt,kt)),yt.gzindex===yt.gzhead.extra.length&&(yt.gzindex=0,yt.status=it)}else yt.status=it;if(yt.status===it)if(yt.gzhead.name){kt=yt.pending;do{if(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>kt&&(mt.adler=ke(mt.adler,yt.pending_buf,yt.pending-kt,kt)),T(mt),kt=yt.pending,yt.pending===yt.pending_buf_size)){_t=1;break}_t=yt.gzindex<yt.gzhead.name.length?255&yt.gzhead.name.charCodeAt(yt.gzindex++):0,$(yt,_t)}while(0!==_t);yt.gzhead.hcrc&&yt.pending>kt&&(mt.adler=ke(mt.adler,yt.pending_buf,yt.pending-kt,kt)),0===_t&&(yt.gzindex=0,yt.status=nt)}else yt.status=nt;if(yt.status===nt)if(yt.gzhead.comment){kt=yt.pending;do{if(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>kt&&(mt.adler=ke(mt.adler,yt.pending_buf,yt.pending-kt,kt)),T(mt),kt=yt.pending,yt.pending===yt.pending_buf_size)){_t=1;break}_t=yt.gzindex<yt.gzhead.comment.length?255&yt.gzhead.comment.charCodeAt(yt.gzindex++):0,$(yt,_t)}while(0!==_t);yt.gzhead.hcrc&&yt.pending>kt&&(mt.adler=ke(mt.adler,yt.pending_buf,yt.pending-kt,kt)),0===_t&&(yt.status=at)}else yt.status=at;if(yt.status===at&&(yt.gzhead.hcrc?(yt.pending+2>yt.pending_buf_size&&T(mt),yt.pending+2<=yt.pending_buf_size&&($(yt,255&mt.adler),$(yt,255&mt.adler>>8),mt.adler=0,yt.status=st)):yt.status=st),0!==yt.pending){if(T(mt),0===mt.avail_out)return yt.last_flush=-1,Ce;}else if(0===mt.avail_in&&P(xt)<=P(bt)&&xt!==Se)return R(mt,Re);if(yt.status===ot&&0!==mt.avail_in)return R(mt,Re);if(0!==mt.avail_in||0!==yt.lookahead||xt!==we&&yt.status!==ot){var vt=yt.strategy===Te?ae(yt,xt):yt.strategy===3?ne(yt,xt):pt[yt.level].func(yt,xt);if((vt===ct||vt===ht)&&(yt.status=ot),vt===lt||vt===ct)return 0===mt.avail_out&&(yt.last_flush=-1),Ce;if(vt===ut&&(xt===1?be._tr_align(yt):xt!==De&&(be._tr_stored_block(yt,0,0,!1),xt===3&&(F(yt.head),0===yt.lookahead&&(yt.strstart=0,yt.block_start=0,yt.insert=0))),T(mt),0===mt.avail_out))return yt.last_flush=-1,Ce}return xt===Se?0>=yt.wrap?Ee:(2===yt.wrap?($(yt,255&mt.adler),$(yt,255&mt.adler>>8),$(yt,255&mt.adler>>16),$(yt,255&mt.adler>>24),$(yt,255&mt.total_in),$(yt,255&mt.total_in>>8),$(yt,255&mt.total_in>>16),$(yt,255&mt.total_in>>24)):(Z(yt,mt.adler>>>16),Z(yt,65535&mt.adler)),T(mt),0<yt.wrap&&(yt.wrap=-yt.wrap),0===yt.pending?Ee:Ce):Ce},E.deflateEnd=function(mt){var xt;return mt&&mt.state?(xt=mt.state.status,xt!==et&&xt!==tt&&xt!==it&&xt!==nt&&xt!==at&&xt!==st&&xt!==ot)?R(mt,Ie):(mt.state=null,xt===st?R(mt,-3):Ce):Ie},E.deflateSetDictionary=function(mt,xt){var bt=xt.length,yt,kt,_t,wt,jt,vt,St,Dt;if(!mt||!mt.state)return Ie;if(yt=mt.state,wt=yt.wrap,2===wt||1===wt&&yt.status!==et||yt.lookahead)return Ie;for(1===wt&&(mt.adler=ye(mt.adler,xt,bt,0)),yt.wrap=0,bt>=yt.w_size&&(0===wt&&(F(yt.head),yt.strstart=0,yt.block_start=0,yt.insert=0),Dt=new xe.Buf8(yt.w_size),xe.arraySet(Dt,xt,bt-yt.w_size,yt.w_size,0),xt=Dt,bt=yt.w_size),jt=mt.avail_in,vt=mt.next_in,St=mt.input,mt.avail_in=bt,mt.next_in=0,mt.input=xt,Q(yt);yt.lookahead>=Je;){kt=yt.strstart,_t=yt.lookahead-(Je-1);do yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[kt+Je-1])&yt.hash_mask,yt.prev[kt&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=kt,kt++;while(--_t);yt.strstart=kt,yt.lookahead=Je-1,Q(yt)}return yt.strstart+=yt.lookahead,yt.block_start=yt.strstart,yt.insert=yt.lookahead,yt.lookahead=0,yt.match_length=yt.prev_length=Je-1,yt.match_available=0,mt.next_in=vt,mt.input=St,mt.avail_in=jt,yt.wrap=wt,Ce},E.deflateInfo='pako deflate (from Nodeca project)'},function(D){'use strict';D.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name='',this.comment='',this.hcrc=0,this.done=!1}},function(D){'use strict';var R=30;D.exports=function(T,O){var $,Z,W,K,Q,G,ee,te,ne,ae,se,oe,le,de,ue,ce,he,ge,pe,me,fe,xe,be,ye,ke;$=T.state,Z=T.next_in,ye=T.input,W=Z+(T.avail_in-5),K=T.next_out,ke=T.output,Q=K-(O-T.avail_out),G=K+(T.avail_out-257),ee=$.dmax,te=$.wsize,ne=$.whave,ae=$.wnext,se=$.window,oe=$.hold,le=$.bits,de=$.lencode,ue=$.distcode,ce=(1<<$.lenbits)-1,he=(1<<$.distbits)-1;top:do{15>le&&(oe+=ye[Z++]<<le,le+=8,oe+=ye[Z++]<<le,le+=8),ge=de[oe&ce];dolen:for(;;){if(pe=ge>>>24,oe>>>=pe,le-=pe,pe=255&ge>>>16,0===pe)ke[K++]=65535&ge;else if(16&pe){me=65535&ge,pe&=15,pe&&(le<pe&&(oe+=ye[Z++]<<le,le+=8),me+=oe&(1<<pe)-1,oe>>>=pe,le-=pe),15>le&&(oe+=ye[Z++]<<le,le+=8,oe+=ye[Z++]<<le,le+=8),ge=ue[oe&he];dodist:for(;;){if(pe=ge>>>24,oe>>>=pe,le-=pe,pe=255&ge>>>16,16&pe){if(fe=65535&ge,pe&=15,le<pe&&(oe+=ye[Z++]<<le,le+=8,le<pe&&(oe+=ye[Z++]<<le,le+=8)),fe+=oe&(1<<pe)-1,fe>ee){T.msg='invalid distance too far back',$.mode=R;break top}if(oe>>>=pe,le-=pe,pe=K-Q,fe>pe){if(pe=fe-pe,pe>ne&&$.sane){T.msg='invalid distance too far back',$.mode=R;break top}if(xe=0,be=se,0===ae){if(xe+=te-pe,pe<me){me-=pe;do ke[K++]=se[xe++];while(--pe);xe=K-fe,be=ke}}else if(ae<pe){if(xe+=te+ae-pe,pe-=ae,pe<me){me-=pe;do ke[K++]=se[xe++];while(--pe);if(xe=0,ae<me){pe=ae,me-=pe;do ke[K++]=se[xe++];while(--pe);xe=K-fe,be=ke}}}else if(xe+=ae-pe,pe<me){me-=pe;do ke[K++]=se[xe++];while(--pe);xe=K-fe,be=ke}for(;2<me;)ke[K++]=be[xe++],ke[K++]=be[xe++],ke[K++]=be[xe++],me-=3;me&&(ke[K++]=be[xe++],1<me&&(ke[K++]=be[xe++]))}else{xe=K-fe;do ke[K++]=ke[xe++],ke[K++]=ke[xe++],ke[K++]=ke[xe++],me-=3;while(2<me);me&&(ke[K++]=ke[xe++],1<me&&(ke[K++]=ke[xe++]))}}else if(0==(64&pe)){ge=ue[(65535&ge)+(oe&(1<<pe)-1)];continue dodist}else{T.msg='invalid distance code',$.mode=R;break top}break}}else if(0==(64&pe)){ge=de[(65535&ge)+(oe&(1<<pe)-1)];continue dolen}else if(32&pe){$.mode=12;break top}else{T.msg='invalid literal/length code',$.mode=R;break top}break}}while(Z<W&&K<G);return me=le>>3,Z-=me,le-=me<<3,oe&=(1<<le)-1,T.next_in=Z,T.next_out=K,T.avail_in=Z<W?5+(W-Z):5-(Z-W),T.avail_out=K<G?257+(G-K):257-(K-G),$.hold=oe,void($.bits=le)}},function(D,E,I){'use strict';function R(ut){return(255&ut>>>24)+(65280&ut>>>8)+((65280&ut)<<8)+((255&ut)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ne.Buf16(320),this.work=new ne.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function F(ut){var ct;return ut&&ut.state?(ct=ut.state,ut.total_in=ut.total_out=ct.total=0,ut.msg='',ct.wrap&&(ut.adler=1&ct.wrap),ct.mode=je,ct.last=0,ct.havedict=0,ct.dmax=32768,ct.head=null,ct.hold=0,ct.bits=0,ct.lencode=ct.lendyn=new ne.Buf32(tt),ct.distcode=ct.distdyn=new ne.Buf32(it),ct.sane=1,ct.back=-1,me):be}function T(ut){var ct;return ut&&ut.state?(ct=ut.state,ct.wsize=0,ct.whave=0,ct.wnext=0,F(ut)):be}function O(ut,ct){var ht,gt;return ut&&ut.state?(gt=ut.state,0>ct?(ht=0,ct=-ct):(ht=(ct>>4)+1,48>ct&&(ct&=15)),ct&&(8>ct||15<ct))?be:(null!==gt.window&&gt.wbits!==ct&&(gt.window=null),gt.wrap=ht,gt.wbits=ct,T(ut)):be}function $(ut,ct){var ht,gt;return ut?(gt=new P,ut.state=gt,gt.window=null,ht=O(ut,ct),ht!==me&&(ut.state=null),ht):be}function W(ut){if(st){var ct;for(ot=new ne.Buf32(512),lt=new ne.Buf32(32),ct=0;144>ct;)ut.lens[ct++]=8;for(;256>ct;)ut.lens[ct++]=9;for(;280>ct;)ut.lens[ct++]=7;for(;288>ct;)ut.lens[ct++]=8;for(le(ue,ut.lens,0,288,ot,0,ut.work,{bits:9}),ct=0;32>ct;)ut.lens[ct++]=5;le(ce,ut.lens,0,32,lt,0,ut.work,{bits:5}),st=!1}ut.lencode=ot,ut.lenbits=9,ut.distcode=lt,ut.distbits=5}function K(ut,ct,ht,gt){var mt=ut.state,pt;return null===mt.window&&(mt.wsize=1<<mt.wbits,mt.wnext=0,mt.whave=0,mt.window=new ne.Buf8(mt.wsize)),gt>=mt.wsize?(ne.arraySet(mt.window,ct,ht-mt.wsize,mt.wsize,0),mt.wnext=0,mt.whave=mt.wsize):(pt=mt.wsize-mt.wnext,pt>gt&&(pt=gt),ne.arraySet(mt.window,ct,ht-gt,pt,mt.wnext),gt-=pt,gt?(ne.arraySet(mt.window,ct,ht-gt,gt,0),mt.wnext=gt,mt.whave=mt.wsize):(mt.wnext+=pt,mt.wnext===mt.wsize&&(mt.wnext=0),mt.whave<mt.wsize&&(mt.whave+=pt))),0}var ne=I(2),ae=I(54),se=I(56),oe=I(148),le=I(150),ue=1,ce=2,he=4,pe=6,me=0,be=-2,ye=-3,ke=-4,we=8,je=1,ve=2,Se=3,De=4,Ce=5,Ee=6,Ie=7,Ae=8,Re=9,Pe=10,Fe=11,Te=12,ze=13,Me=14,Xe=15,Ye=16,Ne=17,Oe=18,Le=19,Ue=20,Be=21,Ve=22,qe=23,$e=24,Ze=25,We=26,He=27,Je=28,Ke=29,Qe=30,Ge=31,tt=852,it=592,st=!0,ot,lt;E.inflateReset=T,E.inflateReset2=O,E.inflateResetKeep=F,E.inflateInit=function(ut){return $(ut,15)},E.inflateInit2=$,E.inflate=function(ut,ct){var Ct=0,Mt=new ne.Buf8(4),Nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ht,gt,pt,mt,xt,bt,yt,kt,_t,wt,jt,vt,St,Dt,Et,It,At,Rt,Pt,Ft,Tt,zt,Xt,Yt;if(!ut||!ut.state||!ut.output||!ut.input&&0!==ut.avail_in)return be;ht=ut.state,ht.mode===Te&&(ht.mode=ze),xt=ut.next_out,pt=ut.output,yt=ut.avail_out,mt=ut.next_in,gt=ut.input,bt=ut.avail_in,kt=ht.hold,_t=ht.bits,wt=bt,jt=yt,zt=me;inf_leave:for(;;)switch(ht.mode){case je:if(0===ht.wrap){ht.mode=ze;break}for(;16>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}if(2&ht.wrap&&35615===kt){ht.check=0,Mt[0]=255&kt,Mt[1]=255&kt>>>8,ht.check=se(ht.check,Mt,2,0),kt=0,_t=0,ht.mode=ve;break}if(ht.flags=0,ht.head&&(ht.head.done=!1),!(1&ht.wrap)||(((255&kt)<<8)+(kt>>8))%31){ut.msg='incorrect header check',ht.mode=Qe;break}if((15&kt)!=we){ut.msg='unknown compression method',ht.mode=Qe;break}if(kt>>>=4,_t-=4,Tt=(15&kt)+8,0===ht.wbits)ht.wbits=Tt;else if(Tt>ht.wbits){ut.msg='invalid window size',ht.mode=Qe;break}ht.dmax=1<<Tt,ut.adler=ht.check=1,ht.mode=512&kt?Pe:Te,kt=0,_t=0;break;case ve:for(;16>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}if(ht.flags=kt,(255&ht.flags)!=we){ut.msg='unknown compression method',ht.mode=Qe;break}if(57344&ht.flags){ut.msg='unknown header flags set',ht.mode=Qe;break}ht.head&&(ht.head.text=1&kt>>8),512&ht.flags&&(Mt[0]=255&kt,Mt[1]=255&kt>>>8,ht.check=se(ht.check,Mt,2,0)),kt=0,_t=0,ht.mode=Se;case Se:for(;32>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}ht.head&&(ht.head.time=kt),512&ht.flags&&(Mt[0]=255&kt,Mt[1]=255&kt>>>8,Mt[2]=255&kt>>>16,Mt[3]=255&kt>>>24,ht.check=se(ht.check,Mt,4,0)),kt=0,_t=0,ht.mode=De;case De:for(;16>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}ht.head&&(ht.head.xflags=255&kt,ht.head.os=kt>>8),512&ht.flags&&(Mt[0]=255&kt,Mt[1]=255&kt>>>8,ht.check=se(ht.check,Mt,2,0)),kt=0,_t=0,ht.mode=Ce;case Ce:if(1024&ht.flags){for(;16>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}ht.length=kt,ht.head&&(ht.head.extra_len=kt),512&ht.flags&&(Mt[0]=255&kt,Mt[1]=255&kt>>>8,ht.check=se(ht.check,Mt,2,0)),kt=0,_t=0}else ht.head&&(ht.head.extra=null);ht.mode=Ee;case Ee:if(1024&ht.flags&&(vt=ht.length,vt>bt&&(vt=bt),vt&&(ht.head&&(Tt=ht.head.extra_len-ht.length,!ht.head.extra&&(ht.head.extra=Array(ht.head.extra_len)),ne.arraySet(ht.head.extra,gt,mt,vt,Tt)),512&ht.flags&&(ht.check=se(ht.check,gt,vt,mt)),bt-=vt,mt+=vt,ht.length-=vt),ht.length))break inf_leave;ht.length=0,ht.mode=Ie;case Ie:if(2048&ht.flags){if(0===bt)break inf_leave;vt=0;do Tt=gt[mt+vt++],ht.head&&Tt&&65536>ht.length&&(ht.head.name+=_StringfromCharCode(Tt));while(Tt&&vt<bt);if(512&ht.flags&&(ht.check=se(ht.check,gt,vt,mt)),bt-=vt,mt+=vt,Tt)break inf_leave}else ht.head&&(ht.head.name=null);ht.length=0,ht.mode=Ae;case Ae:if(4096&ht.flags){if(0===bt)break inf_leave;vt=0;do Tt=gt[mt+vt++],ht.head&&Tt&&65536>ht.length&&(ht.head.comment+=_StringfromCharCode(Tt));while(Tt&&vt<bt);if(512&ht.flags&&(ht.check=se(ht.check,gt,vt,mt)),bt-=vt,mt+=vt,Tt)break inf_leave}else ht.head&&(ht.head.comment=null);ht.mode=Re;case Re:if(512&ht.flags){for(;16>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}if(kt!==(65535&ht.check)){ut.msg='header crc mismatch',ht.mode=Qe;break}kt=0,_t=0}ht.head&&(ht.head.hcrc=1&ht.flags>>9,ht.head.done=!0),ut.adler=ht.check=0,ht.mode=Te;break;case Pe:for(;32>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}ut.adler=ht.check=R(kt),kt=0,_t=0,ht.mode=Fe;case Fe:if(0===ht.havedict)return ut.next_out=xt,ut.avail_out=yt,ut.next_in=mt,ut.avail_in=bt,ht.hold=kt,ht.bits=_t,2;ut.adler=ht.check=1,ht.mode=Te;case Te:if(ct===5||ct===pe)break inf_leave;case ze:if(ht.last){kt>>>=7&_t,_t-=7&_t,ht.mode=He;break}for(;3>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}switch(ht.last=1&kt,kt>>>=1,_t-=1,3&kt){case 0:ht.mode=Me;break;case 1:if(W(ht),ht.mode=Ue,ct===pe){kt>>>=2,_t-=2;break inf_leave}break;case 2:ht.mode=Ne;break;case 3:ut.msg='invalid block type',ht.mode=Qe;}kt>>>=2,_t-=2;break;case Me:for(kt>>>=7&_t,_t-=7&_t;32>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}if((65535&kt)!=(65535^kt>>>16)){ut.msg='invalid stored block lengths',ht.mode=Qe;break}if(ht.length=65535&kt,kt=0,_t=0,ht.mode=Xe,ct===pe)break inf_leave;case Xe:ht.mode=Ye;case Ye:if(vt=ht.length,vt){if(vt>bt&&(vt=bt),vt>yt&&(vt=yt),0===vt)break inf_leave;ne.arraySet(pt,gt,mt,vt,xt),bt-=vt,mt+=vt,yt-=vt,xt+=vt,ht.length-=vt;break}ht.mode=Te;break;case Ne:for(;14>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}if(ht.nlen=(31&kt)+257,kt>>>=5,_t-=5,ht.ndist=(31&kt)+1,kt>>>=5,_t-=5,ht.ncode=(15&kt)+4,kt>>>=4,_t-=4,286<ht.nlen||30<ht.ndist){ut.msg='too many length or distance symbols',ht.mode=Qe;break}ht.have=0,ht.mode=Oe;case Oe:for(;ht.have<ht.ncode;){for(;3>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}ht.lens[Nt[ht.have++]]=7&kt,kt>>>=3,_t-=3}for(;19>ht.have;)ht.lens[Nt[ht.have++]]=0;if(ht.lencode=ht.lendyn,ht.lenbits=7,Xt={bits:ht.lenbits},zt=le(0,ht.lens,0,19,ht.lencode,0,ht.work,Xt),ht.lenbits=Xt.bits,zt){ut.msg='invalid code lengths set',ht.mode=Qe;break}ht.have=0,ht.mode=Le;case Le:for(;ht.have<ht.nlen+ht.ndist;){for(;;){if(Ct=ht.lencode[kt&(1<<ht.lenbits)-1],Et=Ct>>>24,It=255&Ct>>>16,At=65535&Ct,Et<=_t)break;if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}if(16>At)kt>>>=Et,_t-=Et,ht.lens[ht.have++]=At;else{if(16===At){for(Yt=Et+2;_t<Yt;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}if(kt>>>=Et,_t-=Et,0===ht.have){ut.msg='invalid bit length repeat',ht.mode=Qe;break}Tt=ht.lens[ht.have-1],vt=3+(3&kt),kt>>>=2,_t-=2}else if(17===At){for(Yt=Et+3;_t<Yt;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}kt>>>=Et,_t-=Et,Tt=0,vt=3+(7&kt),kt>>>=3,_t-=3}else{for(Yt=Et+7;_t<Yt;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}kt>>>=Et,_t-=Et,Tt=0,vt=11+(127&kt),kt>>>=7,_t-=7}if(ht.have+vt>ht.nlen+ht.ndist){ut.msg='invalid bit length repeat',ht.mode=Qe;break}for(;vt--;)ht.lens[ht.have++]=Tt}}if(ht.mode===Qe)break;if(0===ht.lens[256]){ut.msg='invalid code -- missing end-of-block',ht.mode=Qe;break}if(ht.lenbits=9,Xt={bits:ht.lenbits},zt=le(ue,ht.lens,0,ht.nlen,ht.lencode,0,ht.work,Xt),ht.lenbits=Xt.bits,zt){ut.msg='invalid literal/lengths set',ht.mode=Qe;break}if(ht.distbits=6,ht.distcode=ht.distdyn,Xt={bits:ht.distbits},zt=le(ce,ht.lens,ht.nlen,ht.ndist,ht.distcode,0,ht.work,Xt),ht.distbits=Xt.bits,zt){ut.msg='invalid distances set',ht.mode=Qe;break}if(ht.mode=Ue,ct===pe)break inf_leave;case Ue:ht.mode=Be;case Be:if(6<=bt&&258<=yt){ut.next_out=xt,ut.avail_out=yt,ut.next_in=mt,ut.avail_in=bt,ht.hold=kt,ht.bits=_t,oe(ut,jt),xt=ut.next_out,pt=ut.output,yt=ut.avail_out,mt=ut.next_in,gt=ut.input,bt=ut.avail_in,kt=ht.hold,_t=ht.bits,ht.mode===Te&&(ht.back=-1);break}for(ht.back=0;;){if(Ct=ht.lencode[kt&(1<<ht.lenbits)-1],Et=Ct>>>24,It=255&Ct>>>16,At=65535&Ct,Et<=_t)break;if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}if(It&&0==(240&It)){for(Rt=Et,Pt=It,Ft=At;;){if(Ct=ht.lencode[Ft+((kt&(1<<Rt+Pt)-1)>>Rt)],Et=Ct>>>24,It=255&Ct>>>16,At=65535&Ct,Rt+Et<=_t)break;if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}kt>>>=Rt,_t-=Rt,ht.back+=Rt}if(kt>>>=Et,_t-=Et,ht.back+=Et,ht.length=At,0===It){ht.mode=We;break}if(32&It){ht.back=-1,ht.mode=Te;break}if(64&It){ut.msg='invalid literal/length code',ht.mode=Qe;break}ht.extra=15&It,ht.mode=Ve;case Ve:if(ht.extra){for(Yt=ht.extra;_t<Yt;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}ht.length+=kt&(1<<ht.extra)-1,kt>>>=ht.extra,_t-=ht.extra,ht.back+=ht.extra}ht.was=ht.length,ht.mode=qe;case qe:for(;;){if(Ct=ht.distcode[kt&(1<<ht.distbits)-1],Et=Ct>>>24,It=255&Ct>>>16,At=65535&Ct,Et<=_t)break;if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}if(0==(240&It)){for(Rt=Et,Pt=It,Ft=At;;){if(Ct=ht.distcode[Ft+((kt&(1<<Rt+Pt)-1)>>Rt)],Et=Ct>>>24,It=255&Ct>>>16,At=65535&Ct,Rt+Et<=_t)break;if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}kt>>>=Rt,_t-=Rt,ht.back+=Rt}if(kt>>>=Et,_t-=Et,ht.back+=Et,64&It){ut.msg='invalid distance code',ht.mode=Qe;break}ht.offset=At,ht.extra=15&It,ht.mode=$e;case $e:if(ht.extra){for(Yt=ht.extra;_t<Yt;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}ht.offset+=kt&(1<<ht.extra)-1,kt>>>=ht.extra,_t-=ht.extra,ht.back+=ht.extra}if(ht.offset>ht.dmax){ut.msg='invalid distance too far back',ht.mode=Qe;break}ht.mode=Ze;case Ze:if(0===yt)break inf_leave;if(vt=jt-yt,ht.offset>vt){if(vt=ht.offset-vt,vt>ht.whave&&ht.sane){ut.msg='invalid distance too far back',ht.mode=Qe;break}vt>ht.wnext?(vt-=ht.wnext,St=ht.wsize-vt):St=ht.wnext-vt,vt>ht.length&&(vt=ht.length),Dt=ht.window}else Dt=pt,St=xt-ht.offset,vt=ht.length;vt>yt&&(vt=yt),yt-=vt,ht.length-=vt;do pt[xt++]=Dt[St++];while(--vt);0===ht.length&&(ht.mode=Be);break;case We:if(0===yt)break inf_leave;pt[xt++]=ht.length,yt--,ht.mode=Be;break;case He:if(ht.wrap){for(;32>_t;){if(0===bt)break inf_leave;bt--,kt|=gt[mt++]<<_t,_t+=8}if(jt-=yt,ut.total_out+=jt,ht.total+=jt,jt&&(ut.adler=ht.check=ht.flags?se(ht.check,pt,jt,xt-jt):ae(ht.check,pt,jt,xt-jt)),jt=yt,(ht.flags?kt:R(kt))!==ht.check){ut.msg='incorrect data check',ht.mode=Qe;break}kt=0,_t=0}ht.mode=Je;case Je:if(ht.wrap&&ht.flags){for(;32>_t;){if(0===bt)break inf_leave;bt--,kt+=gt[mt++]<<_t,_t+=8}if(kt!==(4294967295&ht.total)){ut.msg='incorrect length check',ht.mode=Qe;break}kt=0,_t=0}ht.mode=Ke;case Ke:zt=1;break inf_leave;case Qe:zt=ye;break inf_leave;case Ge:return ke;case 32:default:return be;}return(ut.next_out=xt,ut.avail_out=yt,ut.next_in=mt,ut.avail_in=bt,ht.hold=kt,ht.bits=_t,(ht.wsize||jt!==ut.avail_out&&ht.mode<Qe&&(ht.mode<He||ct!==he))&&K(ut,ut.output,ut.next_out,jt-ut.avail_out))?(ht.mode=Ge,ke):(wt-=ut.avail_in,jt-=ut.avail_out,ut.total_in+=wt,ut.total_out+=jt,ht.total+=jt,ht.wrap&&jt&&(ut.adler=ht.check=ht.flags?se(ht.check,pt,jt,ut.next_out-jt):ae(ht.check,pt,jt,ut.next_out-jt)),ut.data_type=ht.bits+(ht.last?64:0)+(ht.mode===Te?128:0)+(ht.mode===Ue||ht.mode===Xe?256:0),(0===wt&&0===jt||ct===he)&&zt===me&&(zt=-5),zt)},E.inflateEnd=function(ut){if(!ut||!ut.state)return be;var ct=ut.state;return ct.window&&(ct.window=null),ut.state=null,me},E.inflateGetHeader=function(ut,ct){var ht;return ut&&ut.state?(ht=ut.state,0==(2&ht.wrap))?be:(ht.head=ct,ct.done=!1,me):be},E.inflateSetDictionary=function(ut,ct){var ht=ct.length,gt,pt,mt;return ut&&ut.state?(gt=ut.state,0!==gt.wrap&&gt.mode!==Fe)?be:gt.mode===Fe&&(pt=1,pt=ae(pt,ct,ht,0),pt!==gt.check)?ye:(mt=K(ut,ct,ht,ht),mt)?(gt.mode=Ge,ke):(gt.havedict=1,me):be},E.inflateInfo='pako inflate (from Nodeca project)'},function(D,E,I){'use strict';var R=I(2),P=15,F=852,T=592,O=0,$=1,Z=2,W=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],K=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],G=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];D.exports=function(te,ne,ae,se,oe,le,de,ue){var ce=ue.bits,he=0,ge=0,pe=0,me=0,fe=0,xe=0,be=0,ye=0,ke=0,_e=0,Ce=null,Ee=0,Ae=new R.Buf16(P+1),Re=new R.Buf16(P+1),Pe=null,Fe=0,we,je,ve,Se,De,Ie,Te,ze,Me;for(he=0;he<=P;he++)Ae[he]=0;for(ge=0;ge<se;ge++)Ae[ne[ae+ge]]++;for(fe=ce,me=P;1<=me&&0===Ae[me];me--);if(fe>me&&(fe=me),0==me)return oe[le++]=20971520,oe[le++]=20971520,ue.bits=1,0;for(pe=1;pe<me&&0===Ae[pe];pe++);for(fe<pe&&(fe=pe),ye=1,he=1;he<=P;he++)if(ye<<=1,ye-=Ae[he],0>ye)return-1;if(0<ye&&(te===O||1!=me))return-1;for(Re[1]=0,he=1;he<P;he++)Re[he+1]=Re[he]+Ae[he];for(ge=0;ge<se;ge++)0!==ne[ae+ge]&&(de[Re[ne[ae+ge]]++]=ge);if(te===O?(Ce=Pe=de,Ie=19):te===$?(Ce=W,Ee-=257,Pe=K,Fe-=257,Ie=256):(Ce=Q,Pe=G,Ie=-1),_e=0,ge=0,he=pe,De=le,xe=fe,be=0,ve=-1,ke=1<<fe,Se=ke-1,te===$&&ke>F||te===Z&&ke>T)return 1;for(;;){Te=he-be,de[ge]<Ie?(ze=0,Me=de[ge]):de[ge]>Ie?(ze=Pe[Fe+de[ge]],Me=Ce[Ee+de[ge]]):(ze=96,Me=0),we=1<<he-be,je=1<<xe,pe=je;do je-=we,oe[De+(_e>>be)+je]=0|(Te<<24|ze<<16|Me);while(0!==je);for(we=1<<he-1;_e&we;)we>>=1;if(0===we?_e=0:(_e&=we-1,_e+=we),ge++,0==--Ae[he]){if(he==me)break;he=ne[ae+de[ge]]}if(he>fe&&(_e&Se)!==ve){for(0==be&&(be=fe),De+=pe,xe=he-be,ye=1<<xe;xe+be<me&&(ye-=Ae[xe+be],!(0>=ye));)xe++,ye<<=1;if(ke+=1<<xe,te===$&&ke>F||te===Z&&ke>T)return 1;ve=_e&Se,oe[ve]=0|(fe<<24|xe<<16|De-le)}}return 0!==_e&&(oe[De+_e]=0|(4194304|he-be<<24)),ue.bits=fe,0}},function(D,E,I){'use strict';function R(at){for(var st=at.length;0<=--st;)at[st]=0}function P(at,st,ot,lt,ut){this.static_tree=at,this.extra_bits=st,this.extra_base=ot,this.elems=lt,this.max_length=ut,this.has_stree=at&&at.length}function F(at,st){this.dyn_tree=at,this.max_code=0,this.stat_desc=st}function T(at){return 256>at?Je[at]:Je[256+(at>>>7)]}function O(at,st){at.pending_buf[at.pending++]=255&st,at.pending_buf[at.pending++]=255&st>>>8}function $(at,st,ot){at.bi_valid>Xe-ot?(at.bi_buf|=65535&st<<at.bi_valid,O(at,at.bi_buf),at.bi_buf=st>>Xe-at.bi_valid,at.bi_valid+=ot-Xe):(at.bi_buf|=65535&st<<at.bi_valid,at.bi_valid+=ot)}function Z(at,st,ot){$(at,ot[2*st],ot[2*st+1])}function W(at,st){var ot=0;do ot|=1&at,at>>>=1,ot<<=1;while(0<--st);return ot>>>1}function K(at){16===at.bi_valid?(O(at,at.bi_buf),at.bi_buf=0,at.bi_valid=0):8<=at.bi_valid&&(at.pending_buf[at.pending++]=255&at.bi_buf,at.bi_buf>>=8,at.bi_valid-=8)}function Q(at,st){var ot=st.dyn_tree,lt=st.max_code,ut=st.stat_desc.static_tree,ct=st.stat_desc.has_stree,ht=st.stat_desc.extra_bits,gt=st.stat_desc.extra_base,pt=st.stat_desc.max_length,mt,xt,bt,yt,kt,_t,wt=0;for(yt=0;yt<=Me;yt++)at.bl_count[yt]=0;for(ot[2*at.heap[at.heap_max]+1]=0,mt=at.heap_max+1;mt<ze;mt++)(xt=at.heap[mt],yt=ot[2*ot[2*xt+1]+1]+1,yt>pt&&(yt=pt,wt++),ot[2*xt+1]=yt,!(xt>lt))&&(at.bl_count[yt]++,kt=0,xt>=gt&&(kt=ht[xt-gt]),_t=ot[2*xt],at.opt_len+=_t*(yt+kt),ct&&(at.static_len+=_t*(ut[2*xt+1]+kt)));if(0!=wt){do{for(yt=pt-1;0===at.bl_count[yt];)yt--;at.bl_count[yt]--,at.bl_count[yt+1]+=2,at.bl_count[pt]--,wt-=2}while(0<wt);for(yt=pt;0!==yt;yt--)for(xt=at.bl_count[yt];0!==xt;)(bt=at.heap[--mt],!(bt>lt))&&(ot[2*bt+1]!==yt&&(at.opt_len+=(yt-ot[2*bt+1])*ot[2*bt],ot[2*bt+1]=yt),xt--)}}function G(at,st,ot){var lt=Array(Me+1),ut=0,ct,ht;for(ct=1;ct<=Me;ct++)lt[ct]=ut=ut+ot[ct-1]<<1;for(ht=0;ht<=st;ht++){var gt=at[2*ht+1];0!==gt&&(at[2*ht]=W(lt[gt]++,gt))}}function ee(){var at,st,ot,lt,ut,ct=Array(Me+1);for(ot=0,lt=0;lt<Ae-1;lt++)for(Qe[lt]=ot,at=0;at<1<<Be[lt];at++)Ke[ot++]=lt;for(Ke[ot-1]=lt,ut=0,lt=0;16>lt;lt++)for(Ge[lt]=ut,at=0;at<1<<Ve[lt];at++)Je[ut++]=lt;for(ut>>=7;lt<Fe;lt++)for(Ge[lt]=ut<<7,at=0;at<1<<Ve[lt]-7;at++)Je[256+ut++]=lt;for(st=0;st<=Me;st++)ct[st]=0;for(at=0;143>=at;)We[2*at+1]=8,at++,ct[8]++;for(;255>=at;)We[2*at+1]=9,at++,ct[9]++;for(;279>=at;)We[2*at+1]=7,at++,ct[7]++;for(;287>=at;)We[2*at+1]=8,at++,ct[8]++;for(G(We,Pe+1,ct),at=0;at<Fe;at++)He[2*at+1]=5,He[2*at]=W(at,5);et=new P(We,Be,Re+1,Pe,Me),tt=new P(He,Ve,0,Fe,Me),it=new P([],qe,0,Te,Ye)}function te(at){var st;for(st=0;st<Pe;st++)at.dyn_ltree[2*st]=0;for(st=0;st<Fe;st++)at.dyn_dtree[2*st]=0;for(st=0;st<Te;st++)at.bl_tree[2*st]=0;at.dyn_ltree[2*Ne]=1,at.opt_len=at.static_len=0,at.last_lit=at.matches=0}function ne(at){8<at.bi_valid?O(at,at.bi_buf):0<at.bi_valid&&(at.pending_buf[at.pending++]=at.bi_buf),at.bi_buf=0,at.bi_valid=0}function ae(at,st,ot,lt){ne(at),lt&&(O(at,ot),O(at,~ot)),ke.arraySet(at.pending_buf,at.window,st,ot,at.pending),at.pending+=ot}function se(at,st,ot,lt){var ut=2*st,ct=2*ot;return at[ut]<at[ct]||at[ut]===at[ct]&&lt[st]<=lt[ot]}function oe(at,st,ot){for(var lt=at.heap[ot],ut=ot<<1;ut<=at.heap_len&&(ut<at.heap_len&&se(st,at.heap[ut+1],at.heap[ut],at.depth)&&ut++,!se(st,lt,at.heap[ut],at.depth));)at.heap[ot]=at.heap[ut],ot=ut,ut<<=1;at.heap[ot]=lt}function le(at,st,ot){var lt,ut,ct=0,ht,gt;if(0!==at.last_lit)do lt=at.pending_buf[at.d_buf+2*ct]<<8|at.pending_buf[at.d_buf+2*ct+1],ut=at.pending_buf[at.l_buf+ct],ct++,0===lt?Z(at,ut,st):(ht=Ke[ut],Z(at,ht+Re+1,st),gt=Be[ht],0!==gt&&(ut-=Qe[ht],$(at,ut,gt)),lt--,ht=T(lt),Z(at,ht,ot),gt=Ve[ht],0!==gt&&(lt-=Ge[ht],$(at,lt,gt)));while(ct<at.last_lit);Z(at,Ne,st)}function de(at,st){var ot=st.dyn_tree,lt=st.stat_desc.static_tree,ut=st.stat_desc.has_stree,ct=st.stat_desc.elems,ht,gt,pt=-1,mt;for(at.heap_len=0,at.heap_max=ze,ht=0;ht<ct;ht++)0===ot[2*ht]?ot[2*ht+1]=0:(at.heap[++at.heap_len]=pt=ht,at.depth[ht]=0);for(;2>at.heap_len;)mt=at.heap[++at.heap_len]=2>pt?++pt:0,ot[2*mt]=1,at.depth[mt]=0,at.opt_len--,ut&&(at.static_len-=lt[2*mt+1]);for(st.max_code=pt,ht=at.heap_len>>1;1<=ht;ht--)oe(at,ot,ht);mt=ct;do ht=at.heap[1],at.heap[1]=at.heap[at.heap_len--],oe(at,ot,1),gt=at.heap[1],at.heap[--at.heap_max]=ht,at.heap[--at.heap_max]=gt,ot[2*mt]=ot[2*ht]+ot[2*gt],at.depth[mt]=(at.depth[ht]>=at.depth[gt]?at.depth[ht]:at.depth[gt])+1,ot[2*ht+1]=ot[2*gt+1]=mt,at.heap[1]=mt++,oe(at,ot,1);while(2<=at.heap_len);at.heap[--at.heap_max]=at.heap[1],Q(at,st),G(ot,pt,at.bl_count)}function ue(at,st,ot){var lt,ut=-1,ct,ht=st[1],gt=0,pt=7,mt=4;for(0===ht&&(pt=138,mt=3),st[2*(ot+1)+1]=65535,lt=0;lt<=ot;lt++){if(ct=ht,ht=st[2*(lt+1)+1],++gt<pt&&ct===ht)continue;else gt<mt?at.bl_tree[2*ct]+=gt:0===ct?10>=gt?at.bl_tree[2*Le]++:at.bl_tree[2*Ue]++:(ct!==ut&&at.bl_tree[2*ct]++,at.bl_tree[2*Oe]++);gt=0,ut=ct,0===ht?(pt=138,mt=3):ct===ht?(pt=6,mt=3):(pt=7,mt=4)}}function ce(at,st,ot){var lt,ut=-1,ct,ht=st[1],gt=0,pt=7,mt=4;for(0===ht&&(pt=138,mt=3),lt=0;lt<=ot;lt++){if(ct=ht,ht=st[2*(lt+1)+1],++gt<pt&&ct===ht)continue;else if(gt<mt)do Z(at,ct,at.bl_tree);while(0!=--gt);else 0===ct?10>=gt?(Z(at,Le,at.bl_tree),$(at,gt-3,3)):(Z(at,Ue,at.bl_tree),$(at,gt-11,7)):(ct!==ut&&(Z(at,ct,at.bl_tree),gt--),Z(at,Oe,at.bl_tree),$(at,gt-3,2));gt=0,ut=ct,0===ht?(pt=138,mt=3):ct===ht?(pt=6,mt=3):(pt=7,mt=4)}}function he(at){var st;for(ue(at,at.dyn_ltree,at.l_desc.max_code),ue(at,at.dyn_dtree,at.d_desc.max_code),de(at,at.bl_desc),st=Te-1;3<=st&&0===at.bl_tree[2*$e[st]+1];st--);return at.opt_len+=3*(st+1)+5+5+4,st}function ge(at,st,ot,lt){var ut;for($(at,st-257,5),$(at,ot-1,5),$(at,lt-4,4),ut=0;ut<lt;ut++)$(at,at.bl_tree[2*$e[ut]+1],3);ce(at,at.dyn_ltree,st-1),ce(at,at.dyn_dtree,ot-1)}function pe(at){var st=4093624447,ot;for(ot=0;31>=ot;ot++,st>>>=1)if(1&st&&0!==at.dyn_ltree[2*ot])return we;if(0!==at.dyn_ltree[18]||0!==at.dyn_ltree[20]||0!==at.dyn_ltree[26])return je;for(ot=32;ot<Re;ot++)if(0!==at.dyn_ltree[2*ot])return je;return we}function fe(at,st,ot,lt){$(at,(Se<<1)+(lt?1:0),3),ae(at,st,ot,!0)}var ke=I(2),we=0,je=1,Se=0,De=1,Ae=29,Re=256,Pe=Re+1+Ae,Fe=30,Te=19,ze=2*Pe+1,Me=15,Xe=16,Ye=7,Ne=256,Oe=16,Le=17,Ue=18,Be=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ve=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],We=Array(2*(Pe+2));R(We);var He=Array(2*Fe);R(He);var Je=Array(512);R(Je);var Ke=Array(258-3+1);R(Ke);var Qe=Array(Ae);R(Qe);var Ge=Array(Fe);R(Ge);var et,tt,it,nt=!1;E._tr_init=function(at){nt||(ee(),nt=!0),at.l_desc=new F(at.dyn_ltree,et),at.d_desc=new F(at.dyn_dtree,tt),at.bl_desc=new F(at.bl_tree,it),at.bi_buf=0,at.bi_valid=0,te(at)},E._tr_stored_block=fe,E._tr_flush_block=function(at,st,ot,lt){var ut,ct,ht=0;0<at.level?(at.strm.data_type===2&&(at.strm.data_type=pe(at)),de(at,at.l_desc),de(at,at.d_desc),ht=he(at),ut=at.opt_len+3+7>>>3,ct=at.static_len+3+7>>>3,ct<=ut&&(ut=ct)):ut=ct=ot+5,ot+4<=ut&&-1!==st?fe(at,st,ot,lt):at.strategy===4||ct===ut?($(at,(De<<1)+(lt?1:0),3),le(at,We,He)):($(at,(2<<1)+(lt?1:0),3),ge(at,at.l_desc.max_code+1,at.d_desc.max_code+1,ht+1),le(at,at.dyn_ltree,at.dyn_dtree)),te(at),lt&&ne(at)},E._tr_tally=function(at,st,ot){return at.pending_buf[at.d_buf+2*at.last_lit]=255&st>>>8,at.pending_buf[at.d_buf+2*at.last_lit+1]=255&st,at.pending_buf[at.l_buf+at.last_lit]=255&ot,at.last_lit++,0===st?at.dyn_ltree[2*ot]++:(at.matches++,st--,at.dyn_ltree[2*(Ke[ot]+Re+1)]++,at.dyn_dtree[2*T(st)]++),at.last_lit===at.lit_bufsize-1},E._tr_align=function(at){$(at,De<<1,3),Z(at,Ne,We),K(at)}},function(D){function I(){throw new Error('setTimeout has not been defined')}function R(){throw new Error('clearTimeout has not been defined')}function P(ae){if(K===setTimeout)return setTimeout(ae,0);if((K===I||!K)&&setTimeout)return K=setTimeout,setTimeout(ae,0);try{return K(ae,0)}catch(se){try{return K.call(null,ae,0)}catch(oe){return K.call(this,ae,0)}}}function F(ae){if(Q===clearTimeout)return clearTimeout(ae);if((Q===R||!Q)&&clearTimeout)return Q=clearTimeout,clearTimeout(ae);try{return Q(ae)}catch(se){try{return Q.call(null,ae)}catch(oe){return Q.call(this,ae)}}}function T(){ee&&te&&(ee=!1,te.length?G=te.concat(G):ne=-1,G.length&&O())}function O(){if(!ee){var ae=P(T);ee=!0;for(var se=G.length;se;){for(te=G,G=[];++ne<se;)te&&te[ne].run();ne=-1,se=G.length}te=null,ee=!1,F(ae)}}function $(ae,se){this.fun=ae,this.array=se}function Z(){}var W=D.exports={},K,Q;(function(){try{K='function'==typeof setTimeout?setTimeout:I}catch(ae){K=I}try{Q='function'==typeof clearTimeout?clearTimeout:R}catch(ae){Q=R}})();var G=[],ee=!1,te,ne=-1;W.nextTick=function(ae){var se=Array(arguments.length-1);if(1<arguments.length)for(var oe=1;oe<arguments.length;oe++)se[oe-1]=arguments[oe];G.push(new $(ae,se)),1!==G.length||ee||P(O)},$.prototype.run=function(){this.fun.apply(null,this.array)},W.title='browser',W.browser=!0,W.env={},W.argv=[],W.version='',W.versions={},W.on=Z,W.addListener=Z,W.once=Z,W.off=Z,W.removeListener=Z,W.removeAllListeners=Z,W.emit=Z,W.prependListener=Z,W.prependOnceListener=Z,W.listeners=function(){return[]},W.binding=function(){throw new Error('process.binding is not supported')},W.cwd=function(){return'/'},W.chdir=function(){throw new Error('process.chdir is not supported')},W.umask=function(){return 0}},function(D){D.exports='function'==typeof Object.create?function(R,P){R.super_=P,R.prototype=Object.create(P.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}})}:function(R,P){R.super_=P;var F=function(){};F.prototype=P.prototype,R.prototype=new F,R.prototype.constructor=R}},function(D){D.exports=function(R){return R&&'object'==typeof R&&'function'==typeof R.copy&&'function'==typeof R.fill&&'function'==typeof R.readUInt8}},function(D,E,I){(function(R,P){function F(Se,De){var Ce={seen:[],stylize:O};return 3<=arguments.length&&(Ce.depth=arguments[2]),4<=arguments.length&&(Ce.colors=arguments[3]),ne(De)?Ce.showHidden=De:De&&E._extend(Ce,De),ue(Ce.showHidden)&&(Ce.showHidden=!1),ue(Ce.depth)&&(Ce.depth=2),ue(Ce.colors)&&(Ce.colors=!1),ue(Ce.customInspect)&&(Ce.customInspect=!0),Ce.colors&&(Ce.stylize=T),Z(Ce,Se,Ce.depth)}function T(Se,De){var Ce=F.styles[De];return Ce?'\x1B['+F.colors[Ce][0]+'m'+Se+'\x1B['+F.colors[Ce][1]+'m':Se}function O(Se){return Se}function $(Se){var De={};return Se.forEach(function(Ce){De[Ce]=!0}),De}function Z(Se,De,Ce){if(Se.customInspect&&De&&me(De.inspect)&&De.inspect!==E.inspect&&!(De.constructor&&De.constructor.prototype===De)){var Ee=De.inspect(Ce,Se);return le(Ee)||(Ee=Z(Se,Ee,Ce)),Ee}var Ie=W(Se,De);if(Ie)return Ie;var Ae=Object.keys(De),Re=$(Ae);if(Se.showHidden&&(Ae=Object.getOwnPropertyNames(De)),pe(De)&&(0<=Ae.indexOf('message')||0<=Ae.indexOf('description')))return K(De);if(0===Ae.length){if(me(De)){var Pe=De.name?': '+De.name:'';return Se.stylize('[Function'+Pe+']','special')}if(ce(De))return Se.stylize(RegExp.prototype.toString.call(De),'regexp');if(ge(De))return Se.stylize(Date.prototype.toString.call(De),'date');if(pe(De))return K(De)}var Fe='',Te=!1,ze=['{','}'];if(te(De)&&(Te=!0,ze=['[',']']),me(De)){var Me=De.name?': '+De.name:'';Fe=' [Function'+Me+']'}if(ce(De)&&(Fe=' '+RegExp.prototype.toString.call(De)),ge(De)&&(Fe=' '+Date.prototype.toUTCString.call(De)),pe(De)&&(Fe=' '+K(De)),0===Ae.length&&(!Te||0==De.length))return ze[0]+Fe+ze[1];if(0>Ce)return ce(De)?Se.stylize(RegExp.prototype.toString.call(De),'regexp'):Se.stylize('[Object]','special');Se.seen.push(De);var Xe;return Xe=Te?Q(Se,De,Ce,Re,Ae):Ae.map(function(Ye){return G(Se,De,Ce,Re,Ye,Te)}),Se.seen.pop(),ee(Xe,Fe,ze)}function W(Se,De){if(ue(De))return Se.stylize('undefined','undefined');if(le(De)){var Ce='\''+JSON.stringify(De).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return Se.stylize(Ce,'string')}return oe(De)?Se.stylize(''+De,'number'):ne(De)?Se.stylize(''+De,'boolean'):ae(De)?Se.stylize('null','null'):void 0}function K(Se){return'['+Error.prototype.toString.call(Se)+']'}function Q(Se,De,Ce,Ee,Ie){for(var Ae=[],Re=0,Pe=De.length;Re<Pe;++Re)ke(De,Re+'')?Ae.push(G(Se,De,Ce,Ee,Re+'',!0)):Ae.push('');return Ie.forEach(function(Fe){Fe.match(/^\d+$/)||Ae.push(G(Se,De,Ce,Ee,Fe,!0))}),Ae}function G(Se,De,Ce,Ee,Ie,Ae){var Re,Pe,Fe;if(Fe=Object.getOwnPropertyDescriptor(De,Ie)||{value:De[Ie]},Fe.get?Fe.set?Pe=Se.stylize('[Getter/Setter]','special'):Pe=Se.stylize('[Getter]','special'):Fe.set&&(Pe=Se.stylize('[Setter]','special')),ke(Ee,Ie)||(Re='['+Ie+']'),Pe||(0>Se.seen.indexOf(Fe.value)?(Pe=ae(Ce)?Z(Se,Fe.value,null):Z(Se,Fe.value,Ce-1),-1<Pe.indexOf('\n')&&(Ae?Pe=Pe.split('\n').map(function(Te){return'  '+Te}).join('\n').substr(2):Pe='\n'+Pe.split('\n').map(function(Te){return'   '+Te}).join('\n'))):Pe=Se.stylize('[Circular]','special')),ue(Re)){if(Ae&&Ie.match(/^\d+$/))return Pe;Re=JSON.stringify(''+Ie),Re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Re=Re.substr(1,Re.length-2),Re=Se.stylize(Re,'name')):(Re=Re.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),Re=Se.stylize(Re,'string'))}return Re+': '+Pe}function ee(Se,De,Ce){var Ee=0,Ie=Se.reduce(function(Ae,Re){return Ee++,0<=Re.indexOf('\n')&&Ee++,Ae+Re.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<Ie?Ce[0]+(''===De?'':De+'\n ')+' '+Se.join(',\n  ')+' '+Ce[1]:Ce[0]+De+' '+Se.join(', ')+' '+Ce[1]}function te(Se){return Array.isArray(Se)}function ne(Se){return'boolean'==typeof Se}function ae(Se){return null===Se}function oe(Se){return'number'==typeof Se}function le(Se){return'string'==typeof Se}function ue(Se){return void 0===Se}function ce(Se){return he(Se)&&'[object RegExp]'===xe(Se)}function he(Se){return'object'==typeof Se&&null!==Se}function ge(Se){return he(Se)&&'[object Date]'===xe(Se)}function pe(Se){return he(Se)&&('[object Error]'===xe(Se)||Se instanceof Error)}function me(Se){return'function'==typeof Se}function xe(Se){return Object.prototype.toString.call(Se)}function be(Se){return 10>Se?'0'+Se.toString(10):Se.toString(10)}function ye(){var Se=new Date,De=[be(Se.getHours()),be(Se.getMinutes()),be(Se.getSeconds())].join(':');return[Se.getDate(),ve[Se.getMonth()],De].join(' ')}function ke(Se,De){return Object.prototype.hasOwnProperty.call(Se,De)}var _e=/%[sdj%]/g;E.format=function(Se){if(!le(Se)){for(var De=[],Ce=0;Ce<arguments.length;Ce++)De.push(F(arguments[Ce]));return De.join(' ')}for(var Ce=1,Ee=arguments,Ie=Ee.length,Ae=(Se+'').replace(_e,function(Pe){if('%%'===Pe)return'%';if(Ce>=Ie)return Pe;switch(Pe){case'%s':return Ee[Ce++]+'';case'%d':return+Ee[Ce++];case'%j':try{return JSON.stringify(Ee[Ce++])}catch(Fe){return'[Circular]'}default:return Pe;}}),Re=Ee[Ce];Ce<Ie;Re=Ee[++Ce])Ae+=ae(Re)||!he(Re)?' '+Re:' '+F(Re);return Ae},E.deprecate=function(Se,De){if(ue(R.process))return function(){return E.deprecate(Se,De).apply(this,arguments)};if(!0===P.noDeprecation)return Se;var Ee=!1;return function(){if(!Ee){if(P.throwDeprecation)throw new Error(De);else P.traceDeprecation?console.trace(De):console.error(De);Ee=!0}return Se.apply(this,arguments)}};var we={},je;E.debuglog=function(Se){if(ue(je)&&(je=P.env.NODE_DEBUG||''),Se=Se.toUpperCase(),!we[Se])if(new RegExp('\\b'+Se+'\\b','i').test(je)){var De=P.pid;we[Se]=function(){var Ce=E.format.apply(E,arguments);console.error('%s %d: %s',Se,De,Ce)}}else we[Se]=function(){};return we[Se]},E.inspect=F,F.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},F.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey','null':'bold',string:'green',date:'magenta',regexp:'red'},E.isArray=te,E.isBoolean=ne,E.isNull=ae,E.isNullOrUndefined=function(Se){return null==Se},E.isNumber=oe,E.isString=le,E.isSymbol=function(Se){return'symbol'==typeof Se},E.isUndefined=ue,E.isRegExp=ce,E.isObject=he,E.isDate=ge,E.isError=pe,E.isFunction=me,E.isPrimitive=function(Se){return null===Se||'boolean'==typeof Se||'number'==typeof Se||'string'==typeof Se||'symbol'==typeof Se||'undefined'==typeof Se},E.isBuffer=I(154);var ve=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];E.log=function(){console.log('%s - %s',ye(),E.format.apply(E,arguments))},E.inherits=I(153),E._extend=function(Se,De){if(!De||!he(De))return Se;for(var Ce=Object.keys(De),Ee=Ce.length;Ee--;)Se[Ce[Ee]]=De[Ce[Ee]];return Se}}).call(E,I(58),I(152))},function(D){D.exports={name:'spectra-data',version:'3.0.5',description:'spectra-data project - manipulate spectra',keywords:['spectra-data','project'],author:'Andres Castillo',contributors:['Micha\xEBl Zasso','Luc Patiny'],repository:'cheminfo-js/spectra-data',bugs:{url:'https://github.com/cheminfo-js/spectra-data/issues'},homepage:'https://github.com/cheminfo-js/spectra-data',license:'MIT',main:'./src/index.js',scripts:{eslint:'eslint src test --cache','eslint-fix':'npm run eslint -- --fix',test:'npm run test-mocha && npm run eslint','test-mocha':'mocha --require should --reporter mocha-better-spec-reporter --recursive src/**/__tests__/**/*.js',build:'cheminfo build'},devDependencies:{'cheminfo-tools':'^1.13.0',eslint:'^3.9.1','eslint-config-cheminfo':'^1.5.2','eslint-plugin-no-only-tests':'^1.1.0',mocha:'^3.1.2','mocha-better-spec-reporter':'^3.0.1','nmr-predictor':'https://github.com/cheminfo-js/nmr-predictor/',should:'^11.1.1'},dependencies:{brukerconverter:'^1.0.1',jcampconverter:'^2.4.5','ml-array-utils':'^0.3.0','ml-curve-fitting':'0.0.7','ml-fft':'^1.3.5','ml-gsd':'^2.0.1','ml-matrix-peaks-finder':'^0.2.1','ml-simple-clustering':'0.1.0','ml-stat':'^1.3.0','nmr-simulation':'^1.0.0'}}}])});
//# sourceMappingURL=spectra-data.min.js.map