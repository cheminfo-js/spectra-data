(function(S,E){'object'==typeof exports&&'object'==typeof module?module.exports=E():'function'==typeof define&&define.amd?define([],E):'object'==typeof exports?exports.spectraData=E():S.spectraData=E()})(this,function(){return function(_){function S(D){if(E[D])return E[D].exports;var C=E[D]={i:D,l:!1,exports:{}};return _[D].call(C.exports,C,C.exports,S),C.l=!0,C.exports}var E={};return S.m=_,S.c=E,S.i=function(D){return D},S.d=function(D,C,R){S.o(D,C)||Object.defineProperty(D,C,{configurable:!1,enumerable:!0,get:R})},S.n=function(D){var C=D&&D.__esModule?function(){return D['default']}:function(){return D};return S.d(C,'a',C),C},S.o=function(D,C){return Object.prototype.hasOwnProperty.call(D,C)},S.p='',S(S.s=111)}([function(_,S,E){'use strict';function D(M){return M}function C(M,$){for(var Z=0;Z<M.length;++Z)$[Z]=255&M.charCodeAt(Z);return $}function R(M){var $=65536,Z=[],W=M.length,K=S.getTypeOf(M),Q=0,G=!0;try{'uint8array'===K?String.fromCharCode.apply(null,new Uint8Array(0)):'nodebuffer'===K?String.fromCharCode.apply(null,F(0)):void 0}catch(ne){G=!1}if(!G){for(var ee='',te=0;te<M.length;te++)ee+=String.fromCharCode(M[te]);return ee}for(;Q<W&&1<$;)try{'array'===K||'nodebuffer'===K?Z.push(String.fromCharCode.apply(null,M.slice(Q,Math.min(Q+$,W)))):Z.push(String.fromCharCode.apply(null,M.subarray(Q,Math.min(Q+$,W)))),Q+=$}catch(ne){$=Math.floor($/2)}return Z.join('')}function I(M,$){for(var Z=0;Z<M.length;Z++)$[Z]=M[Z];return $}var T=E(3),P=E(8),F=E(9);S.string2binary=function(M){for(var $='',Z=0;Z<M.length;Z++)$+=String.fromCharCode(255&M.charCodeAt(Z));return $},S.arrayBuffer2Blob=function(M,$){S.checkSupport('blob'),$=$||'application/zip';try{return new Blob([M],{type:$})}catch(K){try{var Z=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,W=new Z;return W.append(M),W.getBlob($)}catch(Q){throw new Error('Bug : can\'t construct the Blob.')}}},S.applyFromCharCode=R;var O={};O.string={string:D,array:function(M){return C(M,Array(M.length))},arraybuffer:function(M){return O.string.uint8array(M).buffer},uint8array:function(M){return C(M,new Uint8Array(M.length))},nodebuffer:function(M){return C(M,F(M.length))}},O.array={string:R,array:D,arraybuffer:function(M){return new Uint8Array(M).buffer},uint8array:function(M){return new Uint8Array(M)},nodebuffer:function(M){return F(M)}},O.arraybuffer={string:function(M){return R(new Uint8Array(M))},array:function(M){return I(new Uint8Array(M),Array(M.byteLength))},arraybuffer:D,uint8array:function(M){return new Uint8Array(M)},nodebuffer:function(M){return F(new Uint8Array(M))}},O.uint8array={string:R,array:function(M){return I(M,Array(M.length))},arraybuffer:function(M){return M.buffer},uint8array:D,nodebuffer:function(M){return F(M)}},O.nodebuffer={string:R,array:function(M){return I(M,Array(M.length))},arraybuffer:function(M){return O.nodebuffer.uint8array(M).buffer},uint8array:function(M){return I(M,new Uint8Array(M.length))},nodebuffer:D},S.transformTo=function(M,$){if($||($=''),!M)return $;S.checkSupport(M);var Z=S.getTypeOf($),W=O[Z][M]($);return W},S.getTypeOf=function(M){return'string'==typeof M?'string':'[object Array]'===Object.prototype.toString.call(M)?'array':T.nodebuffer&&F.test(M)?'nodebuffer':T.uint8array&&M instanceof Uint8Array?'uint8array':T.arraybuffer&&M instanceof ArrayBuffer?'arraybuffer':void 0},S.checkSupport=function(M){var $=T[M.toLowerCase()];if(!$)throw new Error(M+' is not supported by this browser')},S.MAX_VALUE_16BITS=65535,S.MAX_VALUE_32BITS=-1,S.pretty=function(M){var $='',Z,W;for(W=0;W<(M||'').length;W++)Z=M.charCodeAt(W),$+='\\x'+(16>Z?'0':'')+Z.toString(16).toUpperCase();return $},S.findCompression=function(M){for(var $ in P)if(P.hasOwnProperty($)&&P[$].magic===M)return P[$];return null},S.isRegExp=function(M){return'[object RegExp]'===Object.prototype.toString.call(M)},S.extend=function(){var M={},$,Z;for($=0;$<arguments.length;$++)for(Z in arguments[$])arguments[$].hasOwnProperty(Z)&&'undefined'==typeof M[Z]&&(M[Z]=arguments[$][Z]);return M}},function(_,S){'use strict';var D='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Int32Array;S.assign=function(I){for(var T=Array.prototype.slice.call(arguments,1),P;T.length;)if(P=T.shift(),!!P){if('object'!=typeof P)throw new TypeError(P+'must be non-object');for(var F in P)P.hasOwnProperty(F)&&(I[F]=P[F])}return I},S.shrinkBuf=function(I,T){return I.length===T?I:I.subarray?I.subarray(0,T):(I.length=T,I)};var C={arraySet:function(I,T,P,F,O){if(T.subarray&&I.subarray)return void I.set(T.subarray(P,P+F),O);for(var M=0;M<F;M++)I[O+M]=T[P+M]},flattenChunks:function(I){var T,P,F,O,M,$;for(F=0,T=0,P=I.length;T<P;T++)F+=I[T].length;for($=new Uint8Array(F),O=0,(T=0,P=I.length);T<P;T++)M=I[T],$.set(M,O),O+=M.length;return $}},R={arraySet:function(I,T,P,F,O){for(var M=0;M<F;M++)I[O+M]=T[P+M]},flattenChunks:function(I){return[].concat.apply([],I)}};S.setTyped=function(I){I?(S.Buf8=Uint8Array,S.Buf16=Uint16Array,S.Buf32=Int32Array,S.assign(S,C)):(S.Buf8=Array,S.Buf16=Array,S.Buf32=Array,S.assign(S,R))},S.setTyped(D)},function(_){'use strict';function D(T){for(var P=0,F=T.length,O=Array(F);P<F;P++)O[P]=T[P];return O}function C(T,P){var F=0,$,Z;if(Array.isArray(T)){if(Z=P,$=Z?D(T):T,T=$.length,P=$[0].length,'undefined'==typeof P)throw new TypeError('Data must be a 2D array');if(0<T&&0<P){for(;F<T;F++)if($[F].length!==P)throw new RangeError('Inconsistent array dimensions');else Z&&($[F]=D($[F]));}else throw new RangeError('Invalid dimensions: '+T+'x'+P)}else if('number'!=typeof T)throw new TypeError('Invalid arguments');else if(0<T&&0<P)for($=Array(T);F<T;F++)$[F]=Array(P);else throw new RangeError('Invalid dimensions: '+T+'x'+P);return Object.defineProperty($,'rows',{writable:!0,value:T}),Object.defineProperty($,'columns',{writable:!0,value:P}),$.__proto__=C.prototype,$}var R=Array.prototype.splice,I=Array.prototype.concat;C.from1DArray=function(P,F,O){var Z=0,M,$;if(M=P*F,M!==O.length)throw new RangeError('Data length does not match given dimensions');for($=Array(P);Z<P;Z++)$[Z]=O.slice(Z*F,(Z+1)*F);return new C($)},C.rowVector=function(P){return new C([P])},C.columnVector=function(P){for(var F=P.length,O=Array(F),M=0;M<F;M++)O[M]=[P[M]];return new C(O)},C.empty=function(P,F){return new C(P,F)},C.zeros=function(P,F){return C.empty(P,F).fill(0)},C.ones=function(P,F){return C.empty(P,F).fill(1)},C.rand=function(P,F){for(var O=C.empty(P,F),M=0,$=O.rows;M<$;M++)for(var Z=0,W=O.columns;Z<W;Z++)O[M][Z]=Math.random();return O},C.eye=function(P){for(var F=C.zeros(P,P),O=F.rows,M=0;M<O;M++)F[M][M]=1;return F},C.diag=function(P){for(var F=P.length,O=C.zeros(F,F),M=0;M<F;M++)O[M][M]=P[M];return O},C.indices=function(P,F){for(var O=Array(F-P),M=0;M<O.length;M++)O[M]=P++;return O},C.stack=function(P){var F,O,M;if(C.isMatrix(P)){var $=0,Z=0;for(F=0;F<arguments.length;F++)$+=arguments[F].rows,arguments[F].columns>Z&&(Z=arguments[F].columns);var W=C.zeros($,Z),K=0;for(F=0;F<arguments.length;F++){var Q=arguments[F];for(O=0;O<Q.rows;O++){for(M=0;M<Q.columns;M++)W[K][M]=Q[O][M];K++}}return W}if(Array.isArray(P)){var G=C.empty(arguments.length,P.length);for(F=0;F<arguments.length;F++)G.setRow(F,arguments[F]);return G}},C.expand=function(P,F){for(var O=[],M=0;M<F.length;M++)for(var $=0;$<F[M];$++)O.push(P[M]);return new C(O)},C.checkMatrix=function(P){if(!P)throw new TypeError('Argument has to be a matrix');return'Matrix'!==P.klass&&(P=new C(P)),P},C.isMatrix=function(P){return!!P&&'Matrix'===P.klass},Object.defineProperty(C.prototype,'klass',{get:function(){return'Matrix'}}),Object.defineProperty(C.prototype,'size',{get:function(){return this.rows*this.columns}}),C.prototype.checkRowIndex=function(P){if(0>P||P>this.rows-1)throw new RangeError('Row index out of range.')},C.prototype.checkColumnIndex=function(P){if(0>P||P>this.columns-1)throw new RangeError('Column index out of range.')},C.prototype.checkDimensions=function(P){if(this.rows!==P.rows||this.columns!==P.columns)throw new RangeError('Matrices dimensions must be equal.')},C.prototype.apply=function(P){for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)P.call(this,M,$);return this},C.prototype.clone=function(){return new C(this.to2DArray())},C.prototype.to1DArray=function(){return I.apply([],this)},C.prototype.to2DArray=function(){for(var P=this.rows,F=Array(P),O=0;O<P;O++)F[O]=D(this[O]);return F},C.prototype.isRowVector=function(){return 1===this.rows},C.prototype.isColumnVector=function(){return 1===this.columns},C.prototype.isVector=function(){return 1===this.rows||1===this.columns},C.prototype.isSquare=function(){return this.rows===this.columns},C.prototype.isSymmetric=function(){if(this.isSquare()){for(var P=this.rows,F=0;F<P;F++)for(var O=0;O<=F;O++)if(this[F][O]!==this[O][F])return!1;return!0}return!1},C.prototype.set=function(P,F,O){return this[P][F]=O,this},C.prototype.get=function(P,F){return this[P][F]},C.prototype.fill=function(P){for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]=P;return this},C.prototype.neg=function(){return this.mulS(-1)},C.prototype.add=function(P){return'number'==typeof P?this.addS(P):(P=C.checkMatrix(P),this.addM(P))},C.prototype.addS=function(P){for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]+=P;return this},C.prototype.addM=function(P){this.checkDimensions(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]+=P[M][$];return this},C.prototype.sub=function(P){return'number'==typeof P?this.subS(P):(P=C.checkMatrix(P),this.subM(P))},C.prototype.subS=function(P){for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]-=P;return this},C.prototype.subM=function(P){this.checkDimensions(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]-=P[M][$];return this},C.prototype.mul=function(P){return'number'==typeof P?this.mulS(P):(P=C.checkMatrix(P),this.mulM(P))},C.prototype.mulS=function(P){for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]*=P;return this},C.prototype.mulM=function(P){this.checkDimensions(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]*=P[M][$];return this},C.prototype.div=function(P){return'number'==typeof P?this.divS(P):(P=C.checkMatrix(P),this.divM(P))},C.prototype.divS=function(P){for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]/=P;return this},C.prototype.divM=function(P){this.checkDimensions(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]/=P[M][$];return this},C.prototype.getRow=function(P){return this.checkRowIndex(P),D(this[P])},C.prototype.getRowVector=function(P){return C.rowVector(this.getRow(P))},C.prototype.setRow=function(P,F){if(this.checkRowIndex(P),C.isMatrix(F)&&(F=F.to1DArray()),F.length!==this.columns)throw new RangeError('Invalid row size');return this[P]=D(F),this},C.prototype.removeRow=function(P){if(this.checkRowIndex(P),1===this.rows)throw new RangeError('A matrix cannot have less than one row');return R.call(this,P,1),this.rows-=1,this},C.prototype.addRow=function(P,F){if('undefined'==typeof F&&(F=P,P=this.rows),0>P||P>this.rows)throw new RangeError('Row index out of range.');if(C.isMatrix(F)&&(F=F.to1DArray()),F.length!==this.columns)throw new RangeError('Invalid row size');return R.call(this,P,0,D(F)),this.rows+=1,this},C.prototype.swapRows=function(P,F){this.checkRowIndex(P),this.checkRowIndex(F);var O=this[P];return this[P]=this[F],this[F]=O,this},C.prototype.getColumn=function(P){this.checkColumnIndex(P);for(var F=this.rows,O=Array(F),M=0;M<F;M++)O[M]=this[M][P];return O},C.prototype.getColumnVector=function(P){return C.columnVector(this.getColumn(P))},C.prototype.setColumn=function(P,F){this.checkColumnIndex(P),C.isMatrix(F)&&(F=F.to1DArray());var O=this.rows;if(F.length!==O)throw new RangeError('Invalid column size');for(var M=0;M<O;M++)this[M][P]=F[M];return this},C.prototype.removeColumn=function(P){if(this.checkColumnIndex(P),1===this.columns)throw new RangeError('A matrix cannot have less than one column');for(var F=0,O=this.rows;F<O;F++)this[F].splice(P,1);return this.columns-=1,this},C.prototype.addColumn=function(P,F){if('undefined'==typeof F&&(F=P,P=this.columns),0>P||P>this.columns)throw new RangeError('Column index out of range.');C.isMatrix(F)&&(F=F.to1DArray());var O=this.rows;if(F.length!==O)throw new RangeError('Invalid column size');for(var M=0;M<O;M++)this[M].splice(P,0,F[M]);return this.columns+=1,this},C.prototype.swapColumns=function(P,F){this.checkRowIndex(P),this.checkRowIndex(F);for(var O=this.rows,Z=0,M,$;Z<O;Z++)$=this[Z],M=$[P],$[P]=$[F],$[F]=M;return this},C.prototype.checkRowVector=function(P){if(C.isMatrix(P)&&(P=P.to1DArray()),P.length!==this.columns)throw new RangeError('vector size must be the same as the number of columns');return P},C.prototype.checkColumnVector=function(P){if(C.isMatrix(P)&&(P=P.to1DArray()),P.length!==this.rows)throw new RangeError('vector size must be the same as the number of rows');return P},C.prototype.addRowVector=function(P){P=this.checkRowVector(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]+=P[$];return this},C.prototype.subRowVector=function(P){P=this.checkRowVector(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]-=P[$];return this},C.prototype.mulRowVector=function(P){P=this.checkRowVector(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]*=P[$];return this},C.prototype.divRowVector=function(P){P=this.checkRowVector(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]/=P[$];return this},C.prototype.addColumnVector=function(P){P=this.checkColumnVector(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]+=P[M];return this},C.prototype.subColumnVector=function(P){P=this.checkColumnVector(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]-=P[M];return this},C.prototype.mulColumnVector=function(P){P=this.checkColumnVector(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]*=P[M];return this},C.prototype.divColumnVector=function(P){P=this.checkColumnVector(P);for(var F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]/=P[M];return this},C.prototype.mulRow=function(P,F){this.checkRowIndex(P);for(var O=0,M=this.columns;O<M;O++)this[P][O]*=F;return this},C.prototype.mulColumn=function(P,F){this.checkColumnIndex(P);for(var O=0,M=this.rows;O<M;O++)this[O][P]*=F},C.prototype.max=function(){for(var P=-Infinity,F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]>P&&(P=this[M][$]);return P},C.prototype.maxIndex=function(){for(var P=-Infinity,F={},O=this.rows,M=this.columns,$=0;$<O;$++)for(var Z=0;Z<M;Z++)this[$][Z]>P&&(P=this[$][Z],F.row=$,F.column=Z);return F},C.prototype.min=function(){for(var P=Infinity,F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)this[M][$]<P&&(P=this[M][$]);return P},C.prototype.minIndex=function(){for(var P=Infinity,F={},O=this.rows,M=this.columns,$=0;$<O;$++)for(var Z=0;Z<M;Z++)this[$][Z]<P&&(P=this[$][Z],F.row=$,F.column=Z);return F},C.prototype.maxRow=function(P){this.checkRowIndex(P);for(var F=-Infinity,O=0,M=this.columns;O<M;O++)this[P][O]>F&&(F=this[P][O]);return F},C.prototype.maxRowIndex=function(P){this.checkRowIndex(P);for(var F=-Infinity,O={row:P},M=0,$=this.columns;M<$;M++)this[P][M]>F&&(F=this[P][M],O.column=M);return O},C.prototype.minRow=function(P){this.checkRowIndex(P);for(var F=Infinity,O=0,M=this.columns;O<M;O++)this[P][O]<F&&(F=this[P][O]);return F},C.prototype.minRowIndex=function(P){this.checkRowIndex(P);for(var F=Infinity,O={row:P,column:0},M=0,$=this.columns;M<$;M++)this[P][M]<F&&(F=this[P][M],O.column=M);return O},C.prototype.maxColumn=function(P){this.checkColumnIndex(P);for(var F=-Infinity,O=0,M=this.rows;O<M;O++)this[O][P]>F&&(F=this[O][P]);return F},C.prototype.maxColumnIndex=function(P){this.checkColumnIndex(P);for(var F=-Infinity,O={row:0,column:P},M=0,$=this.rows;M<$;M++)this[M][P]>F&&(F=this[M][P],O.row=M);return O},C.prototype.minColumn=function(P){this.checkColumnIndex(P);for(var F=Infinity,O=0,M=this.rows;O<M;O++)this[O][P]<F&&(F=this[O][P]);return F},C.prototype.minColumnIndex=function(P){this.checkColumnIndex(P);for(var F=Infinity,O={row:0,column:P},M=0,$=this.rows;M<$;M++)this[M][P]<F&&(F=this[M][P],O.row=M);return O},C.prototype.diag=function(){if(!this.isSquare())throw new TypeError('Only square matrices have a diagonal.');for(var T=Array(this.rows),P=0,F=this.rows;P<F;P++)T[P]=this[P][P];return T},C.prototype.sum=function(){for(var P=0,F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)P+=this[M][$];return P},C.prototype.mean=function(){return this.sum()/this.size},C.prototype.prod=function(){for(var T=1,P=this.rows,F=this.columns,O=0;O<P;O++)for(var M=0;M<F;M++)T*=this[O][M];return T},C.prototype.cumulativeSum=function(){for(var P=0,F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)P+=this[M][$],this[M][$]=P;return this},C.prototype.dot=function(P){if(this.size!==P.size)throw new RangeError('vectors do not have the same size');for(var F=this.to1DArray(),O=P.to1DArray(),T=0,M=F.length,$=0;$<M;$++)T+=F[$]*O[$];return T},C.prototype.mmul=function(P){if(!C.isMatrix(P))throw new TypeError('parameter "other" must be a matrix');this.columns!==P.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');var F=this.rows,O=this.columns,M=P.columns,$=new C(F,M),Z=Array(O),W,K,Q;for(K=0;K<M;K++){for(Q=0;Q<O;Q++)Z[Q]=P[Q][K];for(W=0;W<F;W++){var G=this[W],ee=0;for(Q=0;Q<O;Q++)ee+=G[Q]*Z[Q];$[W][K]=ee}}return $},C.prototype.sortRows=function(P){for(var F=0,O=this.rows;F<O;F++)this[F].sort(P);return this},C.prototype.sortColumns=function(P){for(var F=0,O=this.columns;F<O;F++)this.setColumn(F,this.getColumn(F).sort(P));return this},C.prototype.transpose=function(){for(var P=new C(this.columns,this.rows),F=this.rows,O=this.columns,M=0;M<F;M++)for(var $=0;$<O;$++)P[$][M]=this[M][$];return P},C.prototype.subMatrix=function(P,F,O,M){if(P>F||O>M||0>P||P>=this.rows||0>F||F>=this.rows||0>O||O>=this.columns||0>M||M>=this.columns)throw new RangeError('Argument out of range');for(var $=new C(F-P+1,M-O+1),Z=P;Z<=F;Z++)for(var W=O;W<=M;W++)$[Z-P][W-O]=this[Z][W];return $},C.prototype.subMatrixRow=function(P,F,O){if('undefined'==typeof F?(F=0,O=this.columns-1):'undefined'==typeof O&&(O=this.columns-1),F>O||0>F||F>=this.columns||0>O||O>=this.columns)throw new RangeError('Argument out of range.');for(var M=P.length,$=this.rows,Z=new C(M,O-F+1),W=0;W<M;W++)for(var K=F;K<=O;K++){if(0>P[W]||P[W]>=$)throw new RangeError('Argument out of range.');Z[W][K-F]=this[P[W]][K]}return Z},C.prototype.subMatrixColumn=function(P,F,O){if('undefined'==typeof F?(F=0,O=this.rows-1):'undefined'==typeof O&&(O=this.rows-1),F>O||0>F||F>=this.rows||0>O||O>=this.rows)throw new RangeError('Argument out of range.');for(var M=P.length,$=this.columns,Z=new C(O-F+1,M),W=0;W<M;W++)for(var K=F;K<=O;K++){if(0>P[W]||P[W]>=$)throw new RangeError('Argument out of range.');Z[K-F][W]=this[K][P[W]]}return Z},C.prototype.trace=function(){if(!this.isSquare())throw new TypeError('The matrix is not square');for(var T=0,P=0,F=this.rows;P<F;P++)T+=this[P][P];return T},C.prototype.abs=function(){for(var P=this.rows,F=this.columns,O=0;O<P;O++)for(var M=0;M<F;M++)this[O][M]=Math.abs(this[O][M])},_.exports=C},function(_,S,E){'use strict';(function(D){if(S.base64=!0,S.array=!0,S.string=!0,S.arraybuffer='undefined'!=typeof ArrayBuffer&&'undefined'!=typeof Uint8Array,S.nodebuffer='undefined'!=typeof D,S.uint8array='undefined'!=typeof Uint8Array,'undefined'==typeof ArrayBuffer)S.blob=!1;else{var C=new ArrayBuffer(0);try{S.blob=0===new Blob([C],{type:'application/zip'}).size}catch(T){try{var R=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,I=new R;I.append(C),S.blob=0===I.getBlob('application/zip').size}catch(P){S.blob=!1}}}}).call(S,E(15).Buffer)},function(_,S,E){'use strict';_.exports=E(2),_.exports.Decompositions=_.exports.DC=E(78)},function(_,S,E){'use strict';S.array=E(31),S.matrix=E(84)},function(_,S,E){'use strict';const D=E(5).array,C=E(59),R=E(17),I=E(102),T=E(39),F=2;class O{constructor(M){this.sd=M,this.activeElement=0}static fromJcamp(M,$){$=Object.assign({},{keepSpectra:!0,keepRecordsRegExp:/^.+$/},$,{xy:!0});var Z=R.convert(M,$);return new this(Z)}setActiveElement(M){this.activeElement=M}getActiveElement(){return this.activeElement}getXUnits(){return this.getSpectrum().xUnit}setXUnits(M){this.getSpectrum().xUnit=M}getYUnits(){return this.getSpectrum().yUnit}getSpectraVariable(M){return this.sd.ntuples[M]}getPage(M){return this.sd.spectra[M].page}getNbPoints(M){return this.getSpectrumData(M).y.length}getFirstX(M){return M=M||this.activeElement,this.sd.spectra[M].firstX}setFirstX(M,$){$=$||this.activeElement,this.sd.spectra[$].firstX=M}getLastX(M){return M=M||this.activeElement,this.sd.spectra[M].lastX}setLastX(M,$){$=$||this.activeElement,this.sd.spectra[$].lastX=M}getFirstY(M){return M=M||this.activeElement,this.sd.spectra[M].firstY}setFirstY(M,$){$=$||this.activeElement,this.sd.spectra[$].firstY=M}getLastY(M){return M=M||this.activeElement,this.sd.spectra[M].lastY}setLastY(M,$){$=$||this.activeElement,this.sd.spectra[$].lastY=M}setDataClass(M){M===F&&(this.getSpectrum().isPeaktable=!0,this.getSpectrum().isXYdata=!1),M===1&&(this.getSpectrum().isXYdata=!0,this.getSpectrum().isPeaktable=!1)}isDataClassPeak(){return!!this.getSpectrum().isPeaktable&&this.getSpectrum().isPeaktable}isDataClassXY(){return!!this.getSpectrum().isXYdata&&this.getSpectrum().isXYdata}setDataType(M){this.getSpectrum().dataType=M}getDataType(){return this.getSpectrum().dataType}getSpectrumData(M){return M=M||this.activeElement,this.sd.spectra[M].data[0]}getSpectrum(M){return M=M||this.activeElement,this.sd.spectra[M]}getNbSubSpectra(){return this.sd.spectra.length}getXData(M){return this.getSpectrumData(M).x}getYData(M){return this.getSpectrumData(M).y}getX(M){return this.getXData()[M]}getY(M){return this.getYData()[M]}getXYData(M){return[this.getXData(M),this.getYData(M)]}getTitle(M){return this.getSpectrum(M).title}setTitle(M,$){this.getSpectrum($).title=M}getMinY(M){return D.min(this.getYData(M))}getMaxY(M){return D.max(this.getYData(M))}getMinMaxY(M){return D.minMax(this.getYData(M))}getNoiseLevel(){var M=D.robustMeanAndStdev(this.getYData()).stdev;return M*this.getNMRPeakThreshold(this.getNucleus(1))}arrayPointToUnits(M){return this.getFirstX()-M*(this.getFirstX()-this.getLastX())/(this.getNbPoints()-1)}unitsToArrayPoint(M){if(this.isDataClassXY())return Math.round((this.getFirstX()-M)*(-1/this.getDeltaX()));if(this.isDataClassPeak()){var $=0,Z=this.getNbPoints()-1,W=0,K;if(this.getFirstX()>this.getLastX()){if(Z=0,W=this.getNbPoints()-1,M>this.getFirstX())return this.getNbPoints();if(M<this.getLastX())return-1}else{if(M<this.getFirstX())return-1;if(M>this.getLastX())return this.getNbPoints()}for(;1<Math.abs(Z-W);){if(K=Math.round(Math.floor((Z+W)/2)),this.getX(K)===M)return K;this.getX(K)>M?Z=K:W=K}return $=W,Math.abs(this.getX(W)-M)>Math.abs(this.getX(Z)-M)&&($=Z),$}return 0}getDeltaX(){return(this.getLastX()-this.getFirstX())/(this.getNbPoints()-1)}setMinMax(M,$){C.scale(this.getYData(),{min:M,max:$,inplace:!0})}setMin(M){C.scale(this.getYData(),{min:M,inplace:!0})}setMax(M){C.scale(this.getYData(),{max:M,inplace:!0})}yShift(M){var $=this.getSpectrumData().y,Z=this.getNbPoints(),W=0;for(W=0;W<Z;W++)$[W]+=M;this.getSpectrum().firstY+=M,this.getSpectrum().lastY+=M}shift(M){for(let K=0;K<this.getNbSubSpectra();K++){this.setActiveElement(K);var $=this.getSpectrumData().x,Z=this.getNbPoints(),W=0;for(W=0;W<Z;W++)$[W]+=M;this.getSpectrum().firstX+=M,this.getSpectrum().lastX+=M}}fillWith(M,$,Z){var W,K,Q,G,ee;M>$&&(W=M,M=$,$=W);for(var te=0;te<this.getNbSubSpectra();te++)if(this.setActiveElement(te),G=this.getXData(),ee=this.getYData(),K=this.unitsToArrayPoint(M),Q=this.unitsToArrayPoint($),K>Q&&(W=K,K=Q,Q=W),0>K&&(K=0),Q>=this.getNbPoints&&(Q=this.getNbPoints-1),'number'!=typeof Z)ee.splice(K,Q-K),G.splice(K,Q-K);else for(te=K;te<=Q;te++)ee[te]=Z}suppressZone(M,$){this.fillWith(M,$),this.setDataClass(F)}getMaxPeak(){for(var M=this.getSpectraDataY(),$=M[0],Z=0,W=0;W<M.length;W++)$<M[W]&&($=M[W],Z=W);return[this.getX(Z),$]}getParamDouble(M,$){var Z=this.sd.info[M];return Z||(Z=$),Z}getParamString(M,$){var Z=this.sd.info[M];return Z||(Z=$),Z+''}getParamInt(M,$){var Z=this.sd.info[M];return Z||(Z=$),Z}getParam(M,$){var Z=this.sd.info[M];return Z||(Z=$),Z}containsParam(M){return!!this.sd.info[M]}getSpectraDataY(){return this.getYData()}getSpectraDataX(){return this.getXData()}resetMinMax(){}putParam(M,$){this.sd.info[M]=$}getArea(M,$){var Z=this.unitsToArrayPoint(M),W=this.unitsToArrayPoint($),K=0;if(Z>W){var Q=Z;Z=W,W=Q}Z=0>Z?0:Z,W=W>=this.getNbPoints()?this.getNbPoints()-1:W;for(var G=Z;G<W;G++)K+=this.getY(G);return K*Math.abs(this.getDeltaX())}updateIntegrals(M,$){var Z=0;if(M.forEach(K=>{K.integral=this.getArea(K.from,K.to),Z+=K.integral}),0!==$.nH){var W=$.nH/Z;M.forEach(K=>{K.integral*=W})}}getVector(M,$,Z){return Z?C.getEquallySpacedData(this.getSpectraDataX(),this.getSpectraDataY(),{from:M,to:$,numberOfPoints:Z}):this.getPointsInWindow(M,$)}getPointsInWindow(M,$,Z){var W=this.getSpectraDataX(),K=this.getSpectraDataY(),Q=0,G=W.length-1,ee=1;if(W[0]>W[1]&&(ee=-1,Q=W.length-1,G=0),M>$){var te=M;M=$,$=te}if(W[Q]>$||W[G]<M)return[];for(;W[Q]<M;)Q+=ee;for(;W[G]>$;)G-=ee;var ne=Math.abs(G-Q)+1;Z||(Z=ne);var ae=Array(Z),se=Array(Z),oe=0;-1==ee&&(oe=Z-1);for(var le=ne/Z,de=Q-ee,ue=0;ue<Z;ue++)de+=Math.round(le*ee),ae[oe]=W[de],se[oe]=K[de],oe+=ee;return[ae,se]}is2D(){return'undefined'!=typeof this.sd.twoD&&this.sd.twoD}setTotalIntegral(M){this.totalIntegralValue=M}get totalIntegral(){if(this.totalIntegralValue)return this.totalIntegralValue;if(this.molecule){if(this.getNucleus(0).indexOf('H'))return 1*this.mf.replace(/.*H([0-9]+).*/,'$1');if(this.getNucleus(0).indexOf('C'))return 1*this.mf.replace(/.*C([0-9]+).*/,'$1')}else return 100;return 1}setMolfile(M){this.molfile=M}setMF(M){this.mf=M}createPeaks(M){return this.peaks=null,this.peaks=this.getPeaks(M),this.peaks}getPeaks(M){return this.peaks?this.peaks:T(this,M)}toJcamp(M){var $=new I;return $.convert(this,Object.assign({},{yFactor:1,encode:'DIFDUP',type:'SIMPLE'},M))}}_.exports=O},function(_,S){'use strict';var D='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';S.encode=function(C){for(var I='',W=0,T,P,F,O,M,$,Z;W<C.length;)T=C.charCodeAt(W++),P=C.charCodeAt(W++),F=C.charCodeAt(W++),O=T>>2,M=(3&T)<<4|P>>4,$=(15&P)<<2|F>>6,Z=63&F,isNaN(P)?$=Z=64:isNaN(F)&&(Z=64),I=I+D.charAt(O)+D.charAt(M)+D.charAt($)+D.charAt(Z);return I},S.decode=function(C){var I='',T,P,F,O,M,$,Z,W=0;for(C=C.replace(/[^A-Za-z0-9\+\/\=]/g,'');W<C.length;)O=D.indexOf(C.charAt(W++)),M=D.indexOf(C.charAt(W++)),$=D.indexOf(C.charAt(W++)),Z=D.indexOf(C.charAt(W++)),T=O<<2|M>>4,P=(15&M)<<4|$>>2,F=(3&$)<<6|Z,I+=String.fromCharCode(T),64!=$&&(I+=String.fromCharCode(P)),64!=Z&&(I+=String.fromCharCode(F));return I}},function(_,S,E){'use strict';S.STORE={magic:'\0\0',compress:function(D){return D},uncompress:function(D){return D},compressInputType:null,uncompressInputType:null},S.DEFLATE=E(49)},function(_,S,E){'use strict';(function(D){_.exports=function(C,R){return new D(C,R)},_.exports.test=function(C){return D.isBuffer(C)}}).call(S,E(15).Buffer)},function(_,S,E){'use strict';var D=E(3),C=E(0),R=E(47),I=E(22),T=E(21),P=E(7),F=E(8),O=E(19),M=E(9),$=E(25),Z=E(53),W=E(54),K=function(fe){if(fe._data instanceof O&&(fe._data=fe._data.getContent(),fe.options.binary=!0,fe.options.base64=!1,'uint8array'===C.getTypeOf(fe._data))){var ce=fe._data;fe._data=new Uint8Array(ce.length),0!==ce.length&&fe._data.set(ce,0)}return fe._data},Q=function(fe){var ce=K(fe),me=C.getTypeOf(ce);return'string'===me?!fe.options.binary&&D.nodebuffer?M(ce,'utf-8'):fe.asBinary():ce},G=function(fe){var ce=K(this);return null===ce||'undefined'==typeof ce?'':(this.options.base64&&(ce=P.decode(ce)),ce=fe&&this.options.binary?pe.utf8decode(ce):C.transformTo('string',ce),fe||this.options.binary||(ce=C.transformTo('string',pe.utf8encode(ce))),ce)},ee=function(fe,ce,me){this.name=fe,this.dir=me.dir,this.date=me.date,this.comment=me.comment,this.unixPermissions=me.unixPermissions,this.dosPermissions=me.dosPermissions,this._data=ce,this.options=me,this._initialMetadata={dir:me.dir,date:me.date}};ee.prototype={asText:function(){return G.call(this,!0)},asBinary:function(){return G.call(this,!1)},asNodeBuffer:function(){var fe=Q(this);return C.transformTo('nodebuffer',fe)},asUint8Array:function(){var fe=Q(this);return C.transformTo('uint8array',fe)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var te=function(fe,ce){var me='',be;for(be=0;be<ce;be++)me+=String.fromCharCode(255&fe),fe>>>=8;return me},ne=function(fe){return fe=fe||{},!0===fe.base64&&(null===fe.binary||void 0===fe.binary)&&(fe.binary=!0),fe=C.extend(fe,T),fe.date=fe.date||new Date,null!==fe.compression&&(fe.compression=fe.compression.toUpperCase()),fe},ae=function(fe,ce,me){var be=C.getTypeOf(ce),_e;if(me=ne(me),'string'==typeof me.unixPermissions&&(me.unixPermissions=parseInt(me.unixPermissions,8)),me.unixPermissions&&16384&me.unixPermissions&&(me.dir=!0),me.dosPermissions&&16&me.dosPermissions&&(me.dir=!0),me.dir&&(fe=oe(fe)),me.createFolders&&(_e=se(fe))&&le.call(this,_e,!0),me.dir||null===ce||'undefined'==typeof ce)me.base64=!1,me.binary=!1,ce=null,be=null;else if('string'===be)me.binary&&!me.base64&&!0!==me.optimizedBinaryString&&(ce=C.string2binary(ce));else{if(me.base64=!1,me.binary=!0,!be&&!(ce instanceof O))throw new Error('The data of \''+fe+'\' is in an unsupported format !');'arraybuffer'==be&&(ce=C.transformTo('uint8array',ce))}var ye=new ee(fe,ce,me);return this.files[fe]=ye,ye},se=function(fe){'/'==fe.slice(-1)&&(fe=fe.substring(0,fe.length-1));var ce=fe.lastIndexOf('/');return 0<ce?fe.substring(0,ce):''},oe=function(fe){return'/'!=fe.slice(-1)&&(fe+='/'),fe},le=function(fe,ce){return ce='undefined'!=typeof ce&&ce,fe=oe(fe),this.files[fe]||ae.call(this,fe,null,{dir:!0,createFolders:ce}),this.files[fe]},de=function(fe,ce,me){var be=new O,_e;return fe._data instanceof O?(be.uncompressedSize=fe._data.uncompressedSize,be.crc32=fe._data.crc32,0===be.uncompressedSize||fe.dir?(ce=F.STORE,be.compressedContent='',be.crc32=0):fe._data.compressionMethod===ce.magic?be.compressedContent=fe._data.getCompressedContent():(_e=fe._data.getContent(),be.compressedContent=ce.compress(C.transformTo(ce.compressInputType,_e),me))):(_e=Q(fe),(!_e||0===_e.length||fe.dir)&&(ce=F.STORE,_e=''),be.uncompressedSize=_e.length,be.crc32=R(_e),be.compressedContent=ce.compress(C.transformTo(ce.compressInputType,_e),me)),be.compressedSize=be.compressedContent.length,be.compressionMethod=ce.magic,be},ue=function(fe,ce){var me=fe;return fe||(me=ce?16893:33204),(65535&me)<<16},he=function(fe){return 63&(fe||0)},ge=function(fe,ce,me,be,_e,ye){var xe=me.compressedContent,we=ye!==$.utf8encode,ke=C.transformTo('string',ye(ce.name)),je=C.transformTo('string',$.utf8encode(ce.name)),ve=ce.comment||'',Se=C.transformTo('string',ye(ve)),Ee=C.transformTo('string',$.utf8encode(ve)),De=je.length!==ce.name.length,Ce=Ee.length!==ve.length,Ae=ce.options,Te='',Pe='',Fe='',Re,Ie,ze,Xe;ze=ce._initialMetadata.dir===ce.dir?Ae.dir:ce.dir,Xe=ce._initialMetadata.date===ce.date?Ae.date:ce.date;var Ye=0,Ne=0;ze&&(Ye|=16),'UNIX'===_e?(Ne=798,Ye|=ue(ce.unixPermissions,ze)):(Ne=20,Ye|=he(ce.dosPermissions,ze)),Re=Xe.getHours(),Re<<=6,Re|=Xe.getMinutes(),Re<<=5,Re|=Xe.getSeconds()/2,Ie=Xe.getFullYear()-1980,Ie<<=4,Ie|=Xe.getMonth()+1,Ie<<=5,Ie|=Xe.getDate(),De&&(Pe=te(1,1)+te(R(ke),4)+je,Te+='up'+te(Pe.length,2)+Pe),Ce&&(Fe=te(1,1)+te(this.crc32(Se),4)+Ee,Te+='uc'+te(Fe.length,2)+Fe);var Oe='';Oe+='\n\0',Oe+=!we&&(De||Ce)?'\0\b':'\0\0',Oe+=me.compressionMethod,Oe+=te(Re,2),Oe+=te(Ie,2),Oe+=te(me.crc32,4),Oe+=te(me.compressedSize,4),Oe+=te(me.uncompressedSize,4),Oe+=te(ke.length,2),Oe+=te(Te.length,2);var Me=I.LOCAL_FILE_HEADER+Oe+ke+Te,Le=I.CENTRAL_FILE_HEADER+te(Ne,2)+Oe+te(Se.length,2)+'\0\0\0\0'+te(Ye,4)+te(be,4)+ke+Te+Se;return{fileRecord:Me,dirRecord:Le,compressedObject:me}},pe={load:function(){throw new Error('Load method is not defined. Is the file jszip-load.js included ?')},filter:function(fe){var ce=[],me,be,_e,ye;for(me in this.files)this.files.hasOwnProperty(me)&&(_e=this.files[me],ye=new ee(_e.name,_e._data,C.extend(_e.options)),be=me.slice(this.root.length,me.length),me.slice(0,this.root.length)===this.root&&fe(be,ye)&&ce.push(ye));return ce},file:function(fe,ce,me){if(1===arguments.length){if(C.isRegExp(fe)){var be=fe;return this.filter(function(_e,ye){return!ye.dir&&be.test(_e)})}return this.filter(function(_e,ye){return!ye.dir&&_e===fe})[0]||null}return fe=this.root+fe,ae.call(this,fe,ce,me),this},folder:function(fe){if(!fe)return this;if(C.isRegExp(fe))return this.filter(function(_e,ye){return ye.dir&&fe.test(_e)});var ce=this.root+fe,me=le.call(this,ce),be=this.clone();return be.root=me.name,be},remove:function(fe){fe=this.root+fe;var ce=this.files[fe];if(ce||('/'!=fe.slice(-1)&&(fe+='/'),ce=this.files[fe]),ce&&!ce.dir)delete this.files[fe];else for(var me=this.filter(function(_e,ye){return ye.name.slice(0,fe.length)===fe}),be=0;be<me.length;be++)delete this.files[me[be].name];return this},generate:function(fe){fe=C.extend(fe||{},{base64:!0,compression:'STORE',compressionOptions:null,type:'base64',platform:'DOS',comment:null,mimeType:'application/zip',encodeFileName:$.utf8encode}),C.checkSupport(fe.type),('darwin'===fe.platform||'freebsd'===fe.platform||'linux'===fe.platform||'sunos'===fe.platform)&&(fe.platform='UNIX'),'win32'===fe.platform&&(fe.platform='DOS');var ce=[],me=0,be=0,xe=C.transformTo('string',fe.encodeFileName(fe.comment||this.comment||'')),_e,ye;for(var we in this.files)if(this.files.hasOwnProperty(we)){var ke=this.files[we],je=ke.options.compression||fe.compression.toUpperCase(),ve=F[je];if(!ve)throw new Error(je+' is not a valid compression method !');var Se=ke.options.compressionOptions||fe.compressionOptions||{},Ee=de.call(this,ke,ve,Se),De=ge.call(this,we,ke,Ee,me,fe.platform,fe.encodeFileName);me+=De.fileRecord.length+Ee.compressedSize,be+=De.dirRecord.length,ce.push(De)}var Ce='';Ce=I.CENTRAL_DIRECTORY_END+'\0\0\0\0'+te(ce.length,2)+te(ce.length,2)+te(be,4)+te(me,4)+te(xe.length,2)+xe;var Ae=fe.type.toLowerCase();for(_e='uint8array'===Ae||'arraybuffer'===Ae||'blob'===Ae||'nodebuffer'===Ae?new W(me+be+Ce.length):new Z(me+be+Ce.length),ye=0;ye<ce.length;ye++)_e.append(ce[ye].fileRecord),_e.append(ce[ye].compressedObject.compressedContent);for(ye=0;ye<ce.length;ye++)_e.append(ce[ye].dirRecord);_e.append(Ce);var Re=_e.finalize();switch(fe.type.toLowerCase()){case'uint8array':case'arraybuffer':case'nodebuffer':return C.transformTo(fe.type.toLowerCase(),Re);case'blob':return C.arrayBuffer2Blob(C.transformTo('arraybuffer',Re),fe.mimeType);case'base64':return fe.base64?P.encode(Re):Re;default:return Re;}},crc32:function(fe,ce){return R(fe,ce)},utf8encode:function(fe){return C.transformTo('string',$.utf8encode(fe))},utf8decode:function(fe){return $.utf8decode(fe)}};_.exports=pe},function(_,S){'use strict';S.hypotenuse=function(C,R){var I;return Math.abs(C)>Math.abs(R)?(I=R/C,Math.abs(C)*Math.sqrt(1+I*I)):0===R?0:(I=C/R,Math.abs(R)*Math.sqrt(1+I*I))}},function(_){'use strict';_.exports={0:'',1:'stream end',2:'need dictionary','-1':'file error','-2':'stream error','-3':'data error','-4':'insufficient memory','-5':'buffer error','-6':'incompatible version'}},function(_,S,E){'use strict';const D=E(39),C=E(107),R=E(109),I=E(110);class T extends Array{constructor(P){if(Array.isArray(P)){super(P.length);for(let F=0;F<P.length;F++)this[F]=P[F]}else'number'==typeof P?super(P):super()}static fromPrediction(P,F){F=Object.assign({},{lineWidth:1,frequency:400,nucleus:'1H'},F);const O=P.length,M=Array(O);var $,Z,W,K,Q,G,ee;for($=0;$<O;$++)M[P[$].diaIDs[0]]?M[P[$].diaIDs[0]].push($):M[P[$].diaIDs[0]]=[$];const te=Object.keys(M),ne=Array(te.length);for($=0;$<te.length;$++){if(W=M[te[$]],K=P[W[0]],Q=0,ee=K.j,ee)for(Z=0;Z<ee.length;Z++)Q+=ee[Z].coupling;for(Q+=2*F.lineWidth,Q/=F.frequency,ne[$]={from:K.delta-Q,to:K.delta+Q,integral:1,signal:[P[W[0]]]},Z=1;Z<W.length;Z++)ne[$].signal.push(P[W[Z]]),ne[$].integral++}for($=0;$<ne.length;$++)for(ne[$]._highlight=ne[$].signal[0].diaIDs,G=(ne[$].from+ne[$].to)/2,Q=Math.abs(ne[$].from-ne[$].to),Z=ne.length-1;Z>$;Z--)Math.abs(G-(ne[Z].from+ne[Z].to)/2)<=Math.abs(Q+Math.abs(ne[Z].from-ne[Z].to))/2&&(ne[$].from=Math.min(ne[$].from,ne[Z].from),ne[$].to=Math.max(ne[$].to,ne[Z].to),ne[$].integral+=ne[Z].integral,ne[$]._highlight.push(ne[Z].signal[0].diaIDs[0]),ne.splice(Z,1),Z=ne.length-1,G=(ne[$].from+ne[$].to)/2,Q=Math.abs(ne[$].from-ne[$].to));return new T(ne)}static fromSpectrum(P,F){return this.options=Object.assign({},{nH:99,clean:!0,realTop:!1,thresholdFactor:1,compile:!0,integralType:'sum',optimize:!0,idPrefix:'',format:'new',frequencyCluster:16},F),new T(D(P,this.options))}updateMultiplicity(){for(let O=0;O<this.length;O++){var P=this[O];for(let M=0;M<P.signal.length;M++){var F=P.signal[M];if(F.j&&!F.multiplicity){F.multiplicity='';for(let $=0;$<F.j.length;$++)F.multiplicity+=F.j[$].multiplicity}}}return this}updateIntegrals(P){var F=P.factor||1,O;if(P.sum){var M=P.sum||1,$=0;for(O=0;O<this.length;O++)$+=this[O].integral;F=M/$}for(O=0;O<this.length;O++)this[O].integral*=F;return this}getVector(P){return R(this.getPeakList(),P)}getPeakList(){var P=[],F,O;for(F=0;F<this.length;F++){var M=this[F];for(O=0;O<M.signal.length;O++)P=P.concat(M.signal[O].peak)}return P}getACS(P){return C(this,P)}getAnnotations(P){return I.annotations1D(this,P)}}_.exports=T},function(_,S,E){'use strict';function C(ee,te){te=te||{};var ne=new Date,ae;if(ee.ser||ee['2rr'])ae=I(ee,te);else if(ee['1r']||ee['1i']||ee.fid)ae=R(ee,te);else throw new RangeError('The current files are invalid');ae.twoD&&!te.noContours&&(M(ae),ae.profiling&&ae.profiling.push({action:'Finished countour plot calculation',time:new Date-ne}),!te.keepSpectra&&delete ae.spectra);var se=ae.spectra;if(te.xy&&0<se.length)for(var oe=0,le;oe<se.length;oe++)if(le=se[oe],0<le.data.length)for(var de=0;de<le.data.length;de++){for(var ue=le.data[de],he={x:Array(ue.length/2),y:Array(ue.length/2)},ge=0;ge<ue.length;ge+=2)he.x[ge/2]=ue[ge],he.y[ge/2]=ue[ge+1];le.data[de]=he}return ae}function R(ee,te){for(var ne=P(ee.procs,te),ae=P(ee.acqus,te),se=Object.keys(ae.info),oe=0,le;oe<se.length;oe++)le=se[oe],void 0===ne.info[le]&&(ne.info[le]=ae.info[le]);return ee['1r']||ee['1i']?(ee['1r']&&T(ee['1r'],ne,'1r',!0),ee['1i']&&T(ee['1i'],ne,'1i',!1)):ee.fid&&F(ee.fid,ne),ne}function I(ee,te){var ne,ae,oe;if(ee['2rr']){for(var le=P(ee.procs,te),de=P(ee.acqus,te),ue=Object.keys(de.info),he=0,ge;he<ue.length;he++)ge=ue[he],void 0===le.info[ge]&&(le.info[ge]=de.info[ge]);de=P(ee.proc2s,te),le.info.nbSubSpectra=de.info.$SI=parseInt(de.info.$SI),ne=de.info.$SF=parseFloat(de.info.$SF),ae=de.info.$SWP=parseFloat(de.info.$SWP),oe=de.info.$OFFSET=parseFloat(de.info.$OFFSET)}else ee.ser&&(le=P(ee.acqus,te),de=P(ee.acqu2s,te),le.info.nbSubSpectra=de.info.$SI=parseInt(de.info.$TD),le.info.$SI=parseInt(le.info.$TD),ae=de.info.$SW,le.info.$SWP=le.info.$SWH,le.info.$SF=parseFloat(de.info.$SFO1),le.info.$OFFSET=0,ne=de.info.$SFO1=parseFloat(de.info.$SFO1),ne=1,oe=0,le.info.$AXNUC=le.info.$NUC1,de.info.$AXNUC=de.info.$NUC1);le.info.firstY=oe,le.info.lastY=oe-ae/ne,le.info.$BF2=ne,le.info.$SFO1=ne;var pe=le.info.nbSubSpectra,fe=le.info.firstY,ce=(le.info.lastY-le.info.firstY)/(pe-1);ee['2rr']?T(ee['2rr'],le,'2rr',!0):ee.ser&&F(ee.ser,le,'ser',!0);for(var he=0;he<pe;he++)fe+=ce,le.spectra[he].pageValue=fe;ee.ser?'TYPE_2DNMR_FID':'TYPE_2DNMR_SPECTRUM';return le.info['2D_Y_NUCLEUS']=de.info.$AXNUC,le.info['2D_X_NUCLEUS']=le.info.$AXNUC,le.info['2D_Y_FRECUENCY']=ne,le.info['2D_Y_OFFSET']=oe,le.info['2D_X_FRECUENCY']=le.info.$SF,le.info['2D_X_OFFSET']=le.info.$OFFSET,le.twoD=!0,le}function T(ee,te,ne,ae){var se=te.info.$SI=parseInt(te.info.$SI),oe=parseFloat(te.info.$SWP),le=parseFloat(te.info.$SF),de=le,ue=te.shiftOffsetVal;te.info.observeFrequency=le,te.info.$BF1=de,te.info.$SFO1=le,te.info.brukerReference=de;var he=parseInt(te.info.$BYTORDP);he=he?0:1;var ge=te.info.nbSubSpectra?te.info.nbSubSpectra:1;he?ee.setLittleEndian():ee.setBigEndian();for(var pe=0;pe<ge;pe++){var fe={dataType:'NMR Spectrum',dataTable:'(X++(R..R))',nbPoints:se,firstX:ue,lastX:ue-oe/le,xUnit:'PPM',yUnit:'Arbitrary',data:[Array(2*se)],isXYdata:!0,observeFrequency:le,title:te.info.TITLE,deltaX:-(oe/le)/(se-1)},ce=ue,me=fe.deltaX;if(ae)for(var be=0;be<se;++be)fe.data[0][2*be]=ce,fe.data[0][2*be+1]=ee.readInt32(),(null===fe.data[0][2*be+1]||isNaN(fe.data[0][2*be+1]))&&(fe.data[0][2*be+1]=0),ce+=me;else for(be=se-1;0<=be;--be)fe.data[0][2*be]=ce,fe.data[0][2*be+1]=ee.readInt32(),(null===fe.data[0][2*be+1]||isNaN(fe.data[0][2*be+1]))&&(fe.data[0][2*be+1]=0),ce+=me;te.spectra.push(fe)}}function P(ee,te){var ne=/.*/;return te.keepRecordsRegExp&&(ne=te.keepRecordsRegExp),Z.convert(ee,{keepRecordsRegExp:ne})}function F(ee,te){var ne=te.info.$TD=parseInt(te.info.$TD),ae=te.info.$SWH=parseFloat(te.info.$SWH),se=te.info.$SW=parseFloat(te.info.$SW),oe=te.info.$SFO1=parseFloat(te.info.$SFO1),le=parseFloat(te.info.$BF1);te.info.$BF1=le;var de=se,ue=de/(ne-1),he=parseInt(te.info.$BYTORDP);he=he?0:1,he?ee.setLittleEndian():ee.setBigEndian();var ge=te.info.nbSubSpectra?te.info.nbSubSpectra:1;te.spectra=Array(ge);for(var pe=0,fe;pe<ge/2;pe++){fe={dataType:'NMR FID',dataTable:'(X++(R..R))',nbPoints:ne,firstX:0,lastX:de,nucleus:te.info.$NUC1?te.info.$NUC1:void 0,xUnit:'Sec',yUnit:'Arbitrary',data:[Array(2*ne)],isXYdata:!0,observeFrequency:oe,title:te.info.TITLE,deltaX:ue},te.spectra[2*pe]=fe,fe={dataType:'NMR FID',dataTable:'(X++(I..I))',nbPoints:ne,firstX:0,lastX:de,nucleus:te.info.$NUC1?te.info.$NUC1:void 0,xUnit:'Sec',yUnit:'Arbitrary',data:[Array(2*ne)],isXYdata:!0,observeFrequency:oe,title:te.info.TITLE,deltaX:ue},te.spectra[2*pe+1]=fe;for(var ce=0,be=0,me;ee.available(8)&&be<ne;be++,ce=be*ue)me=ee.readInt32(),(null===me||isNaN(me))&&(me=0),te.spectra[2*pe].data[0][2*be+1]=me,te.spectra[2*pe].data[0][2*be]=ce,me=ee.readInt32(),(null===me||isNaN(me))&&(me=0),te.spectra[2*pe+1].data[0][2*be+1]=me,te.spectra[2*pe+1].data[0][2*be]=ce;for(;be<ne;be++,ce=be*ue)te.spectra[2*pe].data[0][2*be+1]=0,te.spectra[2*pe].data[0][2*be]=ce,te.spectra[2*pe+1].data[0][2*be+1]=0,te.spectra[2*pe+1].data[0][2*be]=ce}}function O(ee){for(var te=0,ne=ee[0].data[0][0],ae=ne,se=ee.length,oe=ee[0].data[0].length/2,le=Array(se),de=0;de<se;de++){le[de]=Array(oe);for(var ue=0;ue<oe;ue++)le[de][ue]=ee[de].data[0][2*ue+1],le[de][ue]<ne&&(ne=ee[de].data[0][2*ue+1]),le[de][ue]>ae&&(ae=ee[de].data[0][2*ue+1]),0!==de&&0!==ue&&(te+=Math.abs(le[de][ue]-le[de][ue-1])+Math.abs(le[de][ue]-le[de-1][ue]))}return{z:le,minX:ee[0].data[0][0],maxX:ee[0].data[0][ee[0].data[0].length-2],minY:ee[0].pageValue,maxY:ee[se-1].pageValue,minZ:ne,maxZ:ae,noise:te/(2*((se-1)*(oe-1)))}}function M(ee){var te=O(ee.spectra);ee.contourLines=$(te),delete te.z,ee.minMax=te}function $(ee){for(var ne=ee.noise,ae=ee.z,se=[],oe=7,le=new Float32Array(4),de=[],ue=ae.length,he=ae[0].length,me=ee.minX,be=ee.maxX,_e=(be-me)/(he-1),ye=ee.minY,xe=ee.maxY,we=(xe-ye)/(ue-1),ke=ee.minZ,je=ee.maxZ,Se=0,ge,pe,fe,ce,ve,Ee;Se<2*oe;Se++){Ee={},se.push(Ee);var De=Se%2;ve=0==De?(je-5*ne)*Math.exp(Se/2-oe)+5*ne:-(je-5*ne)*Math.exp(Se/2-oe)-5*ne;var Ce=[];if(Ee.zValue=ve,Ee.lines=Ce,!(ve<=ke||ve>=je))for(var Ae=0;Ae<ue-1;Ae++)for(var Re=0;Re<he-1;Re++){le[0]=ae[Ae][Re],le[1]=ae[Ae][Re+1],le[2]=ae[Ae+1][Re],le[3]=ae[Ae+1][Re+1];for(var Ie=0;4>Ie;Ie++)de[Ie]=le[Ie]>ve;de[0]!==de[1]&&de[0]!==de[2]&&(ge=Re+(ve-le[0])/(le[1]-le[0]),pe=Ae,fe=Re,ce=Ae+(ve-le[0])/(le[2]-le[0]),Ce.push(ge*_e+me,pe*we+ye,fe*_e+me,ce*we+ye)),de[3]!==de[1]&&de[3]!==de[2]&&(ge=Re+1,pe=Ae+1-(ve-le[3])/(le[1]-le[3]),fe=Re+1-(ve-le[3])/(le[2]-le[3]),ce=Ae+1,Ce.push(ge*_e+me,pe*we+ye,fe*_e+me,ce*we+ye)),de[1]!==de[2]&&(ge=Re+1-(ve-le[1])/(le[2]-le[1]),pe=Ae+(ve-le[1])/(le[2]-le[1]),de[1]!==de[0]&&(fe=Re+1-(ve-le[1])/(le[0]-le[1]),ce=Ae,Ce.push(ge*_e+me,pe*we+ye,fe*_e+me,ce*we+ye)),de[2]!==de[0]&&(fe=Re,ce=Ae+1-(ve-le[2])/(le[0]-le[2]),Ce.push(ge*_e+me,pe*we+ye,fe*_e+me,ce*we+ye)),de[1]!==de[3]&&(fe=Re+1,ce=Ae+(ve-le[1])/(le[3]-le[1]),Ce.push(ge*_e+me,pe*we+ye,fe*_e+me,ce*we+ye)),de[2]!==de[3]&&(fe=Re+(ve-le[2])/(le[3]-le[2]),ce=Ae+1,Ce.push(ge*_e+me,pe*we+ye,fe*_e+me,ce*we+ye)))}}return{minX:ee.minX,maxX:ee.maxX,minY:ee.minY,maxY:ee.maxY,segments:se}}const Z=E(17),W=E(44),K=E(50);var Q=1,G=2;_.exports={convertZip:function(ee,te){te=te||{};var ne=new K;ne.load(ee,te);for(var ae={ser:Q,fid:Q,acqus:G,acqu2s:G,procs:G,proc2s:G,'1r':Q,'1i':Q,'2rr':Q},se=ne.filter(function(me){return 0<=me.indexOf('ser')||0<=me.indexOf('fid')||0<=me.indexOf('1r')||0<=me.indexOf('2rr')}),oe=Array(se.length),le=0;le<se.length;++le){var de=se[le].name.length,ue=se[le].name;ue=ue.substr(0,ue.lastIndexOf('/')+1);var he=ne.folder(ue),ge=he.filter(function(me){return!!ae[me]}),pe={};0<=ue.indexOf('pdata')&&(pe.acqus=ne.file(ue.replace(/pdata\/[0-9]\//,'acqus')).asText());for(var fe=0;fe<ge.length;++fe){var ce=ge[fe].name.lastIndexOf('/'),ue=ge[fe].name.substr(ce+1);pe[ue]=ae[ue]===Q?new W(ge[fe].asArrayBuffer()):ge[fe].asText()}oe[le]={filename:se[le].name,value:C(pe,te)}}return oe},converFolder:C}},function(_,S,E){'use strict';(function(D){function R(){return T.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function I(Le,Ue){if(R()<Ue)throw new RangeError('Invalid typed array length');return T.TYPED_ARRAY_SUPPORT?(Le=new Uint8Array(Ue),Le.__proto__=T.prototype):(null===Le&&(Le=new T(Ue)),Le.length=Ue),Le}function T(Le,Ue,Be){if(!T.TYPED_ARRAY_SUPPORT&&!(this instanceof T))return new T(Le,Ue,Be);if('number'==typeof Le){if('string'==typeof Ue)throw new Error('If encoding is specified then the first argument must be a string');return M(this,Le)}return P(this,Le,Ue,Be)}function P(Le,Ue,Be,Ve){if('number'==typeof Ue)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&Ue instanceof ArrayBuffer?W(Le,Ue,Be,Ve):'string'==typeof Ue?$(Le,Ue,Be):K(Le,Ue)}function F(Le){if('number'!=typeof Le)throw new TypeError('"size" argument must be a number');else if(0>Le)throw new RangeError('"size" argument must not be negative')}function O(Le,Ue,Be,Ve){return F(Ue),0>=Ue?I(Le,Ue):void 0===Be?I(Le,Ue):'string'==typeof Ve?I(Le,Ue).fill(Be,Ve):I(Le,Ue).fill(Be)}function M(Le,Ue){if(F(Ue),Le=I(Le,0>Ue?0:0|Q(Ue)),!T.TYPED_ARRAY_SUPPORT)for(var Be=0;Be<Ue;++Be)Le[Be]=0;return Le}function $(Le,Ue,Be){if(('string'!=typeof Be||''===Be)&&(Be='utf8'),!T.isEncoding(Be))throw new TypeError('"encoding" must be a valid string encoding');var Ve=0|ee(Ue,Be);Le=I(Le,Ve);var qe=Le.write(Ue,Be);return qe!==Ve&&(Le=Le.slice(0,qe)),Le}function Z(Le,Ue){var Be=0>Ue.length?0:0|Q(Ue.length);Le=I(Le,Be);for(var Ve=0;Ve<Be;Ve+=1)Le[Ve]=255&Ue[Ve];return Le}function W(Le,Ue,Be,Ve){if(Ue.byteLength,0>Be||Ue.byteLength<Be)throw new RangeError('\'offset\' is out of bounds');if(Ue.byteLength<Be+(Ve||0))throw new RangeError('\'length\' is out of bounds');return Ue=void 0===Be&&void 0===Ve?new Uint8Array(Ue):void 0===Ve?new Uint8Array(Ue,Be):new Uint8Array(Ue,Be,Ve),T.TYPED_ARRAY_SUPPORT?(Le=Ue,Le.__proto__=T.prototype):Le=Z(Le,Ue),Le}function K(Le,Ue){if(T.isBuffer(Ue)){var Be=0|Q(Ue.length);return(Le=I(Le,Be),0===Le.length)?Le:(Ue.copy(Le,0,0,Be),Le)}if(Ue){if('undefined'!=typeof ArrayBuffer&&Ue.buffer instanceof ArrayBuffer||'length'in Ue)return'number'!=typeof Ue.length||ze(Ue.length)?I(Le,0):Z(Le,Ue);if('Buffer'===Ue.type&&Ne(Ue.data))return Z(Le,Ue.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function Q(Le){if(Le>=R())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+R().toString(16)+' bytes');return 0|Le}function ee(Le,Ue){if(T.isBuffer(Le))return Le.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(Le)||Le instanceof ArrayBuffer))return Le.byteLength;'string'!=typeof Le&&(Le=''+Le);var Be=Le.length;if(0===Be)return 0;for(var Ve=!1;;)switch(Ue){case'ascii':case'latin1':case'binary':return Be;case'utf8':case'utf-8':case void 0:return Re(Le).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*Be;case'hex':return Be>>>1;case'base64':return Pe(Le).length;default:if(Ve)return Re(Le).length;Ue=(''+Ue).toLowerCase(),Ve=!0;}}function te(Le,Ue,Be){var Ve=!1;if((void 0===Ue||0>Ue)&&(Ue=0),Ue>this.length)return'';if((void 0===Be||Be>this.length)&&(Be=this.length),0>=Be)return'';if(Be>>>=0,Ue>>>=0,Be<=Ue)return'';for(Le||(Le='utf8');;)switch(Le){case'hex':return _e(this,Ue,Be);case'utf8':case'utf-8':return fe(this,Ue,Be);case'ascii':return me(this,Ue,Be);case'latin1':case'binary':return be(this,Ue,Be);case'base64':return pe(this,Ue,Be);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return ye(this,Ue,Be);default:if(Ve)throw new TypeError('Unknown encoding: '+Le);Le=(Le+'').toLowerCase(),Ve=!0;}}function ne(Le,Ue,Be){var Ve=Le[Ue];Le[Ue]=Le[Be],Le[Be]=Ve}function ae(Le,Ue,Be,Ve,qe){if(0===Le.length)return-1;if('string'==typeof Be?(Ve=Be,Be=0):2147483647<Be?Be=2147483647:-2147483648>Be&&(Be=-2147483648),Be=+Be,isNaN(Be)&&(Be=qe?0:Le.length-1),0>Be&&(Be=Le.length+Be),Be>=Le.length){if(qe)return-1;Be=Le.length-1}else if(0>Be)if(qe)Be=0;else return-1;if('string'==typeof Ue&&(Ue=T.from(Ue,Ve)),T.isBuffer(Ue))return 0===Ue.length?-1:se(Le,Ue,Be,Ve,qe);if('number'==typeof Ue)return Ue&=255,T.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?qe?Uint8Array.prototype.indexOf.call(Le,Ue,Be):Uint8Array.prototype.lastIndexOf.call(Le,Ue,Be):se(Le,[Ue],Be,Ve,qe);throw new TypeError('val must be string, number or Buffer')}function se(Le,Ue,Be,Ve,qe){function $e(et,tt){return 1===Ze?et[tt]:et.readUInt16BE(tt*Ze)}var Ze=1,He=Le.length,We=Ue.length;if(void 0!==Ve&&(Ve=(Ve+'').toLowerCase(),'ucs2'===Ve||'ucs-2'===Ve||'utf16le'===Ve||'utf-16le'===Ve)){if(2>Le.length||2>Ue.length)return-1;Ze=2,He/=2,We/=2,Be/=2}var Je;if(qe){var Ke=-1;for(Je=Be;Je<He;Je++)if($e(Le,Je)!==$e(Ue,-1==Ke?0:Je-Ke))-1!=Ke&&(Je-=Je-Ke),Ke=-1;else if(-1==Ke&&(Ke=Je),Je-Ke+1===We)return Ke*Ze}else for(Be+We>He&&(Be=He-We),Je=Be;0<=Je;Je--){for(var Qe=!0,Ge=0;Ge<We;Ge++)if($e(Le,Je+Ge)!==$e(Ue,Ge)){Qe=!1;break}if(Qe)return Je}return-1}function oe(Le,Ue,Be,Ve){Be=+Be||0;var qe=Le.length-Be;Ve?(Ve=+Ve,Ve>qe&&(Ve=qe)):Ve=qe;var $e=Ue.length;if(0!=$e%2)throw new TypeError('Invalid hex string');Ve>$e/2&&(Ve=$e/2);for(var Ze=0,He;Ze<Ve;++Ze){if(He=parseInt(Ue.substr(2*Ze,2),16),isNaN(He))return Ze;Le[Be+Ze]=He}return Ze}function le(Le,Ue,Be,Ve){return Fe(Re(Ue,Le.length-Be),Le,Be,Ve)}function de(Le,Ue,Be,Ve){return Fe(Ie(Ue),Le,Be,Ve)}function ue(Le,Ue,Be,Ve){return de(Le,Ue,Be,Ve)}function he(Le,Ue,Be,Ve){return Fe(Pe(Ue),Le,Be,Ve)}function ge(Le,Ue,Be,Ve){return Fe(Te(Ue,Le.length-Be),Le,Be,Ve)}function pe(Le,Ue,Be){return 0===Ue&&Be===Le.length?Xe.fromByteArray(Le):Xe.fromByteArray(Le.slice(Ue,Be))}function fe(Le,Ue,Be){Be=Math.min(Le.length,Be);for(var Ve=[],qe=Ue;qe<Be;){var $e=Le[qe],Ze=null,He=239<$e?4:223<$e?3:191<$e?2:1;if(qe+He<=Be){var We,Je,Ke,Qe;1==He?128>$e&&(Ze=$e):2==He?(We=Le[qe+1],128==(192&We)&&(Qe=(31&$e)<<6|63&We,127<Qe&&(Ze=Qe))):3==He?(We=Le[qe+1],Je=Le[qe+2],128==(192&We)&&128==(192&Je)&&(Qe=(15&$e)<<12|(63&We)<<6|63&Je,2047<Qe&&(55296>Qe||57343<Qe)&&(Ze=Qe))):4==He?(We=Le[qe+1],Je=Le[qe+2],Ke=Le[qe+3],128==(192&We)&&128==(192&Je)&&128==(192&Ke)&&(Qe=(15&$e)<<18|(63&We)<<12|(63&Je)<<6|63&Ke,65535<Qe&&1114112>Qe&&(Ze=Qe))):void 0}null===Ze?(Ze=65533,He=1):65535<Ze&&(Ze-=65536,Ve.push(55296|1023&Ze>>>10),Ze=56320|1023&Ze),Ve.push(Ze),qe+=He}return ce(Ve)}function ce(Le){var Ue=Le.length;if(Ue<=Oe)return String.fromCharCode.apply(String,Le);for(var Be='',Ve=0;Ve<Ue;)Be+=String.fromCharCode.apply(String,Le.slice(Ve,Ve+=Oe));return Be}function me(Le,Ue,Be){var Ve='';Be=Math.min(Le.length,Be);for(var qe=Ue;qe<Be;++qe)Ve+=String.fromCharCode(127&Le[qe]);return Ve}function be(Le,Ue,Be){var Ve='';Be=Math.min(Le.length,Be);for(var qe=Ue;qe<Be;++qe)Ve+=String.fromCharCode(Le[qe]);return Ve}function _e(Le,Ue,Be){var Ve=Le.length;(!Ue||0>Ue)&&(Ue=0),(!Be||0>Be||Be>Ve)&&(Be=Ve);for(var qe='',$e=Ue;$e<Be;++$e)qe+=Ae(Le[$e]);return qe}function ye(Le,Ue,Be){for(var Ve=Le.slice(Ue,Be),qe='',$e=0;$e<Ve.length;$e+=2)qe+=String.fromCharCode(Ve[$e]+256*Ve[$e+1]);return qe}function xe(Le,Ue,Be){if(0!=Le%1||0>Le)throw new RangeError('offset is not uint');if(Le+Ue>Be)throw new RangeError('Trying to access beyond buffer length')}function we(Le,Ue,Be,Ve,qe,$e){if(!T.isBuffer(Le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ue>qe||Ue<$e)throw new RangeError('"value" argument is out of bounds');if(Be+Ve>Le.length)throw new RangeError('Index out of range')}function ke(Le,Ue,Be,Ve){0>Ue&&(Ue=65535+Ue+1);for(var qe=0,$e=Math.min(Le.length-Be,2);qe<$e;++qe)Le[Be+qe]=(Ue&255<<8*(Ve?qe:1-qe))>>>8*(Ve?qe:1-qe)}function je(Le,Ue,Be,Ve){0>Ue&&(Ue=4294967295+Ue+1);for(var qe=0,$e=Math.min(Le.length-Be,4);qe<$e;++qe)Le[Be+qe]=255&Ue>>>8*(Ve?qe:3-qe)}function ve(Le,Ue,Be,Ve){if(Be+Ve>Le.length)throw new RangeError('Index out of range');if(0>Be)throw new RangeError('Index out of range')}function Se(Le,Ue,Be,Ve,qe){return qe||ve(Le,Ue,Be,4,3.4028234663852886e38,-3.4028234663852886e38),Ye.write(Le,Ue,Be,Ve,23,4),Be+4}function Ee(Le,Ue,Be,Ve,qe){return qe||ve(Le,Ue,Be,8,1.7976931348623157e308,-1.7976931348623157e308),Ye.write(Le,Ue,Be,Ve,52,8),Be+8}function De(Le){if(Le=Ce(Le).replace(Me,''),2>Le.length)return'';for(;0!=Le.length%4;)Le+='=';return Le}function Ce(Le){return Le.trim?Le.trim():Le.replace(/^\s+|\s+$/g,'')}function Ae(Le){return 16>Le?'0'+Le.toString(16):Le.toString(16)}function Re(Le,Ue){Ue=Ue||Infinity;for(var Ve=Le.length,qe=null,$e=[],Ze=0,Be;Ze<Ve;++Ze){if(Be=Le.charCodeAt(Ze),55295<Be&&57344>Be){if(!qe){if(56319<Be){-1<(Ue-=3)&&$e.push(239,191,189);continue}else if(Ze+1===Ve){-1<(Ue-=3)&&$e.push(239,191,189);continue}qe=Be;continue}if(56320>Be){-1<(Ue-=3)&&$e.push(239,191,189),qe=Be;continue}Be=(qe-55296<<10|Be-56320)+65536}else qe&&-1<(Ue-=3)&&$e.push(239,191,189);if(qe=null,128>Be){if(0>(Ue-=1))break;$e.push(Be)}else if(2048>Be){if(0>(Ue-=2))break;$e.push(192|Be>>6,128|63&Be)}else if(65536>Be){if(0>(Ue-=3))break;$e.push(224|Be>>12,128|63&Be>>6,128|63&Be)}else if(1114112>Be){if(0>(Ue-=4))break;$e.push(240|Be>>18,128|63&Be>>12,128|63&Be>>6,128|63&Be)}else throw new Error('Invalid code point')}return $e}function Ie(Le){for(var Ue=[],Be=0;Be<Le.length;++Be)Ue.push(255&Le.charCodeAt(Be));return Ue}function Te(Le,Ue){for(var $e=[],Ze=0,Be,Ve,qe;Ze<Le.length&&!(0>(Ue-=2));++Ze)Be=Le.charCodeAt(Ze),Ve=Be>>8,qe=Be%256,$e.push(qe),$e.push(Ve);return $e}function Pe(Le){return Xe.toByteArray(De(Le))}function Fe(Le,Ue,Be,Ve){for(var qe=0;qe<Ve&&!(qe+Be>=Ue.length||qe>=Le.length);++qe)Ue[qe+Be]=Le[qe];return qe}function ze(Le){return Le!==Le}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var Xe=E(42),Ye=E(43),Ne=E(45);S.Buffer=T,S.SlowBuffer=function(Le){return+Le!=Le&&(Le=0),T.alloc(+Le)},S.INSPECT_MAX_BYTES=50,T.TYPED_ARRAY_SUPPORT=D.TYPED_ARRAY_SUPPORT===void 0?function(){try{var Le=new Uint8Array(1);return Le.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===Le.foo()&&'function'==typeof Le.subarray&&0===Le.subarray(1,1).byteLength}catch(Ue){return!1}}():D.TYPED_ARRAY_SUPPORT,S.kMaxLength=R(),T.poolSize=8192,T._augment=function(Le){return Le.__proto__=T.prototype,Le},T.from=function(Le,Ue,Be){return P(null,Le,Ue,Be)},T.TYPED_ARRAY_SUPPORT&&(T.prototype.__proto__=Uint8Array.prototype,T.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&T[Symbol.species]===T&&Object.defineProperty(T,Symbol.species,{value:null,configurable:!0})),T.alloc=function(Le,Ue,Be){return O(null,Le,Ue,Be)},T.allocUnsafe=function(Le){return M(null,Le)},T.allocUnsafeSlow=function(Le){return M(null,Le)},T.isBuffer=function(Ue){return!!(null!=Ue&&Ue._isBuffer)},T.compare=function(Ue,Be){if(!T.isBuffer(Ue)||!T.isBuffer(Be))throw new TypeError('Arguments must be Buffers');if(Ue===Be)return 0;for(var Ve=Ue.length,qe=Be.length,$e=0,Ze=Math.min(Ve,qe);$e<Ze;++$e)if(Ue[$e]!==Be[$e]){Ve=Ue[$e],qe=Be[$e];break}return Ve<qe?-1:qe<Ve?1:0},T.isEncoding=function(Ue){switch((Ue+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},T.concat=function(Ue,Be){if(!Ne(Ue))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Ue.length)return T.alloc(0);var Ve;if(Be===void 0)for(Be=0,Ve=0;Ve<Ue.length;++Ve)Be+=Ue[Ve].length;var qe=T.allocUnsafe(Be),$e=0;for(Ve=0;Ve<Ue.length;++Ve){var Ze=Ue[Ve];if(!T.isBuffer(Ze))throw new TypeError('"list" argument must be an Array of Buffers');Ze.copy(qe,$e),$e+=Ze.length}return qe},T.byteLength=ee,T.prototype._isBuffer=!0,T.prototype.swap16=function(){var Ue=this.length;if(0!=Ue%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var Be=0;Be<Ue;Be+=2)ne(this,Be,Be+1);return this},T.prototype.swap32=function(){var Ue=this.length;if(0!=Ue%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var Be=0;Be<Ue;Be+=4)ne(this,Be,Be+3),ne(this,Be+1,Be+2);return this},T.prototype.swap64=function(){var Ue=this.length;if(0!=Ue%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var Be=0;Be<Ue;Be+=8)ne(this,Be,Be+7),ne(this,Be+1,Be+6),ne(this,Be+2,Be+5),ne(this,Be+3,Be+4);return this},T.prototype.toString=function(){var Ue=0|this.length;return 0==Ue?'':0===arguments.length?fe(this,0,Ue):te.apply(this,arguments)},T.prototype.equals=function(Ue){if(!T.isBuffer(Ue))throw new TypeError('Argument must be a Buffer');return this===Ue||0===T.compare(this,Ue)},T.prototype.inspect=function(){var Ue='',Be=S.INSPECT_MAX_BYTES;return 0<this.length&&(Ue=this.toString('hex',0,Be).match(/.{2}/g).join(' '),this.length>Be&&(Ue+=' ... ')),'<Buffer '+Ue+'>'},T.prototype.compare=function(Ue,Be,Ve,qe,$e){if(!T.isBuffer(Ue))throw new TypeError('Argument must be a Buffer');if(void 0===Be&&(Be=0),void 0===Ve&&(Ve=Ue?Ue.length:0),void 0===qe&&(qe=0),void 0===$e&&($e=this.length),0>Be||Ve>Ue.length||0>qe||$e>this.length)throw new RangeError('out of range index');if(qe>=$e&&Be>=Ve)return 0;if(qe>=$e)return-1;if(Be>=Ve)return 1;if(Be>>>=0,Ve>>>=0,qe>>>=0,$e>>>=0,this===Ue)return 0;for(var Ze=$e-qe,He=Ve-Be,We=Math.min(Ze,He),Je=this.slice(qe,$e),Ke=Ue.slice(Be,Ve),Qe=0;Qe<We;++Qe)if(Je[Qe]!==Ke[Qe]){Ze=Je[Qe],He=Ke[Qe];break}return Ze<He?-1:He<Ze?1:0},T.prototype.includes=function(Ue,Be,Ve){return-1!==this.indexOf(Ue,Be,Ve)},T.prototype.indexOf=function(Ue,Be,Ve){return ae(this,Ue,Be,Ve,!0)},T.prototype.lastIndexOf=function(Ue,Be,Ve){return ae(this,Ue,Be,Ve,!1)},T.prototype.write=function(Ue,Be,Ve,qe){if(void 0===Be)qe='utf8',Ve=this.length,Be=0;else if(void 0===Ve&&'string'==typeof Be)qe=Be,Ve=this.length,Be=0;else if(isFinite(Be))Be|=0,isFinite(Ve)?(Ve|=0,void 0===qe&&(qe='utf8')):(qe=Ve,Ve=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var $e=this.length-Be;if((void 0===Ve||Ve>$e)&&(Ve=$e),0<Ue.length&&(0>Ve||0>Be)||Be>this.length)throw new RangeError('Attempt to write outside buffer bounds');qe||(qe='utf8');for(var Ze=!1;;)switch(qe){case'hex':return oe(this,Ue,Be,Ve);case'utf8':case'utf-8':return le(this,Ue,Be,Ve);case'ascii':return de(this,Ue,Be,Ve);case'latin1':case'binary':return ue(this,Ue,Be,Ve);case'base64':return he(this,Ue,Be,Ve);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return ge(this,Ue,Be,Ve);default:if(Ze)throw new TypeError('Unknown encoding: '+qe);qe=(''+qe).toLowerCase(),Ze=!0;}},T.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var Oe=4096;T.prototype.slice=function(Ue,Be){var Ve=this.length;Ue=~~Ue,Be=Be===void 0?Ve:~~Be,0>Ue?(Ue+=Ve,0>Ue&&(Ue=0)):Ue>Ve&&(Ue=Ve),0>Be?(Be+=Ve,0>Be&&(Be=0)):Be>Ve&&(Be=Ve),Be<Ue&&(Be=Ue);var qe;if(T.TYPED_ARRAY_SUPPORT)qe=this.subarray(Ue,Be),qe.__proto__=T.prototype;else{var $e=Be-Ue;qe=new T($e,void 0);for(var Ze=0;Ze<$e;++Ze)qe[Ze]=this[Ze+Ue]}return qe},T.prototype.readUIntLE=function(Ue,Be,Ve){Ue|=0,Be|=0,Ve||xe(Ue,Be,this.length);for(var qe=this[Ue],$e=1,Ze=0;++Ze<Be&&($e*=256);)qe+=this[Ue+Ze]*$e;return qe},T.prototype.readUIntBE=function(Ue,Be,Ve){Ue|=0,Be|=0,Ve||xe(Ue,Be,this.length);for(var qe=this[Ue+--Be],$e=1;0<Be&&($e*=256);)qe+=this[Ue+--Be]*$e;return qe},T.prototype.readUInt8=function(Ue,Be){return Be||xe(Ue,1,this.length),this[Ue]},T.prototype.readUInt16LE=function(Ue,Be){return Be||xe(Ue,2,this.length),this[Ue]|this[Ue+1]<<8},T.prototype.readUInt16BE=function(Ue,Be){return Be||xe(Ue,2,this.length),this[Ue]<<8|this[Ue+1]},T.prototype.readUInt32LE=function(Ue,Be){return Be||xe(Ue,4,this.length),(this[Ue]|this[Ue+1]<<8|this[Ue+2]<<16)+16777216*this[Ue+3]},T.prototype.readUInt32BE=function(Ue,Be){return Be||xe(Ue,4,this.length),16777216*this[Ue]+(this[Ue+1]<<16|this[Ue+2]<<8|this[Ue+3])},T.prototype.readIntLE=function(Ue,Be,Ve){Ue|=0,Be|=0,Ve||xe(Ue,Be,this.length);for(var qe=this[Ue],$e=1,Ze=0;++Ze<Be&&($e*=256);)qe+=this[Ue+Ze]*$e;return $e*=128,qe>=$e&&(qe-=Math.pow(2,8*Be)),qe},T.prototype.readIntBE=function(Ue,Be,Ve){Ue|=0,Be|=0,Ve||xe(Ue,Be,this.length);for(var qe=Be,$e=1,Ze=this[Ue+--qe];0<qe&&($e*=256);)Ze+=this[Ue+--qe]*$e;return $e*=128,Ze>=$e&&(Ze-=Math.pow(2,8*Be)),Ze},T.prototype.readInt8=function(Ue,Be){return Be||xe(Ue,1,this.length),128&this[Ue]?-1*(255-this[Ue]+1):this[Ue]},T.prototype.readInt16LE=function(Ue,Be){Be||xe(Ue,2,this.length);var Ve=this[Ue]|this[Ue+1]<<8;return 32768&Ve?4294901760|Ve:Ve},T.prototype.readInt16BE=function(Ue,Be){Be||xe(Ue,2,this.length);var Ve=this[Ue+1]|this[Ue]<<8;return 32768&Ve?4294901760|Ve:Ve},T.prototype.readInt32LE=function(Ue,Be){return Be||xe(Ue,4,this.length),this[Ue]|this[Ue+1]<<8|this[Ue+2]<<16|this[Ue+3]<<24},T.prototype.readInt32BE=function(Ue,Be){return Be||xe(Ue,4,this.length),this[Ue]<<24|this[Ue+1]<<16|this[Ue+2]<<8|this[Ue+3]},T.prototype.readFloatLE=function(Ue,Be){return Be||xe(Ue,4,this.length),Ye.read(this,Ue,!0,23,4)},T.prototype.readFloatBE=function(Ue,Be){return Be||xe(Ue,4,this.length),Ye.read(this,Ue,!1,23,4)},T.prototype.readDoubleLE=function(Ue,Be){return Be||xe(Ue,8,this.length),Ye.read(this,Ue,!0,52,8)},T.prototype.readDoubleBE=function(Ue,Be){return Be||xe(Ue,8,this.length),Ye.read(this,Ue,!1,52,8)},T.prototype.writeUIntLE=function(Ue,Be,Ve,qe){if(Ue=+Ue,Be|=0,Ve|=0,!qe){var $e=Math.pow(2,8*Ve)-1;we(this,Ue,Be,Ve,$e,0)}var Ze=1,He=0;for(this[Be]=255&Ue;++He<Ve&&(Ze*=256);)this[Be+He]=255&Ue/Ze;return Be+Ve},T.prototype.writeUIntBE=function(Ue,Be,Ve,qe){if(Ue=+Ue,Be|=0,Ve|=0,!qe){var $e=Math.pow(2,8*Ve)-1;we(this,Ue,Be,Ve,$e,0)}var Ze=Ve-1,He=1;for(this[Be+Ze]=255&Ue;0<=--Ze&&(He*=256);)this[Be+Ze]=255&Ue/He;return Be+Ve},T.prototype.writeUInt8=function(Ue,Be,Ve){return Ue=+Ue,Be|=0,Ve||we(this,Ue,Be,1,255,0),T.TYPED_ARRAY_SUPPORT||(Ue=Math.floor(Ue)),this[Be]=255&Ue,Be+1},T.prototype.writeUInt16LE=function(Ue,Be,Ve){return Ue=+Ue,Be|=0,Ve||we(this,Ue,Be,2,65535,0),T.TYPED_ARRAY_SUPPORT?(this[Be]=255&Ue,this[Be+1]=Ue>>>8):ke(this,Ue,Be,!0),Be+2},T.prototype.writeUInt16BE=function(Ue,Be,Ve){return Ue=+Ue,Be|=0,Ve||we(this,Ue,Be,2,65535,0),T.TYPED_ARRAY_SUPPORT?(this[Be]=Ue>>>8,this[Be+1]=255&Ue):ke(this,Ue,Be,!1),Be+2},T.prototype.writeUInt32LE=function(Ue,Be,Ve){return Ue=+Ue,Be|=0,Ve||we(this,Ue,Be,4,4294967295,0),T.TYPED_ARRAY_SUPPORT?(this[Be+3]=Ue>>>24,this[Be+2]=Ue>>>16,this[Be+1]=Ue>>>8,this[Be]=255&Ue):je(this,Ue,Be,!0),Be+4},T.prototype.writeUInt32BE=function(Ue,Be,Ve){return Ue=+Ue,Be|=0,Ve||we(this,Ue,Be,4,4294967295,0),T.TYPED_ARRAY_SUPPORT?(this[Be]=Ue>>>24,this[Be+1]=Ue>>>16,this[Be+2]=Ue>>>8,this[Be+3]=255&Ue):je(this,Ue,Be,!1),Be+4},T.prototype.writeIntLE=function(Ue,Be,Ve,qe){if(Ue=+Ue,Be|=0,!qe){var $e=Math.pow(2,8*Ve-1);we(this,Ue,Be,Ve,$e-1,-$e)}var Ze=0,He=1,We=0;for(this[Be]=255&Ue;++Ze<Ve&&(He*=256);)0>Ue&&0==We&&0!==this[Be+Ze-1]&&(We=1),this[Be+Ze]=255&(Ue/He>>0)-We;return Be+Ve},T.prototype.writeIntBE=function(Ue,Be,Ve,qe){if(Ue=+Ue,Be|=0,!qe){var $e=Math.pow(2,8*Ve-1);we(this,Ue,Be,Ve,$e-1,-$e)}var Ze=Ve-1,He=1,We=0;for(this[Be+Ze]=255&Ue;0<=--Ze&&(He*=256);)0>Ue&&0==We&&0!==this[Be+Ze+1]&&(We=1),this[Be+Ze]=255&(Ue/He>>0)-We;return Be+Ve},T.prototype.writeInt8=function(Ue,Be,Ve){return Ue=+Ue,Be|=0,Ve||we(this,Ue,Be,1,127,-128),T.TYPED_ARRAY_SUPPORT||(Ue=Math.floor(Ue)),0>Ue&&(Ue=255+Ue+1),this[Be]=255&Ue,Be+1},T.prototype.writeInt16LE=function(Ue,Be,Ve){return Ue=+Ue,Be|=0,Ve||we(this,Ue,Be,2,32767,-32768),T.TYPED_ARRAY_SUPPORT?(this[Be]=255&Ue,this[Be+1]=Ue>>>8):ke(this,Ue,Be,!0),Be+2},T.prototype.writeInt16BE=function(Ue,Be,Ve){return Ue=+Ue,Be|=0,Ve||we(this,Ue,Be,2,32767,-32768),T.TYPED_ARRAY_SUPPORT?(this[Be]=Ue>>>8,this[Be+1]=255&Ue):ke(this,Ue,Be,!1),Be+2},T.prototype.writeInt32LE=function(Ue,Be,Ve){return Ue=+Ue,Be|=0,Ve||we(this,Ue,Be,4,2147483647,-2147483648),T.TYPED_ARRAY_SUPPORT?(this[Be]=255&Ue,this[Be+1]=Ue>>>8,this[Be+2]=Ue>>>16,this[Be+3]=Ue>>>24):je(this,Ue,Be,!0),Be+4},T.prototype.writeInt32BE=function(Ue,Be,Ve){return Ue=+Ue,Be|=0,Ve||we(this,Ue,Be,4,2147483647,-2147483648),0>Ue&&(Ue=4294967295+Ue+1),T.TYPED_ARRAY_SUPPORT?(this[Be]=Ue>>>24,this[Be+1]=Ue>>>16,this[Be+2]=Ue>>>8,this[Be+3]=255&Ue):je(this,Ue,Be,!1),Be+4},T.prototype.writeFloatLE=function(Ue,Be,Ve){return Se(this,Ue,Be,!0,Ve)},T.prototype.writeFloatBE=function(Ue,Be,Ve){return Se(this,Ue,Be,!1,Ve)},T.prototype.writeDoubleLE=function(Ue,Be,Ve){return Ee(this,Ue,Be,!0,Ve)},T.prototype.writeDoubleBE=function(Ue,Be,Ve){return Ee(this,Ue,Be,!1,Ve)},T.prototype.copy=function(Ue,Be,Ve,qe){if(Ve||(Ve=0),qe||0===qe||(qe=this.length),Be>=Ue.length&&(Be=Ue.length),Be||(Be=0),0<qe&&qe<Ve&&(qe=Ve),qe===Ve)return 0;if(0===Ue.length||0===this.length)return 0;if(0>Be)throw new RangeError('targetStart out of bounds');if(0>Ve||Ve>=this.length)throw new RangeError('sourceStart out of bounds');if(0>qe)throw new RangeError('sourceEnd out of bounds');qe>this.length&&(qe=this.length),Ue.length-Be<qe-Ve&&(qe=Ue.length-Be+Ve);var $e=qe-Ve,Ze;if(this===Ue&&Ve<Be&&Be<qe)for(Ze=$e-1;0<=Ze;--Ze)Ue[Ze+Be]=this[Ze+Ve];else if(1e3>$e||!T.TYPED_ARRAY_SUPPORT)for(Ze=0;Ze<$e;++Ze)Ue[Ze+Be]=this[Ze+Ve];else Uint8Array.prototype.set.call(Ue,this.subarray(Ve,Ve+$e),Be);return $e},T.prototype.fill=function(Ue,Be,Ve,qe){if('string'==typeof Ue){if('string'==typeof Be?(qe=Be,Be=0,Ve=this.length):'string'==typeof Ve&&(qe=Ve,Ve=this.length),1===Ue.length){var $e=Ue.charCodeAt(0);256>$e&&(Ue=$e)}if(void 0!==qe&&'string'!=typeof qe)throw new TypeError('encoding must be a string');if('string'==typeof qe&&!T.isEncoding(qe))throw new TypeError('Unknown encoding: '+qe)}else'number'==typeof Ue&&(Ue&=255);if(0>Be||this.length<Be||this.length<Ve)throw new RangeError('Out of range index');if(Ve<=Be)return this;Be>>>=0,Ve=Ve===void 0?this.length:Ve>>>0,Ue||(Ue=0);var Ze;if('number'==typeof Ue)for(Ze=Be;Ze<Ve;++Ze)this[Ze]=Ue;else{var He=T.isBuffer(Ue)?Ue:Re(new T(Ue,qe).toString()),We=He.length;for(Ze=0;Ze<Ve-Be;++Ze)this[Ze+Be]=He[Ze%We]}return this};var Me=/[^+\/0-9A-Za-z-_]/g}).call(S,E(94))},function(_){'use strict';var D=Object.prototype.hasOwnProperty,C=Object.prototype.toString,R=function(P){return'function'==typeof Array.isArray?Array.isArray(P):'[object Array]'===C.call(P)},I=function(P){if(!P||'[object Object]'!==C.call(P))return!1;var F=D.call(P,'constructor'),O=P.constructor&&P.constructor.prototype&&D.call(P.constructor.prototype,'isPrototypeOf');if(P.constructor&&!F&&!O)return!1;for(var M in P);return'undefined'==typeof M||D.call(P,M)};_.exports=function T(){var W=arguments[0],K=1,Q=arguments.length,G=!1,P,F,O,M,$,Z;for('boolean'==typeof W?(G=W,W=arguments[1]||{},K=2):('object'!=typeof W&&'function'!=typeof W||null==W)&&(W={});K<Q;++K)if(P=arguments[K],null!=P)for(F in P)O=W[F],M=P[F],W!==M&&(G&&M&&(I(M)||($=R(M)))?($?($=!1,Z=O&&R(O)?O:[]):Z=O&&I(O)?O:{},W[F]=T(G,Z,M)):'undefined'!=typeof M&&(W[F]=M));return W}},function(_,S,E){'use strict';function D(){function M(ge){for(var pe=ge.length,fe=Array(pe),ce=0;ce<pe;ce++)fe[ce]=parseFloat(ge[ce]);return fe}function $(){}function W(ge){return ge.toLowerCase().replace(/[^a-z0-9]/g,'')}function K(ge){return-1!==he.indexOf(ge)}function Q(ge){var pe=ge.spectra,fe=pe.length,ce={times:Array(fe),series:[{name:'ms',dimension:2,data:Array(fe)}]},me,be=[];for(me=0;me<he.length;me++){var _e=W(he[me]);pe[0][_e]&&(be.push(_e),ce.series.push({name:_e,dimension:1,data:Array(fe)}))}for(me=0;me<fe;me++){var ye=pe[me];ce.times[me]=ye.pageValue;for(var xe=0;xe<be.length;xe++)ce.series[xe+1].data[me]=parseFloat(ye[be[xe]]);ye.data&&(ce.series[0].data[me]=[ye.data[0].x,ye.data[0].y])}ge.gcms=ce}function G(ge){var pe=ge.spectra,fe=[],ce;for(ce=0;ce<he.length;ce++){var me=W(he[ce]);pe[0][me]&&fe.push(me)}if(0!==fe.length){var be={gc:{},ms:[]};for(ce=0;ce<fe.length;ce++)be.gc[fe[ce]]=[];for(ce=0;ce<pe.length;ce++){for(var _e=pe[ce],ye=0;ye<fe.length;ye++)be.gc[fe[ye]].push(_e.pageValue),be.gc[fe[ye]].push(parseFloat(_e[fe[ye]]));_e.data&&(be.ms[ce]=_e.data[0])}ge.gcms=be}}function ee(ge,pe){if(pe.xFactor||(pe.xFactor=1),pe.yFactor||(pe.yFactor=1),pe.observeFrequency&&pe.xUnit&&'HZ'===pe.xUnit.toUpperCase()&&(pe.xUnit='PPM',pe.xFactor/=pe.observeFrequency,pe.firstX/=pe.observeFrequency,pe.lastX/=pe.observeFrequency,pe.deltaX/=pe.observeFrequency),ge.shiftOffsetVal){var fe=pe.firstX-ge.shiftOffsetVal;pe.firstX-=fe,pe.lastX-=fe}}function te(ge){ge=ge.sort(ne);var pe=ge.length;return ge[Math.floor(pe/2)]}function ne(ge,pe){return ge-pe}function ae(ge){for(var pe=ge[0].data[0][0],fe=pe,ce=ge.length,me=ge[0].data[0].length/2,be=Array(ce),_e=0;_e<ce;_e++){be[_e]=Array(me);for(var ye=ge[_e].data[0],xe=0,we;xe<me;xe++)we=ye[2*xe+1],be[_e][xe]=we,we<pe&&(pe=we),we>fe&&(fe=we)}return{z:be,minX:ge[0].data[0][0],maxX:ge[0].data[0][ge[0].data[0].length-2],minY:ge[0].pageValue,maxY:ge[ce-1].pageValue,minZ:pe,maxZ:fe,noise:te(be[0].map(Math.abs))}}function se(ge,pe){var fe=ae(ge.spectra);pe.noContour||(ge.contourLines=oe(fe,pe),delete fe.z),ge.minMax=fe}function oe(ge,pe){for(var fe=ge.noise,ce=ge.z,me=pe.nbContourLevels||7,be=void 0===pe.noiseMultiplier?5:pe.noiseMultiplier,Ee=ce.length,De=ce[0].length,Te=ge.minX,Pe=ge.maxX,Fe=(Pe-Te)/(De-1),ze=ge.minY,Xe=ge.maxY,Ye=(Xe-ze)/(Ee-1),Ne=ge.minZ,Oe=ge.maxZ,Me=2*me,Le=Array(Me),Be=0,_e,ye,xe,we,ke,je,ve,Se,Ce,Ae,Re,Ie,Ue,Ve;Be<Me;Be++){Ve={},Le[Be]=Ve;var qe=Be%2,$e=(Oe-be*fe)*Math.exp((Be>>1)-me);Ue=0==qe?$e+be*fe:0-$e-be*fe;var Ze=[];if(Ve.zValue=Ue,Ve.lines=Ze,!(Ue<=Ne||Ue>=Oe))for(var He=0;He<Ee-1;He++)for(var We=ce[He],Je=ce[He+1],Ke=0;Ke<De-1;Ke++)_e=We[Ke],ye=We[Ke+1],xe=Je[Ke],we=Je[Ke+1],ke=_e>Ue,je=ye>Ue,ve=xe>Ue,Se=we>Ue,ke!=je&&ke!=ve&&(Ce=Ke+(Ue-_e)/(ye-_e),Ae=He,Re=Ke,Ie=He+(Ue-_e)/(xe-_e),Ze.push(Ce*Fe+Te),Ze.push(Ae*Ye+ze),Ze.push(Re*Fe+Te),Ze.push(Ie*Ye+ze)),Se!=je&&Se!=ve&&(Ce=Ke+1,Ae=He+1-(Ue-we)/(ye-we),Re=Ke+1-(Ue-we)/(xe-we),Ie=He+1,Ze.push(Ce*Fe+Te),Ze.push(Ae*Ye+ze),Ze.push(Re*Fe+Te),Ze.push(Ie*Ye+ze)),je!=ve&&(Ce=(Ke+1-(Ue-ye)/(xe-ye))*Fe+Te,Ae=(He+(Ue-ye)/(xe-ye))*Ye+ze,je!=ke&&(Re=Ke+1-(Ue-ye)/(_e-ye),Ie=He,Ze.push(Ce),Ze.push(Ae),Ze.push(Re*Fe+Te),Ze.push(Ie*Ye+ze)),ve!=ke&&(Re=Ke,Ie=He+1-(Ue-xe)/(_e-xe),Ze.push(Ce),Ze.push(Ae),Ze.push(Re*Fe+Te),Ze.push(Ie*Ye+ze)),je!=Se&&(Re=Ke+1,Ie=He+(Ue-ye)/(we-ye),Ze.push(Ce),Ze.push(Ae),Ze.push(Re*Fe+Te),Ze.push(Ie*Ye+ze)),ve!=Se&&(Re=Ke+(Ue-xe)/(we-xe),Ie=He+1,Ze.push(Ce),Ze.push(Ae),Ze.push(Re*Fe+Te),Ze.push(Ie*Ye+ze)))}return{minX:ge.minX,maxX:ge.maxX,minY:ge.minY,maxY:ge.maxY,segments:Le}}function le(ge,pe){var fe=ge.yFactor,ce=ge.deltaX;ge.isXYdata=!0;var me=[];ge.data=[me];for(var be=ge.firstX,_e=ge.firstY,ye=!1,xe=0,we;xe<pe.length;xe++)if(we=pe.charCodeAt(xe),13===we||10===we)ye=!0;else if(ye)break;for(var ke=!0,je=!1,ve=!1,Se=0,Ee=!1,De=!1,Ce=0,Ae=!1,Re=!1,Ie=!1,Te=0,we;xe<=pe.length;xe++)if(we=xe===pe.length?13:pe.charCodeAt(xe),De)(13===we||10===we)&&(ke=!0,De=!1);else if(57>=we&&48<=we)Re=!0,0<Te?Ce+=(we-48)/Math.pow(10,Te++):(Ce*=10,Ce+=we-48);else if(44===we||46===we)Re=!0,Te++;else{if(Re){if(ke)ke=!1,ve&&(Ie=!0);else if(Ie)Ie=!1;else{je&&(Se=Ae?0-Ce:Ce,ve=!0,je=!1);for(var Pe=Ee?Ce-1:1,Fe=0;Fe<Pe;Fe++)ve?_e+=Se:_e=Ae?0-Ce:Ce,me.push(be),me.push(_e*fe),be+=ce}Ae=!1,Ce=0,Te=0,Re=!1,Ee=!1}if(74>we&&63<we)Re=!0,ve=!1,Ce=we-64;else if(96<we&&106>we)Re=!0,ve=!1,Ce=we-96,Ae=!0;else if(115===we)Re=!0,Ee=!0,Ce=9;else if(82<we&&91>we)Re=!0,Ee=!0,Ce=we-82;else if(73<we&&83>we)Re=!0,je=!0,Ce=we-73;else if(105<we&&115>we)Re=!0,je=!0,Ce=we-105,Ae=!0;else if(36===we&&36===pe.charCodeAt(xe+1))Re=!0,De=!0;else if(37===we)Re=!0,je=!0,Ce=0,Ae=!1;else if(45===we){var ze=pe.charCodeAt(xe+1);(48<=ze&&57>=ze||44===ze||46===ze)&&(Re=!0,ve=!1,Ae=!0)}else(13===we||10===we)&&(ke=!0,De=!1)}}function de(ge,pe,fe){var ce=/\$\$.*/,me=/[,\t ]+/;ge.isPeaktable=!0;var be,_e,ye,xe,we,ke=[];ge.data=[ke];var je=pe.split(/,? *,?[;\r\n]+ */);for(be=1,_e=je.length;be<_e;be++)if(we=je[be].trim().replace(ce,'').split(me),0==we.length%2)for(ye=0,xe=we.length;ye<xe;ye+=2)ke.push(parseFloat(we[ye])*ge.xFactor),ke.push(parseFloat(we[ye+1])*ge.yFactor);else fe.logs.push('Format error: '+we)}var ue=/[, \t]{1,}/,he=['TIC','.RIC','SCANNUMBER'];return function(ge,pe){pe=pe||{};var fe=/^$/;pe.keepRecordsRegExp&&(fe=pe.keepRecordsRegExp);var ce=!pe.withoutXY,me=Date.now(),be={},De={},_e,ye,xe,we,ke,je,ve,Se,Ee;De.profiling=[],De.logs=[];var Ce=[];De.spectra=Ce,De.info={};var Ae=new $;if('string'!=typeof ge)return De;for(De.profiling&&De.profiling.push({action:'Before split to LDRS',time:Date.now()-me}),we=ge.split(/[\r\n]+##/),De.profiling&&De.profiling.push({action:'Split to LDRS',time:Date.now()-me}),we[0]&&(we[0]=we[0].replace(/^[\r\n ]*##/,'')),(ke=0,je=we.length);ke<je;ke++){if(_e=we[ke],ve=_e.indexOf('='),0<ve?(ye=_e.substring(0,ve),xe=_e.substring(ve+1).trim()):(ye=_e,xe=''),ye=ye.replace(/[_ -]/g,'').toUpperCase(),'DATATABLE'===ye&&(Se=xe.indexOf('\n'),-1===Se&&(Se=xe.indexOf('\r')),0<Se)){var Re=-1,Ie=-1;if(Ee=xe.substring(0,Se).split(/[ ,;\t]+/),0<Ee[0].indexOf('++')){var Te=Ee[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,'$1'),Pe=Ee[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,'$1');Re=be.symbol.indexOf(Te),Ie=be.symbol.indexOf(Pe)}-1===Re&&(Re=0),-1===Ie&&(Ie=0),be.first&&(be.first.length>Re&&(Ae.firstX=be.first[Re]),be.first.length>Ie&&(Ae.firstY=be.first[Ie])),be.last&&(be.last.length>Re&&(Ae.lastX=be.last[Re]),be.last.length>Ie&&(Ae.lastY=be.last[Ie])),be.vardim&&be.vardim.length>Re&&(Ae.nbPoints=be.vardim[Re]),be.factor&&(be.factor.length>Re&&(Ae.xFactor=be.factor[Re]),be.factor.length>Ie&&(Ae.yFactor=be.factor[Ie])),be.units&&(be.units.length>Re&&(Ae.xUnit=be.units[Re]),be.units.length>Ie&&(Ae.yUnit=be.units[Ie])),Ae.datatable=Ee[0],Ee[1]&&-1<Ee[1].indexOf('PEAKS')?ye='PEAKTABLE':Ee[1]&&(Ee[1].indexOf('XYDATA')||0<Ee[0].indexOf('++'))&&(ye='XYDATA',Ae.deltaX=(Ae.lastX-Ae.firstX)/(Ae.nbPoints-1))}if('XYDATA'===ye){ce&&(ee(De,Ae),xe.match(/.*\+\+.*/)?!1===pe.fastParse?T(Ae,xe,De):(!Ae.deltaX&&(Ae.deltaX=(Ae.lastX-Ae.firstX)/(Ae.nbPoints-1)),le(Ae,xe,De)):de(Ae,xe,De),Ce.push(Ae),Ae=new $);continue}else if('PEAKTABLE'===ye){ce&&(ee(De,Ae),de(Ae,xe,De),Ce.push(Ae),Ae=new $);continue}if('TITLE'===ye)Ae.title=xe;else if('DATATYPE'===ye)Ae.dataType=xe,-1<xe.indexOf('nD')&&(De.twoD=!0);else if('NTUPLES'===ye)-1<xe.indexOf('nD')&&(De.twoD=!0);else if('XUNITS'===ye)Ae.xUnit=xe;else if('YUNITS'===ye)Ae.yUnit=xe;else if('FIRSTX'===ye)Ae.firstX=parseFloat(xe);else if('LASTX'===ye)Ae.lastX=parseFloat(xe);else if('FIRSTY'===ye)Ae.firstY=parseFloat(xe);else if('LASTY'===ye)Ae.lastY=parseFloat(xe);else if('NPOINTS'===ye)Ae.nbPoints=parseFloat(xe);else if('XFACTOR'===ye)Ae.xFactor=parseFloat(xe);else if('YFACTOR'===ye)Ae.yFactor=parseFloat(xe);else if('DELTAX'===ye)Ae.deltaX=parseFloat(xe);else if('.OBSERVEFREQUENCY'===ye||'$SFO1'===ye)Ae.observeFrequency||(Ae.observeFrequency=parseFloat(xe));else if('.OBSERVENUCLEUS'===ye)Ae.xType||(De.xType=xe.replace(/[^a-zA-Z0-9]/g,''));else if('$SFO2'===ye)De.indirectFrequency||(De.indirectFrequency=parseFloat(xe));else if('$OFFSET'===ye)De.shiftOffsetNum=0,De.shiftOffsetVal||(De.shiftOffsetVal=parseFloat(xe));else if('$REFERENCEPOINT'===ye);else if('VARNAME'===ye)be.varname=xe.split(ue);else if('SYMBOL'===ye)be.symbol=xe.split(ue);else if('VARTYPE'===ye)be.vartype=xe.split(ue);else if('VARFORM'===ye)be.varform=xe.split(ue);else if('VARDIM'===ye)be.vardim=M(xe.split(ue));else if('UNITS'===ye)be.units=xe.split(ue);else if('FACTOR'===ye)be.factor=M(xe.split(ue));else if('FIRST'===ye)be.first=M(xe.split(ue));else if('LAST'===ye)be.last=M(xe.split(ue));else if('MIN'===ye)be.min=M(xe.split(ue));else if('MAX'===ye)be.max=M(xe.split(ue));else if('.NUCLEUS'===ye)De.twoD&&(De.yType=xe.split(ue)[0]);else if('PAGE'===ye){Ae.page=xe.trim(),Ae.pageValue=parseFloat(xe.replace(/^.*=/,'')),Ae.pageSymbol=Ae.page.replace(/=.*/,'');var Fe=be.symbol.indexOf(Ae.pageSymbol),ze='';be.units&&be.units[Fe]&&(ze=be.units[Fe]),De.indirectFrequency&&'PPM'!=ze&&(Ae.pageValue/=De.indirectFrequency)}else'RETENTIONTIME'===ye?Ae.pageValue=parseFloat(xe):K(ye)&&(Ae[W(ye)]=xe);ye.match(fe)&&(De.info[ye]=xe.trim())}if(De.profiling&&De.profiling.push({action:'Finished parsing',time:Date.now()-me}),0<Object.keys(be).length){for(var Xe=[],Ye=Object.keys(be),ke=0;ke<Ye.length;ke++)for(var Ne=Ye[ke],Oe=be[Ne],Me=0;Me<Oe.length;Me++)Xe[Me]||(Xe[Me]={}),Xe[Me][Ne]=Oe[Me];De.ntuples=Xe}De.twoD&&ce&&(se(De,pe),De.profiling&&De.profiling.push({action:'Finished countour plot calculation',time:Date.now()-me}),!pe.keepSpectra&&delete De.spectra);var Le=1<Ce.length&&(!Ce[0].dataType||Ce[0].dataType.match(/.*mass.*/i));if(Le&&pe.newGCMS&&(pe.xy=!0),pe.xy&&ce&&0<Ce.length)for(var ke=0,Ae;ke<Ce.length;ke++)if(Ae=Ce[ke],0<Ae.data.length)for(var Me=0;Me<Ae.data.length;Me++){for(var Ue=Ae.data[Me],Be={x:Array(Ue.length/2),y:Array(Ue.length/2)},Ve=0;Ve<Ue.length;Ve+=2)Be.x[Ve/2]=Ue[Ve],Be.y[Ve/2]=Ue[Ve+1];Ae.data[Me]=Be}return Le&&ce&&(pe.newGCMS?Q(De):G(De),De.profiling&&De.profiling.push({action:'Finished GCMS calculation',time:Date.now()-me})),De.profiling&&De.profiling.push({action:'Total time',time:Date.now()-me}),De}}function R(M,$){return O||I(),new Promise(function(Z){var W=Date.now()+''+Math.random();F[W]=Z,O.postMessage(JSON.stringify({stamp:W,input:M,options:$}))})}function I(){var M=URL.createObjectURL(new Blob(['var getConverter ='+D.toString()+';var convert = getConverter(); onmessage = function (event) { var data = JSON.parse(event.data); postMessage(JSON.stringify({stamp: data.stamp, output: convert(data.input, data.options)})); };'],{type:'application/javascript'}));O=new Worker(M),URL.revokeObjectURL(M),O.addEventListener('message',function($){var Z=JSON.parse($.data),W=Z.stamp;F[W]&&F[W](Z.output)})}var T=E(46),P=D(),F={},O;_.exports={convert:function(M,$,Z){return'boolean'==typeof $&&(Z=$,$={}),Z?R(M,$):P(M,$)}}},function(_,S,E){'use strict';function D(R){if(R){this.data=R,this.length=this.data.length,this.index=0,this.zero=0;for(var I=0;I<this.data.length;I++)R[I]&=255}}var C=E(20);D.prototype=new C,D.prototype.byteAt=function(R){return this.data[this.zero+R]},D.prototype.lastIndexOfSignature=function(R){for(var I=R.charCodeAt(0),T=R.charCodeAt(1),P=R.charCodeAt(2),F=R.charCodeAt(3),O=this.length-4;0<=O;--O)if(this.data[O]===I&&this.data[O+1]===T&&this.data[O+2]===P&&this.data[O+3]===F)return O-this.zero;return-1},D.prototype.readData=function(R){if(this.checkOffset(R),0===R)return[];var I=this.data.slice(this.zero+this.index,this.zero+this.index+R);return this.index+=R,I},_.exports=D},function(_){'use strict';function D(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}D.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},_.exports=D},function(_,S,E){'use strict';function D(){this.data=null,this.length=0,this.index=0,this.zero=0}var C=E(0);D.prototype={checkOffset:function(R){this.checkIndex(this.index+R)},checkIndex:function(R){if(this.length<this.zero+R||0>R)throw new Error('End of data reached (data length = '+this.length+', asked index = '+R+'). Corrupted zip ?')},setIndex:function(R){this.checkIndex(R),this.index=R},skip:function(R){this.setIndex(this.index+R)},byteAt:function(){},readInt:function(R){var I=0,T;for(this.checkOffset(R),T=this.index+R-1;T>=this.index;T--)I=(I<<8)+this.byteAt(T);return this.index+=R,I},readString:function(R){return C.transformTo('string',this.readData(R))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var R=this.readInt(4);return new Date((127&R>>25)+1980,(15&R>>21)-1,31&R>>16,31&R>>11,63&R>>5,(31&R)<<1)}},_.exports=D},function(_,S){'use strict';S.base64=!1,S.binary=!1,S.dir=!1,S.createFolders=!1,S.date=null,S.compression=null,S.compressionOptions=null,S.comment=null,S.unixPermissions=null,S.dosPermissions=null},function(_,S){'use strict';S.LOCAL_FILE_HEADER='PK\x03\x04',S.CENTRAL_FILE_HEADER='PK\x01\x02',S.CENTRAL_DIRECTORY_END='PK\x05\x06',S.ZIP64_CENTRAL_DIRECTORY_LOCATOR='PK\x06\x07',S.ZIP64_CENTRAL_DIRECTORY_END='PK\x06\x06',S.DATA_DESCRIPTOR='PK\x07\b'},function(_,S,E){'use strict';function D(I,T){this.data=I,T||(this.data=R.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}var C=E(20),R=E(0);D.prototype=new C,D.prototype.byteAt=function(I){return this.data.charCodeAt(this.zero+I)},D.prototype.lastIndexOfSignature=function(I){return this.data.lastIndexOf(I)-this.zero},D.prototype.readData=function(I){this.checkOffset(I);var T=this.data.slice(this.zero+this.index,this.zero+this.index+I);return this.index+=I,T},_.exports=D},function(_,S,E){'use strict';function D(R){R&&(this.data=R,this.length=this.data.length,this.index=0,this.zero=0)}var C=E(18);D.prototype=new C,D.prototype.readData=function(R){if(this.checkOffset(R),0===R)return new Uint8Array(0);var I=this.data.subarray(this.zero+this.index,this.zero+this.index+R);return this.index+=R,I},_.exports=D},function(_,S,E){'use strict';for(var D=E(0),C=E(3),R=E(9),I=Array(256),T=0;256>T;T++)I[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;I[254]=I[254]=1;var P=function(M){var G=M.length,ee=0,$,Z,W,K,Q;for(K=0;K<G;K++)Z=M.charCodeAt(K),55296==(64512&Z)&&K+1<G&&(W=M.charCodeAt(K+1),56320==(64512&W)&&(Z=65536+(Z-55296<<10)+(W-56320),K++)),ee+=128>Z?1:2048>Z?2:65536>Z?3:4;for($=C.uint8array?new Uint8Array(ee):Array(ee),Q=0,K=0;Q<ee;K++)Z=M.charCodeAt(K),55296==(64512&Z)&&K+1<G&&(W=M.charCodeAt(K+1),56320==(64512&W)&&(Z=65536+(Z-55296<<10)+(W-56320),K++)),128>Z?$[Q++]=Z:2048>Z?($[Q++]=192|Z>>>6,$[Q++]=128|63&Z):65536>Z?($[Q++]=224|Z>>>12,$[Q++]=128|63&Z>>>6,$[Q++]=128|63&Z):($[Q++]=240|Z>>>18,$[Q++]=128|63&Z>>>12,$[Q++]=128|63&Z>>>6,$[Q++]=128|63&Z);return $},F=function(M,$){var Z;for($=$||M.length,$>M.length&&($=M.length),Z=$-1;0<=Z&&128==(192&M[Z]);)Z--;return 0>Z?$:0===Z?$:Z+I[M[Z]]>$?Z:$},O=function(M){var G=M.length,ee=Array(2*G),Z,W,K,Q;for(W=0,Z=0;Z<G;){if(K=M[Z++],128>K){ee[W++]=K;continue}if(Q=I[K],4<Q){ee[W++]=65533,Z+=Q-1;continue}for(K&=2===Q?31:3===Q?15:7;1<Q&&Z<G;)K=K<<6|63&M[Z++],Q--;if(1<Q){ee[W++]=65533;continue}65536>K?ee[W++]=K:(K-=65536,ee[W++]=55296|1023&K>>10,ee[W++]=56320|1023&K)}return ee.length!==W&&(ee.subarray?ee=ee.subarray(0,W):ee.length=W),D.applyFromCharCode(ee)};S.utf8encode=function($){return C.nodebuffer?R($,'utf-8'):P($)},S.utf8decode=function($){if(C.nodebuffer)return D.transformTo('nodebuffer',$).toString('utf-8');$=D.transformTo(C.uint8array?'uint8array':'array',$);for(var Z=[],W=0,K=$.length,G;W<K;)G=F($,Math.min(W+65536,K)),C.uint8array?Z.push(O($.subarray(W,G))):Z.push(O($.slice(W,G))),W=G;return Z.join('')}},function(_,S){(function(){var C=0?{}:S;var R={release:'0.3.0',date:'2013-03'};C.toString=function(){return'version '+R.release+', released '+R.date};for(var I=0,T=null,P=null,F={init:function($){if(0!==$&&0==($&$-1))I=$,F._initArray(),F._makeBitReversalTable(),F._makeCosSinTable();else throw new Error('init: radix-2 required')},fft1d:function($,Z){F.fft($,Z,1)},ifft1d:function($,Z){var W=1/I;F.fft($,Z,-1);for(var K=0;K<I;K++)$[K]*=W,Z[K]*=W},bt1d:function($,Z){F.fft($,Z,-1)},fft2d:function($,Z){for(var W=[],K=[],Q=0,G=0;G<I;G++){Q=G*I;for(var ee=0;ee<I;ee++)W[ee]=$[ee+Q],K[ee]=Z[ee+Q];F.fft1d(W,K);for(var te=0;te<I;te++)$[te+Q]=W[te],Z[te+Q]=K[te]}for(var ne=0;ne<I;ne++){for(var ae=0;ae<I;ae++)Q=ne+ae*I,W[ae]=$[Q],K[ae]=Z[Q];F.fft1d(W,K);for(var se=0;se<I;se++)Q=ne+se*I,$[Q]=W[se],Z[Q]=K[se]}},ifft2d:function($,Z){for(var W=[],K=[],Q=0,G=0;G<I;G++){Q=G*I;for(var ee=0;ee<I;ee++)W[ee]=$[ee+Q],K[ee]=Z[ee+Q];F.ifft1d(W,K);for(var te=0;te<I;te++)$[te+Q]=W[te],Z[te+Q]=K[te]}for(var ne=0;ne<I;ne++){for(var ae=0;ae<I;ae++)Q=ne+ae*I,W[ae]=$[Q],K[ae]=Z[Q];F.ifft1d(W,K);for(var se=0;se<I;se++)Q=ne+se*I,$[Q]=W[se],Z[Q]=K[se]}},fft:function($,Z,W){for(var le=I>>2,de=0,K,Q,G,ee,te,ne,ae,se,oe;de<I;de++)ee=T[de],de<ee&&(te=$[de],$[de]=$[ee],$[ee]=te,te=Z[de],Z[de]=Z[ee],Z[ee]=te);for(var ue=1;ue<I;ue<<=1){Q=0,K=I/(ue<<1);for(var he=0;he<ue;he++){ne=P[Q+le],ae=W*P[Q];for(var ge=he;ge<I;ge+=ue<<1)G=ge+ue,se=ne*$[G]+ae*Z[G],oe=ne*Z[G]-ae*$[G],$[G]=$[ge]-se,$[ge]+=se,Z[G]=Z[ge]-oe,Z[ge]+=oe;Q+=K}}},_initArray:function(){T='undefined'==typeof Uint32Array?[]:new Uint32Array(I),P='undefined'==typeof Float64Array?[]:new Float64Array(1.25*I)},_paddingZero:function(){},_makeBitReversalTable:function(){var $=0,Z=0,W=0;for(T[0]=0;++$<I;){for(W=I>>1;W<=Z;)Z-=W,W>>=1;Z+=W,T[$]=Z}},_makeCosSinTable:function(){var $=I>>1,Z=I>>2,W=I>>3,Q=Math.sin(Math.PI/I),G=2*Q*Q,ee=Math.sqrt(G*(2-G)),te=P[Z]=1,ne=P[0]=0;Q=2*G;for(var ae=1;ae<W;ae++)te-=G,G+=Q*te,ne+=ee,ee-=Q*ne,P[ae]=ne,P[Z-ae]=te;0!=W&&(P[W]=Math.sqrt(0.5));for(var se=0;se<Z;se++)P[$-se]=P[se];for(var oe=0;oe<$+Z;oe++)P[oe+$]=-P[oe]}},O=['init','fft1d','ifft1d','fft2d','ifft2d'],M=0;M<O.length;M++)C[O[M]]=F[O[M]];return C.bt=F.bt1d,C.fft=F.fft1d,C.ifft=F.ifft1d,C}).call(this)},function(_,S,E){'use strict';S.FFTUtils=E(62),S.FFT=E(26)},function(_,S){(function(){var C=0?{}:S;var R={release:'0.3.0',date:'2013-03'};C.toString=function(){return'version '+R.release+', released '+R.date};for(var I=0,T=null,P=null,F={init:function($){if(0!==$&&0==($&$-1))I=$,F._initArray(),F._makeBitReversalTable(),F._makeCosSinTable();else throw new Error('init: radix-2 required')},fft1d:function($,Z){F.fft($,Z,1)},ifft1d:function($,Z){var W=1/I;F.fft($,Z,-1);for(var K=0;K<I;K++)$[K]*=W,Z[K]*=W},bt1d:function($,Z){F.fft($,Z,-1)},fft2d:function($,Z){for(var W=[],K=[],Q=0,G=0;G<I;G++){Q=G*I;for(var ee=0;ee<I;ee++)W[ee]=$[ee+Q],K[ee]=Z[ee+Q];F.fft1d(W,K);for(var te=0;te<I;te++)$[te+Q]=W[te],Z[te+Q]=K[te]}for(var ne=0;ne<I;ne++){for(var ae=0;ae<I;ae++)Q=ne+ae*I,W[ae]=$[Q],K[ae]=Z[Q];F.fft1d(W,K);for(var se=0;se<I;se++)Q=ne+se*I,$[Q]=W[se],Z[Q]=K[se]}},ifft2d:function($,Z){for(var W=[],K=[],Q=0,G=0;G<I;G++){Q=G*I;for(var ee=0;ee<I;ee++)W[ee]=$[ee+Q],K[ee]=Z[ee+Q];F.ifft1d(W,K);for(var te=0;te<I;te++)$[te+Q]=W[te],Z[te+Q]=K[te]}for(var ne=0;ne<I;ne++){for(var ae=0;ae<I;ae++)Q=ne+ae*I,W[ae]=$[Q],K[ae]=Z[Q];F.ifft1d(W,K);for(var se=0;se<I;se++)Q=ne+se*I,$[Q]=W[se],Z[Q]=K[se]}},fft:function($,Z,W){for(var le=I>>2,de=0,K,Q,G,ee,te,ne,ae,se,oe;de<I;de++)ee=T[de],de<ee&&(te=$[de],$[de]=$[ee],$[ee]=te,te=Z[de],Z[de]=Z[ee],Z[ee]=te);for(var ue=1;ue<I;ue<<=1){Q=0,K=I/(ue<<1);for(var he=0;he<ue;he++){ne=P[Q+le],ae=W*P[Q];for(var ge=he;ge<I;ge+=ue<<1)G=ge+ue,se=ne*$[G]+ae*Z[G],oe=ne*Z[G]-ae*$[G],$[G]=$[ge]-se,$[ge]+=se,Z[G]=Z[ge]-oe,Z[ge]+=oe;Q+=K}}},_initArray:function(){T='undefined'==typeof Uint32Array?[]:new Uint32Array(I),P='undefined'==typeof Float64Array?[]:new Float64Array(1.25*I)},_paddingZero:function(){},_makeBitReversalTable:function(){var $=0,Z=0,W=0;for(T[0]=0;++$<I;){for(W=I>>1;W<=Z;)Z-=W,W>>=1;Z+=W,T[$]=Z}},_makeCosSinTable:function(){var $=I>>1,Z=I>>2,W=I>>3,Q=Math.sin(Math.PI/I),G=2*Q*Q,ee=Math.sqrt(G*(2-G)),te=P[Z]=1,ne=P[0]=0;Q=2*G;for(var ae=1;ae<W;ae++)te-=G,G+=Q*te,ne+=ee,ee-=Q*ne,P[ae]=ne,P[Z-ae]=te;0!=W&&(P[W]=Math.sqrt(0.5));for(var se=0;se<Z;se++)P[$-se]=P[se];for(var oe=0;oe<$+Z;oe++)P[oe+$]=-P[oe]}},O=['init','fft1d','ifft1d','fft2d','ifft2d'],M=0;M<O.length;M++)C[O[M]]=F[O[M]];return C.bt=F.bt1d,C.fft=F.fft1d,C.ifft=F.ifft1d,C}).call(this)},function(_,S,E){'use strict';var oe=E(4);_.exports={transpose:function(le){if('number'==typeof le)return le;var de=le.clone();return de.transpose()},add:function(le,de){if('number'==typeof le&&'number'==typeof de)return le+de;if('number'==typeof le)return this.add(de,le);var ue=le.clone();return ue.add(de)},subtract:function(le,de){if('number'==typeof le&&'number'==typeof de)return le-de;if('number'==typeof le)return this.subtract(de,le);var ue=le.clone();return ue.sub(de)},multiply:function(le,de){if('number'==typeof le&&'number'==typeof de)return le*de;if('number'==typeof le)return this.multiply(de,le);var ue=le.clone();return'number'==typeof de?ue.mul(de):ue=ue.mmul(de),1==ue.rows&&1==ue.columns?ue[0][0]:ue},dotMultiply:function(le,de){var ue=le.clone();return ue.mul(de)},dotDivide:function(le,de){var ue=le.clone();return ue.div(de)},diag:function(le){var de=null,ue=le.rows,he=le.columns,ge,pe;if('undefined'==typeof he&&'object'==typeof le)if(le[0]&&le[0].length)for(ue=le.length,he=le[0].length,pe=Math.min(ue,he),de=oe.zeros(he,he),ge=0;ge<he;ge++)de[ge][ge]=le[ge][ge];else for(he=le.length,de=oe.zeros(he,he),ge=0;ge<he;ge++)de[ge][ge]=le[ge];if(1==ue)for(de=oe.zeros(he,he),ge=0;ge<he;ge++)de[ge][ge]=le[0][ge];else if(0<ue&&0<he)for(pe=Math.min(ue,he),de=Array(pe),ge=0;ge<pe;ge++)de[ge]=le[ge][ge];return de},min:function(le,de){if('number'==typeof le&&'number'==typeof de)return Math.min(le,de);for(var ue=le.rows,he=le.columns,ge=new oe(ue,he),pe=0;pe<ue;pe++)for(var fe=0;fe<he;fe++)ge[pe][fe]=le[pe][fe]<de[pe][fe]?le[pe][fe]:de[pe][fe];return ge},max:function(le,de){if('number'==typeof le&&'number'==typeof de)return Math.max(le,de);for(var ue=le.rows,he=le.columns,ge=new oe(ue,he),pe=0;pe<ue;pe++)for(var fe=0;fe<he;fe++)ge[pe][fe]=le[pe][fe]>de[pe][fe]?le[pe][fe]:de[pe][fe];return ge},solve:function(le,de){return le.solve(de)},inv:function(le){return'number'==typeof le?1/le:le.inverse()},sqrt:function(le){if('number'==typeof le)return Math.sqrt(le);for(var de=le.rows,ue=le.columns,he=new oe(de,ue),ge=0;ge<de;ge++)for(var pe=0;pe<ue;pe++)he[ge][pe]=Math.sqrt(le[ge][pe]);return he},exp:function(le){if('number'==typeof le)return Math.sqrt(le);for(var de=le.rows,ue=le.columns,he=new oe(de,ue),ge=0;ge<de;ge++)for(var pe=0;pe<ue;pe++)he[ge][pe]=Math.exp(le[ge][pe]);return he},dotPow:function(le,de){if('number'==typeof le)return Math.pow(le,de);for(var ue=le.rows,he=le.columns,ge=new oe(ue,he),pe=0;pe<ue;pe++)for(var fe=0;fe<he;fe++)ge[pe][fe]=Math.pow(le[pe][fe],de);return ge},abs:function(le){if('number'==typeof le)return Math.abs(le);for(var de=le.rows,ue=le.columns,he=new oe(de,ue),ge=0;ge<de;ge++)for(var pe=0;pe<ue;pe++)he[ge][pe]=Math.abs(le[ge][pe]);return he},matrix:function(le,de){return new oe(le,de)},ones:function(le,de){return oe.ones(le,de)},zeros:function(le,de){return oe.zeros(le,de)},random:function(le,de){return oe.rand(le,de)},eye:function(le,de){return oe.eye(le,de)}}},function(_,S){'use strict';function D(C,R){return C-R}S.sum=function(R){for(var C=0,I=0;I<R.length;I++)C+=R[I];return C},S.max=function(R){for(var C=-Infinity,I=R.length,T=0;T<I;T++)R[T]>C&&(C=R[T]);return C},S.min=function(R){for(var C=Infinity,I=R.length,T=0;T<I;T++)R[T]<C&&(C=R[T]);return C},S.minMax=function(R){for(var I=Infinity,T=-Infinity,P=R.length,F=0;F<P;F++)R[F]<I&&(I=R[F]),R[F]>T&&(T=R[F]);return{min:I,max:T}},S.arithmeticMean=function(R){for(var I=0,T=R.length,P=0;P<T;P++)I+=R[P];return I/T},S.mean=S.arithmeticMean,S.geometricMean=function(R){for(var I=1,T=R.length,P=0;P<T;P++)I*=R[P];return Math.pow(I,1/T)},S.logMean=function(R){for(var I=0,T=R.length,P=0;P<T;P++)I+=Math.log(R[P]);return I/T},S.grandMean=function(R,I){for(var T=0,P=0,F=R.length,O=0;O<F;O++)T+=I[O]*R[O],P+=I[O];return T/P},S.truncatedMean=function(R,I,T){T===void 0&&(T=!1),T||(R=R.slice().sort(D));for(var P=R.length,F=Math.floor(P*I),O=0,M=F;M<P-F;M++)O+=R[M];return O/(P-2*F)},S.harmonicMean=function(R){for(var I=0,T=R.length,P=0;P<T;P++){if(0===R[P])throw new RangeError('value at index '+P+'is zero');I+=1/R[P]}return T/I},S.contraHarmonicMean=function(R){for(var I=0,T=0,P=R.length,F=0;F<P;F++)I+=R[F]*R[F],T+=R[F];if(0>T)throw new RangeError('sum of values is negative');return I/T},S.median=function(R,I){I===void 0&&(I=!1),I||(R=R.slice().sort(D));var T=R.length,P=Math.floor(T/2);return 0==T%2?0.5*(R[P-1]+R[P]):R[P]},S.variance=function(R,I){I===void 0&&(I=!0);for(var T=S.mean(R),P=0,F=R.length,O=0,M;O<F;O++)M=R[O]-T,P+=M*M;return I?P/(F-1):P/F},S.standardDeviation=function(R,I){return Math.sqrt(S.variance(R,I))},S.standardError=function(R){return S.standardDeviation(R)/Math.sqrt(R.length)},S.quartiles=function(R,I){'undefined'==typeof I&&(I=!1),I||(R=R.slice(),R.sort(D));var T=R.length/4,P=R[Math.ceil(T)-1],F=S.median(R,!0),O=R[Math.ceil(3*T)-1];return{q1:P,q2:F,q3:O}},S.pooledStandardDeviation=function(R,I){return Math.sqrt(S.pooledVariance(R,I))},S.pooledVariance=function(R,I){'undefined'==typeof I&&(I=!0);for(var T=0,P=0,F=R.length,O=0;O<F;O++){var M=R[O],$=S.variance(M);T+=(M.length-1)*$,P+=I?M.length-1:M.length}return T/P},S.mode=function(R){var I=R.length,T=Array(I),P;for(P=0;P<I;P++)T[P]=0;var F=Array(I),O=0;for(P=0;P<I;P++){var M=F.indexOf(R[P]);0<=M?T[M]++:(F[O]=R[P],T[O]=1,O++)}var $=0,Z=0;for(P=0;P<O;P++)T[P]>$&&($=T[P],Z=P);return F[Z]},S.covariance=function(R,I,T){'undefined'==typeof T&&(T=!0);var P=S.mean(R),F=S.mean(I);if(R.length!==I.length)throw'Vectors do not have the same dimensions';for(var O=0,M=R.length,$=0;$<M;$++){var Z=R[$]-P,W=I[$]-F;O+=Z*W}return T?O/(M-1):O/M},S.skewness=function(R,I){'undefined'==typeof I&&(I=!0);for(var T=S.mean(R),P=0,F=0,O=R.length,M=0,$;M<O;M++)$=R[M]-T,P+=$*$,F+=$*$*$;var Z=P/O,W=F/O,K=W/Math.pow(Z,3/2);if(I){var Q=Math.sqrt(O*(O-1));return Q/(O-2)*K}return K},S.kurtosis=function(R,I){'undefined'==typeof I&&(I=!0);for(var T=S.mean(R),P=R.length,F=0,O=0,M=0,$;M<P;M++)$=R[M]-T,F+=$*$,O+=$*$*$*$;var Z=F/P,W=O/P;if(I){var K=F/(P-1),G=O/(K*K);return P*(P+1)/((P-1)*(P-2)*(P-3))*G-3*((P-1)*(P-1)/((P-2)*(P-3)))}return W/(Z*Z)-3},S.entropy=function(R,I){'undefined'==typeof I&&(I=0);for(var T=0,P=R.length,F=0;F<P;F++)T+=R[F]*Math.log(R[F]+I);return-T},S.weightedMean=function(R,I){for(var T=0,P=R.length,F=0;F<P;F++)T+=R[F]*I[F];return T},S.weightedStandardDeviation=function(R,I){return Math.sqrt(S.weightedVariance(R,I))},S.weightedVariance=function(R,I){for(var T=S.weightedMean(R,I),P=0,F=R.length,O=0,M=0,$=0;$<F;$++){var Z=R[$]-T,W=I[$];P+=W*(Z*Z),M+=W,O+=W*W}return P*(M/(M*M-O))},S.center=function(R,I){'undefined'==typeof I&&(I=!1);var T=R;I||(T=R.slice());for(var P=S.mean(T),F=T.length,O=0;O<F;O++)T[O]-=P},S.standardize=function(R,I,T){'undefined'==typeof I&&(I=S.standardDeviation(R)),'undefined'==typeof T&&(T=!1);for(var P=R.length,F=T?R:Array(P),O=0;O<P;O++)F[O]=R[O]/I;return F},S.cumulativeSum=function(R){var I=R.length,T=Array(I);T[0]=R[0];for(var P=1;P<I;P++)T[P]=T[P-1]+R[P];return T}},function(_,S){'use strict';function D(C,R){return C-R}S.sum=function(R){for(var C=0,I=0;I<R.length;I++)C+=R[I];return C},S.max=function(R){for(var C=R[0],I=R.length,T=1;T<I;T++)R[T]>C&&(C=R[T]);return C},S.min=function(R){for(var C=R[0],I=R.length,T=1;T<I;T++)R[T]<C&&(C=R[T]);return C},S.minMax=function(R){for(var I=R[0],T=R[0],P=R.length,F=1;F<P;F++)R[F]<I&&(I=R[F]),R[F]>T&&(T=R[F]);return{min:I,max:T}},S.arithmeticMean=function(R){for(var I=0,T=R.length,P=0;P<T;P++)I+=R[P];return I/T},S.mean=S.arithmeticMean,S.geometricMean=function(R){for(var I=1,T=R.length,P=0;P<T;P++)I*=R[P];return Math.pow(I,1/T)},S.logMean=function(R){for(var I=0,T=R.length,P=0;P<T;P++)I+=Math.log(R[P]);return I/T},S.grandMean=function(R,I){for(var T=0,P=0,F=R.length,O=0;O<F;O++)T+=I[O]*R[O],P+=I[O];return T/P},S.truncatedMean=function(R,I,T){T===void 0&&(T=!1),T||(R=[].concat(R).sort(D));for(var P=R.length,F=Math.floor(P*I),O=0,M=F;M<P-F;M++)O+=R[M];return O/(P-2*F)},S.harmonicMean=function(R){for(var I=0,T=R.length,P=0;P<T;P++){if(0===R[P])throw new RangeError('value at index '+P+'is zero');I+=1/R[P]}return T/I},S.contraHarmonicMean=function(R){for(var I=0,T=0,P=R.length,F=0;F<P;F++)I+=R[F]*R[F],T+=R[F];if(0>T)throw new RangeError('sum of values is negative');return I/T},S.median=function(R,I){I===void 0&&(I=!1),I||(R=[].concat(R).sort(D));var T=R.length,P=Math.floor(T/2);return 0==T%2?0.5*(R[P-1]+R[P]):R[P]},S.variance=function(R,I){I===void 0&&(I=!0);for(var T=S.mean(R),P=0,F=R.length,O=0,M;O<F;O++)M=R[O]-T,P+=M*M;return I?P/(F-1):P/F},S.standardDeviation=function(R,I){return Math.sqrt(S.variance(R,I))},S.standardError=function(R){return S.standardDeviation(R)/Math.sqrt(R.length)},S.robustMeanAndStdev=function(R){var I=0,T=0,P=R.length,F=0;for(F=0;F<P;F++)I+=R[F];I/=P;var O=Array(P);for(F=0;F<P;F++)O[F]=Math.abs(R[F]-I);return O.sort(D),T=1==P%2?O[(P-1)/2]/0.6745:0.5*(O[P/2]+O[P/2-1])/0.6745,{mean:I,stdev:T}},S.quartiles=function(R,I){'undefined'==typeof I&&(I=!1),I||(R=[].concat(R).sort(D));var T=R.length/4,P=R[Math.ceil(T)-1],F=S.median(R,!0),O=R[Math.ceil(3*T)-1];return{q1:P,q2:F,q3:O}},S.pooledStandardDeviation=function(R,I){return Math.sqrt(S.pooledVariance(R,I))},S.pooledVariance=function(R,I){'undefined'==typeof I&&(I=!0);for(var T=0,P=0,F=R.length,O=0;O<F;O++){var M=R[O],$=S.variance(M);T+=(M.length-1)*$,P+=I?M.length-1:M.length}return T/P},S.mode=function(R){var I=R.length,T=Array(I),P;for(P=0;P<I;P++)T[P]=0;var F=Array(I),O=0;for(P=0;P<I;P++){var M=F.indexOf(R[P]);0<=M?T[M]++:(F[O]=R[P],T[O]=1,O++)}var $=0,Z=0;for(P=0;P<O;P++)T[P]>$&&($=T[P],Z=P);return F[Z]},S.covariance=function(R,I,T){'undefined'==typeof T&&(T=!0);var P=S.mean(R),F=S.mean(I);if(R.length!==I.length)throw'Vectors do not have the same dimensions';for(var O=0,M=R.length,$=0;$<M;$++){var Z=R[$]-P,W=I[$]-F;O+=Z*W}return T?O/(M-1):O/M},S.skewness=function(R,I){'undefined'==typeof I&&(I=!0);for(var T=S.mean(R),P=0,F=0,O=R.length,M=0,$;M<O;M++)$=R[M]-T,P+=$*$,F+=$*$*$;var Z=P/O,W=F/O,K=W/Math.pow(Z,3/2);if(I){var Q=Math.sqrt(O*(O-1));return Q/(O-2)*K}return K},S.kurtosis=function(R,I){'undefined'==typeof I&&(I=!0);for(var T=S.mean(R),P=R.length,F=0,O=0,M=0,$;M<P;M++)$=R[M]-T,F+=$*$,O+=$*$*$*$;var Z=F/P,W=O/P;if(I){var K=F/(P-1),G=O/(K*K);return P*(P+1)/((P-1)*(P-2)*(P-3))*G-3*((P-1)*(P-1)/((P-2)*(P-3)))}return W/(Z*Z)-3},S.entropy=function(R,I){'undefined'==typeof I&&(I=0);for(var T=0,P=R.length,F=0;F<P;F++)T+=R[F]*Math.log(R[F]+I);return-T},S.weightedMean=function(R,I){for(var T=0,P=R.length,F=0;F<P;F++)T+=R[F]*I[F];return T},S.weightedStandardDeviation=function(R,I){return Math.sqrt(S.weightedVariance(R,I))},S.weightedVariance=function(R,I){for(var T=S.weightedMean(R,I),P=0,F=R.length,O=0,M=0,$=0;$<F;$++){var Z=R[$]-T,W=I[$];P+=W*(Z*Z),M+=W,O+=W*W}return P*(M/(M*M-O))},S.center=function(R,I){'undefined'==typeof I&&(I=!1);var T=R;I||(T=[].concat(R));for(var P=S.mean(T),F=T.length,O=0;O<F;O++)T[O]-=P},S.standardize=function(R,I,T){'undefined'==typeof I&&(I=S.standardDeviation(R)),'undefined'==typeof T&&(T=!1);for(var P=R.length,F=T?R:Array(P),O=0;O<P;O++)F[O]=R[O]/I;return F},S.cumulativeSum=function(R){var I=R.length,T=Array(I);T[0]=R[0];for(var P=1;P<I;P++)T[P]=T[P-1]+R[P];return T}},function(_,S,E){'use strict';function D(F,O){if(65537>O&&(F.subarray&&I||!F.subarray&&R))return String.fromCharCode.apply(null,C.shrinkBuf(F,O));for(var M='',$=0;$<O;$++)M+=String.fromCharCode(F[$]);return M}var C=E(1),R=!0,I=!0;try{String.fromCharCode.apply(null,[0])}catch(F){R=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(F){I=!1}for(var T=new C.Buf8(256),P=0;256>P;P++)T[P]=252<=P?6:248<=P?5:240<=P?4:224<=P?3:192<=P?2:1;T[254]=T[254]=1,S.string2buf=function(F){var K=F.length,Q=0,O,M,$,Z,W;for(Z=0;Z<K;Z++)M=F.charCodeAt(Z),55296==(64512&M)&&Z+1<K&&($=F.charCodeAt(Z+1),56320==(64512&$)&&(M=65536+(M-55296<<10)+($-56320),Z++)),Q+=128>M?1:2048>M?2:65536>M?3:4;for(O=new C.Buf8(Q),W=0,Z=0;W<Q;Z++)M=F.charCodeAt(Z),55296==(64512&M)&&Z+1<K&&($=F.charCodeAt(Z+1),56320==(64512&$)&&(M=65536+(M-55296<<10)+($-56320),Z++)),128>M?O[W++]=M:2048>M?(O[W++]=192|M>>>6,O[W++]=128|63&M):65536>M?(O[W++]=224|M>>>12,O[W++]=128|63&M>>>6,O[W++]=128|63&M):(O[W++]=240|M>>>18,O[W++]=128|63&M>>>12,O[W++]=128|63&M>>>6,O[W++]=128|63&M);return O},S.buf2binstring=function(F){return D(F,F.length)},S.binstring2buf=function(F){for(var O=new C.Buf8(F.length),M=0,$=O.length;M<$;M++)O[M]=F.charCodeAt(M);return O},S.buf2string=function(F,O){var M,$,Z,W,K=O||F.length,Q=Array(2*K);for($=0,M=0;M<K;){if(Z=F[M++],128>Z){Q[$++]=Z;continue}if(W=T[Z],4<W){Q[$++]=65533,M+=W-1;continue}for(Z&=2===W?31:3===W?15:7;1<W&&M<K;)Z=Z<<6|63&F[M++],W--;if(1<W){Q[$++]=65533;continue}65536>Z?Q[$++]=Z:(Z-=65536,Q[$++]=55296|1023&Z>>10,Q[$++]=56320|1023&Z)}return D(Q,$)},S.utf8border=function(F,O){var M;for(O=O||F.length,O>F.length&&(O=F.length),M=O-1;0<=M&&128==(192&F[M]);)M--;return 0>M?O:0===M?O:M+T[F[M]]>O?M:O}},function(_){'use strict';_.exports=function(C,R,I,T){for(var P=0|65535&C,F=0|65535&C>>>16,O=0;0!==I;){O=2e3<I?2e3:I,I-=O;do P=0|P+R[T++],F=0|F+P;while(--O);P%=65521,F%=65521}return 0|(P|F<<16)}},function(_){'use strict';_.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(_){'use strict';var R=function(){for(var T=[],P=0,I;256>P;P++){I=P;for(var F=0;8>F;F++)I=1&I?3988292384^I>>>1:I>>>1;T[P]=I}return T}();_.exports=function(I,T,P,F){I^=-1;for(var $=F;$<F+P;$++)I=I>>>8^R[255&(I^T[$])];return-1^I}},function(_){'use strict';_.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg='',this.state=null,this.data_type=2,this.adler=0}},function(_,S,E){'use strict';_.exports.fourierTransform=E(98),_.exports.zeroFilling=E(101),_.exports.apodization=E(96),_.exports.phaseCorrection=E(99),_.exports.digitalFilter=E(97)},function(_){'use strict';function D(M,$,Z,W){var K=R(M,$,Z,-W[0],!0),Q=0,G=null,ee=null;0>K&&(G={nucleusX:Z.nucleusX,nucleusY:Z.nucleusY},G.resolutionX=Z.resolutionX,G.resolutionY=Z.resolutionY,G.shiftX=Z.shiftY,G.shiftY=Z.shiftX,G.peaks=[{x:Z.shiftY,y:Z.shiftX,z:1}],M.push(G),ee=[-W[0],W[1]],$.push(ee),Q++);var te=0,ne=!1,ae=!1,se;for(te=M.length-1;0<=te;te--)se=M[te],0===$[te][0]&&(Math.abs(se.shiftX-Z.shiftX)<F&&(ne=!0),Math.abs(se.shiftY-Z.shiftY)<F&&(ae=!0));return!1==ne&&(G={nucleusX:Z.nucleusX,nucleusY:Z.nucleusY},G.resolutionX=Z.resolutionX,G.resolutionY=Z.resolutionY,G.shiftX=Z.shiftX,G.shiftY=Z.shiftX,G.peaks=[{x:Z.shiftX,y:Z.shiftX,z:1}],M.push(G),ee=[0,W[1]],$.push(ee),Q++),!1==ae&&(G={nucleusX:Z.nucleusX,nucleusY:Z.nucleusY},G.resolutionX=Z.resolutionX,G.resolutionY=Z.resolutionY,G.shiftX=Z.shiftY,G.shiftY=Z.shiftY,G.peaks=[{x:Z.shiftY,y:Z.shiftY,z:1}],M.push(G),ee=[0,W[1]],$.push(ee),Q++),Q}function C(M,$,Z,W){var K=0,Q=0,G=4*Z.shiftX,ee=[],te=[],ne;for(Q=M.length-1;0<=Q;Q--)ne=M[Q],0!==$[Q][0]&&(Math.abs(ne.shiftX-Z.shiftX)<F?(K++,W&&$[Q][1]++,ee.push(Q),G+=ne.shiftX):Math.abs(ne.shiftY-Z.shiftY)<F&&(K++,W&&$[Q][1]++,te.push(Q),G+=ne.shiftY));if(G/=ee.length+te.length+4,0<ee.length)for(Q=ee.length-1;0<=Q;Q--)M[ee[Q]].shiftX=G;if(0<te.length)for(Q=te.length-1;0<=Q;Q--)M[te[Q]].shiftY=G;return Z.shiftX=G,Z.shiftY=G,K}function R(M,$,Z,W,K){for(var Q=M.length-1;0<=Q;Q--)if($[Q][0]===W&&T(Z,M[Q],K)<O){if(!K){let G=(M[Q].shiftX+Z.shiftX)/2,ee=(M[Q].shiftY+Z.shiftY)/2;M[Q].shiftX=G,M[Q].shiftY=ee,Z.shiftX=G,Z.shiftY=ee}else{let G=Z.shiftX,ee=M[Q].shiftX;M[Q].shiftY=G,Z.shiftY=ee}return Q}return-1}function I(M){for(var $=Array(M.length),Z=M.length-1;0<=Z;Z--)if($[Z]=[0,0],Math.abs(M[Z].shiftX-M[Z].shiftY)<=F){$[Z][1]=1;var W=(2*M[Z].shiftX+M[Z].shiftY)/3;M[Z].shiftX=W,M[Z].shiftY=W}else $[Z][0]=0<M[Z].shiftX-M[Z].shiftY?1:-1;return $}function T(M,$,Z){return Z?Math.sqrt(Math.pow(M.shiftX-$.shiftY,2)+Math.pow(M.shiftY-$.shiftX,2)):Math.sqrt(Math.pow(M.shiftX-$.shiftX,2)+Math.pow(M.shiftY-$.shiftY,2))}function P(M,$){var Z=0,W=0,K,Q;for(K=0;K<M.length;K++){var G=M[K];for(Q=0;Q<$.length;Q++)Z=($[Q].startX+$[Q].stopX)/2,W=Math.abs($[Q].startX-$[Q].stopX)/2,G.nucleusX===$[Q].nucleus&&Math.abs(G.shiftX-Z)<=W&&G._highlight.push($[Q]._highlight[0]),G.nucleusY===$[Q].nucleus&&Math.abs(G.shiftY-Z)<=W&&G._highlight.push($[Q]._highlight[0])}}var F=0.05,O=0.05;_.exports={clean:function(M,$){var Z=Number.NEGATIVE_INFINITY,W;for(W=M.length-1;0<=W;W--)Math.abs(M[W].z)>Z&&(Z=Math.abs(M[W].z));for(Z*=$,W=M.length-1;0<=W;W--)Math.abs(M[W].z)<Z&&M.splice(W,1);return M},enhanceSymmetry:function(M){var $=I(M),Z=M,W,K,Q,G;for(W=Z.length-1;0<=W;W--)G=Z[W],1<G.peaks.length&&$[W][1]++,1===$[W][0]&&(Q=R(Z,$,G,-1,!0),0<=Q&&($[W][1]+=2,$[Q][1]+=2));for(W=Z.length-1;0<=W;W--)G=Z[W],0===$[W][0]&&(K=C(Z,$,G,!0),$[W][1]+=K);var ee=0;for(W=Z.length-1;0<=W;W--)0!==$[W][0]&&2<$[W][1]&&(ee++,ee+=D(Z,$,Z[W],$[W])),2<=$[W][1]&&0===$[W][0]&&ee++;var te=Array(ee);for(ee--,W=Z.length-1;0<=W;W--)(0!==$[W][0]&&2<$[W][1]||0===$[W][0]&&1<$[W][1])&&(te[ee--]=Z[W]);return te},alignDimensions:function(M,$){for(var Z=0,W;Z<$.length;Z++)W=$[Z],W&&P(M,W)}}},function(_,S,E){'use strict';function C(T,P){for(var F=T.length-1;0<=F;F--)Math.abs(T[F].y)<P&&T.splice(F,1);return T}const R=E(64),I={thresholdFactor:1,optimize:!1,minMaxRatio:0.01,broadRatio:2.5e-4,smoothY:!0,nL:4,functionType:'gaussian',broadWidth:0.25,sgOptions:{windowSize:9,polynomial:3}};_.exports=function(T,P){var F=Object.assign({},I,P),O=Math.abs(T.getNoiseLevel())*F.thresholdFactor,M=T.getXYData();F.from&&F.to&&(M=T.getVector(F.from,F.to));var $=R.gsd(M[0],M[1],F);return F.broadWidth&&($=R.post.joinBroadPeaks($,{width:F.broadWidth})),F.optimize&&($=R.post.optimizePeaks($,M[0],M[1],F.nL,F.functionType)),C($,O)}},function(_,S,E){'use strict';const D=E(6),C=E(37),R=E(14),I=E(106);class T extends D{constructor(P){super(P)}static fromMolfile(){}static fromXY(P,F,O){var M={profiling:[],logs:[]},$=[];M.spectra=$,M.info={};var Z={};return Z.isXYdata=!0,Z.nbPoints=P.length,Z.firstX=P[0],Z.firstY=F[0],Z.lastX=P[Z.nbPoints-1],Z.lastY=F[Z.nbPoints-1],Z.xFactor=1,Z.yFactor=1,Z.xUnit=O.xUnit||'PPM',Z.yUnit=O.yUnit||'Intensity',Z.deltaX=(Z.lastX-Z.firstX)/(Z.nbPoints-1),Z.title=O.title||'spectra-data from xy',Z.dataType=O.dataType||'NMR',Z.observeFrequency=O.frequency||400,M.info.observefrequency=Z.observeFrequency,M.info['.SOLVENTNAME']=O.solvent||'none',M.info.$SW_h=Math.abs(Z.lastX-Z.firstX)*Z.observeFrequency,M.info.$SW=Math.abs(Z.lastX-Z.firstX),M.info.$TD=Z.nbPoints,M.xType=O.nucleus||'1H',Z.data=[{x:P,y:F}],M.twoD=!1,$.push(Z),new T(M)}static fromBruker(P,F){F=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},F);var O=null;return O=Array.isArray(P)?R.converFolder(P,F):R.convertZip(P,F),O?O.map(function(M){return new T(M)}):null}getNucleus(P){return P&&0!==P&&1!==P?'':this.sd.xType}getSolventName(){return(this.sd.info['.SOLVENTNAME']||this.sd.info.$SOLVENT||'').replace('<','').replace('>','')}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}getNMRPeakThreshold(P){return'1H'===P?3:'13C'===P?5:1}fourierTransform(){return C.fourierTransform(this)}postFourierTransform(P){return C.phaseCorrection(0,P)}zeroFilling(P,F){return C.zeroFilling(this,P,F)}brukerFilter(){return C.digitalFilter(this,{brukerFilter:!0})}digitalFilter(P){return C.digitalFilter(this,P)}apodization(P,F){return C.apodization(this,{functionName:P,lineBroadening:F})}echoAntiechoFilter(){return this}SNVFilter(){return this}powerFilter(P){var F=this.getMinY();return 1>P&&0>F&&this.YShift(-1*F),this}phaseCorrection(P,F){return C.phaseCorrection(this,P,F)}getRanges(P){if(this.ranges)return this.ranges;var F=this.getPeaks(P),O=Object.assign({},{nH:this.totalIntegral},P);return I(this,F,O)}createRanges(P){return this.ranges=null,this.peaks=null,this.ranges=this.getRanges(P),this.ranges}}_.exports=T},function(_,S,E){'use strict';const D=E(6),C=E(105),R=E(38),I=E(14),T=E(37);class P extends D{constructor(F){super(F)}static fromBruker(F,O){O=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},O);var M=null;return M=Array.isArray(F)?I.converFolder(F,O):I.convertZip(F,O),M?M.map(function($){return new P($)}):null}static fromMatrix(F,O){var M={profiling:[],logs:[]},$=[];let Z=F[0].length;M.spectra=$,M.info={};let W=O.firstY||0,K=O.lastY||F.length-1,Q=(K-W)/(F.length-1),G=O.firstX||0,ee=O.lastX||Z-1,ne=O.x;if(!ne){ne=Array(Z);for(let se=0;se<Z;se++)ne[se]=G+(K-W)/(Z-1)*se}let ae=O.frequencyX||400;return F.forEach((se,oe)=>{var le={};le.isXYdata=!0,le.nbPoints=Z,le.firstX=G,le.firstY=se[0],le.lastX=ee,le.lastY=se[le.nbPoints-1],le.xFactor=1,le.yFactor=1,le.deltaX=(le.lastX-le.firstX)/(le.nbPoints-1),le.title=O.title||'spectra-data from xy',le.dataType=O.dataType||'nD NMR SPECTRUM',le.observeFrequency=ae,le.data=[{x:ne,y:se}],le.page=W+oe*Q,M.xType=O.xType||O.nucleusX||'1H',$.push(le)}),M.ntuples=[{units:O.xUnit||'PPM'},{units:O.yUnit||'PPM'},{units:O.zUnit||'Intensity'}],M.info['2D_Y_FREQUENCY']=O.frequencyY||400,M.info['2D_X_FREQUENCY']=O.frequencyX||400,M.info.observefrequency=M.info['2D_X_FREQUENCY'],M.info.$BF1=M.info.observefrequency,M.info['.SOLVENTNAME']=O.solvent||'none',M.info.$SW_h=Math.abs(ee-G)*ae,M.info.$SW=Math.abs(ee-G),M.info.$TD=Z,M.info.firstY=W,M.info.lastY=K,M.minMax={minY:W,maxY:K,minX:G,maxX:ee,minZ:0,maxZ:200},M.yType=O.yType||O.nucleusY||'1H',M.twoD=!0,new P(M)}isHomoNuclear(){return this.sd.xType===this.sd.yType}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}observeFrequencyY(){return this.sd.indirectFrequency}getSolventName(){return(this.sd.info['.SOLVENTNAME']||this.sd.info.$SOLVENT).replace('<','').replace('>','')}getXUnits(){return this.sd.ntuples[1].units}getYUnits(){return this.sd.ntuples[0].units}getZUnits(){return this.sd.ntuples[2].units}getLastY(){return this.sd.minMax.maxY}getFirstY(){return this.sd.minMax.minY}getDeltaY(){return(this.getLastY()-this.getFirstY())/(this.getNbSubSpectra()-1)}getMinZ(){return this.sd.minMax.minZ}getMaxZ(){return this.sd.minMax.maxZ}getZones(F){F=F||{},F.thresholdFactor||(F.thresholdFactor=1);var O=Math.round(255*Math.random());F.idPrefix&&(O=F.idPrefix);for(var M=C(this,F.thresholdFactor),$=0;$<M.length;$++)M[$]._highlight=[O+'_'+$],M[$].signalID=O+'_'+$;if(F.references&&R.alignDimensions(M,F.references),'new'===F.format){for(var Z=Array(M.length),W=M.length-1,K;0<=W;W--)K=M[W],Z[W]={fromTo:K.fromTo,integral:K.intensity||1,remark:'',signal:[{peak:K.peaks,delta:[K.shiftX,K.shiftY]}],_highlight:K._highlight,signalID:K.signalID};M=Z}return this.zones=M,this.zones}getNMRPeakThreshold(F){return'1H'===F?3:'13C'===F?5:1}getNucleus(F){return 1===F?this.sd.xType:2===F?this.sd.yType:this.sd.xType}zeroFilling(F,O){return T.zeroFilling(this,F,O)}brukerFilter(){return T.digitalFilter(this,{brukerFilter:!0})}digitalFilter(F){return T.digitalFilter(this,F)}fourierTransform(){return T.fourierTransform(this)}postFourierTransform(F){return T.phaseCorrection(0,F)}}_.exports=P},function(_,S){'use strict';function D(K){var Q=K.length;if(0<Q%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===K[Q-2]?2:'='===K[Q-1]?1:0}function I(K){return F[63&K>>18]+F[63&K>>12]+F[63&K>>6]+F[63&K]}function T(K,Q,G){for(var te=[],ne=Q,ee;ne<G;ne+=3)ee=(K[ne]<<16)+(K[ne+1]<<8)+K[ne+2],te.push(I(ee));return te.join('')}S.byteLength=function(K){return 3*K.length/4-D(K)},S.toByteArray=function(K){var se=K.length,Q,G,ee,te,ne,ae;ne=D(K),ae=new M(3*se/4-ne),ee=0<ne?se-4:se;var oe=0;for(Q=0,G=0;Q<ee;Q+=4,G+=3)te=O[K.charCodeAt(Q)]<<18|O[K.charCodeAt(Q+1)]<<12|O[K.charCodeAt(Q+2)]<<6|O[K.charCodeAt(Q+3)],ae[oe++]=255&te>>16,ae[oe++]=255&te>>8,ae[oe++]=255&te;return 2===ne?(te=O[K.charCodeAt(Q)]<<2|O[K.charCodeAt(Q+1)]>>4,ae[oe++]=255&te):1==ne&&(te=O[K.charCodeAt(Q)]<<10|O[K.charCodeAt(Q+1)]<<4|O[K.charCodeAt(Q+2)]>>2,ae[oe++]=255&te>>8,ae[oe++]=255&te),ae},S.fromByteArray=function(K){for(var G=K.length,ee=G%3,te='',ne=[],ae=16383,se=0,oe=G-ee,Q;se<oe;se+=ae)ne.push(T(K,se,se+ae>oe?oe:se+ae));return 1==ee?(Q=K[G-1],te+=F[Q>>2],te+=F[63&Q<<4],te+='=='):2==ee&&(Q=(K[G-2]<<8)+K[G-1],te+=F[Q>>10],te+=F[63&Q>>4],te+=F[63&Q<<2],te+='='),ne.push(te),ne.join('')};for(var F=[],O=[],M='undefined'==typeof Uint8Array?Array:Uint8Array,$='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',Z=0,W=$.length;Z<W;++Z)F[Z]=$[Z],O[$.charCodeAt(Z)]=Z;O['-'.charCodeAt(0)]=62,O['_'.charCodeAt(0)]=63},function(_,S){S.read=function(E,D,C,R,I){var T,P,F=8*I-R-1,O=(1<<F)-1,M=O>>1,$=-7,Z=C?I-1:0,W=C?-1:1,K=E[D+Z];for(Z+=W,T=K&(1<<-$)-1,K>>=-$,$+=F;0<$;T=256*T+E[D+Z],Z+=W,$-=8);for(P=T&(1<<-$)-1,T>>=-$,$+=R;0<$;P=256*P+E[D+Z],Z+=W,$-=8);if(0===T)T=1-M;else{if(T===O)return P?NaN:(K?-1:1)*Infinity;P+=Math.pow(2,R),T-=M}return(K?-1:1)*P*Math.pow(2,T-R)},S.write=function(E,D,C,R,I,T){var P,F,O,M=8*T-I-1,$=(1<<M)-1,Z=$>>1,W=23===I?Math.pow(2,-24)-Math.pow(2,-77):0,K=R?0:T-1,Q=R?1:-1,G=0>D||0===D&&0>1/D?1:0;for(D=Math.abs(D),isNaN(D)||D===Infinity?(F=isNaN(D)?1:0,P=$):(P=Math.floor(Math.log(D)/Math.LN2),1>D*(O=Math.pow(2,-P))&&(P--,O*=2),D+=1<=P+Z?W/O:W*Math.pow(2,1-Z),2<=D*O&&(P++,O/=2),P+Z>=$?(F=0,P=$):1<=P+Z?(F=(D*O-1)*Math.pow(2,I),P+=Z):(F=D*Math.pow(2,Z-1)*Math.pow(2,I),P=0));8<=I;E[C+K]=255&F,K+=Q,F/=256,I-=8);for(P=P<<I|F,M+=I;0<M;E[C+K]=255&P,K+=Q,P/=256,M-=8);E[C+K-Q]|=128*G}},function(_){'use strict';const D=8192,C=[];_.exports=class{constructor(I,T){T=T||{},I===void 0&&(I=D),'number'==typeof I&&(I=new ArrayBuffer(I));let P=I.byteLength;const F=T.offset?T.offset>>>0:0;I.buffer&&(P=I.byteLength-F,I=I.byteLength===I.buffer.byteLength?F?I.buffer.slice(F):I.buffer:I.buffer.slice(I.byteOffset+F,I.byteOffset+I.byteLength)),this.buffer=I,this.length=P,this.byteLength=P,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=P||D,this._mark=0}available(I){return void 0===I&&(I=1),this.offset+I<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(I){I===void 0&&(I=1),this.offset+=I}seek(I){this.offset=I}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(I){if(void 0===I&&(I=1),!this.available(I)){const T=this._increment+this._increment;this._increment=T;const P=this.length+T,F=new Uint8Array(P);F.set(new Uint8Array(this.buffer)),this.buffer=F.buffer,this.length=P,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(I){I===void 0&&(I=1);for(var T=new Uint8Array(I),P=0;P<I;P++)T[P]=this.readByte();return T}readInt16(){var I=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,I}readUint16(){var I=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,I}readInt32(){var I=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,I}readUint32(){var I=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,I}readFloat32(){var I=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,I}readFloat64(){var I=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,I}readChar(){return String.fromCharCode(this.readInt8())}readChars(I){I===void 0&&(I=1),C.length=I;for(var T=0;T<I;T++)C[T]=this.readChar();return C.join('')}writeBoolean(I){this.writeUint8(I?255:0)}writeInt8(I){this.ensureAvailable(1),this._data.setInt8(this.offset++,I)}writeUint8(I){this.ensureAvailable(1),this._data.setUint8(this.offset++,I)}writeByte(I){this.writeUint8(I)}writeBytes(I){this.ensureAvailable(I.length);for(var T=0;T<I.length;T++)this._data.setUint8(this.offset++,I[T])}writeInt16(I){this.ensureAvailable(2),this._data.setInt16(this.offset,I,this.littleEndian),this.offset+=2}writeUint16(I){this.ensureAvailable(2),this._data.setUint16(this.offset,I,this.littleEndian),this.offset+=2}writeInt32(I){this.ensureAvailable(4),this._data.setInt32(this.offset,I,this.littleEndian),this.offset+=4}writeUint32(I){this.ensureAvailable(4),this._data.setUint32(this.offset,I,this.littleEndian),this.offset+=4}writeFloat32(I){this.ensureAvailable(4),this._data.setFloat32(this.offset,I,this.littleEndian),this.offset+=4}writeFloat64(I){this.ensureAvailable(8),this._data.setFloat64(this.offset,I,this.littleEndian),this.offset+=8}writeChar(I){this.writeUint8(I.charCodeAt(0))}writeChars(I){for(var T=0;T<I.length;T++)this.writeUint8(I.charCodeAt(T))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},function(_){var E={}.toString;_.exports=Array.isArray||function(D){return'[object Array]'==E.call(D)}},function(_){'use strict';var D=/[,\t \+-]*(?=[^\d,\t \.])|[ \t]+(?=[\d+\.-])/,C=/\$\$.*/;_.exports=function(I,T){I.deltaX||(I.deltaX=(I.lastX-I.firstX)/(I.nbPoints-1)),I.isXYdata=!0;var F=[],O=0;I.data=[F];var M=I.firstX,$=I.firstY,Z=T.split(/[\r\n]+/),W,K,Q;K=[];for(var ee=1,te=Z.length;ee<te;ee++)if(K=Z[ee].trim().replace(C,'').split(D),0<K.length)for(var ae=1,se=K.length;ae<se;ae++)if(1===ae&&(W||0===W))W=null,Q=K[ae].charCodeAt(0),!1;else if(0<K[ae].length)if(Q=K[ae].charCodeAt(0),43===Q||45===Q||46===Q||47<Q&&58>Q)W=null,$=+K[ae],F[O++]=M,F[O++]=$*I.yFactor,M+=I.deltaX;else if(63<Q&&74>Q)W=null,$=+(String.fromCharCode(Q-16)+K[ae].substring(1)),F[O++]=M,F[O++]=$*I.yFactor,M+=I.deltaX;else if(96<Q&&106>Q)W=null,$=1*-(String.fromCharCode(Q-48)+K[ae].substring(1)),F[O++]=M,F[O++]=$*I.yFactor,M+=I.deltaX;else if(82<Q&&91>Q||115===Q){var oe=String.fromCharCode(Q-34)+K[ae].substring(1)-1;115==Q&&(oe='9'+K[ae].substring(1)-1);for(var le=0;le<oe;le++)W&&($+=W),F[O++]=M,F[O++]=$*I.yFactor,M+=I.deltaX}else 37===Q?(W=+('0'+K[ae].substring(1)),$+=W,F[O++]=M,F[O++]=$*I.yFactor,M+=I.deltaX):73<Q&&83>Q?(W=1*(String.fromCharCode(Q-25)+K[ae].substring(1)),$+=W,F[O++]=M,F[O++]=$*I.yFactor,M+=I.deltaX):105<Q&&115>Q&&(W=1*-(String.fromCharCode(Q-57)+K[ae].substring(1)),$+=W,F[O++]=M,F[O++]=$*I.yFactor,M+=I.deltaX)}},function(_,S,E){'use strict';var D=E(0),C=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];_.exports=function(I,T){if('undefined'==typeof I||!I.length)return 0;var P='string'!==D.getTypeOf(I);'undefined'==typeof T&&(T=0);var F=0,O=0,M=0;T^=-1;for(var $=0,Z=I.length;$<Z;$++)M=P?I[$]:I.charCodeAt($),O=255&(T^M),F=C[O],T=T>>>8^F;return-1^T}},function(_,S,E){'use strict';var D=E(0);S.string2binary=function(C){return D.string2binary(C)},S.string2Uint8Array=function(C){return D.transformTo('uint8array',C)},S.uint8Array2String=function(C){return D.transformTo('string',C)},S.string2Blob=function(C){var R=D.transformTo('arraybuffer',C);return D.arrayBuffer2Blob(R)},S.arrayBuffer2Blob=function(C){return D.arrayBuffer2Blob(C)},S.transformTo=function(C,R){return D.transformTo(C,R)},S.getTypeOf=function(C){return D.getTypeOf(C)},S.checkSupport=function(C){return D.checkSupport(C)},S.MAX_VALUE_16BITS=D.MAX_VALUE_16BITS,S.MAX_VALUE_32BITS=D.MAX_VALUE_32BITS,S.pretty=function(C){return D.pretty(C)},S.findCompression=function(C){return D.findCompression(C)},S.isRegExp=function(C){return D.isRegExp(C)}},function(_,S,E){'use strict';var D='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Uint32Array,C=E(85);S.uncompressInputType=D?'uint8array':'array',S.compressInputType=D?'uint8array':'array',S.magic='\b\0',S.compress=function(R,I){return C.deflateRaw(R,{level:I.level||-1})},S.uncompress=function(R){return C.inflateRaw(R)}},function(_,S,E){'use strict';function D(R,I){return this instanceof D?void(this.files={},this.comment=null,this.root='',R&&this.load(R,I),this.clone=function(){var T=new D;for(var P in this)'function'!=typeof this[P]&&(T[P]=this[P]);return T}):new D(R,I)}var C=E(7);D.prototype=E(10),D.prototype.load=E(51),D.support=E(3),D.defaults=E(21),D.utils=E(48),D.base64={encode:function(R){return C.encode(R)},decode:function(R){return C.decode(R)}},D.compressions=E(8),_.exports=D},function(_,S,E){'use strict';var D=E(7),C=E(25),R=E(0),I=E(55);_.exports=function(T,P){var F,O,M,$;for(P=R.extend(P||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:C.utf8decode}),P.base64&&(T=D.decode(T)),O=new I(T,P),F=O.files,M=0;M<F.length;M++)$=F[M],this.file($.fileNameStr,$.decompressed,{binary:!0,optimizedBinaryString:!0,date:$.date,dir:$.dir,comment:$.fileCommentStr.length?$.fileCommentStr:null,unixPermissions:$.unixPermissions,dosPermissions:$.dosPermissions,createFolders:P.createFolders});return O.zipComment.length&&(this.comment=O.zipComment),this}},function(_,S,E){'use strict';function D(R){this.data=R,this.length=this.data.length,this.index=0,this.zero=0}var C=E(24);D.prototype=new C,D.prototype.readData=function(R){this.checkOffset(R);var I=this.data.slice(this.zero+this.index,this.zero+this.index+R);return this.index+=R,I},_.exports=D},function(_,S,E){'use strict';var D=E(0),C=function(){this.data=[]};C.prototype={append:function(R){R=D.transformTo('string',R),this.data.push(R)},finalize:function(){return this.data.join('')}},_.exports=C},function(_,S,E){'use strict';var D=E(0),C=function(R){this.data=new Uint8Array(R),this.index=0};C.prototype={append:function(R){0!==R.length&&(R=D.transformTo('uint8array',R),this.data.set(R,this.index),this.index+=R.length)},finalize:function(){return this.data}},_.exports=C},function(_,S,E){'use strict';function D(Z,W){this.files=[],this.loadOptions=W,Z&&this.load(Z)}var C=E(23),R=E(52),I=E(24),T=E(18),P=E(0),F=E(22),O=E(56),M=E(3),$=E(10);D.prototype={checkSignature:function(Z){var W=this.reader.readString(4);if(W!==Z)throw new Error('Corrupted zip or bug : unexpected signature ('+P.pretty(W)+', expected '+P.pretty(Z)+')')},isSignature:function(Z,W){var K=this.reader.index;this.reader.setIndex(Z);var Q=this.reader.readString(4);return this.reader.setIndex(K),Q===W},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Z=this.reader.readData(this.zipCommentLength),W=M.uint8array?'uint8array':'array',K=P.transformTo(W,Z);this.zipComment=this.loadOptions.decodeFileName(K)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Z=this.zip64EndOfCentralSize-44,K,Q,G;0<Z;)K=this.reader.readInt(2),Q=this.reader.readInt(4),G=this.reader.readString(Q),this.zip64ExtensibleData[K]={id:K,length:Q,value:G}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error('Multi-volumes zip are not supported')},readLocalFiles:function(){var Z,W;for(Z=0;Z<this.files.length;Z++)W=this.files[Z],this.reader.setIndex(W.localHeaderOffset),this.checkSignature(F.LOCAL_FILE_HEADER),W.readLocalPart(this.reader),W.handleUTF8(),W.processAttributes()},readCentralDir:function(){var Z;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===F.CENTRAL_FILE_HEADER;)Z=new O({zip64:this.zip64},this.loadOptions),Z.readCentralPart(this.reader),this.files.push(Z);if(this.centralDirRecords!==this.files.length)if(0!==this.centralDirRecords&&0===this.files.length)throw new Error('Corrupted zip or bug: expected '+this.centralDirRecords+' records in central dir, got '+this.files.length);else;},readEndOfCentral:function(){var Z=this.reader.lastIndexOfSignature(F.CENTRAL_DIRECTORY_END);if(0>Z){var W=!this.isSignature(0,F.LOCAL_FILE_HEADER);if(W)throw new Error('Can\'t find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html');else throw new Error('Corrupted zip : can\'t find end of central directory')}this.reader.setIndex(Z);var K=Z;if(this.checkSignature(F.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===P.MAX_VALUE_16BITS||this.diskWithCentralDirStart===P.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===P.MAX_VALUE_16BITS||this.centralDirRecords===P.MAX_VALUE_16BITS||this.centralDirSize===P.MAX_VALUE_32BITS||this.centralDirOffset===P.MAX_VALUE_32BITS){if(this.zip64=!0,Z=this.reader.lastIndexOfSignature(F.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>Z)throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory locator');if(this.reader.setIndex(Z),this.checkSignature(F.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,F.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(F.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory');this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(F.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var Q=this.centralDirOffset+this.centralDirSize;this.zip64&&(Q+=20,Q+=12+this.zip64EndOfCentralSize);var G=K-Q;if(0<G)this.isSignature(K,F.CENTRAL_FILE_HEADER)||(this.reader.zero=G);else if(0>G)throw new Error('Corrupted zip: missing '+Math.abs(G)+' bytes.')},prepareReader:function(Z){var W=P.getTypeOf(Z);if(P.checkSupport(W),'string'===W&&!M.uint8array)this.reader=new C(Z,this.loadOptions.optimizedBinaryString);else if('nodebuffer'===W)this.reader=new R(Z);else if(M.uint8array)this.reader=new I(P.transformTo('uint8array',Z));else if(M.array)this.reader=new T(P.transformTo('array',Z));else throw new Error('Unexpected error: unsupported type \''+W+'\'')},load:function(Z){this.prepareReader(Z),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},_.exports=D},function(_,S,E){'use strict';function D(M,$){this.options=M,this.loadOptions=$}var C=E(23),R=E(0),I=E(19),T=E(10),P=E(3);D.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(M,$,Z){return function(){var W=M.index;M.setIndex($);var K=M.readData(Z);return M.setIndex(W),K}},prepareContent:function(M,$,Z,W,K){return function(){var Q=R.transformTo(W.uncompressInputType,this.getCompressedContent()),G=W.uncompress(Q);if(G.length!==K)throw new Error('Bug : uncompressed data size mismatch');return G}},readLocalPart:function(M){var $,Z;if(M.skip(22),this.fileNameLength=M.readInt(2),Z=M.readInt(2),this.fileName=M.readData(this.fileNameLength),M.skip(Z),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error('Bug or corrupted zip : didn\'t get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)');if($=R.findCompression(this.compressionMethod),null===$)throw new Error('Corrupted zip : compression '+R.pretty(this.compressionMethod)+' unknown (inner file : '+R.transformTo('string',this.fileName)+')');if(this.decompressed=new I,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(M,M.index,this.compressedSize,$),this.decompressed.getContent=this.prepareContent(M,M.index,this.compressedSize,$,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=R.transformTo('string',this.decompressed.getContent()),T.crc32(this.decompressed)!==this.crc32))throw new Error('Corrupted zip : CRC32 mismatch')},readCentralPart:function(M){if(this.versionMadeBy=M.readInt(2),this.versionNeeded=M.readInt(2),this.bitFlag=M.readInt(2),this.compressionMethod=M.readString(2),this.date=M.readDate(),this.crc32=M.readInt(4),this.compressedSize=M.readInt(4),this.uncompressedSize=M.readInt(4),this.fileNameLength=M.readInt(2),this.extraFieldsLength=M.readInt(2),this.fileCommentLength=M.readInt(2),this.diskNumberStart=M.readInt(2),this.internalFileAttributes=M.readInt(2),this.externalFileAttributes=M.readInt(4),this.localHeaderOffset=M.readInt(4),this.isEncrypted())throw new Error('Encrypted zip are not supported');this.fileName=M.readData(this.fileNameLength),this.readExtraFields(M),this.parseZIP64ExtraField(M),this.fileComment=M.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var M=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),M==0&&(this.dosPermissions=63&this.externalFileAttributes),M==3&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||'/'!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var $=new C(this.extraFields[1].value);this.uncompressedSize===R.MAX_VALUE_32BITS&&(this.uncompressedSize=$.readInt(8)),this.compressedSize===R.MAX_VALUE_32BITS&&(this.compressedSize=$.readInt(8)),this.localHeaderOffset===R.MAX_VALUE_32BITS&&(this.localHeaderOffset=$.readInt(8)),this.diskNumberStart===R.MAX_VALUE_32BITS&&(this.diskNumberStart=$.readInt(4))}},readExtraFields:function(M){var $=M.index,Z,W,K;for(this.extraFields=this.extraFields||{};M.index<$+this.extraFieldsLength;)Z=M.readInt(2),W=M.readInt(2),K=M.readString(W),this.extraFields[Z]={id:Z,length:W,value:K}},handleUTF8:function(){var M=P.uint8array?'uint8array':'array';if(this.useUTF8())this.fileNameStr=T.utf8decode(this.fileName),this.fileCommentStr=T.utf8decode(this.fileComment);else{var $=this.findExtraFieldUnicodePath();if(null!==$)this.fileNameStr=$;else{var Z=R.transformTo(M,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Z)}var W=this.findExtraFieldUnicodeComment();if(null!==W)this.fileCommentStr=W;else{var K=R.transformTo(M,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(K)}}},findExtraFieldUnicodePath:function(){var M=this.extraFields[28789];if(M){var $=new C(M.value);return 1===$.readInt(1)?T.crc32(this.fileName)===$.readInt(4)?T.utf8decode($.readString(M.length-5)):null:null}return null},findExtraFieldUnicodeComment:function(){var M=this.extraFields[25461];if(M){var $=new C(M.value);return 1===$.readInt(1)?T.crc32(this.fileComment)===$.readInt(4)?T.utf8decode($.readString(M.length-5)):null:null}return null}},_.exports=D},function(_,S,E){'use strict';function I(M){for(var $=Array(M[0].length),Z=0;Z<$.length;++Z)$[Z]=Array(M.length);for(Z=0;Z<M.length;++Z)for(var W=0;W<M[0].length;++W)$[W][Z]=M[Z][W];return $}const O=E(5).array;_.exports={coordArrayToPoints:function(M,$){if(0!=M.length%$)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var Z=M.length/$,W=Array(Z),K=0,Q=0,G;Q<M.length;Q+=$){G=Array($);for(var ee=0;ee<$;++ee)G[ee]=M[Q+ee];W[K]=G,K++}return W},coordArrayToCoordMatrix:function(M,$){if(0!=M.length%$)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var Z=Array($),W=M.length/$,K=0;K<Z.length;K++)Z[K]=Array(W);for(K=0;K<M.length;K+=$)for(var Q=0,G;Q<$;++Q)G=Math.floor(K/$),Z[Q][G]=M[K+Q];return Z},coordMatrixToCoordArray:function(M){for(var $=Array(M.length*M[0].length),Z=0,W=0;W<M[0].length;++W)for(var K=0;K<M.length;++K)$[Z]=M[K][W],++Z;return $},coordMatrixToPoints:I,pointsToCoordArray:function(M){for(var $=Array(M.length*M[0].length),Z=0,W=0;W<M.length;++W)for(var K=0;K<M[0].length;++K)$[Z]=M[W][K],++Z;return $},pointsToCoordMatrix:I,applyDotProduct:function(M,$){var Z,W;M.length<=$.length?(W=M,Z=$):(W=$,Z=M);for(var K=Z.length-W.length+1,Q=Array(K),G=0,ee;G<K;++G){ee=0;for(var te=0;te<W.length;++te)ee+=W[te]*Z[G+te];Q[G]=ee}return Q},scale:function(M,$){var Z=$.inPlace?M:Array(M.length);const W=$.max,K=$.min;if('number'==typeof W){if('number'==typeof K)for(var Q=O.minMax(M),G=(W-K)/(Q.max-Q.min),ee=0;ee<Z.length;ee++)Z[ee]=(M[ee]-Q.min)*G+K;else for(var te=O.max(M),G=W/te,ee=0;ee<Z.length;ee++)Z[ee]=M[ee]*G;}else if('number'==typeof K)for(var te=O.min(M),G=K/te,ee=0;ee<Z.length;ee++)Z[ee]=M[ee]*G;return Z}}},function(_,S){'use strict';function C(T,P,F,O,M){function $(_e,ye,xe,we){return(we-ye)/(xe-_e)}var Z=T.length,W=(O-F)/(M-1),Q=F-W/2,G=Array(M),ee=T[1]-T[0],te=T[T.length-1]-T[T.length-2],ne=Q,ae=Q+W,se=Number.MIN_VALUE,oe=0,le=T[0]-ee,de=0,ue=0,he=0,ge=0,pe=0,fe=0,ce=0,me=0;main:for(;;){for(;0<=le-ae;){var be=I(0,ae-se,he,oe);if(fe=ue+be,G[me]=(fe-pe)/W,me++,me===M)break main;ne=ae,ae+=W,pe=fe}se<=ne&&ne<=le&&(be=I(0,ne-se,he,oe),pe=ue+be),ue+=I(se,le,he,ge),se=le,oe=de,ce<Z?(le=T[ce],de=P[ce],ce++):ce===Z&&(le+=te,de=0),he=$(se,oe,le,de),ge=-he*se+oe}return G}function R(T,P,F,O,M){var $=T.length,Z=(O-F)/(M-1),K=T[T.length-1]-T[T.length-2],Q=F-Z/2,G=Array(M),ee=Q,te=Q+Z,ne=-Number.MAX_VALUE,ae=0,se=T[0],oe=P[0],le=0,de=!0,ue=0,he=0,ge=1,pe=0;main:for(;;){if(ne>=se)throw new Error('x must be an increasing serie');for(;0<ne-te;){if(de&&(he++,de=!1),G[pe]=0>=he?0:ue/he,pe++,pe===M)break main;ee=te,te+=Z,ue=0,he=0}ne>ee&&(ue+=ae,he++),(ne==-Number.MAX_VALUE||1<le)&&he--,ne=se,ae=oe,ge<$?(se=T[ge],oe=P[ge],ge++):(se+=K,oe=0,le++)}return G}function I(T,P,F,O){return 0.5*F*P*P+O*P-(0.5*F*T*T+O*T)}S.getEquallySpacedData=function(T,P,F){1<T.length&&T[0]>T[1]&&(T=T.slice().reverse(),P=P.slice().reverse());var O=T.length;if(O!==P.length)throw new RangeError('the x and y vector doesn\'t have the same size.');F===void 0&&(F={});var M=F.from===void 0?T[0]:F.from;if(isNaN(M)||!isFinite(M))throw new RangeError('\'From\' value must be a number');var $=F.to===void 0?T[T.length-1]:F.to;if(isNaN($)||!isFinite($))throw new RangeError('\'To\' value must be a number');var Z=M>$;if(Z){var W=M;M=$,$=W}var K=F.numberOfPoints===void 0?100:F.numberOfPoints;if(isNaN(K)||!isFinite(K))throw new RangeError('\'Number of points\' value must be a number');if(1>K)throw new RangeError('the number of point must be higher than 1');var Q='slot'===F.variant?'slot':'smooth',G='slot'==Q?R(T,P,M,$,K):C(T,P,M,$,K);return Z?G.reverse():G},S.integral=I},function(_,S,E){_.exports=S=E(57),S.getEquallySpacedData=E(58).getEquallySpacedData,S.SNV=E(60).SNV},function(_,S,E){'use strict';S.SNV=function(R){for(var I=C.mean(R),T=C.standardDeviation(R),P=R.slice(),F=0;F<R.length;F++)P[F]=(P[F]-I)/T;return P};var C=E(5).array},function(_){'use strict';function D(R){this.value=R,this.parent=null,this.rank=0}_.exports=class{constructor(){this.nodes=new Map}add(R){var I=this.nodes.get(R);return I||(I=new D(R),this.nodes.set(R,I)),I}union(R,I){const T=this.find(R),P=this.find(I);T===P||(T.rank<P.rank?T.parent=P:T.rank>P.rank?P.parent=T:(P.parent=T,T.rank++))}find(R){for(var I=R;null!==I.parent;)I=I.parent;for(var T=R,P;null!==T.parent;)P=T,T=T.parent,P.parent=I;return I}connected(R,I){return this.find(R)===this.find(I)}}},function(_,S,E){'use strict';var D=E(26);_.exports={DEBUG:!1,ifft2DArray:function(R,I,T){var P=Array(I*T),F=I/2,O=2*(T-1);D.init(F);for(var M={re:Array(F),im:Array(F)},$=0;$<T;$++){for(var Z=F-1;0<=Z;Z--)M.re[Z]=R[2*Z*T+$],M.im[Z]=R[(2*Z+1)*T+$];D.bt(M.re,M.im);for(var Z=F-1;0<=Z;Z--)P[2*Z*T+$]=M.re[Z],P[(2*Z+1)*T+$]=M.im[Z]}var W=Array(F*O);D.init(O);for(var K={re:Array(O),im:Array(O)},Z=0;Z<I;Z+=2){K.re[0]=P[Z*T],K.im[0]=P[(Z+1)*T];for(var $=1;$<T;$++)K.re[$]=P[Z*T+$],K.im[$]=P[(Z+1)*T+$],K.re[O-$]=P[Z*T+$],K.im[O-$]=-P[(Z+1)*T+$];D.bt(K.re,K.im);for(var G=Z/2*O,$=O-1;0<=$;$--)W[G+$]=K.re[$]/(O*F)}return W},fft2DArray:function(R,I,T){var F=Object.assign({},{inplace:!0}),O=T/2+1,M=2*I,$=Array(M*O);D.init(T);for(var Z={re:Array(T),im:Array(T)},W={re:Array(T),im:Array(T)},K={re:Array(T),im:Array(T)},ae=0,Q,G,ee,te,ne;ae<I/2;ae++){Q=2*ae*T,Z.re=R.slice(Q,Q+T),Q=(2*ae+1)*T,Z.im=R.slice(Q,Q+T),D.fft1d(Z.re,Z.im),this.reconstructTwoRealFFT(Z,W,K),G=4*ae*O,ee=(4*ae+1)*O,te=(4*ae+2)*O,ne=(4*ae+3)*O;for(var se=O-1;0<=se;se--)$[G+se]=W.re[se],$[ee+se]=W.im[se],$[te+se]=K.re[se],$[ne+se]=K.im[se]}W=null,K=null;var oe=Array(M*O);D.init(I);for(var le={re:Array(I),im:Array(I)},de=O-1;0<=de;de--){for(var ae=I-1;0<=ae;ae--)le.re[ae]=$[2*ae*O+de],le.im[ae]=$[(2*ae+1)*O+de],isNaN(le.re[ae])&&(le.re[ae]=0),isNaN(le.im[ae])&&(le.im[ae]=0);D.fft1d(le.re,le.im);for(var ae=I-1;0<=ae;ae--)oe[2*ae*O+de]=le.re[ae],oe[(2*ae+1)*O+de]=le.im[ae]}return oe},reconstructTwoRealFFT:function(R,I,T){var P=R.re.length;I.re[0]=R.re[0],I.im[0]=0,T.re[0]=R.im[0],T.im[0]=0;for(var W=P/2,F,O,M,$,Z;0<W;W--)Z=P-W,F=0.5*(R.re[W]-R.re[Z]),O=0.5*(R.re[W]+R.re[Z]),M=0.5*(R.im[W]-R.im[Z]),$=0.5*(R.im[W]+R.im[Z]),I.re[W]=O,I.im[W]=M,I.re[Z]=O,I.im[Z]=-M,T.re[W]=$,T.im[W]=-F,T.re[Z]=$,T.im[Z]=F},convolute2DI:function(R,I,T,P){for(var M=0,F,O;M<T/2;M++)for(var $=0;$<P;$++)F=R[2*M*P+$]*I[2*M*P+$]-R[(2*M+1)*P+$]*I[(2*M+1)*P+$],O=R[2*M*P+$]*I[(2*M+1)*P+$]+R[(2*M+1)*P+$]*I[2*M*P+$],R[2*M*P+$]=F,R[(2*M+1)*P+$]=O},convolute:function(R,I,T,P){for(var O=Array(P*T),M=0;M<T*P;M++)O[M]=R[M];O=this.fft2DArray(O,T,P);for(var $=I.length,Z=I[0].length,W=Array(P*T),M=0;M<P*T;M++)W[M]=0;for(var G=Math.floor(($-1)/2),ee=Math.floor((Z-1)/2),te=0,K,Q;te<$;te++){K=(te-G+T)%T;for(var ne=0;ne<Z;ne++)Q=(ne-ee+P)%P,W[K*P+Q]=I[te][ne]}W=this.fft2DArray(W,T,P);var ae=2*T,se=P/2+1;return this.convolute2DI(O,W,ae,se),this.ifft2DArray(O,ae,se)},toRadix2:function(R,I,T){var P,F,O,M,$=T,Z=I,W=0,K=0;if(0===T||0!=(T&T-1)){for($=0;0!=T>>++$;);$=1<<$,K=$-T}if(0===I||0!=(I&I-1)){for(Z=0;0!=I>>++Z;);Z=1<<Z,W=(Z-I)*$}if(Z==I&&$==T)return{data:R,rows:I,cols:T};var Q=Array(Z*$),G=Math.floor((Z-I)/2)-I,ee=Math.floor(($-T)/2)-T;for(P=0;P<Z;P++)for(O=P*$,M=(P-G)%I*T,F=0;F<$;F++)Q[O+F]=R[M+(F-ee)%T];return{data:Q,rows:Z,cols:$}},crop:function(R,I,T,P,F,O){if(I==P&&T==F)return R;var M=Object.assign({},O),$=Array(F*P),Z=Math.floor((I-P)/2),W=Math.floor((T-F)/2),K,Q,G,ee;for(G=0;G<P;G++)for(K=G*F,Q=(G+Z)*T,ee=0;ee<F;ee++)$[K+ee]=R[Q+(ee+W)];return $}}},function(_,S,E){'use strict';function C(F){var O=0,M=0,$=F.length;for(let W=0;W<$;++W)O+=F[W];O/=$;var Z=Array($);for(let W=0;W<$;++W)Z[W]=Math.abs(F[W]-O);return Z.sort(),M=1==$%2?Z[($-1)/2]/0.6745:0.5*(Z[$/2]+Z[$/2-1])/0.6745,M}function R(F,O,M){for(var G=0,$,Z,W,K,Q;G<F.length;G++)Q=F[G].i,M[Q-1]>=M[Q-2]&&M[Q-1]>=M[Q]?Q--:M[Q+1]>=M[Q]&&M[Q+1]>=M[Q+2]?Q++:M[Q-2]>=M[Q-3]&&M[Q-2]>=M[Q-1]?Q-=2:M[Q+2]>=M[Q+1]&&M[Q+2]>=M[Q+3]&&(Q+=2),0<M[Q-1]&&0<M[Q+1]&&M[Q]>=M[Q-1]&&M[Q]>=M[Q+1]&&($=20*Math.log10(M[Q-1]),Z=20*Math.log10(M[Q]),W=20*Math.log10(M[Q+1]),K=0.5*($-W)/($-2*Z+W),F[G].x=O[Q]+(O[Q]-O[Q-1])*K,F[G].y=M[Q]-0.25*(M[Q-1]-M[Q+1])*K)}const I=E(16),T=E(82),P={sgOptions:{windowSize:9,polynomial:3},minMaxRatio:2.5e-4,broadRatio:0,maxCriteria:!0,smoothY:!0,realTopDetection:!1,heightFactor:0,boundaries:!1,derivativeThreshold:-1};_.exports=function(F,O,M){M=I({},P,M);let $=M.sgOptions;const Z=[].concat(O);if(!('noiseLevel'in M)){var W=0,K=Number.MAX_VALUE,Q;for(let De=0;De<F.length-1;++De)Q=Math.abs(F[De+1]-F[De]),Q<K&&(K=Q),Q>W&&(W=Q);M.noiseLevel=0.05>(W-K)/W?C(Z):0}const G={m:1,b:M.noiseLevel};M.maxCriteria||(G.m=-1,G.b*=-1);for(let De=0;De<Z.length;De++)Z[De]=G.m*Z[De]-G.b;for(let De=0;De<Z.length;De++)0>Z[De]&&(Z[De]=0);let ee=Z,te,ne;0.05>(W-K)/W?(M.smoothY&&(ee=T(Z,F[1]-F[0],{windowSize:$.windowSize,polynomial:$.polynomial,derivative:0})),te=T(Z,F[1]-F[0],{windowSize:$.windowSize,polynomial:$.polynomial,derivative:1}),ne=T(Z,F[1]-F[0],{windowSize:$.windowSize,polynomial:$.polynomial,derivative:2})):(M.smoothY&&(ee=T(Z,F,{windowSize:$.windowSize,polynomial:$.polynomial,derivative:0})),te=T(Z,F,{windowSize:$.windowSize,polynomial:$.polynomial,derivative:1}),ne=T(Z,F,{windowSize:$.windowSize,polynomial:$.polynomial,derivative:2}));const ae=F,se=F[1]-F[0];var oe=0,le=0;for(let De=0;De<ee.length;De++)Math.abs(ne[De])>oe&&(oe=Math.abs(ne[De])),Math.abs(ee[De])>le&&(le=Math.abs(ee[De]));var de=null,ue=null,he=Array(ee.length-2),ge=Array(ee.length),pe=Array(ee.length),fe=Array(ee.length-2),ce=0,me=0,be=0,_e=0;for(let De=1;De<ee.length-1;++De)Math.abs(te[De])>M.derivativeThreshold&&((te[De]<te[De-1]&&te[De]<=te[De+1]||te[De]<=te[De-1]&&te[De]<te[De+1])&&(ue={x:ae[De],index:De},0<se&&null!=de&&(ge[me++]=de,pe[be++]=ue)),(te[De]>=te[De-1]&&te[De]>te[De+1]||te[De]>te[De-1]&&te[De]>=te[De+1])&&(de={x:ae[De],index:De},0>se&&null!=ue&&(ge[me++]=de,pe[be++]=ue))),ne[De]<ne[De-1]&&ne[De]<ne[De+1]&&(he[ce++]=De,fe[_e++]=Math.abs(ne[De])<=M.broadRatio*oe);he.length=ce,ge.length=me,pe.length=be,fe.length=_e;let ye=Array(he.length),xe=0,we=-1,ke,je,ve,Se,Ee;for(let De=0;De<he.length;++De){je=ae[he[De]],ke=-1;let Ce=we+1;for(Se=Number.MAX_VALUE,ve=0,Ee=!0;-1===ke&&Ce<ge.length&&Ee;)ve=Math.abs(je-(ge[Ce].x+pe[Ce].x)/2),ve<Se?Se=ve:Ee=!1,ve<Math.abs(ge[Ce].x-pe[Ce].x)/2&&(ke=Ce,we=Ce),++Ce;if(-1!==ke&&Math.abs(ee[he[De]])>M.minMaxRatio*le&&(ye[xe++]={index:he[De],x:je,y:(ee[he[De]]+G.b)/G.m,width:Math.abs(pe[ke].x-ge[ke].x),soft:fe[De]},M.boundaries&&(ye[xe-1].left=ge[ke],ye[xe-1].right=pe[ke]),M.heightFactor)){let Ae=ee[ge[ke].index],Re=ee[pe[ke].index];ye[xe-1].height=M.heightFactor*(ye[xe-1].y-(Ae+Re)/2)}}ye.length=xe,M.realTopDetection&&R(ye,ae,ee);for(let De=0;De<ye.length;De++)ye[De].base=M.noiseLevel;return ye.sort(function(De,Ce){return De.x-Ce.x}),ye}},function(_,S,E){'use strict';_.exports.post=E(65),_.exports.gsd=E(63)},function(_,S,E){'use strict';function D(P,F,O,M,$){var Z=O.length,W=[],K=[],Q=Math.sign(O[1]-O[0]);-1===Q&&($[0]=O.length-1);for(var G=Math.abs(F-P)/2,ee=(P+F)/2,te=!1,ne=$[0];!te&&ne<Z&&0<=ne;)Math.abs(O[ne]-ee)<=G?(W.push(O[ne]),K.push(M[ne]),ne+=Q):1===Math.sign(ee-O[ne])?ne+=Q:te=!0;return $[0]=ne,[W,K]}function R(P,F){var O=[],M=[],$,Z,W=[P[0].x,F*P[0].width],K,Q;for($=0;$<P.length;$++)Math.abs(P[$].x-W[0])<F*P[$].width+W[1]?(O.push(P[$]),K=W[0]+W[1],P[$].x+F*P[$].width>K&&(K=P[$].x+F*P[$].width),Q=W[0]-W[1],P[$].x-F*P[$].width<Q&&(Q=P[$].x-F*P[$].width),W=[(K+Q)/2,Math.abs(K-Q)/2]):(M.push({limits:W,group:O}),O=[P[$]],W=[P[$].x,F*P[$].width]);for(M.push({limits:W,group:O}),$=M.length-2;0<=$;$--)if(Math.abs(M[$].limits[0]-M[$+1].limits[0])<(M[$].limits[1]+M[$+1].limits[1])/2){for(Z=0;Z<M[$+1].group.length;Z++)M[$].group.push(M[$+1].group[Z]);K=M[$].limits[0]+M[$].limits[1],M[$+1].limits[0]+M[$+1].limits[1]>K&&(K=M[$+1].limits[0]+M[$+1].limits[1]),Q=M[$].limits[0]-M[$].limits[1],M[$+1].limits[0]-M[$+1].limits[1]<Q&&(Q=M[$+1].limits[0]-M[$+1].limits[1]),M[$].limits=[(K+Q)/2,Math.abs(K-Q)/2],M.splice($+1,1)}return M}var T=E(79);_.exports={optimizePeaks:function(P,F,O,M,$){var K=[0],Z,W,Q=R(P,M),G=[],ee=1;'gaussian'===$&&(ee=1.17741);var te,ne,ae;for(Z=0;Z<Q.length;Z++){var se=Q[Z].group;if(1<se.length){if(te=D(Q[Z].limits[0]-Q[Z].limits[1],Q[Z].limits[0]+Q[Z].limits[1],F,O,K),5<te[0].length){ne=se[0].width/1e3,ae=[3,100,ne,ne,ne,10*ne,10*ne,11,9,1];var oe=[];for('gaussian'===$?oe=T.optimizeGaussianSum(te,se,ae):'lorentzian'==$&&(oe=T.optimizeLorentzianSum(te,se,ae)),W=0;W<oe.length;W++)G.push({x:oe[W][0][0],y:oe[W][1][0],width:oe[W][2][0]*ee})}}else if(se=se[0],te=D(se.x-M*se.width,se.x+M*se.width,F,O,K),5<te[0].length){ne=se.width/1e3,ae=[3,100,ne,ne,ne,10*ne,10*ne,11,9,1];var le=[];'gaussian'===$?le=T.optimizeSingleGaussian([te[0],te[1]],se,ae):'lorentzian'==$&&(le=T.optimizeSingleLorentzian([te[0],te[1]],se,ae)),G.push({x:le[0][0],y:le[1][0],width:le[2][0]*ee})}}return G},joinBroadPeaks:function(P,F){var O=F.width,M=[],$=0,Z=0,W=1;for(let ee=P.length-1;0<=ee;ee--)P[ee].soft&&M.push(P.splice(ee,1)[0]);M.push({x:Number.MAX_VALUE});var K=[[M[0].x,M[0].y]],Q=[0];for(let ee=1;ee<M.length;ee++)if(Math.abs(M[ee-1].x-M[ee].x)<O)K.push([M[ee].x,M[ee].y]),M[ee].y>$&&($=M[ee].y,Z=ee),Q.push(ee),W++;else{if(2<W){var G=T.optimizeSingleLorentzian(K,{x:M[Z].x,y:$,width:Math.abs(K[0][0]-K[K.length-1][0])});P.push({x:G[0][0],y:G[1][0],width:G[2][0],soft:!1})}else Q.map(function(te){P.push(M[te])});K=[[M[ee].x,M[ee].y]],Q=[ee],$=M[ee].y,Z=ee,W=1}return P.sort(function(ee,te){return ee.x-te.x}),P}}},function(_,S,E){'use strict';var D=E(28);_.exports={DEBUG:!1,ifft2DArray:function(R,I,T){var P=Array(I*T),F=I/2,O=2*(T-1);D.init(F);for(var M={re:Array(F),im:Array(F)},$=0;$<T;$++){for(var Z=F-1;0<=Z;Z--)M.re[Z]=R[2*Z*T+$],M.im[Z]=R[(2*Z+1)*T+$];D.bt(M.re,M.im);for(var Z=F-1;0<=Z;Z--)P[2*Z*T+$]=M.re[Z],P[(2*Z+1)*T+$]=M.im[Z]}var W=Array(F*O);D.init(O);for(var K={re:Array(O),im:Array(O)},Z=0;Z<I;Z+=2){K.re[0]=P[Z*T],K.im[0]=P[(Z+1)*T];for(var $=1;$<T;$++)K.re[$]=P[Z*T+$],K.im[$]=P[(Z+1)*T+$],K.re[O-$]=P[Z*T+$],K.im[O-$]=-P[(Z+1)*T+$];D.bt(K.re,K.im);for(var G=Z/2*O,$=O-1;0<=$;$--)W[G+$]=K.re[$]/(O*F)}return W},fft2DArray:function(R,I,T){var F=Object.assign({},{inplace:!0}),O=T/2+1,M=2*I,$=Array(M*O);D.init(T);for(var Z={re:Array(T),im:Array(T)},W={re:Array(T),im:Array(T)},K={re:Array(T),im:Array(T)},ae=0,Q,G,ee,te,ne;ae<I/2;ae++){Q=2*ae*T,Z.re=R.slice(Q,Q+T),Q=(2*ae+1)*T,Z.im=R.slice(Q,Q+T),D.fft1d(Z.re,Z.im),this.reconstructTwoRealFFT(Z,W,K),G=4*ae*O,ee=(4*ae+1)*O,te=(4*ae+2)*O,ne=(4*ae+3)*O;for(var se=O-1;0<=se;se--)$[G+se]=W.re[se],$[ee+se]=W.im[se],$[te+se]=K.re[se],$[ne+se]=K.im[se]}W=null,K=null;var oe=Array(M*O);D.init(I);for(var le={re:Array(I),im:Array(I)},de=O-1;0<=de;de--){for(var ae=I-1;0<=ae;ae--)le.re[ae]=$[2*ae*O+de],le.im[ae]=$[(2*ae+1)*O+de],isNaN(le.re[ae])&&(le.re[ae]=0),isNaN(le.im[ae])&&(le.im[ae]=0);D.fft1d(le.re,le.im);for(var ae=I-1;0<=ae;ae--)oe[2*ae*O+de]=le.re[ae],oe[(2*ae+1)*O+de]=le.im[ae]}return oe},reconstructTwoRealFFT:function(R,I,T){var P=R.re.length;I.re[0]=R.re[0],I.im[0]=0,T.re[0]=R.im[0],T.im[0]=0;for(var W=P/2,F,O,M,$,Z;0<W;W--)Z=P-W,F=0.5*(R.re[W]-R.re[Z]),O=0.5*(R.re[W]+R.re[Z]),M=0.5*(R.im[W]-R.im[Z]),$=0.5*(R.im[W]+R.im[Z]),I.re[W]=O,I.im[W]=M,I.re[Z]=O,I.im[Z]=-M,T.re[W]=$,T.im[W]=-F,T.re[Z]=$,T.im[Z]=F},convolute2DI:function(R,I,T,P){for(var M=0,F,O;M<T/2;M++)for(var $=0;$<P;$++)F=R[2*M*P+$]*I[2*M*P+$]-R[(2*M+1)*P+$]*I[(2*M+1)*P+$],O=R[2*M*P+$]*I[(2*M+1)*P+$]+R[(2*M+1)*P+$]*I[2*M*P+$],R[2*M*P+$]=F,R[(2*M+1)*P+$]=O},convolute:function(R,I,T,P){for(var O=Array(P*T),M=0;M<T*P;M++)O[M]=R[M];O=this.fft2DArray(O,T,P);for(var $=I.length,Z=I[0].length,W=Array(P*T),M=0;M<P*T;M++)W[M]=0;for(var G=Math.floor(($-1)/2),ee=Math.floor((Z-1)/2),te=0,K,Q;te<$;te++){K=(te-G+T)%T;for(var ne=0;ne<Z;ne++)Q=(ne-ee+P)%P,W[K*P+Q]=I[te][ne]}W=this.fft2DArray(W,T,P);var ae=2*T,se=P/2+1;return this.convolute2DI(O,W,ae,se),this.ifft2DArray(O,ae,se)},toRadix2:function(R,I,T){var P,F,O,M,$=T,Z=I,W=0,K=0;if(0===T||0!=(T&T-1)){for($=0;0!=T>>++$;);$=1<<$,K=$-T}if(0===I||0!=(I&I-1)){for(Z=0;0!=I>>++Z;);Z=1<<Z,W=(Z-I)*$}if(Z==I&&$==T)return{data:R,rows:I,cols:T};var Q=Array(Z*$),G=Math.floor((Z-I)/2)-I,ee=Math.floor(($-T)/2)-T;for(P=0;P<Z;P++)for(O=P*$,M=(P-G)%I*T,F=0;F<$;F++)Q[O+F]=R[M+(F-ee)%T];return{data:Q,rows:Z,cols:$}},crop:function(R,I,T,P,F,O){if(I==P&&T==F)return R;var M=Object.assign({},O),$=Array(F*P),Z=Math.floor((I-P)/2),W=Math.floor((T-F)/2),K,Q,G,ee;for(G=0;G<P;G++)for(K=G*P,Q=(G+Z)*T,ee=0;ee<F;ee++)$[K+ee]=R[Q+(ee+W)];return $}}},function(_,S,E){'use strict';S.FFTUtils=E(66),S.FFT=E(28)},function(_,S,E){'use strict;';function I(P){var F=P,O,M;if('number'!=typeof P[0]){O=P.length,M=P[0].length,F=Array(O*M);for(var $=0;$<O;$++)for(var Z=0;Z<M;Z++)F[$*M+Z]=P[$][Z]}else{var W=Math.sqrt(P.length);Number.isInteger(W)&&(O=W,M=W)}return{data:F,rows:O,cols:M}}var T=E(67).FFTUtils;_.exports={fft:function(P,F,O){var M=I(P),$=M.data,Z=Object.assign({normalize:!1,divisor:1,rows:M.rows,cols:M.cols},O),W,K;if(Z.rows&&Z.cols)W=Z.rows,K=Z.cols;else throw new Error('Invalid number of rows or columns '+W+' '+K);var Q=Z.divisor,te=F.length,ne=F[0].length,G,ee;if(Z.normalize)for(Q=0,G=0;G<te;G++)for(ee=0;ee<ne;ee++)Q+=F[G][ee];if(0===Q)throw new RangeError('convolution: The divisor is equal to zero');var ae=T.toRadix2($,W,K),se=T.convolute(ae.data,F,ae.rows,ae.cols);if(se=T.crop(se,ae.rows,ae.cols,W,K),0!=Q)for(G=0;G<se.length;G++)se[G]/Q;return se},direct:function(P,F,O){var M=I(P),$=M.data,Z=Object.assign({normalize:!1,divisor:1,rows:M.rows,cols:M.cols},O),W,K;if(Z.rows&&Z.cols)W=Z.rows,K=Z.cols;else throw new Error('Invalid number of rows or columns '+W+' '+K);var Q=Z.divisor,G=F.length,ee=F[0].length,te,ne,ae,se,oe,le,de,ue,he;if(Z.normalize)for(Q=0,te=0;te<G;te++)for(ne=0;ne<ee;ne++)Q+=F[te][ne];if(0===Q)throw new RangeError('convolution: The divisor is equal to zero');var ge=Array(W*K),pe=Math.floor(G/2),fe=Math.floor(ee/2);for(se=0;se<W;se++)for(ae=0;ae<K;ae++){for(le=0,ne=0;ne<G;ne++)for(te=0;te<ee;te++)de=F[G-ne-1][ee-te-1],ue=(se+ne-pe+W)%W,he=(ae+te-fe+K)%K,oe=ue*K+he,le+=$[oe]*de;oe=se*K+ae,ge[oe]=le/Q}return ge},kernelFactory:{LoG:function(P,F,O){var M=1e3;O&&O.factor&&(M=O.factor);var $=Array(F),Z,W,K,Q;M*=-1;var ee=(F-1)/2;for(Z=0;Z<F;Z++)for($[Z]=Array(F),Q=(Z-ee)*(Z-ee),W=0;W<F;W++)K=-((W-ee)*(W-ee)+Q)/(2*P*P),$[Z][W]=Math.round(M*(1+K)*Math.exp(K));return $}},matrix2Array:I}},function(_,S,E){'use strict';const C=E(61),R=[-1,0],I=[0,-1],T=[null,null],P=[-1,-1,0,1],F=[0,-1,-1,-1],O=[null,null,null,null];_.exports=function(M,$,Z,W){W=W||{};const K=W.neighbours||8;var Q,G,ee;if(8===K)Q=P,G=F,ee=O;else if(4===K)Q=R,G=I,ee=T;else throw new RangeError('unsupported neighbours count: '+K);const te=M.length,ne=Array(te),ae=new Int16Array(te),se=new C;for(var le=1,de=0,oe;de<Z;de++)for(var ue=0,he;ue<$;ue++)if(he=null,oe=ue+de*$,M[oe]){for(var ge=0;ge<ee.length;ge++){var pe=ue+Q[ge],fe=de+G[ge];if(0<=pe&&0<=fe&&pe<$&&fe<Z){var ce=ne[pe+fe*$];ce?(ee[ge]=ce,(!he||ee[ge].value<he.value)&&(he=ee[ge])):ee[ge]=null}}if(!he)ne[oe]=se.add(le++);else{ne[oe]=he;for(var ge=0;ge<ee.length;ge++)ee[ge]&&ee[ge]!==he&&se.union(he,ee[ge])}}for(var de=0;de<Z;de++)for(var ue=0;ue<$;ue++)oe=ue+de*$,M[oe]&&(ae[oe]=se.find(ne[oe]).value);return ae}},function(_,S,E){'use strict';function R(M,$,Z,W){var K={},Q,G,ee,te;for(te=0;te<M.length;te++)0!=M[te]&&(G=te%W,Q=(te-G)/W,K[M[te]]?(ee=K[M[te]],ee.x+=G*$[te],ee.y+=Q*$[te],ee.z+=$[te],G<ee.minX&&(ee.minX=G),G>ee.maxX&&(ee.maxX=G),Q<ee.minY&&(ee.minY=Q),Q>ee.maxY&&(ee.maxY=Q)):K[M[te]]={x:G*$[te],y:Q*$[te],z:$[te],minX:G,maxX:G,minY:Q,maxY:Q});var ne=Object.keys(K),ae=Array(ne.length);for(te=0;te<ne.length;te++)ae[te]=K[ne[te]],ae[te].x/=ae[te].z,ae[te].y/=ae[te].z;return ae}var I=E(5).array,T=E(68),P=E(69);const F=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];_.exports={findPeaks2DRegion:function(M,$){var Z=Object.assign({},{nStdev:3,kernel:F},$),W=T.matrix2Array(M),K=W.data,Q;W.rows&&W.cols&&(Z.rows=W.rows,Z.cols=W.cols);var G=Z.rows,ee=Z.cols;if(!G||!ee)throw new Error('Invalid number of rows or columns '+G+' '+ee);var te=Z.kernel,ne=Z.filteredData;ne||(ne=T.fft(K,te,Z));var ae=Z.nStdev,se=0;for(Q=ee*G-2;0<=Q;Q--)se+=Math.pow(ne[Q]-ne[Q+1],2);se=-Math.sqrt(se),se*=ae/G;var oe=Array(ee*G);for(Q=ee*G-1;0<=Q;Q--)oe[Q]=0;var le=0;for(Q=ne.length-1;0<=Q;Q--)ne[Q]<se&&(oe[Q]=1,le++);var de=P(oe,ee,G,{neighbours:8}),ue=R(de,K,G,ee);return 0<ue.length,ue},findPeaks2DMax:function(M,$){var Z=Object.assign({},{nStdev:3,kernel:F},$),W=T.matrix2Array(M),K=W.data;W.rows&&W.cols&&(Z.rows=W.rows,Z.cols=W.cols);var Q=Z.rows,G=Z.cols;if(!Q||!G)throw new Error('Invalid number of rows or columns '+Q+' '+G);var ee=Z.kernel,te=Z.filteredData;te||(te=T.fft(K,ee,Z));for(var ne=Z.nStdev,ae=0,se=G*Q-2;0<=se;se--)ae+=Math.pow(te[se]-te[se+1],2);ae=-Math.sqrt(ae),ae*=ne/Q;for(var de=[],ue=0,se=0,oe,le;se<te.length;se++)te[se]<ae&&(oe=Math.floor(se/G),le=se%G,0<oe&&oe+1<Q&&le+1<G&&0<le&&te[se]<te[se+1]&&te[se]<te[se-1]&&(ue=(oe-1)*G+le,te[se]<te[ue-1]&&te[se]<te[ue]&&te[se]<te[ue+1]&&(ue=(oe+1)*G+le,te[se]<te[ue-1]&&te[se]<te[ue]&&te[se]<te[ue+1]&&de.push({x:le,y:oe,z:K[se]}))));return de}}},function(_,S,E){var D=E(4),C=E(29);_.exports={optimize:function(T,P,F,O,M,$,Z,W,K,Q){var ee=0;if('object'!=typeof P[0])for(var te=0;te<P.length;te++)P[te]=[P[te]];var ae=-50,se=P.length,oe=O.length,le=D.zeros(se,1),de=D.zeros(oe,1),ue=0.01/ae,he=0.01/ae,ge=D.zeros(oe,se),te,ne;if(F.length!=O.length){console.log('lm.m error: the length of t must equal the length of y_dat'),length_t=F.length,length_y_dat=O.length;var ue=0;return}M=M||Math.sqrt((oe-se+1)/C.multiply(C.transpose(O),O)),$=$||1e-3,Z=Z||C.multiply(Math.abs(P),-100),W=W||C.multiply(Math.abs(P),100),K=K||1,Q=Q||[3,10*se,1e-3,1e-3,1e-3,0.01,0.01,11,9,1];var _e=Q[0],ye=Q[1],xe=Q[2],we=Q[3],ke=Q[4],je=Q[5],ve=Q[6],Se=Q[7],Ee=Q[8],De=Q[9];if(0,!$.length||1==$.length){for(var Ce=Array(se),te=0;te<se;te++)Ce[te]=[$];$=Ce}var Ae=[];for(te=0;te<$.length;te++)0!=$[te][0]&&Ae.push(te);var Re=Ae.length,Ie=!1,Te=null;if(!M.length||M.length<oe){var Pe=C.multiply(D.ones(oe,1),M[0]);Te=C.dotMultiply(Pe,Pe)}else Te=C.dotMultiply(M,M);var Fe=this.lm_matx(T,F,le,de,1,ge,P,O,Te,$,K),ze=Fe.JtWJ,Xe=Fe.JtWdy,ue=Fe.Chi_sq,Ye=Fe.y_hat,ge=Fe.J;Math.max(Math.abs(Xe))<xe&&(console.log(' *** Your Initial Guess is Extremely Close to Optimal ***'),console.log(' *** epsilon_1 = ',xe),Ie=!0),1===De?lambda=ve:(lambda=ve*Math.max(C.diag(ze)),nu=2),he=ue;for(var Ne=null;!Ie&&ee<=ye;){++ee,Ne=1===De?C.solve(C.add(ze,C.multiply(C.diag(C.diag(ze)),lambda)),Xe):C.solve(C.add(ze,C.multiply(D.eye(se),lambda)),Xe);var Oe=Array(Ae.length);for(ne=0;ne<Ae.length;ne++)Oe[ne]=Ne[Ae[ne]];var Me=C.add(P,Oe);for(ne=0;ne<Me.length;ne++)Me[ne][0]=Math.min(Math.max(Z[ne][0],Me[ne][0]),W[ne][0]);var Le=C.subtract(O,T(F,Me,K)),Ue=C.multiply(C.transpose(Le),C.dotMultiply(Le,Te));if(2==De){var Be=C.multiply(C.transpose(Xe),Ne),Ve=C.multiply(Be,C.inv(C.add(C.multiply(C.subtract(Ue-ue),1/2)),C.multiply(Be,2)));Ne=C.multiply(Ve,Ne);for(var ne=0;ne<Ae.length;ne++)Oe[ne]=Ne[Ae[ne]];Me=C.add(P,Oe),Me=C.min(C.max(Z,Me),W),Le=C.subtract(O,T(F,Me,K)),Ue=C.multiply(C.transpose(Le),mat.dotMultiply(Le,Te))}var qe=(ue-Ue)/C.multiply(C.multiply(C.transpose(Ne),2),C.add(C.multiply(lambda,Ne),Xe));qe>je?(dX2=ue-he,he=ue,le=P,de=Ye,P=Me,Fe=this.lm_matx(T,F,le,de,dX2,ge,P,O,Te,$,K),ze=Fe.JtWJ,Xe=Fe.JtWdy,ue=Fe.Chi_sq,Ye=Fe.y_hat,ge=Fe.J,1===De?lambda=Math.max(lambda/Ee,1e-7):2===De?lambda=Math.max(lambda/(1+Ve),1e-7):3===De?(lambda=C.multiply(Math.max(1/3,3^1-(2*qe-1)),lambda),nu=2):void 0):(ue=he,0==ee%(2*se)&&(Fe=this.lm_matx(T,F,le,de,-1,ge,P,O,Te,$,K),ze=Fe.JtWJ,Xe=Fe.JtWdy,dX2=Fe.Chi_sq,Ye=Fe.y_hat,ge=Fe.J),1===De?lambda=Math.min(lambda*Se,1e7):2===De?lambda+=Math.abs((Ue-ue)/2/Ve):3===De?(lambda*=nu,nu=2*nu):void 0)}return Te=C.multiply(C.multiply(C.transpose(Le),Le),D.ones(oe,1)),Te.apply(function($e,Ze){Te[$e][Ze]=(oe-Re+1)/Te[$e][Ze]}),Fe=this.lm_matx(T,F,le,de,-1,ge,P,O,Te,$,K),ze=Fe.JtWJ,Xe=Fe.JtWdy,ue=Fe.Chi_sq,Ye=Fe.y_hat,ge=Fe.J,{p:P,X2:ue}},lm_FD_J:function(T,P,F,O,M,$){var Z=O.length,W=F.length;M=M||C.multiply(D.ones(W,1),1e-3);for(var K=F.clone(),Q=new D(Z,W),G=Array(W),ee=0;ee<W;ee++){if(G[ee]=M[ee]*(1+Math.abs(F[ee][0])),F[ee]=[K[ee][0]+G[ee]],0!=G[ee])if(y1=T(P,F,$),0>M[ee][0])for(var te=C.dotDivide(C.subtract(y1,O),G[ee]),ne=0;ne<Z;ne++)Q[ne][ee]=te[ne][0];else{F[ee][0]=K[ee][0]-G[ee];for(var te=C.dotDivide(C.subtract(y1,T(P,F,$)),2*G[ee]),ne=0;ne<Z;ne++)Q[ne][ee]=te[ne][0]}F[ee]=K[ee]}return Q},lm_Broyden_J:function(T,P,F,O,M){var $=C.subtract(O,T),Z=C.transpose($);return Z.div(C.multiply(Z,$)),F=C.add(F,C.multiply(C.subtract(M,C.add(P,C.multiply(F,$))),Z)),F},lm_matx:function(T,P,F,O,M,$,Z,W,K,Q,G,ee){var te=W.length,ne=Z.length;Q=Q||1e-3;var ae=T(P,Z,G);$=0==ee%(2*ne)||0<M?this.lm_FD_J(T,P,Z,ae,Q,G):this.lm_Broyden_J(F,O,$,Z,ae);var se=C.subtract(W,ae),oe=C.multiply(C.transpose(se),C.dotMultiply(se,K)),le=C.transpose($),de=C.multiply(le,C.dotMultiply($,C.multiply(K,D.ones(1,ne)))),ue=C.multiply(le,C.dotMultiply(K,se));return{JtWJ:de,JtWdy:ue,Chi_sq:oe,y_hat:ae,J:$}}}},function(_,S,E){'use strict';_.exports=E(71),_.exports.Matrix=E(4),_.exports.Matrix.algebra=E(29)},function(_,S,E){'use strict';function D(R){if(!(this instanceof D))return new D(R);if(R=C.checkMatrix(R),!R.isSymmetric())throw new Error('Matrix is not symmetric');var I=R,T=I.rows,P=new C(T,T),F=!0,O,M,$;for(M=0;M<T;M++){var Z=P[M],W=0;for($=0;$<M;$++){var K=P[$],Q=0;for(O=0;O<$;O++)Q+=K[O]*Z[O];Z[$]=Q=(I[M][$]-Q)/P[$][$],W+=Q*Q}for(W=I[M][M]-W,F&=0<W,P[M][M]=Math.sqrt(Math.max(W,0)),$=M+1;$<T;$++)P[M][$]=0}if(!F)throw new Error('Matrix is not positive definite');this.L=P}var C=E(2);D.prototype={get leftTriangularFactor(){return this.L},solve:function(R){R=C.checkMatrix(R);var I=this.L,T=I.rows;if(R.rows!==T)throw new Error('Matrix dimensions do not match');var P=R.columns,F=R.clone(),O,M,$;for($=0;$<T;$++)for(M=0;M<P;M++){for(O=0;O<$;O++)F[$][M]-=F[O][M]*I[$][O];F[$][M]/=I[$][$]}for($=T-1;0<=$;$--)for(M=0;M<P;M++){for(O=$+1;O<T;O++)F[$][M]-=F[O][M]*I[O][$];F[$][M]/=I[$][$]}return F}},_.exports=D},function(_,S,E){'use strict';function D(M){if(!(this instanceof D))return new D(M);if(M=F.checkMatrix(M),!M.isSquare())throw new Error('Matrix is not a square matrix');var $=M.columns,Z=F.zeros($,$),W=Array($),K=Array($),Q=M,G,ee;if(M.isSymmetric()){for(G=0;G<$;G++)for(ee=0;ee<$;ee++)Z[G][ee]=Q[G][ee];C($,K,W,Z),R($,K,W,Z)}else{var te=F.zeros($,$),ne=Array($);for(ee=0;ee<$;ee++)for(G=0;G<$;G++)te[G][ee]=Q[G][ee];I($,te,ne,Z),T($,K,W,Z,te)}this.n=$,this.e=K,this.d=W,this.V=Z}function C(M,$,Z,W){var K,Q,G,ee,te,ne,ae,se;for(te=0;te<M;te++)Z[te]=W[M-1][te];for(ee=M-1;0<ee;ee--){for(se=0,G=0,ne=0;ne<ee;ne++)se+=Math.abs(Z[ne]);if(0===se)for($[ee]=Z[ee-1],te=0;te<ee;te++)Z[te]=W[ee-1][te],W[ee][te]=0,W[te][ee]=0;else{for(ne=0;ne<ee;ne++)Z[ne]/=se,G+=Z[ne]*Z[ne];for(K=Z[ee-1],Q=Math.sqrt(G),0<K&&(Q=-Q),$[ee]=se*Q,G-=K*Q,Z[ee-1]=K-Q,te=0;te<ee;te++)$[te]=0;for(te=0;te<ee;te++){for(K=Z[te],W[te][ee]=K,Q=$[te]+W[te][te]*K,ne=te+1;ne<=ee-1;ne++)Q+=W[ne][te]*Z[ne],$[ne]+=W[ne][te]*K;$[te]=Q}for(K=0,te=0;te<ee;te++)$[te]/=G,K+=$[te]*Z[te];for(ae=K/(G+G),te=0;te<ee;te++)$[te]-=ae*Z[te];for(te=0;te<ee;te++){for(K=Z[te],Q=$[te],ne=te;ne<=ee-1;ne++)W[ne][te]-=K*$[ne]+Q*Z[ne];Z[te]=W[ee-1][te],W[ee][te]=0}}Z[ee]=G}for(ee=0;ee<M-1;ee++){if(W[M-1][ee]=W[ee][ee],W[ee][ee]=1,G=Z[ee+1],0!==G){for(ne=0;ne<=ee;ne++)Z[ne]=W[ne][ee+1]/G;for(te=0;te<=ee;te++){for(Q=0,ne=0;ne<=ee;ne++)Q+=W[ne][ee+1]*W[ne][te];for(ne=0;ne<=ee;ne++)W[ne][te]-=Q*Z[ne]}}for(ne=0;ne<=ee;ne++)W[ne][ee+1]=0}for(te=0;te<M;te++)Z[te]=W[M-1][te],W[M-1][te]=0;W[M-1][M-1]=1,$[0]=0}function R(M,$,Z,W){var K,Q,G,ee,te,ne,ae,se,oe,le,de,ue,he,ge,pe,fe,ce;for(G=1;G<M;G++)$[G-1]=$[G];$[M-1]=0;var me=0,be=0,_e=Math.pow(2,-52);for(ne=0;ne<M;ne++){for(be=Math.max(be,Math.abs(Z[ne])+Math.abs($[ne])),ae=ne;ae<M&&!(Math.abs($[ae])<=_e*be);)ae++;if(ae>ne){ce=0;do{for(++ce,K=Z[ne],se=(Z[ne+1]-K)/(2*$[ne]),oe=O(se,1),0>se&&(oe=-oe),Z[ne]=$[ne]/(se+oe),Z[ne+1]=$[ne]*(se+oe),le=Z[ne+1],Q=K-Z[ne],G=ne+2;G<M;G++)Z[G]-=Q;for(me+=Q,se=Z[ae],de=1,ue=de,he=de,ge=$[ne+1],pe=0,fe=0,G=ae-1;G>=ne;G--)for(he=ue,ue=de,fe=pe,K=de*$[G],Q=de*se,oe=O(se,$[G]),$[G+1]=pe*oe,pe=$[G]/oe,de=se/oe,se=de*Z[G]-pe*K,Z[G+1]=Q+pe*(de*K+pe*Z[G]),te=0;te<M;te++)Q=W[te][G+1],W[te][G+1]=pe*W[te][G]+de*Q,W[te][G]=de*W[te][G]-pe*Q;se=-pe*fe*he*ge*$[ne]/le,$[ne]=pe*se,Z[ne]=de*se}while(Math.abs($[ne])>_e*be)}Z[ne]+=me,$[ne]=0}for(G=0;G<M-1;G++){for(te=G,se=Z[G],ee=G+1;ee<M;ee++)Z[ee]<se&&(te=ee,se=Z[ee]);if(te!==G)for(Z[te]=Z[G],Z[G]=se,ee=0;ee<M;ee++)se=W[ee][G],W[ee][G]=W[ee][te],W[ee][te]=se}}function I(M,$,Z,W){var K=0,Q=M-1,G,ee,te,ne,ae,se,oe;for(se=K+1;se<=Q-1;se++){for(oe=0,ne=se;ne<=Q;ne++)oe+=Math.abs($[ne][se-1]);if(0!==oe){for(te=0,ne=Q;ne>=se;ne--)Z[ne]=$[ne][se-1]/oe,te+=Z[ne]*Z[ne];for(ee=Math.sqrt(te),0<Z[se]&&(ee=-ee),te-=Z[se]*ee,Z[se]-=ee,ae=se;ae<M;ae++){for(G=0,ne=Q;ne>=se;ne--)G+=Z[ne]*$[ne][ae];for(G/=te,ne=se;ne<=Q;ne++)$[ne][ae]-=G*Z[ne]}for(ne=0;ne<=Q;ne++){for(G=0,ae=Q;ae>=se;ae--)G+=Z[ae]*$[ne][ae];for(G/=te,ae=se;ae<=Q;ae++)$[ne][ae]-=G*Z[ae]}Z[se]=oe*Z[se],$[se][se-1]=oe*ee}}for(ne=0;ne<M;ne++)for(ae=0;ae<M;ae++)W[ne][ae]=ne===ae?1:0;for(se=Q-1;se>=K+1;se--)if(0!==$[se][se-1]){for(ne=se+1;ne<=Q;ne++)Z[ne]=$[ne][se-1];for(ae=se;ae<=Q;ae++){for(ee=0,ne=se;ne<=Q;ne++)ee+=Z[ne]*W[ne][ae];for(ee=ee/Z[se]/$[se][se-1],ne=se;ne<=Q;ne++)W[ne][ae]+=ee*Z[ne]}}}function T(M,$,Z,W,K){var Q=M-1,G=0,ee=M-1,te=Math.pow(2,-52),ne=0,ae=0,se=0,oe=0,le=0,de=0,ue=0,he=0,ge,pe,fe,ce,me,be,_e,ye,xe,we,ke,je,ve,Se,Ee;for(ge=0;ge<M;ge++)for((ge<G||ge>ee)&&(Z[ge]=K[ge][ge],$[ge]=0),pe=Math.max(ge-1,0);pe<M;pe++)ae+=Math.abs(K[ge][pe]);for(;Q>=G;){for(ce=Q;ce>G&&(de=Math.abs(K[ce-1][ce-1])+Math.abs(K[ce][ce]),0==de&&(de=ae),!(Math.abs(K[ce][ce-1])<te*de));)ce--;if(ce===Q)K[Q][Q]+=ne,Z[Q]=K[Q][Q],$[Q]=0,Q--,he=0;else if(ce===Q-1){if(_e=K[Q][Q-1]*K[Q-1][Q],se=(K[Q-1][Q-1]-K[Q][Q])/2,oe=se*se+_e,ue=Math.sqrt(Math.abs(oe)),K[Q][Q]+=ne,K[Q-1][Q-1]=K[Q-1][Q-1]+ne,ye=K[Q][Q],0<=oe){for(ue=0<=se?se+ue:se-ue,Z[Q-1]=ye+ue,Z[Q]=Z[Q-1],0!=ue&&(Z[Q]=ye-_e/ue),$[Q-1]=0,$[Q]=0,ye=K[Q][Q-1],de=Math.abs(ye)+Math.abs(ue),se=ye/de,oe=ue/de,le=Math.sqrt(se*se+oe*oe),se/=le,oe/=le,pe=Q-1;pe<M;pe++)ue=K[Q-1][pe],K[Q-1][pe]=oe*ue+se*K[Q][pe],K[Q][pe]=oe*K[Q][pe]-se*ue;for(ge=0;ge<=Q;ge++)ue=K[ge][Q-1],K[ge][Q-1]=oe*ue+se*K[ge][Q],K[ge][Q]=oe*K[ge][Q]-se*ue;for(ge=G;ge<=ee;ge++)ue=W[ge][Q-1],W[ge][Q-1]=oe*ue+se*W[ge][Q],W[ge][Q]=oe*W[ge][Q]-se*ue}else Z[Q-1]=ye+se,Z[Q]=ye+se,$[Q-1]=ue,$[Q]=-ue;Q-=2,he=0}else{if(ye=K[Q][Q],xe=0,_e=0,ce<Q&&(xe=K[Q-1][Q-1],_e=K[Q][Q-1]*K[Q-1][Q]),10==he){for(ne+=ye,ge=G;ge<=Q;ge++)K[ge][ge]-=ye;de=Math.abs(K[Q][Q-1])+Math.abs(K[Q-1][Q-2]),ye=xe=0.75*de,_e=-0.4375*de*de}if(30==he&&(de=(xe-ye)/2,de=de*de+_e,0<de)){for(de=Math.sqrt(de),xe<ye&&(de=-de),de=ye-_e/((xe-ye)/2+de),ge=G;ge<=Q;ge++)K[ge][ge]-=de;ne+=de,ye=xe=_e=0.964}for(++he,me=Q-2;me>=ce&&(ue=K[me][me],le=ye-ue,de=xe-ue,se=(le*de-_e)/K[me+1][me]+K[me][me+1],oe=K[me+1][me+1]-ue-le-de,le=K[me+2][me+1],de=Math.abs(se)+Math.abs(oe)+Math.abs(le),se/=de,oe/=de,le/=de,me!=ce)&&!(Math.abs(K[me][me-1])*(Math.abs(oe)+Math.abs(le))<te*(Math.abs(se)*(Math.abs(K[me-1][me-1])+Math.abs(ue)+Math.abs(K[me+1][me+1]))));)me--;for(ge=me+2;ge<=Q;ge++)K[ge][ge-2]=0,ge>me+2&&(K[ge][ge-3]=0);for(fe=me;fe<=Q-1&&(Se=fe!==Q-1,fe!=me&&(se=K[fe][fe-1],oe=K[fe+1][fe-1],le=Se?K[fe+2][fe-1]:0,ye=Math.abs(se)+Math.abs(oe)+Math.abs(le),0!==ye&&(se/=ye,oe/=ye,le/=ye)),0!==ye);fe++)if(de=Math.sqrt(se*se+oe*oe+le*le),0>se&&(de=-de),0!==de){for(fe==me?ce!==me&&(K[fe][fe-1]=-K[fe][fe-1]):K[fe][fe-1]=-de*ye,se+=de,ye=se/de,xe=oe/de,ue=le/de,oe/=se,le/=se,pe=fe;pe<M;pe++)se=K[fe][pe]+oe*K[fe+1][pe],Se&&(se+=le*K[fe+2][pe],K[fe+2][pe]=K[fe+2][pe]-se*ue),K[fe][pe]-=se*ye,K[fe+1][pe]=K[fe+1][pe]-se*xe;for(ge=0;ge<=Math.min(Q,fe+3);ge++)se=ye*K[ge][fe]+xe*K[ge][fe+1],Se&&(se+=ue*K[ge][fe+2],K[ge][fe+2]=K[ge][fe+2]-se*le),K[ge][fe]-=se,K[ge][fe+1]=K[ge][fe+1]-se*oe;for(ge=G;ge<=ee;ge++)se=ye*W[ge][fe]+xe*W[ge][fe+1],Se&&(se+=ue*W[ge][fe+2],W[ge][fe+2]=W[ge][fe+2]-se*le),W[ge][fe]-=se,W[ge][fe+1]=W[ge][fe+1]-se*oe}}}if(0!==ae){for(Q=M-1;0<=Q;Q--)if(se=Z[Q],oe=$[Q],0===oe)for(ce=Q,K[Q][Q]=1,ge=Q-1;0<=ge;ge--){for(_e=K[ge][ge]-se,le=0,pe=ce;pe<=Q;pe++)le+=K[ge][pe]*K[pe][Q];if(0>$[ge])ue=_e,de=le;else if(ce=ge,0===$[ge]?K[ge][Q]=0===_e?-le/(te*ae):-le/_e:(ye=K[ge][ge+1],xe=K[ge+1][ge],oe=(Z[ge]-se)*(Z[ge]-se)+$[ge]*$[ge],be=(ye*de-ue*le)/oe,K[ge][Q]=be,K[ge+1][Q]=Math.abs(ye)>Math.abs(ue)?(-le-_e*be)/ye:(-de-xe*be)/ue),be=Math.abs(K[ge][Q]),1<te*be*be)for(pe=ge;pe<=Q;pe++)K[pe][Q]/=be}else if(0>oe)for(ce=Q-1,Math.abs(K[Q][Q-1])>Math.abs(K[Q-1][Q])?(K[Q-1][Q-1]=oe/K[Q][Q-1],K[Q-1][Q]=-(K[Q][Q]-se)/K[Q][Q-1]):(Ee=P(0,-K[Q-1][Q],K[Q-1][Q-1]-se,oe),K[Q-1][Q-1]=Ee[0],K[Q-1][Q]=Ee[1]),K[Q][Q-1]=0,K[Q][Q]=1,ge=Q-2;0<=ge;ge--){for(we=0,ke=0,pe=ce;pe<=Q;pe++)we+=K[ge][pe]*K[pe][Q-1],ke+=K[ge][pe]*K[pe][Q];if(_e=K[ge][ge]-se,0>$[ge])ue=_e,le=we,de=ke;else if(ce=ge,0===$[ge]?(Ee=P(-we,-ke,_e,oe),K[ge][Q-1]=Ee[0],K[ge][Q]=Ee[1]):(ye=K[ge][ge+1],xe=K[ge+1][ge],je=(Z[ge]-se)*(Z[ge]-se)+$[ge]*$[ge]-oe*oe,ve=2*(Z[ge]-se)*oe,0===je&&0===ve&&(je=te*ae*(Math.abs(_e)+Math.abs(oe)+Math.abs(ye)+Math.abs(xe)+Math.abs(ue))),Ee=P(ye*le-ue*we+oe*ke,ye*de-ue*ke-oe*we,je,ve),K[ge][Q-1]=Ee[0],K[ge][Q]=Ee[1],Math.abs(ye)>Math.abs(ue)+Math.abs(oe)?(K[ge+1][Q-1]=(-we-_e*K[ge][Q-1]+oe*K[ge][Q])/ye,K[ge+1][Q]=(-ke-_e*K[ge][Q]-oe*K[ge][Q-1])/ye):(Ee=P(-le-xe*K[ge][Q-1],-de-xe*K[ge][Q],ue,oe),K[ge+1][Q-1]=Ee[0],K[ge+1][Q]=Ee[1])),be=Math.max(Math.abs(K[ge][Q-1]),Math.abs(K[ge][Q])),1<te*be*be)for(pe=ge;pe<=Q;pe++)K[pe][Q-1]=K[pe][Q-1]/be,K[pe][Q]/=be}for(ge=0;ge<M;ge++)if(ge<G||ge>ee)for(pe=ge;pe<M;pe++)W[ge][pe]=K[ge][pe];for(pe=M-1;pe>=G;pe--)for(ge=G;ge<=ee;ge++){for(ue=0,fe=G;fe<=Math.min(pe,ee);fe++)ue+=W[ge][fe]*K[fe][pe];W[ge][pe]=ue}}}function P(M,$,Z,W){var K,Q;return Math.abs(Z)>Math.abs(W)?(K=W/Z,Q=Z+K*W,[(M+K*$)/Q,($-K*M)/Q]):(K=Z/W,Q=W+K*Z,[(K*M+$)/Q,(K*$-M)/Q])}var F=E(2),O=E(11).hypotenuse;D.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return this.V},get diagonalMatrix(){var M=this.n,$=this.e,Z=this.d,W=new F(M,M),K,Q;for(K=0;K<M;K++){for(Q=0;Q<M;Q++)W[K][Q]=0;W[K][K]=Z[K],0<$[K]?W[K][K+1]=$[K]:0>$[K]&&(W[K][K-1]=$[K])}return W}},_.exports=D},function(_,S,E){'use strict';function D(R){if(!(this instanceof D))return new D(R);R=C.checkMatrix(R);var I=R.clone(),T=I.rows,P=I.columns,F=Array(T),O=1,M,$,Z,W,K,Q,G,ee,te,ne;for(M=0;M<T;M++)F[M]=M;for(te=Array(T),$=0;$<P;$++){for(M=0;M<T;M++)te[M]=I[M][$];for(M=0;M<T;M++){for(ee=I[M],ne=Math.min(M,$),K=0,Z=0;Z<ne;Z++)K+=ee[Z]*te[Z];ee[$]=te[M]-=K}for(W=$,M=$+1;M<T;M++)Math.abs(te[M])>Math.abs(te[W])&&(W=M);if(W!==$){for(Z=0;Z<P;Z++)Q=I[W][Z],I[W][Z]=I[$][Z],I[$][Z]=Q;G=F[W],F[W]=F[$],F[$]=G,O=-O}if($<T&&0!==I[$][$])for(M=$+1;M<T;M++)I[M][$]/=I[$][$]}this.LU=I,this.pivotVector=F,this.pivotSign=O}var C=E(2);D.prototype={isSingular:function(){for(var R=this.LU,I=R.columns,T=0;T<I;T++)if(0===R[T][T])return!0;return!1},get determinant(){var R=this.LU;if(!R.isSquare())throw new Error('Matrix must be square');for(var I=this.pivotSign,T=R.columns,P=0;P<T;P++)I*=R[P][P];return I},get lowerTriangularFactor(){for(var R=this.LU,I=R.rows,T=R.columns,P=new C(I,T),F=0;F<I;F++)for(var O=0;O<T;O++)P[F][O]=F>O?R[F][O]:F===O?1:0;return P},get upperTriangularFactor(){for(var R=this.LU,I=R.rows,T=R.columns,P=new C(I,T),F=0;F<I;F++)for(var O=0;O<T;O++)P[F][O]=F<=O?R[F][O]:0;return P},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(R){R=C.checkMatrix(R);var I=this.LU,T=I.rows;if(T!==R.rows)throw new Error('Invalid matrix dimensions');if(this.isSingular())throw new Error('LU matrix is singular');var P=R.columns,F=R.subMatrixRow(this.pivotVector,0,P-1),O=I.columns,M,$,Z;for(Z=0;Z<O;Z++)for(M=Z+1;M<O;M++)for($=0;$<P;$++)F[M][$]-=F[Z][$]*I[M][Z];for(Z=O-1;0<=Z;Z--){for($=0;$<P;$++)F[Z][$]/=I[Z][Z];for(M=0;M<Z;M++)for($=0;$<P;$++)F[M][$]-=F[Z][$]*I[M][Z]}return F}},_.exports=D},function(_,S,E){'use strict';function D(I){if(!(this instanceof D))return new D(I);I=C.checkMatrix(I);var T=I.clone(),P=I.rows,F=I.columns,O=Array(F),M,$,Z,W;for(Z=0;Z<F;Z++){var K=0;for(M=Z;M<P;M++)K=R(K,T[M][Z]);if(0!==K){for(0>T[Z][Z]&&(K=-K),M=Z;M<P;M++)T[M][Z]/=K;for(T[Z][Z]+=1,$=Z+1;$<F;$++){for(W=0,M=Z;M<P;M++)W+=T[M][Z]*T[M][$];for(W=-W/T[Z][Z],M=Z;M<P;M++)T[M][$]+=W*T[M][Z]}}O[Z]=-K}this.QR=T,this.Rdiag=O}var C=E(2),R=E(11).hypotenuse;D.prototype={solve:function(I){I=C.checkMatrix(I);var T=this.QR,P=T.rows;if(I.rows!==P)throw new Error('Matrix row dimensions must agree');if(!this.isFullRank())throw new Error('Matrix is rank deficient');var F=I.columns,O=I.clone(),M=T.columns,$,Z,W,K;for(W=0;W<M;W++)for(Z=0;Z<F;Z++){for(K=0,$=W;$<P;$++)K+=T[$][W]*O[$][Z];for(K=-K/T[W][W],$=W;$<P;$++)O[$][Z]+=K*T[$][W]}for(W=M-1;0<=W;W--){for(Z=0;Z<F;Z++)O[W][Z]/=this.Rdiag[W];for($=0;$<W;$++)for(Z=0;Z<F;Z++)O[$][Z]-=O[W][Z]*T[$][W]}return O.subMatrix(0,M-1,0,F-1)},isFullRank:function(){for(var I=this.QR.columns,T=0;T<I;T++)if(0===this.Rdiag[T])return!1;return!0},get upperTriangularFactor(){var I=this.QR,T=I.columns,P=new C(T,T),F,O;for(F=0;F<T;F++)for(O=0;O<T;O++)P[F][O]=F<O?I[F][O]:F===O?this.Rdiag[F]:0;return P},get orthogonalFactor(){var I=this.QR,T=I.rows,P=I.columns,F=new C(T,P),O,M,$,Z;for($=P-1;0<=$;$--){for(O=0;O<T;O++)F[O][$]=0;for(F[$][$]=1,M=$;M<P;M++)if(0!==I[$][$]){for(Z=0,O=$;O<T;O++)Z+=I[O][$]*F[O][M];for(Z=-Z/I[$][$],O=$;O<T;O++)F[O][M]+=Z*I[O][$]}}return F}},_.exports=D},function(_,S,E){'use strict';function D(I,T){if(!(this instanceof D))return new D(I,T);I=C.checkMatrix(I),T=T||{};var P=I.clone(),F=I.rows,O=I.columns,M=Math.min(F,O),$=!0,Z=!0;!1===T.computeLeftSingularVectors&&($=!1),!1===T.computeRightSingularVectors&&(Z=!1);var W=!0===T.autoTranspose,K=!1;if(F<O)if(!W)console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');else{P=P.transpose(),F=P.rows,O=P.columns,K=!0;var Q=$;$=Z,Z=Q}var G=Array(Math.min(F+1,O)),ee=C.zeros(F,M),te=C.zeros(O,O),ne=Array(O),ae=Array(F),se=Math.min(F-1,O),oe=Math.max(0,Math.min(O-2,F)),le,de,ue,he,ge,pe,fe,ce,me,be,_e,ye,xe,we,ke,je,ve,Se,Ee,De,Ce;for(ue=0,be=Math.max(se,oe);ue<be;ue++){if(ue<se){for(G[ue]=0,le=ue;le<F;le++)G[ue]=R(G[ue],P[le][ue]);if(0!==G[ue]){for(0>P[ue][ue]&&(G[ue]=-G[ue]),le=ue;le<F;le++)P[le][ue]/=G[ue];P[ue][ue]+=1}G[ue]=-G[ue]}for(de=ue+1;de<O;de++){if(ue<se&&0!==G[ue]){for(ge=0,le=ue;le<F;le++)ge+=P[le][ue]*P[le][de];for(ge=-ge/P[ue][ue],le=ue;le<F;le++)P[le][de]+=ge*P[le][ue]}ne[de]=P[ue][de]}if($&&ue<se)for(le=ue;le<F;le++)ee[le][ue]=P[le][ue];if(ue<oe){for(ne[ue]=0,le=ue+1;le<O;le++)ne[ue]=R(ne[ue],ne[le]);if(0!==ne[ue]){for(0>ne[ue+1]&&(ne[ue]=-ne[ue]),le=ue+1;le<O;le++)ne[le]/=ne[ue];ne[ue+1]+=1}if(ne[ue]=-ne[ue],ue+1<F&&0!==ne[ue]){for(le=ue+1;le<F;le++)ae[le]=0;for(de=ue+1;de<O;de++)for(le=ue+1;le<F;le++)ae[le]+=ne[de]*P[le][de];for(de=ue+1;de<O;de++)for(ge=-ne[de]/ne[ue+1],le=ue+1;le<F;le++)P[le][de]+=ge*ae[le]}if(Z)for(le=ue+1;le<O;le++)te[le][ue]=ne[le]}}if(he=Math.min(O,F+1),se<O&&(G[se]=P[se][se]),F<he&&(G[he-1]=0),oe+1<he&&(ne[oe]=P[oe][he-1]),ne[he-1]=0,$){for(de=se;de<M;de++){for(le=0;le<F;le++)ee[le][de]=0;ee[de][de]=1}for(ue=se-1;0<=ue;ue--)if(0!==G[ue]){for(de=ue+1;de<M;de++){for(ge=0,le=ue;le<F;le++)ge+=ee[le][ue]*ee[le][de];for(ge=-ge/ee[ue][ue],le=ue;le<F;le++)ee[le][de]+=ge*ee[le][ue]}for(le=ue;le<F;le++)ee[le][ue]=-ee[le][ue];for(ee[ue][ue]=1+ee[ue][ue],le=0;le<ue-1;le++)ee[le][ue]=0}else{for(le=0;le<F;le++)ee[le][ue]=0;ee[ue][ue]=1}}if(Z)for(ue=O-1;0<=ue;ue--){if(ue<oe&&0!==ne[ue])for(de=ue+1;de<O;de++){for(ge=0,le=ue+1;le<O;le++)ge+=te[le][ue]*te[le][de];for(ge=-ge/te[ue+1][ue],le=ue+1;le<O;le++)te[le][de]+=ge*te[le][ue]}for(le=0;le<O;le++)te[le][ue]=0;te[ue][ue]=1}for(var Ae=he-1,Re=0,Ie=Math.pow(2,-52);0<he;){for(ue=he-2;-1<=ue&&-1!==ue;ue--)if(Math.abs(ne[ue])<=Ie*(Math.abs(G[ue])+Math.abs(G[ue+1]))){ne[ue]=0;break}if(ue===he-2)_e=4;else{for(pe=he-1;pe>=ue&&pe!==ue;pe--)if(ge=(pe===he?0:Math.abs(ne[pe]))+(pe===ue+1?0:Math.abs(ne[pe-1])),Math.abs(G[pe])<=Ie*ge){G[pe]=0;break}pe===ue?_e=3:pe===he-1?_e=1:(_e=2,ue=pe)}switch(ue++,_e){case 1:{for(fe=ne[he-2],ne[he-2]=0,de=he-2;de>=ue;de--)if(ge=R(G[de],fe),ce=G[de]/ge,me=fe/ge,G[de]=ge,de!==ue&&(fe=-me*ne[de-1],ne[de-1]=ce*ne[de-1]),Z)for(le=0;le<O;le++)ge=ce*te[le][de]+me*te[le][he-1],te[le][he-1]=-me*te[le][de]+ce*te[le][he-1],te[le][de]=ge;break}case 2:{for(fe=ne[ue-1],ne[ue-1]=0,de=ue;de<he;de++)if(ge=R(G[de],fe),ce=G[de]/ge,me=fe/ge,G[de]=ge,fe=-me*ne[de],ne[de]=ce*ne[de],$)for(le=0;le<F;le++)ge=ce*ee[le][de]+me*ee[le][ue-1],ee[le][ue-1]=-me*ee[le][de]+ce*ee[le][ue-1],ee[le][de]=ge;break}case 3:{for(ye=Math.max(Math.max(Math.max(Math.max(Math.abs(G[he-1]),Math.abs(G[he-2])),Math.abs(ne[he-2])),Math.abs(G[ue])),Math.abs(ne[ue])),xe=G[he-1]/ye,we=G[he-2]/ye,ke=ne[he-2]/ye,je=G[ue]/ye,ve=ne[ue]/ye,Se=((we+xe)*(we-xe)+ke*ke)/2,Ee=xe*ke*(xe*ke),De=0,(0!==Se||0!==Ee)&&(De=Math.sqrt(Se*Se+Ee),0>Se&&(De=-De),De=Ee/(Se+De)),fe=(je+xe)*(je-xe)+De,Ce=je*ve,de=ue;de<he-1;de++){if(ge=R(fe,Ce),ce=fe/ge,me=Ce/ge,de!==ue&&(ne[de-1]=ge),fe=ce*G[de]+me*ne[de],ne[de]=ce*ne[de]-me*G[de],Ce=me*G[de+1],G[de+1]=ce*G[de+1],Z)for(le=0;le<O;le++)ge=ce*te[le][de]+me*te[le][de+1],te[le][de+1]=-me*te[le][de]+ce*te[le][de+1],te[le][de]=ge;if(ge=R(fe,Ce),ce=fe/ge,me=Ce/ge,G[de]=ge,fe=ce*ne[de]+me*G[de+1],G[de+1]=-me*ne[de]+ce*G[de+1],Ce=me*ne[de+1],ne[de+1]=ce*ne[de+1],$&&de<F-1)for(le=0;le<F;le++)ge=ce*ee[le][de]+me*ee[le][de+1],ee[le][de+1]=-me*ee[le][de]+ce*ee[le][de+1],ee[le][de]=ge}ne[he-2]=fe,++Re;break}case 4:{if(0>=G[ue]&&(G[ue]=0>G[ue]?-G[ue]:0,Z))for(le=0;le<=Ae;le++)te[le][ue]=-te[le][ue];for(;ue<Ae&&!(G[ue]>=G[ue+1]);){if(ge=G[ue],G[ue]=G[ue+1],G[ue+1]=ge,Z&&ue<O-1)for(le=0;le<O;le++)ge=te[le][ue+1],te[le][ue+1]=te[le][ue],te[le][ue]=ge;if($&&ue<F-1)for(le=0;le<F;le++)ge=ee[le][ue+1],ee[le][ue+1]=ee[le][ue],ee[le][ue]=ge;ue++}Re=0,he--;break}}}if(K){var Te=te;te=ee,ee=Te}this.m=F,this.n=O,this.s=G,this.U=ee,this.V=te}var C=E(2),R=E(11).hypotenuse;D.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var I=Math.pow(2,-52),T=Math.max(this.m,this.n)*this.s[0]*I,P=0,F=this.s,O=0,M=F.length;O<M;O++)F[O]>T&&P++;return P},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return this.U},get rightSingularVectors(){return this.V},get diagonalMatrix(){return C.diag(this.s)},solve:function(I){var P=this.threshold,F=this.s.length,O=C.zeros(F,F),M;for(M=0;M<F;M++)O[M][M]=Math.abs(this.s[M])<=P?0:1/this.s[M];var $=this.V.mmul(O),Z=this.V.rows,W=this.U.rows,K=C.zeros(Z,W),Q,G,ee;for(M=0;M<Z;M++)for(Q=0;Q<W;Q++){for(ee=0,G=0;G<F;G++)ee+=$[M][G]*this.U[Q][G];K[M][Q]=ee}return K.mmul(I)},solveForDiagonal:function(I){return this.solve(C.diag(I))},inverse:function(){var I=this.threshold,T=this.V.rows,P=this.V.columns,F=new C(T,this.s.length),O,M;for(O=0;O<T;O++)for(M=0;M<P;M++)F[O][M]=Math.abs(this.s[M])>I?this.V[O][M]/this.s[M]:0;var $=this.U.rows,Z=this.U.columns,W=new C(T,$),K,Q;for(O=0;O<T;O++)for(M=0;M<$;M++){for(Q=0,K=0;K<Z;K++)Q+=F[O][K]*this.U[M][K];W[O][M]=Q}return W}},_.exports=D},function(_,S,E){'use strict';function D(M){return C(M,R.eye(M.rows))}function C(M,$){return M.isSquare()?new P(M).solve($):new F(M).solve($)}var R=E(2),I=E(77),T=E(74),P=E(75),F=E(76),O=E(73);R.prototype.inverse=function(){return D(this)},R.prototype.solve=function(M){return C(this,M)},_.exports={SingularValueDecomposition:I,SVD:I,EigenvalueDecomposition:T,EVD:T,LuDecomposition:P,LU:P,QrDecomposition:F,QR:F,CholeskyDecomposition:O,CHO:O,inverse:D,solve:C}},function(_,S,E){'use strict';function D(ee,te){var ae=te.length/3,ue=ee.rows,se,oe,le,de,he=G.zeros(ee.length,1);for(oe=0;oe<ae;oe++)for(de=Math.pow(te[oe+2*ae][0]/2,2),se=te[oe+ae][0]*de,le=0;le<ue;le++)he[le][0]+=se/(Math.pow(ee[le][0]-te[oe][0],2)+de);return he}function R(ee,te){for(var ae=te[1][0]*Math.pow(te[2][0]/2,2),se=ee.rows,oe=new G(ee.rows,ee.columns),le=0;le<se;le++)oe[le][0]=ae/(Math.pow(ee[le][0]-te[0][0],2)+Math.pow(te[2][0]/2,2));return oe}function I(ee,te){for(var ae=te[2][0]*te[2][0]/2,se=ee.rows,oe=new G(ee.rows,ee.columns),le=0;le<se;le++)oe[le][0]=te[1][0]*Math.exp(-(ee[le][0]-te[0][0])*(ee[le][0]-te[0][0])/ae);return oe}function T(ee,te,ne){ne=ne||{};var ae=Z(ee,ne.percentage||0);if(null===ae||3>ae[0].rows)return null;var se=ae[0],oe=ae[1],le=ae[2],de=se.rows,he=[de/Math.sqrt(oe.dot(oe))],ne=Object.create(ne.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),pe=Math.abs(se[0][0]-se[1][0]),fe=new G([[-pe/1e4],[-0.001],[-pe/1e4]]),ce=new G([[te.x],[1],[te.width]]),me=new G([[te.x-pe],[0.75],[te.width/4]]),be=new G([[te.x+pe],[1.25],[4*te.width]]),_e=K.optimize(R,ce,se,oe,he,fe,me,be,[],ne);return _e=_e.p,[_e[0],[_e[1][0]*le],_e[2]]}function P(ee,te,ne){ne=ne||{};var ae=Z(ee,ne.percentage||0);if(null===ae||3>ae[0].rows)return null;var se=ae[0],oe=ae[1],le=ae[2],de=se.rows,he=[de/Math.sqrt(oe.dot(oe))],ne=Object.create(ne.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),pe=Math.abs(se[0][0]-se[1][0]),fe=new G([[-pe/1e4],[-0.001],[-pe/1e4]]),fe=new G([[-Math.abs(se[0][0]-se[1][0])/1e3],[-0.001],[-te.width/1e3]]),ce=new G([[te.x],[1],[te.width]]),me=new G([[te.x-pe],[0.75],[te.width/4]]),be=new G([[te.x+pe],[1.25],[4*te.width]]),_e=K.optimize(I,ce,se,oe,he,fe,me,be,[],ne);return _e=_e.p,[_e[0],[_e[1][0]*le],_e[2]]}function Z(ee,te){var ne=ee.length,ae=null,se=null,oe,le,de=0,ue;if(2==ne){var ge=ee[0].length;if(ae=Array(ge),se=Array(ge),oe=ee[0],le=ee[1],'number'==typeof oe[0])for(ue=0;ue<ge;ue++)ae[ue]=oe[ue],se[ue]=le[ue],le[ue]>de&&(de=le[ue]);else if('object'==typeof oe[0])for(ue=0;ue<ge;ue++)ae[ue]=oe[ue][0],se[ue]=le[ue][0],le[ue][0]>de&&(de=le[ue][0])}else{var ge=ne;for(ae=Array(ge),se=Array(ge),ue=0;ue<ge;ue++)ae[ue]=ee[ue][0],se[ue]=ee[ue][1],se[ue]>de&&(de=se[ue])}for(ue=0;ue<ge;ue++)se[ue]/=de;if(te)for(ue=ge-1;0<=ue;ue--)se[ue]<te&&(se.splice(ue,1),ae.splice(ue,1));return 0<ae.length?[new G([ae]).transpose(),new G([se]).transpose(),de]:null}var K=E(72),Q=K.Matrix.algebra,G=E(4);_.exports.optimizeSingleLorentzian=T,_.exports.optimizeLorentzianSum=function(ee,te,ne){var ae=Z(ee);if(null===ae||3>ae[0].rows)return null;var se=ae[0],oe=ae[1],le=ae[2],de=se.rows,ue,he=[de/Q.sqrt(oe.dot(oe))],ne=Object.create(ne||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),pe=te.length,fe=new G(3*pe,1),ce=new G(3*pe,1),me=new G(3*pe,1),be=new G(3*pe,1),_e=Math.abs(se[0][0]-se[1][0]);for(ue=0;ue<pe;ue++)fe[ue][0]=te[ue].x,fe[ue+pe][0]=1,fe[ue+2*pe][0]=te[ue].width,ce[ue][0]=te[ue].x-_e,ce[ue+pe][0]=0,ce[ue+2*pe][0]=te[ue].width/4,me[ue][0]=te[ue].x+_e,me[ue+pe][0]=1.5,me[ue+2*pe][0]=4*te[ue].width,be[ue][0]=-_e/1e3,be[ue+pe][0]=-1e-3,be[ue+2*pe][0]=-_e/1e3;var be=-Math.abs(se[0][0]-se[1][0])/1e4,ye=K.optimize(D,fe,se,oe,he,be,ce,me,[],ne);ye=ye.p;var xe=Array(pe);for(ue=0;ue<pe;ue++)xe[ue]=[ye[ue],[ye[ue+pe][0]*le],ye[ue+2*pe]];return xe},_.exports.optimizeSingleGaussian=P,_.exports.optimizeGaussianSum=function(ee,te,ne){var ae=Z(ee);if(null===ae||3>ae[0].rows)return null;var se=ae[0],oe=ae[1],le=ae[2],de=se.rows,ue,he=new G(de,1),ge=de/Q.sqrt(oe.dot(oe));for(ue=0;ue<de;ue++)he[ue][0]=ge;var ne=Object.create(ne||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,2]),fe=te.length,ce=new G(3*fe,1),me=new G(3*fe,1),be=new G(3*fe,1),_e=new G(3*fe,1),ye=Math.abs(se[0][0]-se[1][0]);for(ue=0;ue<fe;ue++)ce[ue][0]=te[ue].x,ce[ue+fe][0]=te[ue].y/le,ce[ue+2*fe][0]=te[ue].width,me[ue][0]=te[ue].x-ye,me[ue+fe][0]=0.8*te[ue].y/le,me[ue+2*fe][0]=te[ue].width/2,be[ue][0]=te[ue].x+ye,be[ue+fe][0]=1.2*te[ue].y/le,be[ue+2*fe][0]=2*te[ue].width,_e[ue][0]=-ye/1e3,_e[ue+fe][0]=-1e-3,_e[ue+2*fe][0]=-ye/1e3;var xe=K.optimize(D,ce,se,oe,he,_e,me,be,[],ne);xe=xe.p;var we=Array(fe);for(ue=0;ue<fe;ue++)we[ue]=[xe[ue],[xe[ue+fe][0]*le],xe[ue+2*fe]];return we},_.exports.singleGaussian=I,_.exports.singleLorentzian=R,_.exports.optimizeGaussianTrain=function(ee,te,ne){var ae=Z(ee);if(null===ae||3>ae[0].rows)return null;for(var se=ae[0],oe=ae[1],le=ae[2],de=0,ue=se.length,fe=[],me=0,he,ge,pe,le,ce;me<te.length;me++){for(he=te[me].x-4*te[me].width;se[de++]<he&&de<ue;);for(he=te[me].x+4*te[me].width,ge=[],pe=[];se[de]<=he&&de<ue;)ge.push(se[de][0]),pe.push(oe[de][0]*le),de++;ce=P([ge,pe],te[me],ne),ce?fe.push({x:ce[0][0],y:ce[1][0],width:ce[2][0],opt:!0}):fe.push({x:te[me].x,y:te[me].y,width:te[me].width,opt:!1})}return fe},_.exports.optimizeLorentzianTrain=function(ee,te,ne){var ae=Z(ee);if(null===ae||3>ae[0].rows)return null;for(var se=ae[0],oe=ae[1],le=ae[2],de=0,ue=se.length,fe=[],me=0,he,ge,pe,le,ce;me<te.length;me++){for(he=te[me].x-4*te[me].width;se[de++]<he&&de<ue;);for(he=te[me].x+4*te[me].width,ge=[],pe=[];se[de]<=he&&de<ue;)ge.push(se[de][0]),pe.push(oe[de][0]*le),de++;ce=T([ge,pe],te[me],ne),ce?fe.push({x:ce[0][0],y:ce[1][0],width:ce[2][0],opt:!0}):fe.push({x:te[me].x,y:te[me].y,width:te[me].width,opt:!1})}return fe}},function(_,S,E){'use strict';S.array=E(30),S.matrix=E(81)},function(_,S,E){'use strict';function C(oe,le){'undefined'==typeof le&&(le=0);var de=oe.length,ue=oe[0].length,he,ge,pe,fe;if(-1===le){for(he=[0],ge=de*ue,pe=0;pe<de;pe++)for(fe=0;fe<ue;fe++)he[0]+=oe[pe][fe];he[0]/=ge}else if(0===le)for(he=Array(ue),ge=de,fe=0;fe<ue;fe++){for(he[fe]=0,pe=0;pe<de;pe++)he[fe]+=oe[pe][fe];he[fe]/=ge}else if(1===le)for(he=Array(de),ge=ue,fe=0;fe<de;fe++){for(he[fe]=0,pe=0;pe<ue;pe++)he[fe]+=oe[fe][pe];he[fe]/=ge}else throw new Error('Invalid dimension');return he}function R(oe,le,de){for(var ue=I(oe,le,de),he=ue.length,ge=0;ge<he;ge++)ue[ge]=Math.sqrt(ue[ge]);return ue}function I(oe,le,de){'undefined'==typeof de&&(de=!0),le=le||C(oe);var ue=oe.length;if(0===ue)return[];for(var he=oe[0].length,ge=Array(he),pe=0;pe<he;pe++){for(var fe=0,ce=0,me=0,be=0;be<ue;be++)me=oe[be][pe]-le[pe],fe+=me,ce+=me*me;ge[pe]=de?(ce-fe*fe/ue)/(ue-1):(ce-fe*fe/ue)/ue}return ge}function Z(oe,le,de){'undefined'==typeof de&&(de=0),'undefined'==typeof le&&(0===de?le=oe.length-1:1==de&&(le=oe[0].length-1));var ue=C(oe,de),he=oe.length;if(0===he)return[[]];var ge=oe[0].length,pe,fe,ce,me,be;if(0===de){for(pe=Array(ge),fe=0;fe<ge;fe++)pe[fe]=Array(ge);for(fe=0;fe<ge;fe++)for(ce=fe;ce<ge;ce++){for(me=0,be=0;be<he;be++)me+=(oe[be][ce]-ue[ce])*(oe[be][fe]-ue[fe]);me/=le,pe[fe][ce]=me,pe[ce][fe]=me}}else if(1===de){for(pe=Array(he),fe=0;fe<he;fe++)pe[fe]=Array(he);for(fe=0;fe<he;fe++)for(ce=fe;ce<he;ce++){for(me=0,be=0;be<ge;be++)me+=(oe[ce][be]-ue[ce])*(oe[fe][be]-ue[fe]);me/=le,pe[fe][ce]=me,pe[ce][fe]=me}}else throw new Error('Invalid dimension');return pe}function K(oe,le,de){return le=le||C(oe),'undefined'==typeof de&&(de=R(oe,!0,le)),G(Q(oe,le,!1),de,!0)}function Q(oe,le,de){le=le||C(oe);var ue=oe,he=oe.length,ge,pe,fe;if(!de)for(ue=Array(he),ge=0;ge<he;ge++)ue[ge]=Array(oe[ge].length);for(ge=0;ge<he;ge++){var ce=ue[ge];for(pe=0,fe=ce.length;pe<fe;pe++)ce[pe]=oe[ge][pe]-le[pe]}return ue}function G(oe,le,de){'undefined'==typeof le&&(le=R(oe));var ue=oe,he=oe.length,ge,pe,fe;if(!de)for(ue=Array(he),ge=0;ge<he;ge++)ue[ge]=Array(oe[ge].length);for(ge=0;ge<he;ge++){var ce=ue[ge],me=oe[ge];for(pe=0,fe=ce.length;pe<fe;pe++)0===le[pe]||isNaN(le[pe])||(ce[pe]=me[pe]/le[pe])}return ue}function te(oe,le,de){'undefined'==typeof de&&(de=0);var ue=oe.length;if(0===ue)return[];var he=oe[0].length,ge,pe,fe,ce,me,be;if(0===de){for(ge=Array(he),pe=0;pe<he;pe++)ge[pe]=0;for(pe=0;pe<ue;pe++)for(be=oe[pe],me=le[pe],ce=0;ce<he;ce++)ge[ce]+=be[ce]*me}else if(1===de){for(ge=Array(ue),pe=0;pe<ue;pe++)ge[pe]=0;for(ce=0;ce<ue;ce++)for(be=oe[ce],me=le[ce],pe=0;pe<he;pe++)ge[ce]+=be[pe]*me}else throw new Error('Invalid dimension');var _e=se.sum(le);if(0!==_e)for(pe=0,fe=ge.length;pe<fe;pe++)ge[pe]/=_e;return ge}function ae(oe,le,de,ue,he){he=he||0,de=de||te(oe,le,he),'undefined'==typeof ue&&(ue=1);var ge=oe.length;if(0===ge)return[[]];var pe=oe[0].length,fe,ce,me,be,_e;if(0===he){for(fe=Array(pe),ce=0;ce<pe;ce++)fe[ce]=Array(pe);for(ce=0;ce<pe;ce++)for(me=ce;me<pe;me++){for(_e=0,be=0;be<ge;be++)_e+=le[be]*(oe[be][me]-de[me])*(oe[be][ce]-de[ce]);fe[ce][me]=_e*ue,fe[me][ce]=_e*ue}}else if(1===he){for(fe=Array(ge),ce=0;ce<ge;ce++)fe[ce]=Array(ge);for(ce=0;ce<ge;ce++)for(me=ce;me<ge;me++){for(_e=0,be=0;be<pe;be++)_e+=le[be]*(oe[me][be]-de[me])*(oe[ce][be]-de[ce]);fe[ce][me]=_e*ue,fe[me][ce]=_e*ue}}else throw new Error('Invalid dimension');return fe}var se=E(30);_.exports={entropy:function(oe,le){'undefined'==typeof le&&(le=0);for(var de=0,ue=oe.length,he=oe[0].length,ge=0;ge<ue;ge++)for(var pe=0;pe<he;pe++)de+=oe[ge][pe]*Math.log(oe[ge][pe]+le);return-de},mean:C,standardDeviation:R,variance:I,median:function(oe){for(var le=oe.length,de=oe[0].length,ue=Array(de),he=0,ge;he<de;he++){ge=Array(le);for(var pe=0;pe<le;pe++)ge[pe]=oe[pe][he];ge.sort();var fe=ge.length;ue[he]=0==fe%2?0.5*(ge[fe/2]+ge[fe/2-1]):ge[Math.floor(fe/2)]}return ue},mode:function(oe){var le=oe.length,de=oe[0].length,ue=Array(de),he,ge;for(he=0;he<de;he++){for(var pe=Array(le),fe=0;fe<le;fe++)pe[fe]=0;var ce=Array(le),me=0;for(ge=0;ge<le;ge++){var be=ce.indexOf(oe[ge][he]);0<=be?pe[be]++:(ce[me]=oe[ge][he],pe[me]=1,me++)}var _e=0,ye=0;for(ge=0;ge<me;ge++)pe[ge]>_e&&(_e=pe[ge],ye=ge);ue[he]=ce[ye]}return ue},skewness:function(oe,le){'undefined'==typeof le&&(le=!0);for(var de=C(oe),ue=oe.length,he=de.length,ge=Array(he),pe=0;pe<he;pe++){for(var fe=0,ce=0,me=0,be;me<ue;me++)be=oe[me][pe]-de[pe],fe+=be*be,ce+=be*be*be;var _e=fe/ue,ye=ce/ue,xe=ye/Math.pow(_e,3/2);if(le){var we=Math.sqrt(ue*(ue-1));ge[pe]=we/(ue-2)*xe}else ge[pe]=xe}return ge},kurtosis:function(oe,le){'undefined'==typeof le&&(le=!0);for(var de=C(oe),ue=oe.length,he=oe[0].length,ge=Array(he),pe=0;pe<he;pe++){for(var fe=0,ce=0,me=0,be;me<ue;me++)be=oe[me][pe]-de[pe],fe+=be*be,ce+=be*be*be*be;var _e=fe/ue,ye=ce/ue;if(le){var xe=fe/(ue-1),ke=ce/(xe*xe);ge[pe]=ue*(ue+1)/((ue-1)*(ue-2)*(ue-3))*ke-3*((ue-1)*(ue-1)/((ue-2)*(ue-3)))}else ge[pe]=ye/(_e*_e)-3}return ge},standardError:function(oe){for(var le=oe.length,de=R(oe),ue=de.length,he=Array(ue),ge=Math.sqrt(le),pe=0;pe<ue;pe++)he[pe]=de[pe]/ge;return he},covariance:function(oe,le){return Z(oe,void 0,le)},scatter:Z,correlation:function(oe){var le=C(oe),de=R(oe,!0,le),ue=K(oe,le,de),he=oe.length,ge=oe[0].length,pe,fe,ce=Array(ge);for(pe=0;pe<ge;pe++)ce[pe]=Array(ge);for(pe=0;pe<ge;pe++)for(fe=pe;fe<ge;fe++){for(var me=0,be=0,_e=ue.length;be<_e;be++)me+=ue[be][fe]*ue[be][pe];me/=he-1,ce[pe][fe]=me,ce[fe][pe]=me}return ce},zScores:K,center:Q,standardize:G,weightedVariance:function(oe,le){var de=C(oe),ue=oe.length;if(0===ue)return[];for(var he=oe[0].length,ge=Array(he),pe=0;pe<he;pe++){for(var fe=0,ce=0,me=0,be=0;be<ue;be++){var _e=oe[be][pe]-de[pe],ye=le[be];fe+=ye*(_e*_e),me+=ye,ce+=ye*ye}ge[pe]=fe*(me/(me*me-ce))}return ge},weightedMean:te,weightedCovariance:function(oe,le,de,ue){ue=ue||0,de=de||te(oe,le,ue);for(var he=0,ge=0,pe=0,fe=le.length;pe<fe;pe++)he+=le[pe],ge+=le[pe]*le[pe];var ce=he/(he*he-ge);return ae(oe,le,de,ce,ue)},weightedScatter:ae}},function(_,S,E){function C($,Z,W,K){for(var Q=0,G=0,ee=Z-W;ee<Z+W;ee++)0<=ee&&ee<$.length-1&&(Q+=$[ee+1]-$[ee],G++);return Math.pow(Q/G,K)}function R($,Z,W,K){var Q=0;return Q=0<W?(4*W-2)/(W*(2*Z-W+1))*($*R($,Z,W-1,K)+K*R($,Z,W-1,K-1))-(W-1)*(2*Z+W)/(W*(2*Z-W+1))*R($,Z,W-2,K):0==W&&0==K?1:0,Q}function I($,Z){var W=1;if($>=Z)for(var K=$-Z+1;K<=$;K++)W*=K;return W}function T($,Z,W,K,Q){for(var G=0,ee=0;ee<=K;ee++)G+=(2*ee+1)*(I(2*W,ee)/I(2*W+ee+1,ee+1))*R($,W,ee,0)*R(Z,W,ee,Q);return G}function P($,Z,W){for(var K=Array($),Q=Math.floor($/2),G=-Q;G<=Q;G++){K[G+Q]=Array($);for(var ee=-Q;ee<=Q;ee++)K[G+Q][ee+Q]=T(ee,G,Q,Z,W)}return K}var F=E(16),O=E(80),M={windowSize:9,derivative:0,polynomial:3};_.exports=function($,Z,W){if(W=F({},M,W),0==W.windowSize%2||5>W.windowSize||!Number.isInteger(W.windowSize))throw new RangeError('Invalid window size (should be odd and at least 5 integer number)');if(W.windowSize>$.length)throw new RangeError('Window size is higher than the data length '+W.windowSize+'>'+$.length);if(0>W.derivative||!Number.isInteger(W.derivative))throw new RangeError('Derivative should be a positive integer');if(1>W.polynomial||!Number.isInteger(W.polynomial))throw new RangeError('Polynomial should be a positive integer');6<=W.polynomial&&console.warn('You should not use polynomial grade higher than 5 if you are not sure that your data arises from such a model. Possible polynomial oscillation problems');var K=W.windowSize,Q=Math.floor(K/2),G=$.length,ee=Array(G),te=P(K,W.polynomial,W.derivative),ne=0,ae=!0;'[object Array]'===Object.prototype.toString.call(Z)?ae=!1:ne=Math.pow(Z,W.derivative);for(var se=0;se<Q;se++){for(var oe=te[Q-se-1],le=te[Q+se+1],de=0,ue=0,he=0;he<K;he++)de+=oe[he]*$[he],ue+=le[he]*$[G-K+he-1];ae?(ee[Q-se-1]=de/ne,ee[G-Q+se]=ue/ne):(ne=C(Z,Q-se-1,Q,W.derivative),ee[Q-se-1]=de/ne,ne=C(Z,G-Q+se,Q,W.derivative),ee[G-Q+se]=ue/ne)}for(var ge=te[Q],se=K,pe;se<G+1;se++){pe=0;for(var he=0;he<K;he++)pe+=ge[he]*$[he+se-K];ae||(ne=C(Z,se-Q-1,Q,W.derivative)),ee[se-Q-1]=pe/ne}return ee}},function(_){'use strict';function D(R){var I=Math.sqrt(2*R.length+0.25)-0.5,T=[],P=Array(I),F=I,O=0,M=[];for(O=I-1;0<=O;O--)P[O]=1;for(var $=-1,Z=[];0<F;){if(0===Z.length){for(M=Array(I),O=0;O<I;O++)M[O]=0;for(T.push(M),$=0;0==P[$];$++);}else $=Z.splice(0,1);M[$]=1,P[$]=0,F--;var W=Array(I);for(O=0;O<I;O++){var K=Math.max($,O),Q=Math.min($,O);W[O]=R[Q*(2*I-Q-1)/2+K],1==W[O]&&1==P[O]&&0==M[O]&&(Z.push(O),M[O]=1)}}return T}const C={threshold:0,out:'assignment'};_.exports=function(I,T){const P=Object.assign({},C,T);var F,O,M,$;if('number'==typeof I[0])F=D(I);else if('object'==typeof I[0]){for(var Z=I.length,W=Array(Z*(Z+1)/2),K=0,O=0;O<Z;O++)for(var M=O;M<Z;M++)W[K++]=I[O][M]>P.threshold?1:0;F=D(W)}if('indexes'===P.out||'values'===P.out){var Q=Array(F.length);for(O=0;O<F.length;O++)for(Q[O]=[],M=0;M<F[O].length;M++)0!=F[O][M]&&Q[O].push(M);if('values'===P.out){var G=Array(Q.length);for(O=0;O<Q.length;O++)for(G[O]=Array(Q[O].length),M=0;M<Q[O].length;M++)for(G[O][M]=Array(Q[O].length),$=0;$<Q[O].length;$++)G[O][M][$]=I[Q[O][M]][Q[O][$]];return G}return Q}return F}},function(_,S,E){'use strict';function D(R,I){return R-I}var C=E(31);S.max=function(I){for(var R=-Infinity,T=0;T<I.length;T++)for(var P=0;P<I[T].length;P++)I[T][P]>R&&(R=I[T][P]);return R},S.min=function(I){for(var R=Infinity,T=0;T<I.length;T++)for(var P=0;P<I[T].length;P++)I[T][P]<R&&(R=I[T][P]);return R},S.minMax=function(I){for(var T=Infinity,P=-Infinity,F=0;F<I.length;F++)for(var O=0;O<I[F].length;O++)I[F][O]<T&&(T=I[F][O]),I[F][O]>P&&(P=I[F][O]);return{min:T,max:P}},S.entropy=function(I,T){'undefined'==typeof T&&(T=0);for(var P=0,F=I.length,O=I[0].length,M=0;M<F;M++)for(var $=0;$<O;$++)P+=I[M][$]*Math.log(I[M][$]+T);return-P},S.mean=function(I,T){'undefined'==typeof T&&(T=0);var P=I.length,F=I[0].length,O,M,$,Z;if(-1===T){for(O=[0],M=P*F,$=0;$<P;$++)for(Z=0;Z<F;Z++)O[0]+=I[$][Z];O[0]/=M}else if(0===T)for(O=Array(F),M=P,Z=0;Z<F;Z++){for(O[Z]=0,$=0;$<P;$++)O[Z]+=I[$][Z];O[Z]/=M}else if(1===T)for(O=Array(P),M=F,Z=0;Z<P;Z++){for(O[Z]=0,$=0;$<F;$++)O[Z]+=I[Z][$];O[Z]/=M}else throw new Error('Invalid dimension');return O},S.sum=function(I,T){'undefined'==typeof T&&(T=0);var P=I.length,F=I[0].length,O,M,$;if(-1===T)for(O=[0],M=0;M<P;M++)for($=0;$<F;$++)O[0]+=I[M][$];else if(0===T)for(O=Array(F),$=0;$<F;$++)for(O[$]=0,M=0;M<P;M++)O[$]+=I[M][$];else if(1===T)for(O=Array(P),$=0;$<P;$++)for(O[$]=0,M=0;M<F;M++)O[$]+=I[$][M];else throw new Error('Invalid dimension');return O},S.product=function(I,T){'undefined'==typeof T&&(T=0);var P=I.length,F=I[0].length,O,M,$;if(-1===T)for(O=[1],M=0;M<P;M++)for($=0;$<F;$++)O[0]*=I[M][$];else if(0===T)for(O=Array(F),$=0;$<F;$++)for(O[$]=1,M=0;M<P;M++)O[$]*=I[M][$];else if(1===T)for(O=Array(P),$=0;$<P;$++)for(O[$]=1,M=0;M<F;M++)O[$]*=I[$][M];else throw new Error('Invalid dimension');return O},S.standardDeviation=function(I,T,P){for(var F=S.variance(I,T,P),O=F.length,M=0;M<O;M++)F[M]=Math.sqrt(F[M]);return F},S.variance=function(I,T,P){'undefined'==typeof P&&(P=!0),T=T||S.mean(I);var F=I.length;if(0===F)return[];for(var O=I[0].length,M=Array(O),$=0;$<O;$++){for(var Z=0,W=0,K=0,Q=0;Q<F;Q++)K=I[Q][$]-T[$],Z+=K,W+=K*K;M[$]=P?(W-Z*Z/F)/(F-1):(W-Z*Z/F)/F}return M},S.median=function(I){for(var T=I.length,P=I[0].length,F=Array(P),O=0,M;O<P;O++){M=Array(T);for(var $=0;$<T;$++)M[$]=I[$][O];M.sort(D);var Z=M.length;F[O]=0==Z%2?0.5*(M[Z/2]+M[Z/2-1]):M[Math.floor(Z/2)]}return F},S.mode=function(I){var T=I.length,P=I[0].length,F=Array(P),O,M;for(O=0;O<P;O++){for(var $=Array(T),Z=0;Z<T;Z++)$[Z]=0;var W=Array(T),K=0;for(M=0;M<T;M++){var Q=W.indexOf(I[M][O]);0<=Q?$[Q]++:(W[K]=I[M][O],$[K]=1,K++)}var G=0,ee=0;for(M=0;M<K;M++)$[M]>G&&(G=$[M],ee=M);F[O]=W[ee]}return F},S.skewness=function(I,T){'undefined'==typeof T&&(T=!0);for(var P=S.mean(I),F=I.length,O=P.length,M=Array(O),$=0;$<O;$++){for(var Z=0,W=0,K=0,Q;K<F;K++)Q=I[K][$]-P[$],Z+=Q*Q,W+=Q*Q*Q;var G=Z/F,ee=W/F,te=ee/Math.pow(G,3/2);if(T){var ne=Math.sqrt(F*(F-1));M[$]=ne/(F-2)*te}else M[$]=te}return M},S.kurtosis=function(I,T){'undefined'==typeof T&&(T=!0);for(var P=S.mean(I),F=I.length,O=I[0].length,M=Array(O),$=0;$<O;$++){for(var Z=0,W=0,K=0,Q;K<F;K++)Q=I[K][$]-P[$],Z+=Q*Q,W+=Q*Q*Q*Q;var G=Z/F,ee=W/F;if(T){var te=Z/(F-1),ae=W/(te*te);M[$]=F*(F+1)/((F-1)*(F-2)*(F-3))*ae-3*((F-1)*(F-1)/((F-2)*(F-3)))}else M[$]=ee/(G*G)-3}return M},S.standardError=function(I){for(var T=I.length,P=S.standardDeviation(I),F=P.length,O=Array(F),M=Math.sqrt(T),$=0;$<F;$++)O[$]=P[$]/M;return O},S.covariance=function(I,T){return S.scatter(I,void 0,T)},S.scatter=function(I,T,P){'undefined'==typeof P&&(P=0),'undefined'==typeof T&&(0===P?T=I.length-1:1==P&&(T=I[0].length-1));var F=S.mean(I,P),O=I.length;if(0===O)return[[]];var M=I[0].length,$,Z,W,K,Q;if(0===P){for($=Array(M),Z=0;Z<M;Z++)$[Z]=Array(M);for(Z=0;Z<M;Z++)for(W=Z;W<M;W++){for(K=0,Q=0;Q<O;Q++)K+=(I[Q][W]-F[W])*(I[Q][Z]-F[Z]);K/=T,$[Z][W]=K,$[W][Z]=K}}else if(1===P){for($=Array(O),Z=0;Z<O;Z++)$[Z]=Array(O);for(Z=0;Z<O;Z++)for(W=Z;W<O;W++){for(K=0,Q=0;Q<M;Q++)K+=(I[W][Q]-F[W])*(I[Z][Q]-F[Z]);K/=T,$[Z][W]=K,$[W][Z]=K}}else throw new Error('Invalid dimension');return $},S.correlation=function(I){var T=S.mean(I),P=S.standardDeviation(I,!0,T),F=S.zScores(I,T,P),O=I.length,M=I[0].length,$,Z,W=Array(M);for($=0;$<M;$++)W[$]=Array(M);for($=0;$<M;$++)for(Z=$;Z<M;Z++){for(var K=0,Q=0,G=F.length;Q<G;Q++)K+=F[Q][Z]*F[Q][$];K/=O-1,W[$][Z]=K,W[Z][$]=K}return W},S.zScores=function(I,T,P){return T=T||S.mean(I),'undefined'==typeof P&&(P=S.standardDeviation(I,!0,T)),S.standardize(S.center(I,T,!1),P,!0)},S.center=function(I,T,P){T=T||S.mean(I);var F=I,O=I.length,M,$,Z;if(!P)for(F=Array(O),M=0;M<O;M++)F[M]=Array(I[M].length);for(M=0;M<O;M++){var W=F[M];for($=0,Z=W.length;$<Z;$++)W[$]=I[M][$]-T[$]}return F},S.standardize=function(I,T,P){'undefined'==typeof T&&(T=S.standardDeviation(I));var F=I,O=I.length,M,$,Z;if(!P)for(F=Array(O),M=0;M<O;M++)F[M]=Array(I[M].length);for(M=0;M<O;M++){var W=F[M],K=I[M];for($=0,Z=W.length;$<Z;$++)0===T[$]||isNaN(T[$])||(W[$]=K[$]/T[$])}return F},S.weightedVariance=function(I,T){var P=S.mean(I),F=I.length;if(0===F)return[];for(var O=I[0].length,M=Array(O),$=0;$<O;$++){for(var Z=0,W=0,K=0,Q=0;Q<F;Q++){var G=I[Q][$]-P[$],ee=T[Q];Z+=ee*(G*G),K+=ee,W+=ee*ee}M[$]=Z*(K/(K*K-W))}return M},S.weightedMean=function(I,T,P){'undefined'==typeof P&&(P=0);var F=I.length;if(0===F)return[];var O=I[0].length,M,$,Z,W,K,Q;if(0===P){for(M=Array(O),$=0;$<O;$++)M[$]=0;for($=0;$<F;$++)for(Q=I[$],K=T[$],W=0;W<O;W++)M[W]+=Q[W]*K}else if(1===P){for(M=Array(F),$=0;$<F;$++)M[$]=0;for(W=0;W<F;W++)for(Q=I[W],K=T[W],$=0;$<O;$++)M[W]+=Q[$]*K}else throw new Error('Invalid dimension');var G=C.sum(T);if(0!==G)for($=0,Z=M.length;$<Z;$++)M[$]/=G;return M},S.weightedCovariance=function(I,T,P,F){F=F||0,P=P||S.weightedMean(I,T,F);for(var O=0,M=0,$=0,Z=T.length;$<Z;$++)O+=T[$],M+=T[$]*T[$];var W=O/(O*O-M);return S.weightedScatter(I,T,P,W,F)},S.weightedScatter=function(I,T,P,F,O){O=O||0,P=P||S.weightedMean(I,T,O),'undefined'==typeof F&&(F=1);var M=I.length;if(0===M)return[[]];var $=I[0].length,Z,W,K,Q,G;if(0===O){for(Z=Array($),W=0;W<$;W++)Z[W]=Array($);for(W=0;W<$;W++)for(K=W;K<$;K++){for(G=0,Q=0;Q<M;Q++)G+=T[Q]*(I[Q][K]-P[K])*(I[Q][W]-P[W]);Z[W][K]=G*F,Z[K][W]=G*F}}else if(1===O){for(Z=Array(M),W=0;W<M;W++)Z[W]=Array(M);for(W=0;W<M;W++)for(K=W;K<M;K++){for(G=0,Q=0;Q<$;Q++)G+=T[Q]*(I[K][Q]-P[K])*(I[W][Q]-P[W]);Z[W][K]=G*F,Z[K][W]=G*F}}else throw new Error('Invalid dimension');return Z}},function(_,S,E){'use strict';var D=E(1).assign,C=E(86),R=E(87),I=E(34),T={};D(T,C,R,I),_.exports=T},function(_,S,E){'use strict';function D(ae){if(!(this instanceof D))return new D(ae);this.options=P.assign({level:ee,method:ne,chunkSize:16384,windowBits:15,memLevel:8,strategy:te,to:''},ae||{});var se=this.options;se.raw&&0<se.windowBits?se.windowBits=-se.windowBits:se.gzip&&0<se.windowBits&&16>se.windowBits&&(se.windowBits+=16),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0;var oe=T.deflateInit2(this.strm,se.level,se.method,se.windowBits,se.memLevel,se.strategy);if(oe!==K)throw new Error(O[oe]);if(se.header&&T.deflateSetHeader(this.strm,se.header),se.dictionary){var le;if(le='string'==typeof se.dictionary?F.string2buf(se.dictionary):'[object ArrayBuffer]'===$.call(se.dictionary)?new Uint8Array(se.dictionary):se.dictionary,oe=T.deflateSetDictionary(this.strm,le),oe!==K)throw new Error(O[oe]);this._dict_set=!0}}function C(ae,se){var oe=new D(se);if(oe.push(ae,!0),oe.err)throw oe.msg||O[oe.err];return oe.result}var T=E(88),P=E(1),F=E(32),O=E(12),M=E(36),$=Object.prototype.toString,W=4,K=0,Q=1,G=2,ee=-1,te=0,ne=8;D.prototype.push=function(ae,se){var oe=this.strm,le=this.options.chunkSize,de,ue;if(this.ended)return!1;ue=se===~~se?se:!0===se?W:0,oe.input='string'==typeof ae?F.string2buf(ae):'[object ArrayBuffer]'===$.call(ae)?new Uint8Array(ae):ae,oe.next_in=0,oe.avail_in=oe.input.length;do{if(0===oe.avail_out&&(oe.output=new P.Buf8(le),oe.next_out=0,oe.avail_out=le),de=T.deflate(oe,ue),de!==Q&&de!==K)return this.onEnd(de),this.ended=!0,!1;(0===oe.avail_out||0===oe.avail_in&&(ue===W||ue===G))&&('string'===this.options.to?this.onData(F.buf2binstring(P.shrinkBuf(oe.output,oe.next_out))):this.onData(P.shrinkBuf(oe.output,oe.next_out)))}while((0<oe.avail_in||0===oe.avail_out)&&de!==Q);return ue===W?(de=T.deflateEnd(this.strm),this.onEnd(de),this.ended=!0,de===K):ue!==G||(this.onEnd(K),oe.avail_out=0,!0)},D.prototype.onData=function(ae){this.chunks.push(ae)},D.prototype.onEnd=function(ae){ae===K&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=P.flattenChunks(this.chunks)),this.chunks=[],this.err=ae,this.msg=this.strm.msg},S.Deflate=D,S.deflate=C,S.deflateRaw=function(ae,se){return se=se||{},se.raw=!0,C(ae,se)},S.gzip=function(ae,se){return se=se||{},se.gzip=!0,C(ae,se)}},function(_,S,E){'use strict';function D(W){if(!(this instanceof D))return new D(W);this.options=T.assign({chunkSize:16384,windowBits:0,to:''},W||{});var K=this.options;K.raw&&0<=K.windowBits&&16>K.windowBits&&(K.windowBits=-K.windowBits,0===K.windowBits&&(K.windowBits=-15)),0<=K.windowBits&&16>K.windowBits&&!(W&&W.windowBits)&&(K.windowBits+=32),15<K.windowBits&&48>K.windowBits&&0==(15&K.windowBits)&&(K.windowBits|=15),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0;var Q=I.inflateInit2(this.strm,K.windowBits);if(Q!==F.Z_OK)throw new Error(O[Q]);this.header=new $,I.inflateGetHeader(this.strm,this.header)}function C(W,K){var Q=new D(K);if(Q.push(W,!0),Q.err)throw Q.msg||O[Q.err];return Q.result}var I=E(91),T=E(1),P=E(32),F=E(34),O=E(12),M=E(36),$=E(89),Z=Object.prototype.toString;D.prototype.push=function(W,K){var Q=this.strm,G=this.options.chunkSize,ee=this.options.dictionary,de=!1,te,ne,ae,se,oe,le;if(this.ended)return!1;ne=K===~~K?K:!0===K?F.Z_FINISH:F.Z_NO_FLUSH,Q.input='string'==typeof W?P.binstring2buf(W):'[object ArrayBuffer]'===Z.call(W)?new Uint8Array(W):W,Q.next_in=0,Q.avail_in=Q.input.length;do{if(0===Q.avail_out&&(Q.output=new T.Buf8(G),Q.next_out=0,Q.avail_out=G),te=I.inflate(Q,F.Z_NO_FLUSH),te===F.Z_NEED_DICT&&ee&&(le='string'==typeof ee?P.string2buf(ee):'[object ArrayBuffer]'===Z.call(ee)?new Uint8Array(ee):ee,te=I.inflateSetDictionary(this.strm,le)),te===F.Z_BUF_ERROR&&!0==de&&(te=F.Z_OK,de=!1),te!==F.Z_STREAM_END&&te!==F.Z_OK)return this.onEnd(te),this.ended=!0,!1;Q.next_out&&(0===Q.avail_out||te===F.Z_STREAM_END||0===Q.avail_in&&(ne===F.Z_FINISH||ne===F.Z_SYNC_FLUSH))&&('string'===this.options.to?(ae=P.utf8border(Q.output,Q.next_out),se=Q.next_out-ae,oe=P.buf2string(Q.output,ae),Q.next_out=se,Q.avail_out=G-se,se&&T.arraySet(Q.output,Q.output,ae,se,0),this.onData(oe)):this.onData(T.shrinkBuf(Q.output,Q.next_out))),0===Q.avail_in&&0===Q.avail_out&&(de=!0)}while((0<Q.avail_in||0===Q.avail_out)&&te!==F.Z_STREAM_END);return te===F.Z_STREAM_END&&(ne=F.Z_FINISH),ne===F.Z_FINISH?(te=I.inflateEnd(this.strm),this.onEnd(te),this.ended=!0,te===F.Z_OK):ne!==F.Z_SYNC_FLUSH||(this.onEnd(F.Z_OK),Q.avail_out=0,!0)},D.prototype.onData=function(W){this.chunks.push(W)},D.prototype.onEnd=function(W){W===F.Z_OK&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=T.flattenChunks(this.chunks)),this.chunks=[],this.err=W,this.msg=this.strm.msg},S.Inflate=D,S.inflate=C,S.inflateRaw=function(W,K){return K=K||{},K.raw=!0,C(W,K)},S.ungzip=C},function(_,S,E){'use strict';function D(ht,gt){return ht.msg=be[gt],gt}function C(ht){return(ht<<1)-(4<ht?9:0)}function R(ht){for(var gt=ht.length;0<=--gt;)ht[gt]=0}function I(ht){var gt=ht.state,pt=gt.pending;pt>ht.avail_out&&(pt=ht.avail_out);0===pt||(pe.arraySet(ht.output,gt.pending_buf,gt.pending_out,pt,ht.next_out),ht.next_out+=pt,gt.pending_out+=pt,ht.total_out+=pt,ht.avail_out-=pt,gt.pending-=pt,0===gt.pending&&(gt.pending_out=0))}function T(ht,gt){fe._tr_flush_block(ht,0<=ht.block_start?ht.block_start:-1,ht.strstart-ht.block_start,gt),ht.block_start=ht.strstart,I(ht.strm)}function P(ht,gt){ht.pending_buf[ht.pending++]=gt}function F(ht,gt){ht.pending_buf[ht.pending++]=255&gt>>>8,ht.pending_buf[ht.pending++]=255&gt}function O(ht,gt,pt,ct){var mt=ht.avail_in;return(mt>ct&&(mt=ct),0===mt)?0:(ht.avail_in-=mt,pe.arraySet(gt,ht.input,ht.next_in,mt,pt),1===ht.state.wrap?ht.adler=ce(ht.adler,gt,mt,pt):2===ht.state.wrap&&(ht.adler=me(ht.adler,gt,mt,pt)),ht.next_in+=mt,ht.total_in+=mt,mt)}function M(ht,gt){var pt=ht.max_chain_length,ct=ht.strstart,mt,bt,_t=ht.prev_length,yt=ht.nice_match,xt=ht.strstart>ht.w_size-He?ht.strstart-(ht.w_size-He):0,wt=ht.window,kt=ht.w_mask,jt=ht.prev,vt=ht.strstart+Ze,St=wt[ct+_t-1],Et=wt[ct+_t];ht.prev_length>=ht.good_match&&(pt>>=2),yt>ht.lookahead&&(yt=ht.lookahead);do{if(mt=gt,wt[mt+_t]!==Et||wt[mt+_t-1]!==St||wt[mt]!==wt[ct]||wt[++mt]!==wt[ct+1])continue;ct+=2,mt++;do;while(wt[++ct]===wt[++mt]&&wt[++ct]===wt[++mt]&&wt[++ct]===wt[++mt]&&wt[++ct]===wt[++mt]&&wt[++ct]===wt[++mt]&&wt[++ct]===wt[++mt]&&wt[++ct]===wt[++mt]&&wt[++ct]===wt[++mt]&&ct<vt);if(bt=Ze-(vt-ct),ct=vt-Ze,bt>_t){if(ht.match_start=gt,_t=bt,bt>=yt)break;St=wt[ct+_t-1],Et=wt[ct+_t]}}while((gt=jt[gt&kt])>xt&&0!=--pt);return _t<=ht.lookahead?_t:ht.lookahead}function $(ht){var gt=ht.w_size,pt,ct,mt,bt,_t;do{if(bt=ht.window_size-ht.lookahead-ht.strstart,ht.strstart>=gt+(gt-He)){pe.arraySet(ht.window,ht.window,gt,gt,0),ht.match_start-=gt,ht.strstart-=gt,ht.block_start-=gt,ct=ht.hash_size,pt=ct;do mt=ht.head[--pt],ht.head[pt]=mt>=gt?mt-gt:0;while(--ct);ct=gt,pt=ct;do mt=ht.prev[--pt],ht.prev[pt]=mt>=gt?mt-gt:0;while(--ct);bt+=gt}if(0===ht.strm.avail_in)break;if(ct=O(ht.strm,ht.window,ht.strstart+ht.lookahead,bt),ht.lookahead+=ct,ht.lookahead+ht.insert>=$e)for(_t=ht.strstart-ht.insert,ht.ins_h=ht.window[_t],ht.ins_h=(ht.ins_h<<ht.hash_shift^ht.window[_t+1])&ht.hash_mask;ht.insert&&(ht.ins_h=(ht.ins_h<<ht.hash_shift^ht.window[_t+$e-1])&ht.hash_mask,ht.prev[_t&ht.w_mask]=ht.head[ht.ins_h],ht.head[ht.ins_h]=_t,_t++,ht.insert--,!(ht.lookahead+ht.insert<$e)););}while(ht.lookahead<He&&0!==ht.strm.avail_in)}function W(ht,gt){for(var pt,ct;;){if(ht.lookahead<He){if($(ht),ht.lookahead<He&&gt===_e)return nt;if(0===ht.lookahead)break}if(pt=0,ht.lookahead>=$e&&(ht.ins_h=(ht.ins_h<<ht.hash_shift^ht.window[ht.strstart+$e-1])&ht.hash_mask,pt=ht.prev[ht.strstart&ht.w_mask]=ht.head[ht.ins_h],ht.head[ht.ins_h]=ht.strstart),0!==pt&&ht.strstart-pt<=ht.w_size-He&&(ht.match_length=M(ht,pt)),!(ht.match_length>=$e))ct=fe._tr_tally(ht,0,ht.window[ht.strstart]),ht.lookahead--,ht.strstart++;else if(ct=fe._tr_tally(ht,ht.strstart-ht.match_start,ht.match_length-$e),ht.lookahead-=ht.match_length,ht.match_length<=ht.max_lazy_match&&ht.lookahead>=$e){ht.match_length--;do ht.strstart++,ht.ins_h=(ht.ins_h<<ht.hash_shift^ht.window[ht.strstart+$e-1])&ht.hash_mask,pt=ht.prev[ht.strstart&ht.w_mask]=ht.head[ht.ins_h],ht.head[ht.ins_h]=ht.strstart;while(0!=--ht.match_length);ht.strstart++}else ht.strstart+=ht.match_length,ht.match_length=0,ht.ins_h=ht.window[ht.strstart],ht.ins_h=(ht.ins_h<<ht.hash_shift^ht.window[ht.strstart+1])&ht.hash_mask;if(ct&&(T(ht,!1),0===ht.strm.avail_out))return nt}return ht.insert=ht.strstart<$e-1?ht.strstart:$e-1,gt===we?(T(ht,!0),0===ht.strm.avail_out?st:ot):ht.last_lit&&(T(ht,!1),0===ht.strm.avail_out)?nt:at}function K(ht,gt){for(var pt,ct,mt;;){if(ht.lookahead<He){if($(ht),ht.lookahead<He&&gt===_e)return nt;if(0===ht.lookahead)break}if(pt=0,ht.lookahead>=$e&&(ht.ins_h=(ht.ins_h<<ht.hash_shift^ht.window[ht.strstart+$e-1])&ht.hash_mask,pt=ht.prev[ht.strstart&ht.w_mask]=ht.head[ht.ins_h],ht.head[ht.ins_h]=ht.strstart),ht.prev_length=ht.match_length,ht.prev_match=ht.match_start,ht.match_length=$e-1,0!==pt&&ht.prev_length<ht.max_lazy_match&&ht.strstart-pt<=ht.w_size-He&&(ht.match_length=M(ht,pt),5>=ht.match_length&&(ht.strategy===Ae||ht.match_length===$e&&4096<ht.strstart-ht.match_start)&&(ht.match_length=$e-1)),ht.prev_length>=$e&&ht.match_length<=ht.prev_length){mt=ht.strstart+ht.lookahead-$e,ct=fe._tr_tally(ht,ht.strstart-1-ht.prev_match,ht.prev_length-$e),ht.lookahead-=ht.prev_length-1,ht.prev_length-=2;do++ht.strstart<=mt&&(ht.ins_h=(ht.ins_h<<ht.hash_shift^ht.window[ht.strstart+$e-1])&ht.hash_mask,pt=ht.prev[ht.strstart&ht.w_mask]=ht.head[ht.ins_h],ht.head[ht.ins_h]=ht.strstart);while(0!=--ht.prev_length);if(ht.match_available=0,ht.match_length=$e-1,ht.strstart++,ct&&(T(ht,!1),0===ht.strm.avail_out))return nt}else if(!ht.match_available)ht.match_available=1,ht.strstart++,ht.lookahead--;else if(ct=fe._tr_tally(ht,0,ht.window[ht.strstart-1]),ct&&T(ht,!1),ht.strstart++,ht.lookahead--,0===ht.strm.avail_out)return nt}return ht.match_available&&(ct=fe._tr_tally(ht,0,ht.window[ht.strstart-1]),ht.match_available=0),ht.insert=ht.strstart<$e-1?ht.strstart:$e-1,gt===we?(T(ht,!0),0===ht.strm.avail_out?st:ot):ht.last_lit&&(T(ht,!1),0===ht.strm.avail_out)?nt:at}function Q(ht,gt){for(var _t=ht.window,pt,ct,mt,bt;;){if(ht.lookahead<=Ze){if($(ht),ht.lookahead<=Ze&&gt===_e)return nt;if(0===ht.lookahead)break}if(ht.match_length=0,ht.lookahead>=$e&&0<ht.strstart&&(mt=ht.strstart-1,ct=_t[mt],ct===_t[++mt]&&ct===_t[++mt]&&ct===_t[++mt])){bt=ht.strstart+Ze;do;while(ct===_t[++mt]&&ct===_t[++mt]&&ct===_t[++mt]&&ct===_t[++mt]&&ct===_t[++mt]&&ct===_t[++mt]&&ct===_t[++mt]&&ct===_t[++mt]&&mt<bt);ht.match_length=Ze-(bt-mt),ht.match_length>ht.lookahead&&(ht.match_length=ht.lookahead)}if(ht.match_length>=$e?(pt=fe._tr_tally(ht,1,ht.match_length-$e),ht.lookahead-=ht.match_length,ht.strstart+=ht.match_length,ht.match_length=0):(pt=fe._tr_tally(ht,0,ht.window[ht.strstart]),ht.lookahead--,ht.strstart++),pt&&(T(ht,!1),0===ht.strm.avail_out))return nt}return ht.insert=0,gt===we?(T(ht,!0),0===ht.strm.avail_out?st:ot):ht.last_lit&&(T(ht,!1),0===ht.strm.avail_out)?nt:at}function G(ht,gt){for(var pt;;){if(0===ht.lookahead&&($(ht),0===ht.lookahead)){if(gt===_e)return nt;break}if(ht.match_length=0,pt=fe._tr_tally(ht,0,ht.window[ht.strstart]),ht.lookahead--,ht.strstart++,pt&&(T(ht,!1),0===ht.strm.avail_out))return nt}return ht.insert=0,gt===we?(T(ht,!0),0===ht.strm.avail_out?st:ot):ht.last_lit&&(T(ht,!1),0===ht.strm.avail_out)?nt:at}function ee(ht,gt,pt,ct,mt){this.good_length=ht,this.max_lazy=gt,this.nice_length=pt,this.max_chain=ct,this.func=mt}function te(ht){ht.window_size=2*ht.w_size,R(ht.head),ht.max_lazy_match=ut[ht.level].max_lazy,ht.good_match=ut[ht.level].good_length,ht.nice_match=ut[ht.level].nice_length,ht.max_chain_length=ut[ht.level].max_chain,ht.strstart=0,ht.block_start=0,ht.lookahead=0,ht.insert=0,ht.match_length=ht.prev_length=$e-1,ht.match_available=0,ht.ins_h=0}function ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ze,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new pe.Buf16(2*Ve),this.dyn_dtree=new pe.Buf16(2*(2*Ue+1)),this.bl_tree=new pe.Buf16(2*(2*Be+1)),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new pe.Buf16(qe+1),this.heap=new pe.Buf16(2*Le+1),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new pe.Buf16(2*Le+1),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ae(ht){var gt;return ht&&ht.state?(ht.total_in=ht.total_out=0,ht.data_type=Fe,gt=ht.state,gt.pending=0,gt.pending_out=0,0>gt.wrap&&(gt.wrap=-gt.wrap),gt.status=gt.wrap?Je:tt,ht.adler=2===gt.wrap?0:1,gt.last_flush=_e,fe._tr_init(gt),je):D(ht,Se)}function se(ht){var gt=ae(ht);return gt===je&&te(ht.state),gt}function le(ht,gt,pt,ct,mt,bt){if(!ht)return Se;var _t=1;if(gt===Ce&&(gt=6),0>ct?(_t=0,ct=-ct):15<ct&&(_t=2,ct-=16),1>mt||mt>Xe||pt!==ze||8>ct||15<ct||0>gt||9<gt||0>bt||bt>Te)return D(ht,Se);8===ct&&(ct=9);var yt=new ne;return ht.state=yt,yt.strm=ht,yt.wrap=_t,yt.gzhead=null,yt.w_bits=ct,yt.w_size=1<<yt.w_bits,yt.w_mask=yt.w_size-1,yt.hash_bits=mt+7,yt.hash_size=1<<yt.hash_bits,yt.hash_mask=yt.hash_size-1,yt.hash_shift=~~((yt.hash_bits+$e-1)/$e),yt.window=new pe.Buf8(2*yt.w_size),yt.head=new pe.Buf16(yt.hash_size),yt.prev=new pe.Buf16(yt.w_size),yt.lit_bufsize=1<<mt+6,yt.pending_buf_size=4*yt.lit_bufsize,yt.pending_buf=new pe.Buf8(yt.pending_buf_size),yt.d_buf=1*yt.lit_bufsize,yt.l_buf=3*yt.lit_bufsize,yt.level=gt,yt.strategy=bt,yt.method=pt,se(ht)}var pe=E(1),fe=E(93),ce=E(33),me=E(35),be=E(12),_e=0,we=4,ke=5,je=0,ve=1,Se=-2,De=-5,Ce=-1,Ae=1,Re=2,Te=4,Fe=2,ze=8,Xe=9,Le=256+1+29,Ue=30,Be=19,Ve=2*Le+1,qe=15,$e=3,Ze=258,He=Ze+$e+1,Je=42,Ke=69,Qe=73,Ge=91,et=103,tt=113,it=666,nt=1,at=2,st=3,ot=4,ut;ut=[new ee(0,0,0,0,function(ht,gt){var pt=65535;for(pt>ht.pending_buf_size-5&&(pt=ht.pending_buf_size-5);;){if(1>=ht.lookahead){if($(ht),0===ht.lookahead&&gt===_e)return nt;if(0===ht.lookahead)break}ht.strstart+=ht.lookahead,ht.lookahead=0;var ct=ht.block_start+pt;if((0===ht.strstart||ht.strstart>=ct)&&(ht.lookahead=ht.strstart-ct,ht.strstart=ct,T(ht,!1),0===ht.strm.avail_out))return nt;if(ht.strstart-ht.block_start>=ht.w_size-He&&(T(ht,!1),0===ht.strm.avail_out))return nt}return ht.insert=0,gt===we?(T(ht,!0),0===ht.strm.avail_out?st:ot):ht.strstart>ht.block_start&&(T(ht,!1),0===ht.strm.avail_out)?nt:nt}),new ee(4,4,8,4,W),new ee(4,5,16,8,W),new ee(4,6,32,32,W),new ee(4,4,16,16,K),new ee(8,16,32,32,K),new ee(8,16,128,128,K),new ee(8,32,128,256,K),new ee(32,128,258,1024,K),new ee(32,258,258,4096,K)],S.deflateInit=function(ht,gt){return le(ht,gt,ze,15,8,0)},S.deflateInit2=le,S.deflateReset=se,S.deflateResetKeep=ae,S.deflateSetHeader=function(ht,gt){return ht&&ht.state?2===ht.state.wrap?(ht.state.gzhead=gt,je):Se:Se},S.deflate=function(ht,gt){var pt,ct,mt,bt;if(!ht||!ht.state||gt>ke||0>gt)return ht?D(ht,Se):Se;if(ct=ht.state,!ht.output||!ht.input&&0!==ht.avail_in||ct.status===it&&gt!==we)return D(ht,0===ht.avail_out?De:Se);if(ct.strm=ht,pt=ct.last_flush,ct.last_flush=gt,ct.status===Je)if(2===ct.wrap)ht.adler=0,P(ct,31),P(ct,139),P(ct,8),ct.gzhead?(P(ct,(ct.gzhead.text?1:0)+(ct.gzhead.hcrc?2:0)+(ct.gzhead.extra?4:0)+(ct.gzhead.name?8:0)+(ct.gzhead.comment?16:0)),P(ct,255&ct.gzhead.time),P(ct,255&ct.gzhead.time>>8),P(ct,255&ct.gzhead.time>>16),P(ct,255&ct.gzhead.time>>24),P(ct,9===ct.level?2:ct.strategy>=Re||2>ct.level?4:0),P(ct,255&ct.gzhead.os),ct.gzhead.extra&&ct.gzhead.extra.length&&(P(ct,255&ct.gzhead.extra.length),P(ct,255&ct.gzhead.extra.length>>8)),ct.gzhead.hcrc&&(ht.adler=me(ht.adler,ct.pending_buf,ct.pending,0)),ct.gzindex=0,ct.status=Ke):(P(ct,0),P(ct,0),P(ct,0),P(ct,0),P(ct,0),P(ct,9===ct.level?2:ct.strategy>=Re||2>ct.level?4:0),P(ct,3),ct.status=tt);else{var _t=ze+(ct.w_bits-8<<4)<<8,yt=-1;yt=ct.strategy>=Re||2>ct.level?0:6>ct.level?1:6===ct.level?2:3,_t|=yt<<6,0!==ct.strstart&&(_t|=32),_t+=31-_t%31,ct.status=tt,F(ct,_t),0!==ct.strstart&&(F(ct,ht.adler>>>16),F(ct,65535&ht.adler)),ht.adler=1}if(ct.status===Ke)if(ct.gzhead.extra){for(mt=ct.pending;ct.gzindex<(65535&ct.gzhead.extra.length)&&!(ct.pending===ct.pending_buf_size&&(ct.gzhead.hcrc&&ct.pending>mt&&(ht.adler=me(ht.adler,ct.pending_buf,ct.pending-mt,mt)),I(ht),mt=ct.pending,ct.pending===ct.pending_buf_size));)P(ct,255&ct.gzhead.extra[ct.gzindex]),ct.gzindex++;ct.gzhead.hcrc&&ct.pending>mt&&(ht.adler=me(ht.adler,ct.pending_buf,ct.pending-mt,mt)),ct.gzindex===ct.gzhead.extra.length&&(ct.gzindex=0,ct.status=Qe)}else ct.status=Qe;if(ct.status===Qe)if(ct.gzhead.name){mt=ct.pending;do{if(ct.pending===ct.pending_buf_size&&(ct.gzhead.hcrc&&ct.pending>mt&&(ht.adler=me(ht.adler,ct.pending_buf,ct.pending-mt,mt)),I(ht),mt=ct.pending,ct.pending===ct.pending_buf_size)){bt=1;break}bt=ct.gzindex<ct.gzhead.name.length?255&ct.gzhead.name.charCodeAt(ct.gzindex++):0,P(ct,bt)}while(0!==bt);ct.gzhead.hcrc&&ct.pending>mt&&(ht.adler=me(ht.adler,ct.pending_buf,ct.pending-mt,mt)),0===bt&&(ct.gzindex=0,ct.status=Ge)}else ct.status=Ge;if(ct.status===Ge)if(ct.gzhead.comment){mt=ct.pending;do{if(ct.pending===ct.pending_buf_size&&(ct.gzhead.hcrc&&ct.pending>mt&&(ht.adler=me(ht.adler,ct.pending_buf,ct.pending-mt,mt)),I(ht),mt=ct.pending,ct.pending===ct.pending_buf_size)){bt=1;break}bt=ct.gzindex<ct.gzhead.comment.length?255&ct.gzhead.comment.charCodeAt(ct.gzindex++):0,P(ct,bt)}while(0!==bt);ct.gzhead.hcrc&&ct.pending>mt&&(ht.adler=me(ht.adler,ct.pending_buf,ct.pending-mt,mt)),0===bt&&(ct.status=et)}else ct.status=et;if(ct.status===et&&(ct.gzhead.hcrc?(ct.pending+2>ct.pending_buf_size&&I(ht),ct.pending+2<=ct.pending_buf_size&&(P(ct,255&ht.adler),P(ct,255&ht.adler>>8),ht.adler=0,ct.status=tt)):ct.status=tt),0!==ct.pending){if(I(ht),0===ht.avail_out)return ct.last_flush=-1,je;}else if(0===ht.avail_in&&C(gt)<=C(pt)&&gt!==we)return D(ht,De);if(ct.status===it&&0!==ht.avail_in)return D(ht,De);if(0!==ht.avail_in||0!==ct.lookahead||gt!==_e&&ct.status!==it){var xt=ct.strategy===Re?G(ct,gt):ct.strategy===3?Q(ct,gt):ut[ct.level].func(ct,gt);if((xt===st||xt===ot)&&(ct.status=it),xt===nt||xt===st)return 0===ht.avail_out&&(ct.last_flush=-1),je;if(xt===at&&(gt===1?fe._tr_align(ct):gt!==ke&&(fe._tr_stored_block(ct,0,0,!1),gt===3&&(R(ct.head),0===ct.lookahead&&(ct.strstart=0,ct.block_start=0,ct.insert=0))),I(ht),0===ht.avail_out))return ct.last_flush=-1,je}return gt===we?0>=ct.wrap?ve:(2===ct.wrap?(P(ct,255&ht.adler),P(ct,255&ht.adler>>8),P(ct,255&ht.adler>>16),P(ct,255&ht.adler>>24),P(ct,255&ht.total_in),P(ct,255&ht.total_in>>8),P(ct,255&ht.total_in>>16),P(ct,255&ht.total_in>>24)):(F(ct,ht.adler>>>16),F(ct,65535&ht.adler)),I(ht),0<ct.wrap&&(ct.wrap=-ct.wrap),0===ct.pending?ve:je):je},S.deflateEnd=function(ht){var gt;return ht&&ht.state?(gt=ht.state.status,gt!==Je&&gt!==Ke&&gt!==Qe&&gt!==Ge&&gt!==et&&gt!==tt&&gt!==it)?D(ht,Se):(ht.state=null,gt===tt?D(ht,-3):je):Se},S.deflateSetDictionary=function(ht,gt){var pt=gt.length,ct,mt,bt,_t,yt,xt,wt,kt;if(!ht||!ht.state)return Se;if(ct=ht.state,_t=ct.wrap,2===_t||1===_t&&ct.status!==Je||ct.lookahead)return Se;for(1===_t&&(ht.adler=ce(ht.adler,gt,pt,0)),ct.wrap=0,pt>=ct.w_size&&(0===_t&&(R(ct.head),ct.strstart=0,ct.block_start=0,ct.insert=0),kt=new pe.Buf8(ct.w_size),pe.arraySet(kt,gt,pt-ct.w_size,ct.w_size,0),gt=kt,pt=ct.w_size),yt=ht.avail_in,xt=ht.next_in,wt=ht.input,ht.avail_in=pt,ht.next_in=0,ht.input=gt,$(ct);ct.lookahead>=$e;){mt=ct.strstart,bt=ct.lookahead-($e-1);do ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[mt+$e-1])&ct.hash_mask,ct.prev[mt&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=mt,mt++;while(--bt);ct.strstart=mt,ct.lookahead=$e-1,$(ct)}return ct.strstart+=ct.lookahead,ct.block_start=ct.strstart,ct.insert=ct.lookahead,ct.lookahead=0,ct.match_length=ct.prev_length=$e-1,ct.match_available=0,ht.next_in=xt,ht.input=wt,ht.avail_in=yt,ct.wrap=_t,je},S.deflateInfo='pako deflate (from Nodeca project)'},function(_){'use strict';_.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name='',this.comment='',this.hcrc=0,this.done=!1}},function(_){'use strict';var D=30;_.exports=function(I,T){var P,F,O,M,$,Z,W,K,Q,G,ee,te,ne,ae,se,oe,le,de,ue,he,ge,pe,fe,ce,me;P=I.state,F=I.next_in,ce=I.input,O=F+(I.avail_in-5),M=I.next_out,me=I.output,$=M-(T-I.avail_out),Z=M+(I.avail_out-257),W=P.dmax,K=P.wsize,Q=P.whave,G=P.wnext,ee=P.window,te=P.hold,ne=P.bits,ae=P.lencode,se=P.distcode,oe=(1<<P.lenbits)-1,le=(1<<P.distbits)-1;top:do{15>ne&&(te+=ce[F++]<<ne,ne+=8,te+=ce[F++]<<ne,ne+=8),de=ae[te&oe];dolen:for(;;){if(ue=de>>>24,te>>>=ue,ne-=ue,ue=255&de>>>16,0===ue)me[M++]=65535&de;else if(16&ue){he=65535&de,ue&=15,ue&&(ne<ue&&(te+=ce[F++]<<ne,ne+=8),he+=te&(1<<ue)-1,te>>>=ue,ne-=ue),15>ne&&(te+=ce[F++]<<ne,ne+=8,te+=ce[F++]<<ne,ne+=8),de=se[te&le];dodist:for(;;){if(ue=de>>>24,te>>>=ue,ne-=ue,ue=255&de>>>16,16&ue){if(ge=65535&de,ue&=15,ne<ue&&(te+=ce[F++]<<ne,ne+=8,ne<ue&&(te+=ce[F++]<<ne,ne+=8)),ge+=te&(1<<ue)-1,ge>W){I.msg='invalid distance too far back',P.mode=D;break top}if(te>>>=ue,ne-=ue,ue=M-$,ge>ue){if(ue=ge-ue,ue>Q&&P.sane){I.msg='invalid distance too far back',P.mode=D;break top}if(pe=0,fe=ee,0===G){if(pe+=K-ue,ue<he){he-=ue;do me[M++]=ee[pe++];while(--ue);pe=M-ge,fe=me}}else if(G<ue){if(pe+=K+G-ue,ue-=G,ue<he){he-=ue;do me[M++]=ee[pe++];while(--ue);if(pe=0,G<he){ue=G,he-=ue;do me[M++]=ee[pe++];while(--ue);pe=M-ge,fe=me}}}else if(pe+=G-ue,ue<he){he-=ue;do me[M++]=ee[pe++];while(--ue);pe=M-ge,fe=me}for(;2<he;)me[M++]=fe[pe++],me[M++]=fe[pe++],me[M++]=fe[pe++],he-=3;he&&(me[M++]=fe[pe++],1<he&&(me[M++]=fe[pe++]))}else{pe=M-ge;do me[M++]=me[pe++],me[M++]=me[pe++],me[M++]=me[pe++],he-=3;while(2<he);he&&(me[M++]=me[pe++],1<he&&(me[M++]=me[pe++]))}}else if(0==(64&ue)){de=se[(65535&de)+(te&(1<<ue)-1)];continue dodist}else{I.msg='invalid distance code',P.mode=D;break top}break}}else if(0==(64&ue)){de=ae[(65535&de)+(te&(1<<ue)-1)];continue dolen}else if(32&ue){P.mode=12;break top}else{I.msg='invalid literal/length code',P.mode=D;break top}break}}while(F<O&&M<Z);return he=ne>>3,F-=he,ne-=he<<3,te&=(1<<ne)-1,I.next_in=F,I.next_out=M,I.avail_in=F<O?5+(O-F):5-(F-O),I.avail_out=M<Z?257+(Z-M):257-(M-Z),P.hold=te,void(P.bits=ne)}},function(_,S,E){'use strict';function D(at){return(255&at>>>24)+(65280&at>>>8)+((65280&at)<<8)+((255&at)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Q.Buf16(320),this.work=new Q.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R(at){var st;return at&&at.state?(st=at.state,at.total_in=at.total_out=st.total=0,at.msg='',st.wrap&&(at.adler=1&st.wrap),st.mode=ye,st.last=0,st.havedict=0,st.dmax=32768,st.head=null,st.hold=0,st.bits=0,st.lencode=st.lendyn=new Q.Buf32(Ke),st.distcode=st.distdyn=new Q.Buf32(Qe),st.sane=1,st.back=-1,he):fe}function I(at){var st;return at&&at.state?(st=at.state,st.wsize=0,st.whave=0,st.wnext=0,R(at)):fe}function T(at,st){var ot,lt;return at&&at.state?(lt=at.state,0>st?(ot=0,st=-st):(ot=(st>>4)+1,48>st&&(st&=15)),st&&(8>st||15<st))?fe:(null!==lt.window&&lt.wbits!==st&&(lt.window=null),lt.wrap=ot,lt.wbits=st,I(at)):fe}function P(at,st){var ot,lt;return at?(lt=new C,at.state=lt,lt.window=null,ot=T(at,st),ot!==he&&(at.state=null),ot):fe}function O(at){if(tt){var st;for(it=new Q.Buf32(512),nt=new Q.Buf32(32),st=0;144>st;)at.lens[st++]=8;for(;256>st;)at.lens[st++]=9;for(;280>st;)at.lens[st++]=7;for(;288>st;)at.lens[st++]=8;for(ne(se,at.lens,0,288,it,0,at.work,{bits:9}),st=0;32>st;)at.lens[st++]=5;ne(oe,at.lens,0,32,nt,0,at.work,{bits:5}),tt=!1}at.lencode=it,at.lenbits=9,at.distcode=nt,at.distbits=5}function M(at,st,ot,lt){var ht=at.state,ut;return null===ht.window&&(ht.wsize=1<<ht.wbits,ht.wnext=0,ht.whave=0,ht.window=new Q.Buf8(ht.wsize)),lt>=ht.wsize?(Q.arraySet(ht.window,st,ot-ht.wsize,ht.wsize,0),ht.wnext=0,ht.whave=ht.wsize):(ut=ht.wsize-ht.wnext,ut>lt&&(ut=lt),Q.arraySet(ht.window,st,ot-lt,ut,ht.wnext),lt-=ut,lt?(Q.arraySet(ht.window,st,ot-lt,lt,0),ht.wnext=lt,ht.whave=ht.wsize):(ht.wnext+=ut,ht.wnext===ht.wsize&&(ht.wnext=0),ht.whave<ht.wsize&&(ht.whave+=ut))),0}var Q=E(1),G=E(33),ee=E(35),te=E(90),ne=E(92),se=1,oe=2,le=4,ue=6,he=0,fe=-2,ce=-3,me=-4,_e=8,ye=1,xe=2,we=3,ke=4,je=5,ve=6,Se=7,Ee=8,De=9,Ce=10,Ae=11,Re=12,Ie=13,Te=14,Pe=15,Fe=16,ze=17,Xe=18,Ye=19,Ne=20,Oe=21,Me=22,Le=23,Ue=24,Be=25,Ve=26,qe=27,$e=28,Ze=29,He=30,We=31,Ke=852,Qe=592,tt=!0,it,nt;S.inflateReset=I,S.inflateReset2=T,S.inflateResetKeep=R,S.inflateInit=function(at){return P(at,15)},S.inflateInit2=P,S.inflate=function(at,st){var jt=0,Tt=new Q.Buf8(4),zt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ot,lt,ut,ht,gt,pt,ct,mt,bt,_t,yt,xt,wt,kt,vt,St,Et,Dt,Ct,At,Rt,It,Pt,Ft;if(!at||!at.state||!at.output||!at.input&&0!==at.avail_in)return fe;ot=at.state,ot.mode===Re&&(ot.mode=Ie),gt=at.next_out,ut=at.output,ct=at.avail_out,ht=at.next_in,lt=at.input,pt=at.avail_in,mt=ot.hold,bt=ot.bits,_t=pt,yt=ct,It=he;inf_leave:for(;;)switch(ot.mode){case ye:if(0===ot.wrap){ot.mode=Ie;break}for(;16>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}if(2&ot.wrap&&35615===mt){ot.check=0,Tt[0]=255&mt,Tt[1]=255&mt>>>8,ot.check=ee(ot.check,Tt,2,0),mt=0,bt=0,ot.mode=xe;break}if(ot.flags=0,ot.head&&(ot.head.done=!1),!(1&ot.wrap)||(((255&mt)<<8)+(mt>>8))%31){at.msg='incorrect header check',ot.mode=He;break}if((15&mt)!==_e){at.msg='unknown compression method',ot.mode=He;break}if(mt>>>=4,bt-=4,Rt=(15&mt)+8,0===ot.wbits)ot.wbits=Rt;else if(Rt>ot.wbits){at.msg='invalid window size',ot.mode=He;break}ot.dmax=1<<Rt,at.adler=ot.check=1,ot.mode=512&mt?Ce:Re,mt=0,bt=0;break;case xe:for(;16>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}if(ot.flags=mt,(255&ot.flags)!==_e){at.msg='unknown compression method',ot.mode=He;break}if(57344&ot.flags){at.msg='unknown header flags set',ot.mode=He;break}ot.head&&(ot.head.text=1&mt>>8),512&ot.flags&&(Tt[0]=255&mt,Tt[1]=255&mt>>>8,ot.check=ee(ot.check,Tt,2,0)),mt=0,bt=0,ot.mode=we;case we:for(;32>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}ot.head&&(ot.head.time=mt),512&ot.flags&&(Tt[0]=255&mt,Tt[1]=255&mt>>>8,Tt[2]=255&mt>>>16,Tt[3]=255&mt>>>24,ot.check=ee(ot.check,Tt,4,0)),mt=0,bt=0,ot.mode=ke;case ke:for(;16>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}ot.head&&(ot.head.xflags=255&mt,ot.head.os=mt>>8),512&ot.flags&&(Tt[0]=255&mt,Tt[1]=255&mt>>>8,ot.check=ee(ot.check,Tt,2,0)),mt=0,bt=0,ot.mode=je;case je:if(1024&ot.flags){for(;16>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}ot.length=mt,ot.head&&(ot.head.extra_len=mt),512&ot.flags&&(Tt[0]=255&mt,Tt[1]=255&mt>>>8,ot.check=ee(ot.check,Tt,2,0)),mt=0,bt=0}else ot.head&&(ot.head.extra=null);ot.mode=ve;case ve:if(1024&ot.flags&&(xt=ot.length,xt>pt&&(xt=pt),xt&&(ot.head&&(Rt=ot.head.extra_len-ot.length,!ot.head.extra&&(ot.head.extra=Array(ot.head.extra_len)),Q.arraySet(ot.head.extra,lt,ht,xt,Rt)),512&ot.flags&&(ot.check=ee(ot.check,lt,xt,ht)),pt-=xt,ht+=xt,ot.length-=xt),ot.length))break inf_leave;ot.length=0,ot.mode=Se;case Se:if(2048&ot.flags){if(0===pt)break inf_leave;xt=0;do Rt=lt[ht+xt++],ot.head&&Rt&&65536>ot.length&&(ot.head.name+=String.fromCharCode(Rt));while(Rt&&xt<pt);if(512&ot.flags&&(ot.check=ee(ot.check,lt,xt,ht)),pt-=xt,ht+=xt,Rt)break inf_leave}else ot.head&&(ot.head.name=null);ot.length=0,ot.mode=Ee;case Ee:if(4096&ot.flags){if(0===pt)break inf_leave;xt=0;do Rt=lt[ht+xt++],ot.head&&Rt&&65536>ot.length&&(ot.head.comment+=String.fromCharCode(Rt));while(Rt&&xt<pt);if(512&ot.flags&&(ot.check=ee(ot.check,lt,xt,ht)),pt-=xt,ht+=xt,Rt)break inf_leave}else ot.head&&(ot.head.comment=null);ot.mode=De;case De:if(512&ot.flags){for(;16>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}if(mt!==(65535&ot.check)){at.msg='header crc mismatch',ot.mode=He;break}mt=0,bt=0}ot.head&&(ot.head.hcrc=1&ot.flags>>9,ot.head.done=!0),at.adler=ot.check=0,ot.mode=Re;break;case Ce:for(;32>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}at.adler=ot.check=D(mt),mt=0,bt=0,ot.mode=Ae;case Ae:if(0===ot.havedict)return at.next_out=gt,at.avail_out=ct,at.next_in=ht,at.avail_in=pt,ot.hold=mt,ot.bits=bt,2;at.adler=ot.check=1,ot.mode=Re;case Re:if(st===5||st===ue)break inf_leave;case Ie:if(ot.last){mt>>>=7&bt,bt-=7&bt,ot.mode=qe;break}for(;3>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}switch(ot.last=1&mt,mt>>>=1,bt-=1,3&mt){case 0:ot.mode=Te;break;case 1:if(O(ot),ot.mode=Ne,st===ue){mt>>>=2,bt-=2;break inf_leave}break;case 2:ot.mode=ze;break;case 3:at.msg='invalid block type',ot.mode=He;}mt>>>=2,bt-=2;break;case Te:for(mt>>>=7&bt,bt-=7&bt;32>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}if((65535&mt)!=(65535^mt>>>16)){at.msg='invalid stored block lengths',ot.mode=He;break}if(ot.length=65535&mt,mt=0,bt=0,ot.mode=Pe,st===ue)break inf_leave;case Pe:ot.mode=Fe;case Fe:if(xt=ot.length,xt){if(xt>pt&&(xt=pt),xt>ct&&(xt=ct),0===xt)break inf_leave;Q.arraySet(ut,lt,ht,xt,gt),pt-=xt,ht+=xt,ct-=xt,gt+=xt,ot.length-=xt;break}ot.mode=Re;break;case ze:for(;14>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}if(ot.nlen=(31&mt)+257,mt>>>=5,bt-=5,ot.ndist=(31&mt)+1,mt>>>=5,bt-=5,ot.ncode=(15&mt)+4,mt>>>=4,bt-=4,286<ot.nlen||30<ot.ndist){at.msg='too many length or distance symbols',ot.mode=He;break}ot.have=0,ot.mode=Xe;case Xe:for(;ot.have<ot.ncode;){for(;3>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}ot.lens[zt[ot.have++]]=7&mt,mt>>>=3,bt-=3}for(;19>ot.have;)ot.lens[zt[ot.have++]]=0;if(ot.lencode=ot.lendyn,ot.lenbits=7,Pt={bits:ot.lenbits},It=ne(0,ot.lens,0,19,ot.lencode,0,ot.work,Pt),ot.lenbits=Pt.bits,It){at.msg='invalid code lengths set',ot.mode=He;break}ot.have=0,ot.mode=Ye;case Ye:for(;ot.have<ot.nlen+ot.ndist;){for(;;){if(jt=ot.lencode[mt&(1<<ot.lenbits)-1],vt=jt>>>24,St=255&jt>>>16,Et=65535&jt,vt<=bt)break;if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}if(16>Et)mt>>>=vt,bt-=vt,ot.lens[ot.have++]=Et;else{if(16===Et){for(Ft=vt+2;bt<Ft;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}if(mt>>>=vt,bt-=vt,0===ot.have){at.msg='invalid bit length repeat',ot.mode=He;break}Rt=ot.lens[ot.have-1],xt=3+(3&mt),mt>>>=2,bt-=2}else if(17===Et){for(Ft=vt+3;bt<Ft;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}mt>>>=vt,bt-=vt,Rt=0,xt=3+(7&mt),mt>>>=3,bt-=3}else{for(Ft=vt+7;bt<Ft;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}mt>>>=vt,bt-=vt,Rt=0,xt=11+(127&mt),mt>>>=7,bt-=7}if(ot.have+xt>ot.nlen+ot.ndist){at.msg='invalid bit length repeat',ot.mode=He;break}for(;xt--;)ot.lens[ot.have++]=Rt}}if(ot.mode===He)break;if(0===ot.lens[256]){at.msg='invalid code -- missing end-of-block',ot.mode=He;break}if(ot.lenbits=9,Pt={bits:ot.lenbits},It=ne(se,ot.lens,0,ot.nlen,ot.lencode,0,ot.work,Pt),ot.lenbits=Pt.bits,It){at.msg='invalid literal/lengths set',ot.mode=He;break}if(ot.distbits=6,ot.distcode=ot.distdyn,Pt={bits:ot.distbits},It=ne(oe,ot.lens,ot.nlen,ot.ndist,ot.distcode,0,ot.work,Pt),ot.distbits=Pt.bits,It){at.msg='invalid distances set',ot.mode=He;break}if(ot.mode=Ne,st===ue)break inf_leave;case Ne:ot.mode=Oe;case Oe:if(6<=pt&&258<=ct){at.next_out=gt,at.avail_out=ct,at.next_in=ht,at.avail_in=pt,ot.hold=mt,ot.bits=bt,te(at,yt),gt=at.next_out,ut=at.output,ct=at.avail_out,ht=at.next_in,lt=at.input,pt=at.avail_in,mt=ot.hold,bt=ot.bits,ot.mode===Re&&(ot.back=-1);break}for(ot.back=0;;){if(jt=ot.lencode[mt&(1<<ot.lenbits)-1],vt=jt>>>24,St=255&jt>>>16,Et=65535&jt,vt<=bt)break;if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}if(St&&0==(240&St)){for(Dt=vt,Ct=St,At=Et;;){if(jt=ot.lencode[At+((mt&(1<<Dt+Ct)-1)>>Dt)],vt=jt>>>24,St=255&jt>>>16,Et=65535&jt,Dt+vt<=bt)break;if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}mt>>>=Dt,bt-=Dt,ot.back+=Dt}if(mt>>>=vt,bt-=vt,ot.back+=vt,ot.length=Et,0===St){ot.mode=Ve;break}if(32&St){ot.back=-1,ot.mode=Re;break}if(64&St){at.msg='invalid literal/length code',ot.mode=He;break}ot.extra=15&St,ot.mode=Me;case Me:if(ot.extra){for(Ft=ot.extra;bt<Ft;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}ot.length+=mt&(1<<ot.extra)-1,mt>>>=ot.extra,bt-=ot.extra,ot.back+=ot.extra}ot.was=ot.length,ot.mode=Le;case Le:for(;;){if(jt=ot.distcode[mt&(1<<ot.distbits)-1],vt=jt>>>24,St=255&jt>>>16,Et=65535&jt,vt<=bt)break;if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}if(0==(240&St)){for(Dt=vt,Ct=St,At=Et;;){if(jt=ot.distcode[At+((mt&(1<<Dt+Ct)-1)>>Dt)],vt=jt>>>24,St=255&jt>>>16,Et=65535&jt,Dt+vt<=bt)break;if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}mt>>>=Dt,bt-=Dt,ot.back+=Dt}if(mt>>>=vt,bt-=vt,ot.back+=vt,64&St){at.msg='invalid distance code',ot.mode=He;break}ot.offset=Et,ot.extra=15&St,ot.mode=Ue;case Ue:if(ot.extra){for(Ft=ot.extra;bt<Ft;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}ot.offset+=mt&(1<<ot.extra)-1,mt>>>=ot.extra,bt-=ot.extra,ot.back+=ot.extra}if(ot.offset>ot.dmax){at.msg='invalid distance too far back',ot.mode=He;break}ot.mode=Be;case Be:if(0===ct)break inf_leave;if(xt=yt-ct,ot.offset>xt){if(xt=ot.offset-xt,xt>ot.whave&&ot.sane){at.msg='invalid distance too far back',ot.mode=He;break}xt>ot.wnext?(xt-=ot.wnext,wt=ot.wsize-xt):wt=ot.wnext-xt,xt>ot.length&&(xt=ot.length),kt=ot.window}else kt=ut,wt=gt-ot.offset,xt=ot.length;xt>ct&&(xt=ct),ct-=xt,ot.length-=xt;do ut[gt++]=kt[wt++];while(--xt);0===ot.length&&(ot.mode=Oe);break;case Ve:if(0===ct)break inf_leave;ut[gt++]=ot.length,ct--,ot.mode=Oe;break;case qe:if(ot.wrap){for(;32>bt;){if(0===pt)break inf_leave;pt--,mt|=lt[ht++]<<bt,bt+=8}if(yt-=ct,at.total_out+=yt,ot.total+=yt,yt&&(at.adler=ot.check=ot.flags?ee(ot.check,ut,yt,gt-yt):G(ot.check,ut,yt,gt-yt)),yt=ct,(ot.flags?mt:D(mt))!==ot.check){at.msg='incorrect data check',ot.mode=He;break}mt=0,bt=0}ot.mode=$e;case $e:if(ot.wrap&&ot.flags){for(;32>bt;){if(0===pt)break inf_leave;pt--,mt+=lt[ht++]<<bt,bt+=8}if(mt!==(4294967295&ot.total)){at.msg='incorrect length check',ot.mode=He;break}mt=0,bt=0}ot.mode=Ze;case Ze:It=1;break inf_leave;case He:It=ce;break inf_leave;case We:return me;case 32:default:return fe;}return(at.next_out=gt,at.avail_out=ct,at.next_in=ht,at.avail_in=pt,ot.hold=mt,ot.bits=bt,(ot.wsize||yt!==at.avail_out&&ot.mode<He&&(ot.mode<qe||st!==le))&&M(at,at.output,at.next_out,yt-at.avail_out))?(ot.mode=We,me):(_t-=at.avail_in,yt-=at.avail_out,at.total_in+=_t,at.total_out+=yt,ot.total+=yt,ot.wrap&&yt&&(at.adler=ot.check=ot.flags?ee(ot.check,ut,yt,at.next_out-yt):G(ot.check,ut,yt,at.next_out-yt)),at.data_type=ot.bits+(ot.last?64:0)+(ot.mode===Re?128:0)+(ot.mode===Ne||ot.mode===Pe?256:0),(0===_t&&0===yt||st===le)&&It===he&&(It=-5),It)},S.inflateEnd=function(at){if(!at||!at.state)return fe;var st=at.state;return st.window&&(st.window=null),at.state=null,he},S.inflateGetHeader=function(at,st){var ot;return at&&at.state?(ot=at.state,0==(2&ot.wrap))?fe:(ot.head=st,st.done=!1,he):fe},S.inflateSetDictionary=function(at,st){var ot=st.length,lt,ut,ht;return at&&at.state?(lt=at.state,0!==lt.wrap&&lt.mode!==Ae)?fe:lt.mode===Ae&&(ut=1,ut=G(ut,st,ot,0),ut!==lt.check)?ce:(ht=M(at,st,ot,ot),ht)?(lt.mode=We,me):(lt.havedict=1,he):fe},S.inflateInfo='pako inflate (from Nodeca project)'},function(_,S,E){'use strict';var D=E(1),C=15,R=852,I=592,T=0,P=1,F=2,O=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],M=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],$=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Z=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];_.exports=function(K,Q,G,ee,te,ne,ae,se){var oe=se.bits,le=0,de=0,ue=0,he=0,ge=0,pe=0,fe=0,ce=0,me=0,be=0,je=null,ve=0,Ee=new D.Buf16(C+1),De=new D.Buf16(C+1),Ce=null,Ae=0,_e,ye,xe,we,ke,Se,Re,Ie,Te;for(le=0;le<=C;le++)Ee[le]=0;for(de=0;de<ee;de++)Ee[Q[G+de]]++;for(ge=oe,he=C;1<=he&&0===Ee[he];he--);if(ge>he&&(ge=he),0==he)return te[ne++]=20971520,te[ne++]=20971520,se.bits=1,0;for(ue=1;ue<he&&0===Ee[ue];ue++);for(ge<ue&&(ge=ue),ce=1,le=1;le<=C;le++)if(ce<<=1,ce-=Ee[le],0>ce)return-1;if(0<ce&&(K===T||1!=he))return-1;for(De[1]=0,le=1;le<C;le++)De[le+1]=De[le]+Ee[le];for(de=0;de<ee;de++)0!==Q[G+de]&&(ae[De[Q[G+de]]++]=de);if(K===T?(je=Ce=ae,Se=19):K===P?(je=O,ve-=257,Ce=M,Ae-=257,Se=256):(je=$,Ce=Z,Se=-1),be=0,de=0,le=ue,ke=ne,pe=ge,fe=0,xe=-1,me=1<<ge,we=me-1,K===P&&me>R||K===F&&me>I)return 1;for(;;){Re=le-fe,ae[de]<Se?(Ie=0,Te=ae[de]):ae[de]>Se?(Ie=Ce[Ae+ae[de]],Te=je[ve+ae[de]]):(Ie=96,Te=0),_e=1<<le-fe,ye=1<<pe,ue=ye;do ye-=_e,te[ke+(be>>fe)+ye]=0|(Re<<24|Ie<<16|Te);while(0!==ye);for(_e=1<<le-1;be&_e;)_e>>=1;if(0===_e?be=0:(be&=_e-1,be+=_e),de++,0==--Ee[le]){if(le==he)break;le=Q[G+ae[de]]}if(le>ge&&(be&we)!==xe){for(0==fe&&(fe=ge),ke+=ue,pe=le-fe,ce=1<<pe;pe+fe<he&&(ce-=Ee[pe+fe],!(0>=ce));)pe++,ce<<=1;if(me+=1<<pe,K===P&&me>R||K===F&&me>I)return 1;xe=be&we,te[xe]=0|(ge<<24|pe<<16|ke-ne)}}return 0!=be&&(te[ke+be]=0|(4194304|le-fe<<24)),se.bits=ge,0}},function(_,S,E){'use strict';function D(et){for(var tt=et.length;0<=--tt;)et[tt]=0}function C(et,tt,it,nt,at){this.static_tree=et,this.extra_bits=tt,this.extra_base=it,this.elems=nt,this.max_length=at,this.has_stree=et&&et.length}function R(et,tt){this.dyn_tree=et,this.max_code=0,this.stat_desc=tt}function I(et){return 256>et?$e[et]:$e[256+(et>>>7)]}function T(et,tt){et.pending_buf[et.pending++]=255&tt,et.pending_buf[et.pending++]=255&tt>>>8}function P(et,tt,it){et.bi_valid>Pe-it?(et.bi_buf|=65535&tt<<et.bi_valid,T(et,et.bi_buf),et.bi_buf=tt>>Pe-et.bi_valid,et.bi_valid+=it-Pe):(et.bi_buf|=65535&tt<<et.bi_valid,et.bi_valid+=it)}function F(et,tt,it){P(et,it[2*tt],it[2*tt+1])}function O(et,tt){var it=0;do it|=1&et,et>>>=1,it<<=1;while(0<--tt);return it>>>1}function M(et){16===et.bi_valid?(T(et,et.bi_buf),et.bi_buf=0,et.bi_valid=0):8<=et.bi_valid&&(et.pending_buf[et.pending++]=255&et.bi_buf,et.bi_buf>>=8,et.bi_valid-=8)}function $(et,tt){var it=tt.dyn_tree,nt=tt.max_code,at=tt.stat_desc.static_tree,st=tt.stat_desc.has_stree,ot=tt.stat_desc.extra_bits,lt=tt.stat_desc.extra_base,ut=tt.stat_desc.max_length,ht,gt,pt,ct,mt,bt,_t=0;for(ct=0;ct<=Te;ct++)et.bl_count[ct]=0;for(it[2*et.heap[et.heap_max]+1]=0,ht=et.heap_max+1;ht<Ie;ht++)(gt=et.heap[ht],ct=it[2*it[2*gt+1]+1]+1,ct>ut&&(ct=ut,_t++),it[2*gt+1]=ct,!(gt>nt))&&(et.bl_count[ct]++,mt=0,gt>=lt&&(mt=ot[gt-lt]),bt=it[2*gt],et.opt_len+=bt*(ct+mt),st&&(et.static_len+=bt*(at[2*gt+1]+mt)));if(0!=_t){do{for(ct=ut-1;0===et.bl_count[ct];)ct--;et.bl_count[ct]--,et.bl_count[ct+1]+=2,et.bl_count[ut]--,_t-=2}while(0<_t);for(ct=ut;0!==ct;ct--)for(gt=et.bl_count[ct];0!==gt;)(pt=et.heap[--ht],!(pt>nt))&&(it[2*pt+1]!==ct&&(et.opt_len+=(ct-it[2*pt+1])*it[2*pt],it[2*pt+1]=ct),gt--)}}function Z(et,tt,it){var nt=Array(Te+1),at=0,st,ot;for(st=1;st<=Te;st++)nt[st]=at=at+it[st-1]<<1;for(ot=0;ot<=tt;ot++){var lt=et[2*ot+1];0!==lt&&(et[2*ot]=O(nt[lt]++,lt))}}function W(){var et,tt,it,nt,at,st=Array(Te+1);for(it=0,nt=0;nt<Ee-1;nt++)for(He[nt]=it,et=0;et<1<<Oe[nt];et++)Ze[it++]=nt;for(Ze[it-1]=nt,at=0,nt=0;16>nt;nt++)for(We[nt]=at,et=0;et<1<<Me[nt];et++)$e[at++]=nt;for(at>>=7;nt<Ae;nt++)for(We[nt]=at<<7,et=0;et<1<<Me[nt]-7;et++)$e[256+at++]=nt;for(tt=0;tt<=Te;tt++)st[tt]=0;for(et=0;143>=et;)Ve[2*et+1]=8,et++,st[8]++;for(;255>=et;)Ve[2*et+1]=9,et++,st[9]++;for(;279>=et;)Ve[2*et+1]=7,et++,st[7]++;for(;287>=et;)Ve[2*et+1]=8,et++,st[8]++;for(Z(Ve,Ce+1,st),et=0;et<Ae;et++)qe[2*et+1]=5,qe[2*et]=O(et,5);Je=new C(Ve,Oe,De+1,Ce,Te),Ke=new C(qe,Me,0,Ae,Te),Qe=new C([],Le,0,Re,Fe)}function K(et){var tt;for(tt=0;tt<Ce;tt++)et.dyn_ltree[2*tt]=0;for(tt=0;tt<Ae;tt++)et.dyn_dtree[2*tt]=0;for(tt=0;tt<Re;tt++)et.bl_tree[2*tt]=0;et.dyn_ltree[2*ze]=1,et.opt_len=et.static_len=0,et.last_lit=et.matches=0}function Q(et){8<et.bi_valid?T(et,et.bi_buf):0<et.bi_valid&&(et.pending_buf[et.pending++]=et.bi_buf),et.bi_buf=0,et.bi_valid=0}function G(et,tt,it,nt){Q(et),nt&&(T(et,it),T(et,~it)),me.arraySet(et.pending_buf,et.window,tt,it,et.pending),et.pending+=it}function ee(et,tt,it,nt){var at=2*tt,st=2*it;return et[at]<et[st]||et[at]===et[st]&&nt[tt]<=nt[it]}function te(et,tt,it){for(var nt=et.heap[it],at=it<<1;at<=et.heap_len&&(at<et.heap_len&&ee(tt,et.heap[at+1],et.heap[at],et.depth)&&at++,!ee(tt,nt,et.heap[at],et.depth));)et.heap[it]=et.heap[at],it=at,at<<=1;et.heap[it]=nt}function ne(et,tt,it){var nt,at,st=0,ot,lt;if(0!==et.last_lit)do nt=et.pending_buf[et.d_buf+2*st]<<8|et.pending_buf[et.d_buf+2*st+1],at=et.pending_buf[et.l_buf+st],st++,0===nt?F(et,at,tt):(ot=Ze[at],F(et,ot+De+1,tt),lt=Oe[ot],0!==lt&&(at-=He[ot],P(et,at,lt)),nt--,ot=I(nt),F(et,ot,it),lt=Me[ot],0!==lt&&(nt-=We[ot],P(et,nt,lt)));while(st<et.last_lit);F(et,ze,tt)}function ae(et,tt){var it=tt.dyn_tree,nt=tt.stat_desc.static_tree,at=tt.stat_desc.has_stree,st=tt.stat_desc.elems,ot,lt,ut=-1,ht;for(et.heap_len=0,et.heap_max=Ie,ot=0;ot<st;ot++)0===it[2*ot]?it[2*ot+1]=0:(et.heap[++et.heap_len]=ut=ot,et.depth[ot]=0);for(;2>et.heap_len;)ht=et.heap[++et.heap_len]=2>ut?++ut:0,it[2*ht]=1,et.depth[ht]=0,et.opt_len--,at&&(et.static_len-=nt[2*ht+1]);for(tt.max_code=ut,ot=et.heap_len>>1;1<=ot;ot--)te(et,it,ot);ht=st;do ot=et.heap[1],et.heap[1]=et.heap[et.heap_len--],te(et,it,1),lt=et.heap[1],et.heap[--et.heap_max]=ot,et.heap[--et.heap_max]=lt,it[2*ht]=it[2*ot]+it[2*lt],et.depth[ht]=(et.depth[ot]>=et.depth[lt]?et.depth[ot]:et.depth[lt])+1,it[2*ot+1]=it[2*lt+1]=ht,et.heap[1]=ht++,te(et,it,1);while(2<=et.heap_len);et.heap[--et.heap_max]=et.heap[1],$(et,tt),Z(it,ut,et.bl_count)}function se(et,tt,it){var nt,at=-1,st,ot=tt[1],lt=0,ut=7,ht=4;for(0===ot&&(ut=138,ht=3),tt[2*(it+1)+1]=65535,nt=0;nt<=it;nt++){if(st=ot,ot=tt[2*(nt+1)+1],++lt<ut&&st===ot)continue;else lt<ht?et.bl_tree[2*st]+=lt:0===st?10>=lt?et.bl_tree[2*Ye]++:et.bl_tree[2*Ne]++:(st!==at&&et.bl_tree[2*st]++,et.bl_tree[2*Xe]++);lt=0,at=st,0===ot?(ut=138,ht=3):st===ot?(ut=6,ht=3):(ut=7,ht=4)}}function oe(et,tt,it){var nt,at=-1,st,ot=tt[1],lt=0,ut=7,ht=4;for(0===ot&&(ut=138,ht=3),nt=0;nt<=it;nt++){if(st=ot,ot=tt[2*(nt+1)+1],++lt<ut&&st===ot)continue;else if(lt<ht)do F(et,st,et.bl_tree);while(0!=--lt);else 0===st?10>=lt?(F(et,Ye,et.bl_tree),P(et,lt-3,3)):(F(et,Ne,et.bl_tree),P(et,lt-11,7)):(st!==at&&(F(et,st,et.bl_tree),lt--),F(et,Xe,et.bl_tree),P(et,lt-3,2));lt=0,at=st,0===ot?(ut=138,ht=3):st===ot?(ut=6,ht=3):(ut=7,ht=4)}}function le(et){var tt;for(se(et,et.dyn_ltree,et.l_desc.max_code),se(et,et.dyn_dtree,et.d_desc.max_code),ae(et,et.bl_desc),tt=Re-1;3<=tt&&0===et.bl_tree[2*Ue[tt]+1];tt--);return et.opt_len+=3*(tt+1)+5+5+4,tt}function de(et,tt,it,nt){var at;for(P(et,tt-257,5),P(et,it-1,5),P(et,nt-4,4),at=0;at<nt;at++)P(et,et.bl_tree[2*Ue[at]+1],3);oe(et,et.dyn_ltree,tt-1),oe(et,et.dyn_dtree,it-1)}function ue(et){var tt=4093624447,it;for(it=0;31>=it;it++,tt>>>=1)if(1&tt&&0!==et.dyn_ltree[2*it])return _e;if(0!==et.dyn_ltree[18]||0!==et.dyn_ltree[20]||0!==et.dyn_ltree[26])return ye;for(it=32;it<De;it++)if(0!==et.dyn_ltree[2*it])return ye;return _e}function ge(et,tt,it,nt){P(et,(we<<1)+(nt?1:0),3),G(et,tt,it,!0)}var me=E(1),_e=0,ye=1,we=0,ke=1,Ee=29,De=256,Ce=De+1+Ee,Ae=30,Re=19,Ie=2*Ce+1,Te=15,Pe=16,Fe=7,ze=256,Xe=16,Ye=17,Ne=18,Oe=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Me=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ve=Array(2*(Ce+2));D(Ve);var qe=Array(2*Ae);D(qe);var $e=Array(512);D($e);var Ze=Array(258-3+1);D(Ze);var He=Array(Ee);D(He);var We=Array(Ae);D(We);var Je,Ke,Qe,Ge=!1;S._tr_init=function(et){Ge||(W(),Ge=!0),et.l_desc=new R(et.dyn_ltree,Je),et.d_desc=new R(et.dyn_dtree,Ke),et.bl_desc=new R(et.bl_tree,Qe),et.bi_buf=0,et.bi_valid=0,K(et)},S._tr_stored_block=ge,S._tr_flush_block=function(et,tt,it,nt){var at,st,ot=0;0<et.level?(et.strm.data_type===2&&(et.strm.data_type=ue(et)),ae(et,et.l_desc),ae(et,et.d_desc),ot=le(et),at=et.opt_len+3+7>>>3,st=et.static_len+3+7>>>3,st<=at&&(at=st)):at=st=it+5,it+4<=at&&-1!==tt?ge(et,tt,it,nt):et.strategy===4||st===at?(P(et,(ke<<1)+(nt?1:0),3),ne(et,Ve,qe)):(P(et,(2<<1)+(nt?1:0),3),de(et,et.l_desc.max_code+1,et.d_desc.max_code+1,ot+1),ne(et,et.dyn_ltree,et.dyn_dtree)),K(et),nt&&Q(et)},S._tr_tally=function(et,tt,it){return et.pending_buf[et.d_buf+2*et.last_lit]=255&tt>>>8,et.pending_buf[et.d_buf+2*et.last_lit+1]=255&tt,et.pending_buf[et.l_buf+et.last_lit]=255&it,et.last_lit++,0===tt?et.dyn_ltree[2*it]++:(et.matches++,tt--,et.dyn_ltree[2*(Ze[it]+De+1)]++,et.dyn_dtree[2*I(tt)]++),et.last_lit===et.lit_bufsize-1},S._tr_align=function(et){P(et,ke<<1,3),F(et,ze,Ve),M(et)}},function(_){var E=function(){return this}();try{E=E||Function('return this')()||(1,eval)('this')}catch(D){'object'==typeof window&&(E=window)}_.exports=E},function(_){_.exports={name:'spectra-data',version:'3.0.1',description:'spectra-data project - manipulate spectra',keywords:['spectra-data','project'],author:'Andres Castillo',contributors:['Micha\xEBl Zasso','Luc Patiny'],repository:'cheminfo-js/spectra-data',bugs:{url:'https://github.com/cheminfo-js/spectra-data/issues'},homepage:'https://github.com/cheminfo-js/spectra-data',license:'MIT',main:'./src/index.js',scripts:{eslint:'eslint src test --cache','eslint-fix':'npm run eslint -- --fix',test:'npm run test-mocha','test-mocha':'mocha --compilers js:babel-register --require should --reporter mocha-better-spec-reporter --recursive src/**/__tests__/**/*.js','test-cov':'istanbul cover _mocha -- --compilers js:babel-register --require should --reporter dot --recursive src/**/__tests__/**/*.js','test-travis':'istanbul cover _mocha --report lcovonly -- --compilers js:babel-register --require should --reporter mocha-better-spec-reporter --recursive src/**/__tests__/**/*.js && npm run eslint',build:'cheminfo build'},devDependencies:{'babel-cli':'^6.2.0','babel-core':'^6.2.1','babel-plugin-transform-es2015-block-scoping':'^6.1.18','babel-preset-es2015-node4':'^2.0.1','babel-register':'^6.2.0',babelify:'^7.2.0',babili:'0.0.8','cheminfo-tools':'^1.13.0',eslint:'^3.9.1','eslint-config-cheminfo':'^1.5.2','eslint-plugin-no-only-tests':'^1.1.0',mocha:'^3.1.2','mocha-better-spec-reporter':'^3.0.1',should:'^11.1.1'},dependencies:{brukerconverter:'^1.0.1',extend:'^3.0.0',jcampconverter:'^2.4.5','ml-array-utils':'^0.3.0','ml-curve-fitting':'0.0.7','ml-fft':'^1.3.5','ml-gsd':'^2.0.1','ml-matrix':'^2.1.0','ml-matrix-peaks-finder':'^0.2.1','ml-simple-clustering':'0.1.0','ml-stat':'^1.3.0','nmr-auto-assignment':'0.1.3','nmr-predictor':'0.2.0','nmr-range':'^0.1.10','nmr-simulation':'0.2.0'}}},function(_){'use strict';_.exports=function(C,R){let I=Object.assign({},R);return I?C:C}},function(_,S,E){'use strict';var C=E(100);_.exports=function(R,I){let T=R.activeElement;var P=0;I.nbPoints?P=I.nbPoints:I.brukerFilter&&(P=0);var F=R.getNbSubSpectra();if(0!=P)for(var O=0;O<F;O++)R.setActiveElement(O),C(R.getYData(),P),I.rotateX&&(C(R.getXData(),P),R.setFirstX(R.getX(0)),R.setLastX(R.getX(R.getNbPoints()-1)));return R.setActiveElement(T),R}},function(_,S,E){'use strict';function C(I,T){var P=I.getParamDouble('$BF1',NaN),F=I.getParamDouble('$SFO1',NaN),O=I.getParamDouble('$SW',NaN),M=1e6*((F-P)/P),$=0.5*O*F/P;I.setDataType(T),I.setFirstX(M+$),I.setLastX(M-$),I.setXUnits('PPM');var Z=I.getXData(),W=M+$;$=-2*$/(Z.length-1);for(var K=0;K<Z.length;K++)Z[K]=W,W+=$}const R=E(27);_.exports=function(I){var T=I.getNbPoints(),P=I.getNbSubSpectra()/2,F='NMR SPECTRUM',O=R.FFT;1<P&&(F='nD NMR SPECTRUM'),O.init(T);for(var M=I.getParamDouble('$FCOR',0),$=0;$<P;$++){var Z=I.getYData(2*$),W=I.getYData(2*$+1);Z[0]*=M,W[0]*=M,O.fft(Z,W),Z=Z.concat(Z.slice(0,(T+1)/2)),Z.splice(0,(T+1)/2),W=W.concat(W.slice(0,(T+1)/2)),W.splice(0,(T+1)/2),I.setActiveElement(2*$),C(I,F),I.setActiveElement(2*$+1),C(I,F)}return I.is2D(),I.setActiveElement(0),I}},function(_){'use strict';_.exports=function(C,R,I){R=Number.isFinite(R)?R:0,I=Number.isFinite(I)?I:0;for(var T=C.getNbPoints(),P=C.getYData(0),F=C.getYData(1),O=I/T,M=2*Math.pow(Math.sin(O/2),2),$=Math.sin(O),Z=Math.cos(R),W=Math.sin(R),ne=0,K,Q,G,ee,te;ne<T;ne++)te=T-ne-1,te=ne,G=P[te]*Z-F[te]*W,ee=P[te]*W+F[te]*Z,P[te]=G,F[te]=ee,K=Z-(M*Z+$*W),Q=W-(M*W-$*Z),Z=K,W=Q;return C.resetMinMax(),C.putParam('PHC0',R),C.putParam('PHC1',I),C}},function(_){'use strict';function C(R,I){return 0>R&&(R+=I),R>=I&&(R-=I),R}_.exports=function(R,I){var T=R.length;if(I%=T,Math.abs(I)>T/2&&(I=0<I?I-T:I+T),0!==I)for(var P=0,F=I,O=T,M=R[P],Z=I,W=0<I?1:-1,$;0<O;)F=C(F,T),$=R[F],R[F]=M,F+=I,M=$,O--,F===Z&&(F=C(F+W,T),Z=F,P=C(F-I,T),M=R[P])}},function(_){'use strict';_.exports=function(C,R){var I=C.getNbSubSpectra(),T,P,F,O,M,$;if(0!==R)for(var Z=0;Z<I;Z++){for(C.setActiveElement(Z),T=C.getNbPoints(),$=C.getYData(),M=C.getXData(),P=C.getLastX(),F=(P-M[0])/(T-1),O=T;O<R;O++)$.push(0),M.push(P+F);R<T&&($.splice(R,$.length-1),M.splice(R,M.length-1)),C.setFirstX(M[0]),C.setLastX(M[M.length-1])}return C.setActiveElement(0),C}},function(_,S,E){'use strict';function D(M,$,Z,W,K){var Q='',G=M.getSpectraVariable(0),ee=M.getSpectraVariable(1),te=M.getSpectraVariable(2);Q+='##DATA CLASS= NTUPLES'+T,Q+='##NUM DIM= 2'+T;var ne=M.getDataType().trim(),ae={},se;for(se=0;se<M.getNbSubSpectra();se++)M.setActiveElement(se),ae[M.getXUnits()]?ae[M.getXUnits()].value++:ae[M.getXUnits()]={value:1,index:se};var oe=Object.keys(ae),le=oe[0],de=0;for(se=1;se<oe.length;se++)ae[oe[se]].value>ae[le].value&&(le=oe[se],de=ae[oe[se]].index);var ue=!1;M.setActiveElement(de);var he=0<=M.getDataType().indexOf('NMR');he&&(Q+='##.OBSERVE FREQUENCY= '+M.getParamDouble('observefrequency',0)+T,Q+='##.OBSERVE NUCLEUS= ^'+M.getNucleus()+T,Q+='##$DECIM= '+M.getParamDouble('$DECIM',0)+T,Q+='##$DSPFVS= '+M.getParamDouble('$DSPFVS',0)+T,Q+='##$FCOR= '+Math.floor(M.getParamDouble('$FCOR',0))+T,M.containsParam('$SW_h')?Q+='##$SW_h= '+M.getParamDouble('$SW_h',0)+T:M.containsParam('$SW_p')&&(Q+='##$SW_p= '+M.getParamDouble('$SW_p',0)+T),Q+='##$SW= '+M.getParamDouble('$SW',0)+T,Q+='##$TD= '+Math.floor(M.getParamDouble('$TD',0))+T,Q+='##$BF1= '+M.getParamDouble('$BF1',0)+T,Q+='##$GRPDLY= '+M.getParamDouble('$GRPDLY',0)+T,Q+='##.DIGITISER RES= '+M.getParamInt('.DIGITISER RES',0)+T,Q+='##.PULSE SEQUENCE= '+M.getParamString('.PULSE SEQUENCE','')+T,Q+='##.SOLVENT NAME= '+M.getSolventName()+T,Q+='##$NUC1= <'+M.getNucleus()+'>'+T,Q+=M.containsParam('2D_X_FREQUENCY')?'##$SFO1= '+M.getParamDouble('2D_X_FREQUENCY',0)+T:'##$SFO1= '+M.getParamDouble('$SFO1',0)+T,M.containsParam('2D_X_OFFSET')&&(Q+='##$OFFSET= '+M.getParamDouble('2D_X_OFFSET',0)+T),M.is2D()&&(Q+='$$Parameters for 2D NMR Spectrum'+T,Q+='##$NUC1= <'+M.getNucleus(2)+'>'+T,M.containsParam('2D_Y_FREQUENCY')&&(Q+='##$SFO1= '+M.getParamDouble('2D_Y_FREQUENCY',0)+T,Q+='##$SFO2= '+M.getParamDouble('2D_Y_FREQUENCY',0)+T,Q+='##$BF2= '+M.getParamDouble('2D_Y_FREQUENCY',0)+T),M.containsParam('2D_Y_OFFSET')&&(Q+='##$OFFSET= '+M.getParamDouble('2D_Y_OFFSET',0)+T),Q+='$$End of Parameters for 2D NMR Spectrum'+T)),Q+='##NTUPLES=\t'+ne+T;var ge=1,pe=1;if(!M.is2D()&&1<M.getNbSubSpectra()&&he&&(ue=!0),ue?(Q+='##VAR_NAME=\t'+M.getXUnits()+',\t'+ne.substring(4)+'/REAL,\t'+ne.substring(4)+'/IMAG'+T,Q+='##SYMBOL=\tX,\tR,\tI'+T,Q+='##VAR_TYPE=\tINDEPENDENT,\tDEPENDENT,\tDEPENDENT'+T,Q+='CSV'!==W||'PAC'!==W?'##VAR_FORM=\tAFFN,\tASDF,\tASDF'+T:'##VAR_FORM=\tAFFN,\tAFFN,\tAFFN'+T,Q+='##VAR_DIM=\t'+M.getNbPoints()+',\t'+M.getNbPoints()+',\t'+M.getNbPoints()+T,Q+='##UNITS=\tHZ,\t'+M.getYUnits()+',\t'+te.units+T,Q+='##FACTOR=\t'+1/Z+',\t'+1/$+',\t'+1/$+T,'PPM'===M.getXUnits()&&(ge=M.observeFrequencyX()),Q+='##FIRST=\t'+M.getFirstX()*ge+',\t'+M.getY(0)+',\t0'+T,Q+='##LAST=\t'+M.getLastX()*ge+',\t'+M.getLastY()+',\t0'+T):(ge=1,M.is2D()?(Q+='##VAR_NAME=\tFREQUENCY1,\tFREQUENCY2,\tSPECTRUM'+T,Q+='##SYMBOL=\tF1,\tF2,\tY'+T,Q+='##.NUCLEUS=\t'+M.getNucleus(2)+',\t'+M.getNucleus(1)+T,Q+='##VAR_TYPE=\tINDEPENDENT,\tINDEPENDENT,\tDEPENDENT'+T,Q+='CSV'!==W||'PAC'!==W?'##VAR_FORM=\tAFFN,\tAFFN,\tASDF'+T:'##VAR_FORM=\tAFFN,\tAFFN,\tASDF'+T,Q+='##VAR_DIM=\t'+M.getNbSubSpectra()+',\t'+M.getNbPoints()+',\t'+M.getNbPoints()+T,Q+='##UNITS=\tHZ,\tHZ,\t'+M.getZUnits()+T,'PPM'===M.getXUnits()&&(ge=M.getParamDouble('2D_Y_FREQUENCY',1)),'PPM'===M.getYUnits()&&(pe=M.getParamDouble('2D_X_FREQUENCY',1)),Q+='##FACTOR=\t1,\t'+pe/Z+',\t'+1/$+T,Q+='##FIRST=\t'+M.getParamDouble('firstY',0)*ge+',\t'+M.getFirstX()*pe+',\t'+M.getY(0)+T,Q+='##LAST=\t'+M.getParamDouble('lastY',0)*ge+',\t'+M.getLastX()*pe+',\t'+M.getY(M.getNbPoints()-1)+T):(Q+='##VAR_NAME=\t'+G.varname+',\t'+ee.varname+',\t'+G.varname+T,Q+='##SYMBOL=\t'+G.symbol+',\t'+ee.symbol+',\t'+te.symbol+T,Q+='##VAR_TYPE=\t'+G.vartype+',\t'+ee.vartype+',\t'+te.vartype+T,Q+='CSV'!==W||'PAC'!==W?'##VAR_FORM=\tAFFN,\tASDF,\tASDF'+T:'##VAR_FORM=\tAFFN,\tAFFN,\tAFFN'+T,Q+='##VAR_DIM=\t'+G.vardim+',\t'+ee.vardim+',\t'+te.vardim+T,Q+='##UNITS=\tHZ,\t'+M.getYUnits()+',\t'+te.units+T,'PPM'===M.getXUnits()&&(ge=M.observeFrequencyX()),Q+='##FACTOR=\t'+1/Z+',\t'+1/$+T,Q+='##FIRST=\t'+G.first*ge+',\t'+ee.first+',\t'+te.first+T,Q+='##LAST=\t'+G.last*ge+',\t'+ee.last+',\t'+te.last+T)),null!==K)for(var fe=K.length-1;0<=fe;fe--)M.containsParam(K[fe])&&(Q+='##'+K[fe]+'= '+M.getParam(K[fe],'')+T);var ce=0,me=0,be=1;for(M.is2D()&&he&&(ce=M.getParamDouble('firstY',0)*ge,me=M.getParamDouble('lastY',0)*ge,be=(me-ce)/(M.getNbSubSpectra()-1)),se=0;se<M.getNbSubSpectra();se++)if(M.setActiveElement(se),ce=M.getParamDouble('firstY',0)*ge+be*se,Q+='##PAGE= '+ce+T,M.is2D()&&he&&(Q+='##FIRST=\t'+M.getParamDouble('firstY',0)*ge+',\t'+M.getFirstX()*pe+',\t'+M.getY(0)+T),Q+='##DATA TABLE= ',M.isDataClassPeak()){Q+='(XY..XY), PEAKS'+T;for(let xe=0;xe<M.getNbPoints();xe++)Q+=M.getX(xe)+', '+M.getY(xe)+T}else if(M.isDataClassXY()){Q+=he?M.is2D()?'(F2++(Y..Y)), PROFILE'+T:0==se%2?'(X++(R..R)), XYDATA'+T:'(X++(I..I)), XYDATA'+T:'(X++(Y..Y)), XYDATA'+T;var _e='',ye=Array(M.getNbPoints());for(let xe=ye.length-1;0<=xe;xe--)ye[xe]=Math.round(M.getY(xe)*$);_e+=R.encode(ye,M.getFirstX()*Z,M.getDeltaX()*Z,W),Q+=_e+T}return Q+='##END NTUPLES= '+ne+T,Q+='##END= ',M.setActiveElement(0),Q}function C(M,$,Z,W,K){var Q='';if(M.isDataClassPeak()&&(Q+='##DATA CLASS= PEAK TABLE'+T),M.isDataClassXY()&&(Q+='##DATA CLASS= XYDATA'+T),M.setActiveElement(0),0<=M.getDataType().indexOf('NMR')&&(Q+='##.OBSERVE FREQUENCY= '+M.getParamDouble('observefrequency',0)+T,Q+='##.OBSERVE NUCLEUS= ^'+M.getNucleus()+T,Q+='##$DECIM= '+Math.round(M.getParamDouble('$DECIM',0))+T,Q+='##$DSPFVS= '+Math.round(M.getParamDouble('$DSPFVS',0))+T,Q+='##$FCOR= '+Math.round(M.getParamDouble('$FCOR',0))+T,Q+='##$SW_h= '+M.getParamDouble('$SW_h',0)+T,Q+='##$SW= '+M.getParamDouble('$SW',0)+T,Q+='##$TD= '+Math.round(M.getParamDouble('$TD',0))+T,Q+='##$GRPDLY= '+M.getParamDouble('$GRPDLY',0)+T,Q+='##$BF1= '+M.getParamDouble('$BF1',0)+T,Q+='##$SFO1= '+M.getParamDouble('$SFO1',0)+T,Q+='##$NUC1= <'+M.getNucleus()+'>'+T,Q+='##.SOLVENT NAME= '+M.getSolventName()+T),Q+='##XUNITS=\t'+M.getXUnits()+T,Q+='##YUNITS=\t'+M.getYUnits()+T,Q+='##NPOINTS=\t'+M.getNbPoints()+T,Q+='##FIRSTX=\t'+M.getFirstX()+T,Q+='##LASTX=\t'+M.getLastX()+T,Q+='##FIRSTY=\t'+M.getFirstY()+T,Q+='##LASTY=\t'+M.getLastY()+T,M.isDataClassPeak()?(Q+='##XFACTOR=1'+T,Q+='##YFACTOR=1'+T):M.isDataClassXY()&&(Q+='##XFACTOR= '+1/Z+T,Q+='##YFACTOR= '+1/$+T),Q+='##MAXY= '+M.getMaxY()+T,Q+='##MINY= '+M.getMinY()+T,null!==K)for(var G=K.length-1;0<=G;G--)M.containsParam(K[G])&&(Q+='##'+K[G]+'= '+M.getParam(K[G],'')+T);if(M.isDataClassPeak()){Q+='##PEAK TABLE= (XY..XY)'+T;for(var ee=0;ee<M.getNbPoints();ee++)Q+=M.getX(ee)+', '+M.getY(ee)+T;Q+='##END '}else if(M.isDataClassXY()){Q+='##DELTAX= '+M.getDeltaX()+T,Q+='##XYDATA=(X++(Y..Y))'+T;var te='',ne=Array(M.getNbPoints());for(let ae=ne.length-1;0<=ae;ae--)ne[ae]=Math.round(M.getY(ae)*$);te+=R.encode(ne,M.getFirstX()*Z,M.getDeltaX()*Z,W),Q+=te+T,Q+='##END= '}return M.setActiveElement(0),Q}const R=E(103),I={MAX_VALUE:Number.MAX_SAFE_INTEGER,MIN_VALUE:Number.MIN_SAFE_INTEGER},T='\r\n',P='Cheminfo tools '+E(95).version,F={encode:'DIFDUP',yFactor:1,type:'SIMPLE',keep:[]};_.exports=class{convert(M,$){$=Object.assign({},F,$);const Z=$.encode.toUpperCase().trim(),W=$.yFactor||1;let K=$.type;const Q=$.keep;(null===K||0===K.length)&&(K='SIMPLE');var G='';M.setActiveElement(0);var ee=W/M.getParamDouble('YFACTOR',1);let te={};te=M.is2D()?{min:M.getMinZ(),max:M.getMaxZ()}:M.getMinMaxY(),te.max*ee>=I.MAX_VALUE/2&&(ee=I.MAX_VALUE/(2*te.max)),16>Math.abs(te.max-te.min)*ee&&(ee=16/Math.abs(te.max-te.min));var ne=Math.abs(1/M.getDeltaX());return G+='##TITLE= '+M.getTitle()+T,G+='##JCAMP-DX= 5.00\t$$'+P+T,G+='##OWNER= '+M.getParamString('##OWNER=','')+T,G+='##DATA TYPE= '+M.getDataType()+T,'NTUPLES'===K&&(G+=D(M,ee,ne,Z,Q)),'SIMPLE'===K&&(G+=C(M,ee,ne,Z,Q)),G}}},function(_){'use strict';function C(ae,se,oe){return R(ae,se,oe,',')}function R(ae,se,oe,le){le||(le=' ');for(var de='',ue=0,he=ae.length,ge;ue<he-7;){for(de+=Math.ceil(se+ue*oe),ge=0;8>ge;ge++)de+=le+ae[ue++];de+=Z}if(ue<he)for(de+=Math.ceil(se+ue*oe),ge=ue;ge<he;ge++)de+=le+ae[ge];return de}function I(ae,se,oe){for(var le='',de=0,ue=ae.length,he;de<ue-7;){for(le+=Math.ceil(se+de*oe),he=0;8>he;he++)le+=0>ae[de]?'-'+ae[de++]:'+'+ae[de++];le+=Z}if(de<ue)for(le+=Math.ceil(se+de*oe),he=de;he<ue;he++)le+=0>ae[he]?'-'+ae[he]:'+'+ae[he];return le}function T(ae,se,oe){for(var le='',de=0,ue=ae.length,he;de<ue-10;){for(le+=Math.ceil(se+de*oe),he=0;10>he;he++)le+=O(ae[de++].toString());le+=Z}if(de<ue)for(le+=Math.ceil(se+de*oe),he=de;he<ue;he++)le+=O(ae[he].toString());return le}function P(ae,se,oe){var le=0,de=0,ue=0,ge='',pe='',fe='',ce=Array(ae.length-1),he;for(he=0;he<ce.length;he++)ce[he]=ae[he+1]-ae[he];for(var me=ce.length;de<me;)0==ue?(pe=Math.ceil(se+de*oe)+O(ae[de].toString())+M(ce[de].toString()),ge+=pe,ue+=pe.length):ce[de-1]===ce[de]?le++:0<le?(le++,pe=$(le.toString()),ge+=pe,ue+=pe.length,le=0,de--):(pe=M(ce[de].toString()),pe.length+ue<ne?(ge+=pe,ue+=pe.length):(ge+=Z,fe=Math.ceil(se+de*oe)+O(ae[de].toString())+pe,ge+=fe,ue=fe.length)),de++;return 0<le&&(ge+=$((le+1).toString())),ge+=Z+Math.ceil(se+de*oe)+O(ae[de].toString()),ge}function F(ae,se,oe){var le=0,de=0,he='',ge='',pe='',fe=Array(ae.length-1),ue;for(ue=0;ue<fe.length;ue++)fe[ue]=ae[ue+1]-ae[ue];le=0;for(var ce=fe.length;le<ce;)0==de?(ge=Math.ceil(se+le*oe)+O(ae[le].toString())+M(fe[le].toString()),he+=ge,de+=ge.length):(ge=M(fe[le].toString()),ge.length+de<ne?(he+=ge,de+=ge.length):(he+=Z,pe=Math.ceil(se+le*oe)+O(ae[le].toString())+ge,he+=pe,de=pe.length)),le++;return he+=Z+Math.ceil(se+le*oe)+O(ae[le].toString()),he}function O(ae){var se='';return'-'===ae.charAt(0)?(se+=W[Q][ae.charAt(1)],2<ae.length&&(se+=ae.substring(2))):(se+=W[K][ae.charAt(0)],1<ae.length&&(se+=ae.substring(1))),se}function M(ae){var se='';return'-'===ae.charAt(0)?(se+=W[ee][ae.charAt(1)],2<ae.length&&(se+=ae.substring(2))):(se+=W[G][ae.charAt(0)],1<ae.length&&(se+=ae.substring(1))),se}function $(ae){var se='';return se+=W[te][ae.charAt(0)],1<ae.length&&(se+=ae.substring(1)),se}const Z='\r\n',W=[['0','1','2','3','4','5','6','7','8','9'],['@','A','B','C','D','E','F','G','H','I'],['@','a','b','c','d','e','f','g','h','i'],['%','J','K','L','M','N','O','P','Q','R'],['%','j','k','l','m','n','o','p','q','r'],[' ','S','T','U','V','W','X','Y','Z','s']],K=1,Q=2,G=3,ee=4,te=5,ne=100;_.exports={encode:function(ae,se,oe,le){return'FIX'===le?R(ae,se,oe):'SQZ'===le?T(ae,se,oe):'DIF'===le?F(ae,se,oe):'DIFDUP'===le?P(ae,se,oe):'CSV'===le?C(ae,se,oe):'PAC'===le?I(ae,se,oe):F(ae,se,oe)},fixEncoding:R,commaSeparatedValuesEncoding:C,packedEncoding:I,squeezedEncoding:T,differenceDuplicateEncoding:P,differenceEncoding:F}},function(_){'use strict';function D(ee,te){var ne=ee.peaksComp,ae=ne.length;ee.startX=ne[0].x/ee.observe-ne[0].width,ee.stopX=ne[ae-1].x/ee.observe+ne[ae-1].width,ee.integralData.from=ne[0].x/ee.observe-3*ne[0].width,ee.integralData.to=ne[ae-1].x/ee.observe+3*ne[ae-1].width,ee.maskPattern=ee.mask2,ee.multiplicity=C(ee,te),ee.pattern=ee.multiplicity}function C(ee,te){var se='',oe=1,le=[],ae;if(te&&0<te.length){for(te.sort(function(de,ue){return de-ue}),ae=0;ae<te.length-1;ae++)Math.abs(te[ae]-te[ae+1])<0.05?oe++:(le.push({coupling:Math.abs(te[ae]),multiplicity:W[oe]}),se+=W[oe],oe=1);le.push({coupling:Math.abs(te[ae]),multiplicity:W[oe]}),se+=W[oe],ee.nmrJs=le}else se='s',16<Math.abs(ee.startX-ee.stopX)*ee.observe&&(se='br s');return se}function R(ee){var te=Math.pow(2,ee.length),ne,ae,se=[{x:0,intensity:te}];for(ne=0;ne<ee.length;ne++)for(ae=se.length-1;0<=ae;ae--)se.push({x:se[ae].x+ee[ne]/2,intensity:se[ae].intensity/2}),se[ae].x-=ee[ne]/2,se[ae].intensity/=2;for(se.sort(function(le,de){return le.x-de.x}),ae=se.length-2;0<=ae;ae--)0.1>Math.abs(se[ae].x-se[ae+1].x)&&(se[ae].intensity+=se[ae+1].intensity,se.splice(ae+1,1));return se}function I(ee,te){for(var ne=Math.ceil(ee.values.length/2),ae=ee.values.length,se=0,oe,le;se!==te;){for(le=!1;!le;)if(le=!0,ee.currentIndex[ee.active]++,ee.currentIndex[ee.active]>=ee.values[ee.active].length){if(ee.active+1===ne)return null;ee.currentIndex[ee.active]=0,le=!1,ee.active++}else ee.active=0;for(se=0,oe=0;oe<ne;oe++)se+=2*ee.values[oe][ee.currentIndex[oe]];0!=ee.values.length%2&&(se-=ee.values[ne-1][ee.currentIndex[ne-1]])}if(se===te){var de=Array(ae);for(oe=0;oe<ne;oe++)de[oe]=ee.values[oe][ee.currentIndex[oe]],de[ae-oe-1]=ee.values[oe][ee.currentIndex[oe]];return de}return null}function T(ee){var te=Array(ee.length),ne=Array(ee.length),ae,se;te[0]=[1],te[ee.length-1]=[1],ne[0]=-1,ne[ee.length-1]=0;for(var oe=1;oe<ee.length-1;oe++){ae=Math.round(0.85*ee[oe].intensity),se=Math.round(1.15*ee[oe].intensity),te[oe]=[];for(var le=ae;le<=se;le++)te[oe].push(le);ne[oe]=0}return{values:te,currentIndex:ne,active:0}}function P(ee,te,ne){var ae=F(ee,te,ne),se=ee.peaksComp,oe=ee.mask,le=ee.delta1;ee.delta1=(ee.peaks[0].x+ee.peaks[ee.peaks.length-1].x)/2;var de=F(ee,te,ne);return ee.peaksComp.length>se.length?de:(ee.delta1=le,ee.peaksComp=se,ee.mask=oe,ae)}function F(ee,te,ne){var he=Array(ee.peaks.length),ae,se,oe,le,de,ue;for(ue=0;ue<he.length;ue++)he[ue]={x:ee.peaks[ue].x*ee.observe,intensity:ee.peaks[ue].intensity,width:ee.peaks[ue].width};for(ue=he.length-2;0<=ue;ue--)0.25>Math.abs(he[ue].x-he[ue+1].x)&&(he[ue].x=he[ue].x*he[ue].intensity+he[ue+1].x*he[ue+1].intensity,he[ue].intensity+=he[ue+1].intensity,he[ue].x/=he[ue].intensity,he[ue].intensity/=2,he[ue].width+=he[ue+1].width,he.splice(ue+1,1));ee.peaksComp=he;var ge=he.length,pe=Array(ge);ee.mask=pe;var fe=0,ce=he.length-1,me=ee.delta1*ee.observe,be=[(he[0].x+he[ge-1].x)/2,1];te=O(Math.abs(me-be[0]));for(var _e=0,ye=0;ye<ge;ye++)pe[ye]=!0,_e+=ee.peaks[ye].intensity;for(;fe<=ce;){if(pe[fe]=!0,pe[ce]=!0,fe==ce)2<ge&&Math.abs(he[fe].x-me)>te&&(pe[fe]=!1);else if(ae=Math.max(he[fe].intensity,he[ce].intensity),se=Math.min(he[fe].intensity,he[ce].intensity),le=ae/se,le>K)he[fe].intensity===se?(pe[fe]=!1,ce++):(pe[ce]=!1,fe--);else{var xe=Math.abs(he[fe].x-me),we=Math.abs(he[ce].x-me);Math.abs(xe-we)<te?(oe=Math.min(he[fe].intensity,he[ce].intensity),de=Math.min(he[fe].width,he[ce].width),he[fe].intensity=he[ce].intensity=oe,he[fe].width=he[ce].width=de,be=[be[0]+(he[ce].x+he[fe].x)/2,be[1]+1]):Math.max(xe,we)===we?(pe[ce]=!1,fe--):(pe[fe]=!1,ce++)}if(fe++,ce--,1===ne&&(me=$(he,pe),isNaN(me)))return 0;te=O(Math.abs(me-be[0]/be[1]))}for(ye=ge-1;0<=ye;ye--)!1===pe[ye]&&he.splice(ye,1);if(me=$(he),isNaN(me))return 0;ee.delta1=me/ee.observe;let ke=0,je=0;if(1<he.length){for(ye=Math.ceil(he.length/2)-1;0<=ye;ye--)ke+=(3+Math.min(Math.abs(he[ye].x-me),Math.abs(he[he.length-1-ye].x-me)))/(3+Math.max(Math.abs(he[ye].x-me),Math.abs(he[he.length-1-ye].x-me)))*he[ye].intensity,je+=he[ye].intensity;ke/=je}else 1===he.length&&(ke=1);var ve=0;for(ye=0;ye<he.length;ye++)ve+=he[ye].intensity;if(ke-=0.12*((_e-ve)/_e),0.8<ke&&0.97>ke&&2>ne)return F(ee,G,2);if(1<he.length){let Se;for(ye=Math.ceil(he.length/2)-1;0<=ye;ye--)Se=(he[ye].x-he[he.length-1-ye].x)/2,he[ye].x=me+Se,he[he.length-1-ye].x=me-Se}return ke}function O(ee){var te=2.5*ee;return 0.75>te&&(te=0.75),3<te&&(te=3),te}function M(ee,te){var ne=JSON.parse(JSON.stringify(ee.peaksComp)),ae=0,se=0,oe;for(oe=0;oe<ne.length;oe++)ae+=ne[oe].intensity;ae=Math.pow(2,te)/ae,ee.mask2=JSON.parse(JSON.stringify(ee.mask));var le=ee.mask2.length-1;for(oe=ne.length-1;0<=oe;oe--){for(ne[oe].intensity*=ae;0<=le&&!1===ee.mask2[le];)le--;0.75>ne[oe].intensity?(ne.splice(oe,1),ee.mask2[le]=!1):se+=ne[oe].intensity,le--}for(se=Math.pow(2,te)/se,oe=ne.length-1;0<=oe;oe--)ne[oe].intensity*=se;return ne}function $(ee,te){var ne=0,ae=0,se,oe;if(te)for(se=0;se<ee.length;se++)!0===te[se]&&(oe=Z(ee[se]),ne+=oe,ae+=oe*ee[se].x);else for(se=0;se<ee.length;se++)oe=Z(ee[se]),ne+=oe,ae+=oe*ee[se].x;return ae/ne}function Z(ee){return Math.abs(1.57*(ee.intensity*ee.width))}const W=['s','d','t','q','quint','h','sept','o','n'];var K=1.5,G=1;_.exports={compilePattern:function(ee){if(ee.multiplicity='m',ee.symRank=P(ee,2.5,1),ee.asymmetric=!0,0.95<=ee.symRank&&32>ee.peaksComp.length){ee.asymmetric=!1;var se=1,le=[],te,ne,ae,oe,de,ue;for(ae=0;9>ae;ae++){var he=M(ee,ae),ge=!1;if(1===he.length&&0===ae)ge=!0;else if(1>=he.length)continue;var pe=T(he);de=Math.pow(2,ae);for(var fe=null,ce;!ge&&null!==(fe=I(pe,de));){for(ce=Array(fe.length),se=1,te=0;te<fe.length;te++)for(ce[te]=Array(fe[te]),ne=0;ne<fe[te];ne++)ce[te][ne]=se++;le=[],ne=1,le.push(he[1].x-he[0].x),oe=he[0].x,ce[0].splice(0,1),ce[1].splice(0,1),se=1;var me=2;for(ue=Math.pow(2,ae)-1;le.length<ae&&me<ue&&se<he.length;){for(ne++;se<he.length&&0===ce[se].length;)se++;if(se<he.length){le.push(he[se].x-he[0].x),ce[se].splice(0,1),me++;for(var be=2,_e;be<=ne;be++){for(_e=0,te=0;te<be;te++)_e+=le[te];for(te=1;te<ce.length;te++)if(0.25>Math.abs(he[te].x-(oe+_e))){ce[te].splice(0,1),me++;break}}}}var ye=R(le);for(ge=!0,te=0;te<ye.length;te++)ye[te].intensity!==fe[te]&&(ge=!1)}ge&&D(ee,le)}}for(te=0;te<ee.peaksComp.length;te++)ee.peaksComp[te].x/=ee.observe}}},function(_,S,E){'use strict';function C(M){return M.isHomoNuclear()?1.5:3}function R(M,$,Z){var W=$.observeFrequencyX(),K=$.observeFrequencyY(),Q=$.getFirstY(),G=$.getDeltaY(),ee;for(ee=M.length-1;0<=ee;ee--)M[ee].x=$.arrayPointToUnits(M[ee].x),M[ee].y=Q+G*M[ee].y,(-1>M[ee].y||210<=M[ee].y)&&M.splice(ee,1);var te=[],ne=0;for(Z*=Z,ee=0;ee<M.length;ee++)for(var ae=ee;ae<M.length;ae++)ne=Math.pow((M[ee].x-M[ae].x)*W,2)+Math.pow((M[ee].y-M[ae].y)*K,2),ne<Z?te.push(1):te.push(0);var se=T(te),oe=[];if(null!=M)for(var le=0,de;le<se.length;le++){de={nucleusX:$.getNucleus(1),nucleusY:$.getNucleus(2)},de.resolutionX=($.getLastX()-$.getFirstX())/$.getNbPoints(),de.resolutionY=G;var ue=[];de.shiftX=0,de.shiftY=0;for(var he=[Number.MAX_VALUE,0],ge=[Number.MAX_VALUE,0],pe=0,fe=se[le].length-1;0<=fe;fe--)1===se[le][fe]&&(ue.push({x:M[fe].x,y:M[fe].y,z:M[fe].z}),de.shiftX+=M[fe].x*M[fe].z,de.shiftY+=M[fe].y*M[fe].z,pe+=M[fe].z,M[fe].x<he[0]&&(he[0]=M[fe].x),M[fe].x>he[1]&&(he[1]=M[fe].x),M[fe].y<ge[0]&&(ge[0]=M[fe].y),M[fe].y>ge[1]&&(ge[1]=M[fe].y));de.fromTo=[{from:he[0],to:he[1]},{from:ge[0],to:ge[1]}],de.shiftX/=pe,de.shiftY/=pe,de.peaks=ue,oe.push(de)}return oe}var I=E(38),T=E(83),P=E(70),F=E(27).FFTUtils;const O=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];_.exports=function(M,$){0===$&&($=1),0>$&&($=-$);for(var Z=M.getNbPoints(),W=M.getNbSubSpectra(),K=Array(Z*W),Q=M.isHomoNuclear(),G=0,ee;G<W;G++){ee=M.getYData(G);for(var te=0;te<Z;te++)K[G*Z+te]=Q?0<ee[te]?ee[te]:0:Math.abs(ee[te])}var ne=C(M);if(Q){let oe=F.convolute(K,O,W,Z),le=P.findPeaks2DRegion(K,{filteredData:oe,rows:W,cols:Z,nStdDev:ne*$});for(var ae=P.findPeaks2DMax(K,{filteredData:oe,rows:W,cols:Z,nStdDev:(ne+0.5)*$}),se=0;se<le.length;se++)ae.push(le[se]);return I.enhanceSymmetry(R(ae,M,24))}let oe=F.convolute(K,O,W,Z),le=P.findPeaks2DRegion(K,{filteredData:oe,rows:W,cols:Z,nStdDev:ne*$});return R(I.clean(le,0.05),M,24)}},function(_,S,E){'use strict';function C(F,O,M,$,Z){const W=O.observeFrequencyX();var te=[],ne={},ae=null,se={x:1e5,y:0,width:0},oe=0,K,Q,G,ee,Z=Number.isFinite(Z)?Z:16,$='sum'===$||'peaks'===$?$:'sum';for(G=0;G<F.length;G++){if(Math.abs(F[G].x-se.x)>Z/W)ne={nbPeaks:1,units:'PPM',startX:F[G].x-F[G].width,stopX:F[G].x+F[G].width,multiplicity:'',pattern:'',observe:W,nucleus:'1H',integralData:{from:F[G].x-3*F[G].width,to:F[G].x+3*F[G].width},peaks:[]},ne.peaks.push({x:F[G].x,intensity:F[G].y,width:F[G].width}),te.push(ne);else{var de=F[G].x+F[G].width;ne.stopX=Math.max(ne.stopX,de),de=F[G].x-F[G].width,ne.startX=Math.min(ne.startX,de),ne.nbPeaks++,ne.peaks.push({x:F[G].x,intensity:F[G].y,width:F[G].width}),ne.integralData.from=Math.min(ne.integralData.from,F[G].x-3*F[G].width),ne.integralData.to=Math.max(ne.integralData.to,F[G].x+3*F[G].width)}se=F[G]}for(G=0;G<te.length;G++){ae=te[G].peaks;let ue=te[G].integralData;for(K=0,Q=0,ee=0;ee<ae.length;ee++)K+=ae[ee].x*R(ae[ee]),Q+=R(ae[ee]);te[G].delta1=K/Q,ue.value='sum'===$?O.getArea(ue.from,ue.to):Q,oe+=ue.value}if(0!==M)for(G=0;G<te.length;G++){let ue=te[G].integralData;ue.value*=M/oe}return te}function R(F){return Math.abs(1.57*(F.intensity*F.width))}const I=E(104),T=E(13),P={nH:99,clean:!0,compile:!0,integralType:'sum',idPrefix:'',format:'new',frequencyCluster:16};_.exports=function(F,O,M){M=Object.assign({},P,M);var Q=C(O,F,M.nH,M.integralType,M.frequencyCluster),$,Z,W,K;if(M.clean||!1)for($=Q.length-1;0<=$;$--)0.5>Q[$].integralData.value&&Q.splice($,1);if(M.compile||!1){for($=0;$<Q.length;$++)if(I.compilePattern(Q[$]),Q[$].maskPattern&&'m'!==Q[$].multiplicity&&''!==Q[$].multiplicity){W=0,K=0;var G=[];for(Z=Q[$].maskPattern.length-1;0<=Z;Z--)if(K+=R(Q[$].peaks[Z]),!1===Q[$].maskPattern[Z]){var ee=Q[$].peaks.splice(Z,1)[0];G.push({x:ee.x,y:ee.intensity,width:ee.width}),Q[$].mask.splice(Z,1),Q[$].mask2.splice(Z,1),Q[$].maskPattern.splice(Z,1),Q[$].nbPeaks--,W+=R(ee)}if(0<G.length){W=W*Q[$].integralData.value/K,Q[$].integralData.value-=W;var te=[];for(Z=G.length-1;0<=Z;Z--)te.push(G[Z]);let oe=C(te,F,W,M.integralType,M.frequencyCluster);for(Z=0;Z<oe.length;Z++)Q.push(oe[Z])}}var ne=0,ae=0;for($=0;$<Q.length;$++)ae+=Math.round(Q[$].integralData.value);if(ae!==M.nH)for(ne=M.nH/ae,$=0;$<Q.length;$++)Q[$].integralData.value*=ne}if(Q.sort(function(oe,le){return le.delta1-oe.delta1}),M.clean||!1)for($=Q.length-1;0<=$;$--)0.5>Q[$].integralData.value&&Q.splice($,1);for($=0;$<Q.length;$++)Q[$].signalID=M.idPrefix&&0<M.idPrefix.length?M.idPrefix+'_'+($+1):$+1+'',Q[$]._highlight=[Q[$].signalID];if('new'===M.format){let oe=Array(Q.length);for($=0;$<Q.length;$++){var se=Q[$];oe[$]={from:se.integralData.from,to:se.integralData.to,integral:se.integralData.value,signal:[{nbAtoms:0,diaID:[],multiplicity:se.multiplicity,peak:se.peaks,kind:'',remark:''}],signalID:se.signalID,_highlight:se._highlight},se.nmrJs&&(oe[$].signal[0].j=se.nmrJs),se.asymmetric&&'m'!==se.multiplicity||(oe[$].signal[0].delta=se.delta1)}Q=new T(oe)}return Q}},function(_,S,E){'use strict';function C(ae,se,oe,le,de,ue){K(),R(ae,de,ue);for(var he=ae.length,pe=0,ge;pe<he;pe++)ge=se?ae[pe]:ae[he-pe-1],ge&&(K(),I(ge,oe),T(ge,le))}function R(ae,se,oe){'NMR SPEC'===ae.type?(oe.nucleus&&(ee+=W(oe.nucleus)),ee+=' NMR',(se||oe.observe)&&(ee+=' (',oe.observe&&(ee+=(1*oe.observe).toFixed(0)+' MHz',se&&(ee+=', ')),se&&(ee+=Z(se)),ee+=')'),ee+=' \u03B4 '):'IR'===ae.type?ee+=' IR ':'MASS'===ae.type&&(ee+=' MASS ')}function I(ae,se){var oe=0,le=0,de=0,ue;ae.from&&('string'==typeof ae.from?oe=parseFloat(ae.from):oe=ae.from),ae.to&&('string'==typeof ae.to?le=parseFloat(ae.to):le=ae.to),ae.signal[0].delta?'string'==typeof ae.signal[0].delta?de=parseFloat(ae.signal[0].delta):de=ae.signal[0].delta:ue=!0,!0===ue||'m'===ae.signal[0].multiplicity&&!0===ne?ae.from&&ae.to?oe<le?ee+=oe.toFixed(se)+'-'+le.toFixed(se):ee+=le.toFixed(se)+'-'+oe.toFixed(se):ae.signal[0].delta&&(ee+='?'):ae.signal[0].delta?ee+=de.toFixed(se):ae.from&&ae.to&&(ee+=((oe+le)/2).toFixed(se))}function T(ae,se){te='',O(ae),P(ae),M(ae,se),F(ae),0<te.length&&(ee+=' ('+te+')')}function P(ae){ae.pubIntegral?(Q(),te+=ae.pubIntegral):ae.integral&&(Q(),te+=ae.integral.toFixed(0)+' H')}function F(ae){ae.signal[0].pubAssignment?(Q(),te+=$(ae.signal[0].pubAssignment)):ae.signal[0].assignment&&(Q(),te+=$(ae.signal[0].assignment))}function O(ae){ae.signal[0].pubMultiplicity?(Q(),te+=ae.pubMultiplicity):ae.signal[0].multiplicity&&(Q(),te+=ae.signal[0].multiplicity)}function M(ae,se){if(0>'sm'.indexOf(ae.signal[0].multiplicity)&&ae.signal[0].j&&0<ae.signal[0].j.length){for(var oe=ae.signal[0].j,le='<i>J</i> = ',de=0,ue;de<oe.length;de++)ue=oe[de].coupling||0,11<le.length&&(le+=', '),le+=ue.toFixed(se);Q(),te+=le+' Hz'}}function $(ae){return ae=ae.replace(/([0-9])/g,'<sub>$1</sub>'),ae=ae.replace(/\"([^\"]*)\"/g,'<i>$1</i>'),ae}function Z(ae){return ae=ae.replace(/([0-9])/g,'<sub>$1</sub>'),ae}function W(ae){return ae=ae.replace(/([0-9])/g,'<sup>$1</sup>'),ae}function K(){0<ee.length&&!ee.match(/ $/)&&(ee+=', ')}function Q(){0<te.length&&!te.match(', $')&&(te+=', ')}const G=E(108);var ee='',te='',ne=!1;_.exports=function(ae,se){let oe=Object.assign({},{nucleus:'1H'},se);var le=JSON.parse(JSON.stringify(ae));if(le[0].delta1)return G.toACS(le,oe);le.updateMultiplicity&&(le=le.updateMultiplicity()),ee='',te='';var de=null;return oe&&oe.solvent&&(de=oe.solvent),oe&&void 0!==oe.rangeForMultiplet&&(ne=oe.rangeForMultiplet),oe&&oe.ascending?le.sort(function(ue,he){return he.from-ue.from}):le.sort(function(ue,he){return ue.from-he.from}),le.type='NMR SPEC',oe&&'1H'===oe.nucleus&&C(le,!1,2,1,de,oe),oe&&'13C'===oe.nucleus&&C(le,!1,1,0,de,oe),0<ee.length&&(ee+='.'),ee}},function(_){'use strict';function C(ne,ae,se,oe,le){K(),R(ne,le);for(var de=ne.length,he=0,ue;he<de;he++)ue=ae?ne[he]:ne[de-he-1],ue&&(K(),I(ue,se),T(ue,oe))}function R(ne,ae){'NMR SPEC'===ne.type?(ne[0].nucleus&&(G+=W(ne[0].nucleus)),G+=' NMR',(ae||ne[0].observe)&&(G+=' (',ne[0].observe&&(G+=(1*ne[0].observe).toFixed(0)+' MHz',ae&&(G+=', ')),ae&&(G+=Z(ae)),G+=')'),G+=' \u03B4 '):'IR'===ne.type?G+=' IR ':'MASS'===ne.type&&(G+=' MASS ')}function I(ne,ae){var se=0,oe=0,le=0;ne.integralData.from&&('string'==typeof ne.integralData.from?se=parseFloat(ne.integralData.from):se=ne.integralData.from),ne.integralData.to&&('string'==typeof ne.integralData.to?oe=parseFloat(ne.integralData.to):oe=ne.integralData.to),ne.delta1&&('string'==typeof ne.delta1?le=parseFloat(ne.delta1):le=ne.delta1),!0===ne.asymmetric||'m'===ne.multiplicity&&!0===te?ne.integralData.from&&ne.integralData.to?se<oe?G+=se.toFixed(ae)+'-'+oe.toFixed(ae):G+=oe.toFixed(ae)+'-'+se.toFixed(ae):ne.delta1&&(G+=le.toFixed(ae)):ne.delta1?G+=le.toFixed(ae):ne.integralData.from&&ne.integralData.to&&(G+=((se+oe)/2).toFixed(ae))}function T(ne,ae){ee='',O(ne),P(ne),M(ne,ae),F(ne),0<ee.length&&(G+=' ('+ee+')')}function P(ne){ne.pubIntegration?(Q(),ee+=ne.pubIntegration):ne.integralData&&(Q(),ee+=ne.integralData.value.toFixed(0)+' H')}function F(ne){ne.pubAssignment?(Q(),ee+=$(ne.pubAssignment)):ne.assignment&&(Q(),ee+=$(ne.assignment))}function O(ne){ne.pubMultiplicity?(Q(),ee+=ne.pubMultiplicity):ne.multiplicity&&(Q(),ee+=ne.multiplicity)}function M(ne,ae){if(ne.nmrJs){for(var se='<i>J</i> = ',oe=0,le;oe<ne.nmrJs.length;oe++)le=ne.nmrJs[oe].coupling,11<se.length&&(se+=', '),se+=le.toFixed(ae);Q(),ee+=se+' Hz'}}function $(ne){return ne=ne.replace(/([0-9])/g,'<sub>$1</sub>'),ne=ne.replace(/\"([^\"]*)\"/g,'<i>$1</i>'),ne}function Z(ne){return ne=ne.replace(/([0-9])/g,'<sub>$1</sub>'),ne}function W(ne){return ne=ne.replace(/([0-9])/g,'<sup>$1</sup>'),ne}function K(){0<G.length&&!G.match(/ $/)&&(G+=', ')}function Q(){0<ee.length&&!ee.match(', $')&&(ee+=', ')}var G='',ee='',te=!1;_.exports.toACS=function(ne,ae){G='',ee='';var se=null;return ae&&ae.solvent&&(se=ae.solvent),ae&&void 0!==ae.rangeForMultiplet&&(te=ae.rangeForMultiplet),ae&&ae.ascending?ne.sort(function(oe,le){return le.delta1-oe.delta1}):ne.sort(function(oe,le){return oe.delta1-le.delta1}),ne.type='NMR SPEC','1H'===ne[0].nucleus?C(ne,!1,2,1,se):'13C'===ne[0].nucleus&&C(ne,!1,1,0,se),0<G.length&&(G+='.'),G}},function(_){'use strict';_.exports=function(C,R){var R=R||{},I=R.from,T=R.to,P=R.nbPoints||16384,F=R.fnName||'gaussian',O=R.nWidth||4;if(!I){I=Number.MAX_VALUE;for(let ne=0;ne<C.length;ne++)C[ne].x-C[ne].width*O<I&&(I=C[ne].x-C[ne].width*O)}if(!T){T=Number.MIN_VALUE;for(let ne=0;ne<C.length;ne++)C[ne].x+C[ne].width*O>T&&(T=C[ne].x+C[ne].width*O)}var M=Array(P),$=Array(P),Z=(T-I)/(P-1);for(let ne=0;ne<P;ne++)M[ne]=I+ne*Z,$[ne]=0;var W='intensity';C[0].y&&(W='y');for(let ne=0;ne<C.length;ne++){var K=C[ne];if(K.x>I&&K.x<T){var Q=Math.round((K.x-I)/Z),G=Math.round(K.width*O/Z);if('gaussian'===F)for(var ee=Q-G;ee<Q+G;ee++)0<=ee&&ee<P&&($[ee]+=K[W]*Math.exp(-0.5*Math.pow((K.x-M[ee])/(K.width/2),2)));else{var te=K[W]*Math.pow(K.width,2)/4;for(let ae=Q-G;ae<Q+G;ae++)0<=ae&&ae<P&&($[ae]+=te/(Math.pow(K.x-M[ae],2)+Math.pow(K.width/2,2)))}}}return{x:M,y:$}}},function(_){'use strict';var R={type:'rect',line:0,lineLabel:1,labelColor:'red',strokeColor:'red',strokeWidth:'1px',fillColor:'green',width:0.05,height:10,toFixed:1},I={type:'rect',labelColor:'red',strokeColor:'red',strokeWidth:'1px',fillColor:'green',width:'6px',height:'6px'};_.exports={annotations2D:function(T,P){for(var F=Object.assign({},I,P),O=[],M=T.length-1;0<=M;M--){var $=T[M],Z={};Z.type=F.type,Z._highlight=$._highlight,Z._highlight&&0!==Z._highlight.length||(Z._highlight=[$.signalID]),$._highlight=Z._highlight,Z.position=[{x:$.fromTo[0].from-0.01,y:$.fromTo[1].from-0.01,dx:F.width,dy:F.height},{x:$.fromTo[0].to+0.01,y:$.fromTo[1].to+0.01}],Z.fillColor=F.fillColor,Z.label={text:$.remark,position:{x:$.signal[0].delta[0],y:$.signal[0].delta[1]-0.025}},Z.strokeColor=1===$.integral?F.strokeColor:'rgb(0,128,0)',Z.strokeWidth=F.strokeWidth,Z.width=F.width,Z.height=F.height,Z.info=$,O.push(Z)}return O},annotations1D:function(T,P){for(var F=Object.assign({},R,P),O=F.height,M=[],$=0;$<T.length;$++){var Z=T[$],W={};M.push(W),W.line=F.line,W._highlight=Z._highlight,W._highlight&&0!==W._highlight.length||(W._highlight=[Z.signalID],Z.signal.forEach(function(K){for(let Q=0;Q<K.diaID.length;Q++)W._highlight.push(K.diaID[Q])})),Z._highlight=W._highlight,W.type=F.type,W.position=Z.to&&Z.from&&Z.to!==Z.from?[{x:Z.to,y:F.line*O+'px'},{x:Z.from,y:F.line*O+3+'px'}]:[{x:Z.signal[0].delta-F.width,y:F.line*O+'px'},{x:Z.signal[0].delta+F.width,y:F.line*O+3+'px'}],!F.noLabel&&Z.integral&&(W.label={text:Z.integral.toFixed(F.toFixed),size:'11px',anchor:'middle',color:F.labelColor,position:{x:(W.position[0].x+W.position[1].x)/2,y:(F.line+F.lineLabel)*O+'px',dy:'5px'}}),W.strokeColor=F.strokeColor,W.strokeWidth=F.strokeWidth,W.fillColor=F.fillColor,W.info=Z}return M}}},function(_,S,E){'use strict';S.SD=E(6),S.NMR=E(40),S.NMR2D=E(41),S.Ranges=E(13)}])});
//# sourceMappingURL=spectra-data.min.js.map