(function(S,D){'object'==typeof exports&&'object'==typeof module?module.exports=D():'function'==typeof define&&define.amd?define([],D):'object'==typeof exports?exports.spectraData=D():S.spectraData=D()})(this,function(){return function(_){function S(C){if(D[C])return D[C].exports;var E=D[C]={exports:{},id:C,loaded:!1};return _[C].call(E.exports,E,E.exports,S),E.loaded=!0,E.exports}var D={};return S.m=_,S.c=D,S.p='',S(0)}([function(_,S,D){'use strict';S.SD=D(1),S.NMR=D(14),S.NMR2D=D(107)},function(_,S,D){'use strict';var C=D(2).array,E=D(5),R=D(9),I=D(11),T=D(13);class P{constructor(F){this.DATACLASS_XY=1,this.DATACLASS_PEAK=2,this.sd=F,this.activeElement=0}static fromJcamp(F,M){M=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},M);var O=R.convert(F,M);return new P(O)}setActiveElement(F){this.activeElement=F}getActiveElement(){return this.activeElement}getXUnits(){return this.getSpectrum().xUnit}setXUnits(F){this.getSpectrum().xUnit=F}getYUnits(){return this.getSpectrum().yUnit}getSpectraVariable(F){return this.sd.ntuples[F]}getNbPoints(F){return this.getSpectrumData(F).y.length}getFirstX(F){return F=F||this.activeElement,this.sd.spectra[F].firstX}setFirstX(F,M){M=M||this.activeElement,this.sd.spectra[M].firstX=F}getLastX(F){return F=F||this.activeElement,this.sd.spectra[F].lastX}setLastX(F,M){M=M||this.activeElement,this.sd.spectra[M].lastX=F}getFirstY(F){return F=F||this.activeElement,this.sd.spectra[F].firstY}setFirstY(F,M){M=M||this.activeElement,this.sd.spectra[M].firstY=F}getLastY(F){return F=F||this.activeElement,this.sd.spectra[F].lastY}setLastY(F,M){M=M||this.activeElement,this.sd.spectra[M].lastY=F}setDataClass(F){F===this.DATACLASS_PEAK&&(this.getSpectrum().isPeaktable=!0,this.getSpectrum().isXYdata=!1),F===this.DATACLASS_XY&&(this.getSpectrum().isXYdata=!0,this.getSpectrum().isPeaktable=!1)}isDataClassPeak(){return!!this.getSpectrum().isPeaktable&&this.getSpectrum().isPeaktable}isDataClassXY(){return!!this.getSpectrum().isXYdata&&this.getSpectrum().isXYdata}setDataType(F){this.getSpectrum().dataType=F}getDataType(){return this.getSpectrum().dataType}getSpectrumData(F){return F=F||this.activeElement,this.sd.spectra[F].data[0]}getSpectrum(F){return F=F||this.activeElement,this.sd.spectra[F]}getNbSubSpectra(){return this.sd.spectra.length}getXData(F){return this.getSpectrumData(F).x}getYData(F){return this.getSpectrumData(F).y}getX(F){return this.getXData()[F]}getY(F){return this.getYData()[F]}getXYData(F){return[this.getXData(F),this.getYData(F)]}getTitle(F){return this.getSpectrum(F).title}setTitle(F,M){this.getSpectrum(M).title=F}getMinY(F){return C.min(this.getYData(F))}getMaxY(F){return C.max(this.getYData(F))}getMinMaxY(F){return C.minMax(this.getYData(F))}getNoiseLevel(){var F=C.robustMeanAndStdev(this.getYData()).stdev;return F*this.getNMRPeakThreshold(this.getNucleus(1))}arrayPointToUnits(F){return this.getFirstX()-F*(this.getFirstX()-this.getLastX())/(this.getNbPoints()-1)}unitsToArrayPoint(F){if(this.isDataClassXY())return Math.round((this.getFirstX()-F)*(-1/this.getDeltaX()));if(this.isDataClassPeak()){var M=0,O=this.getNbPoints()-1,$=0,Z;if(this.getFirstX()>this.getLastX()){if(O=0,$=this.getNbPoints()-1,F>this.getFirstX())return this.getNbPoints();if(F<this.getLastX())return-1}else{if(F<this.getFirstX())return-1;if(F>this.getLastX())return this.getNbPoints()}for(;1<Math.abs(O-$);){if(Z=Math.round(Math.floor((O+$)/2)),this.getX(Z)===F)return Z;this.getX(Z)>F?O=Z:$=Z}return M=$,Math.abs(this.getX($)-F)>Math.abs(this.getX(O)-F)&&(M=O),M}return 0}getDeltaX(){return(this.getLastX()-this.getFirstX())/(this.getNbPoints()-1)}setMinMax(F,M){E.scale(this.getYData(),{min:F,max:M,inplace:!0})}setMin(F){E.scale(this.getYData(),{min:F,inplace:!0})}setMax(F){E.scale(this.getYData(),{max:F,inplace:!0})}YShift(F){var M=this.getSpectrumData().y,O=this.getNbPoints(),$=0;for($=0;$<O;$++)M[$]+=F;this.getSpectrum().firstY+=F,this.getSpectrum().lastY+=F}shift(F){for(let Z=0;Z<this.getNbSubSpectra();Z++){this.setActiveElement(Z);var M=this.getSpectrumData().x,O=this.getNbPoints(),$=0;for($=0;$<O;$++)M[$]+=F;this.getSpectrum().firstX+=F,this.getSpectrum().lastX+=F}}fillWith(F,M,O){var $,Z,W,K,Q;F>M&&($=F,F=M,M=$);for(var G=0;G<this.getNbSubSpectra();G++)if(this.setActiveElement(G),K=this.getXData(),Q=this.getYData(),Z=this.unitsToArrayPoint(F),W=this.unitsToArrayPoint(M),Z>W&&($=Z,Z=W,W=$),0>Z&&(Z=0),W>=this.getNbPoints&&(W=this.getNbPoints-1),'number'!=typeof O)Q.splice(Z,W-Z),K.splice(Z,W-Z);else for(G=Z;G<=W;G++)Q[G]=O}suppressZone(F,M){this.fillWith(F,M),this.setDataClass(this.DATACLASS_PEAK)}getMaxPeak(){var F=this.getSpectraDataY(),M=F[0],O=0;for(var $=0;$<F.length;$++)M<F[$]&&(M=F[$],O=$);return[this.getX(O),M]}getParamDouble(F,M){var O=this.sd.info[F];return O||(O=M),O}getParamString(F,M){var O=this.sd.info[F];return O||(O=M),O+''}getParamInt(F,M){var O=this.sd.info[F];return O||(O=M),O}getParam(F,M){var O=this.sd.info[F];return O||(O=M),O}containsParam(F){return!!this.sd.info[F]}getSpectraDataY(){return this.getYData()}getSpectraDataX(){return this.getXData()}resetMinMax(){}putParam(F,M){this.sd.info[F]=M}getArea(F,M){var O=this.unitsToArrayPoint(F),$=this.unitsToArrayPoint(M),Z=0;if(O>$){var W=O;O=$,$=W}O=0>O?0:O,$=$>=this.getNbPoints()?this.getNbPoints()-1:$;for(var K=O;K<$;K++)Z+=this.getY(K);return Z*Math.abs(this.getDeltaX())}updateIntegrals(F,M){var O=0,$=this;if(F.forEach(function(W){W.integral=$.getArea(W.from,W.to),O+=W.integral}),M.nH){var Z=M.nH/O;F.forEach(function(W){W.integral*=Z})}}getVector(F,M,O){return O?E.getEquallySpacedData(this.getSpectraDataX(),this.getSpectraDataY(),{from:F,to:M,numberOfPoints:O}):this.getPointsInWindow(F,M)}getPointsInWindow(F,M,O){var $=this.getSpectraDataX(),Z=this.getSpectraDataY(),W=0,K=$.length-1,Q=1;if($[0]>$[1]&&(Q=-1,W=$.length-1,K=0),F>M){var G=F;F=M,M=G}if($[W]>M||$[K]<F)return[];for(;$[W]<F;)W+=Q;for(;$[K]>M;)K-=Q;var ee=Math.abs(K-W)+1;O||(O=ee);var te=Array(O),ne=Array(O),ae=0;-1==Q&&(ae=O-1);var oe=ee/O,se=W-Q;for(var le=0;le<O;le++)se+=Math.round(oe*Q),te[ae]=$[se],ne[ae]=Z[se],ae+=Q;return[te,ne]}is2D(){return'undefined'!=typeof this.sd.twoD&&this.sd.twoD}toJcamp(F){return F=T({},{encode:'DIFDUP',yFactor:1,type:'SIMPLE',keep:[]},F),I.convert(this,F.encode,F.yFactor,F.type,F.keep)}}_.exports=P},function(_,S,D){'use strict';S.array=D(3),S.matrix=D(4)},function(_,S){'use strict';function D(C,E){return C-E}S.sum=function(E){var C=0;for(var R=0;R<E.length;R++)C+=E[R];return C},S.max=function(E){var C=E[0],R=E.length;for(var I=1;I<R;I++)E[I]>C&&(C=E[I]);return C},S.min=function(E){var C=E[0],R=E.length;for(var I=1;I<R;I++)E[I]<C&&(C=E[I]);return C},S.minMax=function(E){var R=E[0],I=E[0],T=E.length;for(var P=1;P<T;P++)E[P]<R&&(R=E[P]),E[P]>I&&(I=E[P]);return{min:R,max:I}},S.arithmeticMean=function(E){var R=0,I=E.length;for(var T=0;T<I;T++)R+=E[T];return R/I},S.mean=S.arithmeticMean,S.geometricMean=function(E){var R=1,I=E.length;for(var T=0;T<I;T++)R*=E[T];return Math.pow(R,1/I)},S.logMean=function(E){var R=0,I=E.length;for(var T=0;T<I;T++)R+=Math.log(E[T]);return R/I},S.grandMean=function(E,R){var I=0,T=0,P=E.length;for(var F=0;F<P;F++)I+=R[F]*E[F],T+=R[F];return I/T},S.truncatedMean=function(E,R,I){I===void 0&&(I=!1),I||(E=[].concat(E).sort(D));var T=E.length,P=Math.floor(T*R),F=0;for(var M=P;M<T-P;M++)F+=E[M];return F/(T-2*P)},S.harmonicMean=function(E){var R=0,I=E.length;for(var T=0;T<I;T++){if(0===E[T])throw new RangeError('value at index '+T+'is zero');R+=1/E[T]}return I/R},S.contraHarmonicMean=function(E){var R=0,I=0,T=E.length;for(var P=0;P<T;P++)R+=E[P]*E[P],I+=E[P];if(0>I)throw new RangeError('sum of values is negative');return R/I},S.median=function(E,R){R===void 0&&(R=!1),R||(E=[].concat(E).sort(D));var I=E.length,T=Math.floor(I/2);return 0==I%2?0.5*(E[T-1]+E[T]):E[T]},S.variance=function(E,R){R===void 0&&(R=!0);var I=S.mean(E),T=0,P=E.length;for(var F=0;F<P;F++){var M=E[F]-I;T+=M*M}return R?T/(P-1):T/P},S.standardDeviation=function(E,R){return Math.sqrt(S.variance(E,R))},S.standardError=function(E){return S.standardDeviation(E)/Math.sqrt(E.length)},S.robustMeanAndStdev=function(E){var R=0,I=0,T=E.length,P=0;for(P=0;P<T;P++)R+=E[P];R/=T;var F=Array(T);for(P=0;P<T;P++)F[P]=Math.abs(E[P]-R);return F.sort(D),I=1==T%2?F[(T-1)/2]/0.6745:0.5*(F[T/2]+F[T/2-1])/0.6745,{mean:R,stdev:I}},S.quartiles=function(E,R){'undefined'==typeof R&&(R=!1),R||(E=[].concat(E).sort(D));var I=E.length/4,T=E[Math.ceil(I)-1],P=S.median(E,!0),F=E[Math.ceil(3*I)-1];return{q1:T,q2:P,q3:F}},S.pooledStandardDeviation=function(E,R){return Math.sqrt(S.pooledVariance(E,R))},S.pooledVariance=function(E,R){'undefined'==typeof R&&(R=!0);var I=0,T=0,P=E.length;for(var F=0;F<P;F++){var M=E[F],O=S.variance(M);I+=(M.length-1)*O,T+=R?M.length-1:M.length}return I/T},S.mode=function(E){var R=E.length,I=Array(R),T;for(T=0;T<R;T++)I[T]=0;var P=Array(R),F=0;for(T=0;T<R;T++){var M=P.indexOf(E[T]);0<=M?I[M]++:(P[F]=E[T],I[F]=1,F++)}var O=0,$=0;for(T=0;T<F;T++)I[T]>O&&(O=I[T],$=T);return P[$]},S.covariance=function(E,R,I){'undefined'==typeof I&&(I=!0);var T=S.mean(E),P=S.mean(R);if(E.length!==R.length)throw'Vectors do not have the same dimensions';var F=0,M=E.length;for(var O=0;O<M;O++){var $=E[O]-T,Z=R[O]-P;F+=$*Z}return I?F/(M-1):F/M},S.skewness=function(E,R){'undefined'==typeof R&&(R=!0);var I=S.mean(E),T=0,P=0,F=E.length;for(var M=0;M<F;M++){var O=E[M]-I;T+=O*O,P+=O*O*O}var $=T/F,Z=P/F,W=Z/Math.pow($,3/2);if(R){var K=Math.sqrt(F*(F-1));return K/(F-2)*W}return W},S.kurtosis=function(E,R){'undefined'==typeof R&&(R=!0);var I=S.mean(E),T=E.length,P=0,F=0;for(var M=0;M<T;M++){var O=E[M]-I;P+=O*O,F+=O*O*O*O}var $=P/T,Z=F/T;if(R){var W=P/(T-1),K=F/(W*W);return T*(T+1)/((T-1)*(T-2)*(T-3))*K-3*((T-1)*(T-1)/((T-2)*(T-3)))}return Z/($*$)-3},S.entropy=function(E,R){'undefined'==typeof R&&(R=0);var I=0,T=E.length;for(var P=0;P<T;P++)I+=E[P]*Math.log(E[P]+R);return-I},S.weightedMean=function(E,R){var I=0,T=E.length;for(var P=0;P<T;P++)I+=E[P]*R[P];return I},S.weightedStandardDeviation=function(E,R){return Math.sqrt(S.weightedVariance(E,R))},S.weightedVariance=function(E,R){var I=S.weightedMean(E,R),T=0,P=E.length,F=0,M=0;for(var O=0;O<P;O++){var $=E[O]-I,Z=R[O];T+=Z*($*$),M+=Z,F+=Z*Z}return T*(M/(M*M-F))},S.center=function(E,R){'undefined'==typeof R&&(R=!1);var I=E;R||(I=[].concat(E));var T=S.mean(I),P=I.length;for(var F=0;F<P;F++)I[F]-=T},S.standardize=function(E,R,I){'undefined'==typeof R&&(R=S.standardDeviation(E)),'undefined'==typeof I&&(I=!1);var T=E.length,P=I?E:Array(T);for(var F=0;F<T;F++)P[F]=E[F]/R;return P},S.cumulativeSum=function(E){var R=E.length,I=Array(R);I[0]=E[0];for(var T=1;T<R;T++)I[T]=I[T-1]+E[T];return I}},function(_,S,D){'use strict';function C(R,I){return R-I}var E=D(3);S.max=function(I){var R=-(1/0);for(var T=0;T<I.length;T++)for(var P=0;P<I[T].length;P++)I[T][P]>R&&(R=I[T][P]);return R},S.min=function(I){var R=1/0;for(var T=0;T<I.length;T++)for(var P=0;P<I[T].length;P++)I[T][P]<R&&(R=I[T][P]);return R},S.minMax=function(I){var T=1/0,P=-(1/0);for(var F=0;F<I.length;F++)for(var M=0;M<I[F].length;M++)I[F][M]<T&&(T=I[F][M]),I[F][M]>P&&(P=I[F][M]);return{min:T,max:P}},S.entropy=function(I,T){'undefined'==typeof T&&(T=0);var P=0,F=I.length,M=I[0].length;for(var O=0;O<F;O++)for(var $=0;$<M;$++)P+=I[O][$]*Math.log(I[O][$]+T);return-P},S.mean=function(I,T){'undefined'==typeof T&&(T=0);var P=I.length,F=I[0].length,M,O,$,Z;if(-1===T){for(M=[0],O=P*F,$=0;$<P;$++)for(Z=0;Z<F;Z++)M[0]+=I[$][Z];M[0]/=O}else if(0===T)for(M=Array(F),O=P,Z=0;Z<F;Z++){for(M[Z]=0,$=0;$<P;$++)M[Z]+=I[$][Z];M[Z]/=O}else if(1===T)for(M=Array(P),O=F,Z=0;Z<P;Z++){for(M[Z]=0,$=0;$<F;$++)M[Z]+=I[Z][$];M[Z]/=O}else throw new Error('Invalid dimension');return M},S.sum=function(I,T){'undefined'==typeof T&&(T=0);var P=I.length,F=I[0].length,M,O,$;if(-1===T)for(M=[0],O=0;O<P;O++)for($=0;$<F;$++)M[0]+=I[O][$];else if(0===T)for(M=Array(F),$=0;$<F;$++)for(M[$]=0,O=0;O<P;O++)M[$]+=I[O][$];else if(1===T)for(M=Array(P),$=0;$<P;$++)for(M[$]=0,O=0;O<F;O++)M[$]+=I[$][O];else throw new Error('Invalid dimension');return M},S.product=function(I,T){'undefined'==typeof T&&(T=0);var P=I.length,F=I[0].length,M,O,$;if(-1===T)for(M=[1],O=0;O<P;O++)for($=0;$<F;$++)M[0]*=I[O][$];else if(0===T)for(M=Array(F),$=0;$<F;$++)for(M[$]=1,O=0;O<P;O++)M[$]*=I[O][$];else if(1===T)for(M=Array(P),$=0;$<P;$++)for(M[$]=1,O=0;O<F;O++)M[$]*=I[$][O];else throw new Error('Invalid dimension');return M},S.standardDeviation=function(I,T,P){var F=S.variance(I,T,P),M=F.length;for(var O=0;O<M;O++)F[O]=Math.sqrt(F[O]);return F},S.variance=function(I,T,P){'undefined'==typeof P&&(P=!0),T=T||S.mean(I);var F=I.length;if(0===F)return[];var M=I[0].length,O=Array(M);for(var $=0;$<M;$++){var Z=0,W=0,K=0;for(var Q=0;Q<F;Q++)K=I[Q][$]-T[$],Z+=K,W+=K*K;O[$]=P?(W-Z*Z/F)/(F-1):(W-Z*Z/F)/F}return O},S.median=function(I){var T=I.length,P=I[0].length,F=Array(P);for(var M=0;M<P;M++){var O=Array(T);for(var $=0;$<T;$++)O[$]=I[$][M];O.sort(C);var Z=O.length;F[M]=0==Z%2?0.5*(O[Z/2]+O[Z/2-1]):O[Math.floor(Z/2)]}return F},S.mode=function(I){var T=I.length,P=I[0].length,F=Array(P),M,O;for(M=0;M<P;M++){var $=Array(T);for(var Z=0;Z<T;Z++)$[Z]=0;var W=Array(T),K=0;for(O=0;O<T;O++){var Q=W.indexOf(I[O][M]);0<=Q?$[Q]++:(W[K]=I[O][M],$[K]=1,K++)}var G=0,ee=0;for(O=0;O<K;O++)$[O]>G&&(G=$[O],ee=O);F[M]=W[ee]}return F},S.skewness=function(I,T){'undefined'==typeof T&&(T=!0);var P=S.mean(I),F=I.length,M=P.length,O=Array(M);for(var $=0;$<M;$++){var Z=0,W=0;for(var K=0;K<F;K++){var Q=I[K][$]-P[$];Z+=Q*Q,W+=Q*Q*Q}var G=Z/F,ee=W/F,te=ee/Math.pow(G,3/2);if(T){var ne=Math.sqrt(F*(F-1));O[$]=ne/(F-2)*te}else O[$]=te}return O},S.kurtosis=function(I,T){'undefined'==typeof T&&(T=!0);var P=S.mean(I),F=I.length,M=I[0].length,O=Array(M);for(var $=0;$<M;$++){var Z=0,W=0;for(var K=0;K<F;K++){var Q=I[K][$]-P[$];Z+=Q*Q,W+=Q*Q*Q*Q}var G=Z/F,ee=W/F;if(T){var te=Z/(F-1),ne=W/(te*te);O[$]=F*(F+1)/((F-1)*(F-2)*(F-3))*ne-3*((F-1)*(F-1)/((F-2)*(F-3)))}else O[$]=ee/(G*G)-3}return O},S.standardError=function(I){var T=I.length,P=S.standardDeviation(I),F=P.length,M=Array(F),O=Math.sqrt(T);for(var $=0;$<F;$++)M[$]=P[$]/O;return M},S.covariance=function(I,T){return S.scatter(I,void 0,T)},S.scatter=function(I,T,P){'undefined'==typeof P&&(P=0),'undefined'==typeof T&&(0===P?T=I.length-1:1==P&&(T=I[0].length-1));var F=S.mean(I,P),M=I.length;if(0===M)return[[]];var O=I[0].length,$,Z,W,K,Q;if(0===P){for($=Array(O),Z=0;Z<O;Z++)$[Z]=Array(O);for(Z=0;Z<O;Z++)for(W=Z;W<O;W++){for(K=0,Q=0;Q<M;Q++)K+=(I[Q][W]-F[W])*(I[Q][Z]-F[Z]);K/=T,$[Z][W]=K,$[W][Z]=K}}else if(1===P){for($=Array(M),Z=0;Z<M;Z++)$[Z]=Array(M);for(Z=0;Z<M;Z++)for(W=Z;W<M;W++){for(K=0,Q=0;Q<O;Q++)K+=(I[W][Q]-F[W])*(I[Z][Q]-F[Z]);K/=T,$[Z][W]=K,$[W][Z]=K}}else throw new Error('Invalid dimension');return $},S.correlation=function(I){var T=S.mean(I),P=S.standardDeviation(I,!0,T),F=S.zScores(I,T,P),M=I.length,O=I[0].length,$,Z,W=Array(O);for($=0;$<O;$++)W[$]=Array(O);for($=0;$<O;$++)for(Z=$;Z<O;Z++){var K=0;for(var Q=0,G=F.length;Q<G;Q++)K+=F[Q][Z]*F[Q][$];K/=M-1,W[$][Z]=K,W[Z][$]=K}return W},S.zScores=function(I,T,P){return T=T||S.mean(I),'undefined'==typeof P&&(P=S.standardDeviation(I,!0,T)),S.standardize(S.center(I,T,!1),P,!0)},S.center=function(I,T,P){T=T||S.mean(I);var F=I,M=I.length,O,$,Z;if(!P)for(F=Array(M),O=0;O<M;O++)F[O]=Array(I[O].length);for(O=0;O<M;O++){var W=F[O];for($=0,Z=W.length;$<Z;$++)W[$]=I[O][$]-T[$]}return F},S.standardize=function(I,T,P){'undefined'==typeof T&&(T=S.standardDeviation(I));var F=I,M=I.length,O,$,Z;if(!P)for(F=Array(M),O=0;O<M;O++)F[O]=Array(I[O].length);for(O=0;O<M;O++){var W=F[O],K=I[O];for($=0,Z=W.length;$<Z;$++)0===T[$]||isNaN(T[$])||(W[$]=K[$]/T[$])}return F},S.weightedVariance=function(I,T){var P=S.mean(I),F=I.length;if(0===F)return[];var M=I[0].length,O=Array(M);for(var $=0;$<M;$++){var Z=0,W=0,K=0;for(var Q=0;Q<F;Q++){var G=I[Q][$]-P[$],ee=T[Q];Z+=ee*(G*G),K+=ee,W+=ee*ee}O[$]=Z*(K/(K*K-W))}return O},S.weightedMean=function(I,T,P){'undefined'==typeof P&&(P=0);var F=I.length;if(0===F)return[];var M=I[0].length,O,$,Z,W,K,Q;if(0===P){for(O=Array(M),$=0;$<M;$++)O[$]=0;for($=0;$<F;$++)for(Q=I[$],K=T[$],W=0;W<M;W++)O[W]+=Q[W]*K}else if(1===P){for(O=Array(F),$=0;$<F;$++)O[$]=0;for(W=0;W<F;W++)for(Q=I[W],K=T[W],$=0;$<M;$++)O[W]+=Q[$]*K}else throw new Error('Invalid dimension');var G=E.sum(T);if(0!==G)for($=0,Z=O.length;$<Z;$++)O[$]/=G;return O},S.weightedCovariance=function(I,T,P,F){F=F||0,P=P||S.weightedMean(I,T,F);var M=0,O=0;for(var $=0,Z=T.length;$<Z;$++)M+=T[$],O+=T[$]*T[$];var W=M/(M*M-O);return S.weightedScatter(I,T,P,W,F)},S.weightedScatter=function(I,T,P,F,M){M=M||0,P=P||S.weightedMean(I,T,M),'undefined'==typeof F&&(F=1);var O=I.length;if(0===O)return[[]];var $=I[0].length,Z,W,K,Q,G;if(0===M){for(Z=Array($),W=0;W<$;W++)Z[W]=Array($);for(W=0;W<$;W++)for(K=W;K<$;K++){for(G=0,Q=0;Q<O;Q++)G+=T[Q]*(I[Q][K]-P[K])*(I[Q][W]-P[W]);Z[W][K]=G*F,Z[K][W]=G*F}}else if(1===M){for(Z=Array(O),W=0;W<O;W++)Z[W]=Array(O);for(W=0;W<O;W++)for(K=W;K<O;K++){for(G=0,Q=0;Q<$;Q++)G+=T[Q]*(I[K][Q]-P[K])*(I[W][Q]-P[W]);Z[W][K]=G*F,Z[K][W]=G*F}}else throw new Error('Invalid dimension');return Z}},function(_,S,D){_.exports=S=D(6),S.getEquallySpacedData=D(7).getEquallySpacedData,S.SNV=D(8).SNV},function(_,S,D){'use strict';function C(R){var I=Array(R[0].length);for(var T=0;T<I.length;++T)I[T]=Array(R.length);for(T=0;T<R.length;++T)for(var P=0;P<R[0].length;++P)I[P][T]=R[T][P];return I}const E=D(2).array;_.exports={coordArrayToPoints:function(I,T){if(0!=I.length%T)throw new RangeError('Dimensions number must be accordance with the size of the array.');var P=I.length/T,F=Array(P),M=0;for(var O=0;O<I.length;O+=T){var $=Array(T);for(var Z=0;Z<T;++Z)$[Z]=I[O+Z];F[M]=$,M++}return F},coordArrayToCoordMatrix:function(I,T){if(0!=I.length%T)throw new RangeError('Dimensions number must be accordance with the size of the array.');var P=Array(T),F=I.length/T;for(var M=0;M<P.length;M++)P[M]=Array(F);for(M=0;M<I.length;M+=T)for(var O=0;O<T;++O){var $=Math.floor(M/T);P[O][$]=I[M+O]}return P},coordMatrixToCoordArray:function(I){var T=Array(I.length*I[0].length),P=0;for(var F=0;F<I[0].length;++F)for(var M=0;M<I.length;++M)T[P]=I[M][F],++P;return T},coordMatrixToPoints:C,pointsToCoordArray:function(I){var T=Array(I.length*I[0].length),P=0;for(var F=0;F<I.length;++F)for(var M=0;M<I[0].length;++M)T[P]=I[F][M],++P;return T},pointsToCoordMatrix:C,applyDotProduct:function(I,T){var P,F;I.length<=T.length?(F=I,P=T):(F=T,P=I);var M=P.length-F.length+1,O=Array(M);for(var $=0;$<M;++$){var Z=0;for(var W=0;W<F.length;++W)Z+=F[W]*P[$+W];O[$]=Z}return O},scale:function(I,T){var P;P=T.inPlace?I:Array(I.length);const F=T.max,M=T.min;if('number'==typeof F){if('number'==typeof M){var O=E.minMax(I),$=(F-M)/(O.max-O.min);for(var Z=0;Z<P.length;Z++)P[Z]=(I[Z]-O.min)*$+M}else{var W=E.max(I),$=F/W;for(var Z=0;Z<P.length;Z++)P[Z]=I[Z]*$}}else if('number'==typeof M){var W=E.min(I),$=M/W;for(var Z=0;Z<P.length;Z++)P[Z]=I[Z]*$}return P}}},function(_,S){'use strict';function D(R,I,T,P,F){function M(ge,fe,be,ye){return(ye-fe)/(be-ge)}var O=R.length,$=(P-T)/(F-1),Z=T-$/2,W=Array(F),K=R[1]-R[0],Q=R[R.length-1]-R[R.length-2],G=Z,ee=Z+$,te=Number.MIN_VALUE,ne=0,ae=R[0]-K,oe=0,se=0,le=0,de=0,ue=0,he=0,pe=0,me=0;main:for(;!0;){for(;0<=ae-ee;){var ce=E(0,ee-te,le,ne);if(he=se+ce,W[me]=(he-ue)/$,me++,me===F)break main;G=ee,ee+=$,ue=he}te<=G&&G<=ae&&(ce=E(0,G-te,le,ne),ue=se+ce),se+=E(te,ae,le,de),te=ae,ne=oe,pe<O?(ae=R[pe],oe=I[pe],pe++):pe===O&&(ae+=Q,oe=0),le=M(te,ne,ae,oe),de=-le*te+ne}return W}function C(R,I,T,P,F){var M=R.length,O=(P-T)/(F-1),$=R[R.length-1]-R[R.length-2],Z=T-O/2,W=Array(F),K=Z,Q=Z+O,G=-Number.MAX_VALUE,ee=0,te=R[0],ne=I[0],ae=0,oe=!0,se=0,le=0,de=1,ue=0;main:for(;!0;){if(G>=te)throw new Error('x must be an increasing serie');for(;0<G-Q;){if(oe&&(le++,oe=!1),W[ue]=0>=le?0:se/le,ue++,ue===F)break main;K=Q,Q+=O,se=0,le=0}G>K&&(se+=ee,le++),(G==-Number.MAX_VALUE||1<ae)&&le--,G=te,ee=ne,de<M?(te=R[de],ne=I[de],de++):(te+=$,ne=0,ae++)}return W}function E(R,I,T,P){return 0.5*T*I*I+P*I-(0.5*T*R*R+P*R)}S.getEquallySpacedData=function(I,T,P){1<I.length&&I[0]>I[1]&&(I=I.slice().reverse(),T=T.slice().reverse());var F=I.length;if(F!==T.length)throw new RangeError('the x and y vector doesn\'t have the same size.');P===void 0&&(P={});var M=P.from===void 0?I[0]:P.from;if(isNaN(M)||!isFinite(M))throw new RangeError('\'From\' value must be a number');var O=P.to===void 0?I[I.length-1]:P.to;if(isNaN(O)||!isFinite(O))throw new RangeError('\'To\' value must be a number');var $=M>O;if($){var Z=M;M=O,O=Z}var W=P.numberOfPoints===void 0?100:P.numberOfPoints;if(isNaN(W)||!isFinite(W))throw new RangeError('\'Number of points\' value must be a number');if(1>W)throw new RangeError('the number of point must be higher than 1');var K='slot'===P.variant?'slot':'smooth',Q='slot'==K?C(I,T,M,O,W):D(I,T,M,O,W);return $?Q.reverse():Q},S.integral=E},function(_,S,D){'use strict';S.SNV=function(R){var I=C.mean(R),T=C.standardDeviation(R),P=R.slice();for(var F=0;F<R.length;F++)P[F]=(P[F]-I)/T;return P};var C=D(2).array},function(_,S,D){'use strict';function C(){function M(ue){var he=ue.length,pe=Array(he);for(var me=0;me<he;me++)pe[me]=parseFloat(ue[me]);return pe}function O(){}function $(ue){return ue.toLowerCase().replace(/[^a-z0-9]/g,'')}function Z(ue){return-1!==de.indexOf(ue)}function W(ue){var he=ue.spectra,pe=he.length,me={times:Array(pe),series:[{name:'ms',dimension:2,data:Array(pe)}]},ce,ge=[];for(ce=0;ce<de.length;ce++){var fe=$(de[ce]);he[0][fe]&&(ge.push(fe),me.series.push({name:fe,dimension:1,data:Array(pe)}))}for(ce=0;ce<pe;ce++){var be=he[ce];me.times[ce]=be.pageValue;for(var ye=0;ye<ge.length;ye++)me.series[ye+1].data[ce]=parseFloat(be[ge[ye]]);be.data&&(me.series[0].data[ce]=[be.data[0].x,be.data[0].y])}ue.gcms=me}function K(ue){var he=ue.spectra,pe=[],me;for(me=0;me<de.length;me++){var ce=$(de[me]);he[0][ce]&&pe.push(ce)}if(0!==pe.length){var ge={};for(ge.gc={},ge.ms=[],me=0;me<pe.length;me++)ge.gc[pe[me]]=[];for(me=0;me<he.length;me++){var fe=he[me];for(var be=0;be<pe.length;be++)ge.gc[pe[be]].push(fe.pageValue),ge.gc[pe[be]].push(parseFloat(fe[pe[be]]));fe.data&&(ge.ms[me]=fe.data[0])}ue.gcms=ge}}function Q(ue,he){if(he.xFactor||(he.xFactor=1),he.yFactor||(he.yFactor=1),he.observeFrequency&&he.xUnit&&'HZ'===he.xUnit.toUpperCase()&&(he.xUnit='PPM',he.xFactor=he.xFactor/he.observeFrequency,he.firstX=he.firstX/he.observeFrequency,he.lastX=he.lastX/he.observeFrequency,he.deltaX=he.deltaX/he.observeFrequency),ue.shiftOffsetVal){var pe=he.firstX-ue.shiftOffsetVal;he.firstX=he.firstX-pe,he.lastX=he.lastX-pe}}function G(ue){ue=ue.sort(ee);var he=ue.length;return ue[Math.floor(he/2)]}function ee(ue,he){return ue-he}function te(ue){var he=ue[0].data[0][0],pe=he,me=ue.length,ce=ue[0].data[0].length/2,ge=Array(me);for(var fe=0;fe<me;fe++){ge[fe]=Array(ce);var be=ue[fe].data[0];for(var ye=0;ye<ce;ye++){var xe=be[2*ye+1];ge[fe][ye]=xe,xe<he&&(he=xe),xe>pe&&(pe=xe)}}return{z:ge,minX:ue[0].data[0][0],maxX:ue[0].data[0][ue[0].data[0].length-2],minY:ue[0].pageValue,maxY:ue[me-1].pageValue,minZ:he,maxZ:pe,noise:G(ge[0].map(Math.abs))}}function ne(ue,he){var pe=te(ue.spectra);he.noContour||(ue.contourLines=ae(pe,he),delete pe.z),ue.minMax=pe}function ae(ue,he){var pe=ue.noise,me=ue.z,ce=he.nbContourLevels||7,ge=he.noiseMultiplier===void 0?5:he.noiseMultiplier,fe,be,ye,xe,_e,ke,we,je,Se=me.length,ve=me[0].length,De,Ce,Ae,Ee,Re=ue.minX,Ie=ue.maxX,Te=(Ie-Re)/(ve-1),Pe=ue.minY,Fe=ue.maxY,ze=(Fe-Pe)/(Se-1),Me=ue.minZ,Ye=ue.maxZ,Xe=2*ce,Oe=Array(Xe),Ne;for(var Le=0;Le<Xe;Le++){var Ue={};Oe[Le]=Ue;var Be=Le%2,Ve=(Ye-ge*pe)*Math.exp((Le>>1)-ce);Ne=0==Be?Ve+ge*pe:0-Ve-ge*pe;var qe=[];if(Ue.zValue=Ne,Ue.lines=qe,!(Ne<=Me||Ne>=Ye))for(var $e=0;$e<Se-1;$e++){var Ze=me[$e],He=me[$e+1];for(var We=0;We<ve-1;We++)fe=Ze[We],be=Ze[We+1],ye=He[We],xe=He[We+1],_e=fe>Ne,ke=be>Ne,we=ye>Ne,je=xe>Ne,_e!=ke&&_e!=we&&(De=We+(Ne-fe)/(be-fe),Ce=$e,Ae=We,Ee=$e+(Ne-fe)/(ye-fe),qe.push(De*Te+Re),qe.push(Ce*ze+Pe),qe.push(Ae*Te+Re),qe.push(Ee*ze+Pe)),je!=ke&&je!=we&&(De=We+1,Ce=$e+1-(Ne-xe)/(be-xe),Ae=We+1-(Ne-xe)/(ye-xe),Ee=$e+1,qe.push(De*Te+Re),qe.push(Ce*ze+Pe),qe.push(Ae*Te+Re),qe.push(Ee*ze+Pe)),ke!=we&&(De=(We+1-(Ne-be)/(ye-be))*Te+Re,Ce=($e+(Ne-be)/(ye-be))*ze+Pe,ke!=_e&&(Ae=We+1-(Ne-be)/(fe-be),Ee=$e,qe.push(De),qe.push(Ce),qe.push(Ae*Te+Re),qe.push(Ee*ze+Pe)),we!=_e&&(Ae=We,Ee=$e+1-(Ne-ye)/(fe-ye),qe.push(De),qe.push(Ce),qe.push(Ae*Te+Re),qe.push(Ee*ze+Pe)),ke!=je&&(Ae=We+1,Ee=$e+(Ne-be)/(xe-be),qe.push(De),qe.push(Ce),qe.push(Ae*Te+Re),qe.push(Ee*ze+Pe)),we!=je&&(Ae=We+(Ne-ye)/(xe-ye),Ee=$e+1,qe.push(De),qe.push(Ce),qe.push(Ae*Te+Re),qe.push(Ee*ze+Pe)))}}return{minX:ue.minX,maxX:ue.maxX,minY:ue.minY,maxY:ue.maxY,segments:Oe}}function oe(ue,he){var pe=ue.yFactor,me=ue.deltaX;ue.isXYdata=!0;var ce=[];ue.data=[ce];var ge=ue.firstX,fe=ue.firstY,be=!1;for(var ye=0;ye<he.length;ye++){var xe=he.charCodeAt(ye);if(13===xe||10===xe)be=!0;else if(be)break}for(var _e=!0,ke=!1,we=!1,je=0,Se=!1,ve=!1,De=0,Ce=!1,Ae=!1,Ee=!1,Re=0,xe;ye<=he.length;ye++)if(xe=ye===he.length?13:he.charCodeAt(ye),ve)(13===xe||10===xe)&&(_e=!0,ve=!1);else if(57>=xe&&48<=xe)Ae=!0,0<Re?De+=(xe-48)/Math.pow(10,Re++):(De*=10,De+=xe-48);else if(44===xe||46===xe)Ae=!0,Re++;else{if(Ae){if(_e)_e=!1,we&&(Ee=!0);else if(Ee)Ee=!1;else{ke&&(je=Ce?0-De:De,we=!0,ke=!1);var Ie=Se?De-1:1;for(var Te=0;Te<Ie;Te++)we?fe+=je:fe=Ce?0-De:De,ce.push(ge),ce.push(fe*pe),ge+=me}Ce=!1,De=0,Re=0,Ae=!1,Se=!1}if(74>xe&&63<xe)Ae=!0,we=!1,De=xe-64;else if(96<xe&&106>xe)Ae=!0,we=!1,De=xe-96,Ce=!0;else if(115===xe)Ae=!0,Se=!0,De=9;else if(82<xe&&91>xe)Ae=!0,Se=!0,De=xe-82;else if(73<xe&&83>xe)Ae=!0,ke=!0,De=xe-73;else if(105<xe&&115>xe)Ae=!0,ke=!0,De=xe-105,Ce=!0;else if(36===xe&&36===he.charCodeAt(ye+1))Ae=!0,ve=!0;else if(37===xe)Ae=!0,ke=!0,De=0,Ce=!1;else if(45===xe){var Pe=he.charCodeAt(ye+1);(48<=Pe&&57>=Pe||44===Pe||46===Pe)&&(Ae=!0,we=!1,Ce=!0)}else(13===xe||10===xe)&&(_e=!0,ve=!1)}}function se(ue,he,pe){var me=/\$\$.*/,ce=/[,\t ]+/;ue.isPeaktable=!0;var ge,fe,be,ye,xe,_e=[];ue.data=[_e];var ke=he.split(/,? *,?[;\r\n]+ */);for(ge=1,fe=ke.length;ge<fe;ge++)if(xe=ke[ge].trim().replace(me,'').split(ce),0==xe.length%2)for(be=0,ye=xe.length;be<ye;be=be+2)_e.push(parseFloat(xe[be])*ue.xFactor),_e.push(parseFloat(xe[be+1])*ue.yFactor);else pe.logs.push('Format error: '+xe)}var le=/[, \t]{1,}/,de=['TIC','.RIC','SCANNUMBER'];return function(he,pe){pe=pe||{};var me=/^$/;pe.keepRecordsRegExp&&(me=pe.keepRecordsRegExp);var ce=!pe.withoutXY,ge=Date.now(),fe={},De={},be,ye,xe,_e,ke,we,je,Se,ve;De.profiling=[],De.logs=[];var Ce=[];De.spectra=Ce,De.info={};var Ae=new O;if('string'!=typeof he)return De;for(De.profiling&&De.profiling.push({action:'Before split to LDRS',time:Date.now()-ge}),_e=he.split(/[\r\n]+##/),De.profiling&&De.profiling.push({action:'Split to LDRS',time:Date.now()-ge}),_e[0]&&(_e[0]=_e[0].replace(/^[\r\n ]*##/,'')),(ke=0,we=_e.length);ke<we;ke++){if(be=_e[ke],je=be.indexOf('='),0<je?(ye=be.substring(0,je),xe=be.substring(je+1).trim()):(ye=be,xe=''),ye=ye.replace(/[_ -]/g,'').toUpperCase(),'DATATABLE'===ye&&(Se=xe.indexOf('\n'),-1===Se&&(Se=xe.indexOf('\r')),0<Se)){var Ee=-1,Re=-1;if(ve=xe.substring(0,Se).split(/[ ,;\t]+/),0<ve[0].indexOf('++')){var Ie=ve[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,'$1'),Te=ve[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,'$1');Ee=fe.symbol.indexOf(Ie),Re=fe.symbol.indexOf(Te)}-1===Ee&&(Ee=0),-1===Re&&(Re=0),fe.first&&(fe.first.length>Ee&&(Ae.firstX=fe.first[Ee]),fe.first.length>Re&&(Ae.firstY=fe.first[Re])),fe.last&&(fe.last.length>Ee&&(Ae.lastX=fe.last[Ee]),fe.last.length>Re&&(Ae.lastY=fe.last[Re])),fe.vardim&&fe.vardim.length>Ee&&(Ae.nbPoints=fe.vardim[Ee]),fe.factor&&(fe.factor.length>Ee&&(Ae.xFactor=fe.factor[Ee]),fe.factor.length>Re&&(Ae.yFactor=fe.factor[Re])),fe.units&&(fe.units.length>Ee&&(Ae.xUnit=fe.units[Ee]),fe.units.length>Re&&(Ae.yUnit=fe.units[Re])),Ae.datatable=ve[0],ve[1]&&-1<ve[1].indexOf('PEAKS')?ye='PEAKTABLE':ve[1]&&(ve[1].indexOf('XYDATA')||0<ve[0].indexOf('++'))&&(ye='XYDATA',Ae.deltaX=(Ae.lastX-Ae.firstX)/(Ae.nbPoints-1))}if('XYDATA'===ye){ce&&(Q(De,Ae),xe.match(/.*\+\+.*/)?!1===pe.fastParse?I(Ae,xe,De):(!Ae.deltaX&&(Ae.deltaX=(Ae.lastX-Ae.firstX)/(Ae.nbPoints-1)),oe(Ae,xe,De)):se(Ae,xe,De),Ce.push(Ae),Ae=new O);continue}else if('PEAKTABLE'===ye){ce&&(Q(De,Ae),se(Ae,xe,De),Ce.push(Ae),Ae=new O);continue}if('TITLE'===ye)Ae.title=xe;else if('DATATYPE'===ye)Ae.dataType=xe,-1<xe.indexOf('nD')&&(De.twoD=!0);else if('NTUPLES'===ye)-1<xe.indexOf('nD')&&(De.twoD=!0);else if('XUNITS'===ye)Ae.xUnit=xe;else if('YUNITS'===ye)Ae.yUnit=xe;else if('FIRSTX'===ye)Ae.firstX=parseFloat(xe);else if('LASTX'===ye)Ae.lastX=parseFloat(xe);else if('FIRSTY'===ye)Ae.firstY=parseFloat(xe);else if('LASTY'===ye)Ae.lastY=parseFloat(xe);else if('NPOINTS'===ye)Ae.nbPoints=parseFloat(xe);else if('XFACTOR'===ye)Ae.xFactor=parseFloat(xe);else if('YFACTOR'===ye)Ae.yFactor=parseFloat(xe);else if('DELTAX'===ye)Ae.deltaX=parseFloat(xe);else if('.OBSERVEFREQUENCY'===ye||'$SFO1'===ye)Ae.observeFrequency||(Ae.observeFrequency=parseFloat(xe));else if('.OBSERVENUCLEUS'===ye)Ae.xType||(De.xType=xe.replace(/[^a-zA-Z0-9]/g,''));else if('$SFO2'===ye)De.indirectFrequency||(De.indirectFrequency=parseFloat(xe));else if('$OFFSET'===ye)De.shiftOffsetNum=0,De.shiftOffsetVal||(De.shiftOffsetVal=parseFloat(xe));else if('$REFERENCEPOINT'===ye);else if('VARNAME'===ye)fe.varname=xe.split(le);else if('SYMBOL'===ye)fe.symbol=xe.split(le);else if('VARTYPE'===ye)fe.vartype=xe.split(le);else if('VARFORM'===ye)fe.varform=xe.split(le);else if('VARDIM'===ye)fe.vardim=M(xe.split(le));else if('UNITS'===ye)fe.units=xe.split(le);else if('FACTOR'===ye)fe.factor=M(xe.split(le));else if('FIRST'===ye)fe.first=M(xe.split(le));else if('LAST'===ye)fe.last=M(xe.split(le));else if('MIN'===ye)fe.min=M(xe.split(le));else if('MAX'===ye)fe.max=M(xe.split(le));else if('.NUCLEUS'===ye)De.twoD&&(De.yType=xe.split(le)[0]);else if('PAGE'===ye){Ae.page=xe.trim(),Ae.pageValue=parseFloat(xe.replace(/^.*=/,'')),Ae.pageSymbol=Ae.page.replace(/=.*/,'');var Pe=fe.symbol.indexOf(Ae.pageSymbol),Fe='';fe.units&&fe.units[Pe]&&(Fe=fe.units[Pe]),De.indirectFrequency&&'PPM'!=Fe&&(Ae.pageValue/=De.indirectFrequency)}else'RETENTIONTIME'===ye?Ae.pageValue=parseFloat(xe):Z(ye)&&(Ae[$(ye)]=xe);ye.match(me)&&(De.info[ye]=xe.trim())}if(De.profiling&&De.profiling.push({action:'Finished parsing',time:Date.now()-ge}),0<Object.keys(fe).length){var ze=[],Me=Object.keys(fe);for(var ke=0;ke<Me.length;ke++){var Ye=Me[ke],Xe=fe[Ye];for(var Oe=0;Oe<Xe.length;Oe++)ze[Oe]||(ze[Oe]={}),ze[Oe][Ye]=Xe[Oe]}De.ntuples=ze}De.twoD&&ce&&(ne(De,pe),De.profiling&&De.profiling.push({action:'Finished countour plot calculation',time:Date.now()-ge}),!pe.keepSpectra&&delete De.spectra);var Ne=1<Ce.length&&(!Ce[0].dataType||Ce[0].dataType.match(/.*mass.*/i));if(Ne&&pe.newGCMS&&(pe.xy=!0),pe.xy&&ce&&0<Ce.length)for(var ke=0;ke<Ce.length;ke++){var Ae=Ce[ke];if(0<Ae.data.length)for(var Oe=0;Oe<Ae.data.length;Oe++){var Le=Ae.data[Oe],Ue={x:Array(Le.length/2),y:Array(Le.length/2)};for(var Be=0;Be<Le.length;Be=Be+2)Ue.x[Be/2]=Le[Be],Ue.y[Be/2]=Le[Be+1];Ae.data[Oe]=Ue}}return Ne&&ce&&(pe.newGCMS?W(De):K(De),De.profiling&&De.profiling.push({action:'Finished GCMS calculation',time:Date.now()-ge})),De.profiling&&De.profiling.push({action:'Total time',time:Date.now()-ge}),De}}function E(M,O){return F||R(),new Promise(function($){var Z=Date.now()+''+Math.random();P[Z]=$,F.postMessage(JSON.stringify({stamp:Z,input:M,options:O}))})}function R(){var M=URL.createObjectURL(new Blob(['var getConverter ='+C.toString()+';var convert = getConverter(); onmessage = function (event) { var data = JSON.parse(event.data); postMessage(JSON.stringify({stamp: data.stamp, output: convert(data.input, data.options)})); };'],{type:'application/javascript'}));F=new Worker(M),URL.revokeObjectURL(M),F.addEventListener('message',function(O){var $=JSON.parse(O.data),Z=$.stamp;P[Z]&&P[Z]($.output)})}var I=D(10),T=C(),P={},F;_.exports={convert:function(O,$,Z){return'boolean'==typeof $&&(Z=$,$={}),Z?E(O,$):T(O,$)}}},function(_){'use strict';var S=/[,\t \+-]*(?=[^\d,\t \.])|[ \t]+(?=[\d+\.-])/,D=/\$\$.*/;_.exports=function(C,E,R){C.deltaX||(C.deltaX=(C.lastX-C.firstX)/(C.nbPoints-1)),C.isXYdata=!0;var I=[],T=0;C.data=[I];var P=C.firstX,F=C.firstY,M=E.split(/[\r\n]+/),O,$,Z,W;$=[];for(var K=1,Q=M.length;K<Q;K++)if($=M[K].trim().replace(D,'').split(S),0<$.length){var G;for(var ee=1,te=$.length;ee<te;ee++)if(1===ee&&(O||0===O))O=null,Z=$[ee].charCodeAt(0);else if(0<$[ee].length)if(Z=$[ee].charCodeAt(0),43===Z||45===Z||46===Z||47<Z&&58>Z)O=null,F=+$[ee],I[T++]=P,I[T++]=F*C.yFactor,P+=C.deltaX;else if(63<Z&&74>Z)O=null,F=+(String.fromCharCode(Z-16)+$[ee].substring(1)),I[T++]=P,I[T++]=F*C.yFactor,P+=C.deltaX;else if(96<Z&&106>Z)O=null,F=1*-(String.fromCharCode(Z-48)+$[ee].substring(1)),I[T++]=P,I[T++]=F*C.yFactor,P+=C.deltaX;else if(82<Z&&91>Z||115===Z){var ne=String.fromCharCode(Z-34)+$[ee].substring(1)-1;115==Z&&(ne='9'+$[ee].substring(1)-1);for(var ae=0;ae<ne;ae++)O&&(F=F+O),I[T++]=P,I[T++]=F*C.yFactor,P+=C.deltaX}else 37===Z?(O=+('0'+$[ee].substring(1)),F+=O,I[T++]=P,I[T++]=F*C.yFactor,P+=C.deltaX):73<Z&&83>Z?(O=1*(String.fromCharCode(Z-25)+$[ee].substring(1)),F+=O,I[T++]=P,I[T++]=F*C.yFactor,P+=C.deltaX):105<Z&&115>Z&&(O=1*-(String.fromCharCode(Z-57)+$[ee].substring(1)),F+=O,I[T++]=P,I[T++]=F*C.yFactor,P+=C.deltaX)}}},function(_,S,D){'use strict';var C=D(12),E=function(){const R={MAX_VALUE:2e+31,MIN_VALUE:-2e31},I='\r\n';var T=function(F,M,O,$,Z){var W='',K=F.getSpectraVariable(0),Q=F.getSpectraVariable(1),G=F.getSpectraVariable(2);W+='##DATA CLASS= NTUPLES'+I,W+='##NUM DIM= 2'+I;var ee=F.getDataType().trim(),te={},ne;for(ne=0;ne<F.getNbSubSpectra();ne++)F.setActiveElement(ne),te[F.getXUnits()]?te[F.getXUnits()].value++:te[F.getXUnits()]={value:1,index:ne};var ae=Object.keys(te),oe=ae[0],se=0;for(ne=1;ne<ae.length;ne++)te[ae[ne]].value>te[oe].value&&(oe=ae[ne],se=te[ae[ne]].index);var le=!1;F.setActiveElement(se);var de=0<=F.getDataType().indexOf('NMR');de&&(W+='##.OBSERVE FREQUENCY= '+F.getParamDouble('observefrequency',0)+I,W+='##.OBSERVE NUCLEUS= ^'+F.getNucleus()+I,W+='##$DECIM= '+F.getParamDouble('$DECIM',0)+I,W+='##$DSPFVS= '+F.getParamDouble('$DSPFVS',0)+I,W+='##$FCOR= '+Math.floor(F.getParamDouble('$FCOR',0))+I,F.containsParam('$SW_h')?W+='##$SW_h= '+F.getParamDouble('$SW_h',0)+I:F.containsParam('$SW_p')&&(W+='##$SW_p= '+F.getParamDouble('$SW_p',0)+I),W+='##$SW= '+F.getParamDouble('$SW',0)+I,W+='##$TD= '+Math.floor(F.getParamDouble('$TD',0))+I,W+='##$BF1= '+F.getParamDouble('$BF1',0)+I,W+='##$GRPDLY= '+F.getParamDouble('$GRPDLY',0)+I,W+='##.DIGITISER RES= '+F.getParamInt('.DIGITISER RES',0)+I,W+='##.PULSE SEQUENCE= '+F.getParamString('.PULSE SEQUENCE','')+I,W+='##.SOLVENT NAME= '+F.getSolventName()+I,W+='##$NUC1= <'+F.getNucleus()+'>'+I,W+=F.containsParam('2D_X_FREQUENCY')?'##$SFO1= '+F.getParamDouble('2D_X_FREQUENCY',0)+I:'##$SFO1= '+F.getParamDouble('$SFO1',0)+I,F.containsParam('2D_X_OFFSET')&&(W+='##$OFFSET= '+F.getParamDouble('2D_X_OFFSET',0)+I),F.is2D()&&(W+='$$Parameters for 2D NMR Spectrum'+I,W+='##$NUC1= <'+F.getNucleus(2)+'>'+I,F.containsParam('2D_Y_FREQUENCY')&&(W+='##$SFO1= '+F.getParamDouble('2D_Y_FREQUENCY',0)+I,W+='##$SFO2= '+F.getParamDouble('2D_Y_FREQUENCY',0)+I,W+='##$BF2= '+F.getParamDouble('2D_Y_FREQUENCY',0)+I),F.containsParam('2D_Y_OFFSET')&&(W+='##$OFFSET= '+F.getParamDouble('2D_Y_OFFSET',0)+I),W+='$$End of Parameters for 2D NMR Spectrum'+I)),W+='##NTUPLES=\t'+ee+I;var ue=1,he=1;if(!F.is2D()&&1<F.getNbSubSpectra()&&de&&(le=!0),le?(W+='##VAR_NAME=\t'+F.getXUnits()+',\t'+ee.substring(4)+'/REAL,\t'+ee.substring(4)+'/IMAG'+I,W+='##SYMBOL=\tX,\tR,\tI'+I,W+='##VAR_TYPE=\tINDEPENDENT,\tDEPENDENT,\tDEPENDENT'+I,W+='CSV'!=$||'PAC'!=$?'##VAR_FORM=\tAFFN,\tASDF,\tASDF'+I:'##VAR_FORM=\tAFFN,\tAFFN,\tAFFN'+I,W+='##VAR_DIM=\t'+F.getNbPoints()+',\t'+F.getNbPoints()+',\t'+F.getNbPoints()+I,W+='##UNITS=\tHZ,\t'+F.getYUnits()+',\t'+G.units+I,W+='##FACTOR=\t'+1/O+',\t'+1/M+',\t'+1/M+I,'PPM'==F.getXUnits()&&(ue=F.observeFrequencyX()),W+='##FIRST=\t'+F.getFirstX()*ue+',\t'+F.getY(0)+',\t0'+I,W+='##LAST=\t'+F.getLastX()*ue+',\t'+F.getLastY()+',\t0'+I):(ue=1,F.is2D()?(W+='##VAR_NAME=\tFREQUENCY1,\tFREQUENCY2,\tSPECTRUM'+I,W+='##SYMBOL=\tF1,\tF2,\tY'+I,W+='##.NUCLEUS=\t'+F.getNucleus(2)+',\t'+F.getNucleus(1)+I,W+='##VAR_TYPE=\tINDEPENDENT,\tINDEPENDENT,\tDEPENDENT'+I,W+='CSV'!=$||'PAC'!=$?'##VAR_FORM=\tAFFN,\tAFFN,\tASDF'+I:'##VAR_FORM=\tAFFN,\tAFFN,\tASDF'+I,W+='##VAR_DIM=\t'+F.getNbSubSpectra()+',\t'+F.getNbPoints()+',\t'+F.getNbPoints()+I,W+='##UNITS=\tHZ,\tHZ,\t'+F.getYUnits()+I,'PPM'==F.getXUnits()&&(ue=F.getParamDouble('2D_Y_FREQUENCY',1)),'PPM'==F.getYUnits()&&(he=F.getParamDouble('2D_X_FREQUENCY',1)),W+='##FACTOR=\t1,\t'+he/O+',\t'+1/M+I,W+='##FIRST=\t'+F.getParamDouble('firstY',0)*ue+',\t'+F.getFirstX()*he+',\t'+F.getY(0)+I,W+='##LAST=\t'+F.getParamDouble('lastY',0)*ue+',\t'+F.getLastX()*he+',\t'+F.getY(F.getNbPoints()-1)+I):(W+='##VAR_NAME=\t'+K.varname+',\t'+Q.varname+',\t'+K.varname+I,W+='##SYMBOL=\t'+K.symbol+',\t'+Q.symbol+',\t'+G.symbol+I,W+='##VAR_TYPE=\t'+K.vartype+',\t'+Q.vartype+',\t'+G.vartype+I,W+='CSV'!=$||'PAC'!=$?'##VAR_FORM=\tAFFN,\tASDF,\tASDF'+I:'##VAR_FORM=\tAFFN,\tAFFN,\tAFFN'+I,W+='##VAR_DIM=\t'+K.vardim+',\t'+Q.vardim+',\t'+G.vardim+I,W+='##UNITS=\tHZ,\t'+F.getYUnits()+',\t'+G.units+I,'PPM'==F.getXUnits()&&(ue=F.observeFrequencyX()),W+='##FACTOR=\t'+1/O+',\t'+1/M+I,W+='##FIRST=\t'+K.first*ue+',\t'+Q.first+',\t'+G.first+I,W+='##LAST=\t'+K.last*ue+',\t'+Q.last+',\t'+G.last+I)),null!=Z)for(var pe=Z.length-1;0<=pe;pe--)F.containsParam(Z[pe])&&(W+='##'+Z[pe]+'= '+F.getParam(Z[pe],'')+I);var me=0,ce=0,ge=0;for(F.is2D()&&de&&(me=F.getParamDouble('firstY',0)*ue,ce=F.getParamDouble('lastY',0)*ue,ge=(ce-me)/(F.getNbSubSpectra()-1)),ne=0;ne<F.getNbSubSpectra();ne++)if(F.setActiveElement(ne),W+='##PAGE= '+F.page+I,me+=ge,F.is2D()&&de&&(W+='##FIRST=\t'+F.getParamDouble('firstY',0)*ue+',\t'+F.getFirstX()*he+',\t'+F.getY(0)+I),W+='##DATA TABLE= ',F.isDataClassPeak()){W+='(XY..XY), PEAKS'+I;for(var fe=0;fe<F.getNbPoints();fe++)W+=F.getX(fe)+', '+F.getY(fe)+I}else if(F.isDataClassXY()){W+=de?F.is2D()?'(F2++(Y..Y)), PROFILE'+I:0==ne%2?'(X++(R..R)), XYDATA'+I:'(X++(I..I)), XYDATA'+I:'(X++(Y..Y)), XYDATA'+I;var be='',ye=Array(F.getNbPoints());for(var fe=ye.length-1;0<=fe;fe--)ye[fe]=Math.round(F.getY(fe)*M);be+=C.encode(ye,F.getFirstX()*O,F.getDeltaX()*O,$),W+=be+I}return W+='##END NTUPLES= '+ee+I,W+='##END= ',F.setActiveElement(0),W},P=function(F,M,O,$,Z){F.getSpectraVariable(0),F.getSpectraVariable(1);var W='';if(F.isDataClassPeak()&&(W+='##DATA CLASS= PEAK TABLE'+I),F.isDataClassXY()&&(W+='##DATA CLASS= XYDATA'+I),F.setActiveElement(0),0<=F.getDataType().indexOf('NMR')&&(W+='##.OBSERVE FREQUENCY= '+F.getParamDouble('observefrequency',0)+I,W+='##.OBSERVE NUCLEUS= ^'+F.getNucleus()+I,W+='##$DECIM= '+Math.round(F.getParamDouble('$DECIM',0))+I,W+='##$DSPFVS= '+Math.round(F.getParamDouble('$DSPFVS',0))+I,W+='##$FCOR= '+Math.round(F.getParamDouble('$FCOR',0))+I,W+='##$SW_h= '+F.getParamDouble('$SW_h',0)+I,W+='##$SW= '+F.getParamDouble('$SW',0)+I,W+='##$TD= '+Math.round(F.getParamDouble('$TD',0))+I,W+='##$GRPDLY= '+F.getParamDouble('$GRPDLY',0)+I,W+='##$BF1= '+F.getParamDouble('$BF1',0)+I,W+='##$SFO1= '+F.getParamDouble('$SFO1',0)+I,W+='##$NUC1= <'+F.getNucleus()+'>'+I,W+='##.SOLVENT NAME= '+F.getSolventName()+I),W+='##XUNITS=\t'+F.getXUnits()+I,W+='##YUNITS=\t'+F.getYUnits()+I,W+='##NPOINTS=\t'+F.getNbPoints()+I,W+='##FIRSTX=\t'+F.getFirstX()+I,W+='##LASTX=\t'+F.getLastX()+I,W+='##FIRSTY=\t'+F.getFirstY()+I,W+='##LASTY=\t'+F.getLastY()+I,F.isDataClassPeak()?(W+='##XFACTOR=1'+I,W+='##YFACTOR=1'+I):F.isDataClassXY()&&(W+='##XFACTOR= '+1/O+I,W+='##YFACTOR= '+1/M+I),W+='##MAXY= '+F.getMaxY()+I,W+='##MINY= '+F.getMinY()+I,null!=Z)for(var K=Z.length-1;0<=K;K--)F.containsParam(Z[K])&&(W+='##'+Z[K]+'= '+F.getParam(Z[K],'')+I);if(F.isDataClassPeak()){W+='##PEAK TABLE= (XY..XY)'+I;for(var Q=0;Q<F.getNbPoints();Q++)W+=F.getX(Q)+', '+F.getY(Q)+I;W+='##END '}else if(F.isDataClassXY()){W+='##DELTAX= '+F.getDeltaX()+I,W+='##XYDATA=(X++(Y..Y))'+I;var G='',ee=Array(F.getNbPoints());for(var Q=ee.length-1;0<=Q;Q--)ee[Q]=Math.round(F.getY(Q)*M);G+=C.encode(ee,F.getFirstX()*O,F.getDeltaX()*O,$),W+=G+I,W+='##END= '}return F.setActiveElement(0),W};return{convert:function(F,M,O,$,Z){M=M.toUpperCase().trim(),(null===$||0==$.length)&&($='SIMPLE');var W='';F.setActiveElement(0);var K=O/F.getParamDouble('YFACTOR',1);F.getMaxY()*K>=R.MAX_VALUE/2&&(K=R.MAX_VALUE/(2*F.getMaxY())),16>Math.abs(F.getMaxY()-F.getMinY())*K&&(K=16/Math.abs(F.getMaxY()-F.getMinY()));var Q=Math.abs(1/F.getDeltaX());return W+='##TITLE= '+F.getTitle()+I,W+='##JCAMP-DX= 5.00\t$$Cheminfo tools, March 2016'+I,W+='##OWNER= '+F.getParamString('##OWNER=','')+I,W+='##DATA TYPE= '+F.getDataType()+I,'NTUPLES'==$&&(W+=T(F,K,Q,M,Z)),'SIMPLE'==$&&(W+=P(F,K,Q,M,Z)),W}}}();_.exports=E},function(_){'use strict';function S(Z){var W='';return W+=C[5][+Z.charAt(0)],1<Z.length&&(W+=Z.substring(1)),W}var D='\r\n',C=[['0','1','2','3','4','5','6','7','8','9'],['@','A','B','C','D','E','F','G','H','I'],['@','a','b','c','d','e','f','g','h','i'],['%','J','K','L','M','N','O','P','Q','R'],['%','j','k','l','m','n','o','p','q','r'],[' ','S','T','U','V','W','X','Y','Z','s']],E=100,R=function(Z,W,K){return I(Z,W,K,',')},I=function(Z,W,K,Q){Q||(Q=' ');for(var G='',ee=0,te=Z.length,ne;ee<te-7;){for(G+=Math.ceil(W+ee*K),ne=0;8>ne;ne++)G+=Q+Z[ee++];G+=D}if(ee<te)for(G+=Math.ceil(W+ee*K),ne=ee;ne<te;ne++)G+=Q+Z[ne];return G},T=function(Z,W,K){for(var Q='',G=0,ee=Z.length,te;G<ee-7;){for(Q+=Math.ceil(W+G*K),te=0;8>te;te++)Q+=0>Z[G]?'-'+Z[G++]:'+'+Z[G++];Q+=D}if(G<ee)for(Q+=Math.ceil(W+G*K),te=G;te<ee;te++)Q+=0>Z[te]?'-'+Z[te]:'+'+Z[te];return Q},P=function(Z,W,K){for(var Q='',G=0,ee=Z.length,te;G<ee-10;){for(Q+=Math.ceil(W+G*K),te=0;10>te;te++)Q+=O(Z[G++].toString());Q+=D}if(G<ee)for(Q+=Math.ceil(W+G*K),te=G;te<ee;te++)Q+=O(Z[te].toString());return Q},F=function(Z,W,K){var Q=0,G=0,ee=0,ne='',ae='',oe='',se=Array(Z.length-1),te;for(te=0;te<se.length;te++)se[te]=Z[te+1]-Z[te];for(var le=se.length;G<le;)0==ee?(ae=Math.ceil(W+G*K)+O(Z[G].toString())+$(se[G].toString()),ne+=ae,ee+=ae.length):se[G-1]==se[G]?Q++:0<Q?(Q++,ae=S(Q.toString()),ne+=ae,ee+=ae.length,Q=0,G--):(ae=$(se[G].toString()),ae.length+ee<E?(ne+=ae,ee+=ae.length):(ne+=D,oe=Math.ceil(W+G*K)+O(Z[G].toString())+ae,ne+=oe,ee=oe.length)),G++;return 0<Q&&(ne+=S((Q+1).toString())),ne+=D+Math.ceil(W+G*K)+O(Z[G].toString()),ne},M=function(Z,W,K){var Q=0,G=0,te='',ne='',ae='',oe=Array(Z.length-1),ee;for(ee=0;ee<oe.length;ee++)oe[ee]=Z[ee+1]-Z[ee];Q=0;for(var se=oe.length;Q<se;)0==G?(ne=Math.ceil(W+Q*K)+O(Z[Q].toString())+$(oe[Q].toString()),te+=ne,G+=ne.length):(ne=$(oe[Q].toString()),ne.length+G<E?(te+=ne,G+=ne.length):(te+=D,ae=Math.ceil(W+Q*K)+O(Z[Q].toString())+ne,te+=ae,G=ae.length)),Q++;return te+=D+Math.ceil(W+Q*K)+O(Z[Q].toString()),te},O=function(Z){var W='';return'-'==Z.charAt(0)?(W+=C[2][+Z.charAt(1)],2<Z.length&&(W+=Z.substring(2))):(W+=C[1][+Z.charAt(0)],1<Z.length&&(W+=Z.substring(1))),W},$=function(Z){var W='';return'-'==Z.charAt(0)?(W+=C[4][+Z.charAt(1)],2<Z.length&&(W+=Z.substring(2))):(W+=C[3][+Z.charAt(0)],1<Z.length&&(W+=Z.substring(1))),W};_.exports={encode:function(Z,W,K,Q){return'FIX'==Q?I(Z,W,K):'SQZ'==Q?P(Z,W,K):'DIF'==Q?M(Z,W,K):'DIFDUP'==Q?F(Z,W,K):'CSV'==Q?R(Z,W,K):'PAC'==Q?T(Z,W,K):M(Z,W,K)},FIXencod:I,CSVencod:R,PACencod:T,SQZencod:P,DIFDUPencod:F,DIFencod:M}},function(_){'use strict';var S=Object.prototype.hasOwnProperty,D=Object.prototype.toString,C=function(I){return'function'==typeof Array.isArray?Array.isArray(I):'[object Array]'===D.call(I)},E=function(I){if(!I||'[object Object]'!==D.call(I))return!1;var T=S.call(I,'constructor'),P=I.constructor&&I.constructor.prototype&&S.call(I.constructor.prototype,'isPrototypeOf');if(I.constructor&&!T&&!P)return!1;for(var F in I);return'undefined'==typeof F||S.call(I,F)};_.exports=function R(){var $=arguments[0],Z=1,W=arguments.length,K=!1,I,T,P,F,M,O;for('boolean'==typeof $?(K=$,$=arguments[1]||{},Z=2):('object'!=typeof $&&'function'!=typeof $||null==$)&&($={});Z<W;++Z)if(I=arguments[Z],null!=I)for(T in I)P=$[T],F=I[T],$!==F&&(K&&F&&(E(F)||(M=C(F)))?(M?(M=!1,O=P&&C(P)?P:[]):O=P&&E(P)?P:{},$[T]=R(K,O,F)):'undefined'!=typeof F&&($[T]=F));return $}},function(_,S,D){'use strict';var C=D(1),E=D(15),R=D(46),I=D(9);D(51);var T=D(54),P=D(61);class F extends C{constructor(M){super(M)}static fromJcamp(M,O){O=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},O);var $=I.convert(M,O);return new F($)}static fromBruker(M,O){O=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},O);var $=null;return $=Array.isArray(M)?P.converFolder(M,O):P.convertZip(M,O),$?$.map(function(Z){return new F(Z)}):null}getNucleus(M){return M&&0!=M&&1!=M?'':this.sd.xType}getSolventName(){return(this.sd.info['.SOLVENTNAME']||this.sd.info.$SOLVENT||'').replace('<','').replace('>','')}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}getNMRPeakThreshold(M){return'1H'==M?3:'13C'==M?5:1}addNoise(){}addSpectraDatas(){}autoBaseline(){}fourierTransform(){return T.fourierTransform(this)}postFourierTransform(M){return T.phaseCorrection(0,M)}zeroFilling(M,O){return T.zeroFilling(this,M,O)}haarWhittakerBaselineCorrection(){}whittakerBaselineCorrection(){}brukerFilter(){return T.digitalFilter(this,{brukerFilter:!0})}digitalFilter(M){return T.digitalFilter(this,M)}apodization(M,O){return T.apodization(this,{functionName:M,lineBroadening:O})}echoAntiechoFilter(){}SNVFilter(){}powerFilter(M){var O=this.getMinY();1>M&&0>O&&(this.YShift(-1*O),console.warn('SD.powerFilter: The spectrum had negative values and was automatically shifted before applying the function.'))}logarithmFilter(){var M=this.getMinY();0>=M&&(this.YShift(-1*M+1),console.warn('SD.logarithmFilter: The spectrum had negative values and was automatically shifted before applying the function.'))}correlationFilter(){}phaseCorrection(M,O){return T.phaseCorrection(this,M,O)}automaticPhase(){}autoPeakPicking(M){let O=new R(E(this,M));return M&&M.force&&(this.ranges=O),O}}_.exports=F},function(_,S,D){'use strict';function C(M,O){for(var $=M.length-1;0<=$;$--)Math.abs(M[$].y)<O&&M.splice($,1);return M}function E(M,O){var $=0,W=0,Z;for(Z=0;Z<M.length;Z++)W+=Math.round(M[Z].integralData.value);if(W!==O)for($=O/W,Z=0;Z<M.length;Z++)M[Z].integralData.value*=$}function R(M,O,$,Z,W){var K=O.observeFrequencyX(),Q=[],G={},ee={x:1e5,y:0,width:0},te=null,ne=0,ae,oe,se,le;for(0<O.getX(1)-O.getX(0)?1:-1,se=0;se<M.length;se++){if(Math.abs(M[se].x-ee.x)>W/K)G={nbPeaks:1,units:'PPM',startX:M[se].x-M[se].width,stopX:M[se].x+M[se].width,multiplicity:'',pattern:'',observe:K,nucleus:'1H',integralData:{from:M[se].x-3*M[se].width,to:M[se].x+3*M[se].width},peaks:[]},G.peaks.push({x:M[se].x,intensity:M[se].y,width:M[se].width}),Q.push(G);else{var de=M[se].x+M[se].width;G.stopX=Math.max(G.stopX,de),de=M[se].x-M[se].width,G.startX=Math.min(G.startX,de),G.nbPeaks++,G.peaks.push({x:M[se].x,intensity:M[se].y,width:M[se].width}),G.integralData.from=Math.min(G.integralData.from,M[se].x-3*M[se].width),G.integralData.to=Math.max(G.integralData.to,M[se].x+3*M[se].width)}ee=M[se]}for(se=0;se<Q.length;se++){te=Q[se].peaks;var ue=Q[se].integralData;ae=0,oe=0;for(var le=0;le<te.length;le++)ae+=te[le].x*I(te[le]),oe+=I(te[le]);Q[se].delta1=ae/oe,ue.value=0===Z?oe:O.getArea(ue.from,ue.to),ne+=ue.value}if(0!==$)for(var se=0;se<Q.length;se++){var ue=Q[se].integralData;ue.value*=$/ne}return Q}function I(M){return Math.abs(1.57*(M.intensity*M.width))}const T=D(16),P=D(17),F={nH:99,clean:!0,realTop:!1,thresholdFactor:1,compile:!0,integralFn:0,optimize:!0,idPrefix:'',format:'old',frequencyCluster:16};_.exports=function(M,O){var $=Object.assign({},F,O),G=Math.abs(M.getNoiseLevel())*$.thresholdFactor,ee=Object.assign({},{noiseLevel:G,minMaxRatio:0.01,broadRatio:0.0025,smoothY:!0,nL:4,functionType:'gaussian',broadWidth:0.25,sgOptions:{windowSize:9,polynomial:3}},$.gsdOptions),te=M.getXYData(),Z,W,K,Q;$.from&&$.to&&(te=M.getVector($.from,$.to));var ne=P.gsd(te[0],te[1],ee);ee.broadWidth&&(ne=P.post.joinBroadPeaks(ne,{width:ee.broadWidth})),$.optimize&&(ne=P.post.optimizePeaks(ne,te[0],te[1],ee.nL,ee.functionType)),ne=C(ne,G);var ae=R(ne,M,$.nH,$.integralFn,$.frequencyCluster);if($.clean||!1)for(Z=ae.length-1;0<=Z;Z--)0.5>ae[Z].integralData.value&&ae.splice(Z,1);if($.compile||!1){for(Z=0;Z<ae.length;Z++)if(T.compilePattern(ae[Z]),ae[Z].maskPattern&&'m'!==ae[Z].multiplicity&&''!==ae[Z].multiplicity){K=0,Q=0;var oe=[];for(W=ae[Z].maskPattern.length-1;0<=W;W--)if(Q+=I(ae[Z].peaks[W]),!1===ae[Z].maskPattern[W]){var se=ae[Z].peaks.splice(W,1)[0];oe.push({x:se.x,y:se.intensity,width:se.width}),ae[Z].mask.splice(W,1),ae[Z].mask2.splice(W,1),ae[Z].maskPattern.splice(W,1),ae[Z].nbPeaks--,K+=I(se)}if(0<oe.length){K=K*ae[Z].integralData.value/Q,ae[Z].integralData.value-=K;var le=[];for(W=oe.length-1;0<=W;W--)le.push(oe[W]);let ue=R(le,M,K,$.integralFn,$.frequencyCluster);for(W=0;W<ue.length;W++)ae.push(ue[W])}}E(ae,$.nH)}if(ae.sort(function(ue,he){return he.delta1-ue.delta1}),$.clean||!1)for(Z=ae.length-1;0<=Z;Z--)0.5>ae[Z].integralData.value&&ae.splice(Z,1);for(Z=0;Z<ae.length;Z++)ae[Z].signalID=$.idPrefix&&0<$.idPrefix.length?$.idPrefix+'_'+(Z+1):Z+1+'',ae[Z]._highlight=[ae[Z].signalID];if('new'===$.format){let ue=Array(ae.length);for(Z=0;Z<ae.length;Z++){var de=ae[Z];ue[Z]={from:de.integralData.from,to:de.integralData.to,integral:de.integralData.value,signal:[{nbAtoms:0,diaID:[],multiplicity:de.multiplicity,peak:de.peaks,kind:'',remark:''}],signalID:de.signalID,_highlight:de._highlight},de.nmrJs&&(ue[Z].signal[0].j=de.nmrJs),de.asymmetric&&'m'!==de.multiplicity||(ue[Z].signal[0].delta=de.delta1)}ae=ue}return ae}},function(_){'use strict';function S(W,K){var Q=W.peaksComp,G=Q.length;W.startX=Q[0].x/W.observe-Q[0].width,W.stopX=Q[G-1].x/W.observe+Q[G-1].width,W.integralData.from=Q[0].x/W.observe-3*Q[0].width,W.integralData.to=Q[G-1].x/W.observe+3*Q[G-1].width,W.maskPattern=W.mask2,W.multiplicity=D(W,K),W.pattern=W.multiplicity}function D(W,K){var G='',ee=1,Q,te=[];if(K&&0<K.length){for(K.sort(function(ne,ae){return ne-ae}),Q=0;Q<K.length-1;Q++)0.05>Math.abs(K[Q]-K[Q+1])?ee++:(te.push({coupling:Math.abs(K[Q]),multiplicity:$[ee]}),G+=$[ee],ee=1);te.push({coupling:Math.abs(K[Q]),multiplicity:$[ee]}),G+=$[ee],W.nmrJs=te}else G='s',16<Math.abs(W.startX-W.stopX)*W.observe&&(G='br s');return G}function C(W){var K=Math.pow(2,W.length),Q,G,ee=[{x:0,intensity:K}];for(Q=0;Q<W.length;Q++)for(G=ee.length-1;0<=G;G--)ee.push({x:ee[G].x+W[Q]/2,intensity:ee[G].intensity/2}),ee[G].x=ee[G].x-W[Q]/2,ee[G].intensity=ee[G].intensity/2;for(ee.sort(function(ne,ae){return ne.x-ae.x}),G=ee.length-2;0<=G;G--)0.1>Math.abs(ee[G].x-ee[G+1].x)&&(ee[G].intensity+=ee[G+1].intensity,ee.splice(G+1,1));return ee}function E(W,K){for(var Q=Math.ceil(W.values.length/2),G=W.values.length,ee=0,te,ne;ee!=K;){for(ne=!1;!ne;)if(ne=!0,W.currentIndex[W.active]++,W.currentIndex[W.active]>=W.values[W.active].length){if(W.active+1==Q)return null;W.currentIndex[W.active]=0,ne=!1,W.active++}else W.active=0;for(ee=0,te=0;te<Q;te++)ee+=2*W.values[te][W.currentIndex[te]];0!=W.values.length%2&&(ee-=W.values[Q-1][W.currentIndex[Q-1]])}if(ee==K){var ae=Array(G);for(te=0;te<Q;te++)ae[te]=W.values[te][W.currentIndex[te]],ae[G-te-1]=W.values[te][W.currentIndex[te]];return ae}return null}function R(W){var K=Array(W.length),Q=Array(W.length),G,ee;K[0]=[1],K[W.length-1]=[1],Q[0]=-1,Q[W.length-1]=0;for(var te=1;te<W.length-1;te++){G=Math.round(0.85*W[te].intensity),ee=Math.round(1.15*W[te].intensity),K[te]=[];for(var ne=G;ne<=ee;ne++)K[te].push(ne);Q[te]=0}return{values:K,currentIndex:Q,active:0}}function I(W,K,Q){var G=T(W,K,Q),ee=W.peaksComp,te=W.mask,ne=W.delta1;W.delta1=(W.peaks[0].x+W.peaks[W.peaks.length-1].x)/2;var ae=T(W,K,Q);return W.peaksComp.length>ee.length?ae:(W.delta1=ne,W.peaksComp=ee,W.mask=te,G)}function T(W,K,Q){var se=Array(W.peaks.length),G,ee,te,ne,ae,oe;for(oe=0;oe<se.length;oe++)se[oe]={x:W.peaks[oe].x*W.observe,intensity:W.peaks[oe].intensity,width:W.peaks[oe].width};for(oe=se.length-2;0<=oe;oe--)0.25>Math.abs(se[oe].x-se[oe+1].x)&&(se[oe].x=se[oe].x*se[oe].intensity+se[oe+1].x*se[oe+1].intensity,se[oe].intensity=se[oe].intensity+se[oe+1].intensity,se[oe].x/=se[oe].intensity,se[oe].intensity/=2,se[oe].width+=se[oe+1].width,se.splice(oe+1,1));W.peaksComp=se;var le=se.length,de=Array(le);W.mask=de;var ue=0,he=se.length-1,pe=W.delta1*W.observe,me=[(se[0].x+se[le-1].x)/2,1];K=P(Math.abs(pe-me[0]));var ce=0;for(var ge=0;ge<le;ge++)de[ge]=!0,ce+=W.peaks[ge].intensity;for(;ue<=he;){if(de[ue]=!0,de[he]=!0,ue==he)2<le&&Math.abs(se[ue].x-pe)>K&&(de[ue]=!1);else if(G=Math.max(se[ue].intensity,se[he].intensity),ee=Math.min(se[ue].intensity,se[he].intensity),ne=G/ee,1.5<ne)se[ue].intensity==ee?(de[ue]=!1,he++):(de[he]=!1,ue--);else{var fe=Math.abs(se[ue].x-pe),be=Math.abs(se[he].x-pe);Math.abs(fe-be)<K?(te=Math.min(se[ue].intensity,se[he].intensity),ae=Math.min(se[ue].width,se[he].width),se[ue].intensity=se[he].intensity=te,se[ue].width=se[he].width=ae,me=[me[0]+(se[he].x+se[ue].x)/2,me[1]+1]):Math.max(fe,be)==be?(de[he]=!1,ue--):(de[ue]=!1,he++)}if(ue++,he--,1==Q&&(pe=M(se,de),isNaN(pe)))return 0;K=P(Math.abs(pe-me[0]/me[1]))}for(ge=le-1;0<=ge;ge--)!1===de[ge]&&se.splice(ge,1);if(pe=M(se),isNaN(pe))return 0;W.delta1=pe/W.observe;var ye=0,xe=0;if(1<se.length){for(ge=Math.ceil(se.length/2)-1;0<=ge;ge--)ye+=(3+Math.min(Math.abs(se[ge].x-pe),Math.abs(se[se.length-1-ge].x-pe)))/(3+Math.max(Math.abs(se[ge].x-pe),Math.abs(se[se.length-1-ge].x-pe)))*se[ge].intensity,xe+=se[ge].intensity;ye/=xe}else 1==se.length&&(ye=1);var _e=0;for(ge=0;ge<se.length;ge++)_e+=se[ge].intensity;if(ye-=0.12*((ce-_e)/ce),0.8<ye&&0.97>ye&&2>Q)return T(W,1,2);if(1<se.length){var xe=0,ke;for(ge=Math.ceil(se.length/2)-1;0<=ge;ge--)ke=(se[ge].x-se[se.length-1-ge].x)/2,se[ge].x=pe+ke,se[se.length-1-ge].x=pe-ke}return ye}function P(W){var K=2.5*W;return 0.75>K&&(K=0.75),3<K&&(K=3),K}function F(W,K){var Q=JSON.parse(JSON.stringify(W.peaksComp)),G=0,ee=0,te;for(te=0;te<Q.length;te++)G+=Q[te].intensity;G=Math.pow(2,K)/G,W.mask2=JSON.parse(JSON.stringify(W.mask));var ne=W.mask2.length-1;for(te=Q.length-1;0<=te;te--){for(Q[te].intensity*=G;0<=ne&&!1===W.mask2[ne];)ne--;0.75>Q[te].intensity?(Q.splice(te,1),W.mask2[ne]=!1):ee+=Q[te].intensity,ne--}for(ee=Math.pow(2,K)/ee,te=Q.length-1;0<=te;te--)Q[te].intensity*=ee;return Q}function M(W,K){var Q=0,G=0,ee,te;if(K)for(ee=0;ee<W.length;ee++)!0===K[ee]&&(te=O(W[ee]),Q+=te,G+=te*W[ee].x);else for(ee=0;ee<W.length;ee++)te=O(W[ee]),Q+=te,G+=te*W[ee].x;return G/Q}function O(W){return Math.abs(1.57*(W.intensity*W.width))}const $=['s','d','t','q','quint','h','sept','o','n'],Z=!1;_.exports={compilePattern:function(W){if(W.multiplicity='m',W.symRank=I(W,2.5,1),W.asymmetric=!0,0.95<=W.symRank&&32>W.peaksComp.length){W.asymmetric=!1;var ee=1,ne=[],K,Q,G,te,ae,oe;for(G=0;9>G;G++){var se=F(W,G),le=!1;if(1===se.length&&0===G)le=!0;else if(1>=se.length)continue;var de=R(se);ae=Math.pow(2,G);for(var ue=null;!le&&null!==(ue=E(de,ae));){var he=Array(ue.length);for(ee=1,K=0;K<ue.length;K++)for(he[K]=Array(ue[K]),Q=0;Q<ue[K];Q++)he[K][Q]=ee++;ne=[],Q=1,ne.push(se[1].x-se[0].x),te=se[0].x,he[0].splice(0,1),he[1].splice(0,1),ee=1;var pe=2;for(oe=Math.pow(2,G)-1;ne.length<G&&pe<oe&&ee<se.length;){for(Q++;ee<se.length&&0===he[ee].length;)ee++;if(ee<se.length){ne.push(se[ee].x-se[0].x),he[ee].splice(0,1),pe++;for(var me=2;me<=Q;me++){var ce=0;for(K=0;K<me;K++)ce+=ne[K];for(K=1;K<he.length;K++)if(0.25>Math.abs(se[K].x-(te+ce))){he[K].splice(0,1),pe++;break}}}}var ge=C(ne);for(le=!0,K=0;K<ge.length;K++)ge[K].intensity!==ue[K]&&(le=!1)}le&&S(W,ne)}}for(K=0;K<W.peaksComp.length;K++)W.peaksComp[K].x/=W.observe}}},function(_,S,D){'use strict';_.exports.post=D(18),_.exports.gsd=D(41)},function(_,S,D){'use strict';function C(I,T,P,F,M){var O=P.length,$=[],Z=[],W=Math.sign(P[1]-P[0]);-1===W&&(M[0]=P.length-1);for(var K=Math.abs(T-I)/2,Q=(I+T)/2,G=!1,ee=M[0];!G&&ee<O&&0<=ee;)Math.abs(P[ee]-Q)<=K?($.push(P[ee]),Z.push(F[ee]),ee+=W):1===Math.sign(Q-P[ee])?ee+=W:G=!0;return M[0]=ee,[$,Z]}function E(I,T){var P=[],F=[],M,O,$=[I[0].x,T*I[0].width],Z,W;for(M=0;M<I.length;M++)Math.abs(I[M].x-$[0])<T*I[M].width+$[1]?(P.push(I[M]),Z=$[0]+$[1],I[M].x+T*I[M].width>Z&&(Z=I[M].x+T*I[M].width),W=$[0]-$[1],I[M].x-T*I[M].width<W&&(W=I[M].x-T*I[M].width),$=[(Z+W)/2,Math.abs(Z-W)/2]):(F.push({limits:$,group:P}),P=[I[M]],$=[I[M].x,T*I[M].width]);for(F.push({limits:$,group:P}),M=F.length-2;0<=M;M--)if(Math.abs(F[M].limits[0]-F[M+1].limits[0])<(F[M].limits[1]+F[M+1].limits[1])/2){for(O=0;O<F[M+1].group.length;O++)F[M].group.push(F[M+1].group[O]);Z=F[M].limits[0]+F[M].limits[1],F[M+1].limits[0]+F[M+1].limits[1]>Z&&(Z=F[M+1].limits[0]+F[M+1].limits[1]),W=F[M].limits[0]-F[M].limits[1],F[M+1].limits[0]-F[M+1].limits[1]<W&&(W=F[M+1].limits[0]-F[M+1].limits[1]),F[M].limits=[(Z+W)/2,Math.abs(Z-W)/2],F.splice(M+1,1)}return F}var R=D(19);_.exports={optimizePeaks:function(T,P,F,M,O){var W=[0],$,Z,K=E(T,M),Q=[],G=1;'gaussian'===O&&(G=1.17741);var ee,te,ne;for($=0;$<K.length;$++){var ae=K[$].group;if(1<ae.length){if(ee=C(K[$].limits[0]-K[$].limits[1],K[$].limits[0]+K[$].limits[1],P,F,W),5<ee[0].length){te=ae[0].width/1e3,ne=[3,100,te,te,te,10*te,10*te,11,9,1];var oe=[];for('gaussian'===O?oe=R.optimizeGaussianSum(ee,ae,ne):'lorentzian'==O&&(oe=R.optimizeLorentzianSum(ee,ae,ne)),Z=0;Z<oe.length;Z++)Q.push({x:oe[Z][0][0],y:oe[Z][1][0],width:oe[Z][2][0]*G})}}else if(ae=ae[0],ee=C(ae.x-M*ae.width,ae.x+M*ae.width,P,F,W),5<ee[0].length){te=ae.width/1e3,ne=[3,100,te,te,te,10*te,10*te,11,9,1];var se=[];'gaussian'===O?se=R.optimizeSingleGaussian([ee[0],ee[1]],ae,ne):'lorentzian'==O&&(se=R.optimizeSingleLorentzian([ee[0],ee[1]],ae,ne)),Q.push({x:se[0][0],y:se[1][0],width:se[2][0]*G})}}return Q},joinBroadPeaks:function(T,P){var F=P.width,M=[],O=0,$=0,Z=1;for(let G=T.length-1;0<=G;G--)T[G].soft&&M.push(T.splice(G,1)[0]);M.push({x:Number.MAX_VALUE});var W=[[M[0].x,M[0].y]],K=[0];for(let G=1;G<M.length;G++)if(Math.abs(M[G-1].x-M[G].x)<F)W.push([M[G].x,M[G].y]),M[G].y>O&&(O=M[G].y,$=G),K.push(G),Z++;else{if(2<Z){var Q=R.optimizeSingleLorentzian(W,{x:M[$].x,y:O,width:Math.abs(W[0][0]-W[W.length-1][0])});T.push({x:Q[0][0],y:Q[1][0],width:Q[2][0],soft:!1})}else K.map(function(ee){T.push(M[ee])});W=[[M[G].x,M[G].y]],K=[G],O=M[G].y,$=G,Z=1}return T.sort(function(G,ee){return G.x-ee.x}),T}}},function(_,S,D){'use strict';function C($,Z){var W=Z.length/3,te=$.rows,K,Q,G,ee,ne=O.zeros($.length,1);for(Q=0;Q<W;Q++)for(ee=Math.pow(Z[Q+2*W][0]/2,2),K=Z[Q+W][0]*ee,G=0;G<te;G++)ne[G][0]+=K/(Math.pow($[G][0]-Z[Q][0],2)+ee);return ne}function E($,Z){var W=Z[1][0]*Math.pow(Z[2][0]/2,2),K=$.rows,Q=new O($.rows,$.columns);for(var G=0;G<K;G++)Q[G][0]=W/(Math.pow($[G][0]-Z[0][0],2)+Math.pow(Z[2][0]/2,2));return Q}function R($,Z){var W=Z[2][0]*Z[2][0]/2,K=$.rows,Q=new O($.rows,$.columns);for(var G=0;G<K;G++)Q[G][0]=Z[1][0]*Math.exp(-($[G][0]-Z[0][0])*($[G][0]-Z[0][0])/W);return Q}function I($,Z,W){W=W||{};var K=P($,W.percentage||0);if(null===K||3>K[0].rows)return null;var Q=K[0],G=K[1],ee=K[2],te=Q.rows,ne=[te/Math.sqrt(G.dot(G))],W=Object.create(W.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),ae=Math.abs(Q[0][0]-Q[1][0]),oe=new O([[-ae/1e4],[-0.001],[-ae/1e4]]),se=new O([[Z.x],[1],[Z.width]]),le=new O([[Z.x-ae],[0.75],[Z.width/4]]),de=new O([[Z.x+ae],[1.25],[4*Z.width]]),ue=F.optimize(E,se,Q,G,ne,oe,le,de,[],W);return ue=ue.p,[ue[0],[ue[1][0]*ee],ue[2]]}function T($,Z,W){W=W||{};var K=P($,W.percentage||0);if(null===K||3>K[0].rows)return null;var Q=K[0],G=K[1],ee=K[2],te=Q.rows,ne=[te/Math.sqrt(G.dot(G))],W=Object.create(W.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),ae=Math.abs(Q[0][0]-Q[1][0]),oe=new O([[-ae/1e4],[-0.001],[-ae/1e4]]),oe=new O([[-Math.abs(Q[0][0]-Q[1][0])/1e3],[-0.001],[-Z.width/1e3]]),se=new O([[Z.x],[1],[Z.width]]),le=new O([[Z.x-ae],[0.75],[Z.width/4]]),de=new O([[Z.x+ae],[1.25],[4*Z.width]]),ue=F.optimize(R,se,Q,G,ne,oe,le,de,[],W);return ue=ue.p,[ue[0],[ue[1][0]*ee],ue[2]]}function P($,Z){var W=$.length,K=null,Q=null,G,ee,te=0,ne;if(2==W){var ae=$[0].length;if(K=Array(ae),Q=Array(ae),G=$[0],ee=$[1],'number'==typeof G[0])for(ne=0;ne<ae;ne++)K[ne]=G[ne],Q[ne]=ee[ne],ee[ne]>te&&(te=ee[ne]);else if('object'==typeof G[0])for(ne=0;ne<ae;ne++)K[ne]=G[ne][0],Q[ne]=ee[ne][0],ee[ne][0]>te&&(te=ee[ne][0])}else{var ae=W;for(K=Array(ae),Q=Array(ae),ne=0;ne<ae;ne++)K[ne]=$[ne][0],Q[ne]=$[ne][1],Q[ne]>te&&(te=Q[ne])}for(ne=0;ne<ae;ne++)Q[ne]/=te;if(Z)for(ne=ae-1;0<=ne;ne--)Q[ne]<Z&&(Q.splice(ne,1),K.splice(ne,1));return 0<K.length?[new O([K]).transpose(),new O([Q]).transpose(),te]:null}var F=D(20),M=F.Matrix.algebra,O=D(32);_.exports.optimizeSingleLorentzian=I,_.exports.optimizeLorentzianSum=function(Z,W,K){var Q=P(Z);if(null===Q||3>Q[0].rows)return null;var G=Q[0],ee=Q[1],te=Q[2],ne=G.rows,ae,oe=[ne/M.sqrt(ee.dot(ee))],K=Object.create(K||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),se=W.length,le=new O(3*se,1),de=new O(3*se,1),ue=new O(3*se,1),he=new O(3*se,1),pe=Math.abs(G[0][0]-G[1][0]);for(ae=0;ae<se;ae++)le[ae][0]=W[ae].x,le[ae+se][0]=1,le[ae+2*se][0]=W[ae].width,de[ae][0]=W[ae].x-pe,de[ae+se][0]=0,de[ae+2*se][0]=W[ae].width/4,ue[ae][0]=W[ae].x+pe,ue[ae+se][0]=1.5,ue[ae+2*se][0]=4*W[ae].width,he[ae][0]=-pe/1e3,he[ae+se][0]=-1e-3,he[ae+2*se][0]=-pe/1e3;var he=-Math.abs(G[0][0]-G[1][0])/1e4,me=F.optimize(C,le,G,ee,oe,he,de,ue,[],K);me=me.p;var ce=Array(se);for(ae=0;ae<se;ae++)ce[ae]=[me[ae],[me[ae+se][0]*te],me[ae+2*se]];return ce},_.exports.optimizeSingleGaussian=T,_.exports.optimizeGaussianSum=function(Z,W,K){var Q=P(Z);if(null===Q||3>Q[0].rows)return null;var G=Q[0],ee=Q[1],te=Q[2],ne=G.rows,ae,oe=new O(ne,1),se=ne/M.sqrt(ee.dot(ee));for(ae=0;ae<ne;ae++)oe[ae][0]=se;var K=Object.create(K||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,2]),le=W.length,de=new O(3*le,1),ue=new O(3*le,1),he=new O(3*le,1),pe=new O(3*le,1),me=Math.abs(G[0][0]-G[1][0]);for(ae=0;ae<le;ae++)de[ae][0]=W[ae].x,de[ae+le][0]=W[ae].y/te,de[ae+2*le][0]=W[ae].width,ue[ae][0]=W[ae].x-me,ue[ae+le][0]=0.8*W[ae].y/te,ue[ae+2*le][0]=W[ae].width/2,he[ae][0]=W[ae].x+me,he[ae+le][0]=1.2*W[ae].y/te,he[ae+2*le][0]=2*W[ae].width,pe[ae][0]=-me/1e3,pe[ae+le][0]=-1e-3,pe[ae+2*le][0]=-me/1e3;var ce=F.optimize(C,de,G,ee,oe,pe,ue,he,[],K);ce=ce.p;var ge=Array(le);for(ae=0;ae<le;ae++)ge[ae]=[ce[ae],[ce[ae+le][0]*te],ce[ae+2*le]];return ge},_.exports.singleGaussian=R,_.exports.singleLorentzian=E,_.exports.optimizeGaussianTrain=function(Z,W,K){var Q=P(Z);if(null===Q||3>Q[0].rows)return null;var G=Q[0],ee=Q[1],te=Q[2],ne=0,ae=G.length,oe,se,le,te,de=[],ue;for(var he=0;he<W.length;he++){for(oe=W[he].x-4*W[he].width;G[ne++]<oe&&ne<ae;);for(oe=W[he].x+4*W[he].width,se=[],le=[];G[ne]<=oe&&ne<ae;)se.push(G[ne][0]),le.push(ee[ne][0]*te),ne++;ue=T([se,le],W[he],K),ue?de.push({x:ue[0][0],y:ue[1][0],width:ue[2][0],opt:!0}):de.push({x:W[he].x,y:W[he].y,width:W[he].width,opt:!1})}return de},_.exports.optimizeLorentzianTrain=function(Z,W,K){var Q=P(Z);if(null===Q||3>Q[0].rows)return null;var G=Q[0],ee=Q[1],te=Q[2],ne=0,ae=G.length,oe,se,le,te,de=[],ue;for(var he=0;he<W.length;he++){for(oe=W[he].x-4*W[he].width;G[ne++]<oe&&ne<ae;);for(oe=W[he].x+4*W[he].width,se=[],le=[];G[ne]<=oe&&ne<ae;)se.push(G[ne][0]),le.push(ee[ne][0]*te),ne++;ue=I([se,le],W[he],K),ue?de.push({x:ue[0][0],y:ue[1][0],width:ue[2][0],opt:!0}):de.push({x:W[he].x,y:W[he].y,width:W[he].width,opt:!1})}return de}},function(_,S,D){'use strict';_.exports=D(21),_.exports.Matrix=D(22),_.exports.Matrix.algebra=D(31)},function(_,S,D){var C=D(22),E=D(31);_.exports={optimize:function(R,I,T,P,F,M,O,$,Z,W){var K=0,Q=0;if('object'!=typeof I[0])for(var G=0;G<I.length;G++)I[G]=[I[G]];var te=-50,ne=I.length,ae=P.length,oe=C.zeros(ne,1),se=C.zeros(ae,1),le=0.01/te,de=0.01/te,ue=C.zeros(ae,ne),G,ee;if(T.length!=P.length){console.log('lm.m error: the length of t must equal the length of y_dat'),length_t=T.length,length_y_dat=P.length;var le=0;return}F=F||Math.sqrt((ae-ne+1)/E.multiply(E.transpose(P),P)),M=M||1e-3,O=O||E.multiply(Math.abs(I),-100),$=$||E.multiply(Math.abs(I),100),Z=Z||1,W=W||[3,10*ne,1e-3,1e-3,1e-3,0.01,0.01,11,9,1];var he=W[0],pe=W[1],me=W[2];W[3],W[4];var ce=W[5],ge=W[6],fe=W[7],be=W[8],ye=W[9];if(!M.length||1==M.length){var xe=Array(ne);for(var G=0;G<ne;G++)xe[G]=[M];M=xe}var _e=[];for(G=0;G<M.length;G++)0!=M[G][0]&&_e.push(G);var ke=_e.length,we=!1,je=null;if(!F.length||F.length<ae){var Se=E.multiply(C.ones(ae,1),F[0]);je=E.dotMultiply(Se,Se)}else je=E.dotMultiply(F,F);var ve=this.lm_matx(R,T,oe,se,1,ue,I,P,je,M,Z),De=ve.JtWJ,Ce=ve.JtWdy,le=ve.Chi_sq,Ae=ve.y_hat,ue=ve.J;Math.max(Math.abs(Ce))<me&&(console.log(' *** Your Initial Guess is Extremely Close to Optimal ***'),console.log(' *** epsilon_1 = ',me),we=!0),1===ye?lambda=ge:(lambda=ge*Math.max(E.diag(De)),nu=2),de=le;for(var Ee=null;!we&&Q<=pe;){Q=Q+1,Ee=1===ye?E.solve(E.add(De,E.multiply(E.diag(E.diag(De)),lambda)),Ce):E.solve(E.add(De,E.multiply(C.eye(ne),lambda)),Ce);var Re=Array(_e.length);for(ee=0;ee<_e.length;ee++)Re[ee]=Ee[_e[ee]];var Ie=E.add(I,Re);for(ee=0;ee<Ie.length;ee++)Ie[ee][0]=Math.min(Math.max(O[ee][0],Ie[ee][0]),$[ee][0]);var Te=E.subtract(P,R(T,Ie,Z)),Pe=E.multiply(E.transpose(Te),E.dotMultiply(Te,je));if(2==ye){var Fe=E.multiply(E.transpose(Ce),Ee),ze=E.multiply(Fe,E.inv(E.add(E.multiply(E.subtract(Pe-le),1/2)),E.multiply(Fe,2)));Ee=E.multiply(ze,Ee);for(var ee=0;ee<_e.length;ee++)Re[ee]=Ee[_e[ee]];Ie=E.add(I,Re),Ie=E.min(E.max(O,Ie),$),Te=E.subtract(P,R(T,Ie,Z)),Pe=E.multiply(E.transpose(Te),mat.dotMultiply(Te,je))}var Me=(le-Pe)/E.multiply(E.multiply(E.transpose(Ee),2),E.add(E.multiply(lambda,Ee),Ce));Me>ce?(dX2=le-de,de=le,oe=I,se=Ae,I=Ie,ve=this.lm_matx(R,T,oe,se,dX2,ue,I,P,je,M,Z),De=ve.JtWJ,Ce=ve.JtWdy,le=ve.Chi_sq,Ae=ve.y_hat,ue=ve.J,1===ye?lambda=Math.max(lambda/be,1e-7):2===ye?lambda=Math.max(lambda/(1+ze),1e-7):3===ye?(lambda=E.multiply(Math.max(1/3,3^1-(2*Me-1)),lambda),nu=2):void 0):(le=de,0==Q%(2*ne)&&(ve=this.lm_matx(R,T,oe,se,-1,ue,I,P,je,M,Z),De=ve.JtWJ,Ce=ve.JtWdy,dX2=ve.Chi_sq,Ae=ve.y_hat,ue=ve.J),1===ye?lambda=Math.min(lambda*fe,1e7):2===ye?lambda=lambda+Math.abs((Pe-le)/2/ze):3===ye?(lambda=lambda*nu,nu=2*nu):void 0)}return je=E.multiply(E.multiply(E.transpose(Te),Te),C.ones(ae,1)),je.apply(function(Ye,Xe){je[Ye][Xe]=(ae-ke+1)/je[Ye][Xe]}),ve=this.lm_matx(R,T,oe,se,-1,ue,I,P,je,M,Z),De=ve.JtWJ,Ce=ve.JtWdy,le=ve.Chi_sq,Ae=ve.y_hat,ue=ve.J,{p:I,X2:le}},lm_FD_J:function(R,I,T,P,F,M){var O=P.length,$=T.length;F=F||E.multiply(C.ones($,1),1e-3);var Z=T.clone(),W=new C(O,$),K=Array($);for(var Q=0;Q<$;Q++){if(K[Q]=F[Q]*(1+Math.abs(T[Q][0])),T[Q]=[Z[Q][0]+K[Q]],0!=K[Q])if(y1=R(I,T,M),0>F[Q][0]){var G=E.dotDivide(E.subtract(y1,P),K[Q]);for(var ee=0;ee<O;ee++)W[ee][Q]=G[ee][0]}else{T[Q][0]=Z[Q][0]-K[Q];var G=E.dotDivide(E.subtract(y1,R(I,T,M)),2*K[Q]);for(var ee=0;ee<O;ee++)W[ee][Q]=G[ee][0]}T[Q]=Z[Q]}return W},lm_Broyden_J:function(R,I,T,P,F){var M=E.subtract(P,R),O=E.transpose(M);return O.div(E.multiply(O,M)),T=E.add(T,E.multiply(E.subtract(F,E.add(I,E.multiply(T,M))),O)),T},lm_matx:function(R,I,T,P,F,M,O,$,Z,W,K,Q){$.length;var G=O.length;W=W||1e-3;var ee=R(I,O,K);M=0==Q%(2*G)||0<F?this.lm_FD_J(R,I,O,ee,W,K):this.lm_Broyden_J(T,P,M,O,ee);var te=E.subtract($,ee),ne=E.multiply(E.transpose(te),E.dotMultiply(te,Z)),ae=E.transpose(M),oe=E.multiply(ae,E.dotMultiply(M,E.multiply(Z,C.ones(1,G)))),se=E.multiply(ae,E.dotMultiply(Z,te));return{JtWJ:oe,JtWdy:se,Chi_sq:ne,y_hat:ee,J:M}}}},function(_,S,D){'use strict';_.exports=D(23),_.exports.Decompositions=_.exports.DC=D(24)},function(_){'use strict';function S(R){for(var I=0,T=R.length,P=Array(T);I<T;I++)P[I]=R[I];return P}function D(R,I){var T=0,P,F;if(Array.isArray(R)){if(F=I,P=F?S(R):R,R=P.length,I=P[0].length,'undefined'==typeof I)throw new TypeError('Data must be a 2D array');if(0<R&&0<I){for(;T<R;T++)if(P[T].length!==I)throw new RangeError('Inconsistent array dimensions');else F&&(P[T]=S(P[T]));}else throw new RangeError('Invalid dimensions: '+R+'x'+I)}else if('number'!=typeof R)throw new TypeError('Invalid arguments');else if(0<R&&0<I)for(P=Array(R);T<R;T++)P[T]=Array(I);else throw new RangeError('Invalid dimensions: '+R+'x'+I);return Object.defineProperty(P,'rows',{writable:!0,value:R}),Object.defineProperty(P,'columns',{writable:!0,value:I}),P.__proto__=D.prototype,P}var C=Array.prototype.splice,E=Array.prototype.concat;D.from1DArray=function(I,T,P){var O=0,F,M;if(F=I*T,F!==P.length)throw new RangeError('Data length does not match given dimensions');for(M=Array(I);O<I;O++)M[O]=P.slice(O*T,(O+1)*T);return new D(M)},D.rowVector=function(I){return new D([I])},D.columnVector=function(I){var T=I.length,P=Array(T);for(var F=0;F<T;F++)P[F]=[I[F]];return new D(P)},D.empty=function(I,T){return new D(I,T)},D.zeros=function(I,T){return D.empty(I,T).fill(0)},D.ones=function(I,T){return D.empty(I,T).fill(1)},D.rand=function(I,T){var P=D.empty(I,T);for(var F=0,M=P.rows;F<M;F++)for(var O=0,$=P.columns;O<$;O++)P[F][O]=Math.random();return P},D.eye=function(I){var T=D.zeros(I,I),P=T.rows;for(var F=0;F<P;F++)T[F][F]=1;return T},D.diag=function(I){var T=I.length,P=D.zeros(T,T);for(var F=0;F<T;F++)P[F][F]=I[F];return P},D.indices=function(I,T){var P=Array(T-I);for(var F=0;F<P.length;F++)P[F]=I++;return P},D.stack=function(I){var T,P,F;if(D.isMatrix(I)){var M=0,O=0;for(T=0;T<arguments.length;T++)M+=arguments[T].rows,arguments[T].columns>O&&(O=arguments[T].columns);var $=D.zeros(M,O),Z=0;for(T=0;T<arguments.length;T++){var W=arguments[T];for(P=0;P<W.rows;P++){for(F=0;F<W.columns;F++)$[Z][F]=W[P][F];Z++}}return $}if(Array.isArray(I)){var K=D.empty(arguments.length,I.length);for(T=0;T<arguments.length;T++)K.setRow(T,arguments[T]);return K}},D.expand=function(I,T){var P=[];for(var F=0;F<T.length;F++)for(var M=0;M<T[F];M++)P.push(I[F]);return new D(P)},D.checkMatrix=function(I){if(!I)throw new TypeError('Argument has to be a matrix');return'Matrix'!==I.klass&&(I=new D(I)),I},D.isMatrix=function(I){return!!I&&'Matrix'===I.klass},Object.defineProperty(D.prototype,'klass',{get:function(){return'Matrix'}}),Object.defineProperty(D.prototype,'size',{get:function(){return this.rows*this.columns}}),D.prototype.checkRowIndex=function(I){if(0>I||I>this.rows-1)throw new RangeError('Row index out of range.')},D.prototype.checkColumnIndex=function(I){if(0>I||I>this.columns-1)throw new RangeError('Column index out of range.')},D.prototype.checkDimensions=function(I){if(this.rows!==I.rows||this.columns!==I.columns)throw new RangeError('Matrices dimensions must be equal.')},D.prototype.apply=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)I.call(this,F,M);return this},D.prototype.clone=function(){return new D(this.to2DArray())},D.prototype.to1DArray=function(){return E.apply([],this)},D.prototype.to2DArray=function(){var I=this.rows,T=Array(I);for(var P=0;P<I;P++)T[P]=S(this[P]);return T},D.prototype.isRowVector=function(){return 1===this.rows},D.prototype.isColumnVector=function(){return 1===this.columns},D.prototype.isVector=function(){return 1===this.rows||1===this.columns},D.prototype.isSquare=function(){return this.rows===this.columns},D.prototype.isSymmetric=function(){if(this.isSquare()){var I=this.rows;for(var T=0;T<I;T++)for(var P=0;P<=T;P++)if(this[T][P]!==this[P][T])return!1;return!0}return!1},D.prototype.set=function(I,T,P){return this[I][T]=P,this},D.prototype.get=function(I,T){return this[I][T]},D.prototype.fill=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]=I;return this},D.prototype.neg=function(){return this.mulS(-1)},D.prototype.add=function(I){return'number'==typeof I?this.addS(I):(I=D.checkMatrix(I),this.addM(I))},D.prototype.addS=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]+=I;return this},D.prototype.addM=function(I){this.checkDimensions(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]+=I[F][M];return this},D.prototype.sub=function(I){return'number'==typeof I?this.subS(I):(I=D.checkMatrix(I),this.subM(I))},D.prototype.subS=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]-=I;return this},D.prototype.subM=function(I){this.checkDimensions(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]-=I[F][M];return this},D.prototype.mul=function(I){return'number'==typeof I?this.mulS(I):(I=D.checkMatrix(I),this.mulM(I))},D.prototype.mulS=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]*=I;return this},D.prototype.mulM=function(I){this.checkDimensions(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]*=I[F][M];return this},D.prototype.div=function(I){return'number'==typeof I?this.divS(I):(I=D.checkMatrix(I),this.divM(I))},D.prototype.divS=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]/=I;return this},D.prototype.divM=function(I){this.checkDimensions(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]/=I[F][M];return this},D.prototype.getRow=function(I){return this.checkRowIndex(I),S(this[I])},D.prototype.getRowVector=function(I){return D.rowVector(this.getRow(I))},D.prototype.setRow=function(I,T){if(this.checkRowIndex(I),D.isMatrix(T)&&(T=T.to1DArray()),T.length!==this.columns)throw new RangeError('Invalid row size');return this[I]=S(T),this},D.prototype.removeRow=function(I){if(this.checkRowIndex(I),1===this.rows)throw new RangeError('A matrix cannot have less than one row');return C.call(this,I,1),this.rows-=1,this},D.prototype.addRow=function(I,T){if('undefined'==typeof T&&(T=I,I=this.rows),0>I||I>this.rows)throw new RangeError('Row index out of range.');if(D.isMatrix(T)&&(T=T.to1DArray()),T.length!==this.columns)throw new RangeError('Invalid row size');return C.call(this,I,0,S(T)),this.rows+=1,this},D.prototype.swapRows=function(I,T){this.checkRowIndex(I),this.checkRowIndex(T);var P=this[I];return this[I]=this[T],this[T]=P,this},D.prototype.getColumn=function(I){this.checkColumnIndex(I);var T=this.rows,P=Array(T);for(var F=0;F<T;F++)P[F]=this[F][I];return P},D.prototype.getColumnVector=function(I){return D.columnVector(this.getColumn(I))},D.prototype.setColumn=function(I,T){this.checkColumnIndex(I),D.isMatrix(T)&&(T=T.to1DArray());var P=this.rows;if(T.length!==P)throw new RangeError('Invalid column size');for(var F=0;F<P;F++)this[F][I]=T[F];return this},D.prototype.removeColumn=function(I){if(this.checkColumnIndex(I),1===this.columns)throw new RangeError('A matrix cannot have less than one column');for(var T=0,P=this.rows;T<P;T++)this[T].splice(I,1);return this.columns-=1,this},D.prototype.addColumn=function(I,T){if('undefined'==typeof T&&(T=I,I=this.columns),0>I||I>this.columns)throw new RangeError('Column index out of range.');D.isMatrix(T)&&(T=T.to1DArray());var P=this.rows;if(T.length!==P)throw new RangeError('Invalid column size');for(var F=0;F<P;F++)this[F].splice(I,0,T[F]);return this.columns+=1,this},D.prototype.swapColumns=function(I,T){this.checkRowIndex(I),this.checkRowIndex(T);var P=this.rows,F,M;for(var O=0;O<P;O++)M=this[O],F=M[I],M[I]=M[T],M[T]=F;return this},D.prototype.checkRowVector=function(I){if(D.isMatrix(I)&&(I=I.to1DArray()),I.length!==this.columns)throw new RangeError('vector size must be the same as the number of columns');return I},D.prototype.checkColumnVector=function(I){if(D.isMatrix(I)&&(I=I.to1DArray()),I.length!==this.rows)throw new RangeError('vector size must be the same as the number of rows');return I},D.prototype.addRowVector=function(I){I=this.checkRowVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]+=I[M];return this},D.prototype.subRowVector=function(I){I=this.checkRowVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]-=I[M];return this},D.prototype.mulRowVector=function(I){I=this.checkRowVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]*=I[M];return this},D.prototype.divRowVector=function(I){I=this.checkRowVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]/=I[M];return this},D.prototype.addColumnVector=function(I){I=this.checkColumnVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]+=I[F];return this},D.prototype.subColumnVector=function(I){I=this.checkColumnVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]-=I[F];return this},D.prototype.mulColumnVector=function(I){I=this.checkColumnVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]*=I[F];return this},D.prototype.divColumnVector=function(I){I=this.checkColumnVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]/=I[F];return this},D.prototype.mulRow=function(I,T){this.checkRowIndex(I);for(var P=0,F=this.columns;P<F;P++)this[I][P]*=T;return this},D.prototype.mulColumn=function(I,T){this.checkColumnIndex(I);for(var P=0,F=this.rows;P<F;P++)this[P][I]*=T},D.prototype.max=function(){var I=-(1/0),T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]>I&&(I=this[F][M]);return I},D.prototype.maxIndex=function(){var I=-(1/0),T={},P=this.rows,F=this.columns;for(var M=0;M<P;M++)for(var O=0;O<F;O++)this[M][O]>I&&(I=this[M][O],T.row=M,T.column=O);return T},D.prototype.min=function(){var I=1/0,T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]<I&&(I=this[F][M]);return I},D.prototype.minIndex=function(){var I=1/0,T={},P=this.rows,F=this.columns;for(var M=0;M<P;M++)for(var O=0;O<F;O++)this[M][O]<I&&(I=this[M][O],T.row=M,T.column=O);return T},D.prototype.maxRow=function(I){this.checkRowIndex(I);var T=-(1/0);for(var P=0,F=this.columns;P<F;P++)this[I][P]>T&&(T=this[I][P]);return T},D.prototype.maxRowIndex=function(I){this.checkRowIndex(I);var T=-(1/0),P={row:I};for(var F=0,M=this.columns;F<M;F++)this[I][F]>T&&(T=this[I][F],P.column=F);return P},D.prototype.minRow=function(I){this.checkRowIndex(I);var T=1/0;for(var P=0,F=this.columns;P<F;P++)this[I][P]<T&&(T=this[I][P]);return T},D.prototype.minRowIndex=function(I){this.checkRowIndex(I);var T=1/0,P={row:I,column:0};for(var F=0,M=this.columns;F<M;F++)this[I][F]<T&&(T=this[I][F],P.column=F);return P},D.prototype.maxColumn=function(I){this.checkColumnIndex(I);var T=-(1/0);for(var P=0,F=this.rows;P<F;P++)this[P][I]>T&&(T=this[P][I]);return T},D.prototype.maxColumnIndex=function(I){this.checkColumnIndex(I);var T=-(1/0),P={row:0,column:I};for(var F=0,M=this.rows;F<M;F++)this[F][I]>T&&(T=this[F][I],P.row=F);return P},D.prototype.minColumn=function(I){this.checkColumnIndex(I);var T=1/0;for(var P=0,F=this.rows;P<F;P++)this[P][I]<T&&(T=this[P][I]);return T},D.prototype.minColumnIndex=function(I){this.checkColumnIndex(I);var T=1/0,P={row:0,column:I};for(var F=0,M=this.rows;F<M;F++)this[F][I]<T&&(T=this[F][I],P.row=F);return P},D.prototype.diag=function(){if(!this.isSquare())throw new TypeError('Only square matrices have a diagonal.');var R=Array(this.rows);for(var I=0,T=this.rows;I<T;I++)R[I]=this[I][I];return R},D.prototype.sum=function(){var I=0,T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)I+=this[F][M];return I},D.prototype.mean=function(){return this.sum()/this.size},D.prototype.prod=function(){var R=1,I=this.rows,T=this.columns;for(var P=0;P<I;P++)for(var F=0;F<T;F++)R*=this[P][F];return R},D.prototype.cumulativeSum=function(){var I=0,T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)I+=this[F][M],this[F][M]=I;return this},D.prototype.dot=function(I){if(this.size!==I.size)throw new RangeError('vectors do not have the same size');var T=this.to1DArray(),P=I.to1DArray(),R=0,F=T.length;for(var M=0;M<F;M++)R+=T[M]*P[M];return R},D.prototype.mmul=function(I){if(!D.isMatrix(I))throw new TypeError('parameter "other" must be a matrix');this.columns!==I.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');var T=this.rows,P=this.columns,F=I.columns,M=new D(T,F),O=Array(P),$,Z,W;for(Z=0;Z<F;Z++){for(W=0;W<P;W++)O[W]=I[W][Z];for($=0;$<T;$++){var K=this[$],Q=0;for(W=0;W<P;W++)Q+=K[W]*O[W];M[$][Z]=Q}}return M},D.prototype.sortRows=function(I){for(var T=0,P=this.rows;T<P;T++)this[T].sort(I);return this},D.prototype.sortColumns=function(I){for(var T=0,P=this.columns;T<P;T++)this.setColumn(T,this.getColumn(T).sort(I));return this},D.prototype.transpose=function(){var I=new D(this.columns,this.rows),T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)I[M][F]=this[F][M];return I},D.prototype.subMatrix=function(I,T,P,F){if(I>T||P>F||0>I||I>=this.rows||0>T||T>=this.rows||0>P||P>=this.columns||0>F||F>=this.columns)throw new RangeError('Argument out of range');var M=new D(T-I+1,F-P+1);for(var O=I;O<=T;O++)for(var $=P;$<=F;$++)M[O-I][$-P]=this[O][$];return M},D.prototype.subMatrixRow=function(I,T,P){if('undefined'==typeof T?(T=0,P=this.columns-1):'undefined'==typeof P&&(P=this.columns-1),T>P||0>T||T>=this.columns||0>P||P>=this.columns)throw new RangeError('Argument out of range.');var F=I.length,M=this.rows,O=new D(F,P-T+1);for(var $=0;$<F;$++)for(var Z=T;Z<=P;Z++){if(0>I[$]||I[$]>=M)throw new RangeError('Argument out of range.');O[$][Z-T]=this[I[$]][Z]}return O},D.prototype.subMatrixColumn=function(I,T,P){if('undefined'==typeof T?(T=0,P=this.rows-1):'undefined'==typeof P&&(P=this.rows-1),T>P||0>T||T>=this.rows||0>P||P>=this.rows)throw new RangeError('Argument out of range.');var F=I.length,M=this.columns,O=new D(P-T+1,F);for(var $=0;$<F;$++)for(var Z=T;Z<=P;Z++){if(0>I[$]||I[$]>=M)throw new RangeError('Argument out of range.');O[Z-T][$]=this[Z][I[$]]}return O},D.prototype.trace=function(){if(!this.isSquare())throw new TypeError('The matrix is not square');for(var R=0,I=0,T=this.rows;I<T;I++)R+=this[I][I];return R},D.prototype.abs=function(){var I=this.rows,T=this.columns;for(var P=0;P<I;P++)for(var F=0;F<T;F++)this[P][F]=Math.abs(this[P][F])},_.exports=D},function(_,S,D){'use strict';function C(O){return E(O,R.eye(O.rows))}function E(O,$){return O.isSquare()?new P(O).solve($):new F(O).solve($)}var R=D(23),I=D(25),T=D(27),P=D(28),F=D(29),M=D(30);R.prototype.inverse=function(){return C(this)},R.prototype.solve=function(O){return E(this,O)},_.exports={SingularValueDecomposition:I,SVD:I,EigenvalueDecomposition:T,EVD:T,LuDecomposition:P,LU:P,QrDecomposition:F,QR:F,CholeskyDecomposition:M,CHO:M,inverse:C,solve:E}},function(_,S,D){'use strict';function C(I,T){if(!(this instanceof C))return new C(I,T);I=E.checkMatrix(I),T=T||{};var P=I.clone(),F=I.rows,M=I.columns,O=Math.min(F,M),$=!0,Z=!0;!1===T.computeLeftSingularVectors&&($=!1),!1===T.computeRightSingularVectors&&(Z=!1);var W=!0===T.autoTranspose,K=!1;if(F<M)if(!W)console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');else{P=P.transpose(),F=P.rows,M=P.columns,K=!0;var Q=$;$=Z,Z=Q}var G=Array(Math.min(F+1,M)),ee=E.zeros(F,O),te=E.zeros(M,M),ne=Array(M),ae=Array(F),oe=Math.min(F-1,M),se=Math.max(0,Math.min(M-2,F)),le,de,ue,he,pe,me,ce,ge,fe,be,ye,xe,_e,ke,we,je,Se,ve,De,Ce,Ae;for(ue=0,be=Math.max(oe,se);ue<be;ue++){if(ue<oe){for(G[ue]=0,le=ue;le<F;le++)G[ue]=R(G[ue],P[le][ue]);if(0!==G[ue]){for(0>P[ue][ue]&&(G[ue]=-G[ue]),le=ue;le<F;le++)P[le][ue]/=G[ue];P[ue][ue]+=1}G[ue]=-G[ue]}for(de=ue+1;de<M;de++){if(ue<oe&&0!==G[ue]){for(pe=0,le=ue;le<F;le++)pe+=P[le][ue]*P[le][de];for(pe=-pe/P[ue][ue],le=ue;le<F;le++)P[le][de]+=pe*P[le][ue]}ne[de]=P[ue][de]}if($&&ue<oe)for(le=ue;le<F;le++)ee[le][ue]=P[le][ue];if(ue<se){for(ne[ue]=0,le=ue+1;le<M;le++)ne[ue]=R(ne[ue],ne[le]);if(0!==ne[ue]){for(0>ne[ue+1]&&(ne[ue]=-ne[ue]),le=ue+1;le<M;le++)ne[le]/=ne[ue];ne[ue+1]+=1}if(ne[ue]=-ne[ue],ue+1<F&&0!==ne[ue]){for(le=ue+1;le<F;le++)ae[le]=0;for(de=ue+1;de<M;de++)for(le=ue+1;le<F;le++)ae[le]+=ne[de]*P[le][de];for(de=ue+1;de<M;de++)for(pe=-ne[de]/ne[ue+1],le=ue+1;le<F;le++)P[le][de]+=pe*ae[le]}if(Z)for(le=ue+1;le<M;le++)te[le][ue]=ne[le]}}if(he=Math.min(M,F+1),oe<M&&(G[oe]=P[oe][oe]),F<he&&(G[he-1]=0),se+1<he&&(ne[se]=P[se][he-1]),ne[he-1]=0,$){for(de=oe;de<O;de++){for(le=0;le<F;le++)ee[le][de]=0;ee[de][de]=1}for(ue=oe-1;0<=ue;ue--)if(0!==G[ue]){for(de=ue+1;de<O;de++){for(pe=0,le=ue;le<F;le++)pe+=ee[le][ue]*ee[le][de];for(pe=-pe/ee[ue][ue],le=ue;le<F;le++)ee[le][de]+=pe*ee[le][ue]}for(le=ue;le<F;le++)ee[le][ue]=-ee[le][ue];for(ee[ue][ue]=1+ee[ue][ue],le=0;le<ue-1;le++)ee[le][ue]=0}else{for(le=0;le<F;le++)ee[le][ue]=0;ee[ue][ue]=1}}if(Z)for(ue=M-1;0<=ue;ue--){if(ue<se&&0!==ne[ue])for(de=ue+1;de<M;de++){for(pe=0,le=ue+1;le<M;le++)pe+=te[le][ue]*te[le][de];for(pe=-pe/te[ue+1][ue],le=ue+1;le<M;le++)te[le][de]+=pe*te[le][ue]}for(le=0;le<M;le++)te[le][ue]=0;te[ue][ue]=1}for(var Ee=he-1,Re=0,Ie=Math.pow(2,-52);0<he;){for(ue=he-2;-1<=ue&&-1!==ue;ue--)if(Math.abs(ne[ue])<=Ie*(Math.abs(G[ue])+Math.abs(G[ue+1]))){ne[ue]=0;break}if(ue===he-2)ye=4;else{for(me=he-1;me>=ue&&me!==ue;me--)if(pe=(me===he?0:Math.abs(ne[me]))+(me===ue+1?0:Math.abs(ne[me-1])),Math.abs(G[me])<=Ie*pe){G[me]=0;break}me===ue?ye=3:me===he-1?ye=1:(ye=2,ue=me)}switch(ue++,ye){case 1:{for(ce=ne[he-2],ne[he-2]=0,de=he-2;de>=ue;de--)if(pe=R(G[de],ce),ge=G[de]/pe,fe=ce/pe,G[de]=pe,de!==ue&&(ce=-fe*ne[de-1],ne[de-1]=ge*ne[de-1]),Z)for(le=0;le<M;le++)pe=ge*te[le][de]+fe*te[le][he-1],te[le][he-1]=-fe*te[le][de]+ge*te[le][he-1],te[le][de]=pe;break}case 2:{for(ce=ne[ue-1],ne[ue-1]=0,de=ue;de<he;de++)if(pe=R(G[de],ce),ge=G[de]/pe,fe=ce/pe,G[de]=pe,ce=-fe*ne[de],ne[de]=ge*ne[de],$)for(le=0;le<F;le++)pe=ge*ee[le][de]+fe*ee[le][ue-1],ee[le][ue-1]=-fe*ee[le][de]+ge*ee[le][ue-1],ee[le][de]=pe;break}case 3:{for(xe=Math.max(Math.max(Math.max(Math.max(Math.abs(G[he-1]),Math.abs(G[he-2])),Math.abs(ne[he-2])),Math.abs(G[ue])),Math.abs(ne[ue])),_e=G[he-1]/xe,ke=G[he-2]/xe,we=ne[he-2]/xe,je=G[ue]/xe,Se=ne[ue]/xe,ve=((ke+_e)*(ke-_e)+we*we)/2,De=_e*we*(_e*we),Ce=0,(0!==ve||0!==De)&&(Ce=Math.sqrt(ve*ve+De),0>ve&&(Ce=-Ce),Ce=De/(ve+Ce)),ce=(je+_e)*(je-_e)+Ce,Ae=je*Se,de=ue;de<he-1;de++){if(pe=R(ce,Ae),ge=ce/pe,fe=Ae/pe,de!==ue&&(ne[de-1]=pe),ce=ge*G[de]+fe*ne[de],ne[de]=ge*ne[de]-fe*G[de],Ae=fe*G[de+1],G[de+1]=ge*G[de+1],Z)for(le=0;le<M;le++)pe=ge*te[le][de]+fe*te[le][de+1],te[le][de+1]=-fe*te[le][de]+ge*te[le][de+1],te[le][de]=pe;if(pe=R(ce,Ae),ge=ce/pe,fe=Ae/pe,G[de]=pe,ce=ge*ne[de]+fe*G[de+1],G[de+1]=-fe*ne[de]+ge*G[de+1],Ae=fe*ne[de+1],ne[de+1]=ge*ne[de+1],$&&de<F-1)for(le=0;le<F;le++)pe=ge*ee[le][de]+fe*ee[le][de+1],ee[le][de+1]=-fe*ee[le][de]+ge*ee[le][de+1],ee[le][de]=pe}ne[he-2]=ce,Re=Re+1;break}case 4:{if(0>=G[ue]&&(G[ue]=0>G[ue]?-G[ue]:0,Z))for(le=0;le<=Ee;le++)te[le][ue]=-te[le][ue];for(;ue<Ee&&!(G[ue]>=G[ue+1]);){if(pe=G[ue],G[ue]=G[ue+1],G[ue+1]=pe,Z&&ue<M-1)for(le=0;le<M;le++)pe=te[le][ue+1],te[le][ue+1]=te[le][ue],te[le][ue]=pe;if($&&ue<F-1)for(le=0;le<F;le++)pe=ee[le][ue+1],ee[le][ue+1]=ee[le][ue],ee[le][ue]=pe;ue++}Re=0,he--;break}}}if(K){var Te=te;te=ee,ee=Te}this.m=F,this.n=M,this.s=G,this.U=ee,this.V=te}var E=D(23),R=D(26).hypotenuse;C.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){var I=Math.pow(2,-52),T=Math.max(this.m,this.n)*this.s[0]*I,P=0,F=this.s;for(var M=0,O=F.length;M<O;M++)F[M]>T&&P++;return P},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return this.U},get rightSingularVectors(){return this.V},get diagonalMatrix(){return E.diag(this.s)},solve:function(I){var T=this.threshold,P=this.s.length,F=E.zeros(P,P),M;for(M=0;M<P;M++)F[M][M]=Math.abs(this.s[M])<=T?0:1/this.s[M];var O=this.V.mmul(F),$=this.V.rows,Z=this.U.rows,W=E.zeros($,Z),K,Q,G;for(M=0;M<$;M++)for(K=0;K<Z;K++){for(G=0,Q=0;Q<P;Q++)G+=O[M][Q]*this.U[K][Q];W[M][K]=G}return W.mmul(I)},solveForDiagonal:function(I){return this.solve(E.diag(I))},inverse:function(){var I=this.threshold,T=this.V.rows,P=this.V.columns,F=new E(T,this.s.length),M,O;for(M=0;M<T;M++)for(O=0;O<P;O++)F[M][O]=Math.abs(this.s[O])>I?this.V[M][O]/this.s[O]:0;var $=this.U.rows,Z=this.U.columns,W=new E(T,$),K,Q;for(M=0;M<T;M++)for(O=0;O<$;O++){for(Q=0,K=0;K<Z;K++)Q+=F[M][K]*this.U[O][K];W[M][O]=Q}return W}},_.exports=C},function(_,S){'use strict';S.hypotenuse=function(C,E){var R;return Math.abs(C)>Math.abs(E)?(R=E/C,Math.abs(C)*Math.sqrt(1+R*R)):0===E?0:(R=C/E,Math.abs(E)*Math.sqrt(1+R*R))}},function(_,S,D){'use strict';function C(O){if(!(this instanceof C))return new C(O);if(O=F.checkMatrix(O),!O.isSquare())throw new Error('Matrix is not a square matrix');var $=O.columns,Z=F.zeros($,$),W=Array($),K=Array($),Q=O,G,ee;if(O.isSymmetric()){for(G=0;G<$;G++)for(ee=0;ee<$;ee++)Z[G][ee]=Q[G][ee];E($,K,W,Z),R($,K,W,Z)}else{var te=F.zeros($,$),ne=Array($);for(ee=0;ee<$;ee++)for(G=0;G<$;G++)te[G][ee]=Q[G][ee];I($,te,ne,Z),T($,K,W,Z,te)}this.n=$,this.e=K,this.d=W,this.V=Z}function E(O,$,Z,W){var K,Q,G,ee,te,ne,ae,oe;for(te=0;te<O;te++)Z[te]=W[O-1][te];for(ee=O-1;0<ee;ee--){for(oe=0,G=0,ne=0;ne<ee;ne++)oe=oe+Math.abs(Z[ne]);if(0===oe)for($[ee]=Z[ee-1],te=0;te<ee;te++)Z[te]=W[ee-1][te],W[ee][te]=0,W[te][ee]=0;else{for(ne=0;ne<ee;ne++)Z[ne]/=oe,G+=Z[ne]*Z[ne];for(K=Z[ee-1],Q=Math.sqrt(G),0<K&&(Q=-Q),$[ee]=oe*Q,G=G-K*Q,Z[ee-1]=K-Q,te=0;te<ee;te++)$[te]=0;for(te=0;te<ee;te++){for(K=Z[te],W[te][ee]=K,Q=$[te]+W[te][te]*K,ne=te+1;ne<=ee-1;ne++)Q+=W[ne][te]*Z[ne],$[ne]+=W[ne][te]*K;$[te]=Q}for(K=0,te=0;te<ee;te++)$[te]/=G,K+=$[te]*Z[te];for(ae=K/(G+G),te=0;te<ee;te++)$[te]-=ae*Z[te];for(te=0;te<ee;te++){for(K=Z[te],Q=$[te],ne=te;ne<=ee-1;ne++)W[ne][te]-=K*$[ne]+Q*Z[ne];Z[te]=W[ee-1][te],W[ee][te]=0}}Z[ee]=G}for(ee=0;ee<O-1;ee++){if(W[O-1][ee]=W[ee][ee],W[ee][ee]=1,G=Z[ee+1],0!==G){for(ne=0;ne<=ee;ne++)Z[ne]=W[ne][ee+1]/G;for(te=0;te<=ee;te++){for(Q=0,ne=0;ne<=ee;ne++)Q+=W[ne][ee+1]*W[ne][te];for(ne=0;ne<=ee;ne++)W[ne][te]-=Q*Z[ne]}}for(ne=0;ne<=ee;ne++)W[ne][ee+1]=0}for(te=0;te<O;te++)Z[te]=W[O-1][te],W[O-1][te]=0;W[O-1][O-1]=1,$[0]=0}function R(O,$,Z,W){var K,Q,G,ee,te,ne,ae,oe,se,le,de,ue,he,pe,me,ce,ge;for(G=1;G<O;G++)$[G-1]=$[G];$[O-1]=0;var fe=0,be=0,ye=Math.pow(2,-52);for(ne=0;ne<O;ne++){for(be=Math.max(be,Math.abs(Z[ne])+Math.abs($[ne])),ae=ne;ae<O&&!(Math.abs($[ae])<=ye*be);)ae++;if(ae>ne){ge=0;do{for(ge=ge+1,K=Z[ne],oe=(Z[ne+1]-K)/(2*$[ne]),se=M(oe,1),0>oe&&(se=-se),Z[ne]=$[ne]/(oe+se),Z[ne+1]=$[ne]*(oe+se),le=Z[ne+1],Q=K-Z[ne],G=ne+2;G<O;G++)Z[G]-=Q;for(fe=fe+Q,oe=Z[ae],de=1,ue=de,he=de,pe=$[ne+1],me=0,ce=0,G=ae-1;G>=ne;G--)for(he=ue,ue=de,ce=me,K=de*$[G],Q=de*oe,se=M(oe,$[G]),$[G+1]=me*se,me=$[G]/se,de=oe/se,oe=de*Z[G]-me*K,Z[G+1]=Q+me*(de*K+me*Z[G]),te=0;te<O;te++)Q=W[te][G+1],W[te][G+1]=me*W[te][G]+de*Q,W[te][G]=de*W[te][G]-me*Q;oe=-me*ce*he*pe*$[ne]/le,$[ne]=me*oe,Z[ne]=de*oe}while(Math.abs($[ne])>ye*be)}Z[ne]=Z[ne]+fe,$[ne]=0}for(G=0;G<O-1;G++){for(te=G,oe=Z[G],ee=G+1;ee<O;ee++)Z[ee]<oe&&(te=ee,oe=Z[ee]);if(te!==G)for(Z[te]=Z[G],Z[G]=oe,ee=0;ee<O;ee++)oe=W[ee][G],W[ee][G]=W[ee][te],W[ee][te]=oe}}function I(O,$,Z,W){var K=0,Q=O-1,G,ee,te,ne,ae,oe,se;for(oe=K+1;oe<=Q-1;oe++){for(se=0,ne=oe;ne<=Q;ne++)se=se+Math.abs($[ne][oe-1]);if(0!==se){for(te=0,ne=Q;ne>=oe;ne--)Z[ne]=$[ne][oe-1]/se,te+=Z[ne]*Z[ne];for(ee=Math.sqrt(te),0<Z[oe]&&(ee=-ee),te=te-Z[oe]*ee,Z[oe]=Z[oe]-ee,ae=oe;ae<O;ae++){for(G=0,ne=Q;ne>=oe;ne--)G+=Z[ne]*$[ne][ae];for(G=G/te,ne=oe;ne<=Q;ne++)$[ne][ae]-=G*Z[ne]}for(ne=0;ne<=Q;ne++){for(G=0,ae=Q;ae>=oe;ae--)G+=Z[ae]*$[ne][ae];for(G=G/te,ae=oe;ae<=Q;ae++)$[ne][ae]-=G*Z[ae]}Z[oe]=se*Z[oe],$[oe][oe-1]=se*ee}}for(ne=0;ne<O;ne++)for(ae=0;ae<O;ae++)W[ne][ae]=ne===ae?1:0;for(oe=Q-1;oe>=K+1;oe--)if(0!==$[oe][oe-1]){for(ne=oe+1;ne<=Q;ne++)Z[ne]=$[ne][oe-1];for(ae=oe;ae<=Q;ae++){for(ee=0,ne=oe;ne<=Q;ne++)ee+=Z[ne]*W[ne][ae];for(ee=ee/Z[oe]/$[oe][oe-1],ne=oe;ne<=Q;ne++)W[ne][ae]+=ee*Z[ne]}}}function T(O,$,Z,W,K){var Q=O-1,G=0,ee=O-1,te=Math.pow(2,-52),ne=0,ae=0,oe=0,se=0,le=0,de=0,ue=0,he=0,pe,me,ce,ge,fe,be,ye,xe,_e,ke,we,je,Se,ve,De;for(pe=0;pe<O;pe++)for((pe<G||pe>ee)&&(Z[pe]=K[pe][pe],$[pe]=0),me=Math.max(pe-1,0);me<O;me++)ae=ae+Math.abs(K[pe][me]);for(;Q>=G;){for(ge=Q;ge>G&&(de=Math.abs(K[ge-1][ge-1])+Math.abs(K[ge][ge]),0==de&&(de=ae),!(Math.abs(K[ge][ge-1])<te*de));)ge--;if(ge===Q)K[Q][Q]=K[Q][Q]+ne,Z[Q]=K[Q][Q],$[Q]=0,Q--,he=0;else if(ge===Q-1){if(ye=K[Q][Q-1]*K[Q-1][Q],oe=(K[Q-1][Q-1]-K[Q][Q])/2,se=oe*oe+ye,ue=Math.sqrt(Math.abs(se)),K[Q][Q]=K[Q][Q]+ne,K[Q-1][Q-1]=K[Q-1][Q-1]+ne,xe=K[Q][Q],0<=se){for(ue=0<=oe?oe+ue:oe-ue,Z[Q-1]=xe+ue,Z[Q]=Z[Q-1],0!=ue&&(Z[Q]=xe-ye/ue),$[Q-1]=0,$[Q]=0,xe=K[Q][Q-1],de=Math.abs(xe)+Math.abs(ue),oe=xe/de,se=ue/de,le=Math.sqrt(oe*oe+se*se),oe=oe/le,se=se/le,me=Q-1;me<O;me++)ue=K[Q-1][me],K[Q-1][me]=se*ue+oe*K[Q][me],K[Q][me]=se*K[Q][me]-oe*ue;for(pe=0;pe<=Q;pe++)ue=K[pe][Q-1],K[pe][Q-1]=se*ue+oe*K[pe][Q],K[pe][Q]=se*K[pe][Q]-oe*ue;for(pe=G;pe<=ee;pe++)ue=W[pe][Q-1],W[pe][Q-1]=se*ue+oe*W[pe][Q],W[pe][Q]=se*W[pe][Q]-oe*ue}else Z[Q-1]=xe+oe,Z[Q]=xe+oe,$[Q-1]=ue,$[Q]=-ue;Q=Q-2,he=0}else{if(xe=K[Q][Q],_e=0,ye=0,ge<Q&&(_e=K[Q-1][Q-1],ye=K[Q][Q-1]*K[Q-1][Q]),10==he){for(ne+=xe,pe=G;pe<=Q;pe++)K[pe][pe]-=xe;de=Math.abs(K[Q][Q-1])+Math.abs(K[Q-1][Q-2]),xe=_e=0.75*de,ye=-0.4375*de*de}if(30==he&&(de=(_e-xe)/2,de=de*de+ye,0<de)){for(de=Math.sqrt(de),_e<xe&&(de=-de),de=xe-ye/((_e-xe)/2+de),pe=G;pe<=Q;pe++)K[pe][pe]-=de;ne+=de,xe=_e=ye=0.964}for(he=he+1,fe=Q-2;fe>=ge&&(ue=K[fe][fe],le=xe-ue,de=_e-ue,oe=(le*de-ye)/K[fe+1][fe]+K[fe][fe+1],se=K[fe+1][fe+1]-ue-le-de,le=K[fe+2][fe+1],de=Math.abs(oe)+Math.abs(se)+Math.abs(le),oe=oe/de,se=se/de,le=le/de,fe!=ge)&&!(Math.abs(K[fe][fe-1])*(Math.abs(se)+Math.abs(le))<te*(Math.abs(oe)*(Math.abs(K[fe-1][fe-1])+Math.abs(ue)+Math.abs(K[fe+1][fe+1]))));)fe--;for(pe=fe+2;pe<=Q;pe++)K[pe][pe-2]=0,pe>fe+2&&(K[pe][pe-3]=0);for(ce=fe;ce<=Q-1&&(ve=ce!==Q-1,ce!=fe&&(oe=K[ce][ce-1],se=K[ce+1][ce-1],le=ve?K[ce+2][ce-1]:0,xe=Math.abs(oe)+Math.abs(se)+Math.abs(le),0!==xe&&(oe=oe/xe,se=se/xe,le=le/xe)),0!==xe);ce++)if(de=Math.sqrt(oe*oe+se*se+le*le),0>oe&&(de=-de),0!==de){for(ce==fe?ge!==fe&&(K[ce][ce-1]=-K[ce][ce-1]):K[ce][ce-1]=-de*xe,oe=oe+de,xe=oe/de,_e=se/de,ue=le/de,se=se/oe,le=le/oe,me=ce;me<O;me++)oe=K[ce][me]+se*K[ce+1][me],ve&&(oe=oe+le*K[ce+2][me],K[ce+2][me]=K[ce+2][me]-oe*ue),K[ce][me]=K[ce][me]-oe*xe,K[ce+1][me]=K[ce+1][me]-oe*_e;for(pe=0;pe<=Math.min(Q,ce+3);pe++)oe=xe*K[pe][ce]+_e*K[pe][ce+1],ve&&(oe=oe+ue*K[pe][ce+2],K[pe][ce+2]=K[pe][ce+2]-oe*le),K[pe][ce]=K[pe][ce]-oe,K[pe][ce+1]=K[pe][ce+1]-oe*se;for(pe=G;pe<=ee;pe++)oe=xe*W[pe][ce]+_e*W[pe][ce+1],ve&&(oe=oe+ue*W[pe][ce+2],W[pe][ce+2]=W[pe][ce+2]-oe*le),W[pe][ce]=W[pe][ce]-oe,W[pe][ce+1]=W[pe][ce+1]-oe*se}}}if(0!==ae){for(Q=O-1;0<=Q;Q--)if(oe=Z[Q],se=$[Q],0===se)for(ge=Q,K[Q][Q]=1,pe=Q-1;0<=pe;pe--){for(ye=K[pe][pe]-oe,le=0,me=ge;me<=Q;me++)le=le+K[pe][me]*K[me][Q];if(0>$[pe])ue=ye,de=le;else if(ge=pe,0===$[pe]?K[pe][Q]=0===ye?-le/(te*ae):-le/ye:(xe=K[pe][pe+1],_e=K[pe+1][pe],se=(Z[pe]-oe)*(Z[pe]-oe)+$[pe]*$[pe],be=(xe*de-ue*le)/se,K[pe][Q]=be,K[pe+1][Q]=Math.abs(xe)>Math.abs(ue)?(-le-ye*be)/xe:(-de-_e*be)/ue),be=Math.abs(K[pe][Q]),1<te*be*be)for(me=pe;me<=Q;me++)K[me][Q]=K[me][Q]/be}else if(0>se)for(ge=Q-1,Math.abs(K[Q][Q-1])>Math.abs(K[Q-1][Q])?(K[Q-1][Q-1]=se/K[Q][Q-1],K[Q-1][Q]=-(K[Q][Q]-oe)/K[Q][Q-1]):(De=P(0,-K[Q-1][Q],K[Q-1][Q-1]-oe,se),K[Q-1][Q-1]=De[0],K[Q-1][Q]=De[1]),K[Q][Q-1]=0,K[Q][Q]=1,pe=Q-2;0<=pe;pe--){for(ke=0,we=0,me=ge;me<=Q;me++)ke=ke+K[pe][me]*K[me][Q-1],we=we+K[pe][me]*K[me][Q];if(ye=K[pe][pe]-oe,0>$[pe])ue=ye,le=ke,de=we;else if(ge=pe,0===$[pe]?(De=P(-ke,-we,ye,se),K[pe][Q-1]=De[0],K[pe][Q]=De[1]):(xe=K[pe][pe+1],_e=K[pe+1][pe],je=(Z[pe]-oe)*(Z[pe]-oe)+$[pe]*$[pe]-se*se,Se=2*(Z[pe]-oe)*se,0===je&&0===Se&&(je=te*ae*(Math.abs(ye)+Math.abs(se)+Math.abs(xe)+Math.abs(_e)+Math.abs(ue))),De=P(xe*le-ue*ke+se*we,xe*de-ue*we-se*ke,je,Se),K[pe][Q-1]=De[0],K[pe][Q]=De[1],Math.abs(xe)>Math.abs(ue)+Math.abs(se)?(K[pe+1][Q-1]=(-ke-ye*K[pe][Q-1]+se*K[pe][Q])/xe,K[pe+1][Q]=(-we-ye*K[pe][Q]-se*K[pe][Q-1])/xe):(De=P(-le-_e*K[pe][Q-1],-de-_e*K[pe][Q],ue,se),K[pe+1][Q-1]=De[0],K[pe+1][Q]=De[1])),be=Math.max(Math.abs(K[pe][Q-1]),Math.abs(K[pe][Q])),1<te*be*be)for(me=pe;me<=Q;me++)K[me][Q-1]=K[me][Q-1]/be,K[me][Q]=K[me][Q]/be}for(pe=0;pe<O;pe++)if(pe<G||pe>ee)for(me=pe;me<O;me++)W[pe][me]=K[pe][me];for(me=O-1;me>=G;me--)for(pe=G;pe<=ee;pe++){for(ue=0,ce=G;ce<=Math.min(me,ee);ce++)ue=ue+W[pe][ce]*K[ce][me];W[pe][me]=ue}}}function P(O,$,Z,W){var K,Q;return Math.abs(Z)>Math.abs(W)?(K=W/Z,Q=Z+K*W,[(O+K*$)/Q,($-K*O)/Q]):(K=Z/W,Q=W+K*Z,[(K*O+$)/Q,(K*$-O)/Q])}var F=D(23),M=D(26).hypotenuse;C.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return this.V},get diagonalMatrix(){var O=this.n,$=this.e,Z=this.d,W=new F(O,O),K,Q;for(K=0;K<O;K++){for(Q=0;Q<O;Q++)W[K][Q]=0;W[K][K]=Z[K],0<$[K]?W[K][K+1]=$[K]:0>$[K]&&(W[K][K-1]=$[K])}return W}},_.exports=C},function(_,S,D){'use strict';function C(R){if(!(this instanceof C))return new C(R);R=E.checkMatrix(R);var I=R.clone(),T=I.rows,P=I.columns,F=Array(T),M=1,O,$,Z,W,K,Q,G,ee,te,ne;for(O=0;O<T;O++)F[O]=O;for(te=Array(T),$=0;$<P;$++){for(O=0;O<T;O++)te[O]=I[O][$];for(O=0;O<T;O++){for(ee=I[O],ne=Math.min(O,$),K=0,Z=0;Z<ne;Z++)K+=ee[Z]*te[Z];ee[$]=te[O]-=K}for(W=$,O=$+1;O<T;O++)Math.abs(te[O])>Math.abs(te[W])&&(W=O);if(W!==$){for(Z=0;Z<P;Z++)Q=I[W][Z],I[W][Z]=I[$][Z],I[$][Z]=Q;G=F[W],F[W]=F[$],F[$]=G,M=-M}if($<T&&0!==I[$][$])for(O=$+1;O<T;O++)I[O][$]/=I[$][$]}this.LU=I,this.pivotVector=F,this.pivotSign=M}var E=D(23);C.prototype={isSingular:function(){var R=this.LU,I=R.columns;for(var T=0;T<I;T++)if(0===R[T][T])return!0;return!1},get determinant(){var R=this.LU;if(!R.isSquare())throw new Error('Matrix must be square');var I=this.pivotSign,T=R.columns;for(var P=0;P<T;P++)I*=R[P][P];return I},get lowerTriangularFactor(){var R=this.LU,I=R.rows,T=R.columns,P=new E(I,T);for(var F=0;F<I;F++)for(var M=0;M<T;M++)P[F][M]=F>M?R[F][M]:F===M?1:0;return P},get upperTriangularFactor(){var R=this.LU,I=R.rows,T=R.columns,P=new E(I,T);for(var F=0;F<I;F++)for(var M=0;M<T;M++)P[F][M]=F<=M?R[F][M]:0;return P},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(R){R=E.checkMatrix(R);var I=this.LU,T=I.rows;if(T!==R.rows)throw new Error('Invalid matrix dimensions');if(this.isSingular())throw new Error('LU matrix is singular');var P=R.columns,F=R.subMatrixRow(this.pivotVector,0,P-1),M=I.columns,O,$,Z;for(Z=0;Z<M;Z++)for(O=Z+1;O<M;O++)for($=0;$<P;$++)F[O][$]-=F[Z][$]*I[O][Z];for(Z=M-1;0<=Z;Z--){for($=0;$<P;$++)F[Z][$]/=I[Z][Z];for(O=0;O<Z;O++)for($=0;$<P;$++)F[O][$]-=F[Z][$]*I[O][Z]}return F}},_.exports=C},function(_,S,D){'use strict';function C(I){if(!(this instanceof C))return new C(I);I=E.checkMatrix(I);var T=I.clone(),P=I.rows,F=I.columns,M=Array(F),O,$,Z,W;for(Z=0;Z<F;Z++){var K=0;for(O=Z;O<P;O++)K=R(K,T[O][Z]);if(0!==K){for(0>T[Z][Z]&&(K=-K),O=Z;O<P;O++)T[O][Z]/=K;for(T[Z][Z]+=1,$=Z+1;$<F;$++){for(W=0,O=Z;O<P;O++)W+=T[O][Z]*T[O][$];for(W=-W/T[Z][Z],O=Z;O<P;O++)T[O][$]+=W*T[O][Z]}}M[Z]=-K}this.QR=T,this.Rdiag=M}var E=D(23),R=D(26).hypotenuse;C.prototype={solve:function(I){I=E.checkMatrix(I);var T=this.QR,P=T.rows;if(I.rows!==P)throw new Error('Matrix row dimensions must agree');if(!this.isFullRank())throw new Error('Matrix is rank deficient');var F=I.columns,M=I.clone(),O=T.columns,$,Z,W,K;for(W=0;W<O;W++)for(Z=0;Z<F;Z++){for(K=0,$=W;$<P;$++)K+=T[$][W]*M[$][Z];for(K=-K/T[W][W],$=W;$<P;$++)M[$][Z]+=K*T[$][W]}for(W=O-1;0<=W;W--){for(Z=0;Z<F;Z++)M[W][Z]/=this.Rdiag[W];for($=0;$<W;$++)for(Z=0;Z<F;Z++)M[$][Z]-=M[W][Z]*T[$][W]}return M.subMatrix(0,O-1,0,F-1)},isFullRank:function(){var I=this.QR.columns;for(var T=0;T<I;T++)if(0===this.Rdiag[T])return!1;return!0},get upperTriangularFactor(){var I=this.QR,T=I.columns,P=new E(T,T),F,M;for(F=0;F<T;F++)for(M=0;M<T;M++)P[F][M]=F<M?I[F][M]:F===M?this.Rdiag[F]:0;return P},get orthogonalFactor(){var I=this.QR,T=I.rows,P=I.columns,F=new E(T,P),M,O,$,Z;for($=P-1;0<=$;$--){for(M=0;M<T;M++)F[M][$]=0;for(F[$][$]=1,O=$;O<P;O++)if(0!==I[$][$]){for(Z=0,M=$;M<T;M++)Z+=I[M][$]*F[M][O];for(Z=-Z/I[$][$],M=$;M<T;M++)F[M][O]+=Z*I[M][$]}}return F}},_.exports=C},function(_,S,D){'use strict';function C(R){if(!(this instanceof C))return new C(R);if(R=E.checkMatrix(R),!R.isSymmetric())throw new Error('Matrix is not symmetric');var I=R,T=I.rows,P=new E(T,T),F=!0,M,O,$;for(O=0;O<T;O++){var Z=P[O],W=0;for($=0;$<O;$++){var K=P[$],Q=0;for(M=0;M<$;M++)Q+=K[M]*Z[M];Z[$]=Q=(I[O][$]-Q)/P[$][$],W=W+Q*Q}for(W=I[O][O]-W,F&=0<W,P[O][O]=Math.sqrt(Math.max(W,0)),$=O+1;$<T;$++)P[O][$]=0}if(!F)throw new Error('Matrix is not positive definite');this.L=P}var E=D(23);C.prototype={get leftTriangularFactor(){return this.L},solve:function(R){R=E.checkMatrix(R);var I=this.L,T=I.rows;if(R.rows!==T)throw new Error('Matrix dimensions do not match');var P=R.columns,F=R.clone(),M,O,$;for($=0;$<T;$++)for(O=0;O<P;O++){for(M=0;M<$;M++)F[$][O]-=F[M][O]*I[$][M];F[$][O]/=I[$][$]}for($=T-1;0<=$;$--)for(O=0;O<P;O++){for(M=$+1;M<T;M++)F[$][O]-=F[M][O]*I[M][$];F[$][O]/=I[$][$]}return F}},_.exports=C},function(_,S,D){'use strict';var C=D(22);_.exports={transpose:function(R){if('number'==typeof R)return R;var I=R.clone();return I.transpose()},add:function(R,I){if('number'==typeof R&&'number'==typeof I)return R+I;if('number'==typeof R)return this.add(I,R);var T=R.clone();return T.add(I)},subtract:function(R,I){if('number'==typeof R&&'number'==typeof I)return R-I;if('number'==typeof R)return this.subtract(I,R);var T=R.clone();return T.sub(I)},multiply:function(R,I){if('number'==typeof R&&'number'==typeof I)return R*I;if('number'==typeof R)return this.multiply(I,R);var T=R.clone();return'number'==typeof I?T.mul(I):T=T.mmul(I),1==T.rows&&1==T.columns?T[0][0]:T},dotMultiply:function(R,I){var T=R.clone();return T.mul(I)},dotDivide:function(R,I){var T=R.clone();return T.div(I)},diag:function(R){var E=null,I=R.rows,T=R.columns,P,F;if('undefined'==typeof T&&'object'==typeof R)if(R[0]&&R[0].length)for(I=R.length,T=R[0].length,F=Math.min(I,T),E=C.zeros(T,T),P=0;P<T;P++)E[P][P]=R[P][P];else for(T=R.length,E=C.zeros(T,T),P=0;P<T;P++)E[P][P]=R[P];if(1==I)for(E=C.zeros(T,T),P=0;P<T;P++)E[P][P]=R[0][P];else if(0<I&&0<T)for(F=Math.min(I,T),E=Array(F),P=0;P<F;P++)E[P]=R[P][P];return E},min:function(R,I){if('number'==typeof R&&'number'==typeof I)return Math.min(R,I);var T=R.rows,P=R.columns,F=new C(T,P);for(var M=0;M<T;M++)for(var O=0;O<P;O++)F[M][O]=R[M][O]<I[M][O]?R[M][O]:I[M][O];return F},max:function(R,I){if('number'==typeof R&&'number'==typeof I)return Math.max(R,I);var T=R.rows,P=R.columns,F=new C(T,P);for(var M=0;M<T;M++)for(var O=0;O<P;O++)F[M][O]=R[M][O]>I[M][O]?R[M][O]:I[M][O];return F},solve:function(R,I){return R.solve(I)},inv:function(R){return'number'==typeof R?1/R:R.inverse()},sqrt:function(R){if('number'==typeof R)return Math.sqrt(R);var I=R.rows,T=R.columns,P=new C(I,T);for(var F=0;F<I;F++)for(var M=0;M<T;M++)P[F][M]=Math.sqrt(R[F][M]);return P},exp:function(R){if('number'==typeof R)return Math.sqrt(R);var I=R.rows,T=R.columns,P=new C(I,T);for(var F=0;F<I;F++)for(var M=0;M<T;M++)P[F][M]=Math.exp(R[F][M]);return P},dotPow:function(R,I){if('number'==typeof R)return Math.pow(R,I);var T=R.rows,P=R.columns,F=new C(T,P);for(var M=0;M<T;M++)for(var O=0;O<P;O++)F[M][O]=Math.pow(R[M][O],I);return F},abs:function(R){if('number'==typeof R)return Math.abs(R);var I=R.rows,T=R.columns,P=new C(I,T);for(var F=0;F<I;F++)for(var M=0;M<T;M++)P[F][M]=Math.abs(R[F][M]);return P},matrix:function(R,I){return new C(R,I)},ones:function(R,I){return C.ones(R,I)},zeros:function(R,I){return C.zeros(R,I)},random:function(R,I){return C.rand(R,I)},eye:function(R,I){return C.eye(R,I)}}},function(_,S,D){'use strict';_.exports=D(33),_.exports.Decompositions=_.exports.DC=D(34)},function(_){'use strict';function S(R){for(var I=0,T=R.length,P=Array(T);I<T;I++)P[I]=R[I];return P}function D(R,I){var T=0,P,F;if(Array.isArray(R)){if(F=I,P=F?S(R):R,R=P.length,I=P[0].length,'undefined'==typeof I)throw new TypeError('Data must be a 2D array');if(0<R&&0<I){for(;T<R;T++)if(P[T].length!==I)throw new RangeError('Inconsistent array dimensions');else F&&(P[T]=S(P[T]));}else throw new RangeError('Invalid dimensions: '+R+'x'+I)}else if('number'!=typeof R)throw new TypeError('Invalid arguments');else if(0<R&&0<I)for(P=Array(R);T<R;T++)P[T]=Array(I);else throw new RangeError('Invalid dimensions: '+R+'x'+I);return Object.defineProperty(P,'rows',{writable:!0,value:R}),Object.defineProperty(P,'columns',{writable:!0,value:I}),P.__proto__=D.prototype,P}var C=Array.prototype.splice,E=Array.prototype.concat;D.from1DArray=function(I,T,P){var O=0,F,M;if(F=I*T,F!==P.length)throw new RangeError('Data length does not match given dimensions');for(M=Array(I);O<I;O++)M[O]=P.slice(O*T,(O+1)*T);return new D(M)},D.rowVector=function(I){return new D([I])},D.columnVector=function(I){var T=I.length,P=Array(T);for(var F=0;F<T;F++)P[F]=[I[F]];return new D(P)},D.empty=function(I,T){return new D(I,T)},D.zeros=function(I,T){return D.empty(I,T).fill(0)},D.ones=function(I,T){return D.empty(I,T).fill(1)},D.rand=function(I,T){var P=D.empty(I,T);for(var F=0,M=P.rows;F<M;F++)for(var O=0,$=P.columns;O<$;O++)P[F][O]=Math.random();return P},D.eye=function(I){var T=D.zeros(I,I),P=T.rows;for(var F=0;F<P;F++)T[F][F]=1;return T},D.diag=function(I){var T=I.length,P=D.zeros(T,T);for(var F=0;F<T;F++)P[F][F]=I[F];return P},D.indices=function(I,T){var P=Array(T-I);for(var F=0;F<P.length;F++)P[F]=I++;return P},D.stack=function(I){var T,P,F;if(D.isMatrix(I)){var M=0,O=0;for(T=0;T<arguments.length;T++)M+=arguments[T].rows,arguments[T].columns>O&&(O=arguments[T].columns);var $=D.zeros(M,O),Z=0;for(T=0;T<arguments.length;T++){var W=arguments[T];for(P=0;P<W.rows;P++){for(F=0;F<W.columns;F++)$[Z][F]=W[P][F];Z++}}return $}if(Array.isArray(I)){var K=D.empty(arguments.length,I.length);for(T=0;T<arguments.length;T++)K.setRow(T,arguments[T]);return K}},D.expand=function(I,T){var P=[];for(var F=0;F<T.length;F++)for(var M=0;M<T[F];M++)P.push(I[F]);return new D(P)},D.checkMatrix=function(I){if(!I)throw new TypeError('Argument has to be a matrix');return'Matrix'!==I.klass&&(I=new D(I)),I},D.isMatrix=function(I){return!!I&&'Matrix'===I.klass},Object.defineProperty(D.prototype,'klass',{get:function(){return'Matrix'}}),Object.defineProperty(D.prototype,'size',{get:function(){return this.rows*this.columns}}),D.prototype.checkRowIndex=function(I){if(0>I||I>this.rows-1)throw new RangeError('Row index out of range.')},D.prototype.checkColumnIndex=function(I){if(0>I||I>this.columns-1)throw new RangeError('Column index out of range.')},D.prototype.checkDimensions=function(I){if(this.rows!==I.rows||this.columns!==I.columns)throw new RangeError('Matrices dimensions must be equal.')},D.prototype.apply=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)I.call(this,F,M);return this},D.prototype.clone=function(){return new D(this.to2DArray())},D.prototype.to1DArray=function(){return E.apply([],this)},D.prototype.to2DArray=function(){var I=this.rows,T=Array(I);for(var P=0;P<I;P++)T[P]=S(this[P]);return T},D.prototype.isRowVector=function(){return 1===this.rows},D.prototype.isColumnVector=function(){return 1===this.columns},D.prototype.isVector=function(){return 1===this.rows||1===this.columns},D.prototype.isSquare=function(){return this.rows===this.columns},D.prototype.isSymmetric=function(){if(this.isSquare()){var I=this.rows;for(var T=0;T<I;T++)for(var P=0;P<=T;P++)if(this[T][P]!==this[P][T])return!1;return!0}return!1},D.prototype.set=function(I,T,P){return this[I][T]=P,this},D.prototype.get=function(I,T){return this[I][T]},D.prototype.fill=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]=I;return this},D.prototype.neg=function(){return this.mulS(-1)},D.prototype.add=function(I){return'number'==typeof I?this.addS(I):(I=D.checkMatrix(I),this.addM(I))},D.prototype.addS=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]+=I;return this},D.prototype.addM=function(I){this.checkDimensions(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]+=I[F][M];return this},D.prototype.sub=function(I){return'number'==typeof I?this.subS(I):(I=D.checkMatrix(I),this.subM(I))},D.prototype.subS=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]-=I;return this},D.prototype.subM=function(I){this.checkDimensions(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]-=I[F][M];return this},D.prototype.mul=function(I){return'number'==typeof I?this.mulS(I):(I=D.checkMatrix(I),this.mulM(I))},D.prototype.mulS=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]*=I;return this},D.prototype.mulM=function(I){this.checkDimensions(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]*=I[F][M];return this},D.prototype.div=function(I){return'number'==typeof I?this.divS(I):(I=D.checkMatrix(I),this.divM(I))},D.prototype.divS=function(I){var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]/=I;return this},D.prototype.divM=function(I){this.checkDimensions(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]/=I[F][M];return this},D.prototype.getRow=function(I){return this.checkRowIndex(I),S(this[I])},D.prototype.getRowVector=function(I){return D.rowVector(this.getRow(I))},D.prototype.setRow=function(I,T){if(this.checkRowIndex(I),D.isMatrix(T)&&(T=T.to1DArray()),T.length!==this.columns)throw new RangeError('Invalid row size');return this[I]=S(T),this},D.prototype.removeRow=function(I){if(this.checkRowIndex(I),1===this.rows)throw new RangeError('A matrix cannot have less than one row');return C.call(this,I,1),this.rows-=1,this},D.prototype.addRow=function(I,T){if('undefined'==typeof T&&(T=I,I=this.rows),0>I||I>this.rows)throw new RangeError('Row index out of range.');if(D.isMatrix(T)&&(T=T.to1DArray()),T.length!==this.columns)throw new RangeError('Invalid row size');return C.call(this,I,0,S(T)),this.rows+=1,this},D.prototype.swapRows=function(I,T){this.checkRowIndex(I),this.checkRowIndex(T);var P=this[I];return this[I]=this[T],this[T]=P,this},D.prototype.getColumn=function(I){this.checkColumnIndex(I);var T=this.rows,P=Array(T);for(var F=0;F<T;F++)P[F]=this[F][I];return P},D.prototype.getColumnVector=function(I){return D.columnVector(this.getColumn(I))},D.prototype.setColumn=function(I,T){this.checkColumnIndex(I),D.isMatrix(T)&&(T=T.to1DArray());var P=this.rows;if(T.length!==P)throw new RangeError('Invalid column size');for(var F=0;F<P;F++)this[F][I]=T[F];return this},D.prototype.removeColumn=function(I){if(this.checkColumnIndex(I),1===this.columns)throw new RangeError('A matrix cannot have less than one column');for(var T=0,P=this.rows;T<P;T++)this[T].splice(I,1);return this.columns-=1,this},D.prototype.addColumn=function(I,T){if('undefined'==typeof T&&(T=I,I=this.columns),0>I||I>this.columns)throw new RangeError('Column index out of range.');D.isMatrix(T)&&(T=T.to1DArray());var P=this.rows;if(T.length!==P)throw new RangeError('Invalid column size');for(var F=0;F<P;F++)this[F].splice(I,0,T[F]);return this.columns+=1,this},D.prototype.swapColumns=function(I,T){this.checkRowIndex(I),this.checkRowIndex(T);var P=this.rows,F,M;for(var O=0;O<P;O++)M=this[O],F=M[I],M[I]=M[T],M[T]=F;return this},D.prototype.checkRowVector=function(I){if(D.isMatrix(I)&&(I=I.to1DArray()),I.length!==this.columns)throw new RangeError('vector size must be the same as the number of columns');return I},D.prototype.checkColumnVector=function(I){if(D.isMatrix(I)&&(I=I.to1DArray()),I.length!==this.rows)throw new RangeError('vector size must be the same as the number of rows');return I},D.prototype.addRowVector=function(I){I=this.checkRowVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]+=I[M];return this},D.prototype.subRowVector=function(I){I=this.checkRowVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]-=I[M];return this},D.prototype.mulRowVector=function(I){I=this.checkRowVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]*=I[M];return this},D.prototype.divRowVector=function(I){I=this.checkRowVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]/=I[M];return this},D.prototype.addColumnVector=function(I){I=this.checkColumnVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]+=I[F];return this},D.prototype.subColumnVector=function(I){I=this.checkColumnVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]-=I[F];return this},D.prototype.mulColumnVector=function(I){I=this.checkColumnVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]*=I[F];return this},D.prototype.divColumnVector=function(I){I=this.checkColumnVector(I);var T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]/=I[F];return this},D.prototype.mulRow=function(I,T){this.checkRowIndex(I);for(var P=0,F=this.columns;P<F;P++)this[I][P]*=T;return this},D.prototype.mulColumn=function(I,T){this.checkColumnIndex(I);for(var P=0,F=this.rows;P<F;P++)this[P][I]*=T},D.prototype.max=function(){var I=-(1/0),T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]>I&&(I=this[F][M]);return I},D.prototype.maxIndex=function(){var I=-(1/0),T={},P=this.rows,F=this.columns;for(var M=0;M<P;M++)for(var O=0;O<F;O++)this[M][O]>I&&(I=this[M][O],T.row=M,T.column=O);return T},D.prototype.min=function(){var I=1/0,T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)this[F][M]<I&&(I=this[F][M]);return I},D.prototype.minIndex=function(){var I=1/0,T={},P=this.rows,F=this.columns;for(var M=0;M<P;M++)for(var O=0;O<F;O++)this[M][O]<I&&(I=this[M][O],T.row=M,T.column=O);return T},D.prototype.maxRow=function(I){this.checkRowIndex(I);var T=-(1/0);for(var P=0,F=this.columns;P<F;P++)this[I][P]>T&&(T=this[I][P]);return T},D.prototype.maxRowIndex=function(I){this.checkRowIndex(I);var T=-(1/0),P={row:I};for(var F=0,M=this.columns;F<M;F++)this[I][F]>T&&(T=this[I][F],P.column=F);return P},D.prototype.minRow=function(I){this.checkRowIndex(I);var T=1/0;for(var P=0,F=this.columns;P<F;P++)this[I][P]<T&&(T=this[I][P]);return T},D.prototype.minRowIndex=function(I){this.checkRowIndex(I);var T=1/0,P={row:I,column:0};for(var F=0,M=this.columns;F<M;F++)this[I][F]<T&&(T=this[I][F],P.column=F);return P},D.prototype.maxColumn=function(I){this.checkColumnIndex(I);var T=-(1/0);for(var P=0,F=this.rows;P<F;P++)this[P][I]>T&&(T=this[P][I]);return T},D.prototype.maxColumnIndex=function(I){this.checkColumnIndex(I);var T=-(1/0),P={row:0,column:I};for(var F=0,M=this.rows;F<M;F++)this[F][I]>T&&(T=this[F][I],P.row=F);return P},D.prototype.minColumn=function(I){this.checkColumnIndex(I);var T=1/0;for(var P=0,F=this.rows;P<F;P++)this[P][I]<T&&(T=this[P][I]);return T},D.prototype.minColumnIndex=function(I){this.checkColumnIndex(I);var T=1/0,P={row:0,column:I};for(var F=0,M=this.rows;F<M;F++)this[F][I]<T&&(T=this[F][I],P.row=F);return P},D.prototype.diag=function(){if(!this.isSquare())throw new TypeError('Only square matrices have a diagonal.');var R=Array(this.rows);for(var I=0,T=this.rows;I<T;I++)R[I]=this[I][I];return R},D.prototype.sum=function(){var I=0,T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)I+=this[F][M];return I},D.prototype.mean=function(){return this.sum()/this.size},D.prototype.prod=function(){var R=1,I=this.rows,T=this.columns;for(var P=0;P<I;P++)for(var F=0;F<T;F++)R*=this[P][F];return R},D.prototype.cumulativeSum=function(){var I=0,T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)I+=this[F][M],this[F][M]=I;return this},D.prototype.dot=function(I){if(this.size!==I.size)throw new RangeError('vectors do not have the same size');var T=this.to1DArray(),P=I.to1DArray(),R=0,F=T.length;for(var M=0;M<F;M++)R+=T[M]*P[M];return R},D.prototype.mmul=function(I){if(!D.isMatrix(I))throw new TypeError('parameter "other" must be a matrix');this.columns!==I.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');var T=this.rows,P=this.columns,F=I.columns,M=new D(T,F),O=Array(P),$,Z,W;for(Z=0;Z<F;Z++){for(W=0;W<P;W++)O[W]=I[W][Z];for($=0;$<T;$++){var K=this[$],Q=0;for(W=0;W<P;W++)Q+=K[W]*O[W];M[$][Z]=Q}}return M},D.prototype.sortRows=function(I){for(var T=0,P=this.rows;T<P;T++)this[T].sort(I);return this},D.prototype.sortColumns=function(I){for(var T=0,P=this.columns;T<P;T++)this.setColumn(T,this.getColumn(T).sort(I));return this},D.prototype.transpose=function(){var I=new D(this.columns,this.rows),T=this.rows,P=this.columns;for(var F=0;F<T;F++)for(var M=0;M<P;M++)I[M][F]=this[F][M];return I},D.prototype.subMatrix=function(I,T,P,F){if(I>T||P>F||0>I||I>=this.rows||0>T||T>=this.rows||0>P||P>=this.columns||0>F||F>=this.columns)throw new RangeError('Argument out of range');var M=new D(T-I+1,F-P+1);for(var O=I;O<=T;O++)for(var $=P;$<=F;$++)M[O-I][$-P]=this[O][$];return M},D.prototype.subMatrixRow=function(I,T,P){if('undefined'==typeof T?(T=0,P=this.columns-1):'undefined'==typeof P&&(P=this.columns-1),T>P||0>T||T>=this.columns||0>P||P>=this.columns)throw new RangeError('Argument out of range.');var F=I.length,M=this.rows,O=new D(F,P-T+1);for(var $=0;$<F;$++)for(var Z=T;Z<=P;Z++){if(0>I[$]||I[$]>=M)throw new RangeError('Argument out of range.');O[$][Z-T]=this[I[$]][Z]}return O},D.prototype.subMatrixColumn=function(I,T,P){if('undefined'==typeof T?(T=0,P=this.rows-1):'undefined'==typeof P&&(P=this.rows-1),T>P||0>T||T>=this.rows||0>P||P>=this.rows)throw new RangeError('Argument out of range.');var F=I.length,M=this.columns,O=new D(P-T+1,F);for(var $=0;$<F;$++)for(var Z=T;Z<=P;Z++){if(0>I[$]||I[$]>=M)throw new RangeError('Argument out of range.');O[Z-T][$]=this[Z][I[$]]}return O},D.prototype.trace=function(){if(!this.isSquare())throw new TypeError('The matrix is not square');for(var R=0,I=0,T=this.rows;I<T;I++)R+=this[I][I];return R},D.prototype.abs=function(){var I=this.rows,T=this.columns;for(var P=0;P<I;P++)for(var F=0;F<T;F++)this[P][F]=Math.abs(this[P][F])},_.exports=D},function(_,S,D){'use strict';function C(O){return E(O,R.eye(O.rows))}function E(O,$){return O.isSquare()?new P(O).solve($):new F(O).solve($)}var R=D(33),I=D(35),T=D(37),P=D(38),F=D(39),M=D(40);R.prototype.inverse=function(){return C(this)},R.prototype.solve=function(O){return E(this,O)},_.exports={SingularValueDecomposition:I,SVD:I,EigenvalueDecomposition:T,EVD:T,LuDecomposition:P,LU:P,QrDecomposition:F,QR:F,CholeskyDecomposition:M,CHO:M,inverse:C,solve:E}},function(_,S,D){'use strict';function C(I,T){if(!(this instanceof C))return new C(I,T);I=E.checkMatrix(I),T=T||{};var P=I.clone(),F=I.rows,M=I.columns,O=Math.min(F,M),$=!0,Z=!0;!1===T.computeLeftSingularVectors&&($=!1),!1===T.computeRightSingularVectors&&(Z=!1);var W=!0===T.autoTranspose,K=!1;if(F<M)if(!W)console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');else{P=P.transpose(),F=P.rows,M=P.columns,K=!0;var Q=$;$=Z,Z=Q}var G=Array(Math.min(F+1,M)),ee=E.zeros(F,O),te=E.zeros(M,M),ne=Array(M),ae=Array(F),oe=Math.min(F-1,M),se=Math.max(0,Math.min(M-2,F)),le,de,ue,he,pe,me,ce,ge,fe,be,ye,xe,_e,ke,we,je,Se,ve,De,Ce,Ae;for(ue=0,be=Math.max(oe,se);ue<be;ue++){if(ue<oe){for(G[ue]=0,le=ue;le<F;le++)G[ue]=R(G[ue],P[le][ue]);if(0!==G[ue]){for(0>P[ue][ue]&&(G[ue]=-G[ue]),le=ue;le<F;le++)P[le][ue]/=G[ue];P[ue][ue]+=1}G[ue]=-G[ue]}for(de=ue+1;de<M;de++){if(ue<oe&&0!==G[ue]){for(pe=0,le=ue;le<F;le++)pe+=P[le][ue]*P[le][de];for(pe=-pe/P[ue][ue],le=ue;le<F;le++)P[le][de]+=pe*P[le][ue]}ne[de]=P[ue][de]}if($&&ue<oe)for(le=ue;le<F;le++)ee[le][ue]=P[le][ue];if(ue<se){for(ne[ue]=0,le=ue+1;le<M;le++)ne[ue]=R(ne[ue],ne[le]);if(0!==ne[ue]){for(0>ne[ue+1]&&(ne[ue]=-ne[ue]),le=ue+1;le<M;le++)ne[le]/=ne[ue];ne[ue+1]+=1}if(ne[ue]=-ne[ue],ue+1<F&&0!==ne[ue]){for(le=ue+1;le<F;le++)ae[le]=0;for(de=ue+1;de<M;de++)for(le=ue+1;le<F;le++)ae[le]+=ne[de]*P[le][de];for(de=ue+1;de<M;de++)for(pe=-ne[de]/ne[ue+1],le=ue+1;le<F;le++)P[le][de]+=pe*ae[le]}if(Z)for(le=ue+1;le<M;le++)te[le][ue]=ne[le]}}if(he=Math.min(M,F+1),oe<M&&(G[oe]=P[oe][oe]),F<he&&(G[he-1]=0),se+1<he&&(ne[se]=P[se][he-1]),ne[he-1]=0,$){for(de=oe;de<O;de++){for(le=0;le<F;le++)ee[le][de]=0;ee[de][de]=1}for(ue=oe-1;0<=ue;ue--)if(0!==G[ue]){for(de=ue+1;de<O;de++){for(pe=0,le=ue;le<F;le++)pe+=ee[le][ue]*ee[le][de];for(pe=-pe/ee[ue][ue],le=ue;le<F;le++)ee[le][de]+=pe*ee[le][ue]}for(le=ue;le<F;le++)ee[le][ue]=-ee[le][ue];for(ee[ue][ue]=1+ee[ue][ue],le=0;le<ue-1;le++)ee[le][ue]=0}else{for(le=0;le<F;le++)ee[le][ue]=0;ee[ue][ue]=1}}if(Z)for(ue=M-1;0<=ue;ue--){if(ue<se&&0!==ne[ue])for(de=ue+1;de<M;de++){for(pe=0,le=ue+1;le<M;le++)pe+=te[le][ue]*te[le][de];for(pe=-pe/te[ue+1][ue],le=ue+1;le<M;le++)te[le][de]+=pe*te[le][ue]}for(le=0;le<M;le++)te[le][ue]=0;te[ue][ue]=1}for(var Ee=he-1,Re=0,Ie=Math.pow(2,-52);0<he;){for(ue=he-2;-1<=ue&&-1!==ue;ue--)if(Math.abs(ne[ue])<=Ie*(Math.abs(G[ue])+Math.abs(G[ue+1]))){ne[ue]=0;break}if(ue===he-2)ye=4;else{for(me=he-1;me>=ue&&me!==ue;me--)if(pe=(me===he?0:Math.abs(ne[me]))+(me===ue+1?0:Math.abs(ne[me-1])),Math.abs(G[me])<=Ie*pe){G[me]=0;break}me===ue?ye=3:me===he-1?ye=1:(ye=2,ue=me)}switch(ue++,ye){case 1:{for(ce=ne[he-2],ne[he-2]=0,de=he-2;de>=ue;de--)if(pe=R(G[de],ce),ge=G[de]/pe,fe=ce/pe,G[de]=pe,de!==ue&&(ce=-fe*ne[de-1],ne[de-1]=ge*ne[de-1]),Z)for(le=0;le<M;le++)pe=ge*te[le][de]+fe*te[le][he-1],te[le][he-1]=-fe*te[le][de]+ge*te[le][he-1],te[le][de]=pe;break}case 2:{for(ce=ne[ue-1],ne[ue-1]=0,de=ue;de<he;de++)if(pe=R(G[de],ce),ge=G[de]/pe,fe=ce/pe,G[de]=pe,ce=-fe*ne[de],ne[de]=ge*ne[de],$)for(le=0;le<F;le++)pe=ge*ee[le][de]+fe*ee[le][ue-1],ee[le][ue-1]=-fe*ee[le][de]+ge*ee[le][ue-1],ee[le][de]=pe;break}case 3:{for(xe=Math.max(Math.max(Math.max(Math.max(Math.abs(G[he-1]),Math.abs(G[he-2])),Math.abs(ne[he-2])),Math.abs(G[ue])),Math.abs(ne[ue])),_e=G[he-1]/xe,ke=G[he-2]/xe,we=ne[he-2]/xe,je=G[ue]/xe,Se=ne[ue]/xe,ve=((ke+_e)*(ke-_e)+we*we)/2,De=_e*we*(_e*we),Ce=0,(0!==ve||0!==De)&&(Ce=Math.sqrt(ve*ve+De),0>ve&&(Ce=-Ce),Ce=De/(ve+Ce)),ce=(je+_e)*(je-_e)+Ce,Ae=je*Se,de=ue;de<he-1;de++){if(pe=R(ce,Ae),ge=ce/pe,fe=Ae/pe,de!==ue&&(ne[de-1]=pe),ce=ge*G[de]+fe*ne[de],ne[de]=ge*ne[de]-fe*G[de],Ae=fe*G[de+1],G[de+1]=ge*G[de+1],Z)for(le=0;le<M;le++)pe=ge*te[le][de]+fe*te[le][de+1],te[le][de+1]=-fe*te[le][de]+ge*te[le][de+1],te[le][de]=pe;if(pe=R(ce,Ae),ge=ce/pe,fe=Ae/pe,G[de]=pe,ce=ge*ne[de]+fe*G[de+1],G[de+1]=-fe*ne[de]+ge*G[de+1],Ae=fe*ne[de+1],ne[de+1]=ge*ne[de+1],$&&de<F-1)for(le=0;le<F;le++)pe=ge*ee[le][de]+fe*ee[le][de+1],ee[le][de+1]=-fe*ee[le][de]+ge*ee[le][de+1],ee[le][de]=pe}ne[he-2]=ce,Re=Re+1;break}case 4:{if(0>=G[ue]&&(G[ue]=0>G[ue]?-G[ue]:0,Z))for(le=0;le<=Ee;le++)te[le][ue]=-te[le][ue];for(;ue<Ee&&!(G[ue]>=G[ue+1]);){if(pe=G[ue],G[ue]=G[ue+1],G[ue+1]=pe,Z&&ue<M-1)for(le=0;le<M;le++)pe=te[le][ue+1],te[le][ue+1]=te[le][ue],te[le][ue]=pe;if($&&ue<F-1)for(le=0;le<F;le++)pe=ee[le][ue+1],ee[le][ue+1]=ee[le][ue],ee[le][ue]=pe;ue++}Re=0,he--;break}}}if(K){var Te=te;te=ee,ee=Te}this.m=F,this.n=M,this.s=G,this.U=ee,this.V=te}var E=D(33),R=D(36).hypotenuse;C.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){var I=Math.pow(2,-52),T=Math.max(this.m,this.n)*this.s[0]*I,P=0,F=this.s;for(var M=0,O=F.length;M<O;M++)F[M]>T&&P++;return P},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return this.U},get rightSingularVectors(){return this.V},get diagonalMatrix(){return E.diag(this.s)},solve:function(I){var T=this.threshold,P=this.s.length,F=E.zeros(P,P),M;for(M=0;M<P;M++)F[M][M]=Math.abs(this.s[M])<=T?0:1/this.s[M];var O=this.V.mmul(F),$=this.V.rows,Z=this.U.rows,W=E.zeros($,Z),K,Q,G;for(M=0;M<$;M++)for(K=0;K<Z;K++){for(G=0,Q=0;Q<P;Q++)G+=O[M][Q]*this.U[K][Q];W[M][K]=G}return W.mmul(I)},solveForDiagonal:function(I){return this.solve(E.diag(I))},inverse:function(){var I=this.threshold,T=this.V.rows,P=this.V.columns,F=new E(T,this.s.length),M,O;for(M=0;M<T;M++)for(O=0;O<P;O++)F[M][O]=Math.abs(this.s[O])>I?this.V[M][O]/this.s[O]:0;var $=this.U.rows,Z=this.U.columns,W=new E(T,$),K,Q;for(M=0;M<T;M++)for(O=0;O<$;O++){for(Q=0,K=0;K<Z;K++)Q+=F[M][K]*this.U[O][K];W[M][O]=Q}return W}},_.exports=C},function(_,S){'use strict';S.hypotenuse=function(C,E){var R;return Math.abs(C)>Math.abs(E)?(R=E/C,Math.abs(C)*Math.sqrt(1+R*R)):0===E?0:(R=C/E,Math.abs(E)*Math.sqrt(1+R*R))}},function(_,S,D){'use strict';function C(O){if(!(this instanceof C))return new C(O);if(O=F.checkMatrix(O),!O.isSquare())throw new Error('Matrix is not a square matrix');var $=O.columns,Z=F.zeros($,$),W=Array($),K=Array($),Q=O,G,ee;if(O.isSymmetric()){for(G=0;G<$;G++)for(ee=0;ee<$;ee++)Z[G][ee]=Q[G][ee];E($,K,W,Z),R($,K,W,Z)}else{var te=F.zeros($,$),ne=Array($);for(ee=0;ee<$;ee++)for(G=0;G<$;G++)te[G][ee]=Q[G][ee];I($,te,ne,Z),T($,K,W,Z,te)}this.n=$,this.e=K,this.d=W,this.V=Z}function E(O,$,Z,W){var K,Q,G,ee,te,ne,ae,oe;for(te=0;te<O;te++)Z[te]=W[O-1][te];for(ee=O-1;0<ee;ee--){for(oe=0,G=0,ne=0;ne<ee;ne++)oe=oe+Math.abs(Z[ne]);if(0===oe)for($[ee]=Z[ee-1],te=0;te<ee;te++)Z[te]=W[ee-1][te],W[ee][te]=0,W[te][ee]=0;else{for(ne=0;ne<ee;ne++)Z[ne]/=oe,G+=Z[ne]*Z[ne];for(K=Z[ee-1],Q=Math.sqrt(G),0<K&&(Q=-Q),$[ee]=oe*Q,G=G-K*Q,Z[ee-1]=K-Q,te=0;te<ee;te++)$[te]=0;for(te=0;te<ee;te++){for(K=Z[te],W[te][ee]=K,Q=$[te]+W[te][te]*K,ne=te+1;ne<=ee-1;ne++)Q+=W[ne][te]*Z[ne],$[ne]+=W[ne][te]*K;$[te]=Q}for(K=0,te=0;te<ee;te++)$[te]/=G,K+=$[te]*Z[te];for(ae=K/(G+G),te=0;te<ee;te++)$[te]-=ae*Z[te];for(te=0;te<ee;te++){for(K=Z[te],Q=$[te],ne=te;ne<=ee-1;ne++)W[ne][te]-=K*$[ne]+Q*Z[ne];Z[te]=W[ee-1][te],W[ee][te]=0}}Z[ee]=G}for(ee=0;ee<O-1;ee++){if(W[O-1][ee]=W[ee][ee],W[ee][ee]=1,G=Z[ee+1],0!==G){for(ne=0;ne<=ee;ne++)Z[ne]=W[ne][ee+1]/G;for(te=0;te<=ee;te++){for(Q=0,ne=0;ne<=ee;ne++)Q+=W[ne][ee+1]*W[ne][te];for(ne=0;ne<=ee;ne++)W[ne][te]-=Q*Z[ne]}}for(ne=0;ne<=ee;ne++)W[ne][ee+1]=0}for(te=0;te<O;te++)Z[te]=W[O-1][te],W[O-1][te]=0;W[O-1][O-1]=1,$[0]=0}function R(O,$,Z,W){var K,Q,G,ee,te,ne,ae,oe,se,le,de,ue,he,pe,me,ce,ge;for(G=1;G<O;G++)$[G-1]=$[G];$[O-1]=0;var fe=0,be=0,ye=Math.pow(2,-52);for(ne=0;ne<O;ne++){for(be=Math.max(be,Math.abs(Z[ne])+Math.abs($[ne])),ae=ne;ae<O&&!(Math.abs($[ae])<=ye*be);)ae++;if(ae>ne){ge=0;do{for(ge=ge+1,K=Z[ne],oe=(Z[ne+1]-K)/(2*$[ne]),se=M(oe,1),0>oe&&(se=-se),Z[ne]=$[ne]/(oe+se),Z[ne+1]=$[ne]*(oe+se),le=Z[ne+1],Q=K-Z[ne],G=ne+2;G<O;G++)Z[G]-=Q;for(fe=fe+Q,oe=Z[ae],de=1,ue=de,he=de,pe=$[ne+1],me=0,ce=0,G=ae-1;G>=ne;G--)for(he=ue,ue=de,ce=me,K=de*$[G],Q=de*oe,se=M(oe,$[G]),$[G+1]=me*se,me=$[G]/se,de=oe/se,oe=de*Z[G]-me*K,Z[G+1]=Q+me*(de*K+me*Z[G]),te=0;te<O;te++)Q=W[te][G+1],W[te][G+1]=me*W[te][G]+de*Q,W[te][G]=de*W[te][G]-me*Q;oe=-me*ce*he*pe*$[ne]/le,$[ne]=me*oe,Z[ne]=de*oe}while(Math.abs($[ne])>ye*be)}Z[ne]=Z[ne]+fe,$[ne]=0}for(G=0;G<O-1;G++){for(te=G,oe=Z[G],ee=G+1;ee<O;ee++)Z[ee]<oe&&(te=ee,oe=Z[ee]);if(te!==G)for(Z[te]=Z[G],Z[G]=oe,ee=0;ee<O;ee++)oe=W[ee][G],W[ee][G]=W[ee][te],W[ee][te]=oe}}function I(O,$,Z,W){var K=0,Q=O-1,G,ee,te,ne,ae,oe,se;for(oe=K+1;oe<=Q-1;oe++){for(se=0,ne=oe;ne<=Q;ne++)se=se+Math.abs($[ne][oe-1]);if(0!==se){for(te=0,ne=Q;ne>=oe;ne--)Z[ne]=$[ne][oe-1]/se,te+=Z[ne]*Z[ne];for(ee=Math.sqrt(te),0<Z[oe]&&(ee=-ee),te=te-Z[oe]*ee,Z[oe]=Z[oe]-ee,ae=oe;ae<O;ae++){for(G=0,ne=Q;ne>=oe;ne--)G+=Z[ne]*$[ne][ae];for(G=G/te,ne=oe;ne<=Q;ne++)$[ne][ae]-=G*Z[ne]}for(ne=0;ne<=Q;ne++){for(G=0,ae=Q;ae>=oe;ae--)G+=Z[ae]*$[ne][ae];for(G=G/te,ae=oe;ae<=Q;ae++)$[ne][ae]-=G*Z[ae]}Z[oe]=se*Z[oe],$[oe][oe-1]=se*ee}}for(ne=0;ne<O;ne++)for(ae=0;ae<O;ae++)W[ne][ae]=ne===ae?1:0;for(oe=Q-1;oe>=K+1;oe--)if(0!==$[oe][oe-1]){for(ne=oe+1;ne<=Q;ne++)Z[ne]=$[ne][oe-1];for(ae=oe;ae<=Q;ae++){for(ee=0,ne=oe;ne<=Q;ne++)ee+=Z[ne]*W[ne][ae];for(ee=ee/Z[oe]/$[oe][oe-1],ne=oe;ne<=Q;ne++)W[ne][ae]+=ee*Z[ne]}}}function T(O,$,Z,W,K){var Q=O-1,G=0,ee=O-1,te=Math.pow(2,-52),ne=0,ae=0,oe=0,se=0,le=0,de=0,ue=0,he=0,pe,me,ce,ge,fe,be,ye,xe,_e,ke,we,je,Se,ve,De;for(pe=0;pe<O;pe++)for((pe<G||pe>ee)&&(Z[pe]=K[pe][pe],$[pe]=0),me=Math.max(pe-1,0);me<O;me++)ae=ae+Math.abs(K[pe][me]);for(;Q>=G;){for(ge=Q;ge>G&&(de=Math.abs(K[ge-1][ge-1])+Math.abs(K[ge][ge]),0==de&&(de=ae),!(Math.abs(K[ge][ge-1])<te*de));)ge--;if(ge===Q)K[Q][Q]=K[Q][Q]+ne,Z[Q]=K[Q][Q],$[Q]=0,Q--,he=0;else if(ge===Q-1){if(ye=K[Q][Q-1]*K[Q-1][Q],oe=(K[Q-1][Q-1]-K[Q][Q])/2,se=oe*oe+ye,ue=Math.sqrt(Math.abs(se)),K[Q][Q]=K[Q][Q]+ne,K[Q-1][Q-1]=K[Q-1][Q-1]+ne,xe=K[Q][Q],0<=se){for(ue=0<=oe?oe+ue:oe-ue,Z[Q-1]=xe+ue,Z[Q]=Z[Q-1],0!=ue&&(Z[Q]=xe-ye/ue),$[Q-1]=0,$[Q]=0,xe=K[Q][Q-1],de=Math.abs(xe)+Math.abs(ue),oe=xe/de,se=ue/de,le=Math.sqrt(oe*oe+se*se),oe=oe/le,se=se/le,me=Q-1;me<O;me++)ue=K[Q-1][me],K[Q-1][me]=se*ue+oe*K[Q][me],K[Q][me]=se*K[Q][me]-oe*ue;for(pe=0;pe<=Q;pe++)ue=K[pe][Q-1],K[pe][Q-1]=se*ue+oe*K[pe][Q],K[pe][Q]=se*K[pe][Q]-oe*ue;for(pe=G;pe<=ee;pe++)ue=W[pe][Q-1],W[pe][Q-1]=se*ue+oe*W[pe][Q],W[pe][Q]=se*W[pe][Q]-oe*ue}else Z[Q-1]=xe+oe,Z[Q]=xe+oe,$[Q-1]=ue,$[Q]=-ue;Q=Q-2,he=0}else{if(xe=K[Q][Q],_e=0,ye=0,ge<Q&&(_e=K[Q-1][Q-1],ye=K[Q][Q-1]*K[Q-1][Q]),10==he){for(ne+=xe,pe=G;pe<=Q;pe++)K[pe][pe]-=xe;de=Math.abs(K[Q][Q-1])+Math.abs(K[Q-1][Q-2]),xe=_e=0.75*de,ye=-0.4375*de*de}if(30==he&&(de=(_e-xe)/2,de=de*de+ye,0<de)){for(de=Math.sqrt(de),_e<xe&&(de=-de),de=xe-ye/((_e-xe)/2+de),pe=G;pe<=Q;pe++)K[pe][pe]-=de;ne+=de,xe=_e=ye=0.964}for(he=he+1,fe=Q-2;fe>=ge&&(ue=K[fe][fe],le=xe-ue,de=_e-ue,oe=(le*de-ye)/K[fe+1][fe]+K[fe][fe+1],se=K[fe+1][fe+1]-ue-le-de,le=K[fe+2][fe+1],de=Math.abs(oe)+Math.abs(se)+Math.abs(le),oe=oe/de,se=se/de,le=le/de,fe!=ge)&&!(Math.abs(K[fe][fe-1])*(Math.abs(se)+Math.abs(le))<te*(Math.abs(oe)*(Math.abs(K[fe-1][fe-1])+Math.abs(ue)+Math.abs(K[fe+1][fe+1]))));)fe--;for(pe=fe+2;pe<=Q;pe++)K[pe][pe-2]=0,pe>fe+2&&(K[pe][pe-3]=0);for(ce=fe;ce<=Q-1&&(ve=ce!==Q-1,ce!=fe&&(oe=K[ce][ce-1],se=K[ce+1][ce-1],le=ve?K[ce+2][ce-1]:0,xe=Math.abs(oe)+Math.abs(se)+Math.abs(le),0!==xe&&(oe=oe/xe,se=se/xe,le=le/xe)),0!==xe);ce++)if(de=Math.sqrt(oe*oe+se*se+le*le),0>oe&&(de=-de),0!==de){for(ce==fe?ge!==fe&&(K[ce][ce-1]=-K[ce][ce-1]):K[ce][ce-1]=-de*xe,oe=oe+de,xe=oe/de,_e=se/de,ue=le/de,se=se/oe,le=le/oe,me=ce;me<O;me++)oe=K[ce][me]+se*K[ce+1][me],ve&&(oe=oe+le*K[ce+2][me],K[ce+2][me]=K[ce+2][me]-oe*ue),K[ce][me]=K[ce][me]-oe*xe,K[ce+1][me]=K[ce+1][me]-oe*_e;for(pe=0;pe<=Math.min(Q,ce+3);pe++)oe=xe*K[pe][ce]+_e*K[pe][ce+1],ve&&(oe=oe+ue*K[pe][ce+2],K[pe][ce+2]=K[pe][ce+2]-oe*le),K[pe][ce]=K[pe][ce]-oe,K[pe][ce+1]=K[pe][ce+1]-oe*se;for(pe=G;pe<=ee;pe++)oe=xe*W[pe][ce]+_e*W[pe][ce+1],ve&&(oe=oe+ue*W[pe][ce+2],W[pe][ce+2]=W[pe][ce+2]-oe*le),W[pe][ce]=W[pe][ce]-oe,W[pe][ce+1]=W[pe][ce+1]-oe*se}}}if(0!==ae){for(Q=O-1;0<=Q;Q--)if(oe=Z[Q],se=$[Q],0===se)for(ge=Q,K[Q][Q]=1,pe=Q-1;0<=pe;pe--){for(ye=K[pe][pe]-oe,le=0,me=ge;me<=Q;me++)le=le+K[pe][me]*K[me][Q];if(0>$[pe])ue=ye,de=le;else if(ge=pe,0===$[pe]?K[pe][Q]=0===ye?-le/(te*ae):-le/ye:(xe=K[pe][pe+1],_e=K[pe+1][pe],se=(Z[pe]-oe)*(Z[pe]-oe)+$[pe]*$[pe],be=(xe*de-ue*le)/se,K[pe][Q]=be,K[pe+1][Q]=Math.abs(xe)>Math.abs(ue)?(-le-ye*be)/xe:(-de-_e*be)/ue),be=Math.abs(K[pe][Q]),1<te*be*be)for(me=pe;me<=Q;me++)K[me][Q]=K[me][Q]/be}else if(0>se)for(ge=Q-1,Math.abs(K[Q][Q-1])>Math.abs(K[Q-1][Q])?(K[Q-1][Q-1]=se/K[Q][Q-1],K[Q-1][Q]=-(K[Q][Q]-oe)/K[Q][Q-1]):(De=P(0,-K[Q-1][Q],K[Q-1][Q-1]-oe,se),K[Q-1][Q-1]=De[0],K[Q-1][Q]=De[1]),K[Q][Q-1]=0,K[Q][Q]=1,pe=Q-2;0<=pe;pe--){for(ke=0,we=0,me=ge;me<=Q;me++)ke=ke+K[pe][me]*K[me][Q-1],we=we+K[pe][me]*K[me][Q];if(ye=K[pe][pe]-oe,0>$[pe])ue=ye,le=ke,de=we;else if(ge=pe,0===$[pe]?(De=P(-ke,-we,ye,se),K[pe][Q-1]=De[0],K[pe][Q]=De[1]):(xe=K[pe][pe+1],_e=K[pe+1][pe],je=(Z[pe]-oe)*(Z[pe]-oe)+$[pe]*$[pe]-se*se,Se=2*(Z[pe]-oe)*se,0===je&&0===Se&&(je=te*ae*(Math.abs(ye)+Math.abs(se)+Math.abs(xe)+Math.abs(_e)+Math.abs(ue))),De=P(xe*le-ue*ke+se*we,xe*de-ue*we-se*ke,je,Se),K[pe][Q-1]=De[0],K[pe][Q]=De[1],Math.abs(xe)>Math.abs(ue)+Math.abs(se)?(K[pe+1][Q-1]=(-ke-ye*K[pe][Q-1]+se*K[pe][Q])/xe,K[pe+1][Q]=(-we-ye*K[pe][Q]-se*K[pe][Q-1])/xe):(De=P(-le-_e*K[pe][Q-1],-de-_e*K[pe][Q],ue,se),K[pe+1][Q-1]=De[0],K[pe+1][Q]=De[1])),be=Math.max(Math.abs(K[pe][Q-1]),Math.abs(K[pe][Q])),1<te*be*be)for(me=pe;me<=Q;me++)K[me][Q-1]=K[me][Q-1]/be,K[me][Q]=K[me][Q]/be}for(pe=0;pe<O;pe++)if(pe<G||pe>ee)for(me=pe;me<O;me++)W[pe][me]=K[pe][me];for(me=O-1;me>=G;me--)for(pe=G;pe<=ee;pe++){for(ue=0,ce=G;ce<=Math.min(me,ee);ce++)ue=ue+W[pe][ce]*K[ce][me];W[pe][me]=ue}}}function P(O,$,Z,W){var K,Q;return Math.abs(Z)>Math.abs(W)?(K=W/Z,Q=Z+K*W,[(O+K*$)/Q,($-K*O)/Q]):(K=Z/W,Q=W+K*Z,[(K*O+$)/Q,(K*$-O)/Q])}var F=D(33),M=D(36).hypotenuse;C.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return this.V},get diagonalMatrix(){var O=this.n,$=this.e,Z=this.d,W=new F(O,O),K,Q;for(K=0;K<O;K++){for(Q=0;Q<O;Q++)W[K][Q]=0;W[K][K]=Z[K],0<$[K]?W[K][K+1]=$[K]:0>$[K]&&(W[K][K-1]=$[K])}return W}},_.exports=C},function(_,S,D){'use strict';function C(R){if(!(this instanceof C))return new C(R);R=E.checkMatrix(R);var I=R.clone(),T=I.rows,P=I.columns,F=Array(T),M=1,O,$,Z,W,K,Q,G,ee,te,ne;for(O=0;O<T;O++)F[O]=O;for(te=Array(T),$=0;$<P;$++){for(O=0;O<T;O++)te[O]=I[O][$];for(O=0;O<T;O++){for(ee=I[O],ne=Math.min(O,$),K=0,Z=0;Z<ne;Z++)K+=ee[Z]*te[Z];ee[$]=te[O]-=K}for(W=$,O=$+1;O<T;O++)Math.abs(te[O])>Math.abs(te[W])&&(W=O);if(W!==$){for(Z=0;Z<P;Z++)Q=I[W][Z],I[W][Z]=I[$][Z],I[$][Z]=Q;G=F[W],F[W]=F[$],F[$]=G,M=-M}if($<T&&0!==I[$][$])for(O=$+1;O<T;O++)I[O][$]/=I[$][$]}this.LU=I,this.pivotVector=F,this.pivotSign=M}var E=D(33);C.prototype={isSingular:function(){var R=this.LU,I=R.columns;for(var T=0;T<I;T++)if(0===R[T][T])return!0;return!1},get determinant(){var R=this.LU;if(!R.isSquare())throw new Error('Matrix must be square');var I=this.pivotSign,T=R.columns;for(var P=0;P<T;P++)I*=R[P][P];return I},get lowerTriangularFactor(){var R=this.LU,I=R.rows,T=R.columns,P=new E(I,T);for(var F=0;F<I;F++)for(var M=0;M<T;M++)P[F][M]=F>M?R[F][M]:F===M?1:0;return P},get upperTriangularFactor(){var R=this.LU,I=R.rows,T=R.columns,P=new E(I,T);for(var F=0;F<I;F++)for(var M=0;M<T;M++)P[F][M]=F<=M?R[F][M]:0;return P},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(R){R=E.checkMatrix(R);var I=this.LU,T=I.rows;if(T!==R.rows)throw new Error('Invalid matrix dimensions');if(this.isSingular())throw new Error('LU matrix is singular');var P=R.columns,F=R.subMatrixRow(this.pivotVector,0,P-1),M=I.columns,O,$,Z;for(Z=0;Z<M;Z++)for(O=Z+1;O<M;O++)for($=0;$<P;$++)F[O][$]-=F[Z][$]*I[O][Z];for(Z=M-1;0<=Z;Z--){for($=0;$<P;$++)F[Z][$]/=I[Z][Z];for(O=0;O<Z;O++)for($=0;$<P;$++)F[O][$]-=F[Z][$]*I[O][Z]}return F}},_.exports=C},function(_,S,D){'use strict';function C(I){if(!(this instanceof C))return new C(I);I=E.checkMatrix(I);var T=I.clone(),P=I.rows,F=I.columns,M=Array(F),O,$,Z,W;for(Z=0;Z<F;Z++){var K=0;for(O=Z;O<P;O++)K=R(K,T[O][Z]);if(0!==K){for(0>T[Z][Z]&&(K=-K),O=Z;O<P;O++)T[O][Z]/=K;for(T[Z][Z]+=1,$=Z+1;$<F;$++){for(W=0,O=Z;O<P;O++)W+=T[O][Z]*T[O][$];for(W=-W/T[Z][Z],O=Z;O<P;O++)T[O][$]+=W*T[O][Z]}}M[Z]=-K}this.QR=T,this.Rdiag=M}var E=D(33),R=D(36).hypotenuse;C.prototype={solve:function(I){I=E.checkMatrix(I);var T=this.QR,P=T.rows;if(I.rows!==P)throw new Error('Matrix row dimensions must agree');if(!this.isFullRank())throw new Error('Matrix is rank deficient');var F=I.columns,M=I.clone(),O=T.columns,$,Z,W,K;for(W=0;W<O;W++)for(Z=0;Z<F;Z++){for(K=0,$=W;$<P;$++)K+=T[$][W]*M[$][Z];for(K=-K/T[W][W],$=W;$<P;$++)M[$][Z]+=K*T[$][W]}for(W=O-1;0<=W;W--){for(Z=0;Z<F;Z++)M[W][Z]/=this.Rdiag[W];for($=0;$<W;$++)for(Z=0;Z<F;Z++)M[$][Z]-=M[W][Z]*T[$][W]}return M.subMatrix(0,O-1,0,F-1)},isFullRank:function(){var I=this.QR.columns;for(var T=0;T<I;T++)if(0===this.Rdiag[T])return!1;return!0},get upperTriangularFactor(){var I=this.QR,T=I.columns,P=new E(T,T),F,M;for(F=0;F<T;F++)for(M=0;M<T;M++)P[F][M]=F<M?I[F][M]:F===M?this.Rdiag[F]:0;return P},get orthogonalFactor(){var I=this.QR,T=I.rows,P=I.columns,F=new E(T,P),M,O,$,Z;for($=P-1;0<=$;$--){for(M=0;M<T;M++)F[M][$]=0;for(F[$][$]=1,O=$;O<P;O++)if(0!==I[$][$]){for(Z=0,M=$;M<T;M++)Z+=I[M][$]*F[M][O];for(Z=-Z/I[$][$],M=$;M<T;M++)F[M][O]+=Z*I[M][$]}}return F}},_.exports=C},function(_,S,D){'use strict';function C(R){if(!(this instanceof C))return new C(R);if(R=E.checkMatrix(R),!R.isSymmetric())throw new Error('Matrix is not symmetric');var I=R,T=I.rows,P=new E(T,T),F=!0,M,O,$;for(O=0;O<T;O++){var Z=P[O],W=0;for($=0;$<O;$++){var K=P[$],Q=0;for(M=0;M<$;M++)Q+=K[M]*Z[M];Z[$]=Q=(I[O][$]-Q)/P[$][$],W=W+Q*Q}for(W=I[O][O]-W,F&=0<W,P[O][O]=Math.sqrt(Math.max(W,0)),$=O+1;$<T;$++)P[O][$]=0}if(!F)throw new Error('Matrix is not positive definite');this.L=P}var E=D(33);C.prototype={get leftTriangularFactor(){return this.L},solve:function(R){R=E.checkMatrix(R);var I=this.L,T=I.rows;if(R.rows!==T)throw new Error('Matrix dimensions do not match');var P=R.columns,F=R.clone(),M,O,$;for($=0;$<T;$++)for(O=0;O<P;O++){for(M=0;M<$;M++)F[$][O]-=F[M][O]*I[$][M];F[$][O]/=I[$][$]}for($=T-1;0<=$;$--)for(O=0;O<P;O++){for(M=$+1;M<T;M++)F[$][O]-=F[M][O]*I[M][$];F[$][O]/=I[$][$]}return F}},_.exports=C},function(_,S,D){'use strict';function C(P){var F=0,M=0,O=P.length;for(let Z=0;Z<O;++Z)F+=P[Z];F/=O;var $=Array(O);for(let Z=0;Z<O;++Z)$[Z]=Math.abs(P[Z]-F);return $.sort(),M=1==O%2?$[(O-1)/2]/0.6745:0.5*($[O/2]+$[O/2-1])/0.6745,M}function E(P,F,M){var O,$,Z,W,K;for(var Q=0;Q<P.length;Q++)K=P[Q].i,M[K-1]>=M[K-2]&&M[K-1]>=M[K]?K--:M[K+1]>=M[K]&&M[K+1]>=M[K+2]?K++:M[K-2]>=M[K-3]&&M[K-2]>=M[K-1]?K-=2:M[K+2]>=M[K+1]&&M[K+2]>=M[K+3]&&(K+=2),0<M[K-1]&&0<M[K+1]&&M[K]>=M[K-1]&&M[K]>=M[K+1]&&(O=20*Math.log10(M[K-1]),$=20*Math.log10(M[K]),Z=20*Math.log10(M[K+1]),W=0.5*(O-Z)/(O-2*$+Z),P[Q].x=F[K]+(F[K]-F[K-1])*W,P[Q].y=M[K]-0.25*(M[K-1]-M[K+1])*W)}const R=D(13),I=D(42),T={sgOptions:{windowSize:9,polynomial:3},minMaxRatio:2.5e-4,broadRatio:0,maxCriteria:!0,smoothY:!0,realTopDetection:!1,heightFactor:0,boundaries:!1,derivativeThreshold:-1};_.exports=function(F,M,O){O=R({},T,O);let $=O.sgOptions;const Z=[].concat(M);if(!('noiseLevel'in O)){var W=0,K=Number.MAX_VALUE,Q;for(let Ce=0;Ce<F.length-1;++Ce)Q=Math.abs(F[Ce+1]-F[Ce]),Q<K&&(K=Q),Q>W&&(W=Q);O.noiseLevel=0.05>(W-K)/W?C(Z):0}const G={m:1,b:O.noiseLevel};O.maxCriteria||(G.m=-1,G.b*=-1);for(let Ce=0;Ce<Z.length;Ce++)Z[Ce]=G.m*Z[Ce]-G.b;for(let Ce=0;Ce<Z.length;Ce++)0>Z[Ce]&&(Z[Ce]=0);let ee=Z,te,ne;0.05>(W-K)/W?(O.smoothY&&(ee=I(Z,F[1]-F[0],{windowSize:$.windowSize,polynomial:$.polynomial,derivative:0})),te=I(Z,F[1]-F[0],{windowSize:$.windowSize,polynomial:$.polynomial,derivative:1}),ne=I(Z,F[1]-F[0],{windowSize:$.windowSize,polynomial:$.polynomial,derivative:2})):(O.smoothY&&(ee=I(Z,F,{windowSize:$.windowSize,polynomial:$.polynomial,derivative:0})),te=I(Z,F,{windowSize:$.windowSize,polynomial:$.polynomial,derivative:1}),ne=I(Z,F,{windowSize:$.windowSize,polynomial:$.polynomial,derivative:2}));const ae=F,oe=F[1]-F[0];var se=0,le=0;for(let Ce=0;Ce<ee.length;Ce++)Math.abs(ne[Ce])>se&&(se=Math.abs(ne[Ce])),Math.abs(ee[Ce])>le&&(le=Math.abs(ee[Ce]));var de=null,ue=null,he=Array(ee.length-2),pe=Array(ee.length),me=Array(ee.length),ce=Array(ee.length-2),ge=0,fe=0,be=0,ye=0;for(let Ce=1;Ce<ee.length-1;++Ce)Math.abs(te[Ce])>O.derivativeThreshold&&((te[Ce]<te[Ce-1]&&te[Ce]<=te[Ce+1]||te[Ce]<=te[Ce-1]&&te[Ce]<te[Ce+1])&&(ue={x:ae[Ce],index:Ce},0<oe&&null!=de&&(pe[fe++]=de,me[be++]=ue)),(te[Ce]>=te[Ce-1]&&te[Ce]>te[Ce+1]||te[Ce]>te[Ce-1]&&te[Ce]>=te[Ce+1])&&(de={x:ae[Ce],index:Ce},0>oe&&null!=ue&&(pe[fe++]=de,me[be++]=ue))),ne[Ce]<ne[Ce-1]&&ne[Ce]<ne[Ce+1]&&(he[ge++]=Ce,ce[ye++]=Math.abs(ne[Ce])<=O.broadRatio*se);he.length=ge,pe.length=fe,me.length=be,ce.length=ye;let xe=Array(he.length),_e=0,ke=-1,we,je,Se,ve,De;for(let Ce=0;Ce<he.length;++Ce){je=ae[he[Ce]],we=-1;let Ae=ke+1;for(ve=Number.MAX_VALUE,Se=0,De=!0;-1===we&&Ae<pe.length&&De;)Se=Math.abs(je-(pe[Ae].x+me[Ae].x)/2),Se<ve?ve=Se:De=!1,Se<Math.abs(pe[Ae].x-me[Ae].x)/2&&(we=Ae,ke=Ae),++Ae;if(-1!==we&&Math.abs(ee[he[Ce]])>O.minMaxRatio*le&&(xe[_e++]={index:he[Ce],x:je,y:(ee[he[Ce]]+G.b)/G.m,width:Math.abs(me[we].x-pe[we].x),soft:ce[Ce]},O.boundaries&&(xe[_e-1].left=pe[we],xe[_e-1].right=me[we]),O.heightFactor)){let Ee=ee[pe[we].index],Re=ee[me[we].index];xe[_e-1].height=O.heightFactor*(xe[_e-1].y-(Ee+Re)/2)}}xe.length=_e,O.realTopDetection&&E(xe,ae,ee);for(let Ce=0;Ce<xe.length;Ce++)xe[Ce].base=O.noiseLevel;return xe.sort(function(Ce,Ae){return Ce.x-Ae.x}),xe}},function(_,S,D){function C(M,O,$,Z){var W=0,K=0;for(var Q=O-$;Q<O+$;Q++)0<=Q&&Q<M.length-1&&(W+=M[Q+1]-M[Q],K++);return Math.pow(W/K,Z)}function E(M,O,$,Z){var W=0;return W=0<$?(4*$-2)/($*(2*O-$+1))*(M*E(M,O,$-1,Z)+Z*E(M,O,$-1,Z-1))-($-1)*(2*O+$)/($*(2*O-$+1))*E(M,O,$-2,Z):0==$&&0==Z?1:0,W}function R(M,O){var $=1;if(M>=O)for(var Z=M-O+1;Z<=M;Z++)$*=Z;return $}function I(M,O,$,Z,W){var K=0;for(var Q=0;Q<=Z;Q++)K+=(2*Q+1)*(R(2*$,Q)/R(2*$+Q+1,Q+1))*E(M,$,Q,0)*E(O,$,Q,W);return K}function T(M,O,$){var Z=Array(M),W=Math.floor(M/2);for(var K=-W;K<=W;K++){Z[K+W]=Array(M);for(var Q=-W;Q<=W;Q++)Z[K+W][Q+W]=I(Q,K,W,O,$)}return Z}var P=D(13);D(43);var F={windowSize:9,derivative:0,polynomial:3};_.exports=function(O,$,Z){if(Z=P({},F,Z),0==Z.windowSize%2||5>Z.windowSize||!Number.isInteger(Z.windowSize))throw new RangeError('Invalid window size (should be odd and at least 5 integer number)');if(Z.windowSize>O.length)throw new RangeError('Window size is higher than the data length '+Z.windowSize+'>'+O.length);if(0>Z.derivative||!Number.isInteger(Z.derivative))throw new RangeError('Derivative should be a positive integer');if(1>Z.polynomial||!Number.isInteger(Z.polynomial))throw new RangeError('Polynomial should be a positive integer');6<=Z.polynomial&&console.warn('You should not use polynomial grade higher than 5 if you are not sure that your data arises from such a model. Possible polynomial oscillation problems');var W=Z.windowSize,K=Math.floor(W/2),Q=O.length,G=Array(Q),ee=T(W,Z.polynomial,Z.derivative),te=0,ne=!0;'[object Array]'===Object.prototype.toString.call($)?ne=!1:te=Math.pow($,Z.derivative);for(var ae=0;ae<K;ae++){var oe=ee[K-ae-1],se=ee[K+ae+1],le=0,de=0;for(var ue=0;ue<W;ue++)le+=oe[ue]*O[ue],de+=se[ue]*O[Q-W+ue-1];ne?(G[K-ae-1]=le/te,G[Q-K+ae]=de/te):(te=C($,K-ae-1,K,Z.derivative),G[K-ae-1]=le/te,te=C($,Q-K+ae,K,Z.derivative),G[Q-K+ae]=de/te)}var he=ee[K];for(var ae=W;ae<Q+1;ae++){var pe=0;for(var ue=0;ue<W;ue++)pe+=he[ue]*O[ue+ae-W];ne||(te=C($,ae-K-1,K,Z.derivative)),G[ae-K-1]=pe/te}return G}},function(_,S,D){'use strict';S.array=D(44),S.matrix=D(45)},function(_,S){'use strict';function D(C,E){return C-E}S.sum=function(E){var C=0;for(var R=0;R<E.length;R++)C+=E[R];return C},S.max=function(E){var C=-(1/0),R=E.length;for(var I=0;I<R;I++)E[I]>C&&(C=E[I]);return C},S.min=function(E){var C=1/0,R=E.length;for(var I=0;I<R;I++)E[I]<C&&(C=E[I]);return C},S.minMax=function(E){var R=1/0,I=-(1/0),T=E.length;for(var P=0;P<T;P++)E[P]<R&&(R=E[P]),E[P]>I&&(I=E[P]);return{min:R,max:I}},S.arithmeticMean=function(E){var R=0,I=E.length;for(var T=0;T<I;T++)R+=E[T];return R/I},S.mean=S.arithmeticMean,S.geometricMean=function(E){var R=1,I=E.length;for(var T=0;T<I;T++)R*=E[T];return Math.pow(R,1/I)},S.logMean=function(E){var R=0,I=E.length;for(var T=0;T<I;T++)R+=Math.log(E[T]);return R/I},S.grandMean=function(E,R){var I=0,T=0,P=E.length;for(var F=0;F<P;F++)I+=R[F]*E[F],T+=R[F];return I/T},S.truncatedMean=function(E,R,I){I===void 0&&(I=!1),I||(E=E.slice().sort(D));var T=E.length,P=Math.floor(T*R),F=0;for(var M=P;M<T-P;M++)F+=E[M];return F/(T-2*P)},S.harmonicMean=function(E){var R=0,I=E.length;for(var T=0;T<I;T++){if(0===E[T])throw new RangeError('value at index '+T+'is zero');R+=1/E[T]}return I/R},S.contraHarmonicMean=function(E){var R=0,I=0,T=E.length;for(var P=0;P<T;P++)R+=E[P]*E[P],I+=E[P];if(0>I)throw new RangeError('sum of values is negative');return R/I},S.median=function(E,R){R===void 0&&(R=!1),R||(E=E.slice().sort(D));var I=E.length,T=Math.floor(I/2);return 0==I%2?0.5*(E[T-1]+E[T]):E[T]},S.variance=function(E,R){R===void 0&&(R=!0);var I=S.mean(E),T=0,P=E.length;for(var F=0;F<P;F++){var M=E[F]-I;T+=M*M}return R?T/(P-1):T/P},S.standardDeviation=function(E,R){return Math.sqrt(S.variance(E,R))},S.standardError=function(E){return S.standardDeviation(E)/Math.sqrt(E.length)},S.quartiles=function(E,R){'undefined'==typeof R&&(R=!1),R||(E=E.slice(),E.sort(D));var I=E.length/4,T=E[Math.ceil(I)-1],P=S.median(E,!0),F=E[Math.ceil(3*I)-1];return{q1:T,q2:P,q3:F}},S.pooledStandardDeviation=function(E,R){return Math.sqrt(S.pooledVariance(E,R))},S.pooledVariance=function(E,R){'undefined'==typeof R&&(R=!0);var I=0,T=0,P=E.length;for(var F=0;F<P;F++){var M=E[F],O=S.variance(M);I+=(M.length-1)*O,T+=R?M.length-1:M.length}return I/T},S.mode=function(E){var R=E.length,I=Array(R),T;for(T=0;T<R;T++)I[T]=0;var P=Array(R),F=0;for(T=0;T<R;T++){var M=P.indexOf(E[T]);0<=M?I[M]++:(P[F]=E[T],I[F]=1,F++)}var O=0,$=0;for(T=0;T<F;T++)I[T]>O&&(O=I[T],$=T);return P[$]},S.covariance=function(E,R,I){'undefined'==typeof I&&(I=!0);var T=S.mean(E),P=S.mean(R);if(E.length!==R.length)throw'Vectors do not have the same dimensions';var F=0,M=E.length;for(var O=0;O<M;O++){var $=E[O]-T,Z=R[O]-P;F+=$*Z}return I?F/(M-1):F/M},S.skewness=function(E,R){'undefined'==typeof R&&(R=!0);var I=S.mean(E),T=0,P=0,F=E.length;for(var M=0;M<F;M++){var O=E[M]-I;T+=O*O,P+=O*O*O}var $=T/F,Z=P/F,W=Z/Math.pow($,3/2);if(R){var K=Math.sqrt(F*(F-1));return K/(F-2)*W}return W},S.kurtosis=function(E,R){'undefined'==typeof R&&(R=!0);var I=S.mean(E),T=E.length,P=0,F=0;for(var M=0;M<T;M++){var O=E[M]-I;P+=O*O,F+=O*O*O*O}var $=P/T,Z=F/T;if(R){var W=P/(T-1),K=F/(W*W);return T*(T+1)/((T-1)*(T-2)*(T-3))*K-3*((T-1)*(T-1)/((T-2)*(T-3)))}return Z/($*$)-3},S.entropy=function(E,R){'undefined'==typeof R&&(R=0);var I=0,T=E.length;for(var P=0;P<T;P++)I+=E[P]*Math.log(E[P]+R);return-I},S.weightedMean=function(E,R){var I=0,T=E.length;for(var P=0;P<T;P++)I+=E[P]*R[P];return I},S.weightedStandardDeviation=function(E,R){return Math.sqrt(S.weightedVariance(E,R))},S.weightedVariance=function(E,R){var I=S.weightedMean(E,R),T=0,P=E.length,F=0,M=0;for(var O=0;O<P;O++){var $=E[O]-I,Z=R[O];T+=Z*($*$),M+=Z,F+=Z*Z}return T*(M/(M*M-F))},S.center=function(E,R){'undefined'==typeof R&&(R=!1);var I=E;R||(I=E.slice());var T=S.mean(I),P=I.length;for(var F=0;F<P;F++)I[F]-=T},S.standardize=function(E,R,I){'undefined'==typeof R&&(R=S.standardDeviation(E)),'undefined'==typeof I&&(I=!1);var T=E.length,P=I?E:Array(T);for(var F=0;F<T;F++)P[F]=E[F]/R;return P},S.cumulativeSum=function(E){var R=E.length,I=Array(R);I[0]=E[0];for(var T=1;T<R;T++)I[T]=I[T-1]+E[T];return I}},function(_,S,D){'use strict';function C(Z,W){'undefined'==typeof W&&(W=0);var K=Z.length,Q=Z[0].length,G,ee,te,ne;if(-1===W){for(G=[0],ee=K*Q,te=0;te<K;te++)for(ne=0;ne<Q;ne++)G[0]+=Z[te][ne];G[0]/=ee}else if(0===W)for(G=Array(Q),ee=K,ne=0;ne<Q;ne++){for(G[ne]=0,te=0;te<K;te++)G[ne]+=Z[te][ne];G[ne]/=ee}else if(1===W)for(G=Array(K),ee=Q,ne=0;ne<K;ne++){for(G[ne]=0,te=0;te<Q;te++)G[ne]+=Z[ne][te];G[ne]/=ee}else throw new Error('Invalid dimension');return G}function E(Z,W,K){var Q=R(Z,W,K),G=Q.length;for(var ee=0;ee<G;ee++)Q[ee]=Math.sqrt(Q[ee]);return Q}function R(Z,W,K){'undefined'==typeof K&&(K=!0),W=W||C(Z);var Q=Z.length;if(0===Q)return[];var G=Z[0].length,ee=Array(G);for(var te=0;te<G;te++){var ne=0,ae=0,oe=0;for(var se=0;se<Q;se++)oe=Z[se][te]-W[te],ne+=oe,ae+=oe*oe;ee[te]=K?(ae-ne*ne/Q)/(Q-1):(ae-ne*ne/Q)/Q}return ee}function I(Z,W,K){'undefined'==typeof K&&(K=0),'undefined'==typeof W&&(0===K?W=Z.length-1:1==K&&(W=Z[0].length-1));var Q=C(Z,K),G=Z.length;if(0===G)return[[]];var ee=Z[0].length,te,ne,ae,oe,se;if(0===K){for(te=Array(ee),ne=0;ne<ee;ne++)te[ne]=Array(ee);for(ne=0;ne<ee;ne++)for(ae=ne;ae<ee;ae++){for(oe=0,se=0;se<G;se++)oe+=(Z[se][ae]-Q[ae])*(Z[se][ne]-Q[ne]);oe/=W,te[ne][ae]=oe,te[ae][ne]=oe}}else if(1===K){for(te=Array(G),ne=0;ne<G;ne++)te[ne]=Array(G);for(ne=0;ne<G;ne++)for(ae=ne;ae<G;ae++){for(oe=0,se=0;se<ee;se++)oe+=(Z[ae][se]-Q[ae])*(Z[ne][se]-Q[ne]);oe/=W,te[ne][ae]=oe,te[ae][ne]=oe}}else throw new Error('Invalid dimension');return te}function T(Z,W,K){return W=W||C(Z),'undefined'==typeof K&&(K=E(Z,!0,W)),F(P(Z,W,!1),K,!0)}function P(Z,W,K){W=W||C(Z);var Q=Z,G=Z.length,ee,te,ne;if(!K)for(Q=Array(G),ee=0;ee<G;ee++)Q[ee]=Array(Z[ee].length);for(ee=0;ee<G;ee++){var ae=Q[ee];for(te=0,ne=ae.length;te<ne;te++)ae[te]=Z[ee][te]-W[te]}return Q}function F(Z,W,K){'undefined'==typeof W&&(W=E(Z));var Q=Z,G=Z.length,ee,te,ne;if(!K)for(Q=Array(G),ee=0;ee<G;ee++)Q[ee]=Array(Z[ee].length);for(ee=0;ee<G;ee++){var ae=Q[ee],oe=Z[ee];for(te=0,ne=ae.length;te<ne;te++)0===W[te]||isNaN(W[te])||(ae[te]=oe[te]/W[te])}return Q}function M(Z,W,K){'undefined'==typeof K&&(K=0);var Q=Z.length;if(0===Q)return[];var G=Z[0].length,ee,te,ne,ae,oe,se;if(0===K){for(ee=Array(G),te=0;te<G;te++)ee[te]=0;for(te=0;te<Q;te++)for(se=Z[te],oe=W[te],ae=0;ae<G;ae++)ee[ae]+=se[ae]*oe}else if(1===K){for(ee=Array(Q),te=0;te<Q;te++)ee[te]=0;for(ae=0;ae<Q;ae++)for(se=Z[ae],oe=W[ae],te=0;te<G;te++)ee[ae]+=se[te]*oe}else throw new Error('Invalid dimension');var le=$.sum(W);if(0!==le)for(te=0,ne=ee.length;te<ne;te++)ee[te]/=le;return ee}function O(Z,W,K,Q,G){G=G||0,K=K||M(Z,W,G),'undefined'==typeof Q&&(Q=1);var ee=Z.length;if(0===ee)return[[]];var te=Z[0].length,ne,ae,oe,se,le;if(0===G){for(ne=Array(te),ae=0;ae<te;ae++)ne[ae]=Array(te);for(ae=0;ae<te;ae++)for(oe=ae;oe<te;oe++){for(le=0,se=0;se<ee;se++)le+=W[se]*(Z[se][oe]-K[oe])*(Z[se][ae]-K[ae]);ne[ae][oe]=le*Q,ne[oe][ae]=le*Q}}else if(1===G){for(ne=Array(ee),ae=0;ae<ee;ae++)ne[ae]=Array(ee);for(ae=0;ae<ee;ae++)for(oe=ae;oe<ee;oe++){for(le=0,se=0;se<te;se++)le+=W[se]*(Z[oe][se]-K[oe])*(Z[ae][se]-K[ae]);ne[ae][oe]=le*Q,ne[oe][ae]=le*Q}}else throw new Error('Invalid dimension');return ne}var $=D(44);_.exports={entropy:function(W,K){'undefined'==typeof K&&(K=0);var Q=0,G=W.length,ee=W[0].length;for(var te=0;te<G;te++)for(var ne=0;ne<ee;ne++)Q+=W[te][ne]*Math.log(W[te][ne]+K);return-Q},mean:C,standardDeviation:E,variance:R,median:function(W){var K=W.length,Q=W[0].length,G=Array(Q);for(var ee=0;ee<Q;ee++){var te=Array(K);for(var ne=0;ne<K;ne++)te[ne]=W[ne][ee];te.sort();var ae=te.length;G[ee]=0==ae%2?0.5*(te[ae/2]+te[ae/2-1]):te[Math.floor(ae/2)]}return G},mode:function(W){var K=W.length,Q=W[0].length,G=Array(Q),ee,te;for(ee=0;ee<Q;ee++){var ne=Array(K);for(var ae=0;ae<K;ae++)ne[ae]=0;var oe=Array(K),se=0;for(te=0;te<K;te++){var le=oe.indexOf(W[te][ee]);0<=le?ne[le]++:(oe[se]=W[te][ee],ne[se]=1,se++)}var de=0,ue=0;for(te=0;te<se;te++)ne[te]>de&&(de=ne[te],ue=te);G[ee]=oe[ue]}return G},skewness:function(W,K){'undefined'==typeof K&&(K=!0);var Q=C(W),G=W.length,ee=Q.length,te=Array(ee);for(var ne=0;ne<ee;ne++){var ae=0,oe=0;for(var se=0;se<G;se++){var le=W[se][ne]-Q[ne];ae+=le*le,oe+=le*le*le}var de=ae/G,ue=oe/G,he=ue/Math.pow(de,3/2);if(K){var pe=Math.sqrt(G*(G-1));te[ne]=pe/(G-2)*he}else te[ne]=he}return te},kurtosis:function(W,K){'undefined'==typeof K&&(K=!0);var Q=C(W),G=W.length,ee=W[0].length,te=Array(ee);for(var ne=0;ne<ee;ne++){var ae=0,oe=0;for(var se=0;se<G;se++){var le=W[se][ne]-Q[ne];ae+=le*le,oe+=le*le*le*le}var de=ae/G,ue=oe/G;if(K){var he=ae/(G-1),pe=oe/(he*he);te[ne]=G*(G+1)/((G-1)*(G-2)*(G-3))*pe-3*((G-1)*(G-1)/((G-2)*(G-3)))}else te[ne]=ue/(de*de)-3}return te},standardError:function(W){var K=W.length,Q=E(W),G=Q.length,ee=Array(G),te=Math.sqrt(K);for(var ne=0;ne<G;ne++)ee[ne]=Q[ne]/te;return ee},covariance:function(W,K){return I(W,void 0,K)},scatter:I,correlation:function(W){var K=C(W),Q=E(W,!0,K),G=T(W,K,Q),ee=W.length,te=W[0].length,ne,ae,oe=Array(te);for(ne=0;ne<te;ne++)oe[ne]=Array(te);for(ne=0;ne<te;ne++)for(ae=ne;ae<te;ae++){var se=0;for(var le=0,de=G.length;le<de;le++)se+=G[le][ae]*G[le][ne];se/=ee-1,oe[ne][ae]=se,oe[ae][ne]=se}return oe},zScores:T,center:P,standardize:F,weightedVariance:function(W,K){var Q=C(W),G=W.length;if(0===G)return[];var ee=W[0].length,te=Array(ee);for(var ne=0;ne<ee;ne++){var ae=0,oe=0,se=0;for(var le=0;le<G;le++){var de=W[le][ne]-Q[ne],ue=K[le];ae+=ue*(de*de),se+=ue,oe+=ue*ue}te[ne]=ae*(se/(se*se-oe))}return te},weightedMean:M,weightedCovariance:function(W,K,Q,G){G=G||0,Q=Q||M(W,K,G);var ee=0,te=0;for(var ne=0,ae=K.length;ne<ae;ne++)ee+=K[ne],te+=K[ne]*K[ne];var oe=ee/(ee*ee-te);return O(W,K,Q,oe,G)},weightedScatter:O}},function(_,S,D){'use strict';D(16);const C=D(15),E=D(47),R=D(49),I=D(50);class T extends Array{constructor(P){if(Array.isArray(P)){super(P.length);for(let F=0;F<P.length;F++)this[F]=P[F]}else'number'==typeof P?super(P):super()}static fromPrediction(P,F){let M=Object.assign({},{lineWidth:1,frequency:400,nucleus:'1H'},F);const O=P.length,$=Array(O);var Z,W,K,Q,G,ee,te;for(Z=0;Z<O;Z++)$[P[Z].diaIDs[0]]?$[P[Z].diaIDs[0]].push(Z):$[P[Z].diaIDs[0]]=[Z];const ne=Object.keys($),ae=Array(ne.length);for(Z=0;Z<ne.length;Z++){if(K=$[ne[Z]],Q=P[K[0]],G=0,te=Q.j,te)for(W=0;W<te.length;W++)G+=te[W].coupling;for(G+=2*M.lineWidth,G/=M.frequency,ae[Z]={from:Q.delta-G,to:Q.delta+G,integral:1,signal:[P[K[0]]]},W=1;W<K.length;W++)ae[Z].signal.push(P[K[W]]),ae[Z].integral++}for(Z=0;Z<ae.length;Z++)for(ae[Z]._highlight=ae[Z].signal[0].diaIDs,ee=(ae[Z].from+ae[Z].to)/2,G=Math.abs(ae[Z].from-ae[Z].to),W=ae.length-1;W>Z;W--)Math.abs(ee-(ae[W].from+ae[W].to)/2)<=Math.abs(G+Math.abs(ae[W].from-ae[W].to))/2&&(ae[Z].from=Math.min(ae[Z].from,ae[W].from),ae[Z].to=Math.max(ae[Z].to,ae[W].to),ae[Z].integral=ae[Z].integral+ae[W].integral,ae[Z]._highlight.push(ae[W].signal[0].diaIDs[0]),ae.splice(W,1),W=ae.length-1,ee=(ae[Z].from+ae[Z].to)/2,G=Math.abs(ae[Z].from-ae[Z].to));return new T(ae)}static fromSpectrum(P,F){return this.options=Object.assign({},{nH:99,clean:!0,realTop:!1,thresholdFactor:1,compile:!0,integralFn:0,optimize:!0,idPrefix:'',format:'old',frequencyCluster:16},F),new T(C(P,this.options))}update(){for(let M=0;M<this.length;M++){var P=this[M];for(let O=0;O<P.signal.length;O++){var F=P.signal[O];if(F.j&&!F.multiplicity){F.multiplicity='';for(let $=0;$<F.j.length;$++)F.multiplicity+=F.j[$].multiplicity}}}return this}updateIntegrals(P){var F=P.factor||1,M;if(P.sum){var O=P.sum||1,$=0;for(M=0;M<this.length;M++)$+=Math.round(this[M].integral);F=O/$}for(M=0;M<this.length;M++)this[M].integral*=F;return this}toVector(P){return R(this.toPeakList(),P)}toPeakList(){var P=[],F,M;for(F=0;F<this.length;F++){var O=this[F];for(M=0;M<O.signal.length;M++)P=P.concat(O.signal[M].peak)}return P}toACS(P){return E(this,P)}toAnnotations(P){return I.annotations1D(this,P)}}_.exports=T},function(_,S,D){'use strict';function C(ne,ae,oe,se,le,de){W(),E(ne,le,de);var ue=ne.length,he;for(var pe=0;pe<ue;pe++)he=ae?ne[pe]:ne[ue-pe-1],he&&(W(),R(he,oe),I(he,se))}function E(ne,ae,oe){'NMR SPEC'===ne.type?(oe.nucleus&&(G+=Z(oe.nucleus)),G+=' NMR',(ae||oe.observe)&&(G+=' (',oe.observe&&(G+=(1*oe.observe).toFixed(0)+' MHz',ae&&(G+=', ')),ae&&(G+=$(ae)),G+=')'),G+=' \u03B4 '):'IR'===ne.type?G+=' IR ':'MASS'===ne.type&&(G+=' MASS ')}function R(ne,ae){var oe=0,se=0,le=0,de;ne.from&&('string'==typeof ne.from?oe=parseFloat(ne.from):oe=ne.from),ne.to&&('string'==typeof ne.to?se=parseFloat(ne.to):se=ne.to),ne.signal[0].delta?'string'==typeof ne.signal[0].delta?le=parseFloat(ne.signal[0].delta):le=ne.signal[0].delta:de=!0,!0===de||'m'===ne.signal[0].multiplicity&&!0===te?ne.from&&ne.to?oe<se?G+=oe.toFixed(ae)+'-'+se.toFixed(ae):G+=se.toFixed(ae)+'-'+oe.toFixed(ae):ne.signal[0].delta&&(G+='?'):ne.signal[0].delta?G+=le.toFixed(ae):ne.from&&ne.to&&(G+=((oe+se)/2).toFixed(ae))}function I(ne,ae){ee='',F(ne),T(ne),M(ne,ae),P(ne),0<ee.length&&(G+=' ('+ee+')')}function T(ne){ne.pubIntegration?(K(),ee+=ne.pubIntegration):ne.integral&&(K(),ee+=ne.integral.toFixed(0)+' H')}function P(ne){ne.signal[0].pubAssignment?(K(),ee+=O(ne.signal[0].pubAssignment)):ne.signal[0].assignment&&(K(),ee+=O(ne.signal[0].assignment))}function F(ne){ne.signal[0].pubMultiplicity?(K(),ee+=ne.pubMultiplicity):ne.signal[0].multiplicity&&(K(),ee+=ne.signal[0].multiplicity)}function M(ne,ae){if(0>'sm'.indexOf(ne.signal[0].multiplicity)&&ne.signal[0].j&&0<ne.signal[0].j.length){var oe=ne.signal[0].j,se='<i>J</i> = ';for(var le=0;le<oe.length;le++){var de=oe[le].coupling||0;11<se.length&&(se+=', '),se+=de.toFixed(ae)}K(),ee+=se+' Hz'}}function O(ne){return ne=ne.replace(/([0-9])/g,'<sub>$1</sub>'),ne=ne.replace(/\"([^\"]*)\"/g,'<i>$1</i>'),ne}function $(ne){return ne=ne.replace(/([0-9])/g,'<sub>$1</sub>'),ne}function Z(ne){return ne=ne.replace(/([0-9])/g,'<sup>$1</sup>'),ne}function W(){0<G.length&&!G.match(/ $/)&&(G+=', ')}function K(){0<ee.length&&!ee.match(', $')&&(ee+=', ')}const Q=D(48);var G='',ee='',te=!1;_.exports=function(ne,ae){let oe=Object.assign({},{nucleus:'1H'},ae);var se=JSON.parse(JSON.stringify(ne));if(se[0].delta1)return Q.toACS(se,oe);se.update&&(se=se.update()),G='',ee='';var le=null;return oe&&oe.solvent&&(le=oe.solvent),oe&&void 0!==oe.rangeForMultiplet&&(te=oe.rangeForMultiplet),oe&&oe.ascending?se.sort(function(de,ue){return ue.from-de.from}):se.sort(function(de,ue){return de.from-ue.from}),se.type='NMR SPEC',oe&&'1H'===oe.nucleus&&C(se,!1,2,1,le,oe),oe&&'13C'===oe.nucleus&&C(se,!1,1,0,le,oe),0<G.length&&(G+='.'),G}},function(_){'use strict';function S(G,ee,te,ne,ae){$(),D(G,ae);var oe=G.length,se;for(var le=0;le<oe;le++)se=ee?G[le]:G[oe-le-1],se&&($(),C(se,te),E(se,ne))}function D(G,ee){'NMR SPEC'===G.type?(G[0].nucleus&&(W+=O(G[0].nucleus)),W+=' NMR',(ee||G[0].observe)&&(W+=' (',G[0].observe&&(W+=(1*G[0].observe).toFixed(0)+' MHz',ee&&(W+=', ')),ee&&(W+=M(ee)),W+=')'),W+=' \u03B4 '):'IR'===G.type?W+=' IR ':'MASS'===G.type&&(W+=' MASS ')}function C(G,ee){var te=0,ne=0,ae=0;G.integralData.from&&('string'==typeof G.integralData.from?te=parseFloat(G.integralData.from):te=G.integralData.from),G.integralData.to&&('string'==typeof G.integralData.to?ne=parseFloat(G.integralData.to):ne=G.integralData.to),G.delta1&&('string'==typeof G.delta1?ae=parseFloat(G.delta1):ae=G.delta1),!0===G.asymmetric||'m'===G.multiplicity&&!0===Q?G.integralData.from&&G.integralData.to?te<ne?W+=te.toFixed(ee)+'-'+ne.toFixed(ee):W+=ne.toFixed(ee)+'-'+te.toFixed(ee):G.delta1&&(W+=ae.toFixed(ee)):G.delta1?W+=ae.toFixed(ee):G.integralData.from&&G.integralData.to&&(W+=((te+ne)/2).toFixed(ee))}function E(G,ee){K='',T(G),R(G),P(G,ee),I(G),0<K.length&&(W+=' ('+K+')')}function R(G){G.pubIntegration?(Z(),K+=G.pubIntegration):G.integralData&&(Z(),K+=G.integralData.value.toFixed(0)+' H')}function I(G){G.pubAssignment?(Z(),K+=F(G.pubAssignment)):G.assignment&&(Z(),K+=F(G.assignment))}function T(G){G.pubMultiplicity?(Z(),K+=G.pubMultiplicity):G.multiplicity&&(Z(),K+=G.multiplicity)}function P(G,ee){if(G.nmrJs){var te='<i>J</i> = ';for(var ne=0;ne<G.nmrJs.length;ne++){var ae=G.nmrJs[ne].coupling;11<te.length&&(te+=', '),te+=ae.toFixed(ee)}Z(),K+=te+' Hz'}}function F(G){return G=G.replace(/([0-9])/g,'<sub>$1</sub>'),G=G.replace(/\"([^\"]*)\"/g,'<i>$1</i>'),G}function M(G){return G=G.replace(/([0-9])/g,'<sub>$1</sub>'),G}function O(G){return G=G.replace(/([0-9])/g,'<sup>$1</sup>'),G}function $(){0<W.length&&!W.match(/ $/)&&(W+=', ')}function Z(){0<K.length&&!K.match(', $')&&(K+=', ')}var W='',K='',Q=!1;_.exports.toACS=function(G,ee){W='',K='';var te=null;return ee&&ee.solvent&&(te=ee.solvent),ee&&void 0!==ee.rangeForMultiplet&&(Q=ee.rangeForMultiplet),ee&&ee.ascending?G.sort(function(ne,ae){return ae.delta1-ne.delta1}):G.sort(function(ne,ae){return ne.delta1-ae.delta1}),G.type='NMR SPEC','1H'===G[0].nucleus?S(G,!1,2,1,te):'13C'===G[0].nucleus&&S(G,!1,1,0,te),0<W.length&&(W+='.'),W}},function(_){'use strict';_.exports=function(S,D){var C=D||{},E=C.from,R=C.to,I=C.nbPoints||16384,T=C.fnName||'gaussian',P=C.nWidth||4;if(!E){E=Number.MAX_VALUE;for(let ee=0;ee<S.length;ee++)S[ee].x-S[ee].width*P<E&&(E=S[ee].x-S[ee].width*P)}if(!R){R=Number.MIN_VALUE;for(let ee=0;ee<S.length;ee++)S[ee].x+S[ee].width*P>R&&(R=S[ee].x+S[ee].width*P)}var F=Array(I),M=Array(I),O=(R-E)/(I-1);for(let ee=0;ee<I;ee++)F[ee]=E+ee*O,M[ee]=0;var $='intensity';S[0].y&&($='y');for(let ee=0;ee<S.length;ee++){var Z=S[ee];if(Z.x>E&&Z.x<R){var W=Math.round((Z.x-E)/O),K=Math.round(Z.width*P/O);if('gaussian'===T)for(var Q=W-K;Q<W+K;Q++)0<=Q&&Q<I&&(M[Q]+=Z[$]*Math.exp(-0.5*Math.pow((Z.x-F[Q])/(Z.width/2),2)));else{var G=Z[$]*Math.pow(Z.width,2)/4;for(let te=W-K;te<W+K;te++)0<=te&&te<I&&(M[te]+=G/(Math.pow(Z.x-F[te],2)+Math.pow(Z.width/2,2)))}}}return{x:F,y:M}}},function(_){'use strict';var S={type:'rect',line:0,lineLabel:1,labelColor:'red',strokeColor:'red',strokeWidth:'1px',fillColor:'green',width:0.05,height:10,toFixed:1},D={type:'rect',labelColor:'red',strokeColor:'red',strokeWidth:'1px',fillColor:'green',width:'6px',height:'6px'};_.exports={annotations2D:function(E,R){var I=Object.assign({},D,R),T=[];for(var P=E.length-1;0<=P;P--){var F=E[P],M={};M.type=I.type,M._highlight=F._highlight,M._highlight&&0!==M._highlight.length||(M._highlight=[F.signalID]),F._highlight=M._highlight,M.position=[{x:F.fromTo[0].from-0.01,y:F.fromTo[1].from-0.01,dx:I.width,dy:I.height},{x:F.fromTo[0].to+0.01,y:F.fromTo[1].to+0.01}],M.fillColor=I.fillColor,M.label={text:F.remark,position:{x:F.signal[0].delta[0],y:F.signal[0].delta[1]-0.025}},M.strokeColor=1===F.integral?I.strokeColor:'rgb(0,128,0)',M.strokeWidth=I.strokeWidth,M.width=I.width,M.height=I.height,M.info=F,T.push(M)}return T},annotations1D:function(E,R){var I=Object.assign({},S,R),T=I.height,P=[];for(var F=0;F<E.length;F++){var M=E[F],O={};P.push(O),O.line=I.line,O._highlight=M._highlight,O._highlight&&0!==O._highlight.length||(O._highlight=[M.signalID],M.signal.forEach(function($){for(let Z=0;Z<$.diaID.length;Z++)O._highlight.push($.diaID[Z])})),M._highlight=O._highlight,O.type=I.type,O.position=M.to&&M.from&&M.to!==M.from?[{x:M.to,y:I.line*T+'px'},{x:M.from,y:I.line*T+3+'px'}]:[{x:M.signal[0].delta-I.width,y:I.line*T+'px'},{x:M.signal[0].delta+I.width,y:I.line*T+3+'px'}],!I.noLabel&&M.integral&&(O.label={text:M.integral.toFixed(I.toFixed),size:'11px',anchor:'middle',color:I.labelColor,position:{x:(O.position[0].x+O.position[1].x)/2,y:(I.line+I.lineLabel)*T+'px',dy:'5px'}}),O.strokeColor=I.strokeColor,O.strokeWidth=I.strokeWidth,O.fillColor=I.fillColor,O.info=M}return P}}},function(_,S,D){'use strict';S.FFTUtils=D(52),S.FFT=D(53)},function(_,S,D){'use strict';var C=D(53);_.exports={DEBUG:!1,ifft2DArray:function(E,R,I){var T=Array(R*I),P=R/2,F=2*(I-1);C.init(P);var M={re:Array(P),im:Array(P)};for(var O=0;O<I;O++){for(var $=P-1;0<=$;$--)M.re[$]=E[2*$*I+O],M.im[$]=E[(2*$+1)*I+O];C.bt(M.re,M.im);for(var $=P-1;0<=$;$--)T[2*$*I+O]=M.re[$],T[(2*$+1)*I+O]=M.im[$]}var Z=Array(P*F);C.init(F);var W={re:Array(F),im:Array(F)};for(var $=0;$<R;$+=2){W.re[0]=T[$*I],W.im[0]=T[($+1)*I];for(var O=1;O<I;O++)W.re[O]=T[$*I+O],W.im[O]=T[($+1)*I+O],W.re[F-O]=T[$*I+O],W.im[F-O]=-T[($+1)*I+O];C.bt(W.re,W.im);var K=$/2*F;for(var O=F-1;0<=O;O--)Z[K+O]=W.re[O]/(F*P)}return Z},fft2DArray:function(E,R,I){Object.assign({},{inplace:!0});var T=I/2+1,P=2*R,F=Array(P*T);C.init(I);var M={re:Array(I),im:Array(I)},O={re:Array(I),im:Array(I)},$={re:Array(I),im:Array(I)},Z,W,K,Q,G;for(var ee=0;ee<R/2;ee++){Z=2*ee*I,M.re=E.slice(Z,Z+I),Z=(2*ee+1)*I,M.im=E.slice(Z,Z+I),C.fft1d(M.re,M.im),this.reconstructTwoRealFFT(M,O,$),W=4*ee*T,K=(4*ee+1)*T,Q=(4*ee+2)*T,G=(4*ee+3)*T;for(var te=T-1;0<=te;te--)F[W+te]=O.re[te],F[K+te]=O.im[te],F[Q+te]=$.re[te],F[G+te]=$.im[te]}O=null,$=null;var ne=Array(P*T);C.init(R);var ae={re:Array(R),im:Array(R)};for(var oe=T-1;0<=oe;oe--){for(var ee=R-1;0<=ee;ee--)ae.re[ee]=F[2*ee*T+oe],ae.im[ee]=F[(2*ee+1)*T+oe],isNaN(ae.re[ee])&&(ae.re[ee]=0),isNaN(ae.im[ee])&&(ae.im[ee]=0);C.fft1d(ae.re,ae.im);for(var ee=R-1;0<=ee;ee--)ne[2*ee*T+oe]=ae.re[ee],ne[(2*ee+1)*T+oe]=ae.im[ee]}return ne},reconstructTwoRealFFT:function(E,R,I){var T=E.re.length;R.re[0]=E.re[0],R.im[0]=0,I.re[0]=E.im[0],I.im[0]=0;var P,F,M,O,$;for(var Z=T/2;0<Z;Z--)$=T-Z,P=0.5*(E.re[Z]-E.re[$]),F=0.5*(E.re[Z]+E.re[$]),M=0.5*(E.im[Z]-E.im[$]),O=0.5*(E.im[Z]+E.im[$]),R.re[Z]=F,R.im[Z]=M,R.re[$]=F,R.im[$]=-M,I.re[Z]=O,I.im[Z]=-P,I.re[$]=O,I.im[$]=P},convolute2DI:function(E,R,I,T){var P,F;for(var M=0;M<I/2;M++)for(var O=0;O<T;O++)P=E[2*M*T+O]*R[2*M*T+O]-E[(2*M+1)*T+O]*R[(2*M+1)*T+O],F=E[2*M*T+O]*R[(2*M+1)*T+O]+E[(2*M+1)*T+O]*R[2*M*T+O],E[2*M*T+O]=P,E[(2*M+1)*T+O]=F},convolute:function(E,R,I,T){var P=Array(T*I);for(var F=0;F<I*T;F++)P[F]=E[F];P=this.fft2DArray(P,I,T);var M=R.length,O=R[0].length,$=Array(T*I);for(var F=0;F<T*I;F++)$[F]=0;var K=Math.floor((M-1)/2),Q=Math.floor((O-1)/2),Z,W;for(var G=0;G<M;G++){Z=(G-K+I)%I;for(var ee=0;ee<O;ee++)W=(ee-Q+T)%T,$[Z*T+W]=R[G][ee]}$=this.fft2DArray($,I,T);var te=2*I,ne=T/2+1;return this.convolute2DI(P,$,te,ne),this.ifft2DArray(P,te,ne)},toRadix2:function(E,R,I){var T,P,F,M,O=I,$=R;if(0===I||0!=(I&I-1)){for(O=0;0!=I>>++O;);O=1<<O}if(0===R||0!=(R&R-1)){for($=0;0!=R>>++$;);$=1<<$}if($==R&&O==I)return{data:E,rows:R,cols:I};var Z=Array($*O),W=Math.floor(($-R)/2)-R,K=Math.floor((O-I)/2)-I;for(T=0;T<$;T++)for(F=T*O,M=(T-W)%R*I,P=0;P<O;P++)Z[F+P]=E[M+(P-K)%I];return{data:Z,rows:$,cols:O}},crop:function(E,R,I,T,P,F){if(R==T&&I==P)return E;Object.assign({},F);var M=Array(P*T),O=Math.floor((R-T)/2),$=Math.floor((I-P)/2),Z,W,K,Q;for(K=0;K<T;K++)for(Z=K*P,W=(K+O)*I,Q=0;Q<P;Q++)M[Z+Q]=E[W+(Q+$)];return M}}},function(_,S){(function(){var D=S,C={release:'0.3.0',date:'2013-03'};D.toString=function(){return'version '+C.release+', released '+C.date};var E=0,R=null,I=null,T={init:function(M){if(0!==M&&0==(M&M-1))E=M,T._initArray(),T._makeBitReversalTable(),T._makeCosSinTable();else throw new Error('init: radix-2 required')},fft1d:function(M,O){T.fft(M,O,1)},ifft1d:function(M,O){var $=1/E;T.fft(M,O,-1);for(var Z=0;Z<E;Z++)M[Z]*=$,O[Z]*=$},bt1d:function(M,O){T.fft(M,O,-1)},fft2d:function(M,O){var $=[],Z=[],W=0;for(var K=0;K<E;K++){W=K*E;for(var Q=0;Q<E;Q++)$[Q]=M[Q+W],Z[Q]=O[Q+W];T.fft1d($,Z);for(var G=0;G<E;G++)M[G+W]=$[G],O[G+W]=Z[G]}for(var ee=0;ee<E;ee++){for(var te=0;te<E;te++)W=ee+te*E,$[te]=M[W],Z[te]=O[W];T.fft1d($,Z);for(var ne=0;ne<E;ne++)W=ee+ne*E,M[W]=$[ne],O[W]=Z[ne]}},ifft2d:function(M,O){var $=[],Z=[],W=0;for(var K=0;K<E;K++){W=K*E;for(var Q=0;Q<E;Q++)$[Q]=M[Q+W],Z[Q]=O[Q+W];T.ifft1d($,Z);for(var G=0;G<E;G++)M[G+W]=$[G],O[G+W]=Z[G]}for(var ee=0;ee<E;ee++){for(var te=0;te<E;te++)W=ee+te*E,$[te]=M[W],Z[te]=O[W];T.ifft1d($,Z);for(var ne=0;ne<E;ne++)W=ee+ne*E,M[W]=$[ne],O[W]=Z[ne]}},fft:function(M,O,$){var oe=E>>2,Z,W,K,Q,G,ee,te,ne,ae;for(var se=0;se<E;se++)Q=R[se],se<Q&&(G=M[se],M[se]=M[Q],M[Q]=G,G=O[se],O[se]=O[Q],O[Q]=G);for(var le=1;le<E;le<<=1){W=0,Z=E/(le<<1);for(var de=0;de<le;de++){ee=I[W+oe],te=$*I[W];for(var ue=de;ue<E;ue+=le<<1)K=ue+le,ne=ee*M[K]+te*O[K],ae=ee*O[K]-te*M[K],M[K]=M[ue]-ne,M[ue]+=ne,O[K]=O[ue]-ae,O[ue]+=ae;W+=Z}}},_initArray:function(){R='undefined'==typeof Uint32Array?[]:new Uint32Array(E),I='undefined'==typeof Float64Array?[]:new Float64Array(1.25*E)},_paddingZero:function(){},_makeBitReversalTable:function(){var M=0,O=0,$=0;for(R[0]=0;++M<E;){for($=E>>1;$<=O;)O-=$,$>>=1;O+=$,R[M]=O}},_makeCosSinTable:function(){var M=E>>1,O=E>>2,$=E>>3,Z=Math.sin(Math.PI/E),W=2*Z*Z,K=Math.sqrt(W*(2-W)),Q=I[O]=1,G=I[0]=0;Z=2*W;for(var ee=1;ee<$;ee++)Q-=W,W+=Z*Q,G+=K,K-=Z*G,I[ee]=G,I[O-ee]=Q;0!=$&&(I[$]=Math.sqrt(0.5));for(var te=0;te<O;te++)I[M-te]=I[te];for(var ne=0;ne<M+O;ne++)I[ne+M]=-I[ne]}},P=['init','fft1d','ifft1d','fft2d','ifft2d'];for(var F=0;F<P.length;F++)D[P[F]]=T[P[F]];return D.bt=T.bt1d,D.fft=T.fft1d,D.ifft=T.ifft1d,D}).call(this)},function(_,S,D){'use strict';_.exports.fourierTransform=D(55),_.exports.zeroFilling=D(56),_.exports.apodization=D(57),_.exports.phaseCorrection=D(58),_.exports.digitalFilter=D(59)},function(_,S,D){'use strict';function C(R,I){var T=R.getParamDouble('$BF1',NaN),P=R.getParamDouble('$SFO1',NaN),F=R.getParamDouble('$SW',NaN),M=1e6*((P-T)/T),O=0.5*F*P/T;R.setDataType(I),R.setFirstX(M+O),R.setLastX(M-O),R.setXUnits('PPM');var $=R.getXData(),Z=M+O;O=-2*O/($.length-1);for(var W=0;W<$.length;W++)$[W]=Z,Z+=O}var E=D(51);_.exports=function(I){var T=I.getNbPoints(),P=I.getNbSubSpectra()/2,F='NMR SPECTRUM',M=E.FFT;1<P&&(F='nD NMR SPECTRUM'),M.init(T);var O=I.getParamDouble('$FCOR',0);for(var $=0;$<P;$++){var Z=I.getYData(2*$),W=I.getYData(2*$+1);Z[0]*=O,W[0]*=O,M.fft(Z,W),Z=Z.concat(Z.slice(0,(T+1)/2)),Z.splice(0,(T+1)/2),W=W.concat(W.slice(0,(T+1)/2)),W.splice(0,(T+1)/2),I.setActiveElement(2*$),C(I,F),I.setActiveElement(2*$+1),C(I,F)}if(I.is2D()){var K=I.getParam('.ACQUISITION SCHEME');switch(K){case 1:break;case 2:break;case 3:break;defaut:break;}}return I.setActiveElement(0),I}},function(_){'use strict';_.exports=function(D,C){var E=D.getNbSubSpectra(),R,I,T,P,F,M;if(0!=C)for(var O=0;O<E;O++){for(D.setActiveElement(O),R=D.getNbPoints(),M=D.getYData(),F=D.getXData(),I=D.getLastX(),T=(I-F[0])/(R-1),P=R;P<C;P++)M.push(0),F.push(I+T);C<R&&(M.splice(C,M.length-1),F.splice(C,F.length-1)),D.setFirstX(F[0]),D.setLastX(F[F.length-1])}return D.setActiveElement(0),D}},function(_){'use strict';_.exports=function(){}},function(_){'use strict';_.exports=function(D,C,E){var R=D.getNbPoints(),I=D.getYData(0),T=D.getYData(1),P=E/R,F=2*Math.pow(Math.sin(P/2),2),M=Math.sin(P),O=Math.cos(C),$=Math.sin(C),Z,W,K,Q,G;for(var ee=0;ee<R;ee++)G=R-ee-1,G=ee,K=I[G]*O-T[G]*$,Q=I[G]*$+T[G]*O,I[G]=K,T[G]=Q,Z=O-(F*O+M*$),W=$-(F*$-M*O),O=Z,$=W;D.resetMinMax(),D.putParam('PHC0',C),D.putParam('PHC1',E)}},function(_,S,D){'use strict';var C=D(60);_.exports=function(R,I){var T=0;I.nbPoints?T=I.nbPoints:I.brukerFilter&&(T=0);var P=R.getNbSubSpectra();if(0!=T)for(var F=0;F<P;F++)R.setActiveElement(F),C(R.getYData(),T),I.rotateX&&(C(R.getXData(),T),R.setFirstX(R.getX(0)),R.setLastX(R.getX(R.getNbPoints()-1)));return R.setActiveElement(0),R}},function(_){'use strict';function S(D,C){return 0>D&&(D+=C),D>=C&&(D-=C),D}_.exports=function(C,E){var R=C.length;if(E=E%R,Math.abs(E)>R/2&&(E=0<E?E-R:E+R),0!=E)for(var I=0,T=E,P=R,F=C[I],O=E,$=0<E?1:-1,M;0<P;)T=S(T,R),M=C[T],C[T]=F,T+=E,F=M,P--,T==O&&(T=S(T+$,R),O=T,I=S(T-E,R),F=C[I])}},function(_,S,D){'use strict';function C(G,ee){ee=ee||{};var te=new Date,ne;if(G.ser||G['2rr'])ne=R(G,ee);else if(G['1r']||G['1i']||G.fid)ne=E(G,ee);else throw new RangeError('The current files are invalid');ne.twoD&&!ee.noContours&&(M(ne),ne.profiling&&ne.profiling.push({action:'Finished countour plot calculation',time:new Date-te}),!ee.keepSpectra&&delete ne.spectra);var ae=ne.spectra;if(ee.xy&&0<ae.length)for(var oe=0;oe<ae.length;oe++){var se=ae[oe];if(0<se.data.length)for(var le=0;le<se.data.length;le++){var de=se.data[le],ue={x:Array(de.length/2),y:Array(de.length/2)};for(var he=0;he<de.length;he=he+2)ue.x[he/2]=de[he],ue.y[he/2]=de[he+1];se.data[le]=ue}}return ne}function E(G,ee){var te=T(G.procs,ee),ne=T(G.acqus,ee),ae=Object.keys(ne.info);for(var oe=0;oe<ae.length;oe++){var se=ae[oe];void 0===te.info[se]&&(te.info[se]=ne.info[se])}return G['1r']||G['1i']?(G['1r']&&I(G['1r'],te,'1r',!0),G['1i']&&I(G['1i'],te,'1i',!1)):G.fid&&P(G.fid,te),te}function R(G,ee){var te,ne,ae;if(G['2rr']){var oe=T(G.procs,ee),se=T(G.acqus,ee),le=Object.keys(se.info);for(var de=0;de<le.length;de++){var ue=le[de];void 0===oe.info[ue]&&(oe.info[ue]=se.info[ue])}se=T(G.proc2s,ee),oe.info.nbSubSpectra=se.info.$SI=parseInt(se.info.$SI),te=se.info.$SF=parseFloat(se.info.$SF),ne=se.info.$SWP=parseFloat(se.info.$SWP),ae=se.info.$OFFSET=parseFloat(se.info.$OFFSET)}else G.ser&&(oe=T(G.acqus,ee),se=T(G.acqu2s,ee),oe.info.nbSubSpectra=se.info.$SI=parseInt(se.info.$TD),oe.info.$SI=parseInt(oe.info.$TD),ne=se.info.$SW,oe.info.$SWP=oe.info.$SWH,oe.info.$SF=parseFloat(se.info.$SFO1),oe.info.$OFFSET=0,te=se.info.$SFO1=parseFloat(se.info.$SFO1),te=1,ae=0,oe.info.$AXNUC=oe.info.$NUC1,se.info.$AXNUC=se.info.$NUC1);oe.info.firstY=ae,oe.info.lastY=ae-ne/te,oe.info.$BF2=te,oe.info.$SFO1=te;var he=oe.info.nbSubSpectra,pe=oe.info.firstY,me=(oe.info.lastY-oe.info.firstY)/(he-1);G['2rr']?I(G['2rr'],oe,'2rr',!0):G.ser&&P(G.ser,oe,'ser',!0);for(var de=0;de<he;de++)pe+=me,oe.spectra[de].pageValue=pe;return G.ser?'TYPE_2DNMR_FID':'TYPE_2DNMR_SPECTRUM',oe.info['2D_Y_NUCLEUS']=se.info.$AXNUC,oe.info['2D_X_NUCLEUS']=oe.info.$AXNUC,oe.info['2D_Y_FRECUENCY']=te,oe.info['2D_Y_OFFSET']=ae,oe.info['2D_X_FRECUENCY']=oe.info.$SF,oe.info['2D_X_OFFSET']=oe.info.$OFFSET,oe.twoD=!0,oe}function I(G,ee,te,ne){var ae=ee.info.$SI=parseInt(ee.info.$SI),oe=parseFloat(ee.info.$SWP),se=parseFloat(ee.info.$SF),le=se,de=ee.shiftOffsetVal;ee.info.observeFrequency=se,ee.info.$BF1=le,ee.info.$SFO1=se,ee.info.brukerReference=le;var ue=parseInt(ee.info.$BYTORDP);ue=ue?0:1;var he=ee.info.nbSubSpectra?ee.info.nbSubSpectra:1;ue?G.setLittleEndian():G.setBigEndian();for(var pe=0;pe<he;pe++){var me={dataType:'NMR Spectrum',dataTable:'(X++(R..R))',nbPoints:ae,firstX:de,lastX:de-oe/se,xUnit:'PPM',yUnit:'Arbitrary',data:[Array(2*ae)],isXYdata:!0,observeFrequency:se,title:ee.info.TITLE,deltaX:-(oe/se)/(ae-1)},ce=de,ge=me.deltaX;if(ne)for(var fe=0;fe<ae;++fe)me.data[0][2*fe]=ce,me.data[0][2*fe+1]=G.readInt32(),(null===me.data[0][2*fe+1]||isNaN(me.data[0][2*fe+1]))&&(me.data[0][2*fe+1]=0),ce+=ge;else for(fe=ae-1;0<=fe;--fe)me.data[0][2*fe]=ce,me.data[0][2*fe+1]=G.readInt32(),(null===me.data[0][2*fe+1]||isNaN(me.data[0][2*fe+1]))&&(me.data[0][2*fe+1]=0),ce+=ge;ee.spectra.push(me)}}function T(G,ee){var te=/.*/;return ee.keepRecordsRegExp&&(te=ee.keepRecordsRegExp),$.convert(G,{keepRecordsRegExp:te})}function P(G,ee){var te=ee.info.$TD=parseInt(ee.info.$TD);ee.info.$SWH=parseFloat(ee.info.$SWH);var ne=ee.info.$SW=parseFloat(ee.info.$SW),ae=ee.info.$SFO1=parseFloat(ee.info.$SFO1),oe=parseFloat(ee.info.$BF1);ee.info.$BF1=oe;var se=ne,le=se/(te-1),de=parseInt(ee.info.$BYTORDP);de=de?0:1,de?G.setLittleEndian():G.setBigEndian();var ue=ee.info.nbSubSpectra?ee.info.nbSubSpectra:1;ee.spectra=Array(ue);for(var he=0;he<ue/2;he++){var pe={dataType:'NMR FID',dataTable:'(X++(R..R))',nbPoints:te,firstX:0,lastX:se,nucleus:ee.info.$NUC1?ee.info.$NUC1:void 0,xUnit:'Sec',yUnit:'Arbitrary',data:[Array(2*te)],isXYdata:!0,observeFrequency:ae,title:ee.info.TITLE,deltaX:le};ee.spectra[2*he]=pe,pe={dataType:'NMR FID',dataTable:'(X++(I..I))',nbPoints:te,firstX:0,lastX:se,nucleus:ee.info.$NUC1?ee.info.$NUC1:void 0,xUnit:'Sec',yUnit:'Arbitrary',data:[Array(2*te)],isXYdata:!0,observeFrequency:ae,title:ee.info.TITLE,deltaX:le},ee.spectra[2*he+1]=pe;var me=0,ce;for(var ge=0;G.available(8)&&ge<te;ge++,me=ge*le)ce=G.readInt32(),(null===ce||isNaN(ce))&&(ce=0),ee.spectra[2*he].data[0][2*ge+1]=ce,ee.spectra[2*he].data[0][2*ge]=me,ce=G.readInt32(),(null===ce||isNaN(ce))&&(ce=0),ee.spectra[2*he+1].data[0][2*ge+1]=ce,ee.spectra[2*he+1].data[0][2*ge]=me;for(;ge<te;ge++,me=ge*le)ee.spectra[2*he].data[0][2*ge+1]=0,ee.spectra[2*he].data[0][2*ge]=me,ee.spectra[2*he+1].data[0][2*ge+1]=0,ee.spectra[2*he+1].data[0][2*ge]=me}}function F(G){var ee=0,te=G[0].data[0][0],ne=te,ae=G.length,oe=G[0].data[0].length/2,se=Array(ae);for(var le=0;le<ae;le++){se[le]=Array(oe);for(var de=0;de<oe;de++)se[le][de]=G[le].data[0][2*de+1],se[le][de]<te&&(te=G[le].data[0][2*de+1]),se[le][de]>ne&&(ne=G[le].data[0][2*de+1]),0!==le&&0!==de&&(ee+=Math.abs(se[le][de]-se[le][de-1])+Math.abs(se[le][de]-se[le-1][de]))}return{z:se,minX:G[0].data[0][0],maxX:G[0].data[0][G[0].data[0].length-2],minY:G[0].pageValue,maxY:G[ae-1].pageValue,minZ:te,maxZ:ne,noise:ee/(2*((ae-1)*(oe-1)))}}function M(G){var ee=F(G.spectra);G.contourLines=O(ee),delete ee.z,G.minMax=ee}function O(G){var ee=G.noise,te=G.z,ne=[],ae=7,oe=new Float32Array(4),se=[],le=te.length,de=te[0].length,ue,he,pe,me,ce=G.minX,ge=G.maxX,fe=(ge-ce)/(de-1),be=G.minY,ye=G.maxY,xe=(ye-be)/(le-1),_e=G.minZ,ke=G.maxZ,we;for(var je=0;je<2*ae;je++){var Se={};ne.push(Se);var ve=je%2;we=0==ve?(ke-5*ee)*Math.exp(je/2-ae)+5*ee:-(ke-5*ee)*Math.exp(je/2-ae)-5*ee;var De=[];if(Se.zValue=we,Se.lines=De,!(we<=_e||we>=ke))for(var Ce=0;Ce<le-1;Ce++)for(var Ae=0;Ae<de-1;Ae++){oe[0]=te[Ce][Ae],oe[1]=te[Ce][Ae+1],oe[2]=te[Ce+1][Ae],oe[3]=te[Ce+1][Ae+1];for(var Ee=0;4>Ee;Ee++)se[Ee]=oe[Ee]>we;se[0]!==se[1]&&se[0]!==se[2]&&(ue=Ae+(we-oe[0])/(oe[1]-oe[0]),he=Ce,pe=Ae,me=Ce+(we-oe[0])/(oe[2]-oe[0]),De.push(ue*fe+ce,he*xe+be,pe*fe+ce,me*xe+be)),se[3]!==se[1]&&se[3]!==se[2]&&(ue=Ae+1,he=Ce+1-(we-oe[3])/(oe[1]-oe[3]),pe=Ae+1-(we-oe[3])/(oe[2]-oe[3]),me=Ce+1,De.push(ue*fe+ce,he*xe+be,pe*fe+ce,me*xe+be)),se[1]!==se[2]&&(ue=Ae+1-(we-oe[1])/(oe[2]-oe[1]),he=Ce+(we-oe[1])/(oe[2]-oe[1]),se[1]!==se[0]&&(pe=Ae+1-(we-oe[1])/(oe[0]-oe[1]),me=Ce,De.push(ue*fe+ce,he*xe+be,pe*fe+ce,me*xe+be)),se[2]!==se[0]&&(pe=Ae,me=Ce+1-(we-oe[2])/(oe[0]-oe[2]),De.push(ue*fe+ce,he*xe+be,pe*fe+ce,me*xe+be)),se[1]!==se[3]&&(pe=Ae+1,me=Ce+(we-oe[1])/(oe[3]-oe[1]),De.push(ue*fe+ce,he*xe+be,pe*fe+ce,me*xe+be)),se[2]!==se[3]&&(pe=Ae+(we-oe[2])/(oe[3]-oe[2]),me=Ce+1,De.push(ue*fe+ce,he*xe+be,pe*fe+ce,me*xe+be)))}}return{minX:G.minX,maxX:G.maxX,minY:G.minY,maxY:G.maxY,segments:ne}}const $=D(9),Z=D(62),W=D(63);var K=1,Q=2;_.exports={convertZip:function(ee,te){te=te||{};var ne=new W;ne.load(ee,te);var ae={ser:K,fid:K,acqus:Q,acqu2s:Q,procs:Q,proc2s:Q,'1r':K,'1i':K,'2rr':K},oe=ne.filter(function(ge){return 0<=ge.indexOf('ser')||0<=ge.indexOf('fid')||0<=ge.indexOf('1r')||0<=ge.indexOf('2rr')}),se=Array(oe.length);for(var le=0;le<oe.length;++le){oe[le].name.length;var de=oe[le].name;de=de.substr(0,de.lastIndexOf('/')+1);var ue=ne.folder(de),he=ue.filter(function(ge){return!!ae[ge]}),pe={};0<=de.indexOf('pdata')&&(pe.acqus=ne.file(de.replace(/pdata\/[0-9]\//,'acqus')).asText());for(var me=0;me<he.length;++me){var ce=he[me].name.lastIndexOf('/'),de=he[me].name.substr(ce+1);pe[de]=ae[de]===K?new Z(he[me].asArrayBuffer()):he[me].asText()}se[le]={filename:oe[le].name,value:C(pe,te)}}return se},converFolder:C}},function(_){'use strict';const S=8192,D=[];_.exports=class{constructor(E,R){R=R||{},E===void 0&&(E=S),'number'==typeof E&&(E=new ArrayBuffer(E));let I=E.byteLength;const T=R.offset?R.offset>>>0:0;E.buffer&&(I=E.byteLength-T,E=E.byteLength===E.buffer.byteLength?T?E.buffer.slice(T):E.buffer:E.buffer.slice(E.byteOffset+T,E.byteOffset+E.byteLength)),this.buffer=E,this.length=I,this.byteLength=I,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=I||S,this._mark=0}available(E){return void 0===E&&(E=1),this.offset+E<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(E){E===void 0&&(E=1),this.offset+=E}seek(E){this.offset=E}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(E){if(void 0===E&&(E=1),!this.available(E)){const R=this._increment+this._increment;this._increment=R;const I=this.length+R,T=new Uint8Array(I);T.set(new Uint8Array(this.buffer)),this.buffer=T.buffer,this.length=I,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(E){E===void 0&&(E=1);var R=new Uint8Array(E);for(var I=0;I<E;I++)R[I]=this.readByte();return R}readInt16(){var E=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,E}readUint16(){var E=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,E}readInt32(){var E=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,E}readUint32(){var E=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,E}readFloat32(){var E=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,E}readFloat64(){var E=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,E}readChar(){return String.fromCharCode(this.readInt8())}readChars(E){E===void 0&&(E=1),D.length=E;for(var R=0;R<E;R++)D[R]=this.readChar();return D.join('')}writeBoolean(E){this.writeUint8(E?255:0)}writeInt8(E){this.ensureAvailable(1),this._data.setInt8(this.offset++,E)}writeUint8(E){this.ensureAvailable(1),this._data.setUint8(this.offset++,E)}writeByte(E){this.writeUint8(E)}writeBytes(E){this.ensureAvailable(E.length);for(var R=0;R<E.length;R++)this._data.setUint8(this.offset++,E[R])}writeInt16(E){this.ensureAvailable(2),this._data.setInt16(this.offset,E,this.littleEndian),this.offset+=2}writeUint16(E){this.ensureAvailable(2),this._data.setUint16(this.offset,E,this.littleEndian),this.offset+=2}writeInt32(E){this.ensureAvailable(4),this._data.setInt32(this.offset,E,this.littleEndian),this.offset+=4}writeUint32(E){this.ensureAvailable(4),this._data.setUint32(this.offset,E,this.littleEndian),this.offset+=4}writeFloat32(E){this.ensureAvailable(4),this._data.setFloat32(this.offset,E,this.littleEndian),this.offset+=4}writeFloat64(E){this.ensureAvailable(8),this._data.setFloat64(this.offset,E,this.littleEndian),this.offset+=8}writeChar(E){this.writeUint8(E.charCodeAt(0))}writeChars(E){for(var R=0;R<E.length;R++)this.writeUint8(E.charCodeAt(R))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},function(_,S,D){'use strict';function C(R,I){return this instanceof C?void(this.files={},this.comment=null,this.root='',R&&this.load(R,I),this.clone=function(){var T=new C;for(var P in this)'function'!=typeof this[P]&&(T[P]=this[P]);return T}):new C(R,I)}var E=D(64);C.prototype=D(65),C.prototype.load=D(98),C.support=D(66),C.defaults=D(93),C.utils=D(106),C.base64={encode:function(R){return E.encode(R)},decode:function(R){return E.decode(R)}},C.compressions=D(72),_.exports=C},function(_,S){'use strict';var D='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';S.encode=function(C){for(var E='',$=0,R,I,T,P,F,M,O;$<C.length;)R=C.charCodeAt($++),I=C.charCodeAt($++),T=C.charCodeAt($++),P=R>>2,F=(3&R)<<4|I>>4,M=(15&I)<<2|T>>6,O=63&T,isNaN(I)?M=O=64:isNaN(T)&&(O=64),E=E+D.charAt(P)+D.charAt(F)+D.charAt(M)+D.charAt(O);return E},S.decode=function(C){var E='',R,I,T,P,F,M,O,$=0;for(C=C.replace(/[^A-Za-z0-9\+\/\=]/g,'');$<C.length;)P=D.indexOf(C.charAt($++)),F=D.indexOf(C.charAt($++)),M=D.indexOf(C.charAt($++)),O=D.indexOf(C.charAt($++)),R=P<<2|F>>4,I=(15&F)<<4|M>>2,T=(3&M)<<6|O,E=E+String.fromCharCode(R),64!=M&&(E=E+String.fromCharCode(I)),64!=O&&(E=E+String.fromCharCode(T));return E}},function(_,S,D){'use strict';var C=D(66),E=D(71),R=D(91),I=D(92),T=D(93),P=D(64),F=D(72),M=D(94),O=D(90),$=D(95),Z=D(96),W=D(97),K=function(ce){if(ce._data instanceof M&&(ce._data=ce._data.getContent(),ce.options.binary=!0,ce.options.base64=!1,'uint8array'===E.getTypeOf(ce._data))){var ge=ce._data;ce._data=new Uint8Array(ge.length),0!==ge.length&&ce._data.set(ge,0)}return ce._data},Q=function(ce){var ge=K(ce),fe=E.getTypeOf(ge);return'string'===fe?!ce.options.binary&&C.nodebuffer?O(ge,'utf-8'):ce.asBinary():ge},G=function(ce){var ge=K(this);return null===ge||'undefined'==typeof ge?'':(this.options.base64&&(ge=P.decode(ge)),ge=ce&&this.options.binary?me.utf8decode(ge):E.transformTo('string',ge),ce||this.options.binary||(ge=E.transformTo('string',me.utf8encode(ge))),ge)},ee=function(ce,ge,fe){this.name=ce,this.dir=fe.dir,this.date=fe.date,this.comment=fe.comment,this.unixPermissions=fe.unixPermissions,this.dosPermissions=fe.dosPermissions,this._data=ge,this.options=fe,this._initialMetadata={dir:fe.dir,date:fe.date}};ee.prototype={asText:function(){return G.call(this,!0)},asBinary:function(){return G.call(this,!1)},asNodeBuffer:function(){var ce=Q(this);return E.transformTo('nodebuffer',ce)},asUint8Array:function(){var ce=Q(this);return E.transformTo('uint8array',ce)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var te=function(ce,ge){var fe='',be;for(be=0;be<ge;be++)fe+=String.fromCharCode(255&ce),ce=ce>>>8;return fe},ne=function(ce){return ce=ce||{},!0===ce.base64&&(null===ce.binary||void 0===ce.binary)&&(ce.binary=!0),ce=E.extend(ce,T),ce.date=ce.date||new Date,null!==ce.compression&&(ce.compression=ce.compression.toUpperCase()),ce},ae=function(ce,ge,fe){var be=E.getTypeOf(ge),ye;if(fe=ne(fe),'string'==typeof fe.unixPermissions&&(fe.unixPermissions=parseInt(fe.unixPermissions,8)),fe.unixPermissions&&16384&fe.unixPermissions&&(fe.dir=!0),fe.dosPermissions&&16&fe.dosPermissions&&(fe.dir=!0),fe.dir&&(ce=se(ce)),fe.createFolders&&(ye=oe(ce))&&le.call(this,ye,!0),fe.dir||null===ge||'undefined'==typeof ge)fe.base64=!1,fe.binary=!1,ge=null,be=null;else if('string'===be)fe.binary&&!fe.base64&&!0!==fe.optimizedBinaryString&&(ge=E.string2binary(ge));else{if(fe.base64=!1,fe.binary=!0,!be&&!(ge instanceof M))throw new Error('The data of \''+ce+'\' is in an unsupported format !');'arraybuffer'==be&&(ge=E.transformTo('uint8array',ge))}var xe=new ee(ce,ge,fe);return this.files[ce]=xe,xe},oe=function(ce){'/'==ce.slice(-1)&&(ce=ce.substring(0,ce.length-1));var ge=ce.lastIndexOf('/');return 0<ge?ce.substring(0,ge):''},se=function(ce){return'/'!=ce.slice(-1)&&(ce+='/'),ce},le=function(ce,ge){return ge='undefined'!=typeof ge&&ge,ce=se(ce),this.files[ce]||ae.call(this,ce,null,{dir:!0,createFolders:ge}),this.files[ce]},de=function(ce,ge,fe){var be=new M,ye;return ce._data instanceof M?(be.uncompressedSize=ce._data.uncompressedSize,be.crc32=ce._data.crc32,0===be.uncompressedSize||ce.dir?(ge=F.STORE,be.compressedContent='',be.crc32=0):ce._data.compressionMethod===ge.magic?be.compressedContent=ce._data.getCompressedContent():(ye=ce._data.getContent(),be.compressedContent=ge.compress(E.transformTo(ge.compressInputType,ye),fe))):(ye=Q(ce),(!ye||0===ye.length||ce.dir)&&(ge=F.STORE,ye=''),be.uncompressedSize=ye.length,be.crc32=R(ye),be.compressedContent=ge.compress(E.transformTo(ge.compressInputType,ye),fe)),be.compressedSize=be.compressedContent.length,be.compressionMethod=ge.magic,be},ue=function(ce,ge){var fe=ce;return ce||(fe=ge?16893:33204),(65535&fe)<<16},he=function(ce){return 63&(ce||0)},pe=function(ce,ge,fe,be,ye,xe){var _e=fe.compressedContent,ke=xe!==$.utf8encode,we=E.transformTo('string',xe(ge.name)),je=E.transformTo('string',$.utf8encode(ge.name)),Se=ge.comment||'',ve=E.transformTo('string',xe(Se)),De=E.transformTo('string',$.utf8encode(Se)),Ce=je.length!==ge.name.length,Ae=De.length!==Se.length,Ee=ge.options,Te='',Pe='',Fe='',Re,Ie,ze,Me;ze=ge._initialMetadata.dir===ge.dir?Ee.dir:ge.dir,Me=ge._initialMetadata.date===ge.date?Ee.date:ge.date;var Ye=0,Xe=0;ze&&(Ye|=16),'UNIX'===ye?(Xe=798,Ye|=ue(ge.unixPermissions,ze)):(Xe=20,Ye|=he(ge.dosPermissions,ze)),Re=Me.getHours(),Re=Re<<6,Re=Re|Me.getMinutes(),Re=Re<<5,Re=Re|Me.getSeconds()/2,Ie=Me.getFullYear()-1980,Ie=Ie<<4,Ie=Ie|Me.getMonth()+1,Ie=Ie<<5,Ie=Ie|Me.getDate(),Ce&&(Pe=te(1,1)+te(R(we),4)+je,Te+='up'+te(Pe.length,2)+Pe),Ae&&(Fe=te(1,1)+te(this.crc32(ve),4)+De,Te+='uc'+te(Fe.length,2)+Fe);var Oe='';Oe+='\n\0',Oe+=!ke&&(Ce||Ae)?'\0\b':'\0\0',Oe+=fe.compressionMethod,Oe+=te(Re,2),Oe+=te(Ie,2),Oe+=te(fe.crc32,4),Oe+=te(fe.compressedSize,4),Oe+=te(fe.uncompressedSize,4),Oe+=te(we.length,2),Oe+=te(Te.length,2);var Ne=I.LOCAL_FILE_HEADER+Oe+we+Te,Le=I.CENTRAL_FILE_HEADER+te(Xe,2)+Oe+te(ve.length,2)+'\0\0\0\0'+te(Ye,4)+te(be,4)+we+Te+ve;return{fileRecord:Ne,dirRecord:Le,compressedObject:fe}},me={load:function(){throw new Error('Load method is not defined. Is the file jszip-load.js included ?')},filter:function(ce){var ge=[],fe,be,ye,xe;for(fe in this.files)this.files.hasOwnProperty(fe)&&(ye=this.files[fe],xe=new ee(ye.name,ye._data,E.extend(ye.options)),be=fe.slice(this.root.length,fe.length),fe.slice(0,this.root.length)===this.root&&ce(be,xe)&&ge.push(xe));return ge},file:function(ce,ge,fe){if(1===arguments.length){if(E.isRegExp(ce)){var be=ce;return this.filter(function(ye,xe){return!xe.dir&&be.test(ye)})}return this.filter(function(ye,xe){return!xe.dir&&ye===ce})[0]||null}return ce=this.root+ce,ae.call(this,ce,ge,fe),this},folder:function(ce){if(!ce)return this;if(E.isRegExp(ce))return this.filter(function(ye,xe){return xe.dir&&ce.test(ye)});var ge=this.root+ce,fe=le.call(this,ge),be=this.clone();return be.root=fe.name,be},remove:function(ce){ce=this.root+ce;var ge=this.files[ce];if(ge||('/'!=ce.slice(-1)&&(ce+='/'),ge=this.files[ce]),ge&&!ge.dir)delete this.files[ce];else{var fe=this.filter(function(ye,xe){return xe.name.slice(0,ce.length)===ce});for(var be=0;be<fe.length;be++)delete this.files[fe[be].name]}return this},generate:function(ce){ce=E.extend(ce||{},{base64:!0,compression:'STORE',compressionOptions:null,type:'base64',platform:'DOS',comment:null,mimeType:'application/zip',encodeFileName:$.utf8encode}),E.checkSupport(ce.type),('darwin'===ce.platform||'freebsd'===ce.platform||'linux'===ce.platform||'sunos'===ce.platform)&&(ce.platform='UNIX'),'win32'===ce.platform&&(ce.platform='DOS');var ge=[],fe=0,be=0,_e=E.transformTo('string',ce.encodeFileName(ce.comment||this.comment||'')),ye,xe;for(var ke in this.files)if(this.files.hasOwnProperty(ke)){var we=this.files[ke],je=we.options.compression||ce.compression.toUpperCase(),Se=F[je];if(!Se)throw new Error(je+' is not a valid compression method !');var ve=we.options.compressionOptions||ce.compressionOptions||{},De=de.call(this,we,Se,ve),Ce=pe.call(this,ke,we,De,fe,ce.platform,ce.encodeFileName);fe+=Ce.fileRecord.length+De.compressedSize,be+=Ce.dirRecord.length,ge.push(Ce)}var Ae='';Ae=I.CENTRAL_DIRECTORY_END+'\0\0\0\0'+te(ge.length,2)+te(ge.length,2)+te(be,4)+te(fe,4)+te(_e.length,2)+_e;var Ee=ce.type.toLowerCase();for(ye='uint8array'===Ee||'arraybuffer'===Ee||'blob'===Ee||'nodebuffer'===Ee?new W(fe+be+Ae.length):new Z(fe+be+Ae.length),xe=0;xe<ge.length;xe++)ye.append(ge[xe].fileRecord),ye.append(ge[xe].compressedObject.compressedContent);for(xe=0;xe<ge.length;xe++)ye.append(ge[xe].dirRecord);ye.append(Ae);var Re=ye.finalize();switch(ce.type.toLowerCase()){case'uint8array':case'arraybuffer':case'nodebuffer':return E.transformTo(ce.type.toLowerCase(),Re);case'blob':return E.arrayBuffer2Blob(E.transformTo('arraybuffer',Re),ce.mimeType);case'base64':return ce.base64?P.encode(Re):Re;default:return Re;}},crc32:function(ce,ge){return R(ce,ge)},utf8encode:function(ce){return E.transformTo('string',$.utf8encode(ce))},utf8decode:function(ce){return $.utf8decode(ce)}};_.exports=me},function(_,S,D){(function(C){'use strict';if(S.base64=!0,S.array=!0,S.string=!0,S.arraybuffer='undefined'!=typeof ArrayBuffer&&'undefined'!=typeof Uint8Array,S.nodebuffer='undefined'!=typeof C,S.uint8array='undefined'!=typeof Uint8Array,'undefined'==typeof ArrayBuffer)S.blob=!1;else{var E=new ArrayBuffer(0);try{S.blob=0===new Blob([E],{type:'application/zip'}).size}catch(T){try{var R=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,I=new R;I.append(E),S.blob=0===I.getBlob('application/zip').size}catch(P){S.blob=!1}}}}).call(S,D(67).Buffer)},function(_,S,D){(function(C,E){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */'use strict';function R(){return C.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function I(Oe,Ne){if(R()<Ne)throw new RangeError('Invalid typed array length');return C.TYPED_ARRAY_SUPPORT?(Oe=new Uint8Array(Ne),Oe.__proto__=C.prototype):(null===Oe&&(Oe=new C(Ne)),Oe.length=Ne),Oe}function C(Oe,Ne,Le){if(!C.TYPED_ARRAY_SUPPORT&&!(this instanceof C))return new C(Oe,Ne,Le);if('number'==typeof Oe){if('string'==typeof Ne)throw new Error('If encoding is specified then the first argument must be a string');return M(this,Oe)}return T(this,Oe,Ne,Le)}function T(Oe,Ne,Le,Ue){if('number'==typeof Ne)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&Ne instanceof ArrayBuffer?Z(Oe,Ne,Le,Ue):'string'==typeof Ne?O(Oe,Ne,Le):W(Oe,Ne)}function P(Oe){if('number'!=typeof Oe)throw new TypeError('"size" argument must be a number');else if(0>Oe)throw new RangeError('"size" argument must not be negative')}function F(Oe,Ne,Le,Ue){return P(Ne),0>=Ne?I(Oe,Ne):void 0===Le?I(Oe,Ne):'string'==typeof Ue?I(Oe,Ne).fill(Le,Ue):I(Oe,Ne).fill(Le)}function M(Oe,Ne){if(P(Ne),Oe=I(Oe,0>Ne?0:0|K(Ne)),!C.TYPED_ARRAY_SUPPORT)for(var Le=0;Le<Ne;++Le)Oe[Le]=0;return Oe}function O(Oe,Ne,Le){if(('string'!=typeof Le||''===Le)&&(Le='utf8'),!C.isEncoding(Le))throw new TypeError('"encoding" must be a valid string encoding');var Ue=0|Q(Ne,Le);Oe=I(Oe,Ue);var Be=Oe.write(Ne,Le);return Be!==Ue&&(Oe=Oe.slice(0,Be)),Oe}function $(Oe,Ne){var Le=0>Ne.length?0:0|K(Ne.length);Oe=I(Oe,Le);for(var Ue=0;Ue<Le;Ue+=1)Oe[Ue]=255&Ne[Ue];return Oe}function Z(Oe,Ne,Le,Ue){if(Ne.byteLength,0>Le||Ne.byteLength<Le)throw new RangeError('\'offset\' is out of bounds');if(Ne.byteLength<Le+(Ue||0))throw new RangeError('\'length\' is out of bounds');return Ne=void 0===Le&&void 0===Ue?new Uint8Array(Ne):void 0===Ue?new Uint8Array(Ne,Le):new Uint8Array(Ne,Le,Ue),C.TYPED_ARRAY_SUPPORT?(Oe=Ne,Oe.__proto__=C.prototype):Oe=$(Oe,Ne),Oe}function W(Oe,Ne){if(C.isBuffer(Ne)){var Le=0|K(Ne.length);return(Oe=I(Oe,Le),0===Oe.length)?Oe:(Ne.copy(Oe,0,0,Le),Oe)}if(Ne){if('undefined'!=typeof ArrayBuffer&&Ne.buffer instanceof ArrayBuffer||'length'in Ne)return'number'!=typeof Ne.length||Pe(Ne.length)?I(Oe,0):$(Oe,Ne);if('Buffer'===Ne.type&&Me(Ne.data))return $(Oe,Ne.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function K(Oe){if(Oe>=R())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+R().toString(16)+' bytes');return 0|Oe}function Q(Oe,Ne){if(C.isBuffer(Oe))return Oe.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(Oe)||Oe instanceof ArrayBuffer))return Oe.byteLength;'string'!=typeof Oe&&(Oe=''+Oe);var Le=Oe.length;if(0===Le)return 0;for(var Ue=!1;;)switch(Ne){case'ascii':case'latin1':case'binary':return Le;case'utf8':case'utf-8':case void 0:return Ae(Oe).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*Le;case'hex':return Le>>>1;case'base64':return Ie(Oe).length;default:if(Ue)return Ae(Oe).length;Ne=(''+Ne).toLowerCase(),Ue=!0;}}function G(Oe,Ne,Le){var Ue=!1;if((void 0===Ne||0>Ne)&&(Ne=0),Ne>this.length)return'';if((void 0===Le||Le>this.length)&&(Le=this.length),0>=Le)return'';if(Le>>>=0,Ne>>>=0,Le<=Ne)return'';for(Oe||(Oe='utf8');!0;)switch(Oe){case'hex':return fe(this,Ne,Le);case'utf8':case'utf-8':return pe(this,Ne,Le);case'ascii':return ce(this,Ne,Le);case'latin1':case'binary':return ge(this,Ne,Le);case'base64':return he(this,Ne,Le);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return be(this,Ne,Le);default:if(Ue)throw new TypeError('Unknown encoding: '+Oe);Oe=(Oe+'').toLowerCase(),Ue=!0;}}function ee(Oe,Ne,Le){var Ue=Oe[Ne];Oe[Ne]=Oe[Le],Oe[Le]=Ue}function te(Oe,Ne,Le,Ue,Be){if(0===Oe.length)return-1;if('string'==typeof Le?(Ue=Le,Le=0):2147483647<Le?Le=2147483647:-2147483648>Le&&(Le=-2147483648),Le=+Le,isNaN(Le)&&(Le=Be?0:Oe.length-1),0>Le&&(Le=Oe.length+Le),Le>=Oe.length){if(Be)return-1;Le=Oe.length-1}else if(0>Le)if(Be)Le=0;else return-1;if('string'==typeof Ne&&(Ne=C.from(Ne,Ue)),C.isBuffer(Ne))return 0===Ne.length?-1:ne(Oe,Ne,Le,Ue,Be);if('number'==typeof Ne)return(Ne=255&Ne,C.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf)?Be?Uint8Array.prototype.indexOf.call(Oe,Ne,Le):Uint8Array.prototype.lastIndexOf.call(Oe,Ne,Le):ne(Oe,[Ne],Le,Ue,Be);throw new TypeError('val must be string, number or Buffer')}function ne(Oe,Ne,Le,Ue,Be){function Ve(Qe,Ge){return 1===qe?Qe[Ge]:Qe.readUInt16BE(Ge*qe)}var qe=1,$e=Oe.length,Ze=Ne.length;if(void 0!==Ue&&(Ue=(Ue+'').toLowerCase(),'ucs2'===Ue||'ucs-2'===Ue||'utf16le'===Ue||'utf-16le'===Ue)){if(2>Oe.length||2>Ne.length)return-1;qe=2,$e/=2,Ze/=2,Le/=2}var He;if(Be){var We=-1;for(He=Le;He<$e;He++)if(Ve(Oe,He)!==Ve(Ne,-1==We?0:He-We))-1!=We&&(He-=He-We),We=-1;else if(-1==We&&(We=He),He-We+1===Ze)return We*qe}else for(Le+Ze>$e&&(Le=$e-Ze),He=Le;0<=He;He--){var Je=!0;for(var Ke=0;Ke<Ze;Ke++)if(Ve(Oe,He+Ke)!==Ve(Ne,Ke)){Je=!1;break}if(Je)return He}return-1}function ae(Oe,Ne,Le,Ue){Le=+Le||0;var Be=Oe.length-Le;Ue?(Ue=+Ue,Ue>Be&&(Ue=Be)):Ue=Be;var Ve=Ne.length;if(0!=Ve%2)throw new TypeError('Invalid hex string');Ue>Ve/2&&(Ue=Ve/2);for(var qe=0;qe<Ue;++qe){var $e=parseInt(Ne.substr(2*qe,2),16);if(isNaN($e))return qe;Oe[Le+qe]=$e}return qe}function oe(Oe,Ne,Le,Ue){return Te(Ae(Ne,Oe.length-Le),Oe,Le,Ue)}function se(Oe,Ne,Le,Ue){return Te(Ee(Ne),Oe,Le,Ue)}function le(Oe,Ne,Le,Ue){return se(Oe,Ne,Le,Ue)}function de(Oe,Ne,Le,Ue){return Te(Ie(Ne),Oe,Le,Ue)}function ue(Oe,Ne,Le,Ue){return Te(Re(Ne,Oe.length-Le),Oe,Le,Ue)}function he(Oe,Ne,Le){return 0===Ne&&Le===Oe.length?Fe.fromByteArray(Oe):Fe.fromByteArray(Oe.slice(Ne,Le))}function pe(Oe,Ne,Le){Le=Math.min(Oe.length,Le);for(var Ue=[],Be=Ne;Be<Le;){var Ve=Oe[Be],qe=null,$e=239<Ve?4:223<Ve?3:191<Ve?2:1;if(Be+$e<=Le){var Ze,He,We,Je;1==$e?128>Ve&&(qe=Ve):2==$e?(Ze=Oe[Be+1],128==(192&Ze)&&(Je=(31&Ve)<<6|63&Ze,127<Je&&(qe=Je))):3==$e?(Ze=Oe[Be+1],He=Oe[Be+2],128==(192&Ze)&&128==(192&He)&&(Je=(15&Ve)<<12|(63&Ze)<<6|63&He,2047<Je&&(55296>Je||57343<Je)&&(qe=Je))):4==$e?(Ze=Oe[Be+1],He=Oe[Be+2],We=Oe[Be+3],128==(192&Ze)&&128==(192&He)&&128==(192&We)&&(Je=(15&Ve)<<18|(63&Ze)<<12|(63&He)<<6|63&We,65535<Je&&1114112>Je&&(qe=Je))):void 0}null===qe?(qe=65533,$e=1):65535<qe&&(qe-=65536,Ue.push(55296|1023&qe>>>10),qe=56320|1023&qe),Ue.push(qe),Be+=$e}return me(Ue)}function me(Oe){var Ne=Oe.length;if(Ne<=Ye)return String.fromCharCode.apply(String,Oe);for(var Le='',Ue=0;Ue<Ne;)Le+=String.fromCharCode.apply(String,Oe.slice(Ue,Ue+=Ye));return Le}function ce(Oe,Ne,Le){var Ue='';Le=Math.min(Oe.length,Le);for(var Be=Ne;Be<Le;++Be)Ue+=String.fromCharCode(127&Oe[Be]);return Ue}function ge(Oe,Ne,Le){var Ue='';Le=Math.min(Oe.length,Le);for(var Be=Ne;Be<Le;++Be)Ue+=String.fromCharCode(Oe[Be]);return Ue}function fe(Oe,Ne,Le){var Ue=Oe.length;(!Ne||0>Ne)&&(Ne=0),(!Le||0>Le||Le>Ue)&&(Le=Ue);var Be='';for(var Ve=Ne;Ve<Le;++Ve)Be+=Ce(Oe[Ve]);return Be}function be(Oe,Ne,Le){var Ue=Oe.slice(Ne,Le),Be='';for(var Ve=0;Ve<Ue.length;Ve+=2)Be+=String.fromCharCode(Ue[Ve]+256*Ue[Ve+1]);return Be}function ye(Oe,Ne,Le){if(0!=Oe%1||0>Oe)throw new RangeError('offset is not uint');if(Oe+Ne>Le)throw new RangeError('Trying to access beyond buffer length')}function xe(Oe,Ne,Le,Ue,Be,Ve){if(!C.isBuffer(Oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ne>Be||Ne<Ve)throw new RangeError('"value" argument is out of bounds');if(Le+Ue>Oe.length)throw new RangeError('Index out of range')}function _e(Oe,Ne,Le,Ue){0>Ne&&(Ne=65535+Ne+1);for(var Be=0,Ve=Math.min(Oe.length-Le,2);Be<Ve;++Be)Oe[Le+Be]=(Ne&255<<8*(Ue?Be:1-Be))>>>8*(Ue?Be:1-Be)}function ke(Oe,Ne,Le,Ue){0>Ne&&(Ne=4294967295+Ne+1);for(var Be=0,Ve=Math.min(Oe.length-Le,4);Be<Ve;++Be)Oe[Le+Be]=255&Ne>>>8*(Ue?Be:3-Be)}function we(Oe,Ne,Le,Ue){if(Le+Ue>Oe.length)throw new RangeError('Index out of range');if(0>Le)throw new RangeError('Index out of range')}function je(Oe,Ne,Le,Ue,Be){return Be||we(Oe,Ne,Le,4,3.4028234663852886e38,-3.4028234663852886e38),ze.write(Oe,Ne,Le,Ue,23,4),Le+4}function Se(Oe,Ne,Le,Ue,Be){return Be||we(Oe,Ne,Le,8,1.7976931348623157e308,-1.7976931348623157e308),ze.write(Oe,Ne,Le,Ue,52,8),Le+8}function ve(Oe){if(Oe=De(Oe).replace(Xe,''),2>Oe.length)return'';for(;0!=Oe.length%4;)Oe=Oe+'=';return Oe}function De(Oe){return Oe.trim?Oe.trim():Oe.replace(/^\s+|\s+$/g,'')}function Ce(Oe){return 16>Oe?'0'+Oe.toString(16):Oe.toString(16)}function Ae(Oe,Ne){Ne=Ne||1/0;var Le,Ue=Oe.length,Be=null,Ve=[];for(var qe=0;qe<Ue;++qe){if(Le=Oe.charCodeAt(qe),55295<Le&&57344>Le){if(!Be){if(56319<Le){-1<(Ne-=3)&&Ve.push(239,191,189);continue}else if(qe+1===Ue){-1<(Ne-=3)&&Ve.push(239,191,189);continue}Be=Le;continue}if(56320>Le){-1<(Ne-=3)&&Ve.push(239,191,189),Be=Le;continue}Le=(Be-55296<<10|Le-56320)+65536}else Be&&-1<(Ne-=3)&&Ve.push(239,191,189);if(Be=null,128>Le){if(0>(Ne-=1))break;Ve.push(Le)}else if(2048>Le){if(0>(Ne-=2))break;Ve.push(192|Le>>6,128|63&Le)}else if(65536>Le){if(0>(Ne-=3))break;Ve.push(224|Le>>12,128|63&Le>>6,128|63&Le)}else if(1114112>Le){if(0>(Ne-=4))break;Ve.push(240|Le>>18,128|63&Le>>12,128|63&Le>>6,128|63&Le)}else throw new Error('Invalid code point')}return Ve}function Ee(Oe){var Ne=[];for(var Le=0;Le<Oe.length;++Le)Ne.push(255&Oe.charCodeAt(Le));return Ne}function Re(Oe,Ne){var Le,Ue,Be,Ve=[];for(var qe=0;qe<Oe.length&&!(0>(Ne-=2));++qe)Le=Oe.charCodeAt(qe),Ue=Le>>8,Be=Le%256,Ve.push(Be),Ve.push(Ue);return Ve}function Ie(Oe){return Fe.toByteArray(ve(Oe))}function Te(Oe,Ne,Le,Ue){for(var Be=0;Be<Ue&&!(Be+Le>=Ne.length||Be>=Oe.length);++Be)Ne[Be+Le]=Oe[Be];return Be}function Pe(Oe){return Oe!==Oe}var Fe=D(68),ze=D(69),Me=D(70);S.Buffer=C,S.SlowBuffer=function(Ne){return+Ne!=Ne&&(Ne=0),C.alloc(+Ne)},S.INSPECT_MAX_BYTES=50,C.TYPED_ARRAY_SUPPORT=E.TYPED_ARRAY_SUPPORT===void 0?function(){try{var Ne=new Uint8Array(1);return Ne.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===Ne.foo()&&'function'==typeof Ne.subarray&&0===Ne.subarray(1,1).byteLength}catch(Le){return!1}}():E.TYPED_ARRAY_SUPPORT,S.kMaxLength=R(),C.poolSize=8192,C._augment=function(Oe){return Oe.__proto__=C.prototype,Oe},C.from=function(Oe,Ne,Le){return T(null,Oe,Ne,Le)},C.TYPED_ARRAY_SUPPORT&&(C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&C[Symbol.species]===C&&Object.defineProperty(C,Symbol.species,{value:null,configurable:!0})),C.alloc=function(Oe,Ne,Le){return F(null,Oe,Ne,Le)},C.allocUnsafe=function(Oe){return M(null,Oe)},C.allocUnsafeSlow=function(Oe){return M(null,Oe)},C.isBuffer=function(Ne){return!!(null!=Ne&&Ne._isBuffer)},C.compare=function(Ne,Le){if(!C.isBuffer(Ne)||!C.isBuffer(Le))throw new TypeError('Arguments must be Buffers');if(Ne===Le)return 0;var Ue=Ne.length,Be=Le.length;for(var Ve=0,qe=Math.min(Ue,Be);Ve<qe;++Ve)if(Ne[Ve]!==Le[Ve]){Ue=Ne[Ve],Be=Le[Ve];break}return Ue<Be?-1:Be<Ue?1:0},C.isEncoding=function(Ne){switch((Ne+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},C.concat=function(Ne,Le){if(!Me(Ne))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Ne.length)return C.alloc(0);var Ue;if(Le===void 0)for(Le=0,Ue=0;Ue<Ne.length;++Ue)Le+=Ne[Ue].length;var Be=C.allocUnsafe(Le),Ve=0;for(Ue=0;Ue<Ne.length;++Ue){var qe=Ne[Ue];if(!C.isBuffer(qe))throw new TypeError('"list" argument must be an Array of Buffers');qe.copy(Be,Ve),Ve+=qe.length}return Be},C.byteLength=Q,C.prototype._isBuffer=!0,C.prototype.swap16=function(){var Ne=this.length;if(0!=Ne%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var Le=0;Le<Ne;Le+=2)ee(this,Le,Le+1);return this},C.prototype.swap32=function(){var Ne=this.length;if(0!=Ne%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var Le=0;Le<Ne;Le+=4)ee(this,Le,Le+3),ee(this,Le+1,Le+2);return this},C.prototype.swap64=function(){var Ne=this.length;if(0!=Ne%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var Le=0;Le<Ne;Le+=8)ee(this,Le,Le+7),ee(this,Le+1,Le+6),ee(this,Le+2,Le+5),ee(this,Le+3,Le+4);return this},C.prototype.toString=function(){var Ne=0|this.length;return 0==Ne?'':0===arguments.length?pe(this,0,Ne):G.apply(this,arguments)},C.prototype.equals=function(Ne){if(!C.isBuffer(Ne))throw new TypeError('Argument must be a Buffer');return this===Ne||0===C.compare(this,Ne)},C.prototype.inspect=function(){var Ne='',Le=S.INSPECT_MAX_BYTES;return 0<this.length&&(Ne=this.toString('hex',0,Le).match(/.{2}/g).join(' '),this.length>Le&&(Ne+=' ... ')),'<Buffer '+Ne+'>'},C.prototype.compare=function(Ne,Le,Ue,Be,Ve){if(!C.isBuffer(Ne))throw new TypeError('Argument must be a Buffer');if(void 0===Le&&(Le=0),void 0===Ue&&(Ue=Ne?Ne.length:0),void 0===Be&&(Be=0),void 0===Ve&&(Ve=this.length),0>Le||Ue>Ne.length||0>Be||Ve>this.length)throw new RangeError('out of range index');if(Be>=Ve&&Le>=Ue)return 0;if(Be>=Ve)return-1;if(Le>=Ue)return 1;if(Le>>>=0,Ue>>>=0,Be>>>=0,Ve>>>=0,this===Ne)return 0;var qe=Ve-Be,$e=Ue-Le,Ze=Math.min(qe,$e),He=this.slice(Be,Ve),We=Ne.slice(Le,Ue);for(var Je=0;Je<Ze;++Je)if(He[Je]!==We[Je]){qe=He[Je],$e=We[Je];break}return qe<$e?-1:$e<qe?1:0},C.prototype.includes=function(Ne,Le,Ue){return-1!==this.indexOf(Ne,Le,Ue)},C.prototype.indexOf=function(Ne,Le,Ue){return te(this,Ne,Le,Ue,!0)},C.prototype.lastIndexOf=function(Ne,Le,Ue){return te(this,Ne,Le,Ue,!1)},C.prototype.write=function(Ne,Le,Ue,Be){if(void 0===Le)Be='utf8',Ue=this.length,Le=0;else if(void 0===Ue&&'string'==typeof Le)Be=Le,Ue=this.length,Le=0;else if(isFinite(Le))Le=0|Le,isFinite(Ue)?(Ue=0|Ue,void 0===Be&&(Be='utf8')):(Be=Ue,Ue=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var Ve=this.length-Le;if((void 0===Ue||Ue>Ve)&&(Ue=Ve),0<Ne.length&&(0>Ue||0>Le)||Le>this.length)throw new RangeError('Attempt to write outside buffer bounds');Be||(Be='utf8');for(var qe=!1;;)switch(Be){case'hex':return ae(this,Ne,Le,Ue);case'utf8':case'utf-8':return oe(this,Ne,Le,Ue);case'ascii':return se(this,Ne,Le,Ue);case'latin1':case'binary':return le(this,Ne,Le,Ue);case'base64':return de(this,Ne,Le,Ue);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return ue(this,Ne,Le,Ue);default:if(qe)throw new TypeError('Unknown encoding: '+Be);Be=(''+Be).toLowerCase(),qe=!0;}},C.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var Ye=4096;C.prototype.slice=function(Ne,Le){var Ue=this.length;Ne=~~Ne,Le=Le===void 0?Ue:~~Le,0>Ne?(Ne+=Ue,0>Ne&&(Ne=0)):Ne>Ue&&(Ne=Ue),0>Le?(Le+=Ue,0>Le&&(Le=0)):Le>Ue&&(Le=Ue),Le<Ne&&(Le=Ne);var Be;if(C.TYPED_ARRAY_SUPPORT)Be=this.subarray(Ne,Le),Be.__proto__=C.prototype;else{var Ve=Le-Ne;Be=new C(Ve,void 0);for(var qe=0;qe<Ve;++qe)Be[qe]=this[qe+Ne]}return Be},C.prototype.readUIntLE=function(Ne,Le,Ue){Ne=0|Ne,Le=0|Le,Ue||ye(Ne,Le,this.length);for(var Be=this[Ne],Ve=1,qe=0;++qe<Le&&(Ve*=256);)Be+=this[Ne+qe]*Ve;return Be},C.prototype.readUIntBE=function(Ne,Le,Ue){Ne=0|Ne,Le=0|Le,Ue||ye(Ne,Le,this.length);for(var Be=this[Ne+--Le],Ve=1;0<Le&&(Ve*=256);)Be+=this[Ne+--Le]*Ve;return Be},C.prototype.readUInt8=function(Ne,Le){return Le||ye(Ne,1,this.length),this[Ne]},C.prototype.readUInt16LE=function(Ne,Le){return Le||ye(Ne,2,this.length),this[Ne]|this[Ne+1]<<8},C.prototype.readUInt16BE=function(Ne,Le){return Le||ye(Ne,2,this.length),this[Ne]<<8|this[Ne+1]},C.prototype.readUInt32LE=function(Ne,Le){return Le||ye(Ne,4,this.length),(this[Ne]|this[Ne+1]<<8|this[Ne+2]<<16)+16777216*this[Ne+3]},C.prototype.readUInt32BE=function(Ne,Le){return Le||ye(Ne,4,this.length),16777216*this[Ne]+(this[Ne+1]<<16|this[Ne+2]<<8|this[Ne+3])},C.prototype.readIntLE=function(Ne,Le,Ue){Ne=0|Ne,Le=0|Le,Ue||ye(Ne,Le,this.length);for(var Be=this[Ne],Ve=1,qe=0;++qe<Le&&(Ve*=256);)Be+=this[Ne+qe]*Ve;return Ve*=128,Be>=Ve&&(Be-=Math.pow(2,8*Le)),Be},C.prototype.readIntBE=function(Ne,Le,Ue){Ne=0|Ne,Le=0|Le,Ue||ye(Ne,Le,this.length);for(var Be=Le,Ve=1,qe=this[Ne+--Be];0<Be&&(Ve*=256);)qe+=this[Ne+--Be]*Ve;return Ve*=128,qe>=Ve&&(qe-=Math.pow(2,8*Le)),qe},C.prototype.readInt8=function(Ne,Le){return Le||ye(Ne,1,this.length),128&this[Ne]?-1*(255-this[Ne]+1):this[Ne]},C.prototype.readInt16LE=function(Ne,Le){Le||ye(Ne,2,this.length);var Ue=this[Ne]|this[Ne+1]<<8;return 32768&Ue?4294901760|Ue:Ue},C.prototype.readInt16BE=function(Ne,Le){Le||ye(Ne,2,this.length);var Ue=this[Ne+1]|this[Ne]<<8;return 32768&Ue?4294901760|Ue:Ue},C.prototype.readInt32LE=function(Ne,Le){return Le||ye(Ne,4,this.length),this[Ne]|this[Ne+1]<<8|this[Ne+2]<<16|this[Ne+3]<<24},C.prototype.readInt32BE=function(Ne,Le){return Le||ye(Ne,4,this.length),this[Ne]<<24|this[Ne+1]<<16|this[Ne+2]<<8|this[Ne+3]},C.prototype.readFloatLE=function(Ne,Le){return Le||ye(Ne,4,this.length),ze.read(this,Ne,!0,23,4)},C.prototype.readFloatBE=function(Ne,Le){return Le||ye(Ne,4,this.length),ze.read(this,Ne,!1,23,4)},C.prototype.readDoubleLE=function(Ne,Le){return Le||ye(Ne,8,this.length),ze.read(this,Ne,!0,52,8)},C.prototype.readDoubleBE=function(Ne,Le){return Le||ye(Ne,8,this.length),ze.read(this,Ne,!1,52,8)},C.prototype.writeUIntLE=function(Ne,Le,Ue,Be){if(Ne=+Ne,Le=0|Le,Ue=0|Ue,!Be){var Ve=Math.pow(2,8*Ue)-1;xe(this,Ne,Le,Ue,Ve,0)}var qe=1,$e=0;for(this[Le]=255&Ne;++$e<Ue&&(qe*=256);)this[Le+$e]=255&Ne/qe;return Le+Ue},C.prototype.writeUIntBE=function(Ne,Le,Ue,Be){if(Ne=+Ne,Le=0|Le,Ue=0|Ue,!Be){var Ve=Math.pow(2,8*Ue)-1;xe(this,Ne,Le,Ue,Ve,0)}var qe=Ue-1,$e=1;for(this[Le+qe]=255&Ne;0<=--qe&&($e*=256);)this[Le+qe]=255&Ne/$e;return Le+Ue},C.prototype.writeUInt8=function(Ne,Le,Ue){return Ne=+Ne,Le=0|Le,Ue||xe(this,Ne,Le,1,255,0),C.TYPED_ARRAY_SUPPORT||(Ne=Math.floor(Ne)),this[Le]=255&Ne,Le+1},C.prototype.writeUInt16LE=function(Ne,Le,Ue){return Ne=+Ne,Le=0|Le,Ue||xe(this,Ne,Le,2,65535,0),C.TYPED_ARRAY_SUPPORT?(this[Le]=255&Ne,this[Le+1]=Ne>>>8):_e(this,Ne,Le,!0),Le+2},C.prototype.writeUInt16BE=function(Ne,Le,Ue){return Ne=+Ne,Le=0|Le,Ue||xe(this,Ne,Le,2,65535,0),C.TYPED_ARRAY_SUPPORT?(this[Le]=Ne>>>8,this[Le+1]=255&Ne):_e(this,Ne,Le,!1),Le+2},C.prototype.writeUInt32LE=function(Ne,Le,Ue){return Ne=+Ne,Le=0|Le,Ue||xe(this,Ne,Le,4,4294967295,0),C.TYPED_ARRAY_SUPPORT?(this[Le+3]=Ne>>>24,this[Le+2]=Ne>>>16,this[Le+1]=Ne>>>8,this[Le]=255&Ne):ke(this,Ne,Le,!0),Le+4},C.prototype.writeUInt32BE=function(Ne,Le,Ue){return Ne=+Ne,Le=0|Le,Ue||xe(this,Ne,Le,4,4294967295,0),C.TYPED_ARRAY_SUPPORT?(this[Le]=Ne>>>24,this[Le+1]=Ne>>>16,this[Le+2]=Ne>>>8,this[Le+3]=255&Ne):ke(this,Ne,Le,!1),Le+4},C.prototype.writeIntLE=function(Ne,Le,Ue,Be){if(Ne=+Ne,Le=0|Le,!Be){var Ve=Math.pow(2,8*Ue-1);xe(this,Ne,Le,Ue,Ve-1,-Ve)}var qe=0,$e=1,Ze=0;for(this[Le]=255&Ne;++qe<Ue&&($e*=256);)0>Ne&&0==Ze&&0!==this[Le+qe-1]&&(Ze=1),this[Le+qe]=255&(Ne/$e>>0)-Ze;return Le+Ue},C.prototype.writeIntBE=function(Ne,Le,Ue,Be){if(Ne=+Ne,Le=0|Le,!Be){var Ve=Math.pow(2,8*Ue-1);xe(this,Ne,Le,Ue,Ve-1,-Ve)}var qe=Ue-1,$e=1,Ze=0;for(this[Le+qe]=255&Ne;0<=--qe&&($e*=256);)0>Ne&&0==Ze&&0!==this[Le+qe+1]&&(Ze=1),this[Le+qe]=255&(Ne/$e>>0)-Ze;return Le+Ue},C.prototype.writeInt8=function(Ne,Le,Ue){return Ne=+Ne,Le=0|Le,Ue||xe(this,Ne,Le,1,127,-128),C.TYPED_ARRAY_SUPPORT||(Ne=Math.floor(Ne)),0>Ne&&(Ne=255+Ne+1),this[Le]=255&Ne,Le+1},C.prototype.writeInt16LE=function(Ne,Le,Ue){return Ne=+Ne,Le=0|Le,Ue||xe(this,Ne,Le,2,32767,-32768),C.TYPED_ARRAY_SUPPORT?(this[Le]=255&Ne,this[Le+1]=Ne>>>8):_e(this,Ne,Le,!0),Le+2},C.prototype.writeInt16BE=function(Ne,Le,Ue){return Ne=+Ne,Le=0|Le,Ue||xe(this,Ne,Le,2,32767,-32768),C.TYPED_ARRAY_SUPPORT?(this[Le]=Ne>>>8,this[Le+1]=255&Ne):_e(this,Ne,Le,!1),Le+2},C.prototype.writeInt32LE=function(Ne,Le,Ue){return Ne=+Ne,Le=0|Le,Ue||xe(this,Ne,Le,4,2147483647,-2147483648),C.TYPED_ARRAY_SUPPORT?(this[Le]=255&Ne,this[Le+1]=Ne>>>8,this[Le+2]=Ne>>>16,this[Le+3]=Ne>>>24):ke(this,Ne,Le,!0),Le+4},C.prototype.writeInt32BE=function(Ne,Le,Ue){return Ne=+Ne,Le=0|Le,Ue||xe(this,Ne,Le,4,2147483647,-2147483648),0>Ne&&(Ne=4294967295+Ne+1),C.TYPED_ARRAY_SUPPORT?(this[Le]=Ne>>>24,this[Le+1]=Ne>>>16,this[Le+2]=Ne>>>8,this[Le+3]=255&Ne):ke(this,Ne,Le,!1),Le+4},C.prototype.writeFloatLE=function(Ne,Le,Ue){return je(this,Ne,Le,!0,Ue)},C.prototype.writeFloatBE=function(Ne,Le,Ue){return je(this,Ne,Le,!1,Ue)},C.prototype.writeDoubleLE=function(Ne,Le,Ue){return Se(this,Ne,Le,!0,Ue)},C.prototype.writeDoubleBE=function(Ne,Le,Ue){return Se(this,Ne,Le,!1,Ue)},C.prototype.copy=function(Ne,Le,Ue,Be){if(Ue||(Ue=0),Be||0===Be||(Be=this.length),Le>=Ne.length&&(Le=Ne.length),Le||(Le=0),0<Be&&Be<Ue&&(Be=Ue),Be===Ue)return 0;if(0===Ne.length||0===this.length)return 0;if(0>Le)throw new RangeError('targetStart out of bounds');if(0>Ue||Ue>=this.length)throw new RangeError('sourceStart out of bounds');if(0>Be)throw new RangeError('sourceEnd out of bounds');Be>this.length&&(Be=this.length),Ne.length-Le<Be-Ue&&(Be=Ne.length-Le+Ue);var Ve=Be-Ue,qe;if(this===Ne&&Ue<Le&&Le<Be)for(qe=Ve-1;0<=qe;--qe)Ne[qe+Le]=this[qe+Ue];else if(1e3>Ve||!C.TYPED_ARRAY_SUPPORT)for(qe=0;qe<Ve;++qe)Ne[qe+Le]=this[qe+Ue];else Uint8Array.prototype.set.call(Ne,this.subarray(Ue,Ue+Ve),Le);return Ve},C.prototype.fill=function(Ne,Le,Ue,Be){if('string'==typeof Ne){if('string'==typeof Le?(Be=Le,Le=0,Ue=this.length):'string'==typeof Ue&&(Be=Ue,Ue=this.length),1===Ne.length){var Ve=Ne.charCodeAt(0);256>Ve&&(Ne=Ve)}if(void 0!==Be&&'string'!=typeof Be)throw new TypeError('encoding must be a string');if('string'==typeof Be&&!C.isEncoding(Be))throw new TypeError('Unknown encoding: '+Be)}else'number'==typeof Ne&&(Ne=255&Ne);if(0>Le||this.length<Le||this.length<Ue)throw new RangeError('Out of range index');if(Ue<=Le)return this;Le=Le>>>0,Ue=Ue===void 0?this.length:Ue>>>0,Ne||(Ne=0);var qe;if('number'==typeof Ne)for(qe=Le;qe<Ue;++qe)this[qe]=Ne;else{var $e=C.isBuffer(Ne)?Ne:Ae(new C(Ne,Be).toString()),Ze=$e.length;for(qe=0;qe<Ue-Le;++qe)this[qe+Le]=$e[qe%Ze]}return this};var Xe=/[^+\/0-9A-Za-z-_]/g}).call(S,D(67).Buffer,function(){return this}())},function(_,S){'use strict';function D(O){var $=O.length;if(0<$%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===O[$-2]?2:'='===O[$-1]?1:0}function C(O){return R[63&O>>18]+R[63&O>>12]+R[63&O>>6]+R[63&O]}function E(O,$,Z){var W,K=[];for(var Q=$;Q<Z;Q+=3)W=(O[Q]<<16)+(O[Q+1]<<8)+O[Q+2],K.push(C(W));return K.join('')}S.byteLength=function($){return 3*$.length/4-D($)},S.toByteArray=function($){var te=$.length,Z,W,K,Q,G,ee;G=D($),ee=new T(3*te/4-G),K=0<G?te-4:te;var ne=0;for(Z=0,W=0;Z<K;Z+=4,W+=3)Q=I[$.charCodeAt(Z)]<<18|I[$.charCodeAt(Z+1)]<<12|I[$.charCodeAt(Z+2)]<<6|I[$.charCodeAt(Z+3)],ee[ne++]=255&Q>>16,ee[ne++]=255&Q>>8,ee[ne++]=255&Q;return 2===G?(Q=I[$.charCodeAt(Z)]<<2|I[$.charCodeAt(Z+1)]>>4,ee[ne++]=255&Q):1==G&&(Q=I[$.charCodeAt(Z)]<<10|I[$.charCodeAt(Z+1)]<<4|I[$.charCodeAt(Z+2)]>>2,ee[ne++]=255&Q>>8,ee[ne++]=255&Q),ee},S.fromByteArray=function($){var W=$.length,K=W%3,Q='',G=[],ee=16383,Z;for(var te=0,ne=W-K;te<ne;te+=ee)G.push(E($,te,te+ee>ne?ne:te+ee));return 1==K?(Z=$[W-1],Q+=R[Z>>2],Q+=R[63&Z<<4],Q+='=='):2==K&&(Z=($[W-2]<<8)+$[W-1],Q+=R[Z>>10],Q+=R[63&Z>>4],Q+=R[63&Z<<2],Q+='='),G.push(Q),G.join('')};var R=[],I=[],T='undefined'==typeof Uint8Array?Array:Uint8Array,P='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';for(var F=0,M=P.length;F<M;++F)R[F]=P[F],I[P.charCodeAt(F)]=F;I['-'.charCodeAt(0)]=62,I['_'.charCodeAt(0)]=63},function(_,S){S.read=function(D,C,E,R,I){var T,P,F=8*I-R-1,M=(1<<F)-1,O=M>>1,$=-7,Z=E?I-1:0,W=E?-1:1,K=D[C+Z];for(Z+=W,T=K&(1<<-$)-1,K>>=-$,$+=F;0<$;T=256*T+D[C+Z],Z+=W,$-=8);for(P=T&(1<<-$)-1,T>>=-$,$+=R;0<$;P=256*P+D[C+Z],Z+=W,$-=8);if(0===T)T=1-O;else{if(T===M)return P?NaN:(K?-1:1)*(1/0);P=P+Math.pow(2,R),T=T-O}return(K?-1:1)*P*Math.pow(2,T-R)},S.write=function(D,C,E,R,I,T){var P,F,M,O=8*T-I-1,$=(1<<O)-1,Z=$>>1,W=23===I?Math.pow(2,-24)-Math.pow(2,-77):0,K=R?0:T-1,Q=R?1:-1,G=0>C||0===C&&0>1/C?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(F=isNaN(C)?1:0,P=$):(P=Math.floor(Math.log(C)/Math.LN2),1>C*(M=Math.pow(2,-P))&&(P--,M*=2),C+=1<=P+Z?W/M:W*Math.pow(2,1-Z),2<=C*M&&(P++,M/=2),P+Z>=$?(F=0,P=$):1<=P+Z?(F=(C*M-1)*Math.pow(2,I),P=P+Z):(F=C*Math.pow(2,Z-1)*Math.pow(2,I),P=0));8<=I;D[E+K]=255&F,K+=Q,F/=256,I-=8);for(P=P<<I|F,O+=I;0<O;D[E+K]=255&P,K+=Q,P/=256,O-=8);D[E+K-Q]|=128*G}},function(_){var S={}.toString;_.exports=Array.isArray||function(D){return'[object Array]'==S.call(D)}},function(_,S,D){'use strict';function C(O){return O}function E(O,$){for(var Z=0;Z<O.length;++Z)$[Z]=255&O.charCodeAt(Z);return $}function R(O){var $=65536,Z=[],W=O.length,K=S.getTypeOf(O),Q=0,G=!0;try{'uint8array'===K?String.fromCharCode.apply(null,new Uint8Array(0)):'nodebuffer'===K?String.fromCharCode.apply(null,F(0)):void 0}catch(ne){G=!1}if(!G){var ee='';for(var te=0;te<O.length;te++)ee+=String.fromCharCode(O[te]);return ee}for(;Q<W&&1<$;)try{'array'===K||'nodebuffer'===K?Z.push(String.fromCharCode.apply(null,O.slice(Q,Math.min(Q+$,W)))):Z.push(String.fromCharCode.apply(null,O.subarray(Q,Math.min(Q+$,W)))),Q+=$}catch(ne){$=Math.floor($/2)}return Z.join('')}function I(O,$){for(var Z=0;Z<O.length;Z++)$[Z]=O[Z];return $}var T=D(66),P=D(72),F=D(90);S.string2binary=function(O){var $='';for(var Z=0;Z<O.length;Z++)$+=String.fromCharCode(255&O.charCodeAt(Z));return $},S.arrayBuffer2Blob=function(O,$){S.checkSupport('blob'),$=$||'application/zip';try{return new Blob([O],{type:$})}catch(K){try{var Z=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,W=new Z;return W.append(O),W.getBlob($)}catch(Q){throw new Error('Bug : can\'t construct the Blob.')}}},S.applyFromCharCode=R;var M={};M.string={string:C,array:function(O){return E(O,Array(O.length))},arraybuffer:function(O){return M.string.uint8array(O).buffer},uint8array:function(O){return E(O,new Uint8Array(O.length))},nodebuffer:function(O){return E(O,F(O.length))}},M.array={string:R,array:C,arraybuffer:function(O){return new Uint8Array(O).buffer},uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return F(O)}},M.arraybuffer={string:function(O){return R(new Uint8Array(O))},array:function(O){return I(new Uint8Array(O),Array(O.byteLength))},arraybuffer:C,uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return F(new Uint8Array(O))}},M.uint8array={string:R,array:function(O){return I(O,Array(O.length))},arraybuffer:function(O){return O.buffer},uint8array:C,nodebuffer:function(O){return F(O)}},M.nodebuffer={string:R,array:function(O){return I(O,Array(O.length))},arraybuffer:function(O){return M.nodebuffer.uint8array(O).buffer},uint8array:function(O){return I(O,new Uint8Array(O.length))},nodebuffer:C},S.transformTo=function(O,$){if($||($=''),!O)return $;S.checkSupport(O);var Z=S.getTypeOf($),W=M[Z][O]($);return W},S.getTypeOf=function(O){return'string'==typeof O?'string':'[object Array]'===Object.prototype.toString.call(O)?'array':T.nodebuffer&&F.test(O)?'nodebuffer':T.uint8array&&O instanceof Uint8Array?'uint8array':T.arraybuffer&&O instanceof ArrayBuffer?'arraybuffer':void 0},S.checkSupport=function(O){var $=T[O.toLowerCase()];if(!$)throw new Error(O+' is not supported by this browser')},S.MAX_VALUE_16BITS=65535,S.MAX_VALUE_32BITS=-1,S.pretty=function(O){var $='',Z,W;for(W=0;W<(O||'').length;W++)Z=O.charCodeAt(W),$+='\\x'+(16>Z?'0':'')+Z.toString(16).toUpperCase();return $},S.findCompression=function(O){for(var $ in P)if(P.hasOwnProperty($)&&P[$].magic===O)return P[$];return null},S.isRegExp=function(O){return'[object RegExp]'===Object.prototype.toString.call(O)},S.extend=function(){var O={},$,Z;for($=0;$<arguments.length;$++)for(Z in arguments[$])arguments[$].hasOwnProperty(Z)&&'undefined'==typeof O[Z]&&(O[Z]=arguments[$][Z]);return O}},function(_,S,D){'use strict';S.STORE={magic:'\0\0',compress:function(C){return C},uncompress:function(C){return C},compressInputType:null,uncompressInputType:null},S.DEFLATE=D(73)},function(_,S,D){'use strict';var C='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Uint32Array,E=D(74);S.uncompressInputType=C?'uint8array':'array',S.compressInputType=C?'uint8array':'array',S.magic='\b\0',S.compress=function(R,I){return E.deflateRaw(R,{level:I.level||-1})},S.uncompress=function(R){return E.inflateRaw(R)}},function(_,S,D){'use strict';var C=D(75).assign,E=D(76),R=D(84),I=D(88),T={};C(T,E,R,I),_.exports=T},function(_,S){'use strict';var D='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Int32Array;S.assign=function(R){for(var I=Array.prototype.slice.call(arguments,1);I.length;){var T=I.shift();if(T){if('object'!=typeof T)throw new TypeError(T+'must be non-object');for(var P in T)T.hasOwnProperty(P)&&(R[P]=T[P])}}return R},S.shrinkBuf=function(R,I){return R.length===I?R:R.subarray?R.subarray(0,I):(R.length=I,R)};var C={arraySet:function(R,I,T,P,F){if(I.subarray&&R.subarray)return void R.set(I.subarray(T,T+P),F);for(var M=0;M<P;M++)R[F+M]=I[T+M]},flattenChunks:function(R){var I,T,P,F,M,O;for(P=0,I=0,T=R.length;I<T;I++)P+=R[I].length;for(O=new Uint8Array(P),F=0,(I=0,T=R.length);I<T;I++)M=R[I],O.set(M,F),F+=M.length;return O}},E={arraySet:function(R,I,T,P,F){for(var M=0;M<P;M++)R[F+M]=I[T+M]},flattenChunks:function(R){return[].concat.apply([],R)}};S.setTyped=function(R){R?(S.Buf8=Uint8Array,S.Buf16=Uint16Array,S.Buf32=Int32Array,S.assign(S,C)):(S.Buf8=Array,S.Buf16=Array,S.Buf32=Array,S.assign(S,E))},S.setTyped(D)},function(_,S,D){'use strict';function C(K){if(!(this instanceof C))return new C(K);this.options=I.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:''},K||{});var Q=this.options;Q.raw&&0<Q.windowBits?Q.windowBits=-Q.windowBits:Q.gzip&&0<Q.windowBits&&16>Q.windowBits&&(Q.windowBits+=16),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new F,this.strm.avail_out=0;var G=R.deflateInit2(this.strm,Q.level,Q.method,Q.windowBits,Q.memLevel,Q.strategy);if(G!==$)throw new Error(P[G]);if(Q.header&&R.deflateSetHeader(this.strm,Q.header),Q.dictionary){var ee;if(ee='string'==typeof Q.dictionary?T.string2buf(Q.dictionary):'[object ArrayBuffer]'===M.call(Q.dictionary)?new Uint8Array(Q.dictionary):Q.dictionary,G=R.deflateSetDictionary(this.strm,ee),G!==$)throw new Error(P[G]);this._dict_set=!0}}function E(K,Q){var G=new C(Q);if(G.push(K,!0),G.err)throw G.msg;return G.result}var R=D(77),I=D(75),T=D(82),P=D(81),F=D(83),M=Object.prototype.toString,O=4,$=0,Z=1,W=2;C.prototype.push=function(K,Q){var G=this.strm,ee=this.options.chunkSize,te,ne;if(this.ended)return!1;ne=Q===~~Q?Q:!0===Q?O:0,G.input='string'==typeof K?T.string2buf(K):'[object ArrayBuffer]'===M.call(K)?new Uint8Array(K):K,G.next_in=0,G.avail_in=G.input.length;do{if(0===G.avail_out&&(G.output=new I.Buf8(ee),G.next_out=0,G.avail_out=ee),te=R.deflate(G,ne),te!==Z&&te!==$)return this.onEnd(te),this.ended=!0,!1;(0===G.avail_out||0===G.avail_in&&(ne===O||ne===W))&&('string'===this.options.to?this.onData(T.buf2binstring(I.shrinkBuf(G.output,G.next_out))):this.onData(I.shrinkBuf(G.output,G.next_out)))}while((0<G.avail_in||0===G.avail_out)&&te!==Z);return ne===O?(te=R.deflateEnd(this.strm),this.onEnd(te),this.ended=!0,te===$):ne!==W||(this.onEnd($),G.avail_out=0,!0)},C.prototype.onData=function(K){this.chunks.push(K)},C.prototype.onEnd=function(K){K===$&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=I.flattenChunks(this.chunks)),this.chunks=[],this.err=K,this.msg=this.strm.msg},S.Deflate=C,S.deflate=E,S.deflateRaw=function(Q,G){return G=G||{},G.raw=!0,E(Q,G)},S.gzip=function(Q,G){return G=G||{},G.gzip=!0,E(Q,G)}},function(_,S,D){'use strict';function C(Ye,Xe){return Ye.msg=he[Xe],Xe}function E(Ye){return(Ye<<1)-(4<Ye?9:0)}function R(Ye){for(var Xe=Ye.length;0<=--Xe;)Ye[Xe]=0}function I(Ye){var Xe=Ye.state,Oe=Xe.pending;Oe>Ye.avail_out&&(Oe=Ye.avail_out);0===Oe||(se.arraySet(Ye.output,Xe.pending_buf,Xe.pending_out,Oe,Ye.next_out),Ye.next_out+=Oe,Xe.pending_out+=Oe,Ye.total_out+=Oe,Ye.avail_out-=Oe,Xe.pending-=Oe,0===Xe.pending&&(Xe.pending_out=0))}function T(Ye,Xe){le._tr_flush_block(Ye,0<=Ye.block_start?Ye.block_start:-1,Ye.strstart-Ye.block_start,Xe),Ye.block_start=Ye.strstart,I(Ye.strm)}function P(Ye,Xe){Ye.pending_buf[Ye.pending++]=Xe}function F(Ye,Xe){Ye.pending_buf[Ye.pending++]=255&Xe>>>8,Ye.pending_buf[Ye.pending++]=255&Xe}function M(Ye,Xe,Oe,Ne){var Le=Ye.avail_in;return(Le>Ne&&(Le=Ne),0===Le)?0:(Ye.avail_in-=Le,se.arraySet(Xe,Ye.input,Ye.next_in,Le,Oe),1===Ye.state.wrap?Ye.adler=de(Ye.adler,Xe,Le,Oe):2===Ye.state.wrap&&(Ye.adler=ue(Ye.adler,Xe,Le,Oe)),Ye.next_in+=Le,Ye.total_in+=Le,Le)}function O(Ye,Xe){var Oe=Ye.max_chain_length,Ne=Ye.strstart,Le,Ue,Be=Ye.prev_length,Ve=Ye.nice_match,qe=Ye.strstart>Ye.w_size-Se?Ye.strstart-(Ye.w_size-Se):0,$e=Ye.window,Ze=Ye.w_mask,He=Ye.prev,We=Ye.strstart+je,Je=$e[Ne+Be-1],Ke=$e[Ne+Be];Ye.prev_length>=Ye.good_match&&(Oe>>=2),Ve>Ye.lookahead&&(Ve=Ye.lookahead);do{if(Le=Xe,$e[Le+Be]!==Ke||$e[Le+Be-1]!==Je||$e[Le]!==$e[Ne]||$e[++Le]!==$e[Ne+1])continue;Ne+=2,Le++;do;while($e[++Ne]===$e[++Le]&&$e[++Ne]===$e[++Le]&&$e[++Ne]===$e[++Le]&&$e[++Ne]===$e[++Le]&&$e[++Ne]===$e[++Le]&&$e[++Ne]===$e[++Le]&&$e[++Ne]===$e[++Le]&&$e[++Ne]===$e[++Le]&&Ne<We);if(Ue=je-(We-Ne),Ne=We-je,Ue>Be){if(Ye.match_start=Xe,Be=Ue,Ue>=Ve)break;Je=$e[Ne+Be-1],Ke=$e[Ne+Be]}}while((Xe=He[Xe&Ze])>qe&&0!=--Oe);return Be<=Ye.lookahead?Be:Ye.lookahead}function $(Ye){var Xe=Ye.w_size,Oe,Ne,Le,Ue,Be;do{if(Ue=Ye.window_size-Ye.lookahead-Ye.strstart,Ye.strstart>=Xe+(Xe-Se)){se.arraySet(Ye.window,Ye.window,Xe,Xe,0),Ye.match_start-=Xe,Ye.strstart-=Xe,Ye.block_start-=Xe,Ne=Ye.hash_size,Oe=Ne;do Le=Ye.head[--Oe],Ye.head[Oe]=Le>=Xe?Le-Xe:0;while(--Ne);Ne=Xe,Oe=Ne;do Le=Ye.prev[--Oe],Ye.prev[Oe]=Le>=Xe?Le-Xe:0;while(--Ne);Ue+=Xe}if(0===Ye.strm.avail_in)break;if(Ne=M(Ye.strm,Ye.window,Ye.strstart+Ye.lookahead,Ue),Ye.lookahead+=Ne,Ye.lookahead+Ye.insert>=we)for(Be=Ye.strstart-Ye.insert,Ye.ins_h=Ye.window[Be],Ye.ins_h=(Ye.ins_h<<Ye.hash_shift^Ye.window[Be+1])&Ye.hash_mask;Ye.insert&&(Ye.ins_h=(Ye.ins_h<<Ye.hash_shift^Ye.window[Be+we-1])&Ye.hash_mask,Ye.prev[Be&Ye.w_mask]=Ye.head[Ye.ins_h],Ye.head[Ye.ins_h]=Be,Be++,Ye.insert--,!(Ye.lookahead+Ye.insert<we)););}while(Ye.lookahead<Se&&0!==Ye.strm.avail_in)}function Z(Ye,Xe){for(var Oe,Ne;;){if(Ye.lookahead<Se){if($(Ye),Ye.lookahead<Se&&Xe===pe)return Te;if(0===Ye.lookahead)break}if(Oe=0,Ye.lookahead>=we&&(Ye.ins_h=(Ye.ins_h<<Ye.hash_shift^Ye.window[Ye.strstart+we-1])&Ye.hash_mask,Oe=Ye.prev[Ye.strstart&Ye.w_mask]=Ye.head[Ye.ins_h],Ye.head[Ye.ins_h]=Ye.strstart),0!==Oe&&Ye.strstart-Oe<=Ye.w_size-Se&&(Ye.match_length=O(Ye,Oe)),!(Ye.match_length>=we))Ne=le._tr_tally(Ye,0,Ye.window[Ye.strstart]),Ye.lookahead--,Ye.strstart++;else if(Ne=le._tr_tally(Ye,Ye.strstart-Ye.match_start,Ye.match_length-we),Ye.lookahead-=Ye.match_length,Ye.match_length<=Ye.max_lazy_match&&Ye.lookahead>=we){Ye.match_length--;do Ye.strstart++,Ye.ins_h=(Ye.ins_h<<Ye.hash_shift^Ye.window[Ye.strstart+we-1])&Ye.hash_mask,Oe=Ye.prev[Ye.strstart&Ye.w_mask]=Ye.head[Ye.ins_h],Ye.head[Ye.ins_h]=Ye.strstart;while(0!=--Ye.match_length);Ye.strstart++}else Ye.strstart+=Ye.match_length,Ye.match_length=0,Ye.ins_h=Ye.window[Ye.strstart],Ye.ins_h=(Ye.ins_h<<Ye.hash_shift^Ye.window[Ye.strstart+1])&Ye.hash_mask;if(Ne&&(T(Ye,!1),0===Ye.strm.avail_out))return Te}return Ye.insert=Ye.strstart<we-1?Ye.strstart:we-1,Xe===me?(T(Ye,!0),0===Ye.strm.avail_out?Fe:ze):Ye.last_lit&&(T(Ye,!1),0===Ye.strm.avail_out)?Te:Pe}function W(Ye,Xe){for(var Oe,Ne,Le;;){if(Ye.lookahead<Se){if($(Ye),Ye.lookahead<Se&&Xe===pe)return Te;if(0===Ye.lookahead)break}if(Oe=0,Ye.lookahead>=we&&(Ye.ins_h=(Ye.ins_h<<Ye.hash_shift^Ye.window[Ye.strstart+we-1])&Ye.hash_mask,Oe=Ye.prev[Ye.strstart&Ye.w_mask]=Ye.head[Ye.ins_h],Ye.head[Ye.ins_h]=Ye.strstart),Ye.prev_length=Ye.match_length,Ye.prev_match=Ye.match_start,Ye.match_length=we-1,0!==Oe&&Ye.prev_length<Ye.max_lazy_match&&Ye.strstart-Oe<=Ye.w_size-Se&&(Ye.match_length=O(Ye,Oe),5>=Ye.match_length&&(1===Ye.strategy||Ye.match_length===we&&4096<Ye.strstart-Ye.match_start)&&(Ye.match_length=we-1)),Ye.prev_length>=we&&Ye.match_length<=Ye.prev_length){Le=Ye.strstart+Ye.lookahead-we,Ne=le._tr_tally(Ye,Ye.strstart-1-Ye.prev_match,Ye.prev_length-we),Ye.lookahead-=Ye.prev_length-1,Ye.prev_length-=2;do++Ye.strstart<=Le&&(Ye.ins_h=(Ye.ins_h<<Ye.hash_shift^Ye.window[Ye.strstart+we-1])&Ye.hash_mask,Oe=Ye.prev[Ye.strstart&Ye.w_mask]=Ye.head[Ye.ins_h],Ye.head[Ye.ins_h]=Ye.strstart);while(0!=--Ye.prev_length);if(Ye.match_available=0,Ye.match_length=we-1,Ye.strstart++,Ne&&(T(Ye,!1),0===Ye.strm.avail_out))return Te}else if(!Ye.match_available)Ye.match_available=1,Ye.strstart++,Ye.lookahead--;else if(Ne=le._tr_tally(Ye,0,Ye.window[Ye.strstart-1]),Ne&&T(Ye,!1),Ye.strstart++,Ye.lookahead--,0===Ye.strm.avail_out)return Te}return Ye.match_available&&(Ne=le._tr_tally(Ye,0,Ye.window[Ye.strstart-1]),Ye.match_available=0),Ye.insert=Ye.strstart<we-1?Ye.strstart:we-1,Xe===me?(T(Ye,!0),0===Ye.strm.avail_out?Fe:ze):Ye.last_lit&&(T(Ye,!1),0===Ye.strm.avail_out)?Te:Pe}function K(Ye,Xe){for(var Be=Ye.window,Oe,Ne,Le,Ue;;){if(Ye.lookahead<=je){if($(Ye),Ye.lookahead<=je&&Xe===pe)return Te;if(0===Ye.lookahead)break}if(Ye.match_length=0,Ye.lookahead>=we&&0<Ye.strstart&&(Le=Ye.strstart-1,Ne=Be[Le],Ne===Be[++Le]&&Ne===Be[++Le]&&Ne===Be[++Le])){Ue=Ye.strstart+je;do;while(Ne===Be[++Le]&&Ne===Be[++Le]&&Ne===Be[++Le]&&Ne===Be[++Le]&&Ne===Be[++Le]&&Ne===Be[++Le]&&Ne===Be[++Le]&&Ne===Be[++Le]&&Le<Ue);Ye.match_length=je-(Ue-Le),Ye.match_length>Ye.lookahead&&(Ye.match_length=Ye.lookahead)}if(Ye.match_length>=we?(Oe=le._tr_tally(Ye,1,Ye.match_length-we),Ye.lookahead-=Ye.match_length,Ye.strstart+=Ye.match_length,Ye.match_length=0):(Oe=le._tr_tally(Ye,0,Ye.window[Ye.strstart]),Ye.lookahead--,Ye.strstart++),Oe&&(T(Ye,!1),0===Ye.strm.avail_out))return Te}return Ye.insert=0,Xe===me?(T(Ye,!0),0===Ye.strm.avail_out?Fe:ze):Ye.last_lit&&(T(Ye,!1),0===Ye.strm.avail_out)?Te:Pe}function Q(Ye,Xe){for(var Oe;;){if(0===Ye.lookahead&&($(Ye),0===Ye.lookahead)){if(Xe===pe)return Te;break}if(Ye.match_length=0,Oe=le._tr_tally(Ye,0,Ye.window[Ye.strstart]),Ye.lookahead--,Ye.strstart++,Oe&&(T(Ye,!1),0===Ye.strm.avail_out))return Te}return Ye.insert=0,Xe===me?(T(Ye,!0),0===Ye.strm.avail_out?Fe:ze):Ye.last_lit&&(T(Ye,!1),0===Ye.strm.avail_out)?Te:Pe}function G(Ye,Xe,Oe,Ne,Le){this.good_length=Ye,this.max_lazy=Xe,this.nice_length=Oe,this.max_chain=Ne,this.func=Le}function ee(Ye){Ye.window_size=2*Ye.w_size,R(Ye.head),Ye.max_lazy_match=Me[Ye.level].max_lazy,Ye.good_match=Me[Ye.level].good_length,Ye.nice_match=Me[Ye.level].nice_length,Ye.max_chain_length=Me[Ye.level].max_chain,Ye.strstart=0,Ye.block_start=0,Ye.lookahead=0,Ye.insert=0,Ye.match_length=Ye.prev_length=we-1,Ye.match_available=0,Ye.ins_h=0}function te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_e,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new se.Buf16(2*(2*ke+1)),this.dyn_dtree=new se.Buf16(122),this.bl_tree=new se.Buf16(78),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new se.Buf16(16),this.heap=new se.Buf16(2*ke+1),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new se.Buf16(2*ke+1),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ne(Ye){var Xe;return Ye&&Ye.state?(Ye.total_in=Ye.total_out=0,Ye.data_type=2,Xe=Ye.state,Xe.pending=0,Xe.pending_out=0,0>Xe.wrap&&(Xe.wrap=-Xe.wrap),Xe.status=Xe.wrap?ve:Re,Ye.adler=2===Xe.wrap?0:1,Xe.last_flush=pe,le._tr_init(Xe),ge):C(Ye,be)}function ae(Ye){var Xe=ne(Ye);return Xe===ge&&ee(Ye.state),Xe}function oe(Ye,Xe,Oe,Ne,Le,Ue){if(!Ye)return be;var Be=1;if(-1===Xe&&(Xe=6),0>Ne?(Be=0,Ne=-Ne):15<Ne&&(Be=2,Ne-=16),1>Le||9<Le||Oe!==_e||8>Ne||15<Ne||0>Xe||9<Xe||0>Ue||4<Ue)return C(Ye,be);8===Ne&&(Ne=9);var Ve=new te;return Ye.state=Ve,Ve.strm=Ye,Ve.wrap=Be,Ve.gzhead=null,Ve.w_bits=Ne,Ve.w_size=1<<Ve.w_bits,Ve.w_mask=Ve.w_size-1,Ve.hash_bits=Le+7,Ve.hash_size=1<<Ve.hash_bits,Ve.hash_mask=Ve.hash_size-1,Ve.hash_shift=~~((Ve.hash_bits+we-1)/we),Ve.window=new se.Buf8(2*Ve.w_size),Ve.head=new se.Buf16(Ve.hash_size),Ve.prev=new se.Buf16(Ve.w_size),Ve.lit_bufsize=1<<Le+6,Ve.pending_buf_size=4*Ve.lit_bufsize,Ve.pending_buf=new se.Buf8(Ve.pending_buf_size),Ve.d_buf=1*Ve.lit_bufsize,Ve.l_buf=3*Ve.lit_bufsize,Ve.level=Xe,Ve.strategy=Ue,Ve.method=Oe,ae(Ye)}var se=D(75),le=D(78),de=D(79),ue=D(80),he=D(81),pe=0,me=4,ce=5,ge=0,fe=1,be=-2,ye=-5,xe=2,_e=8,ke=286,we=3,je=258,Se=je+we+1,ve=42,De=69,Ce=73,Ae=91,Ee=103,Re=113,Ie=666,Te=1,Pe=2,Fe=3,ze=4,Me=[new G(0,0,0,0,function(Xe,Oe){var Ne=65535;for(Ne>Xe.pending_buf_size-5&&(Ne=Xe.pending_buf_size-5);;){if(1>=Xe.lookahead){if($(Xe),0===Xe.lookahead&&Oe===pe)return Te;if(0===Xe.lookahead)break}Xe.strstart+=Xe.lookahead,Xe.lookahead=0;var Le=Xe.block_start+Ne;if((0===Xe.strstart||Xe.strstart>=Le)&&(Xe.lookahead=Xe.strstart-Le,Xe.strstart=Le,T(Xe,!1),0===Xe.strm.avail_out))return Te;if(Xe.strstart-Xe.block_start>=Xe.w_size-Se&&(T(Xe,!1),0===Xe.strm.avail_out))return Te}return Xe.insert=0,Oe===me?(T(Xe,!0),0===Xe.strm.avail_out?Fe:ze):Xe.strstart>Xe.block_start&&(T(Xe,!1),0===Xe.strm.avail_out)?Te:Te}),new G(4,4,8,4,Z),new G(4,5,16,8,Z),new G(4,6,32,32,Z),new G(4,4,16,16,W),new G(8,16,32,32,W),new G(8,16,128,128,W),new G(8,32,128,256,W),new G(32,128,258,1024,W),new G(32,258,258,4096,W)];S.deflateInit=function(Xe,Oe){return oe(Xe,Oe,_e,15,8,0)},S.deflateInit2=oe,S.deflateReset=ae,S.deflateResetKeep=ne,S.deflateSetHeader=function(Xe,Oe){return Xe&&Xe.state?2===Xe.state.wrap?(Xe.state.gzhead=Oe,ge):be:be},S.deflate=function(Xe,Oe){var Ne,Le,Ue,Be;if(!Xe||!Xe.state||Oe>ce||0>Oe)return Xe?C(Xe,be):be;if(Le=Xe.state,!Xe.output||!Xe.input&&0!==Xe.avail_in||Le.status===Ie&&Oe!==me)return C(Xe,0===Xe.avail_out?ye:be);if(Le.strm=Xe,Ne=Le.last_flush,Le.last_flush=Oe,Le.status===ve)if(2===Le.wrap)Xe.adler=0,P(Le,31),P(Le,139),P(Le,8),Le.gzhead?(P(Le,(Le.gzhead.text?1:0)+(Le.gzhead.hcrc?2:0)+(Le.gzhead.extra?4:0)+(Le.gzhead.name?8:0)+(Le.gzhead.comment?16:0)),P(Le,255&Le.gzhead.time),P(Le,255&Le.gzhead.time>>8),P(Le,255&Le.gzhead.time>>16),P(Le,255&Le.gzhead.time>>24),P(Le,9===Le.level?2:Le.strategy>=xe||2>Le.level?4:0),P(Le,255&Le.gzhead.os),Le.gzhead.extra&&Le.gzhead.extra.length&&(P(Le,255&Le.gzhead.extra.length),P(Le,255&Le.gzhead.extra.length>>8)),Le.gzhead.hcrc&&(Xe.adler=ue(Xe.adler,Le.pending_buf,Le.pending,0)),Le.gzindex=0,Le.status=De):(P(Le,0),P(Le,0),P(Le,0),P(Le,0),P(Le,0),P(Le,9===Le.level?2:Le.strategy>=xe||2>Le.level?4:0),P(Le,3),Le.status=Re);else{var Ve=_e+(Le.w_bits-8<<4)<<8,qe=-1;qe=Le.strategy>=xe||2>Le.level?0:6>Le.level?1:6===Le.level?2:3,Ve|=qe<<6,0!==Le.strstart&&(Ve|=32),Ve+=31-Ve%31,Le.status=Re,F(Le,Ve),0!==Le.strstart&&(F(Le,Xe.adler>>>16),F(Le,65535&Xe.adler)),Xe.adler=1}if(Le.status===De)if(Le.gzhead.extra){for(Ue=Le.pending;Le.gzindex<(65535&Le.gzhead.extra.length)&&!(Le.pending===Le.pending_buf_size&&(Le.gzhead.hcrc&&Le.pending>Ue&&(Xe.adler=ue(Xe.adler,Le.pending_buf,Le.pending-Ue,Ue)),I(Xe),Ue=Le.pending,Le.pending===Le.pending_buf_size));)P(Le,255&Le.gzhead.extra[Le.gzindex]),Le.gzindex++;Le.gzhead.hcrc&&Le.pending>Ue&&(Xe.adler=ue(Xe.adler,Le.pending_buf,Le.pending-Ue,Ue)),Le.gzindex===Le.gzhead.extra.length&&(Le.gzindex=0,Le.status=Ce)}else Le.status=Ce;if(Le.status===Ce)if(Le.gzhead.name){Ue=Le.pending;do{if(Le.pending===Le.pending_buf_size&&(Le.gzhead.hcrc&&Le.pending>Ue&&(Xe.adler=ue(Xe.adler,Le.pending_buf,Le.pending-Ue,Ue)),I(Xe),Ue=Le.pending,Le.pending===Le.pending_buf_size)){Be=1;break}Be=Le.gzindex<Le.gzhead.name.length?255&Le.gzhead.name.charCodeAt(Le.gzindex++):0,P(Le,Be)}while(0!==Be);Le.gzhead.hcrc&&Le.pending>Ue&&(Xe.adler=ue(Xe.adler,Le.pending_buf,Le.pending-Ue,Ue)),0===Be&&(Le.gzindex=0,Le.status=Ae)}else Le.status=Ae;if(Le.status===Ae)if(Le.gzhead.comment){Ue=Le.pending;do{if(Le.pending===Le.pending_buf_size&&(Le.gzhead.hcrc&&Le.pending>Ue&&(Xe.adler=ue(Xe.adler,Le.pending_buf,Le.pending-Ue,Ue)),I(Xe),Ue=Le.pending,Le.pending===Le.pending_buf_size)){Be=1;break}Be=Le.gzindex<Le.gzhead.comment.length?255&Le.gzhead.comment.charCodeAt(Le.gzindex++):0,P(Le,Be)}while(0!==Be);Le.gzhead.hcrc&&Le.pending>Ue&&(Xe.adler=ue(Xe.adler,Le.pending_buf,Le.pending-Ue,Ue)),0===Be&&(Le.status=Ee)}else Le.status=Ee;if(Le.status===Ee&&(Le.gzhead.hcrc?(Le.pending+2>Le.pending_buf_size&&I(Xe),Le.pending+2<=Le.pending_buf_size&&(P(Le,255&Xe.adler),P(Le,255&Xe.adler>>8),Xe.adler=0,Le.status=Re)):Le.status=Re),0!==Le.pending){if(I(Xe),0===Xe.avail_out)return Le.last_flush=-1,ge;}else if(0===Xe.avail_in&&E(Oe)<=E(Ne)&&Oe!==me)return C(Xe,ye);if(Le.status===Ie&&0!==Xe.avail_in)return C(Xe,ye);if(0!==Xe.avail_in||0!==Le.lookahead||Oe!==pe&&Le.status!==Ie){var $e=Le.strategy===xe?Q(Le,Oe):3===Le.strategy?K(Le,Oe):Me[Le.level].func(Le,Oe);if(($e===Fe||$e===ze)&&(Le.status=Ie),$e===Te||$e===Fe)return 0===Xe.avail_out&&(Le.last_flush=-1),ge;if($e===Pe&&(1===Oe?le._tr_align(Le):Oe!=ce&&(le._tr_stored_block(Le,0,0,!1),3==Oe&&(R(Le.head),0===Le.lookahead&&(Le.strstart=0,Le.block_start=0,Le.insert=0))),I(Xe),0===Xe.avail_out))return Le.last_flush=-1,ge}return Oe===me?0>=Le.wrap?fe:(2===Le.wrap?(P(Le,255&Xe.adler),P(Le,255&Xe.adler>>8),P(Le,255&Xe.adler>>16),P(Le,255&Xe.adler>>24),P(Le,255&Xe.total_in),P(Le,255&Xe.total_in>>8),P(Le,255&Xe.total_in>>16),P(Le,255&Xe.total_in>>24)):(F(Le,Xe.adler>>>16),F(Le,65535&Xe.adler)),I(Xe),0<Le.wrap&&(Le.wrap=-Le.wrap),0===Le.pending?fe:ge):ge},S.deflateEnd=function(Xe){var Oe;return Xe&&Xe.state?(Oe=Xe.state.status,Oe!==ve&&Oe!==De&&Oe!==Ce&&Oe!==Ae&&Oe!==Ee&&Oe!==Re&&Oe!==Ie)?C(Xe,be):(Xe.state=null,Oe===Re?C(Xe,-3):ge):be},S.deflateSetDictionary=function(Xe,Oe){var Ne=Oe.length,Le,Ue,Be,Ve,qe,$e,Ze,He;if(!Xe||!Xe.state)return be;if(Le=Xe.state,Ve=Le.wrap,2===Ve||1===Ve&&Le.status!==ve||Le.lookahead)return be;for(1===Ve&&(Xe.adler=de(Xe.adler,Oe,Ne,0)),Le.wrap=0,Ne>=Le.w_size&&(0===Ve&&(R(Le.head),Le.strstart=0,Le.block_start=0,Le.insert=0),He=new se.Buf8(Le.w_size),se.arraySet(He,Oe,Ne-Le.w_size,Le.w_size,0),Oe=He,Ne=Le.w_size),qe=Xe.avail_in,$e=Xe.next_in,Ze=Xe.input,Xe.avail_in=Ne,Xe.next_in=0,Xe.input=Oe,$(Le);Le.lookahead>=we;){Ue=Le.strstart,Be=Le.lookahead-(we-1);do Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Ue+we-1])&Le.hash_mask,Le.prev[Ue&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Ue,Ue++;while(--Be);Le.strstart=Ue,Le.lookahead=we-1,$(Le)}return Le.strstart+=Le.lookahead,Le.block_start=Le.strstart,Le.insert=Le.lookahead,Le.lookahead=0,Le.match_length=Le.prev_length=we-1,Le.match_available=0,Xe.next_in=$e,Xe.input=Ze,Xe.avail_in=qe,Le.wrap=Ve,ge},S.deflateInfo='pako deflate (from Nodeca project)'},function(_,S,D){'use strict';function C(Ue){for(var Be=Ue.length;0<=--Be;)Ue[Be]=0}function E(Ue,Be,Ve,qe,$e){this.static_tree=Ue,this.extra_bits=Be,this.extra_base=Ve,this.elems=qe,this.max_length=$e,this.has_stree=Ue&&Ue.length}function R(Ue,Be){this.dyn_tree=Ue,this.max_code=0,this.stat_desc=Be}function I(Ue){return 256>Ue?Fe[Ue]:Fe[256+(Ue>>>7)]}function T(Ue,Be){Ue.pending_buf[Ue.pending++]=255&Be,Ue.pending_buf[Ue.pending++]=255&Be>>>8}function P(Ue,Be,Ve){Ue.bi_valid>je-Ve?(Ue.bi_buf|=65535&Be<<Ue.bi_valid,T(Ue,Ue.bi_buf),Ue.bi_buf=Be>>je-Ue.bi_valid,Ue.bi_valid+=Ve-je):(Ue.bi_buf|=65535&Be<<Ue.bi_valid,Ue.bi_valid+=Ve)}function F(Ue,Be,Ve){P(Ue,Ve[2*Be],Ve[2*Be+1])}function M(Ue,Be){var Ve=0;do Ve|=1&Ue,Ue>>>=1,Ve<<=1;while(0<--Be);return Ve>>>1}function O(Ue){16===Ue.bi_valid?(T(Ue,Ue.bi_buf),Ue.bi_buf=0,Ue.bi_valid=0):8<=Ue.bi_valid&&(Ue.pending_buf[Ue.pending++]=255&Ue.bi_buf,Ue.bi_buf>>=8,Ue.bi_valid-=8)}function $(Ue,Be){var Ve=Be.dyn_tree,qe=Be.max_code,$e=Be.stat_desc.static_tree,Ze=Be.stat_desc.has_stree,He=Be.stat_desc.extra_bits,We=Be.stat_desc.extra_base,Je=Be.stat_desc.max_length,Ke,Qe,Ge,et,tt,it,nt=0;for(et=0;et<=we;et++)Ue.bl_count[et]=0;for(Ve[2*Ue.heap[Ue.heap_max]+1]=0,Ke=Ue.heap_max+1;Ke<ke;Ke++)(Qe=Ue.heap[Ke],et=Ve[2*Ve[2*Qe+1]+1]+1,et>Je&&(et=Je,nt++),Ve[2*Qe+1]=et,!(Qe>qe))&&(Ue.bl_count[et]++,tt=0,Qe>=We&&(tt=He[Qe-We]),it=Ve[2*Qe],Ue.opt_len+=it*(et+tt),Ze&&(Ue.static_len+=it*($e[2*Qe+1]+tt)));if(0!=nt){do{for(et=Je-1;0===Ue.bl_count[et];)et--;Ue.bl_count[et]--,Ue.bl_count[et+1]+=2,Ue.bl_count[Je]--,nt-=2}while(0<nt);for(et=Je;0!==et;et--)for(Qe=Ue.bl_count[et];0!==Qe;)(Ge=Ue.heap[--Ke],!(Ge>qe))&&(Ve[2*Ge+1]!==et&&(Ue.opt_len+=(et-Ve[2*Ge+1])*Ve[2*Ge],Ve[2*Ge+1]=et),Qe--)}}function Z(Ue,Be,Ve){var qe=Array(we+1),$e=0,Ze,He;for(Ze=1;Ze<=we;Ze++)qe[Ze]=$e=$e+Ve[Ze-1]<<1;for(He=0;He<=Be;He++){var We=Ue[2*He+1];0!==We&&(Ue[2*He]=M(qe[We]++,We))}}function W(){var Ue,Be,Ve,qe,$e,Ze=Array(we+1);for(Ve=0,qe=0;qe<fe-1;qe++)for(Me[qe]=Ve,Ue=0;Ue<1<<Ae[qe];Ue++)ze[Ve++]=qe;for(ze[Ve-1]=qe,$e=0,qe=0;16>qe;qe++)for(Ye[qe]=$e,Ue=0;Ue<1<<Ee[qe];Ue++)Fe[$e++]=qe;for($e>>=7;qe<xe;qe++)for(Ye[qe]=$e<<7,Ue=0;Ue<1<<Ee[qe]-7;Ue++)Fe[256+$e++]=qe;for(Be=0;Be<=we;Be++)Ze[Be]=0;for(Ue=0;143>=Ue;)Te[2*Ue+1]=8,Ue++,Ze[8]++;for(;255>=Ue;)Te[2*Ue+1]=9,Ue++,Ze[9]++;for(;279>=Ue;)Te[2*Ue+1]=7,Ue++,Ze[7]++;for(;287>=Ue;)Te[2*Ue+1]=8,Ue++,Ze[8]++;for(Z(Te,ye+1,Ze),Ue=0;Ue<xe;Ue++)Pe[2*Ue+1]=5,Pe[2*Ue]=M(Ue,5);Xe=new E(Te,Ae,be+1,ye,we),Oe=new E(Pe,Ee,0,xe,we),Ne=new E([],Re,0,_e,7)}function K(Ue){var Be;for(Be=0;Be<ye;Be++)Ue.dyn_ltree[2*Be]=0;for(Be=0;Be<xe;Be++)Ue.dyn_dtree[2*Be]=0;for(Be=0;Be<_e;Be++)Ue.bl_tree[2*Be]=0;Ue.dyn_ltree[2*Se]=1,Ue.opt_len=Ue.static_len=0,Ue.last_lit=Ue.matches=0}function Q(Ue){8<Ue.bi_valid?T(Ue,Ue.bi_buf):0<Ue.bi_valid&&(Ue.pending_buf[Ue.pending++]=Ue.bi_buf),Ue.bi_buf=0,Ue.bi_valid=0}function G(Ue,Be,Ve,qe){Q(Ue),qe&&(T(Ue,Ve),T(Ue,~Ve)),pe.arraySet(Ue.pending_buf,Ue.window,Be,Ve,Ue.pending),Ue.pending+=Ve}function ee(Ue,Be,Ve,qe){var $e=2*Be,Ze=2*Ve;return Ue[$e]<Ue[Ze]||Ue[$e]===Ue[Ze]&&qe[Be]<=qe[Ve]}function te(Ue,Be,Ve){for(var qe=Ue.heap[Ve],$e=Ve<<1;$e<=Ue.heap_len&&($e<Ue.heap_len&&ee(Be,Ue.heap[$e+1],Ue.heap[$e],Ue.depth)&&$e++,!ee(Be,qe,Ue.heap[$e],Ue.depth));)Ue.heap[Ve]=Ue.heap[$e],Ve=$e,$e<<=1;Ue.heap[Ve]=qe}function ne(Ue,Be,Ve){var qe,$e,Ze=0,He,We;if(0!==Ue.last_lit)do qe=Ue.pending_buf[Ue.d_buf+2*Ze]<<8|Ue.pending_buf[Ue.d_buf+2*Ze+1],$e=Ue.pending_buf[Ue.l_buf+Ze],Ze++,0===qe?F(Ue,$e,Be):(He=ze[$e],F(Ue,He+be+1,Be),We=Ae[He],0!==We&&($e-=Me[He],P(Ue,$e,We)),qe--,He=I(qe),F(Ue,He,Ve),We=Ee[He],0!==We&&(qe-=Ye[He],P(Ue,qe,We)));while(Ze<Ue.last_lit);F(Ue,Se,Be)}function ae(Ue,Be){var Ve=Be.dyn_tree,qe=Be.stat_desc.static_tree,$e=Be.stat_desc.has_stree,Ze=Be.stat_desc.elems,He,We,Je=-1,Ke;for(Ue.heap_len=0,Ue.heap_max=ke,He=0;He<Ze;He++)0===Ve[2*He]?Ve[2*He+1]=0:(Ue.heap[++Ue.heap_len]=Je=He,Ue.depth[He]=0);for(;2>Ue.heap_len;)Ke=Ue.heap[++Ue.heap_len]=2>Je?++Je:0,Ve[2*Ke]=1,Ue.depth[Ke]=0,Ue.opt_len--,$e&&(Ue.static_len-=qe[2*Ke+1]);for(Be.max_code=Je,He=Ue.heap_len>>1;1<=He;He--)te(Ue,Ve,He);Ke=Ze;do He=Ue.heap[1],Ue.heap[1]=Ue.heap[Ue.heap_len--],te(Ue,Ve,1),We=Ue.heap[1],Ue.heap[--Ue.heap_max]=He,Ue.heap[--Ue.heap_max]=We,Ve[2*Ke]=Ve[2*He]+Ve[2*We],Ue.depth[Ke]=(Ue.depth[He]>=Ue.depth[We]?Ue.depth[He]:Ue.depth[We])+1,Ve[2*He+1]=Ve[2*We+1]=Ke,Ue.heap[1]=Ke++,te(Ue,Ve,1);while(2<=Ue.heap_len);Ue.heap[--Ue.heap_max]=Ue.heap[1],$(Ue,Be),Z(Ve,Je,Ue.bl_count)}function oe(Ue,Be,Ve){var qe,$e=-1,Ze,He=Be[1],We=0,Je=7,Ke=4;for(0===He&&(Je=138,Ke=3),Be[2*(Ve+1)+1]=65535,qe=0;qe<=Ve;qe++){if(Ze=He,He=Be[2*(qe+1)+1],++We<Je&&Ze===He)continue;else We<Ke?Ue.bl_tree[2*Ze]+=We:0===Ze?10>=We?Ue.bl_tree[2*De]++:Ue.bl_tree[2*Ce]++:(Ze!==$e&&Ue.bl_tree[2*Ze]++,Ue.bl_tree[2*ve]++);We=0,$e=Ze,0===He?(Je=138,Ke=3):Ze===He?(Je=6,Ke=3):(Je=7,Ke=4)}}function se(Ue,Be,Ve){var qe,$e=-1,Ze,He=Be[1],We=0,Je=7,Ke=4;for(0===He&&(Je=138,Ke=3),qe=0;qe<=Ve;qe++){if(Ze=He,He=Be[2*(qe+1)+1],++We<Je&&Ze===He)continue;else if(We<Ke)do F(Ue,Ze,Ue.bl_tree);while(0!=--We);else 0===Ze?10>=We?(F(Ue,De,Ue.bl_tree),P(Ue,We-3,3)):(F(Ue,Ce,Ue.bl_tree),P(Ue,We-11,7)):(Ze!==$e&&(F(Ue,Ze,Ue.bl_tree),We--),F(Ue,ve,Ue.bl_tree),P(Ue,We-3,2));We=0,$e=Ze,0===He?(Je=138,Ke=3):Ze===He?(Je=6,Ke=3):(Je=7,Ke=4)}}function le(Ue){var Be;for(oe(Ue,Ue.dyn_ltree,Ue.l_desc.max_code),oe(Ue,Ue.dyn_dtree,Ue.d_desc.max_code),ae(Ue,Ue.bl_desc),Be=_e-1;3<=Be&&0===Ue.bl_tree[2*Ie[Be]+1];Be--);return Ue.opt_len+=3*(Be+1)+5+5+4,Be}function de(Ue,Be,Ve,qe){var $e;for(P(Ue,Be-257,5),P(Ue,Ve-1,5),P(Ue,qe-4,4),$e=0;$e<qe;$e++)P(Ue,Ue.bl_tree[2*Ie[$e]+1],3);se(Ue,Ue.dyn_ltree,Be-1),se(Ue,Ue.dyn_dtree,Ve-1)}function ue(Ue){var Be=4093624447,Ve;for(Ve=0;31>=Ve;Ve++,Be>>>=1)if(1&Be&&0!==Ue.dyn_ltree[2*Ve])return me;if(0!==Ue.dyn_ltree[18]||0!==Ue.dyn_ltree[20]||0!==Ue.dyn_ltree[26])return ce;for(Ve=32;Ve<be;Ve++)if(0!==Ue.dyn_ltree[2*Ve])return ce;return me}function he(Ue,Be,Ve,qe){P(Ue,0+(qe?1:0),3),G(Ue,Be,Ve,!0)}var pe=D(75),me=0,ce=1,ge=1,fe=29,be=256,ye=be+1+fe,xe=30,_e=19,ke=2*ye+1,we=15,je=16,Se=256,ve=16,De=17,Ce=18,Ae=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Te=Array(2*(ye+2));C(Te);var Pe=Array(2*xe);C(Pe);var Fe=Array(512);C(Fe);var ze=Array(256);C(ze);var Me=Array(fe);C(Me);var Ye=Array(xe);C(Ye);var Xe,Oe,Ne,Le=!1;S._tr_init=function(Be){Le||(W(),Le=!0),Be.l_desc=new R(Be.dyn_ltree,Xe),Be.d_desc=new R(Be.dyn_dtree,Oe),Be.bl_desc=new R(Be.bl_tree,Ne),Be.bi_buf=0,Be.bi_valid=0,K(Be)},S._tr_stored_block=he,S._tr_flush_block=function(Be,Ve,qe,$e){var Ze,He,We=0;0<Be.level?(2===Be.strm.data_type&&(Be.strm.data_type=ue(Be)),ae(Be,Be.l_desc),ae(Be,Be.d_desc),We=le(Be),Ze=Be.opt_len+3+7>>>3,He=Be.static_len+3+7>>>3,He<=Ze&&(Ze=He)):Ze=He=qe+5,qe+4<=Ze&&-1!==Ve?he(Be,Ve,qe,$e):4===Be.strategy||He===Ze?(P(Be,(ge<<1)+($e?1:0),3),ne(Be,Te,Pe)):(P(Be,4+($e?1:0),3),de(Be,Be.l_desc.max_code+1,Be.d_desc.max_code+1,We+1),ne(Be,Be.dyn_ltree,Be.dyn_dtree)),K(Be),$e&&Q(Be)},S._tr_tally=function(Be,Ve,qe){return Be.pending_buf[Be.d_buf+2*Be.last_lit]=255&Ve>>>8,Be.pending_buf[Be.d_buf+2*Be.last_lit+1]=255&Ve,Be.pending_buf[Be.l_buf+Be.last_lit]=255&qe,Be.last_lit++,0===Ve?Be.dyn_ltree[2*qe]++:(Be.matches++,Ve--,Be.dyn_ltree[2*(ze[qe]+be+1)]++,Be.dyn_dtree[2*I(Ve)]++),Be.last_lit===Be.lit_bufsize-1},S._tr_align=function(Be){P(Be,ge<<1,3),F(Be,Se,Te),O(Be)}},function(_){'use strict';_.exports=function(D,C,E,R){for(var I=0|65535&D,T=0|65535&D>>>16,P=0;0!==E;){P=2e3<E?2e3:E,E-=P;do I=0|I+C[R++],T=0|T+I;while(--P);I%=65521,T%=65521}return 0|(I|T<<16)}},function(_){'use strict';var S=function(){var E=[],C;for(var R=0;256>R;R++){C=R;for(var I=0;8>I;I++)C=1&C?3988292384^C>>>1:C>>>1;E[R]=C}return E}();_.exports=function(C,E,R,I){C^=-1;for(var T=I;T<I+R;T++)C=C>>>8^S[255&(C^E[T])];return-1^C}},function(_){'use strict';_.exports={'0':'','1':'stream end','2':'need dictionary','-1':'file error','-2':'stream error','-3':'data error','-4':'insufficient memory','-5':'buffer error','-6':'incompatible version'}},function(_,S,D){'use strict';function C(F,M){if(65537>M&&(F.subarray&&I||!F.subarray&&R))return String.fromCharCode.apply(null,E.shrinkBuf(F,M));var O='';for(var $=0;$<M;$++)O+=String.fromCharCode(F[$]);return O}var E=D(75),R=!0,I=!0;try{String.fromCharCode.apply(null,[0])}catch(F){R=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(F){I=!1}var T=new E.Buf8(256);for(var P=0;256>P;P++)T[P]=252<=P?6:248<=P?5:240<=P?4:224<=P?3:192<=P?2:1;T[254]=T[254]=1,S.string2buf=function(F){var K=F.length,Q=0,M,O,$,Z,W;for(Z=0;Z<K;Z++)O=F.charCodeAt(Z),55296==(64512&O)&&Z+1<K&&($=F.charCodeAt(Z+1),56320==(64512&$)&&(O=65536+(O-55296<<10)+($-56320),Z++)),Q+=128>O?1:2048>O?2:65536>O?3:4;for(M=new E.Buf8(Q),W=0,Z=0;W<Q;Z++)O=F.charCodeAt(Z),55296==(64512&O)&&Z+1<K&&($=F.charCodeAt(Z+1),56320==(64512&$)&&(O=65536+(O-55296<<10)+($-56320),Z++)),128>O?M[W++]=O:2048>O?(M[W++]=192|O>>>6,M[W++]=128|63&O):65536>O?(M[W++]=224|O>>>12,M[W++]=128|63&O>>>6,M[W++]=128|63&O):(M[W++]=240|O>>>18,M[W++]=128|63&O>>>12,M[W++]=128|63&O>>>6,M[W++]=128|63&O);return M},S.buf2binstring=function(F){return C(F,F.length)},S.binstring2buf=function(F){var M=new E.Buf8(F.length);for(var O=0,$=M.length;O<$;O++)M[O]=F.charCodeAt(O);return M},S.buf2string=function(F,M){var O,$,Z,W,K=M||F.length,Q=Array(2*K);for($=0,O=0;O<K;){if(Z=F[O++],128>Z){Q[$++]=Z;continue}if(W=T[Z],4<W){Q[$++]=65533,O+=W-1;continue}for(Z&=2===W?31:3===W?15:7;1<W&&O<K;)Z=Z<<6|63&F[O++],W--;if(1<W){Q[$++]=65533;continue}65536>Z?Q[$++]=Z:(Z-=65536,Q[$++]=55296|1023&Z>>10,Q[$++]=56320|1023&Z)}return C(Q,$)},S.utf8border=function(F,M){var O;for(M=M||F.length,M>F.length&&(M=F.length),O=M-1;0<=O&&128==(192&F[O]);)O--;return 0>O?M:0===O?M:O+T[F[O]]>M?O:M}},function(_){'use strict';_.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg='',this.state=null,this.data_type=2,this.adler=0}},function(_,S,D){'use strict';function C(Z){if(!(this instanceof C))return new C(Z);this.options=I.assign({chunkSize:16384,windowBits:0,to:''},Z||{});var W=this.options;W.raw&&0<=W.windowBits&&16>W.windowBits&&(W.windowBits=-W.windowBits,0===W.windowBits&&(W.windowBits=-15)),0<=W.windowBits&&16>W.windowBits&&!(Z&&Z.windowBits)&&(W.windowBits+=32),15<W.windowBits&&48>W.windowBits&&0==(15&W.windowBits)&&(W.windowBits|=15),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0;var K=R.inflateInit2(this.strm,W.windowBits);if(K!==P.Z_OK)throw new Error(F[K]);this.header=new O,R.inflateGetHeader(this.strm,this.header)}function E(Z,W){var K=new C(W);if(K.push(Z,!0),K.err)throw K.msg;return K.result}var R=D(85),I=D(75),T=D(82),P=D(88),F=D(81),M=D(83),O=D(89),$=Object.prototype.toString;C.prototype.push=function(Z,W){var K=this.strm,Q=this.options.chunkSize,G=this.options.dictionary,le=!1,ee,te,ne,ae,oe,se;if(this.ended)return!1;te=W===~~W?W:!0===W?P.Z_FINISH:P.Z_NO_FLUSH,K.input='string'==typeof Z?T.binstring2buf(Z):'[object ArrayBuffer]'===$.call(Z)?new Uint8Array(Z):Z,K.next_in=0,K.avail_in=K.input.length;do{if(0===K.avail_out&&(K.output=new I.Buf8(Q),K.next_out=0,K.avail_out=Q),ee=R.inflate(K,P.Z_NO_FLUSH),ee===P.Z_NEED_DICT&&G&&(se='string'==typeof G?T.string2buf(G):'[object ArrayBuffer]'===$.call(G)?new Uint8Array(G):G,ee=R.inflateSetDictionary(this.strm,se)),ee===P.Z_BUF_ERROR&&!0==le&&(ee=P.Z_OK,le=!1),ee!==P.Z_STREAM_END&&ee!==P.Z_OK)return this.onEnd(ee),this.ended=!0,!1;K.next_out&&(0===K.avail_out||ee===P.Z_STREAM_END||0===K.avail_in&&(te===P.Z_FINISH||te===P.Z_SYNC_FLUSH))&&('string'===this.options.to?(ne=T.utf8border(K.output,K.next_out),ae=K.next_out-ne,oe=T.buf2string(K.output,ne),K.next_out=ae,K.avail_out=Q-ae,ae&&I.arraySet(K.output,K.output,ne,ae,0),this.onData(oe)):this.onData(I.shrinkBuf(K.output,K.next_out))),0===K.avail_in&&0===K.avail_out&&(le=!0)}while((0<K.avail_in||0===K.avail_out)&&ee!==P.Z_STREAM_END);return ee===P.Z_STREAM_END&&(te=P.Z_FINISH),te===P.Z_FINISH?(ee=R.inflateEnd(this.strm),this.onEnd(ee),this.ended=!0,ee===P.Z_OK):te!==P.Z_SYNC_FLUSH||(this.onEnd(P.Z_OK),K.avail_out=0,!0)},C.prototype.onData=function(Z){this.chunks.push(Z)},C.prototype.onEnd=function(Z){Z===P.Z_OK&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=I.flattenChunks(this.chunks)),this.chunks=[],this.err=Z,this.msg=this.strm.msg},S.Inflate=C,S.inflate=E,S.inflateRaw=function(W,K){return K=K||{},K.raw=!0,E(W,K)},S.ungzip=E},function(_,S,D){'use strict';function C(Be){return(255&Be>>>24)+(65280&Be>>>8)+((65280&Be)<<8)+((255&Be)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new O.Buf16(320),this.work=new O.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R(Be){var Ve;return Be&&Be.state?(Ve=Be.state,Be.total_in=Be.total_out=Ve.total=0,Be.msg='',Ve.wrap&&(Be.adler=1&Ve.wrap),Ve.mode=de,Ve.last=0,Ve.havedict=0,Ve.dmax=32768,Ve.head=null,Ve.hold=0,Ve.bits=0,Ve.lencode=Ve.lendyn=new O.Buf32(852),Ve.distcode=Ve.distdyn=new O.Buf32(592),Ve.sane=1,Ve.back=-1,ne):ae}function I(Be){var Ve;return Be&&Be.state?(Ve=Be.state,Ve.wsize=0,Ve.whave=0,Ve.wnext=0,R(Be)):ae}function T(Be,Ve){var qe,$e;return Be&&Be.state?($e=Be.state,0>Ve?(qe=0,Ve=-Ve):(qe=(Ve>>4)+1,48>Ve&&(Ve&=15)),Ve&&(8>Ve||15<Ve))?ae:(null!==$e.window&&$e.wbits!==Ve&&($e.window=null),$e.wrap=qe,$e.wbits=Ve,I(Be)):ae}function P(Be,Ve){var qe,$e;return Be?($e=new E,Be.state=$e,$e.window=null,qe=T(Be,Ve),qe!==ne&&(Be.state=null),qe):ae}function F(Be){if(Ne){var Ve;for(Le=new O.Buf32(512),Ue=new O.Buf32(32),Ve=0;144>Ve;)Be.lens[Ve++]=8;for(;256>Ve;)Be.lens[Ve++]=9;for(;280>Ve;)Be.lens[Ve++]=7;for(;288>Ve;)Be.lens[Ve++]=8;for(K(Q,Be.lens,0,288,Le,0,Be.work,{bits:9}),Ve=0;32>Ve;)Be.lens[Ve++]=5;K(G,Be.lens,0,32,Ue,0,Be.work,{bits:5}),Ne=!1}Be.lencode=Le,Be.lenbits=9,Be.distcode=Ue,Be.distbits=5}function M(Be,Ve,qe,$e){var He=Be.state,Ze;return null===He.window&&(He.wsize=1<<He.wbits,He.wnext=0,He.whave=0,He.window=new O.Buf8(He.wsize)),$e>=He.wsize?(O.arraySet(He.window,Ve,qe-He.wsize,He.wsize,0),He.wnext=0,He.whave=He.wsize):(Ze=He.wsize-He.wnext,Ze>$e&&(Ze=$e),O.arraySet(He.window,Ve,qe-$e,Ze,He.wnext),$e-=Ze,$e?(O.arraySet(He.window,Ve,qe-$e,$e,0),He.wnext=$e,He.whave=He.wsize):(He.wnext+=Ze,He.wnext===He.wsize&&(He.wnext=0),He.whave<He.wsize&&(He.whave+=Ze))),0}var O=D(75),$=D(79),Z=D(80),W=D(86),K=D(87),Q=1,G=2,ee=4,te=6,ne=0,ae=-2,oe=-3,se=-4,le=8,de=1,ue=2,he=3,pe=4,me=5,ce=6,ge=7,fe=8,be=9,ye=10,xe=11,_e=12,ke=13,we=14,je=15,Se=16,ve=17,De=18,Ce=19,Ae=20,Ee=21,Re=22,Ie=23,Te=24,Pe=25,Fe=26,ze=27,Me=28,Ye=29,Xe=30,Oe=31,Ne=!0,Le,Ue;S.inflateReset=I,S.inflateReset2=T,S.inflateResetKeep=R,S.inflateInit=function(Ve){return P(Ve,15)},S.inflateInit2=P,S.inflate=function(Ve,qe){var st=0,yt=new O.Buf8(4),kt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$e,Ze,He,We,Je,Ke,Qe,Ge,et,tt,it,nt,at,ot,lt,ut,ht,pt,mt,ct,gt,bt,xt,_t;if(!Ve||!Ve.state||!Ve.output||!Ve.input&&0!==Ve.avail_in)return ae;$e=Ve.state,$e.mode===_e&&($e.mode=ke),Je=Ve.next_out,He=Ve.output,Qe=Ve.avail_out,We=Ve.next_in,Ze=Ve.input,Ke=Ve.avail_in,Ge=$e.hold,et=$e.bits,tt=Ke,it=Qe,bt=ne;inf_leave:for(;;)switch($e.mode){case de:if(0===$e.wrap){$e.mode=ke;break}for(;16>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}if(2&$e.wrap&&35615===Ge){$e.check=0,yt[0]=255&Ge,yt[1]=255&Ge>>>8,$e.check=Z($e.check,yt,2,0),Ge=0,et=0,$e.mode=ue;break}if($e.flags=0,$e.head&&($e.head.done=!1),!(1&$e.wrap)||(((255&Ge)<<8)+(Ge>>8))%31){Ve.msg='incorrect header check',$e.mode=Xe;break}if((15&Ge)!=le){Ve.msg='unknown compression method',$e.mode=Xe;break}if(Ge>>>=4,et-=4,gt=(15&Ge)+8,0===$e.wbits)$e.wbits=gt;else if(gt>$e.wbits){Ve.msg='invalid window size',$e.mode=Xe;break}$e.dmax=1<<gt,Ve.adler=$e.check=1,$e.mode=512&Ge?ye:_e,Ge=0,et=0;break;case ue:for(;16>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}if($e.flags=Ge,(255&$e.flags)!=le){Ve.msg='unknown compression method',$e.mode=Xe;break}if(57344&$e.flags){Ve.msg='unknown header flags set',$e.mode=Xe;break}$e.head&&($e.head.text=1&Ge>>8),512&$e.flags&&(yt[0]=255&Ge,yt[1]=255&Ge>>>8,$e.check=Z($e.check,yt,2,0)),Ge=0,et=0,$e.mode=he;case he:for(;32>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}$e.head&&($e.head.time=Ge),512&$e.flags&&(yt[0]=255&Ge,yt[1]=255&Ge>>>8,yt[2]=255&Ge>>>16,yt[3]=255&Ge>>>24,$e.check=Z($e.check,yt,4,0)),Ge=0,et=0,$e.mode=pe;case pe:for(;16>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}$e.head&&($e.head.xflags=255&Ge,$e.head.os=Ge>>8),512&$e.flags&&(yt[0]=255&Ge,yt[1]=255&Ge>>>8,$e.check=Z($e.check,yt,2,0)),Ge=0,et=0,$e.mode=me;case me:if(1024&$e.flags){for(;16>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}$e.length=Ge,$e.head&&($e.head.extra_len=Ge),512&$e.flags&&(yt[0]=255&Ge,yt[1]=255&Ge>>>8,$e.check=Z($e.check,yt,2,0)),Ge=0,et=0}else $e.head&&($e.head.extra=null);$e.mode=ce;case ce:if(1024&$e.flags&&(nt=$e.length,nt>Ke&&(nt=Ke),nt&&($e.head&&(gt=$e.head.extra_len-$e.length,!$e.head.extra&&($e.head.extra=Array($e.head.extra_len)),O.arraySet($e.head.extra,Ze,We,nt,gt)),512&$e.flags&&($e.check=Z($e.check,Ze,nt,We)),Ke-=nt,We+=nt,$e.length-=nt),$e.length))break inf_leave;$e.length=0,$e.mode=ge;case ge:if(2048&$e.flags){if(0===Ke)break inf_leave;nt=0;do gt=Ze[We+nt++],$e.head&&gt&&65536>$e.length&&($e.head.name+=String.fromCharCode(gt));while(gt&&nt<Ke);if(512&$e.flags&&($e.check=Z($e.check,Ze,nt,We)),Ke-=nt,We+=nt,gt)break inf_leave}else $e.head&&($e.head.name=null);$e.length=0,$e.mode=fe;case fe:if(4096&$e.flags){if(0===Ke)break inf_leave;nt=0;do gt=Ze[We+nt++],$e.head&&gt&&65536>$e.length&&($e.head.comment+=String.fromCharCode(gt));while(gt&&nt<Ke);if(512&$e.flags&&($e.check=Z($e.check,Ze,nt,We)),Ke-=nt,We+=nt,gt)break inf_leave}else $e.head&&($e.head.comment=null);$e.mode=be;case be:if(512&$e.flags){for(;16>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}if(Ge!==(65535&$e.check)){Ve.msg='header crc mismatch',$e.mode=Xe;break}Ge=0,et=0}$e.head&&($e.head.hcrc=1&$e.flags>>9,$e.head.done=!0),Ve.adler=$e.check=0,$e.mode=_e;break;case ye:for(;32>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}Ve.adler=$e.check=C(Ge),Ge=0,et=0,$e.mode=xe;case xe:if(0===$e.havedict)return Ve.next_out=Je,Ve.avail_out=Qe,Ve.next_in=We,Ve.avail_in=Ke,$e.hold=Ge,$e.bits=et,2;Ve.adler=$e.check=1,$e.mode=_e;case _e:if(5===qe||qe===te)break inf_leave;case ke:if($e.last){Ge>>>=7&et,et-=7&et,$e.mode=ze;break}for(;3>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}switch($e.last=1&Ge,Ge>>>=1,et-=1,3&Ge){case 0:$e.mode=we;break;case 1:if(F($e),$e.mode=Ae,qe===te){Ge>>>=2,et-=2;break inf_leave}break;case 2:$e.mode=ve;break;case 3:Ve.msg='invalid block type',$e.mode=Xe;}Ge>>>=2,et-=2;break;case we:for(Ge>>>=7&et,et-=7&et;32>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}if((65535&Ge)!=(65535^Ge>>>16)){Ve.msg='invalid stored block lengths',$e.mode=Xe;break}if($e.length=65535&Ge,Ge=0,et=0,$e.mode=je,qe===te)break inf_leave;case je:$e.mode=Se;case Se:if(nt=$e.length,nt){if(nt>Ke&&(nt=Ke),nt>Qe&&(nt=Qe),0===nt)break inf_leave;O.arraySet(He,Ze,We,nt,Je),Ke-=nt,We+=nt,Qe-=nt,Je+=nt,$e.length-=nt;break}$e.mode=_e;break;case ve:for(;14>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}if($e.nlen=(31&Ge)+257,Ge>>>=5,et-=5,$e.ndist=(31&Ge)+1,Ge>>>=5,et-=5,$e.ncode=(15&Ge)+4,Ge>>>=4,et-=4,286<$e.nlen||30<$e.ndist){Ve.msg='too many length or distance symbols',$e.mode=Xe;break}$e.have=0,$e.mode=De;case De:for(;$e.have<$e.ncode;){for(;3>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}$e.lens[kt[$e.have++]]=7&Ge,Ge>>>=3,et-=3}for(;19>$e.have;)$e.lens[kt[$e.have++]]=0;if($e.lencode=$e.lendyn,$e.lenbits=7,xt={bits:$e.lenbits},bt=K(0,$e.lens,0,19,$e.lencode,0,$e.work,xt),$e.lenbits=xt.bits,bt){Ve.msg='invalid code lengths set',$e.mode=Xe;break}$e.have=0,$e.mode=Ce;case Ce:for(;$e.have<$e.nlen+$e.ndist;){for(;;){if(st=$e.lencode[Ge&(1<<$e.lenbits)-1],lt=st>>>24,ut=255&st>>>16,ht=65535&st,lt<=et)break;if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}if(16>ht)Ge>>>=lt,et-=lt,$e.lens[$e.have++]=ht;else{if(16===ht){for(_t=lt+2;et<_t;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}if(Ge>>>=lt,et-=lt,0===$e.have){Ve.msg='invalid bit length repeat',$e.mode=Xe;break}gt=$e.lens[$e.have-1],nt=3+(3&Ge),Ge>>>=2,et-=2}else if(17===ht){for(_t=lt+3;et<_t;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}Ge>>>=lt,et-=lt,gt=0,nt=3+(7&Ge),Ge>>>=3,et-=3}else{for(_t=lt+7;et<_t;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}Ge>>>=lt,et-=lt,gt=0,nt=11+(127&Ge),Ge>>>=7,et-=7}if($e.have+nt>$e.nlen+$e.ndist){Ve.msg='invalid bit length repeat',$e.mode=Xe;break}for(;nt--;)$e.lens[$e.have++]=gt}}if($e.mode===Xe)break;if(0===$e.lens[256]){Ve.msg='invalid code -- missing end-of-block',$e.mode=Xe;break}if($e.lenbits=9,xt={bits:$e.lenbits},bt=K(Q,$e.lens,0,$e.nlen,$e.lencode,0,$e.work,xt),$e.lenbits=xt.bits,bt){Ve.msg='invalid literal/lengths set',$e.mode=Xe;break}if($e.distbits=6,$e.distcode=$e.distdyn,xt={bits:$e.distbits},bt=K(G,$e.lens,$e.nlen,$e.ndist,$e.distcode,0,$e.work,xt),$e.distbits=xt.bits,bt){Ve.msg='invalid distances set',$e.mode=Xe;break}if($e.mode=Ae,qe===te)break inf_leave;case Ae:$e.mode=Ee;case Ee:if(6<=Ke&&258<=Qe){Ve.next_out=Je,Ve.avail_out=Qe,Ve.next_in=We,Ve.avail_in=Ke,$e.hold=Ge,$e.bits=et,W(Ve,it),Je=Ve.next_out,He=Ve.output,Qe=Ve.avail_out,We=Ve.next_in,Ze=Ve.input,Ke=Ve.avail_in,Ge=$e.hold,et=$e.bits,$e.mode===_e&&($e.back=-1);break}for($e.back=0;;){if(st=$e.lencode[Ge&(1<<$e.lenbits)-1],lt=st>>>24,ut=255&st>>>16,ht=65535&st,lt<=et)break;if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}if(ut&&0==(240&ut)){for(pt=lt,mt=ut,ct=ht;;){if(st=$e.lencode[ct+((Ge&(1<<pt+mt)-1)>>pt)],lt=st>>>24,ut=255&st>>>16,ht=65535&st,pt+lt<=et)break;if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}Ge>>>=pt,et-=pt,$e.back+=pt}if(Ge>>>=lt,et-=lt,$e.back+=lt,$e.length=ht,0===ut){$e.mode=Fe;break}if(32&ut){$e.back=-1,$e.mode=_e;break}if(64&ut){Ve.msg='invalid literal/length code',$e.mode=Xe;break}$e.extra=15&ut,$e.mode=Re;case Re:if($e.extra){for(_t=$e.extra;et<_t;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}$e.length+=Ge&(1<<$e.extra)-1,Ge>>>=$e.extra,et-=$e.extra,$e.back+=$e.extra}$e.was=$e.length,$e.mode=Ie;case Ie:for(;;){if(st=$e.distcode[Ge&(1<<$e.distbits)-1],lt=st>>>24,ut=255&st>>>16,ht=65535&st,lt<=et)break;if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}if(0==(240&ut)){for(pt=lt,mt=ut,ct=ht;;){if(st=$e.distcode[ct+((Ge&(1<<pt+mt)-1)>>pt)],lt=st>>>24,ut=255&st>>>16,ht=65535&st,pt+lt<=et)break;if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}Ge>>>=pt,et-=pt,$e.back+=pt}if(Ge>>>=lt,et-=lt,$e.back+=lt,64&ut){Ve.msg='invalid distance code',$e.mode=Xe;break}$e.offset=ht,$e.extra=15&ut,$e.mode=Te;case Te:if($e.extra){for(_t=$e.extra;et<_t;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}$e.offset+=Ge&(1<<$e.extra)-1,Ge>>>=$e.extra,et-=$e.extra,$e.back+=$e.extra}if($e.offset>$e.dmax){Ve.msg='invalid distance too far back',$e.mode=Xe;break}$e.mode=Pe;case Pe:if(0===Qe)break inf_leave;if(nt=it-Qe,$e.offset>nt){if(nt=$e.offset-nt,nt>$e.whave&&$e.sane){Ve.msg='invalid distance too far back',$e.mode=Xe;break}nt>$e.wnext?(nt-=$e.wnext,at=$e.wsize-nt):at=$e.wnext-nt,nt>$e.length&&(nt=$e.length),ot=$e.window}else ot=He,at=Je-$e.offset,nt=$e.length;nt>Qe&&(nt=Qe),Qe-=nt,$e.length-=nt;do He[Je++]=ot[at++];while(--nt);0===$e.length&&($e.mode=Ee);break;case Fe:if(0===Qe)break inf_leave;He[Je++]=$e.length,Qe--,$e.mode=Ee;break;case ze:if($e.wrap){for(;32>et;){if(0===Ke)break inf_leave;Ke--,Ge|=Ze[We++]<<et,et+=8}if(it-=Qe,Ve.total_out+=it,$e.total+=it,it&&(Ve.adler=$e.check=$e.flags?Z($e.check,He,it,Je-it):$($e.check,He,it,Je-it)),it=Qe,($e.flags?Ge:C(Ge))!==$e.check){Ve.msg='incorrect data check',$e.mode=Xe;break}Ge=0,et=0}$e.mode=Me;case Me:if($e.wrap&&$e.flags){for(;32>et;){if(0===Ke)break inf_leave;Ke--,Ge+=Ze[We++]<<et,et+=8}if(Ge!==(4294967295&$e.total)){Ve.msg='incorrect length check',$e.mode=Xe;break}Ge=0,et=0}$e.mode=Ye;case Ye:bt=1;break inf_leave;case Xe:bt=oe;break inf_leave;case Oe:return se;case 32:default:return ae;}return(Ve.next_out=Je,Ve.avail_out=Qe,Ve.next_in=We,Ve.avail_in=Ke,$e.hold=Ge,$e.bits=et,($e.wsize||it!==Ve.avail_out&&$e.mode<Xe&&($e.mode<ze||qe!==ee))&&M(Ve,Ve.output,Ve.next_out,it-Ve.avail_out))?($e.mode=Oe,se):(tt-=Ve.avail_in,it-=Ve.avail_out,Ve.total_in+=tt,Ve.total_out+=it,$e.total+=it,$e.wrap&&it&&(Ve.adler=$e.check=$e.flags?Z($e.check,He,it,Ve.next_out-it):$($e.check,He,it,Ve.next_out-it)),Ve.data_type=$e.bits+($e.last?64:0)+($e.mode===_e?128:0)+($e.mode===Ae||$e.mode===je?256:0),(0===tt&&0===it||qe===ee)&&bt===ne&&(bt=-5),bt)},S.inflateEnd=function(Ve){if(!Ve||!Ve.state)return ae;var qe=Ve.state;return qe.window&&(qe.window=null),Ve.state=null,ne},S.inflateGetHeader=function(Ve,qe){var $e;return Ve&&Ve.state?($e=Ve.state,0==(2&$e.wrap))?ae:($e.head=qe,qe.done=!1,ne):ae},S.inflateSetDictionary=function(Ve,qe){var $e=qe.length,Ze,He,We;return Ve&&Ve.state?(Ze=Ve.state,0!==Ze.wrap&&Ze.mode!==xe)?ae:Ze.mode===xe&&(He=1,He=$(He,qe,$e,0),He!==Ze.check)?oe:(We=M(Ve,qe,$e,$e),We)?(Ze.mode=Oe,se):(Ze.havedict=1,ne):ae},S.inflateInfo='pako inflate (from Nodeca project)'},function(_){'use strict';var S=30;_.exports=function(C,E){var R,I,T,P,F,M,O,$,Z,W,K,Q,G,ee,te,ne,ae,oe,se,le,de,ue,he,pe,me;R=C.state,I=C.next_in,pe=C.input,T=I+(C.avail_in-5),P=C.next_out,me=C.output,F=P-(E-C.avail_out),M=P+(C.avail_out-257),O=R.dmax,$=R.wsize,Z=R.whave,W=R.wnext,K=R.window,Q=R.hold,G=R.bits,ee=R.lencode,te=R.distcode,ne=(1<<R.lenbits)-1,ae=(1<<R.distbits)-1;top:do{15>G&&(Q+=pe[I++]<<G,G+=8,Q+=pe[I++]<<G,G+=8),oe=ee[Q&ne];dolen:for(;;){if(se=oe>>>24,Q>>>=se,G-=se,se=255&oe>>>16,0===se)me[P++]=65535&oe;else if(16&se){le=65535&oe,se&=15,se&&(G<se&&(Q+=pe[I++]<<G,G+=8),le+=Q&(1<<se)-1,Q>>>=se,G-=se),15>G&&(Q+=pe[I++]<<G,G+=8,Q+=pe[I++]<<G,G+=8),oe=te[Q&ae];dodist:for(;;){if(se=oe>>>24,Q>>>=se,G-=se,se=255&oe>>>16,16&se){if(de=65535&oe,se&=15,G<se&&(Q+=pe[I++]<<G,G+=8,G<se&&(Q+=pe[I++]<<G,G+=8)),de+=Q&(1<<se)-1,de>O){C.msg='invalid distance too far back',R.mode=S;break top}if(Q>>>=se,G-=se,se=P-F,de>se){if(se=de-se,se>Z&&R.sane){C.msg='invalid distance too far back',R.mode=S;break top}if(ue=0,he=K,0===W){if(ue+=$-se,se<le){le-=se;do me[P++]=K[ue++];while(--se);ue=P-de,he=me}}else if(W<se){if(ue+=$+W-se,se-=W,se<le){le-=se;do me[P++]=K[ue++];while(--se);if(ue=0,W<le){se=W,le-=se;do me[P++]=K[ue++];while(--se);ue=P-de,he=me}}}else if(ue+=W-se,se<le){le-=se;do me[P++]=K[ue++];while(--se);ue=P-de,he=me}for(;2<le;)me[P++]=he[ue++],me[P++]=he[ue++],me[P++]=he[ue++],le-=3;le&&(me[P++]=he[ue++],1<le&&(me[P++]=he[ue++]))}else{ue=P-de;do me[P++]=me[ue++],me[P++]=me[ue++],me[P++]=me[ue++],le-=3;while(2<le);le&&(me[P++]=me[ue++],1<le&&(me[P++]=me[ue++]))}}else if(0==(64&se)){oe=te[(65535&oe)+(Q&(1<<se)-1)];continue dodist}else{C.msg='invalid distance code',R.mode=S;break top}break}}else if(0==(64&se)){oe=ee[(65535&oe)+(Q&(1<<se)-1)];continue dolen}else if(32&se){R.mode=12;break top}else{C.msg='invalid literal/length code',R.mode=S;break top}break}}while(I<T&&P<M);le=G>>3,I-=le,G-=le<<3,Q&=(1<<G)-1,C.next_in=I,C.next_out=P,C.avail_in=I<T?5+(T-I):5-(I-T),C.avail_out=P<M?257+(M-P):257-(P-M),R.hold=Q,R.bits=G}},function(_,S,D){'use strict';var C=D(75),E=15,R=852,I=592,T=0,P=1,F=2,M=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],O=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],$=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Z=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];_.exports=function(K,Q,G,ee,te,ne,ae,oe){var se=oe.bits,le=0,de=0,ue=0,he=0,pe=0,me=0,ce=0,ge=0,fe=0,be=0,je=null,Se=0,De=new C.Buf16(E+1),Ce=new C.Buf16(E+1),Ae=null,Ee=0,ye,xe,_e,ke,we,ve,Re,Ie,Te;for(le=0;le<=E;le++)De[le]=0;for(de=0;de<ee;de++)De[Q[G+de]]++;for(pe=se,he=E;1<=he&&0===De[he];he--);if(pe>he&&(pe=he),0==he)return te[ne++]=20971520,te[ne++]=20971520,oe.bits=1,0;for(ue=1;ue<he&&0===De[ue];ue++);for(pe<ue&&(pe=ue),ge=1,le=1;le<=E;le++)if(ge<<=1,ge-=De[le],0>ge)return-1;if(0<ge&&(K===T||1!=he))return-1;for(Ce[1]=0,le=1;le<E;le++)Ce[le+1]=Ce[le]+De[le];for(de=0;de<ee;de++)0!==Q[G+de]&&(ae[Ce[Q[G+de]]++]=de);if(K===T?(je=Ae=ae,ve=19):K===P?(je=M,Se-=257,Ae=O,Ee-=257,ve=256):(je=$,Ae=Z,ve=-1),be=0,de=0,le=ue,we=ne,me=pe,ce=0,_e=-1,fe=1<<pe,ke=fe-1,K===P&&fe>R||K===F&&fe>I)return 1;for(var Pe=0;;){Pe++,Re=le-ce,ae[de]<ve?(Ie=0,Te=ae[de]):ae[de]>ve?(Ie=Ae[Ee+ae[de]],Te=je[Se+ae[de]]):(Ie=96,Te=0),ye=1<<le-ce,xe=1<<me,ue=xe;do xe-=ye,te[we+(be>>ce)+xe]=0|(Re<<24|Ie<<16|Te);while(0!==xe);for(ye=1<<le-1;be&ye;)ye>>=1;if(0===ye?be=0:(be&=ye-1,be+=ye),de++,0==--De[le]){if(le==he)break;le=Q[G+ae[de]]}if(le>pe&&(be&ke)!==_e){for(0==ce&&(ce=pe),we+=ue,me=le-ce,ge=1<<me;me+ce<he&&(ge-=De[me+ce],!(0>=ge));)me++,ge<<=1;if(fe+=1<<me,K===P&&fe>R||K===F&&fe>I)return 1;_e=be&ke,te[_e]=0|(pe<<24|me<<16|we-ne)}}return 0!=be&&(te[we+be]=0|(4194304|le-ce<<24)),oe.bits=pe,0}},function(_){'use strict';_.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(_){'use strict';_.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name='',this.comment='',this.hcrc=0,this.done=!1}},function(_,S,D){(function(C){'use strict';_.exports=function(E,R){return new C(E,R)},_.exports.test=function(E){return C.isBuffer(E)}}).call(S,D(67).Buffer)},function(_,S,D){'use strict';var C=D(71),E=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];_.exports=function(I,T){if('undefined'==typeof I||!I.length)return 0;var P='string'!==C.getTypeOf(I);'undefined'==typeof T&&(T=0);var F=0,M=0,O=0;T=-1^T;for(var $=0,Z=I.length;$<Z;$++)O=P?I[$]:I.charCodeAt($),M=255&(T^O),F=E[M],T=T>>>8^F;return-1^T}},function(_,S){'use strict';S.LOCAL_FILE_HEADER='PK\x03\x04',S.CENTRAL_FILE_HEADER='PK\x01\x02',S.CENTRAL_DIRECTORY_END='PK\x05\x06',S.ZIP64_CENTRAL_DIRECTORY_LOCATOR='PK\x06\x07',S.ZIP64_CENTRAL_DIRECTORY_END='PK\x06\x06',S.DATA_DESCRIPTOR='PK\x07\b'},function(_,S){'use strict';S.base64=!1,S.binary=!1,S.dir=!1,S.createFolders=!1,S.date=null,S.compression=null,S.compressionOptions=null,S.comment=null,S.unixPermissions=null,S.dosPermissions=null},function(_){'use strict';function S(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}S.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},_.exports=S},function(_,S,D){'use strict';var C=D(71),E=D(66),R=D(90),I=Array(256);for(var T=0;256>T;T++)I[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;I[254]=I[254]=1;var P=function(O){var G=O.length,ee=0,$,Z,W,K,Q;for(K=0;K<G;K++)Z=O.charCodeAt(K),55296==(64512&Z)&&K+1<G&&(W=O.charCodeAt(K+1),56320==(64512&W)&&(Z=65536+(Z-55296<<10)+(W-56320),K++)),ee+=128>Z?1:2048>Z?2:65536>Z?3:4;for($=E.uint8array?new Uint8Array(ee):Array(ee),Q=0,K=0;Q<ee;K++)Z=O.charCodeAt(K),55296==(64512&Z)&&K+1<G&&(W=O.charCodeAt(K+1),56320==(64512&W)&&(Z=65536+(Z-55296<<10)+(W-56320),K++)),128>Z?$[Q++]=Z:2048>Z?($[Q++]=192|Z>>>6,$[Q++]=128|63&Z):65536>Z?($[Q++]=224|Z>>>12,$[Q++]=128|63&Z>>>6,$[Q++]=128|63&Z):($[Q++]=240|Z>>>18,$[Q++]=128|63&Z>>>12,$[Q++]=128|63&Z>>>6,$[Q++]=128|63&Z);return $},F=function(O,$){var Z;for($=$||O.length,$>O.length&&($=O.length),Z=$-1;0<=Z&&128==(192&O[Z]);)Z--;return 0>Z?$:0===Z?$:Z+I[O[Z]]>$?Z:$},M=function(O){var Q=O.length,G=Array(2*Q),$,Z,W,K;for(Z=0,$=0;$<Q;){if(W=O[$++],128>W){G[Z++]=W;continue}if(K=I[W],4<K){G[Z++]=65533,$+=K-1;continue}for(W&=2===K?31:3===K?15:7;1<K&&$<Q;)W=W<<6|63&O[$++],K--;if(1<K){G[Z++]=65533;continue}65536>W?G[Z++]=W:(W-=65536,G[Z++]=55296|1023&W>>10,G[Z++]=56320|1023&W)}return G.length!==Z&&(G.subarray?G=G.subarray(0,Z):G.length=Z),C.applyFromCharCode(G)};S.utf8encode=function($){return E.nodebuffer?R($,'utf-8'):P($)},S.utf8decode=function($){if(E.nodebuffer)return C.transformTo('nodebuffer',$).toString('utf-8');$=C.transformTo(E.uint8array?'uint8array':'array',$);for(var Z=[],W=0,K=$.length;W<K;){var Q=F($,Math.min(W+65536,K));E.uint8array?Z.push(M($.subarray(W,Q))):Z.push(M($.slice(W,Q))),W=Q}return Z.join('')}},function(_,S,D){'use strict';var C=D(71),E=function(){this.data=[]};E.prototype={append:function(R){R=C.transformTo('string',R),this.data.push(R)},finalize:function(){return this.data.join('')}},_.exports=E},function(_,S,D){'use strict';var C=D(71),E=function(R){this.data=new Uint8Array(R),this.index=0};E.prototype={append:function(R){0!==R.length&&(R=C.transformTo('uint8array',R),this.data.set(R,this.index),this.index+=R.length)},finalize:function(){return this.data}},_.exports=E},function(_,S,D){'use strict';var C=D(64),E=D(95),R=D(71),I=D(99);_.exports=function(T,P){var F,M,O,$;for(P=R.extend(P||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:E.utf8decode}),P.base64&&(T=C.decode(T)),M=new I(T,P),F=M.files,O=0;O<F.length;O++)$=F[O],this.file($.fileNameStr,$.decompressed,{binary:!0,optimizedBinaryString:!0,date:$.date,dir:$.dir,comment:$.fileCommentStr.length?$.fileCommentStr:null,unixPermissions:$.unixPermissions,dosPermissions:$.dosPermissions,createFolders:P.createFolders});return M.zipComment.length&&(this.comment=M.zipComment),this}},function(_,S,D){'use strict';function C($,Z){this.files=[],this.loadOptions=Z,$&&this.load($)}var E=D(100),R=D(102),I=D(103),T=D(104),P=D(71),F=D(92),M=D(105),O=D(66);D(65),C.prototype={checkSignature:function($){var Z=this.reader.readString(4);if(Z!==$)throw new Error('Corrupted zip or bug : unexpected signature ('+P.pretty(Z)+', expected '+P.pretty($)+')')},isSignature:function($,Z){var W=this.reader.index;this.reader.setIndex($);var K=this.reader.readString(4);return this.reader.setIndex(W),K===Z},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var $=this.reader.readData(this.zipCommentLength),Z=O.uint8array?'uint8array':'array',W=P.transformTo(Z,$);this.zipComment=this.loadOptions.decodeFileName(W)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var $=this.zip64EndOfCentralSize-44,Z,W,K;0<$;)Z=this.reader.readInt(2),W=this.reader.readInt(4),K=this.reader.readString(W),this.zip64ExtensibleData[Z]={id:Z,length:W,value:K}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error('Multi-volumes zip are not supported')},readLocalFiles:function(){var $,Z;for($=0;$<this.files.length;$++)Z=this.files[$],this.reader.setIndex(Z.localHeaderOffset),this.checkSignature(F.LOCAL_FILE_HEADER),Z.readLocalPart(this.reader),Z.handleUTF8(),Z.processAttributes()},readCentralDir:function(){var $;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===F.CENTRAL_FILE_HEADER;)$=new M({zip64:this.zip64},this.loadOptions),$.readCentralPart(this.reader),this.files.push($);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error('Corrupted zip or bug: expected '+this.centralDirRecords+' records in central dir, got '+this.files.length)},readEndOfCentral:function(){var $=this.reader.lastIndexOfSignature(F.CENTRAL_DIRECTORY_END);if(0>$){var Z=!this.isSignature(0,F.LOCAL_FILE_HEADER);if(Z)throw new Error('Can\'t find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html');else throw new Error('Corrupted zip : can\'t find end of central directory')}this.reader.setIndex($);var W=$;if(this.checkSignature(F.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===P.MAX_VALUE_16BITS||this.diskWithCentralDirStart===P.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===P.MAX_VALUE_16BITS||this.centralDirRecords===P.MAX_VALUE_16BITS||this.centralDirSize===P.MAX_VALUE_32BITS||this.centralDirOffset===P.MAX_VALUE_32BITS){if(this.zip64=!0,$=this.reader.lastIndexOfSignature(F.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>$)throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory locator');if(this.reader.setIndex($),this.checkSignature(F.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,F.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(F.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory');this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(F.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var K=this.centralDirOffset+this.centralDirSize;this.zip64&&(K+=20,K+=12+this.zip64EndOfCentralSize);var Q=W-K;if(0<Q)this.isSignature(W,F.CENTRAL_FILE_HEADER)||(this.reader.zero=Q);else if(0>Q)throw new Error('Corrupted zip: missing '+Math.abs(Q)+' bytes.')},prepareReader:function($){var Z=P.getTypeOf($);if(P.checkSupport(Z),'string'===Z&&!O.uint8array)this.reader=new E($,this.loadOptions.optimizedBinaryString);else if('nodebuffer'===Z)this.reader=new R($);else if(O.uint8array)this.reader=new I(P.transformTo('uint8array',$));else if(O.array)this.reader=new T(P.transformTo('array',$));else throw new Error('Unexpected error: unsupported type \''+Z+'\'')},load:function($){this.prepareReader($),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},_.exports=C},function(_,S,D){'use strict';function C(I,T){this.data=I,T||(this.data=R.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}var E=D(101),R=D(71);C.prototype=new E,C.prototype.byteAt=function(I){return this.data.charCodeAt(this.zero+I)},C.prototype.lastIndexOfSignature=function(I){return this.data.lastIndexOf(I)-this.zero},C.prototype.readData=function(I){this.checkOffset(I);var T=this.data.slice(this.zero+this.index,this.zero+this.index+I);return this.index+=I,T},_.exports=C},function(_,S,D){'use strict';function C(){this.data=null,this.length=0,this.index=0,this.zero=0}var E=D(71);C.prototype={checkOffset:function(R){this.checkIndex(this.index+R)},checkIndex:function(R){if(this.length<this.zero+R||0>R)throw new Error('End of data reached (data length = '+this.length+', asked index = '+R+'). Corrupted zip ?')},setIndex:function(R){this.checkIndex(R),this.index=R},skip:function(R){this.setIndex(this.index+R)},byteAt:function(){},readInt:function(R){var I=0,T;for(this.checkOffset(R),T=this.index+R-1;T>=this.index;T--)I=(I<<8)+this.byteAt(T);return this.index+=R,I},readString:function(R){return E.transformTo('string',this.readData(R))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var R=this.readInt(4);return new Date((127&R>>25)+1980,(15&R>>21)-1,31&R>>16,31&R>>11,63&R>>5,(31&R)<<1)}},_.exports=C},function(_,S,D){'use strict';function C(R){this.data=R,this.length=this.data.length,this.index=0,this.zero=0}var E=D(103);C.prototype=new E,C.prototype.readData=function(R){this.checkOffset(R);var I=this.data.slice(this.zero+this.index,this.zero+this.index+R);return this.index+=R,I},_.exports=C},function(_,S,D){'use strict';function C(R){R&&(this.data=R,this.length=this.data.length,this.index=0,this.zero=0)}var E=D(104);C.prototype=new E,C.prototype.readData=function(R){if(this.checkOffset(R),0===R)return new Uint8Array(0);var I=this.data.subarray(this.zero+this.index,this.zero+this.index+R);return this.index+=R,I},_.exports=C},function(_,S,D){'use strict';function C(R){if(R){this.data=R,this.length=this.data.length,this.index=0,this.zero=0;for(var I=0;I<this.data.length;I++)R[I]=255&R[I]}}var E=D(101);C.prototype=new E,C.prototype.byteAt=function(R){return this.data[this.zero+R]},C.prototype.lastIndexOfSignature=function(R){var I=R.charCodeAt(0),T=R.charCodeAt(1),P=R.charCodeAt(2),F=R.charCodeAt(3);for(var M=this.length-4;0<=M;--M)if(this.data[M]===I&&this.data[M+1]===T&&this.data[M+2]===P&&this.data[M+3]===F)return M-this.zero;return-1},C.prototype.readData=function(R){if(this.checkOffset(R),0===R)return[];var I=this.data.slice(this.zero+this.index,this.zero+this.index+R);return this.index+=R,I},_.exports=C},function(_,S,D){'use strict';function C(F,M){this.options=F,this.loadOptions=M}var E=D(100),R=D(71),I=D(94),T=D(65),P=D(66);C.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(F,M,O){return function(){var $=F.index;F.setIndex(M);var Z=F.readData(O);return F.setIndex($),Z}},prepareContent:function(F,M,O,$,Z){return function(){var W=R.transformTo($.uncompressInputType,this.getCompressedContent()),K=$.uncompress(W);if(K.length!==Z)throw new Error('Bug : uncompressed data size mismatch');return K}},readLocalPart:function(F){var M,O;if(F.skip(22),this.fileNameLength=F.readInt(2),O=F.readInt(2),this.fileName=F.readData(this.fileNameLength),F.skip(O),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error('Bug or corrupted zip : didn\'t get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)');if(M=R.findCompression(this.compressionMethod),null===M)throw new Error('Corrupted zip : compression '+R.pretty(this.compressionMethod)+' unknown (inner file : '+R.transformTo('string',this.fileName)+')');if(this.decompressed=new I,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(F,F.index,this.compressedSize,M),this.decompressed.getContent=this.prepareContent(F,F.index,this.compressedSize,M,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=R.transformTo('string',this.decompressed.getContent()),T.crc32(this.decompressed)!==this.crc32))throw new Error('Corrupted zip : CRC32 mismatch')},readCentralPart:function(F){if(this.versionMadeBy=F.readInt(2),this.versionNeeded=F.readInt(2),this.bitFlag=F.readInt(2),this.compressionMethod=F.readString(2),this.date=F.readDate(),this.crc32=F.readInt(4),this.compressedSize=F.readInt(4),this.uncompressedSize=F.readInt(4),this.fileNameLength=F.readInt(2),this.extraFieldsLength=F.readInt(2),this.fileCommentLength=F.readInt(2),this.diskNumberStart=F.readInt(2),this.internalFileAttributes=F.readInt(2),this.externalFileAttributes=F.readInt(4),this.localHeaderOffset=F.readInt(4),this.isEncrypted())throw new Error('Encrypted zip are not supported');this.fileName=F.readData(this.fileNameLength),this.readExtraFields(F),this.parseZIP64ExtraField(F),this.fileComment=F.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var F=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==F&&(this.dosPermissions=63&this.externalFileAttributes),3==F&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||'/'!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var F=new E(this.extraFields[1].value);this.uncompressedSize===R.MAX_VALUE_32BITS&&(this.uncompressedSize=F.readInt(8)),this.compressedSize===R.MAX_VALUE_32BITS&&(this.compressedSize=F.readInt(8)),this.localHeaderOffset===R.MAX_VALUE_32BITS&&(this.localHeaderOffset=F.readInt(8)),this.diskNumberStart===R.MAX_VALUE_32BITS&&(this.diskNumberStart=F.readInt(4))}},readExtraFields:function(F){var M=F.index,O,$,Z;for(this.extraFields=this.extraFields||{};F.index<M+this.extraFieldsLength;)O=F.readInt(2),$=F.readInt(2),Z=F.readString($),this.extraFields[O]={id:O,length:$,value:Z}},handleUTF8:function(){var F=P.uint8array?'uint8array':'array';if(this.useUTF8())this.fileNameStr=T.utf8decode(this.fileName),this.fileCommentStr=T.utf8decode(this.fileComment);else{var M=this.findExtraFieldUnicodePath();if(null!==M)this.fileNameStr=M;else{var O=R.transformTo(F,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(O)}var $=this.findExtraFieldUnicodeComment();if(null!==$)this.fileCommentStr=$;else{var Z=R.transformTo(F,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(Z)}}},findExtraFieldUnicodePath:function(){var F=this.extraFields[28789];if(F){var M=new E(F.value);return 1===M.readInt(1)?T.crc32(this.fileName)===M.readInt(4)?T.utf8decode(M.readString(F.length-5)):null:null}return null},findExtraFieldUnicodeComment:function(){var F=this.extraFields[25461];if(F){var M=new E(F.value);return 1===M.readInt(1)?T.crc32(this.fileComment)===M.readInt(4)?T.utf8decode(M.readString(F.length-5)):null:null}return null}},_.exports=C},function(_,S,D){'use strict';var C=D(71);S.string2binary=function(E){return C.string2binary(E)},S.string2Uint8Array=function(E){return C.transformTo('uint8array',E)},S.uint8Array2String=function(E){return C.transformTo('string',E)},S.string2Blob=function(E){var R=C.transformTo('arraybuffer',E);return C.arrayBuffer2Blob(R)},S.arrayBuffer2Blob=function(E){return C.arrayBuffer2Blob(E)},S.transformTo=function(E,R){return C.transformTo(E,R)},S.getTypeOf=function(E){return C.getTypeOf(E)},S.checkSupport=function(E){return C.checkSupport(E)},S.MAX_VALUE_16BITS=C.MAX_VALUE_16BITS,S.MAX_VALUE_32BITS=C.MAX_VALUE_32BITS,S.pretty=function(E){return C.pretty(E)},S.findCompression=function(E){return C.findCompression(E)},S.isRegExp=function(E){return C.isRegExp(E)}},function(_,S,D){'use strict';var C=D(1),E=D(108),R=D(109),I=D(9),T=D(61);class P extends C{constructor(F){super(F)}static fromJcamp(F,M){M=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},M);var O=I.convert(F,M);return new P(O)}static fromBruker(F,M){M=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},M);var O=null;return O=Array.isArray(F)?T.converFolder(F,M):T.convertZip(F,M),O?O.map(function($){return new P($)}):null}isHomoNuclear(){return this.sd.xType==this.sd.yType}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}observeFrequencyY(){return this.sd.indirectFrequency}getSolventName(){return(this.sd.info['.SOLVENTNAME']||this.sd.info.$SOLVENT).replace('<','').replace('>','')}getXUnits(){return this.sd.ntuples[1].units}getYUnits(){return this.sd.ntuples[0].units}getZUnits(){return this.sd.ntuples[2].units}getLastY(){return this.sd.minMax.maxY}getFirstY(){return this.sd.minMax.minY}getDeltaY(){return(this.getLastY()-this.getFirstY())/(this.getNbSubSpectra()-1)}getZones(F){F=F||{},F.thresholdFactor||(F.thresholdFactor=1);var M=Math.round(255*Math.random());F.idPrefix&&(M=F.idPrefix);var O=E(this,F.thresholdFactor);for(var $=0;$<O.length;$++)O[$]._highlight=[M+'_'+$],O[$].signalID=M+'_'+$;if(F.references&&R.alignDimensions(O,F.references),'new'===F.format){var Z=Array(O.length);for(var W=O.length-1;0<=W;W--){var K=O[W];Z[W]={fromTo:K.fromTo,integral:K.intensity||1,remark:'',signal:[{peak:K.peaks,delta:[K.shiftX,K.shiftY]}],_highlight:K._highlight,signalID:K.signalID}}O=Z}return this.zones=O,this.zones}getNMRPeakThreshold(F){return'1H'==F?3:'13C'==F?5:1}getNucleus(F){return 1==F?this.sd.xType:2==F?this.sd.yType:this.sd.xType}zeroFilling(F,M){return Filters.zeroFilling(this,F,M)}brukerFilter(){return Filters.digitalFilter(this,{brukerFilter:!0})}digitalFilter(F){return Filters.digitalFilter(this,F)}fourierTransform(){return Filters.fourierTransform(this)}postFourierTransform(F){return Filters.phaseCorrection(0,F)}}_.exports=P},function(_,S,D){'use strict';function C(M){return M.isHomoNuclear()?1.5:3}function E(M,O,$){var Z=O.observeFrequencyX(),W=O.observeFrequencyY(),K=O.getFirstY(),Q=O.getDeltaY(),G;for(G=M.length-1;0<=G;G--)M[G].x=O.arrayPointToUnits(M[G].x),M[G].y=K+Q*M[G].y,(-1>M[G].y||210<=M[G].y)&&M.splice(G,1);var ee=[],te=0;for($*=$,G=0;G<M.length;G++)for(var ne=G;ne<M.length;ne++)te=Math.pow((M[G].x-M[ne].x)*Z,2)+Math.pow((M[G].y-M[ne].y)*W,2),te<$?ee.push(1):ee.push(0);var ae=I(ee),oe=[];if(null!=M)for(var se=0;se<ae.length;se++){var le={nucleusX:O.getNucleus(1),nucleusY:O.getNucleus(2)};le.resolutionX=(O.getLastX()-O.getFirstX())/O.getNbPoints(),le.resolutionY=Q;var de=[];le.shiftX=0,le.shiftY=0;var ue=[Number.MAX_VALUE,0],he=[Number.MAX_VALUE,0],pe=0;for(var me=ae[se].length-1;0<=me;me--)1===ae[se][me]&&(de.push({x:M[me].x,y:M[me].y,z:M[me].z}),le.shiftX+=M[me].x*M[me].z,le.shiftY+=M[me].y*M[me].z,pe+=M[me].z,M[me].x<ue[0]&&(ue[0]=M[me].x),M[me].x>ue[1]&&(ue[1]=M[me].x),M[me].y<he[0]&&(he[0]=M[me].y),M[me].y>he[1]&&(he[1]=M[me].y));le.fromTo=[{from:ue[0],to:ue[1]},{from:he[0],to:he[1]}],le.shiftX/=pe,le.shiftY/=pe,le.peaks=de,oe.push(le)}return oe}var R=D(109),I=D(110),T=D(111),P=D(51).FFTUtils;const F=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];_.exports=function(M,O){0===O&&(O=1),0>O&&(O=-O);var $=M.getNbPoints(),Z=M.getNbSubSpectra(),W=Array($*Z),K=M.isHomoNuclear();for(var Q=0;Q<Z;Q++){var G=M.getYData(Q);for(var ee=0;ee<$;ee++)W[Q*$+ee]=K?0<G[ee]?G[ee]:0:Math.abs(G[ee])}var te=C(M);if(K){let oe=P.convolute(W,F,Z,$),se=T.findPeaks2DRegion(W,{filteredData:oe,rows:Z,cols:$,nStdDev:te*O});var ne=T.findPeaks2DMax(W,{filteredData:oe,rows:Z,cols:$,nStdDev:(te+0.5)*O});for(var ae=0;ae<se.length;ae++)ne.push(se[ae]);return R.enhanceSymmetry(E(ne,M,24))}let oe=P.convolute(W,F,Z,$),se=T.findPeaks2DRegion(W,{filteredData:oe,rows:Z,cols:$,nStdDev:te*O});return E(R.clean(se,0.05),M,24)}},function(_){'use strict';function S(F,M,O,$){var Z=C(F,M,O,-$[0],!0),W=0,K=null,Q=null;0>Z&&(K={nucleusX:O.nucleusX,nucleusY:O.nucleusY},K.resolutionX=O.resolutionX,K.resolutionY=O.resolutionY,K.shiftX=O.shiftY,K.shiftY=O.shiftX,K.peaks=[{x:O.shiftY,y:O.shiftX,z:1}],F.push(K),Q=[-$[0],$[1]],M.push(Q),W++);var G=0,ee=!1,te=!1,ne;for(G=F.length-1;0<=G;G--)ne=F[G],0===M[G][0]&&(Math.abs(ne.shiftX-O.shiftX)<T&&(ee=!0),Math.abs(ne.shiftY-O.shiftY)<T&&(te=!0));return!1==ee&&(K={nucleusX:O.nucleusX,nucleusY:O.nucleusY},K.resolutionX=O.resolutionX,K.resolutionY=O.resolutionY,K.shiftX=O.shiftX,K.shiftY=O.shiftX,K.peaks=[{x:O.shiftX,y:O.shiftX,z:1}],F.push(K),Q=[0,$[1]],M.push(Q),W++),!1==te&&(K={nucleusX:O.nucleusX,nucleusY:O.nucleusY},K.resolutionX=O.resolutionX,K.resolutionY=O.resolutionY,K.shiftX=O.shiftY,K.shiftY=O.shiftY,K.peaks=[{x:O.shiftY,y:O.shiftY,z:1}],F.push(K),Q=[0,$[1]],M.push(Q),W++),W}function D(F,M,O,$){var Z=0,W=0,K=4*O.shiftX,Q=[],G=[],ee;for(W=F.length-1;0<=W;W--)ee=F[W],0!==M[W][0]&&(Math.abs(ee.shiftX-O.shiftX)<T?(Z++,$&&M[W][1]++,Q.push(W),K+=ee.shiftX):Math.abs(ee.shiftY-O.shiftY)<T&&(Z++,$&&M[W][1]++,G.push(W),K+=ee.shiftY));if(K/=Q.length+G.length+4,0<Q.length)for(W=Q.length-1;0<=W;W--)F[Q[W]].shiftX=K;if(0<G.length)for(W=G.length-1;0<=W;W--)F[G[W]].shiftY=K;return O.shiftX=K,O.shiftY=K,Z}function C(F,M,O,$,Z){for(var W=F.length-1;0<=W;W--)if(M[W][0]==$&&0.05>R(O,F[W],Z)){if(!Z){var K=(F[W].shiftX+O.shiftX)/2,Q=(F[W].shiftY+O.shiftY)/2;F[W].shiftX=K,F[W].shiftY=Q,O.shiftX=K,O.shiftY=Q}else{var K=O.shiftX,Q=F[W].shiftX;F[W].shiftY=K,O.shiftY=Q}return W}return-1}function E(F){var M=Array(F.length);for(var O=F.length-1;0<=O;O--)if(M[O]=[0,0],Math.abs(F[O].shiftX-F[O].shiftY)<=T){M[O][1]=1;var $=(2*F[O].shiftX+F[O].shiftY)/3;F[O].shiftX=$,F[O].shiftY=$}else M[O][0]=0<F[O].shiftX-F[O].shiftY?1:-1;return M}function R(F,M,O){return O?Math.sqrt(Math.pow(F.shiftX-M.shiftY,2)+Math.pow(F.shiftY-M.shiftX,2)):Math.sqrt(Math.pow(F.shiftX-M.shiftX,2)+Math.pow(F.shiftY-M.shiftY,2))}function I(F,M){var O=0,$=0,Z,W;for(Z=0;Z<F.length;Z++){var K=F[Z];for(W=0;W<M.length;W++)O=(M[W].startX+M[W].stopX)/2,$=Math.abs(M[W].startX-M[W].stopX)/2,K.nucleusX==M[W].nucleus&&Math.abs(K.shiftX-O)<=$&&K._highlight.push(M[W]._highlight[0]),K.nucleusY==M[W].nucleus&&Math.abs(K.shiftY-O)<=$&&K._highlight.push(M[W]._highlight[0])}}var T=0.05;const P=!1;_.exports={clean:function(F,M){var O=Number.NEGATIVE_INFINITY,$;for($=F.length-1;0<=$;$--)Math.abs(F[$].z)>O&&(O=Math.abs(F[$].z));for(O*=M,$=F.length-1;0<=$;$--)Math.abs(F[$].z)<O&&F.splice($,1);return F},enhanceSymmetry:function(F){var M=E(F),O=F,$,Z,W,K;for($=O.length-1;0<=$;$--)K=O[$],1<K.peaks.length&&M[$][1]++,1==M[$][0]&&(W=C(O,M,K,-1,!0),0<=W&&(M[$][1]+=2,M[W][1]+=2));for($=O.length-1;0<=$;$--)K=O[$],0==M[$][0]&&(Z=D(O,M,K,!0),M[$][1]+=Z);var Q=0;for($=O.length-1;0<=$;$--)0!==M[$][0]&&2<M[$][1]&&(Q++,Q+=S(O,M,O[$],M[$])),2<=M[$][1]&&0===M[$][0]&&Q++;var G=Array(Q);for(Q--,$=O.length-1;0<=$;$--)0!==M[$][0]&&2<M[$][1]||0===M[$][0]&&1<M[$][1]?G[Q--]=O[$]:console.log('Removed '+$+' '+O[$].peaks.length);return G},alignDimensions:function(F,M){for(var O=0;O<M.length;O++){var $=M[O];$&&I(F,$)}}}},function(_){'use strict';function S(C){var E=Math.sqrt(2*C.length+0.25)-0.5,R=[],I=Array(E),T=E,P=0,F=[];for(P=E-1;0<=P;P--)I[P]=1;for(var M=-1,O=[];0<T;){if(0===O.length){for(F=Array(E),P=0;P<E;P++)F[P]=0;for(R.push(F),M=0;0==I[M];M++);;}else M=O.splice(0,1);F[M]=1,I[M]=0,T--;var $=Array(E);for(P=0;P<E;P++){var Z=Math.max(M,P),W=Math.min(M,P);$[P]=C[W*(2*E-W-1)/2+Z],1==$[P]&&1==I[P]&&0==F[P]&&(O.push(P),F[P]=1)}}return R}const D={threshold:0,out:'assignment'};_.exports=function(E,R){const I=Object.assign({},D,R);var T,P,F,M;if('number'==typeof E[0])T=S(E);else if('object'==typeof E[0]){var O=E.length,$=Array(O*(O+1)/2),Z=0;for(var P=0;P<O;P++)for(var F=P;F<O;F++)$[Z++]=E[P][F]>I.threshold?1:0;T=S($)}if('indexes'===I.out||'values'===I.out){var W=Array(T.length);for(P=0;P<T.length;P++)for(W[P]=[],F=0;F<T[P].length;F++)0!=T[P][F]&&W[P].push(F);if('values'===I.out){var K=Array(W.length);for(P=0;P<W.length;P++)for(K[P]=Array(W[P].length),F=0;F<W[P].length;F++)for(K[P][F]=Array(W[P].length),M=0;M<W[P].length;M++)K[P][F][M]=E[W[P][F]][W[P][M]];return K}return W}return T}},function(_,S,D){'use strict';function C(T,P,F,M){var O={},$,Z,W,K;for(K=0;K<T.length;K++)0!=T[K]&&(Z=K%M,$=(K-Z)/M,O[T[K]]?(W=O[T[K]],W.x+=Z*P[K],W.y+=$*P[K],W.z+=P[K],Z<W.minX&&(W.minX=Z),Z>W.maxX&&(W.maxX=Z),$<W.minY&&(W.minY=$),$>W.maxY&&(W.maxY=$)):O[T[K]]={x:Z*P[K],y:$*P[K],z:P[K],minX:Z,maxX:Z,minY:$,maxY:$});var Q=Object.keys(O),G=Array(Q.length);for(K=0;K<Q.length;K++)G[K]=O[Q[K]],G[K].x/=G[K].z,G[K].y/=G[K].z;return G}D(2).array;var E=D(112),R=D(116);const I=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];_.exports={findPeaks2DRegion:function(P,F){var M=Object.assign({},{nStdev:3,kernel:I},F),O=E.matrix2Array(P),$=O.data,Z;O.rows&&O.cols&&(M.rows=O.rows,M.cols=O.cols);var W=M.rows,K=M.cols;if(!W||!K)throw new Error('Invalid number of rows or columns '+W+' '+K);var Q=M.kernel,G=M.filteredData;G||(G=E.fft($,Q,M));var ee=M.nStdev,te=0;for(Z=K*W-2;0<=Z;Z--)te+=Math.pow(G[Z]-G[Z+1],2);te=-Math.sqrt(te),te*=ee/W;var ne=Array(K*W);for(Z=K*W-1;0<=Z;Z--)ne[Z]=0;var ae=0;for(Z=G.length-1;0<=Z;Z--)G[Z]<te&&(ne[Z]=1,ae++);var oe=R(ne,K,W,{neighbours:8}),se=C(oe,$,W,K);return se},findPeaks2DMax:function(P,F){var M=Object.assign({},{nStdev:3,kernel:I},F),O=E.matrix2Array(P),$=O.data;O.rows&&O.cols&&(M.rows=O.rows,M.cols=O.cols);var Z=M.rows,W=M.cols;if(!Z||!W)throw new Error('Invalid number of rows or columns '+Z+' '+W);var K=M.kernel,Q=M.filteredData;Q||(Q=E.fft($,K,M));var G=M.nStdev,ee=0;for(var te=W*Z-2;0<=te;te--)ee+=Math.pow(Q[te]-Q[te+1],2);ee=-Math.sqrt(ee),ee*=G/Z;var ne,ae,oe=[],se=0;for(var te=0;te<Q.length;te++)Q[te]<ee&&(ne=Math.floor(te/W),ae=te%W,0<ne&&ne+1<Z&&ae+1<W&&0<ae&&Q[te]<Q[te+1]&&Q[te]<Q[te-1]&&(se=(ne-1)*W+ae,Q[te]<Q[se-1]&&Q[te]<Q[se]&&Q[te]<Q[se+1]&&(se=(ne+1)*W+ae,Q[te]<Q[se-1]&&Q[te]<Q[se]&&Q[te]<Q[se+1]&&oe.push({x:ae,y:ne,z:$[te]}))));return oe}}},function(_,S,D){'use strict;';function C(R){var I=R,T,P;if('number'!=typeof R[0]){T=R.length,P=R[0].length,I=Array(T*P);for(var F=0;F<T;F++)for(var M=0;M<P;M++)I[F*P+M]=R[F][M]}else{var O=Math.sqrt(R.length);Number.isInteger(O)&&(T=O,P=O)}return{data:I,rows:T,cols:P}}var E=D(113).FFTUtils;_.exports={fft:function(I,T,P){var F=C(I),M=F.data,O=Object.assign({normalize:!1,divisor:1,rows:F.rows,cols:F.cols},P),$,Z;if(O.rows&&O.cols)$=O.rows,Z=O.cols;else throw new Error('Invalid number of rows or columns '+$+' '+Z);var W=O.divisor,G=T.length,ee=T[0].length,K,Q;if(O.normalize)for(W=0,K=0;K<G;K++)for(Q=0;Q<ee;Q++)W+=T[K][Q];if(0===W)throw new RangeError('convolution: The divisor is equal to zero');var te=E.toRadix2(M,$,Z),ne=E.convolute(te.data,T,te.rows,te.cols);if(ne=E.crop(ne,te.rows,te.cols,$,Z),0!=W)for(K=0;K<ne.length;K++)ne[K]/W;return ne},direct:function(I,T,P){var F=C(I),M=F.data,O=Object.assign({normalize:!1,divisor:1,rows:F.rows,cols:F.cols},P),$,Z;if(O.rows&&O.cols)$=O.rows,Z=O.cols;else throw new Error('Invalid number of rows or columns '+$+' '+Z);var W=O.divisor,K=T.length,Q=T[0].length,G,ee,te,ne,ae,oe,se,le,de;if(O.normalize)for(W=0,G=0;G<K;G++)for(ee=0;ee<Q;ee++)W+=T[G][ee];if(0===W)throw new RangeError('convolution: The divisor is equal to zero');var ue=Array($*Z),he=Math.floor(K/2),pe=Math.floor(Q/2);for(ne=0;ne<$;ne++)for(te=0;te<Z;te++){for(oe=0,ee=0;ee<K;ee++)for(G=0;G<Q;G++)se=T[K-ee-1][Q-G-1],le=(ne+ee-he+$)%$,de=(te+G-pe+Z)%Z,ae=le*Z+de,oe+=M[ae]*se;ae=ne*Z+te,ue[ae]=oe/W}return ue},kernelFactory:{LoG:function(I,T,P){var F=1e3;P&&P.factor&&(F=P.factor);var M=Array(T),O,$,Z,W;F*=-1;var K=(T-1)/2;for(O=0;O<T;O++)for(M[O]=Array(T),W=(O-K)*(O-K),$=0;$<T;$++)Z=-(($-K)*($-K)+W)/(2*I*I),M[O][$]=Math.round(F*(1+Z)*Math.exp(Z));return M}},matrix2Array:C}},function(_,S,D){'use strict';S.FFTUtils=D(114),S.FFT=D(115)},function(_,S,D){'use strict';var C=D(115);_.exports={DEBUG:!1,ifft2DArray:function(E,R,I){var T=Array(R*I),P=R/2,F=2*(I-1);C.init(P);var M={re:Array(P),im:Array(P)};for(var O=0;O<I;O++){for(var $=P-1;0<=$;$--)M.re[$]=E[2*$*I+O],M.im[$]=E[(2*$+1)*I+O];C.bt(M.re,M.im);for(var $=P-1;0<=$;$--)T[2*$*I+O]=M.re[$],T[(2*$+1)*I+O]=M.im[$]}var Z=Array(P*F);C.init(F);var W={re:Array(F),im:Array(F)};for(var $=0;$<R;$+=2){W.re[0]=T[$*I],W.im[0]=T[($+1)*I];for(var O=1;O<I;O++)W.re[O]=T[$*I+O],W.im[O]=T[($+1)*I+O],W.re[F-O]=T[$*I+O],W.im[F-O]=-T[($+1)*I+O];C.bt(W.re,W.im);var K=$/2*F;for(var O=F-1;0<=O;O--)Z[K+O]=W.re[O]/(F*P)}return Z},fft2DArray:function(E,R,I){Object.assign({},{inplace:!0});var T=I/2+1,P=2*R,F=Array(P*T);C.init(I);var M={re:Array(I),im:Array(I)},O={re:Array(I),im:Array(I)},$={re:Array(I),im:Array(I)},Z,W,K,Q,G;for(var ee=0;ee<R/2;ee++){Z=2*ee*I,M.re=E.slice(Z,Z+I),Z=(2*ee+1)*I,M.im=E.slice(Z,Z+I),C.fft1d(M.re,M.im),this.reconstructTwoRealFFT(M,O,$),W=4*ee*T,K=(4*ee+1)*T,Q=(4*ee+2)*T,G=(4*ee+3)*T;for(var te=T-1;0<=te;te--)F[W+te]=O.re[te],F[K+te]=O.im[te],F[Q+te]=$.re[te],F[G+te]=$.im[te]}O=null,$=null;var ne=Array(P*T);C.init(R);var ae={re:Array(R),im:Array(R)};for(var oe=T-1;0<=oe;oe--){for(var ee=R-1;0<=ee;ee--)ae.re[ee]=F[2*ee*T+oe],ae.im[ee]=F[(2*ee+1)*T+oe],isNaN(ae.re[ee])&&(ae.re[ee]=0),isNaN(ae.im[ee])&&(ae.im[ee]=0);C.fft1d(ae.re,ae.im);for(var ee=R-1;0<=ee;ee--)ne[2*ee*T+oe]=ae.re[ee],ne[(2*ee+1)*T+oe]=ae.im[ee]}return ne},reconstructTwoRealFFT:function(E,R,I){var T=E.re.length;R.re[0]=E.re[0],R.im[0]=0,I.re[0]=E.im[0],I.im[0]=0;var P,F,M,O,$;for(var Z=T/2;0<Z;Z--)$=T-Z,P=0.5*(E.re[Z]-E.re[$]),F=0.5*(E.re[Z]+E.re[$]),M=0.5*(E.im[Z]-E.im[$]),O=0.5*(E.im[Z]+E.im[$]),R.re[Z]=F,R.im[Z]=M,R.re[$]=F,R.im[$]=-M,I.re[Z]=O,I.im[Z]=-P,I.re[$]=O,I.im[$]=P},convolute2DI:function(E,R,I,T){var P,F;for(var M=0;M<I/2;M++)for(var O=0;O<T;O++)P=E[2*M*T+O]*R[2*M*T+O]-E[(2*M+1)*T+O]*R[(2*M+1)*T+O],F=E[2*M*T+O]*R[(2*M+1)*T+O]+E[(2*M+1)*T+O]*R[2*M*T+O],E[2*M*T+O]=P,E[(2*M+1)*T+O]=F},convolute:function(E,R,I,T){var P=Array(T*I);for(var F=0;F<I*T;F++)P[F]=E[F];P=this.fft2DArray(P,I,T);var M=R.length,O=R[0].length,$=Array(T*I);for(var F=0;F<T*I;F++)$[F]=0;var K=Math.floor((M-1)/2),Q=Math.floor((O-1)/2),Z,W;for(var G=0;G<M;G++){Z=(G-K+I)%I;for(var ee=0;ee<O;ee++)W=(ee-Q+T)%T,$[Z*T+W]=R[G][ee]}$=this.fft2DArray($,I,T);var te=2*I,ne=T/2+1;return this.convolute2DI(P,$,te,ne),this.ifft2DArray(P,te,ne)},toRadix2:function(E,R,I){var T,P,F,M,O=I,$=R;if(0===I||0!=(I&I-1)){for(O=0;0!=I>>++O;);O=1<<O}if(0===R||0!=(R&R-1)){for($=0;0!=R>>++$;);$=1<<$}if($==R&&O==I)return{data:E,rows:R,cols:I};var Z=Array($*O),W=Math.floor(($-R)/2)-R,K=Math.floor((O-I)/2)-I;for(T=0;T<$;T++)for(F=T*O,M=(T-W)%R*I,P=0;P<O;P++)Z[F+P]=E[M+(P-K)%I];return{data:Z,rows:$,cols:O}},crop:function(E,R,I,T,P,F){if(R==T&&I==P)return E;Object.assign({},F);var M=Array(P*T),O=Math.floor((R-T)/2),$=Math.floor((I-P)/2),Z,W,K,Q;for(K=0;K<T;K++)for(Z=K*T,W=(K+O)*I,Q=0;Q<P;Q++)M[Z+Q]=E[W+(Q+$)];return M}}},function(_,S){(function(){var D=S,C={release:'0.3.0',date:'2013-03'};D.toString=function(){return'version '+C.release+', released '+C.date};var E=0,R=null,I=null,T={init:function(M){if(0!==M&&0==(M&M-1))E=M,T._initArray(),T._makeBitReversalTable(),T._makeCosSinTable();else throw new Error('init: radix-2 required')},fft1d:function(M,O){T.fft(M,O,1)},ifft1d:function(M,O){var $=1/E;T.fft(M,O,-1);for(var Z=0;Z<E;Z++)M[Z]*=$,O[Z]*=$},bt1d:function(M,O){T.fft(M,O,-1)},fft2d:function(M,O){var $=[],Z=[],W=0;for(var K=0;K<E;K++){W=K*E;for(var Q=0;Q<E;Q++)$[Q]=M[Q+W],Z[Q]=O[Q+W];T.fft1d($,Z);for(var G=0;G<E;G++)M[G+W]=$[G],O[G+W]=Z[G]}for(var ee=0;ee<E;ee++){for(var te=0;te<E;te++)W=ee+te*E,$[te]=M[W],Z[te]=O[W];T.fft1d($,Z);for(var ne=0;ne<E;ne++)W=ee+ne*E,M[W]=$[ne],O[W]=Z[ne]}},ifft2d:function(M,O){var $=[],Z=[],W=0;for(var K=0;K<E;K++){W=K*E;for(var Q=0;Q<E;Q++)$[Q]=M[Q+W],Z[Q]=O[Q+W];T.ifft1d($,Z);for(var G=0;G<E;G++)M[G+W]=$[G],O[G+W]=Z[G]}for(var ee=0;ee<E;ee++){for(var te=0;te<E;te++)W=ee+te*E,$[te]=M[W],Z[te]=O[W];T.ifft1d($,Z);for(var ne=0;ne<E;ne++)W=ee+ne*E,M[W]=$[ne],O[W]=Z[ne]}},fft:function(M,O,$){var oe=E>>2,Z,W,K,Q,G,ee,te,ne,ae;for(var se=0;se<E;se++)Q=R[se],se<Q&&(G=M[se],M[se]=M[Q],M[Q]=G,G=O[se],O[se]=O[Q],O[Q]=G);for(var le=1;le<E;le<<=1){W=0,Z=E/(le<<1);for(var de=0;de<le;de++){ee=I[W+oe],te=$*I[W];for(var ue=de;ue<E;ue+=le<<1)K=ue+le,ne=ee*M[K]+te*O[K],ae=ee*O[K]-te*M[K],M[K]=M[ue]-ne,M[ue]+=ne,O[K]=O[ue]-ae,O[ue]+=ae;W+=Z}}},_initArray:function(){R='undefined'==typeof Uint32Array?[]:new Uint32Array(E),I='undefined'==typeof Float64Array?[]:new Float64Array(1.25*E)},_paddingZero:function(){},_makeBitReversalTable:function(){var M=0,O=0,$=0;for(R[0]=0;++M<E;){for($=E>>1;$<=O;)O-=$,$>>=1;O+=$,R[M]=O}},_makeCosSinTable:function(){var M=E>>1,O=E>>2,$=E>>3,Z=Math.sin(Math.PI/E),W=2*Z*Z,K=Math.sqrt(W*(2-W)),Q=I[O]=1,G=I[0]=0;Z=2*W;for(var ee=1;ee<$;ee++)Q-=W,W+=Z*Q,G+=K,K-=Z*G,I[ee]=G,I[O-ee]=Q;0!=$&&(I[$]=Math.sqrt(0.5));for(var te=0;te<O;te++)I[M-te]=I[te];for(var ne=0;ne<M+O;ne++)I[ne+M]=-I[ne]}},P=['init','fft1d','ifft1d','fft2d','ifft2d'];for(var F=0;F<P.length;F++)D[P[F]]=T[P[F]];return D.bt=T.bt1d,D.fft=T.fft1d,D.ifft=T.ifft1d,D}).call(this)},function(_,S,D){'use strict';const C=D(117),E=[-1,0],R=[0,-1],I=[null,null],T=[-1,-1,0,1],P=[0,-1,-1,-1],F=[null,null,null,null];_.exports=function(O,$,Z,W){W=W||{};const K=W.neighbours||8;var Q,G,ee;if(8===K)Q=T,G=P,ee=F;else if(4===K)Q=E,G=R,ee=I;else throw new RangeError('unsupported neighbours count: '+K);const te=O.length,ne=Array(te),ae=new Int16Array(te),oe=new C;var se,le=1;for(var de=0;de<Z;de++)for(var ue=0;ue<$;ue++){var he=null;if(se=ue+de*$,O[se]){for(var pe=0;pe<ee.length;pe++){var me=ue+Q[pe],ce=de+G[pe];if(0<=me&&0<=ce&&me<$&&ce<Z){var ge=ne[me+ce*$];ge?(ee[pe]=ge,(!he||ee[pe].value<he.value)&&(he=ee[pe])):ee[pe]=null}}if(!he)ne[se]=oe.add(le++);else{ne[se]=he;for(var pe=0;pe<ee.length;pe++)ee[pe]&&ee[pe]!==he&&oe.union(he,ee[pe])}}}for(var de=0;de<Z;de++)for(var ue=0;ue<$;ue++)se=ue+de*$,O[se]&&(ae[se]=oe.find(ne[se]).value);return ae}},function(_){'use strict';function S(D){this.value=D,this.parent=null,this.rank=0}_.exports=class{constructor(){this.nodes=new Map}add(C){var E=this.nodes.get(C);return E||(E=new S(C),this.nodes.set(C,E)),E}union(C,E){const R=this.find(C),I=this.find(E);R===I||(R.rank<I.rank?R.parent=I:R.rank>I.rank?I.parent=R:(I.parent=R,R.rank++))}find(C){for(var E=C;null!==E.parent;)E=E.parent;for(var R=C;null!==R.parent;){var I=R;R=R.parent,I.parent=E}return E}connected(C,E){return this.find(C)===this.find(E)}}}])});;
//# sourceMappingURL=spectra-data.min.js.map