var _Mathsign=Math.sign,_Mathlog2=Math.log10,_NumberMIN_VALUE=Number.MIN_VALUE,_NumberMAX_VALUE=Number.MAX_VALUE,_NumberisFinite=Number.isFinite,_NumberMIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER,_NumberMAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER,_Mathceil=Math.ceil,_Mathlog=Math.log,_Mathsin=Math.sin,_Mathexp=Math.exp,_Mathpow=Math.pow,_Mathmax=Math.max,_Mathsqrt=Math.sqrt,_Mathround=Math.round,_Mathabs=Math.abs,_NumberisInteger=Number.isInteger,_Mathfloor=Math.floor,_Mathmin=Math.min,_StringfromCharCode=String.fromCharCode;(function(D,I){'object'==typeof exports&&'object'==typeof module?module.exports=I():'function'==typeof define&&define.amd?define([],I):'object'==typeof exports?exports.spectraData=I():D.spectraData=I()})(this,function(){return function(E){function D(R){if(I[R])return I[R].exports;var P=I[R]={i:R,l:!1,exports:{}};return E[R].call(P.exports,P,P.exports,D),P.l=!0,P.exports}var I={};return D.m=E,D.c=I,D.i=function(R){return R},D.d=function(R,P,T){D.o(R,P)||Object.defineProperty(R,P,{configurable:!1,enumerable:!0,get:T})},D.n=function(R){var P=R&&R.__esModule?function(){return R['default']}:function(){return R};return D.d(P,'a',P),P},D.o=function(R,P){return Object.prototype.hasOwnProperty.call(R,P)},D.p='',D(D.s=152)}([function(E,D,I){'use strict';function R(K){return K}function P(K,Q){for(var G=0;G<K.length;++G)Q[G]=255&K.charCodeAt(G);return Q}function T(K){var Q=65536,G=[],ee=K.length,te=D.getTypeOf(K),ne=0,ae=!0;try{'uint8array'===te?_StringfromCharCode.apply(null,new Uint8Array(0)):'nodebuffer'===te?_StringfromCharCode.apply(null,Z(0)):void 0}catch(le){ae=!1}if(!ae){for(var se='',oe=0;oe<K.length;oe++)se+=_StringfromCharCode(K[oe]);return se}for(;ne<ee&&1<Q;)try{'array'===te||'nodebuffer'===te?G.push(_StringfromCharCode.apply(null,K.slice(ne,_Mathmin(ne+Q,ee)))):G.push(_StringfromCharCode.apply(null,K.subarray(ne,_Mathmin(ne+Q,ee)))),ne+=Q}catch(le){Q=_Mathfloor(Q/2)}return G.join('')}function F(K,Q){for(var G=0;G<K.length;G++)Q[G]=K[G];return Q}var O=I(5),$=I(11),Z=I(12);D.string2binary=function(K){for(var Q='',G=0;G<K.length;G++)Q+=_StringfromCharCode(255&K.charCodeAt(G));return Q},D.arrayBuffer2Blob=function(K,Q){D.checkSupport('blob'),Q=Q||'application/zip';try{return new Blob([K],{type:Q})}catch(te){try{var G=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,ee=new G;return ee.append(K),ee.getBlob(Q)}catch(ne){throw new Error('Bug : can\'t construct the Blob.')}}},D.applyFromCharCode=T;var W={};W.string={string:R,array:function(K){return P(K,Array(K.length))},arraybuffer:function(K){return W.string.uint8array(K).buffer},uint8array:function(K){return P(K,new Uint8Array(K.length))},nodebuffer:function(K){return P(K,Z(K.length))}},W.array={string:T,array:R,arraybuffer:function(K){return new Uint8Array(K).buffer},uint8array:function(K){return new Uint8Array(K)},nodebuffer:function(K){return Z(K)}},W.arraybuffer={string:function(K){return T(new Uint8Array(K))},array:function(K){return F(new Uint8Array(K),Array(K.byteLength))},arraybuffer:R,uint8array:function(K){return new Uint8Array(K)},nodebuffer:function(K){return Z(new Uint8Array(K))}},W.uint8array={string:T,array:function(K){return F(K,Array(K.length))},arraybuffer:function(K){return K.buffer},uint8array:R,nodebuffer:function(K){return Z(K)}},W.nodebuffer={string:T,array:function(K){return F(K,Array(K.length))},arraybuffer:function(K){return W.nodebuffer.uint8array(K).buffer},uint8array:function(K){return F(K,new Uint8Array(K.length))},nodebuffer:R},D.transformTo=function(K,Q){if(Q||(Q=''),!K)return Q;D.checkSupport(K);var G=D.getTypeOf(Q),ee=W[G][K](Q);return ee},D.getTypeOf=function(K){return'string'==typeof K?'string':'[object Array]'===Object.prototype.toString.call(K)?'array':O.nodebuffer&&Z.test(K)?'nodebuffer':O.uint8array&&K instanceof Uint8Array?'uint8array':O.arraybuffer&&K instanceof ArrayBuffer?'arraybuffer':void 0},D.checkSupport=function(K){var Q=O[K.toLowerCase()];if(!Q)throw new Error(K+' is not supported by this browser')},D.MAX_VALUE_16BITS=65535,D.MAX_VALUE_32BITS=-1,D.pretty=function(K){var Q='',G,ee;for(ee=0;ee<(K||'').length;ee++)G=K.charCodeAt(ee),Q+='\\x'+(16>G?'0':'')+G.toString(16).toUpperCase();return Q},D.findCompression=function(K){for(var Q in $)if($.hasOwnProperty(Q)&&$[Q].magic===K)return $[Q];return null},D.isRegExp=function(K){return'[object RegExp]'===Object.prototype.toString.call(K)},D.extend=function(){var K={},Q,G;for(Q=0;Q<arguments.length;Q++)for(G in arguments[Q])arguments[Q].hasOwnProperty(G)&&'undefined'==typeof K[G]&&(K[G]=arguments[Q][G]);return K}},function(E,D,I){'use strict';I(125);var R=I(47),P=I(8);class T extends R(Array){constructor(F,O){var $;if(1===arguments.length&&'number'==typeof F)return Array(F);if(T.isMatrix(F))return F.clone();if(_NumberisInteger(F)&&0<F){if(super(F),_NumberisInteger(O)&&0<O)for($=0;$<F;$++)this[$]=Array(O);else throw new TypeError('nColumns must be a positive integer');}else if(Array.isArray(F)){const Z=F;if(F=Z.length,O=Z[0].length,'number'!=typeof O||0===O)throw new TypeError('Data must be a 2D array with at least one element');for(super(F),$=0;$<F;$++){if(Z[$].length!==O)throw new RangeError('Inconsistent array dimensions');this[$]=[].concat(Z[$])}}else throw new TypeError('First argument must be a positive number or an array');return this.rows=F,this.columns=O,this}set(F,O,$){return this[F][O]=$,this}get(F,O){return this[F][O]}clone(){for(var F=new this.constructor[Symbol.species](this.rows,this.columns),O=0;O<this.rows;O++)for(var $=0;$<this.columns;$++)F.set(O,$,this.get(O,$));return F}removeRow(F){if(P.checkRowIndex(this,F),1===this.rows)throw new RangeError('A matrix cannot have less than one row');return this.splice(F,1),this.rows-=1,this}addRow(F,O){return void 0===O&&(O=F,F=this.rows),P.checkRowIndex(this,F,!0),O=P.checkRowVector(this,O,!0),this.splice(F,0,O),this.rows+=1,this}removeColumn(F){if(P.checkColumnIndex(this,F),1===this.columns)throw new RangeError('A matrix cannot have less than one column');for(var O=0;O<this.rows;O++)this[O].splice(F,1);return this.columns-=1,this}addColumn(F,O){'undefined'==typeof O&&(O=F,F=this.columns),P.checkColumnIndex(this,F,!0),O=P.checkColumnVector(this,O);for(var $=0;$<this.rows;$++)this[$].splice(F,0,O[$]);return this.columns+=1,this}}D.Matrix=T,T.abstractMatrix=R},function(E,D){'use strict';var R='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Int32Array;D.assign=function(F){for(var O=Array.prototype.slice.call(arguments,1),$;O.length;)if($=O.shift(),!!$){if('object'!=typeof $)throw new TypeError($+'must be non-object');for(var Z in $)$.hasOwnProperty(Z)&&(F[Z]=$[Z])}return F},D.shrinkBuf=function(F,O){return F.length===O?F:F.subarray?F.subarray(0,O):(F.length=O,F)};var P={arraySet:function(F,O,$,Z,W){if(O.subarray&&F.subarray)return void F.set(O.subarray($,$+Z),W);for(var K=0;K<Z;K++)F[W+K]=O[$+K]},flattenChunks:function(F){var O,$,Z,W,K,Q;for(Z=0,O=0,$=F.length;O<$;O++)Z+=F[O].length;for(Q=new Uint8Array(Z),W=0,(O=0,$=F.length);O<$;O++)K=F[O],Q.set(K,W),W+=K.length;return Q}},T={arraySet:function(F,O,$,Z,W){for(var K=0;K<Z;K++)F[W+K]=O[$+K]},flattenChunks:function(F){return[].concat.apply([],F)}};D.setTyped=function(F){F?(D.Buf8=Uint8Array,D.Buf16=Uint16Array,D.Buf32=Int32Array,D.assign(D,P)):(D.Buf8=Array,D.Buf16=Array,D.Buf32=Array,D.assign(D,T))},D.setTyped(R)},function(E){'use strict';function R(O){for(var $=0,Z=O.length,W=Array(Z);$<Z;$++)W[$]=O[$];return W}function P(O,$){var Z=0,Q,G;if(Array.isArray(O)){if(G=$,Q=G?R(O):O,O=Q.length,$=Q[0].length,'undefined'==typeof $)throw new TypeError('Data must be a 2D array');if(0<O&&0<$){for(;Z<O;Z++)if(Q[Z].length!==$)throw new RangeError('Inconsistent array dimensions');else G&&(Q[Z]=R(Q[Z]));}else throw new RangeError('Invalid dimensions: '+O+'x'+$)}else if('number'!=typeof O)throw new TypeError('Invalid arguments');else if(0<O&&0<$)for(Q=Array(O);Z<O;Z++)Q[Z]=Array($);else throw new RangeError('Invalid dimensions: '+O+'x'+$);return Object.defineProperty(Q,'rows',{writable:!0,value:O}),Object.defineProperty(Q,'columns',{writable:!0,value:$}),Q.__proto__=P.prototype,Q}var T=Array.prototype.splice,F=Array.prototype.concat;P.from1DArray=function($,Z,W){var G=0,K,Q;if(K=$*Z,K!==W.length)throw new RangeError('Data length does not match given dimensions');for(Q=Array($);G<$;G++)Q[G]=W.slice(G*Z,(G+1)*Z);return new P(Q)},P.rowVector=function($){return new P([$])},P.columnVector=function($){for(var Z=$.length,W=Array(Z),K=0;K<Z;K++)W[K]=[$[K]];return new P(W)},P.empty=function($,Z){return new P($,Z)},P.zeros=function($,Z){return P.empty($,Z).fill(0)},P.ones=function($,Z){return P.empty($,Z).fill(1)},P.rand=function($,Z){for(var W=P.empty($,Z),K=0,Q=W.rows;K<Q;K++)for(var G=0,ee=W.columns;G<ee;G++)W[K][G]=Math.random();return W},P.eye=function($){for(var Z=P.zeros($,$),W=Z.rows,K=0;K<W;K++)Z[K][K]=1;return Z},P.diag=function($){for(var Z=$.length,W=P.zeros(Z,Z),K=0;K<Z;K++)W[K][K]=$[K];return W},P.indices=function($,Z){for(var W=Array(Z-$),K=0;K<W.length;K++)W[K]=$++;return W},P.stack=function($){var Z,W,K;if(P.isMatrix($)){var Q=0,G=0;for(Z=0;Z<arguments.length;Z++)Q+=arguments[Z].rows,arguments[Z].columns>G&&(G=arguments[Z].columns);var ee=P.zeros(Q,G),te=0;for(Z=0;Z<arguments.length;Z++){var ne=arguments[Z];for(W=0;W<ne.rows;W++){for(K=0;K<ne.columns;K++)ee[te][K]=ne[W][K];te++}}return ee}if(Array.isArray($)){var ae=P.empty(arguments.length,$.length);for(Z=0;Z<arguments.length;Z++)ae.setRow(Z,arguments[Z]);return ae}},P.expand=function($,Z){for(var W=[],K=0;K<Z.length;K++)for(var Q=0;Q<Z[K];Q++)W.push($[K]);return new P(W)},P.checkMatrix=function($){if(!$)throw new TypeError('Argument has to be a matrix');return'Matrix'!==$.klass&&($=new P($)),$},P.isMatrix=function($){return!!$&&'Matrix'===$.klass},Object.defineProperty(P.prototype,'klass',{get:function(){return'Matrix'}}),Object.defineProperty(P.prototype,'size',{get:function(){return this.rows*this.columns}}),P.prototype.checkRowIndex=function($){if(0>$||$>this.rows-1)throw new RangeError('Row index out of range.')},P.prototype.checkColumnIndex=function($){if(0>$||$>this.columns-1)throw new RangeError('Column index out of range.')},P.prototype.checkDimensions=function($){if(this.rows!==$.rows||this.columns!==$.columns)throw new RangeError('Matrices dimensions must be equal.')},P.prototype.apply=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$.call(this,K,Q);return this},P.prototype.clone=function(){return new P(this.to2DArray())},P.prototype.to1DArray=function(){return F.apply([],this)},P.prototype.to2DArray=function(){for(var $=this.rows,Z=Array($),W=0;W<$;W++)Z[W]=R(this[W]);return Z},P.prototype.isRowVector=function(){return 1===this.rows},P.prototype.isColumnVector=function(){return 1===this.columns},P.prototype.isVector=function(){return 1===this.rows||1===this.columns},P.prototype.isSquare=function(){return this.rows===this.columns},P.prototype.isSymmetric=function(){if(this.isSquare()){for(var $=this.rows,Z=0;Z<$;Z++)for(var W=0;W<=Z;W++)if(this[Z][W]!==this[W][Z])return!1;return!0}return!1},P.prototype.set=function($,Z,W){return this[$][Z]=W,this},P.prototype.get=function($,Z){return this[$][Z]},P.prototype.fill=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]=$;return this},P.prototype.neg=function(){return this.mulS(-1)},P.prototype.add=function($){return'number'==typeof $?this.addS($):($=P.checkMatrix($),this.addM($))},P.prototype.addS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$;return this},P.prototype.addM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$[K][Q];return this},P.prototype.sub=function($){return'number'==typeof $?this.subS($):($=P.checkMatrix($),this.subM($))},P.prototype.subS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$;return this},P.prototype.subM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$[K][Q];return this},P.prototype.mul=function($){return'number'==typeof $?this.mulS($):($=P.checkMatrix($),this.mulM($))},P.prototype.mulS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$;return this},P.prototype.mulM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$[K][Q];return this},P.prototype.div=function($){return'number'==typeof $?this.divS($):($=P.checkMatrix($),this.divM($))},P.prototype.divS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$;return this},P.prototype.divM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$[K][Q];return this},P.prototype.getRow=function($){return this.checkRowIndex($),R(this[$])},P.prototype.getRowVector=function($){return P.rowVector(this.getRow($))},P.prototype.setRow=function($,Z){if(this.checkRowIndex($),P.isMatrix(Z)&&(Z=Z.to1DArray()),Z.length!==this.columns)throw new RangeError('Invalid row size');return this[$]=R(Z),this},P.prototype.removeRow=function($){if(this.checkRowIndex($),1===this.rows)throw new RangeError('A matrix cannot have less than one row');return T.call(this,$,1),this.rows-=1,this},P.prototype.addRow=function($,Z){if('undefined'==typeof Z&&(Z=$,$=this.rows),0>$||$>this.rows)throw new RangeError('Row index out of range.');if(P.isMatrix(Z)&&(Z=Z.to1DArray()),Z.length!==this.columns)throw new RangeError('Invalid row size');return T.call(this,$,0,R(Z)),this.rows+=1,this},P.prototype.swapRows=function($,Z){this.checkRowIndex($),this.checkRowIndex(Z);var W=this[$];return this[$]=this[Z],this[Z]=W,this},P.prototype.getColumn=function($){this.checkColumnIndex($);for(var Z=this.rows,W=Array(Z),K=0;K<Z;K++)W[K]=this[K][$];return W},P.prototype.getColumnVector=function($){return P.columnVector(this.getColumn($))},P.prototype.setColumn=function($,Z){this.checkColumnIndex($),P.isMatrix(Z)&&(Z=Z.to1DArray());var W=this.rows;if(Z.length!==W)throw new RangeError('Invalid column size');for(var K=0;K<W;K++)this[K][$]=Z[K];return this},P.prototype.removeColumn=function($){if(this.checkColumnIndex($),1===this.columns)throw new RangeError('A matrix cannot have less than one column');for(var Z=0,W=this.rows;Z<W;Z++)this[Z].splice($,1);return this.columns-=1,this},P.prototype.addColumn=function($,Z){if('undefined'==typeof Z&&(Z=$,$=this.columns),0>$||$>this.columns)throw new RangeError('Column index out of range.');P.isMatrix(Z)&&(Z=Z.to1DArray());var W=this.rows;if(Z.length!==W)throw new RangeError('Invalid column size');for(var K=0;K<W;K++)this[K].splice($,0,Z[K]);return this.columns+=1,this},P.prototype.swapColumns=function($,Z){this.checkRowIndex($),this.checkRowIndex(Z);for(var W=this.rows,G=0,K,Q;G<W;G++)Q=this[G],K=Q[$],Q[$]=Q[Z],Q[Z]=K;return this},P.prototype.checkRowVector=function($){if(P.isMatrix($)&&($=$.to1DArray()),$.length!==this.columns)throw new RangeError('vector size must be the same as the number of columns');return $},P.prototype.checkColumnVector=function($){if(P.isMatrix($)&&($=$.to1DArray()),$.length!==this.rows)throw new RangeError('vector size must be the same as the number of rows');return $},P.prototype.addRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$[Q];return this},P.prototype.subRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$[Q];return this},P.prototype.mulRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$[Q];return this},P.prototype.divRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$[Q];return this},P.prototype.addColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$[K];return this},P.prototype.subColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$[K];return this},P.prototype.mulColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$[K];return this},P.prototype.divColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$[K];return this},P.prototype.mulRow=function($,Z){this.checkRowIndex($);for(var W=0,K=this.columns;W<K;W++)this[$][W]*=Z;return this},P.prototype.mulColumn=function($,Z){this.checkColumnIndex($);for(var W=0,K=this.rows;W<K;W++)this[W][$]*=Z},P.prototype.max=function(){for(var $=-Infinity,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]>$&&($=this[K][Q]);return $},P.prototype.maxIndex=function(){for(var $=-Infinity,Z={},W=this.rows,K=this.columns,Q=0;Q<W;Q++)for(var G=0;G<K;G++)this[Q][G]>$&&($=this[Q][G],Z.row=Q,Z.column=G);return Z},P.prototype.min=function(){for(var $=Infinity,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]<$&&($=this[K][Q]);return $},P.prototype.minIndex=function(){for(var $=Infinity,Z={},W=this.rows,K=this.columns,Q=0;Q<W;Q++)for(var G=0;G<K;G++)this[Q][G]<$&&($=this[Q][G],Z.row=Q,Z.column=G);return Z},P.prototype.maxRow=function($){this.checkRowIndex($);for(var Z=-Infinity,W=0,K=this.columns;W<K;W++)this[$][W]>Z&&(Z=this[$][W]);return Z},P.prototype.maxRowIndex=function($){this.checkRowIndex($);for(var Z=-Infinity,W={row:$},K=0,Q=this.columns;K<Q;K++)this[$][K]>Z&&(Z=this[$][K],W.column=K);return W},P.prototype.minRow=function($){this.checkRowIndex($);for(var Z=Infinity,W=0,K=this.columns;W<K;W++)this[$][W]<Z&&(Z=this[$][W]);return Z},P.prototype.minRowIndex=function($){this.checkRowIndex($);for(var Z=Infinity,W={row:$,column:0},K=0,Q=this.columns;K<Q;K++)this[$][K]<Z&&(Z=this[$][K],W.column=K);return W},P.prototype.maxColumn=function($){this.checkColumnIndex($);for(var Z=-Infinity,W=0,K=this.rows;W<K;W++)this[W][$]>Z&&(Z=this[W][$]);return Z},P.prototype.maxColumnIndex=function($){this.checkColumnIndex($);for(var Z=-Infinity,W={row:0,column:$},K=0,Q=this.rows;K<Q;K++)this[K][$]>Z&&(Z=this[K][$],W.row=K);return W},P.prototype.minColumn=function($){this.checkColumnIndex($);for(var Z=Infinity,W=0,K=this.rows;W<K;W++)this[W][$]<Z&&(Z=this[W][$]);return Z},P.prototype.minColumnIndex=function($){this.checkColumnIndex($);for(var Z=Infinity,W={row:0,column:$},K=0,Q=this.rows;K<Q;K++)this[K][$]<Z&&(Z=this[K][$],W.row=K);return W},P.prototype.diag=function(){if(!this.isSquare())throw new TypeError('Only square matrices have a diagonal.');for(var O=Array(this.rows),$=0,Z=this.rows;$<Z;$++)O[$]=this[$][$];return O},P.prototype.sum=function(){for(var $=0,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$+=this[K][Q];return $},P.prototype.mean=function(){return this.sum()/this.size},P.prototype.prod=function(){for(var O=1,$=this.rows,Z=this.columns,W=0;W<$;W++)for(var K=0;K<Z;K++)O*=this[W][K];return O},P.prototype.cumulativeSum=function(){for(var $=0,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$+=this[K][Q],this[K][Q]=$;return this},P.prototype.dot=function($){if(this.size!==$.size)throw new RangeError('vectors do not have the same size');for(var Z=this.to1DArray(),W=$.to1DArray(),O=0,K=Z.length,Q=0;Q<K;Q++)O+=Z[Q]*W[Q];return O},P.prototype.mmul=function($){if(!P.isMatrix($))throw new TypeError('parameter "other" must be a matrix');this.columns!==$.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');var Z=this.rows,W=this.columns,K=$.columns,Q=new P(Z,K),G=Array(W),ee,te,ne;for(te=0;te<K;te++){for(ne=0;ne<W;ne++)G[ne]=$[ne][te];for(ee=0;ee<Z;ee++){var ae=this[ee],se=0;for(ne=0;ne<W;ne++)se+=ae[ne]*G[ne];Q[ee][te]=se}}return Q},P.prototype.sortRows=function($){for(var Z=0,W=this.rows;Z<W;Z++)this[Z].sort($);return this},P.prototype.sortColumns=function($){for(var Z=0,W=this.columns;Z<W;Z++)this.setColumn(Z,this.getColumn(Z).sort($));return this},P.prototype.transpose=function(){for(var $=new P(this.columns,this.rows),Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$[Q][K]=this[K][Q];return $},P.prototype.subMatrix=function($,Z,W,K){if($>Z||W>K||0>$||$>=this.rows||0>Z||Z>=this.rows||0>W||W>=this.columns||0>K||K>=this.columns)throw new RangeError('Argument out of range');for(var Q=new P(Z-$+1,K-W+1),G=$;G<=Z;G++)for(var ee=W;ee<=K;ee++)Q[G-$][ee-W]=this[G][ee];return Q},P.prototype.subMatrixRow=function($,Z,W){if('undefined'==typeof Z?(Z=0,W=this.columns-1):'undefined'==typeof W&&(W=this.columns-1),Z>W||0>Z||Z>=this.columns||0>W||W>=this.columns)throw new RangeError('Argument out of range.');for(var K=$.length,Q=this.rows,G=new P(K,W-Z+1),ee=0;ee<K;ee++)for(var te=Z;te<=W;te++){if(0>$[ee]||$[ee]>=Q)throw new RangeError('Argument out of range.');G[ee][te-Z]=this[$[ee]][te]}return G},P.prototype.subMatrixColumn=function($,Z,W){if('undefined'==typeof Z?(Z=0,W=this.rows-1):'undefined'==typeof W&&(W=this.rows-1),Z>W||0>Z||Z>=this.rows||0>W||W>=this.rows)throw new RangeError('Argument out of range.');for(var K=$.length,Q=this.columns,G=new P(W-Z+1,K),ee=0;ee<K;ee++)for(var te=Z;te<=W;te++){if(0>$[ee]||$[ee]>=Q)throw new RangeError('Argument out of range.');G[te-Z][ee]=this[te][$[ee]]}return G},P.prototype.trace=function(){if(!this.isSquare())throw new TypeError('The matrix is not square');for(var O=0,$=0,Z=this.rows;$<Z;$++)O+=this[$][$];return O},P.prototype.abs=function(){for(var $=this.rows,Z=this.columns,W=0;W<$;W++)for(var K=0;K<Z;K++)this[W][K]=_Mathabs(this[W][K])},E.exports=P},function(E,D,I){'use strict';var R=I(47),P=I(1);class T extends R(){constructor(F,O,$){super(),this.matrix=F,this.rows=O,this.columns=$}static get[Symbol.species](){return P.Matrix}}E.exports=T},function(E,D,I){'use strict';(function(R){if(D.base64=!0,D.array=!0,D.string=!0,D.arraybuffer='undefined'!=typeof ArrayBuffer&&'undefined'!=typeof Uint8Array,D.nodebuffer='undefined'!=typeof R,D.uint8array='undefined'!=typeof Uint8Array,'undefined'==typeof ArrayBuffer)D.blob=!1;else{var P=new ArrayBuffer(0);try{D.blob=0===new Blob([P],{type:'application/zip'}).size}catch(O){try{var T=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,F=new T;F.append(P),D.blob=0===F.getBlob('application/zip').size}catch($){D.blob=!1}}}}).call(D,I(27).Buffer)},function(E,D,I){'use strict';D.array=I(46),D.matrix=I(120)},function(E,D,I){'use strict';E.exports=I(3),E.exports.Decompositions=E.exports.DC=I(113)},function(E,D,I){'use strict';var R=I(1);D.checkRowIndex=function(T,F,O){var $=O?T.rows:T.rows-1;if(0>F||F>$)throw new RangeError('Row index out of range')},D.checkColumnIndex=function(T,F,O){var $=O?T.columns:T.columns-1;if(0>F||F>$)throw new RangeError('Column index out of range')},D.checkRowVector=function(T,F){if(F.to1DArray&&(F=F.to1DArray()),F.length!==T.columns)throw new RangeError('vector size must be the same as the number of columns');return F},D.checkColumnVector=function(T,F){if(F.to1DArray&&(F=F.to1DArray()),F.length!==T.rows)throw new RangeError('vector size must be the same as the number of rows');return F},D.checkIndices=function(T,F,O){var $=F.some((W)=>{return 0>W||W>=T.rows}),Z=O.some((W)=>{return 0>W||W>=T.columns});if($||Z)throw new RangeError('Indices are out of range');if('object'!=typeof F||'object'!=typeof O)throw new TypeError('Unexpected type for row/column indices');return Array.isArray(F)||(F=Array.from(F)),Array.isArray(O)||(F=Array.from(O)),{row:F,column:O}},D.checkRange=function(T,F,O,$,Z){if(5!==arguments.length)throw new TypeError('Invalid argument type');var W=Array.from(arguments).slice(1).some(function(K){return'number'!=typeof K});if(W)throw new TypeError('Invalid argument type');if(F>O||$>Z||0>F||F>=T.rows||0>O||O>=T.rows||0>$||$>=T.columns||0>Z||Z>=T.columns)throw new RangeError('Submatrix indices are out of range')},D.getRange=function(T,F){for(var O=Array(F-T+1),$=0;$<O.length;$++)O[$]=T+$;return O},D.sumByRow=function(T){for(var F=R.Matrix.zeros(T.rows,1),O=0;O<T.rows;++O)for(var $=0;$<T.columns;++$)F.set(O,0,F.get(O,0)+T.get(O,$));return F},D.sumByColumn=function(T){for(var F=R.Matrix.zeros(1,T.columns),O=0;O<T.rows;++O)for(var $=0;$<T.columns;++$)F.set(0,$,F.get(0,$)+T.get(O,$));return F},D.sumAll=function(T){for(var F=0,O=0;O<T.rows;O++)for(var $=0;$<T.columns;$++)F+=T.get(O,$);return F}},function(E,D,I){'use strict';var R=I(6).array,P=I(38),T=I(29),F=I(66),O=I(24),Z=2;class W{constructor(K){this.sd=K,this.activeElement=0}static fromJcamp(K,Q){Q=Object.assign({},{keepSpectra:!0,keepRecordsRegExp:/^.+$/},Q,{xy:!0});var G=T.convert(K,Q);return new this(G)}setActiveElement(K){this.activeElement=K}getActiveElement(){return this.activeElement}getXUnits(){return this.getSpectrum().xUnit}setXUnits(K){this.getSpectrum().xUnit=K}getYUnits(){return this.getSpectrum().yUnit}getSpectraVariable(K){return this.sd.ntuples[K]}getPage(K){return this.sd.spectra[K].page}getNbPoints(K){return this.getSpectrumData(K).y.length}getFirstX(K){return K=K||this.activeElement,this.sd.spectra[K].firstX}setFirstX(K,Q){Q=Q||this.activeElement,this.sd.spectra[Q].firstX=K}getLastX(K){return K=K||this.activeElement,this.sd.spectra[K].lastX}setLastX(K,Q){Q=Q||this.activeElement,this.sd.spectra[Q].lastX=K}getFirstY(K){return K=K||this.activeElement,this.sd.spectra[K].firstY}setFirstY(K,Q){Q=Q||this.activeElement,this.sd.spectra[Q].firstY=K}getLastY(K){return K=K||this.activeElement,this.sd.spectra[K].lastY}setLastY(K,Q){Q=Q||this.activeElement,this.sd.spectra[Q].lastY=K}setDataClass(K){K===Z&&(this.getSpectrum().isPeaktable=!0,this.getSpectrum().isXYdata=!1),K===1&&(this.getSpectrum().isXYdata=!0,this.getSpectrum().isPeaktable=!1)}isDataClassPeak(){return!!this.getSpectrum().isPeaktable&&this.getSpectrum().isPeaktable}isDataClassXY(){return!!this.getSpectrum().isXYdata&&this.getSpectrum().isXYdata}setDataType(K){this.getSpectrum().dataType=K}getDataType(){return this.getSpectrum().dataType}getSpectrumData(K){return K=K||this.activeElement,this.sd.spectra[K].data[0]}getSpectrum(K){return K=K||this.activeElement,this.sd.spectra[K]}getNbSubSpectra(){return this.sd.spectra.length}getXData(K){return this.getSpectrumData(K).x}getYData(K){return this.getSpectrumData(K).y}getX(K){return this.getXData()[K]}getY(K){return this.getYData()[K]}getXYData(K){return[this.getXData(K),this.getYData(K)]}getTitle(K){return this.getSpectrum(K).title}setTitle(K,Q){this.getSpectrum(Q).title=K}getMinY(K){return R.min(this.getYData(K))}getMaxY(K){return R.max(this.getYData(K))}getMinMaxY(K){return R.minMax(this.getYData(K))}getNoiseLevel(){var K=R.robustMeanAndStdev(this.getYData()).stdev;return K*this.getNMRPeakThreshold(this.getNucleus(1))}arrayPointToUnits(K){return this.getFirstX()-K*(this.getFirstX()-this.getLastX())/(this.getNbPoints()-1)}unitsToArrayPoint(K){if(this.isDataClassXY())return _Mathround((this.getFirstX()-K)*(-1/this.getDeltaX()));if(this.isDataClassPeak()){var Q=0,G=this.getNbPoints()-1,ee=0,te;if(this.getFirstX()>this.getLastX()){if(G=0,ee=this.getNbPoints()-1,K>this.getFirstX())return this.getNbPoints();if(K<this.getLastX())return-1}else{if(K<this.getFirstX())return-1;if(K>this.getLastX())return this.getNbPoints()}for(;1<_Mathabs(G-ee);){if(te=_Mathround(_Mathfloor((G+ee)/2)),this.getX(te)===K)return te;this.getX(te)>K?G=te:ee=te}return Q=ee,_Mathabs(this.getX(ee)-K)>_Mathabs(this.getX(G)-K)&&(Q=G),Q}return 0}getDeltaX(){return(this.getLastX()-this.getFirstX())/(this.getNbPoints()-1)}setMinMax(K,Q){P.scale(this.getYData(),{min:K,max:Q,inplace:!0})}setMin(K){P.scale(this.getYData(),{min:K,inplace:!0})}setMax(K){P.scale(this.getYData(),{max:K,inplace:!0})}yShift(K){var Q=this.getSpectrumData().y,G=this.getNbPoints(),ee=0;for(ee=0;ee<G;ee++)Q[ee]+=K;this.getSpectrum().firstY+=K,this.getSpectrum().lastY+=K}shift(K){for(var Q=0;Q<this.getNbSubSpectra();Q++){this.setActiveElement(Q);var G=this.getSpectrumData().x,ee=this.getNbPoints(),te=0;for(te=0;te<ee;te++)G[te]+=K;this.getSpectrum().firstX+=K,this.getSpectrum().lastX+=K}}fillWith(K,Q,G){var ee,te,ne,ae,se;K>Q&&(ee=K,K=Q,Q=ee);for(var oe=0;oe<this.getNbSubSpectra();oe++)if(this.setActiveElement(oe),ae=this.getXData(),se=this.getYData(),te=this.unitsToArrayPoint(K),ne=this.unitsToArrayPoint(Q),te>ne&&(ee=te,te=ne,ne=ee),0>te&&(te=0),ne>=this.getNbPoints&&(ne=this.getNbPoints-1),'number'!=typeof G)se.splice(te,ne-te),ae.splice(te,ne-te);else for(oe=te;oe<=ne;oe++)se[oe]=G}suppressZone(K,Q){this.fillWith(K,Q),this.setDataClass(Z)}getMaxPeak(){for(var K=this.getSpectraDataY(),Q=K[0],G=0,ee=0;ee<K.length;ee++)Q<K[ee]&&(Q=K[ee],G=ee);return[this.getX(G),Q]}getParamDouble(K,Q){var G=this.sd.info[K];return G||(G=Q),G}getParamString(K,Q){var G=this.sd.info[K];return G||(G=Q),G+''}getParamInt(K,Q){var G=this.sd.info[K];return G||(G=Q),G}getParam(K,Q){var G=this.sd.info[K];return G||(G=Q),G}containsParam(K){return!!this.sd.info[K]}getSpectraDataY(){return this.getYData()}getSpectraDataX(){return this.getXData()}resetMinMax(){}putParam(K,Q){this.sd.info[K]=Q}getArea(K,Q){var G=this.unitsToArrayPoint(K),ee=this.unitsToArrayPoint(Q),te=0;if(G>ee){var ne=G;G=ee,ee=ne}G=0>G?0:G,ee=ee>=this.getNbPoints()?this.getNbPoints()-1:ee;for(var ae=G;ae<ee;ae++)te+=this.getY(ae);return te*_Mathabs(this.getDeltaX())}updateIntegrals(K,Q){var G=0;if(K.forEach((te)=>{te.integral=this.getArea(te.from,te.to),G+=te.integral}),0!==Q.nH){var ee=Q.nH/G;K.forEach((te)=>{te.integral*=ee})}}getVector(K,Q,G){return G?P.getEquallySpacedData(this.getSpectraDataX(),this.getSpectraDataY(),{from:K,to:Q,numberOfPoints:G}):this.getPointsInWindow(K,Q)}getPointsInWindow(K,Q,G){var ee=this.getSpectraDataX(),te=this.getSpectraDataY(),ne=0,ae=ee.length-1,se=1;if(ee[0]>ee[1]&&(se=-1,ne=ee.length-1,ae=0),K>Q){var oe=K;K=Q,Q=oe}if(ee[ne]>Q||ee[ae]<K)return[];for(;ee[ne]<K;)ne+=se;for(;ee[ae]>Q;)ae-=se;var le=_Mathabs(ae-ne)+1;G||(G=le);var de=Array(G),ue=Array(G),he=0;-1==se&&(he=G-1);for(var ce=le/G,ge=ne-se,pe=0;pe<G;pe++)ge+=_Mathround(ce*se),de[he]=ee[ge],ue[he]=te[ge],he+=se;return[de,ue]}is2D(){return'undefined'!=typeof this.sd.twoD&&this.sd.twoD}setTotalIntegral(K){this.totalIntegralValue=K}get totalIntegral(){if(this.totalIntegralValue)return this.totalIntegralValue;if(this.molecule){if(this.getNucleus(0).indexOf('H'))return 1*this.mf.replace(/.*H([0-9]+).*/,'$1');if(this.getNucleus(0).indexOf('C'))return 1*this.mf.replace(/.*C([0-9]+).*/,'$1')}else return 100;return 1}setMolfile(K){this.molfile=K}setMF(K){this.mf=K}createPeaks(K){return this.peaks=null,this.peaks=this.getPeaks(K),this.peaks}getPeaks(K){return this.peaks?this.peaks:O(this,K)}toJcamp(K){var Q=new F;return Q.convert(this,Object.assign({},{yFactor:1,encode:'DIFDUP',type:'SIMPLE'},K))}}E.exports=W},function(E,D){'use strict';var R='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';D.encode=function(P){for(var F='',ee=0,O,$,Z,W,K,Q,G;ee<P.length;)O=P.charCodeAt(ee++),$=P.charCodeAt(ee++),Z=P.charCodeAt(ee++),W=O>>2,K=(3&O)<<4|$>>4,Q=(15&$)<<2|Z>>6,G=63&Z,isNaN($)?Q=G=64:isNaN(Z)&&(G=64),F=F+R.charAt(W)+R.charAt(K)+R.charAt(Q)+R.charAt(G);return F},D.decode=function(P){var F='',O,$,Z,W,K,Q,G,ee=0;for(P=P.replace(/[^A-Za-z0-9\+\/\=]/g,'');ee<P.length;)W=R.indexOf(P.charAt(ee++)),K=R.indexOf(P.charAt(ee++)),Q=R.indexOf(P.charAt(ee++)),G=R.indexOf(P.charAt(ee++)),O=W<<2|K>>4,$=(15&K)<<4|Q>>2,Z=(3&Q)<<6|G,F+=_StringfromCharCode(O),64!=Q&&(F+=_StringfromCharCode($)),64!=G&&(F+=_StringfromCharCode(Z));return F}},function(E,D,I){'use strict';D.STORE={magic:'\0\0',compress:function(R){return R},uncompress:function(R){return R},compressInputType:null,uncompressInputType:null},D.DEFLATE=I(83)},function(E,D,I){'use strict';(function(R){E.exports=function(P,T){return new R(P,T)},E.exports.test=function(P){return R.isBuffer(P)}}).call(D,I(27).Buffer)},function(E,D,I){'use strict';var R=I(5),P=I(0),T=I(81),F=I(34),O=I(33),$=I(10),Z=I(11),W=I(31),K=I(12),Q=I(37),G=I(87),ee=I(88),te=function(be){if(be._data instanceof W&&(be._data=be._data.getContent(),be.options.binary=!0,be.options.base64=!1,'uint8array'===P.getTypeOf(be._data))){var ye=be._data;be._data=new Uint8Array(ye.length),0!==ye.length&&be._data.set(ye,0)}return be._data},ne=function(be){var ye=te(be),_e=P.getTypeOf(ye);return'string'===_e?!be.options.binary&&R.nodebuffer?K(ye,'utf-8'):be.asBinary():ye},ae=function(be){var ye=te(this);return null===ye||'undefined'==typeof ye?'':(this.options.base64&&(ye=$.decode(ye)),ye=be&&this.options.binary?xe.utf8decode(ye):P.transformTo('string',ye),be||this.options.binary||(ye=P.transformTo('string',xe.utf8encode(ye))),ye)},se=function(be,ye,_e){this.name=be,this.dir=_e.dir,this.date=_e.date,this.comment=_e.comment,this.unixPermissions=_e.unixPermissions,this.dosPermissions=_e.dosPermissions,this._data=ye,this.options=_e,this._initialMetadata={dir:_e.dir,date:_e.date}};se.prototype={asText:function(){return ae.call(this,!0)},asBinary:function(){return ae.call(this,!1)},asNodeBuffer:function(){var be=ne(this);return P.transformTo('nodebuffer',be)},asUint8Array:function(){var be=ne(this);return P.transformTo('uint8array',be)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var oe=function(be,ye){var _e='',ke;for(ke=0;ke<ye;ke++)_e+=_StringfromCharCode(255&be),be>>>=8;return _e},le=function(be){return be=be||{},!0===be.base64&&(null===be.binary||void 0===be.binary)&&(be.binary=!0),be=P.extend(be,O),be.date=be.date||new Date,null!==be.compression&&(be.compression=be.compression.toUpperCase()),be},de=function(be,ye,_e){var ke=P.getTypeOf(ye),we;if(_e=le(_e),'string'==typeof _e.unixPermissions&&(_e.unixPermissions=parseInt(_e.unixPermissions,8)),_e.unixPermissions&&16384&_e.unixPermissions&&(_e.dir=!0),_e.dosPermissions&&16&_e.dosPermissions&&(_e.dir=!0),_e.dir&&(be=he(be)),_e.createFolders&&(we=ue(be))&&ce.call(this,we,!0),_e.dir||null===ye||'undefined'==typeof ye)_e.base64=!1,_e.binary=!1,ye=null,ke=null;else if('string'===ke)_e.binary&&!_e.base64&&!0!==_e.optimizedBinaryString&&(ye=P.string2binary(ye));else{if(_e.base64=!1,_e.binary=!0,!ke&&!(ye instanceof W))throw new Error('The data of \''+be+'\' is in an unsupported format !');'arraybuffer'===ke&&(ye=P.transformTo('uint8array',ye))}var je=new se(be,ye,_e);return this.files[be]=je,je},ue=function(be){'/'==be.slice(-1)&&(be=be.substring(0,be.length-1));var ye=be.lastIndexOf('/');return 0<ye?be.substring(0,ye):''},he=function(be){return'/'!=be.slice(-1)&&(be+='/'),be},ce=function(be,ye){return ye='undefined'!=typeof ye&&ye,be=he(be),this.files[be]||de.call(this,be,null,{dir:!0,createFolders:ye}),this.files[be]},ge=function(be,ye,_e){var ke=new W,we;return be._data instanceof W?(ke.uncompressedSize=be._data.uncompressedSize,ke.crc32=be._data.crc32,0===ke.uncompressedSize||be.dir?(ye=Z.STORE,ke.compressedContent='',ke.crc32=0):be._data.compressionMethod===ye.magic?ke.compressedContent=be._data.getCompressedContent():(we=be._data.getContent(),ke.compressedContent=ye.compress(P.transformTo(ye.compressInputType,we),_e))):(we=ne(be),(!we||0===we.length||be.dir)&&(ye=Z.STORE,we=''),ke.uncompressedSize=we.length,ke.crc32=T(we),ke.compressedContent=ye.compress(P.transformTo(ye.compressInputType,we),_e)),ke.compressedSize=ke.compressedContent.length,ke.compressionMethod=ye.magic,ke},pe=function(be,ye){var _e=be;return be||(_e=ye?16893:33204),(65535&_e)<<16},me=function(be){return 63&(be||0)},fe=function(be,ye,_e,ke,we,je){var Se=_e.compressedContent,ve=je!==Q.utf8encode,Ce=P.transformTo('string',je(ye.name)),Ee=P.transformTo('string',Q.utf8encode(ye.name)),De=ye.comment||'',Ie=P.transformTo('string',je(De)),Ae=P.transformTo('string',Q.utf8encode(De)),Re=Ee.length!==ye.name.length,Pe=Ae.length!==De.length,Te=ye.options,Me='',Xe='',Ye='',Fe,ze,Ne,Oe;Ne=ye._initialMetadata.dir===ye.dir?Te.dir:ye.dir,Oe=ye._initialMetadata.date===ye.date?Te.date:ye.date;var Le=0,Ue=0;Ne&&(Le|=16),'UNIX'===we?(Ue=798,Le|=pe(ye.unixPermissions,Ne)):(Ue=20,Le|=me(ye.dosPermissions,Ne)),Fe=Oe.getHours(),Fe<<=6,Fe|=Oe.getMinutes(),Fe<<=5,Fe|=Oe.getSeconds()/2,ze=Oe.getFullYear()-1980,ze<<=4,ze|=Oe.getMonth()+1,ze<<=5,ze|=Oe.getDate(),Re&&(Xe=oe(1,1)+oe(T(Ce),4)+Ee,Me+='up'+oe(Xe.length,2)+Xe),Pe&&(Ye=oe(1,1)+oe(this.crc32(Ie),4)+Ae,Me+='uc'+oe(Ye.length,2)+Ye);var Be='';Be+='\n\0',Be+=!ve&&(Re||Pe)?'\0\b':'\0\0',Be+=_e.compressionMethod,Be+=oe(Fe,2),Be+=oe(ze,2),Be+=oe(_e.crc32,4),Be+=oe(_e.compressedSize,4),Be+=oe(_e.uncompressedSize,4),Be+=oe(Ce.length,2),Be+=oe(Me.length,2);var Ve=F.LOCAL_FILE_HEADER+Be+Ce+Me,qe=F.CENTRAL_FILE_HEADER+oe(Ue,2)+Be+oe(Ie.length,2)+'\0\0\0\0'+oe(Le,4)+oe(ke,4)+Ce+Me+Ie;return{fileRecord:Ve,dirRecord:qe,compressedObject:_e}},xe={load:function(){throw new Error('Load method is not defined. Is the file jszip-load.js included ?')},filter:function(be){var ye=[],_e,ke,we,je;for(_e in this.files)this.files.hasOwnProperty(_e)&&(we=this.files[_e],je=new se(we.name,we._data,P.extend(we.options)),ke=_e.slice(this.root.length,_e.length),_e.slice(0,this.root.length)===this.root&&be(ke,je)&&ye.push(je));return ye},file:function(be,ye,_e){if(1===arguments.length){if(P.isRegExp(be)){var ke=be;return this.filter(function(we,je){return!je.dir&&ke.test(we)})}return this.filter(function(we,je){return!je.dir&&we===be})[0]||null}return be=this.root+be,de.call(this,be,ye,_e),this},folder:function(be){if(!be)return this;if(P.isRegExp(be))return this.filter(function(we,je){return je.dir&&be.test(we)});var ye=this.root+be,_e=ce.call(this,ye),ke=this.clone();return ke.root=_e.name,ke},remove:function(be){be=this.root+be;var ye=this.files[be];if(ye||('/'!=be.slice(-1)&&(be+='/'),ye=this.files[be]),ye&&!ye.dir)delete this.files[be];else for(var _e=this.filter(function(we,je){return je.name.slice(0,be.length)===be}),ke=0;ke<_e.length;ke++)delete this.files[_e[ke].name];return this},generate:function(be){be=P.extend(be||{},{base64:!0,compression:'STORE',compressionOptions:null,type:'base64',platform:'DOS',comment:null,mimeType:'application/zip',encodeFileName:Q.utf8encode}),P.checkSupport(be.type),('darwin'===be.platform||'freebsd'===be.platform||'linux'===be.platform||'sunos'===be.platform)&&(be.platform='UNIX'),'win32'===be.platform&&(be.platform='DOS');var ye=[],_e=0,ke=0,Se=P.transformTo('string',be.encodeFileName(be.comment||this.comment||'')),we,je;for(var ve in this.files)if(this.files.hasOwnProperty(ve)){var Ce=this.files[ve],Ee=Ce.options.compression||be.compression.toUpperCase(),De=Z[Ee];if(!De)throw new Error(Ee+' is not a valid compression method !');var Ie=Ce.options.compressionOptions||be.compressionOptions||{},Ae=ge.call(this,Ce,De,Ie),Re=fe.call(this,ve,Ce,Ae,_e,be.platform,be.encodeFileName);_e+=Re.fileRecord.length+Ae.compressedSize,ke+=Re.dirRecord.length,ye.push(Re)}var Pe='';Pe=F.CENTRAL_DIRECTORY_END+'\0\0\0\0'+oe(ye.length,2)+oe(ye.length,2)+oe(ke,4)+oe(_e,4)+oe(Se.length,2)+Se;var Te=be.type.toLowerCase();for(we='uint8array'===Te||'arraybuffer'===Te||'blob'===Te||'nodebuffer'===Te?new ee(_e+ke+Pe.length):new G(_e+ke+Pe.length),je=0;je<ye.length;je++)we.append(ye[je].fileRecord),we.append(ye[je].compressedObject.compressedContent);for(je=0;je<ye.length;je++)we.append(ye[je].dirRecord);we.append(Pe);var Fe=we.finalize();switch(be.type.toLowerCase()){case'uint8array':case'arraybuffer':case'nodebuffer':return P.transformTo(be.type.toLowerCase(),Fe);case'blob':return P.arrayBuffer2Blob(P.transformTo('arraybuffer',Fe),be.mimeType);case'base64':return be.base64?$.encode(Fe):Fe;default:return Fe;}},crc32:function(be,ye){return T(be,ye)},utf8encode:function(be){return P.transformTo('string',Q.utf8encode(be))},utf8decode:function(be){return Q.utf8decode(be)}};E.exports=xe},function(E,D,I){'use strict';D.FFTUtils=I(96),D.FFT=I(40)},function(E,D,I){'use strict';function R(){this.children=[],this.distance=-1,this.index=[]}const P=I(75);R.prototype.cut=function(T){if(0>T)throw new RangeError('Threshold too small');var F=new R;F.children=this.children,F.distance=this.distance,F.index=this.index;for(var O=[F],$=[],Z;0<O.length;)Z=O.shift(),T>=Z.distance?$.push(Z):O=O.concat(Z.children);return $},R.prototype.group=function(T){if(!_NumberisInteger(T)||1>T)throw new RangeError('Number of groups must be a positive integer');const F=new P(function(Z,W){return W.distance-Z.distance});for(F.push(this);F.size()<T;){var O=F.pop();if(0===O.children.length)break;O.children.forEach((Z)=>F.push(Z))}var $=new R;return $.children=F.toArray(),$.distance=this.distance,$},R.prototype.traverse=function(T){function F(O,$){if($(O),O.children)for(var Z=O.children.length-1;0<=Z;Z--)F(O.children[Z],$)}F(this,T)},E.exports=R},function(E,D){'use strict';D.hypotenuse=function(P,T){var F;return _Mathabs(P)>_Mathabs(T)?(F=T/P,_Mathabs(P)*_Mathsqrt(1+F*F)):0===T?0:(F=P/T,_Mathabs(T)*_Mathsqrt(1+F*F))}},function(E){E.exports=function(R,P){R=R||0;for(var T=Array(R),F=0;F<R;F++)T[F]=P;return T}},function(E,D){'use strict';D.hypotenuse=function(P,T){var F;return _Mathabs(P)>_Mathabs(T)?(F=T/P,_Mathabs(P)*_Mathsqrt(1+F*F)):0===T?0:(F=P/T,_Mathabs(T)*_Mathsqrt(1+F*F))},D.getEmpty2DArray=function(R,P){for(var T=Array(R),F=0;F<R;F++)T[F]=Array(P);return T},D.getFilled2DArray=function(R,P,T){for(var F=Array(R),O=0;O<R;O++){F[O]=Array(P);for(var $=0;$<P;$++)F[O][$]=T}return F}},function(E,D,I){'use strict';E.exports=I(1).Matrix,E.exports.Decompositions=E.exports.DC=I(124)},function(E){'use strict';E.exports={0:'',1:'stream end',2:'need dictionary','-1':'file error','-2':'stream error','-3':'data error','-4':'insufficient memory','-5':'buffer error','-6':'incompatible version'}},function(E,D,I){'use strict';var R=I(24),P=I(71),T=I(72),F=I(73);class O extends Array{constructor($){if(Array.isArray($)){super($.length);for(var Z=0;Z<$.length;Z++)this[Z]=$[Z]}else'number'==typeof $?super($):super()}static fromPrediction($,Z){Z=Object.assign({},{lineWidth:1,frequency:400,nucleus:'1H'},Z);var W=$.length,K=Array(W),Q,G,ee,te,ne,ae,se;for(Q=0;Q<W;Q++)K[$[Q].diaIDs[0]]?K[$[Q].diaIDs[0]].push(Q):K[$[Q].diaIDs[0]]=[Q];var oe=Object.keys(K),le=Array(oe.length);for(Q=0;Q<oe.length;Q++){if(ee=K[oe[Q]],te=$[ee[0]],ne=0,se=te.j,se)for(G=0;G<se.length;G++)ne+=se[G].coupling;for(ne+=2*Z.lineWidth,ne/=Z.frequency,le[Q]={from:te.delta-ne,to:te.delta+ne,integral:1,signal:[$[ee[0]]]},G=1;G<ee.length;G++)le[Q].signal.push($[ee[G]]),le[Q].integral++}for(Q=0;Q<le.length;Q++)for(le[Q]._highlight=le[Q].signal[0].diaIDs,ae=(le[Q].from+le[Q].to)/2,ne=_Mathabs(le[Q].from-le[Q].to),G=le.length-1;G>Q;G--)_Mathabs(ae-(le[G].from+le[G].to)/2)<=_Mathabs(ne+_Mathabs(le[G].from-le[G].to))/2&&(le[Q].from=_Mathmin(le[Q].from,le[G].from),le[Q].to=_Mathmax(le[Q].to,le[G].to),le[Q].integral+=le[G].integral,le[Q]._highlight.push(le[G].signal[0].diaIDs[0]),le.splice(G,1),G=le.length-1,ae=(le[Q].from+le[Q].to)/2,ne=_Mathabs(le[Q].from-le[Q].to));return new O(le)}static fromSpectrum($,Z){return this.options=Object.assign({},{nH:99,clean:!0,realTop:!1,thresholdFactor:1,compile:!0,integralType:'sum',optimize:!0,idPrefix:'',format:'new',frequencyCluster:16},Z),new O(R($,this.options))}updateMultiplicity(){for(var $=0,Z;$<this.length;$++){Z=this[$];for(var W=0,K;W<Z.signal.length;W++)if(K=Z.signal[W],K.j&&!K.multiplicity){K.multiplicity='';for(var Q=0;Q<K.j.length;Q++)K.multiplicity+=K.j[Q].multiplicity}}return this}updateIntegrals($){var Z=$.factor||1,W;if($.sum){var K=$.sum||1,Q=0;for(W=0;W<this.length;W++)Q+=this[W].integral;Z=K/Q}for(W=0;W<this.length;W++)this[W].integral*=Z;return this}getVector($){return T(this.getPeakList(),$)}getPeakList(){var $=[],Z,W;for(Z=0;Z<this.length;Z++){var K=this[Z];for(W=0;W<K.signal.length;W++)$=$.concat(K.signal[W].peak)}return $}getACS($){return P(this,$)}getAnnotations($){return F.annotations1D(this,$)}}E.exports=O},function(E,D,I){'use strict';E.exports.fourierTransform=I(62),E.exports.zeroFilling=I(65),E.exports.apodization=I(60),E.exports.phaseCorrection=I(63),E.exports.digitalFilter=I(61)},function(E){'use strict';function R(K,Q,G,ee){var te=T(K,Q,G,-ee[0],!0),ne=0,ae=null,se=null;0>te&&(ae={nucleusX:G.nucleusX,nucleusY:G.nucleusY},ae.resolutionX=G.resolutionX,ae.resolutionY=G.resolutionY,ae.shiftX=G.shiftY,ae.shiftY=G.shiftX,ae.peaks=[{x:G.shiftY,y:G.shiftX,z:1}],K.push(ae),se=[-ee[0],ee[1]],Q.push(se),ne++);var oe=0,le=!1,de=!1,ue;for(oe=K.length-1;0<=oe;oe--)ue=K[oe],0===Q[oe][0]&&(_Mathabs(ue.shiftX-G.shiftX)<Z&&(le=!0),_Mathabs(ue.shiftY-G.shiftY)<Z&&(de=!0));return!1==le&&(ae={nucleusX:G.nucleusX,nucleusY:G.nucleusY},ae.resolutionX=G.resolutionX,ae.resolutionY=G.resolutionY,ae.shiftX=G.shiftX,ae.shiftY=G.shiftX,ae.peaks=[{x:G.shiftX,y:G.shiftX,z:1}],K.push(ae),se=[0,ee[1]],Q.push(se),ne++),!1==de&&(ae={nucleusX:G.nucleusX,nucleusY:G.nucleusY},ae.resolutionX=G.resolutionX,ae.resolutionY=G.resolutionY,ae.shiftX=G.shiftY,ae.shiftY=G.shiftY,ae.peaks=[{x:G.shiftY,y:G.shiftY,z:1}],K.push(ae),se=[0,ee[1]],Q.push(se),ne++),ne}function P(K,Q,G,ee){var te=0,ne=0,ae=4*G.shiftX,se=[],oe=[],le;for(ne=K.length-1;0<=ne;ne--)le=K[ne],0!==Q[ne][0]&&(_Mathabs(le.shiftX-G.shiftX)<Z?(te++,ee&&Q[ne][1]++,se.push(ne),ae+=le.shiftX):_Mathabs(le.shiftY-G.shiftY)<Z&&(te++,ee&&Q[ne][1]++,oe.push(ne),ae+=le.shiftY));if(ae/=se.length+oe.length+4,0<se.length)for(ne=se.length-1;0<=ne;ne--)K[se[ne]].shiftX=ae;if(0<oe.length)for(ne=oe.length-1;0<=ne;ne--)K[oe[ne]].shiftY=ae;return G.shiftX=ae,G.shiftY=ae,te}function T(K,Q,G,ee,te){for(var ne=K.length-1;0<=ne;ne--)if(Q[ne][0]===ee&&O(G,K[ne],te)<W){if(!te){var ae=(K[ne].shiftX+G.shiftX)/2,se=(K[ne].shiftY+G.shiftY)/2;K[ne].shiftX=ae,K[ne].shiftY=se,G.shiftX=ae,G.shiftY=se}else{var oe=G.shiftX,le=K[ne].shiftX;K[ne].shiftY=oe,G.shiftY=le}return ne}return-1}function F(K){for(var Q=Array(K.length),G=K.length-1;0<=G;G--)if(Q[G]=[0,0],_Mathabs(K[G].shiftX-K[G].shiftY)<=Z){Q[G][1]=1;var ee=(2*K[G].shiftX+K[G].shiftY)/3;K[G].shiftX=ee,K[G].shiftY=ee}else Q[G][0]=0<K[G].shiftX-K[G].shiftY?1:-1;return Q}function O(K,Q,G){return G?_Mathsqrt(_Mathpow(K.shiftX-Q.shiftY,2)+_Mathpow(K.shiftY-Q.shiftX,2)):_Mathsqrt(_Mathpow(K.shiftX-Q.shiftX,2)+_Mathpow(K.shiftY-Q.shiftY,2))}function $(K,Q){var G=0,ee=0,te,ne;for(te=0;te<K.length;te++){var ae=K[te];for(ne=0;ne<Q.length;ne++)G=(Q[ne].startX+Q[ne].stopX)/2,ee=_Mathabs(Q[ne].startX-Q[ne].stopX)/2,ae.nucleusX===Q[ne].nucleus&&_Mathabs(ae.shiftX-G)<=ee&&ae._highlight.push(Q[ne]._highlight[0]),ae.nucleusY===Q[ne].nucleus&&_Mathabs(ae.shiftY-G)<=ee&&ae._highlight.push(Q[ne]._highlight[0])}}var Z=0.05,W=0.05;E.exports={clean:function(Q,G){var ee=Number.NEGATIVE_INFINITY,te;for(te=Q.length-1;0<=te;te--)_Mathabs(Q[te].z)>ee&&(ee=_Mathabs(Q[te].z));for(ee*=G,te=Q.length-1;0<=te;te--)_Mathabs(Q[te].z)<ee&&Q.splice(te,1);return Q},enhanceSymmetry:function(Q){var G=F(Q),ee=Q,te,ne,ae,se;for(te=ee.length-1;0<=te;te--)se=ee[te],1<se.peaks.length&&G[te][1]++,1===G[te][0]&&(ae=T(ee,G,se,-1,!0),0<=ae&&(G[te][1]+=2,G[ae][1]+=2));for(te=ee.length-1;0<=te;te--)se=ee[te],0===G[te][0]&&(ne=P(ee,G,se,!0),G[te][1]+=ne);var oe=0;for(te=ee.length-1;0<=te;te--)0!==G[te][0]&&2<G[te][1]&&(oe++,oe+=R(ee,G,ee[te],G[te])),2<=G[te][1]&&0===G[te][0]&&oe++;var le=Array(oe);for(oe--,te=ee.length-1;0<=te;te--)(0!==G[te][0]&&2<G[te][1]||0===G[te][0]&&1<G[te][1])&&(le[oe--]=ee[te]);return le},alignDimensions:function(Q,G){for(var ee=0,te;ee<G.length;ee++)te=G[ee],te&&$(Q,te)}}},function(E,D,I){'use strict';function P(O,$){for(var Z=O.length-1;0<=Z;Z--)_Mathabs(O[Z].y)<$&&O.splice(Z,1);return O}var T=I(98),F={thresholdFactor:1,optimize:!1,minMaxRatio:0.01,broadRatio:2.5e-4,smoothY:!0,nL:4,functionType:'gaussian',broadWidth:0.25,sgOptions:{windowSize:9,polynomial:3}};E.exports=function(O,$){var Z=Object.assign({},F,$),W=_Mathabs(O.getNoiseLevel())*Z.thresholdFactor,K=O.getXYData();Z.from&&Z.to&&(K=O.getVector(Z.from,Z.to));var Q=T.gsd(K[0],K[1],Z);return Z.broadWidth&&(Q=T.post.joinBroadPeaks(Q,{width:Z.broadWidth})),Z.optimize&&(Q=T.post.optimizePeaks(Q,K[0],K[1],Z.nL,Z.functionType)),P(Q,W)}},function(E){E.exports=function(I,R,P,T,F){var O,$;if(void 0===T)T=0;else if(T|=0,0>T||T>=I.length)throw new RangeError('invalid lower bound');if(void 0===F)F=I.length-1;else if(F|=0,F<T||F>=I.length)throw new RangeError('invalid upper bound');for(;T<=F;)if(O=T+(F-T>>1),$=+P(I[O],R,O,I),0>$)T=O+1;else if(0<$)F=O-1;else return O;return~T}},function(E,D,I){'use strict';function P(se,oe){oe=oe||{};var le=new Date,de;if(se.ser||se['2rr'])de=F(se,oe);else if(se['1r']||se['1i']||se.fid)de=T(se,oe);else throw new RangeError('The current files are invalid');de.twoD&&!oe.noContours&&(K(de),de.profiling&&de.profiling.push({action:'Finished countour plot calculation',time:new Date-le}),!oe.keepSpectra&&delete de.spectra);var ue=de.spectra;if(oe.xy&&0<ue.length)for(var he=0,ce;he<ue.length;he++)if(ce=ue[he],0<ce.data.length)for(var ge=0;ge<ce.data.length;ge++){for(var pe=ce.data[ge],me={x:Array(pe.length/2),y:Array(pe.length/2)},fe=0;fe<pe.length;fe+=2)me.x[fe/2]=pe[fe],me.y[fe/2]=pe[fe+1];ce.data[ge]=me}return de}function T(se,oe){for(var le=$(se.procs,oe),de=$(se.acqus,oe),ue=Object.keys(de.info),he=0,ce;he<ue.length;he++)ce=ue[he],void 0===le.info[ce]&&(le.info[ce]=de.info[ce]);return se['1r']||se['1i']?(se['1r']&&O(se['1r'],le,'1r',!0),se['1i']&&O(se['1i'],le,'1i',!1)):se.fid&&Z(se.fid,le),le}function F(se,oe){var le,de,he;if(se['2rr']){for(var ce=$(se.procs,oe),ge=$(se.acqus,oe),pe=Object.keys(ge.info),me=0,fe;me<pe.length;me++)fe=pe[me],void 0===ce.info[fe]&&(ce.info[fe]=ge.info[fe]);ge=$(se.proc2s,oe),ce.info.nbSubSpectra=ge.info.$SI=parseInt(ge.info.$SI),le=ge.info.$SF=parseFloat(ge.info.$SF),de=ge.info.$SWP=parseFloat(ge.info.$SWP),he=ge.info.$OFFSET=parseFloat(ge.info.$OFFSET)}else se.ser&&(ce=$(se.acqus,oe),ge=$(se.acqu2s,oe),ce.info.nbSubSpectra=ge.info.$SI=parseInt(ge.info.$TD),ce.info.$SI=parseInt(ce.info.$TD),de=ge.info.$SW,ce.info.$SWP=ce.info.$SWH,ce.info.$SF=parseFloat(ge.info.$SFO1),ce.info.$OFFSET=0,le=ge.info.$SFO1=parseFloat(ge.info.$SFO1),le=1,he=0,ce.info.$AXNUC=ce.info.$NUC1,ge.info.$AXNUC=ge.info.$NUC1);ce.info.firstY=he,ce.info.lastY=he-de/le,ce.info.$BF2=le,ce.info.$SFO1=le;var xe=ce.info.nbSubSpectra,be=ce.info.firstY,ye=(ce.info.lastY-ce.info.firstY)/(xe-1);se['2rr']?O(se['2rr'],ce,'2rr',!0):se.ser&&Z(se.ser,ce,'ser',!0);for(var me=0;me<xe;me++)be+=ye,ce.spectra[me].pageValue=be;se.ser?'TYPE_2DNMR_FID':'TYPE_2DNMR_SPECTRUM';return ce.info['2D_Y_NUCLEUS']=ge.info.$AXNUC,ce.info['2D_X_NUCLEUS']=ce.info.$AXNUC,ce.info['2D_Y_FRECUENCY']=le,ce.info['2D_Y_OFFSET']=he,ce.info['2D_X_FRECUENCY']=ce.info.$SF,ce.info['2D_X_OFFSET']=ce.info.$OFFSET,ce.twoD=!0,ce}function O(se,oe,le,de){var ue=oe.info.$SI=parseInt(oe.info.$SI),he=parseFloat(oe.info.$SWP),ce=parseFloat(oe.info.$SF),ge=ce,pe=oe.shiftOffsetVal;oe.info.observeFrequency=ce,oe.info.$BF1=ge,oe.info.$SFO1=ce,oe.info.brukerReference=ge;var me=parseInt(oe.info.$BYTORDP);me=me?0:1;var fe=oe.info.nbSubSpectra?oe.info.nbSubSpectra:1;me?se.setLittleEndian():se.setBigEndian();for(var xe=0;xe<fe;xe++){var be={dataType:'NMR Spectrum',dataTable:'(X++(R..R))',nbPoints:ue,firstX:pe,lastX:pe-he/ce,xUnit:'PPM',yUnit:'Arbitrary',data:[Array(2*ue)],isXYdata:!0,observeFrequency:ce,title:oe.info.TITLE,deltaX:-(he/ce)/(ue-1)},ye=pe,_e=be.deltaX;if(de)for(var ke=0;ke<ue;++ke)be.data[0][2*ke]=ye,be.data[0][2*ke+1]=se.readInt32(),(null===be.data[0][2*ke+1]||isNaN(be.data[0][2*ke+1]))&&(be.data[0][2*ke+1]=0),ye+=_e;else for(ke=ue-1;0<=ke;--ke)be.data[0][2*ke]=ye,be.data[0][2*ke+1]=se.readInt32(),(null===be.data[0][2*ke+1]||isNaN(be.data[0][2*ke+1]))&&(be.data[0][2*ke+1]=0),ye+=_e;oe.spectra.push(be)}}function $(se,oe){var le=/.*/;return oe.keepRecordsRegExp&&(le=oe.keepRecordsRegExp),G.convert(se,{keepRecordsRegExp:le})}function Z(se,oe){var le=oe.info.$TD=parseInt(oe.info.$TD),de=oe.info.$SWH=parseFloat(oe.info.$SWH),ue=oe.info.$SW=parseFloat(oe.info.$SW),he=oe.info.$SFO1=parseFloat(oe.info.$SFO1),ce=parseFloat(oe.info.$BF1);oe.info.$BF1=ce;var ge=ue,pe=ge/(le-1),me=parseInt(oe.info.$BYTORDP);me=me?0:1,me?se.setLittleEndian():se.setBigEndian();var fe=oe.info.nbSubSpectra?oe.info.nbSubSpectra:1;oe.spectra=Array(fe);for(var xe=0,be;xe<fe/2;xe++){be={dataType:'NMR FID',dataTable:'(X++(R..R))',nbPoints:le,firstX:0,lastX:ge,nucleus:oe.info.$NUC1?oe.info.$NUC1:void 0,xUnit:'Sec',yUnit:'Arbitrary',data:[Array(2*le)],isXYdata:!0,observeFrequency:he,title:oe.info.TITLE,deltaX:pe},oe.spectra[2*xe]=be,be={dataType:'NMR FID',dataTable:'(X++(I..I))',nbPoints:le,firstX:0,lastX:ge,nucleus:oe.info.$NUC1?oe.info.$NUC1:void 0,xUnit:'Sec',yUnit:'Arbitrary',data:[Array(2*le)],isXYdata:!0,observeFrequency:he,title:oe.info.TITLE,deltaX:pe},oe.spectra[2*xe+1]=be;for(var ye=0,ke=0,_e;se.available(8)&&ke<le;ke++,ye=ke*pe)_e=se.readInt32(),(null===_e||isNaN(_e))&&(_e=0),oe.spectra[2*xe].data[0][2*ke+1]=_e,oe.spectra[2*xe].data[0][2*ke]=ye,_e=se.readInt32(),(null===_e||isNaN(_e))&&(_e=0),oe.spectra[2*xe+1].data[0][2*ke+1]=_e,oe.spectra[2*xe+1].data[0][2*ke]=ye;for(;ke<le;ke++,ye=ke*pe)oe.spectra[2*xe].data[0][2*ke+1]=0,oe.spectra[2*xe].data[0][2*ke]=ye,oe.spectra[2*xe+1].data[0][2*ke+1]=0,oe.spectra[2*xe+1].data[0][2*ke]=ye}}function W(se){for(var oe=0,le=se[0].data[0][0],de=le,ue=se.length,he=se[0].data[0].length/2,ce=Array(ue),ge=0;ge<ue;ge++){ce[ge]=Array(he);for(var pe=0;pe<he;pe++)ce[ge][pe]=se[ge].data[0][2*pe+1],ce[ge][pe]<le&&(le=se[ge].data[0][2*pe+1]),ce[ge][pe]>de&&(de=se[ge].data[0][2*pe+1]),0!==ge&&0!==pe&&(oe+=_Mathabs(ce[ge][pe]-ce[ge][pe-1])+_Mathabs(ce[ge][pe]-ce[ge-1][pe]))}return{z:ce,minX:se[0].data[0][0],maxX:se[0].data[0][se[0].data[0].length-2],minY:se[0].pageValue,maxY:se[ue-1].pageValue,minZ:le,maxZ:de,noise:oe/(2*((ue-1)*(he-1)))}}function K(se){var oe=W(se.spectra);se.contourLines=Q(oe),delete oe.z,se.minMax=oe}function Q(se){for(var le=se.noise,de=se.z,ue=[],he=7,ce=new Float32Array(4),ge=[],pe=de.length,me=de[0].length,_e=se.minX,ke=se.maxX,we=(ke-_e)/(me-1),je=se.minY,Se=se.maxY,ve=(Se-je)/(pe-1),Ce=se.minZ,Ee=se.maxZ,Ie=0,fe,xe,be,ye,De,Ae;Ie<2*he;Ie++){Ae={},ue.push(Ae);var Re=Ie%2;De=0==Re?(Ee-5*le)*_Mathexp(Ie/2-he)+5*le:-(Ee-5*le)*_Mathexp(Ie/2-he)-5*le;var Pe=[];if(Ae.zValue=De,Ae.lines=Pe,!(De<=Ce||De>=Ee))for(var Te=0;Te<pe-1;Te++)for(var Fe=0;Fe<me-1;Fe++){ce[0]=de[Te][Fe],ce[1]=de[Te][Fe+1],ce[2]=de[Te+1][Fe],ce[3]=de[Te+1][Fe+1];for(var ze=0;4>ze;ze++)ge[ze]=ce[ze]>De;ge[0]!==ge[1]&&ge[0]!==ge[2]&&(fe=Fe+(De-ce[0])/(ce[1]-ce[0]),xe=Te,be=Fe,ye=Te+(De-ce[0])/(ce[2]-ce[0]),Pe.push(fe*we+_e,xe*ve+je,be*we+_e,ye*ve+je)),ge[3]!==ge[1]&&ge[3]!==ge[2]&&(fe=Fe+1,xe=Te+1-(De-ce[3])/(ce[1]-ce[3]),be=Fe+1-(De-ce[3])/(ce[2]-ce[3]),ye=Te+1,Pe.push(fe*we+_e,xe*ve+je,be*we+_e,ye*ve+je)),ge[1]!==ge[2]&&(fe=Fe+1-(De-ce[1])/(ce[2]-ce[1]),xe=Te+(De-ce[1])/(ce[2]-ce[1]),ge[1]!==ge[0]&&(be=Fe+1-(De-ce[1])/(ce[0]-ce[1]),ye=Te,Pe.push(fe*we+_e,xe*ve+je,be*we+_e,ye*ve+je)),ge[2]!==ge[0]&&(be=Fe,ye=Te+1-(De-ce[2])/(ce[0]-ce[2]),Pe.push(fe*we+_e,xe*ve+je,be*we+_e,ye*ve+je)),ge[1]!==ge[3]&&(be=Fe+1,ye=Te+(De-ce[1])/(ce[3]-ce[1]),Pe.push(fe*we+_e,xe*ve+je,be*we+_e,ye*ve+je)),ge[2]!==ge[3]&&(be=Fe+(De-ce[2])/(ce[3]-ce[2]),ye=Te+1,Pe.push(fe*we+_e,xe*ve+je,be*we+_e,ye*ve+je)))}}return{minX:se.minX,maxX:se.maxX,minY:se.minY,maxY:se.maxY,segments:ue}}const G=I(29),ee=I(78),te=I(84);var ne=1,ae=2;E.exports={convertZip:function(se,oe){oe=oe||{};var le=new te;le.load(se,oe);for(var de={ser:ne,fid:ne,acqus:ae,acqu2s:ae,procs:ae,proc2s:ae,'1r':ne,'1i':ne,'2rr':ne},ue=le.filter(function(_e){return 0<=_e.indexOf('ser')||0<=_e.indexOf('fid')||0<=_e.indexOf('1r')||0<=_e.indexOf('2rr')}),he=Array(ue.length),ce=0;ce<ue.length;++ce){var ge=ue[ce].name.length,pe=ue[ce].name;pe=pe.substr(0,pe.lastIndexOf('/')+1);var me=le.folder(pe),fe=me.filter(function(_e){return!!de[_e]}),xe={};0<=pe.indexOf('pdata')&&(xe.acqus=le.file(pe.replace(/pdata\/[0-9]\//,'acqus')).asText());for(var be=0;be<fe.length;++be){var ye=fe[be].name.lastIndexOf('/'),pe=fe[be].name.substr(ye+1);xe[pe]=de[pe]===ne?new ee(fe[be].asArrayBuffer()):fe[be].asText()}he[ce]={filename:ue[ce].name,value:P(xe,oe)}}return he},converFolder:P}},function(E,D,I){'use strict';(function(R){function T(){return O.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function F(qe,$e){if(T()<$e)throw new RangeError('Invalid typed array length');return O.TYPED_ARRAY_SUPPORT?(qe=new Uint8Array($e),qe.__proto__=O.prototype):(null===qe&&(qe=new O($e)),qe.length=$e),qe}function O(qe,$e,Ze){if(!O.TYPED_ARRAY_SUPPORT&&!(this instanceof O))return new O(qe,$e,Ze);if('number'==typeof qe){if('string'==typeof $e)throw new Error('If encoding is specified then the first argument must be a string');return K(this,qe)}return $(this,qe,$e,Ze)}function $(qe,$e,Ze,We){if('number'==typeof $e)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&$e instanceof ArrayBuffer?ee(qe,$e,Ze,We):'string'==typeof $e?Q(qe,$e,Ze):te(qe,$e)}function Z(qe){if('number'!=typeof qe)throw new TypeError('"size" argument must be a number');else if(0>qe)throw new RangeError('"size" argument must not be negative')}function W(qe,$e,Ze,We){return Z($e),0>=$e?F(qe,$e):void 0===Ze?F(qe,$e):'string'==typeof We?F(qe,$e).fill(Ze,We):F(qe,$e).fill(Ze)}function K(qe,$e){if(Z($e),qe=F(qe,0>$e?0:0|ne($e)),!O.TYPED_ARRAY_SUPPORT)for(var Ze=0;Ze<$e;++Ze)qe[Ze]=0;return qe}function Q(qe,$e,Ze){if(('string'!=typeof Ze||''===Ze)&&(Ze='utf8'),!O.isEncoding(Ze))throw new TypeError('"encoding" must be a valid string encoding');var We=0|se($e,Ze);qe=F(qe,We);var He=qe.write($e,Ze);return He!==We&&(qe=qe.slice(0,He)),qe}function G(qe,$e){var Ze=0>$e.length?0:0|ne($e.length);qe=F(qe,Ze);for(var We=0;We<Ze;We+=1)qe[We]=255&$e[We];return qe}function ee(qe,$e,Ze,We){if($e.byteLength,0>Ze||$e.byteLength<Ze)throw new RangeError('\'offset\' is out of bounds');if($e.byteLength<Ze+(We||0))throw new RangeError('\'length\' is out of bounds');return $e=void 0===Ze&&void 0===We?new Uint8Array($e):void 0===We?new Uint8Array($e,Ze):new Uint8Array($e,Ze,We),O.TYPED_ARRAY_SUPPORT?(qe=$e,qe.__proto__=O.prototype):qe=G(qe,$e),qe}function te(qe,$e){if(O.isBuffer($e)){var Ze=0|ne($e.length);return(qe=F(qe,Ze),0===qe.length)?qe:($e.copy(qe,0,0,Ze),qe)}if($e){if('undefined'!=typeof ArrayBuffer&&$e.buffer instanceof ArrayBuffer||'length'in $e)return'number'!=typeof $e.length||Ne($e.length)?F(qe,0):G(qe,$e);if('Buffer'===$e.type&&Ue($e.data))return G(qe,$e.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function ne(qe){if(qe>=T())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+T().toString(16)+' bytes');return 0|qe}function se(qe,$e){if(O.isBuffer(qe))return qe.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(qe)||qe instanceof ArrayBuffer))return qe.byteLength;'string'!=typeof qe&&(qe=''+qe);var Ze=qe.length;if(0===Ze)return 0;for(var We=!1;;)switch($e){case'ascii':case'latin1':case'binary':return Ze;case'utf8':case'utf-8':case void 0:return Fe(qe).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*Ze;case'hex':return Ze>>>1;case'base64':return Xe(qe).length;default:if(We)return Fe(qe).length;$e=(''+$e).toLowerCase(),We=!0;}}function oe(qe,$e,Ze){var We=!1;if((void 0===$e||0>$e)&&($e=0),$e>this.length)return'';if((void 0===Ze||Ze>this.length)&&(Ze=this.length),0>=Ze)return'';if(Ze>>>=0,$e>>>=0,Ze<=$e)return'';for(qe||(qe='utf8');;)switch(qe){case'hex':return we(this,$e,Ze);case'utf8':case'utf-8':return be(this,$e,Ze);case'ascii':return _e(this,$e,Ze);case'latin1':case'binary':return ke(this,$e,Ze);case'base64':return xe(this,$e,Ze);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return je(this,$e,Ze);default:if(We)throw new TypeError('Unknown encoding: '+qe);qe=(qe+'').toLowerCase(),We=!0;}}function le(qe,$e,Ze){var We=qe[$e];qe[$e]=qe[Ze],qe[Ze]=We}function de(qe,$e,Ze,We,He){if(0===qe.length)return-1;if('string'==typeof Ze?(We=Ze,Ze=0):2147483647<Ze?Ze=2147483647:-2147483648>Ze&&(Ze=-2147483648),Ze=+Ze,isNaN(Ze)&&(Ze=He?0:qe.length-1),0>Ze&&(Ze=qe.length+Ze),Ze>=qe.length){if(He)return-1;Ze=qe.length-1}else if(0>Ze)if(He)Ze=0;else return-1;if('string'==typeof $e&&($e=O.from($e,We)),O.isBuffer($e))return 0===$e.length?-1:ue(qe,$e,Ze,We,He);if('number'==typeof $e)return $e&=255,O.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?He?Uint8Array.prototype.indexOf.call(qe,$e,Ze):Uint8Array.prototype.lastIndexOf.call(qe,$e,Ze):ue(qe,[$e],Ze,We,He);throw new TypeError('val must be string, number or Buffer')}function ue(qe,$e,Ze,We,He){function Je(at,st){return 1==Ke?at[st]:at.readUInt16BE(st*Ke)}var Ke=1,Qe=qe.length,Ge=$e.length;if(void 0!==We&&(We=(We+'').toLowerCase(),'ucs2'===We||'ucs-2'===We||'utf16le'===We||'utf-16le'===We)){if(2>qe.length||2>$e.length)return-1;Ke=2,Qe/=2,Ge/=2,Ze/=2}var et;if(He){var tt=-1;for(et=Ze;et<Qe;et++)if(Je(qe,et)!==Je($e,-1==tt?0:et-tt))-1!=tt&&(et-=et-tt),tt=-1;else if(-1==tt&&(tt=et),et-tt+1===Ge)return tt*Ke}else for(Ze+Ge>Qe&&(Ze=Qe-Ge),et=Ze;0<=et;et--){for(var it=!0,nt=0;nt<Ge;nt++)if(Je(qe,et+nt)!==Je($e,nt)){it=!1;break}if(it)return et}return-1}function he(qe,$e,Ze,We){Ze=+Ze||0;var He=qe.length-Ze;We?(We=+We,We>He&&(We=He)):We=He;var Je=$e.length;if(0!=Je%2)throw new TypeError('Invalid hex string');We>Je/2&&(We=Je/2);for(var Ke=0,Qe;Ke<We;++Ke){if(Qe=parseInt($e.substr(2*Ke,2),16),isNaN(Qe))return Ke;qe[Ze+Ke]=Qe}return Ke}function ce(qe,$e,Ze,We){return Ye(Fe($e,qe.length-Ze),qe,Ze,We)}function ge(qe,$e,Ze,We){return Ye(ze($e),qe,Ze,We)}function pe(qe,$e,Ze,We){return ge(qe,$e,Ze,We)}function me(qe,$e,Ze,We){return Ye(Xe($e),qe,Ze,We)}function fe(qe,$e,Ze,We){return Ye(Me($e,qe.length-Ze),qe,Ze,We)}function xe(qe,$e,Ze){return 0===$e&&Ze===qe.length?Oe.fromByteArray(qe):Oe.fromByteArray(qe.slice($e,Ze))}function be(qe,$e,Ze){Ze=_Mathmin(qe.length,Ze);for(var We=[],He=$e;He<Ze;){var Je=qe[He],Ke=null,Qe=239<Je?4:223<Je?3:191<Je?2:1;if(He+Qe<=Ze){var Ge,et,tt,it;1==Qe?128>Je&&(Ke=Je):2==Qe?(Ge=qe[He+1],128==(192&Ge)&&(it=(31&Je)<<6|63&Ge,127<it&&(Ke=it))):3==Qe?(Ge=qe[He+1],et=qe[He+2],128==(192&Ge)&&128==(192&et)&&(it=(15&Je)<<12|(63&Ge)<<6|63&et,2047<it&&(55296>it||57343<it)&&(Ke=it))):4==Qe?(Ge=qe[He+1],et=qe[He+2],tt=qe[He+3],128==(192&Ge)&&128==(192&et)&&128==(192&tt)&&(it=(15&Je)<<18|(63&Ge)<<12|(63&et)<<6|63&tt,65535<it&&1114112>it&&(Ke=it))):void 0}null===Ke?(Ke=65533,Qe=1):65535<Ke&&(Ke-=65536,We.push(55296|1023&Ke>>>10),Ke=56320|1023&Ke),We.push(Ke),He+=Qe}return ye(We)}function ye(qe){var $e=qe.length;if($e<=Be)return _StringfromCharCode.apply(String,qe);for(var Ze='',We=0;We<$e;)Ze+=_StringfromCharCode.apply(String,qe.slice(We,We+=Be));return Ze}function _e(qe,$e,Ze){var We='';Ze=_Mathmin(qe.length,Ze);for(var He=$e;He<Ze;++He)We+=_StringfromCharCode(127&qe[He]);return We}function ke(qe,$e,Ze){var We='';Ze=_Mathmin(qe.length,Ze);for(var He=$e;He<Ze;++He)We+=_StringfromCharCode(qe[He]);return We}function we(qe,$e,Ze){var We=qe.length;(!$e||0>$e)&&($e=0),(!Ze||0>Ze||Ze>We)&&(Ze=We);for(var He='',Je=$e;Je<Ze;++Je)He+=Te(qe[Je]);return He}function je(qe,$e,Ze){for(var We=qe.slice($e,Ze),He='',Je=0;Je<We.length;Je+=2)He+=_StringfromCharCode(We[Je]+256*We[Je+1]);return He}function Se(qe,$e,Ze){if(0!=qe%1||0>qe)throw new RangeError('offset is not uint');if(qe+$e>Ze)throw new RangeError('Trying to access beyond buffer length')}function ve(qe,$e,Ze,We,He,Je){if(!O.isBuffer(qe))throw new TypeError('"buffer" argument must be a Buffer instance');if($e>He||$e<Je)throw new RangeError('"value" argument is out of bounds');if(Ze+We>qe.length)throw new RangeError('Index out of range')}function Ce(qe,$e,Ze,We){0>$e&&($e=65535+$e+1);for(var He=0,Je=_Mathmin(qe.length-Ze,2);He<Je;++He)qe[Ze+He]=($e&255<<8*(We?He:1-He))>>>8*(We?He:1-He)}function Ee(qe,$e,Ze,We){0>$e&&($e=4294967295+$e+1);for(var He=0,Je=_Mathmin(qe.length-Ze,4);He<Je;++He)qe[Ze+He]=255&$e>>>8*(We?He:3-He)}function De(qe,$e,Ze,We){if(Ze+We>qe.length)throw new RangeError('Index out of range');if(0>Ze)throw new RangeError('Index out of range')}function Ie(qe,$e,Ze,We,He){return He||De(qe,$e,Ze,4,3.4028234663852886e38,-3.4028234663852886e38),Le.write(qe,$e,Ze,We,23,4),Ze+4}function Ae(qe,$e,Ze,We,He){return He||De(qe,$e,Ze,8,1.7976931348623157e308,-1.7976931348623157e308),Le.write(qe,$e,Ze,We,52,8),Ze+8}function Re(qe){if(qe=Pe(qe).replace(Ve,''),2>qe.length)return'';for(;0!=qe.length%4;)qe+='=';return qe}function Pe(qe){return qe.trim?qe.trim():qe.replace(/^\s+|\s+$/g,'')}function Te(qe){return 16>qe?'0'+qe.toString(16):qe.toString(16)}function Fe(qe,$e){$e=$e||Infinity;for(var We=qe.length,He=null,Je=[],Ke=0,Ze;Ke<We;++Ke){if(Ze=qe.charCodeAt(Ke),55295<Ze&&57344>Ze){if(!He){if(56319<Ze){-1<($e-=3)&&Je.push(239,191,189);continue}else if(Ke+1===We){-1<($e-=3)&&Je.push(239,191,189);continue}He=Ze;continue}if(56320>Ze){-1<($e-=3)&&Je.push(239,191,189),He=Ze;continue}Ze=(He-55296<<10|Ze-56320)+65536}else He&&-1<($e-=3)&&Je.push(239,191,189);if(He=null,128>Ze){if(0>($e-=1))break;Je.push(Ze)}else if(2048>Ze){if(0>($e-=2))break;Je.push(192|Ze>>6,128|63&Ze)}else if(65536>Ze){if(0>($e-=3))break;Je.push(224|Ze>>12,128|63&Ze>>6,128|63&Ze)}else if(1114112>Ze){if(0>($e-=4))break;Je.push(240|Ze>>18,128|63&Ze>>12,128|63&Ze>>6,128|63&Ze)}else throw new Error('Invalid code point')}return Je}function ze(qe){for(var $e=[],Ze=0;Ze<qe.length;++Ze)$e.push(255&qe.charCodeAt(Ze));return $e}function Me(qe,$e){for(var Je=[],Ke=0,Ze,We,He;Ke<qe.length&&!(0>($e-=2));++Ke)Ze=qe.charCodeAt(Ke),We=Ze>>8,He=Ze%256,Je.push(He),Je.push(We);return Je}function Xe(qe){return Oe.toByteArray(Re(qe))}function Ye(qe,$e,Ze,We){for(var He=0;He<We&&!(He+Ze>=$e.length||He>=qe.length);++He)$e[He+Ze]=qe[He];return He}function Ne(qe){return qe!==qe}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var Oe=I(74),Le=I(77),Ue=I(79);D.Buffer=O,D.SlowBuffer=function(qe){return+qe!=qe&&(qe=0),O.alloc(+qe)},D.INSPECT_MAX_BYTES=50,O.TYPED_ARRAY_SUPPORT=R.TYPED_ARRAY_SUPPORT===void 0?function(){try{var qe=new Uint8Array(1);return qe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===qe.foo()&&'function'==typeof qe.subarray&&0===qe.subarray(1,1).byteLength}catch($e){return!1}}():R.TYPED_ARRAY_SUPPORT,D.kMaxLength=T(),O.poolSize=8192,O._augment=function(qe){return qe.__proto__=O.prototype,qe},O.from=function(qe,$e,Ze){return $(null,qe,$e,Ze)},O.TYPED_ARRAY_SUPPORT&&(O.prototype.__proto__=Uint8Array.prototype,O.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&O[Symbol.species]===O&&Object.defineProperty(O,Symbol.species,{value:null,configurable:!0})),O.alloc=function(qe,$e,Ze){return W(null,qe,$e,Ze)},O.allocUnsafe=function(qe){return K(null,qe)},O.allocUnsafeSlow=function(qe){return K(null,qe)},O.isBuffer=function($e){return!!(null!=$e&&$e._isBuffer)},O.compare=function($e,Ze){if(!O.isBuffer($e)||!O.isBuffer(Ze))throw new TypeError('Arguments must be Buffers');if($e===Ze)return 0;for(var We=$e.length,He=Ze.length,Je=0,Ke=_Mathmin(We,He);Je<Ke;++Je)if($e[Je]!==Ze[Je]){We=$e[Je],He=Ze[Je];break}return We<He?-1:He<We?1:0},O.isEncoding=function($e){switch(($e+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},O.concat=function($e,Ze){if(!Ue($e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===$e.length)return O.alloc(0);var We;if(Ze===void 0)for(Ze=0,We=0;We<$e.length;++We)Ze+=$e[We].length;var He=O.allocUnsafe(Ze),Je=0;for(We=0;We<$e.length;++We){var Ke=$e[We];if(!O.isBuffer(Ke))throw new TypeError('"list" argument must be an Array of Buffers');Ke.copy(He,Je),Je+=Ke.length}return He},O.byteLength=se,O.prototype._isBuffer=!0,O.prototype.swap16=function(){var $e=this.length;if(0!=$e%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var Ze=0;Ze<$e;Ze+=2)le(this,Ze,Ze+1);return this},O.prototype.swap32=function(){var $e=this.length;if(0!=$e%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var Ze=0;Ze<$e;Ze+=4)le(this,Ze,Ze+3),le(this,Ze+1,Ze+2);return this},O.prototype.swap64=function(){var $e=this.length;if(0!=$e%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var Ze=0;Ze<$e;Ze+=8)le(this,Ze,Ze+7),le(this,Ze+1,Ze+6),le(this,Ze+2,Ze+5),le(this,Ze+3,Ze+4);return this},O.prototype.toString=function(){var $e=0|this.length;return 0==$e?'':0===arguments.length?be(this,0,$e):oe.apply(this,arguments)},O.prototype.equals=function($e){if(!O.isBuffer($e))throw new TypeError('Argument must be a Buffer');return this===$e||0===O.compare(this,$e)},O.prototype.inspect=function(){var $e='',Ze=D.INSPECT_MAX_BYTES;return 0<this.length&&($e=this.toString('hex',0,Ze).match(/.{2}/g).join(' '),this.length>Ze&&($e+=' ... ')),'<Buffer '+$e+'>'},O.prototype.compare=function($e,Ze,We,He,Je){if(!O.isBuffer($e))throw new TypeError('Argument must be a Buffer');if(void 0===Ze&&(Ze=0),void 0===We&&(We=$e?$e.length:0),void 0===He&&(He=0),void 0===Je&&(Je=this.length),0>Ze||We>$e.length||0>He||Je>this.length)throw new RangeError('out of range index');if(He>=Je&&Ze>=We)return 0;if(He>=Je)return-1;if(Ze>=We)return 1;if(Ze>>>=0,We>>>=0,He>>>=0,Je>>>=0,this===$e)return 0;for(var Ke=Je-He,Qe=We-Ze,Ge=_Mathmin(Ke,Qe),et=this.slice(He,Je),tt=$e.slice(Ze,We),it=0;it<Ge;++it)if(et[it]!==tt[it]){Ke=et[it],Qe=tt[it];break}return Ke<Qe?-1:Qe<Ke?1:0},O.prototype.includes=function($e,Ze,We){return-1!==this.indexOf($e,Ze,We)},O.prototype.indexOf=function($e,Ze,We){return de(this,$e,Ze,We,!0)},O.prototype.lastIndexOf=function($e,Ze,We){return de(this,$e,Ze,We,!1)},O.prototype.write=function($e,Ze,We,He){if(void 0===Ze)He='utf8',We=this.length,Ze=0;else if(void 0===We&&'string'==typeof Ze)He=Ze,We=this.length,Ze=0;else if(isFinite(Ze))Ze|=0,isFinite(We)?(We|=0,void 0===He&&(He='utf8')):(He=We,We=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var Je=this.length-Ze;if((void 0===We||We>Je)&&(We=Je),0<$e.length&&(0>We||0>Ze)||Ze>this.length)throw new RangeError('Attempt to write outside buffer bounds');He||(He='utf8');for(var Ke=!1;;)switch(He){case'hex':return he(this,$e,Ze,We);case'utf8':case'utf-8':return ce(this,$e,Ze,We);case'ascii':return ge(this,$e,Ze,We);case'latin1':case'binary':return pe(this,$e,Ze,We);case'base64':return me(this,$e,Ze,We);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return fe(this,$e,Ze,We);default:if(Ke)throw new TypeError('Unknown encoding: '+He);He=(''+He).toLowerCase(),Ke=!0;}},O.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var Be=4096;O.prototype.slice=function($e,Ze){var We=this.length;$e=~~$e,Ze=Ze===void 0?We:~~Ze,0>$e?($e+=We,0>$e&&($e=0)):$e>We&&($e=We),0>Ze?(Ze+=We,0>Ze&&(Ze=0)):Ze>We&&(Ze=We),Ze<$e&&(Ze=$e);var He;if(O.TYPED_ARRAY_SUPPORT)He=this.subarray($e,Ze),He.__proto__=O.prototype;else{var Je=Ze-$e;He=new O(Je,void 0);for(var Ke=0;Ke<Je;++Ke)He[Ke]=this[Ke+$e]}return He},O.prototype.readUIntLE=function($e,Ze,We){$e|=0,Ze|=0,We||Se($e,Ze,this.length);for(var He=this[$e],Je=1,Ke=0;++Ke<Ze&&(Je*=256);)He+=this[$e+Ke]*Je;return He},O.prototype.readUIntBE=function($e,Ze,We){$e|=0,Ze|=0,We||Se($e,Ze,this.length);for(var He=this[$e+--Ze],Je=1;0<Ze&&(Je*=256);)He+=this[$e+--Ze]*Je;return He},O.prototype.readUInt8=function($e,Ze){return Ze||Se($e,1,this.length),this[$e]},O.prototype.readUInt16LE=function($e,Ze){return Ze||Se($e,2,this.length),this[$e]|this[$e+1]<<8},O.prototype.readUInt16BE=function($e,Ze){return Ze||Se($e,2,this.length),this[$e]<<8|this[$e+1]},O.prototype.readUInt32LE=function($e,Ze){return Ze||Se($e,4,this.length),(this[$e]|this[$e+1]<<8|this[$e+2]<<16)+16777216*this[$e+3]},O.prototype.readUInt32BE=function($e,Ze){return Ze||Se($e,4,this.length),16777216*this[$e]+(this[$e+1]<<16|this[$e+2]<<8|this[$e+3])},O.prototype.readIntLE=function($e,Ze,We){$e|=0,Ze|=0,We||Se($e,Ze,this.length);for(var He=this[$e],Je=1,Ke=0;++Ke<Ze&&(Je*=256);)He+=this[$e+Ke]*Je;return Je*=128,He>=Je&&(He-=_Mathpow(2,8*Ze)),He},O.prototype.readIntBE=function($e,Ze,We){$e|=0,Ze|=0,We||Se($e,Ze,this.length);for(var He=Ze,Je=1,Ke=this[$e+--He];0<He&&(Je*=256);)Ke+=this[$e+--He]*Je;return Je*=128,Ke>=Je&&(Ke-=_Mathpow(2,8*Ze)),Ke},O.prototype.readInt8=function($e,Ze){return Ze||Se($e,1,this.length),128&this[$e]?-1*(255-this[$e]+1):this[$e]},O.prototype.readInt16LE=function($e,Ze){Ze||Se($e,2,this.length);var We=this[$e]|this[$e+1]<<8;return 32768&We?4294901760|We:We},O.prototype.readInt16BE=function($e,Ze){Ze||Se($e,2,this.length);var We=this[$e+1]|this[$e]<<8;return 32768&We?4294901760|We:We},O.prototype.readInt32LE=function($e,Ze){return Ze||Se($e,4,this.length),this[$e]|this[$e+1]<<8|this[$e+2]<<16|this[$e+3]<<24},O.prototype.readInt32BE=function($e,Ze){return Ze||Se($e,4,this.length),this[$e]<<24|this[$e+1]<<16|this[$e+2]<<8|this[$e+3]},O.prototype.readFloatLE=function($e,Ze){return Ze||Se($e,4,this.length),Le.read(this,$e,!0,23,4)},O.prototype.readFloatBE=function($e,Ze){return Ze||Se($e,4,this.length),Le.read(this,$e,!1,23,4)},O.prototype.readDoubleLE=function($e,Ze){return Ze||Se($e,8,this.length),Le.read(this,$e,!0,52,8)},O.prototype.readDoubleBE=function($e,Ze){return Ze||Se($e,8,this.length),Le.read(this,$e,!1,52,8)},O.prototype.writeUIntLE=function($e,Ze,We,He){if($e=+$e,Ze|=0,We|=0,!He){var Je=_Mathpow(2,8*We)-1;ve(this,$e,Ze,We,Je,0)}var Ke=1,Qe=0;for(this[Ze]=255&$e;++Qe<We&&(Ke*=256);)this[Ze+Qe]=255&$e/Ke;return Ze+We},O.prototype.writeUIntBE=function($e,Ze,We,He){if($e=+$e,Ze|=0,We|=0,!He){var Je=_Mathpow(2,8*We)-1;ve(this,$e,Ze,We,Je,0)}var Ke=We-1,Qe=1;for(this[Ze+Ke]=255&$e;0<=--Ke&&(Qe*=256);)this[Ze+Ke]=255&$e/Qe;return Ze+We},O.prototype.writeUInt8=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,1,255,0),O.TYPED_ARRAY_SUPPORT||($e=_Mathfloor($e)),this[Ze]=255&$e,Ze+1},O.prototype.writeUInt16LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,2,65535,0),O.TYPED_ARRAY_SUPPORT?(this[Ze]=255&$e,this[Ze+1]=$e>>>8):Ce(this,$e,Ze,!0),Ze+2},O.prototype.writeUInt16BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,2,65535,0),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>8,this[Ze+1]=255&$e):Ce(this,$e,Ze,!1),Ze+2},O.prototype.writeUInt32LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,4,4294967295,0),O.TYPED_ARRAY_SUPPORT?(this[Ze+3]=$e>>>24,this[Ze+2]=$e>>>16,this[Ze+1]=$e>>>8,this[Ze]=255&$e):Ee(this,$e,Ze,!0),Ze+4},O.prototype.writeUInt32BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,4,4294967295,0),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>24,this[Ze+1]=$e>>>16,this[Ze+2]=$e>>>8,this[Ze+3]=255&$e):Ee(this,$e,Ze,!1),Ze+4},O.prototype.writeIntLE=function($e,Ze,We,He){if($e=+$e,Ze|=0,!He){var Je=_Mathpow(2,8*We-1);ve(this,$e,Ze,We,Je-1,-Je)}var Ke=0,Qe=1,Ge=0;for(this[Ze]=255&$e;++Ke<We&&(Qe*=256);)0>$e&&0==Ge&&0!==this[Ze+Ke-1]&&(Ge=1),this[Ze+Ke]=255&($e/Qe>>0)-Ge;return Ze+We},O.prototype.writeIntBE=function($e,Ze,We,He){if($e=+$e,Ze|=0,!He){var Je=_Mathpow(2,8*We-1);ve(this,$e,Ze,We,Je-1,-Je)}var Ke=We-1,Qe=1,Ge=0;for(this[Ze+Ke]=255&$e;0<=--Ke&&(Qe*=256);)0>$e&&0==Ge&&0!==this[Ze+Ke+1]&&(Ge=1),this[Ze+Ke]=255&($e/Qe>>0)-Ge;return Ze+We},O.prototype.writeInt8=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,1,127,-128),O.TYPED_ARRAY_SUPPORT||($e=_Mathfloor($e)),0>$e&&($e=255+$e+1),this[Ze]=255&$e,Ze+1},O.prototype.writeInt16LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,2,32767,-32768),O.TYPED_ARRAY_SUPPORT?(this[Ze]=255&$e,this[Ze+1]=$e>>>8):Ce(this,$e,Ze,!0),Ze+2},O.prototype.writeInt16BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,2,32767,-32768),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>8,this[Ze+1]=255&$e):Ce(this,$e,Ze,!1),Ze+2},O.prototype.writeInt32LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,4,2147483647,-2147483648),O.TYPED_ARRAY_SUPPORT?(this[Ze]=255&$e,this[Ze+1]=$e>>>8,this[Ze+2]=$e>>>16,this[Ze+3]=$e>>>24):Ee(this,$e,Ze,!0),Ze+4},O.prototype.writeInt32BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,4,2147483647,-2147483648),0>$e&&($e=4294967295+$e+1),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>24,this[Ze+1]=$e>>>16,this[Ze+2]=$e>>>8,this[Ze+3]=255&$e):Ee(this,$e,Ze,!1),Ze+4},O.prototype.writeFloatLE=function($e,Ze,We){return Ie(this,$e,Ze,!0,We)},O.prototype.writeFloatBE=function($e,Ze,We){return Ie(this,$e,Ze,!1,We)},O.prototype.writeDoubleLE=function($e,Ze,We){return Ae(this,$e,Ze,!0,We)},O.prototype.writeDoubleBE=function($e,Ze,We){return Ae(this,$e,Ze,!1,We)},O.prototype.copy=function($e,Ze,We,He){if(We||(We=0),He||0===He||(He=this.length),Ze>=$e.length&&(Ze=$e.length),Ze||(Ze=0),0<He&&He<We&&(He=We),He===We)return 0;if(0===$e.length||0===this.length)return 0;if(0>Ze)throw new RangeError('targetStart out of bounds');if(0>We||We>=this.length)throw new RangeError('sourceStart out of bounds');if(0>He)throw new RangeError('sourceEnd out of bounds');He>this.length&&(He=this.length),$e.length-Ze<He-We&&(He=$e.length-Ze+We);var Je=He-We,Ke;if(this===$e&&We<Ze&&Ze<He)for(Ke=Je-1;0<=Ke;--Ke)$e[Ke+Ze]=this[Ke+We];else if(1e3>Je||!O.TYPED_ARRAY_SUPPORT)for(Ke=0;Ke<Je;++Ke)$e[Ke+Ze]=this[Ke+We];else Uint8Array.prototype.set.call($e,this.subarray(We,We+Je),Ze);return Je},O.prototype.fill=function($e,Ze,We,He){if('string'==typeof $e){if('string'==typeof Ze?(He=Ze,Ze=0,We=this.length):'string'==typeof We&&(He=We,We=this.length),1===$e.length){var Je=$e.charCodeAt(0);256>Je&&($e=Je)}if(void 0!==He&&'string'!=typeof He)throw new TypeError('encoding must be a string');if('string'==typeof He&&!O.isEncoding(He))throw new TypeError('Unknown encoding: '+He)}else'number'==typeof $e&&($e&=255);if(0>Ze||this.length<Ze||this.length<We)throw new RangeError('Out of range index');if(We<=Ze)return this;Ze>>>=0,We=We===void 0?this.length:We>>>0,$e||($e=0);var Ke;if('number'==typeof $e)for(Ke=Ze;Ke<We;++Ke)this[Ke]=$e;else{var Qe=O.isBuffer($e)?$e:Fe(new O($e,He).toString()),Ge=Qe.length;for(Ke=0;Ke<We-Ze;++Ke)this[Ke+Ze]=Qe[Ke%Ge]}return this};var Ve=/[^+\/0-9A-Za-z-_]/g}).call(D,I(57))},function(E){'use strict';var R=Object.prototype.hasOwnProperty,P=Object.prototype.toString,T=function($){return'function'==typeof Array.isArray?Array.isArray($):'[object Array]'===P.call($)},F=function($){if(!$||'[object Object]'!==P.call($))return!1;var Z=R.call($,'constructor'),W=$.constructor&&$.constructor.prototype&&R.call($.constructor.prototype,'isPrototypeOf');if($.constructor&&!Z&&!W)return!1;for(var K in $);return'undefined'==typeof K||R.call($,K)};E.exports=function O(){var ee=arguments[0],te=1,ne=arguments.length,ae=!1,$,Z,W,K,Q,G;for('boolean'==typeof ee?(ae=ee,ee=arguments[1]||{},te=2):('object'!=typeof ee&&'function'!=typeof ee||null==ee)&&(ee={});te<ne;++te)if($=arguments[te],null!=$)for(Z in $)W=ee[Z],K=$[Z],ee!==K&&(ae&&K&&(F(K)||(Q=T(K)))?(Q?(Q=!1,G=W&&T(W)?W:[]):G=W&&F(W)?W:{},ee[Z]=O(ae,G,K)):'undefined'!=typeof K&&(ee[Z]=K));return ee}},function(E,D,I){'use strict';function R(){function K(fe){for(var xe=fe.length,be=Array(xe),ye=0;ye<xe;ye++)be[ye]=parseFloat(fe[ye]);return be}function Q(){}function ee(fe){return fe.toLowerCase().replace(/[^a-z0-9]/g,'')}function te(fe){return-1!==me.indexOf(fe)}function ne(fe){var xe=fe.spectra,be=xe.length,ye={times:Array(be),series:[{name:'ms',dimension:2,data:Array(be)}]},_e,ke=[];for(_e=0;_e<me.length;_e++){var we=ee(me[_e]);xe[0][we]&&(ke.push(we),ye.series.push({name:we,dimension:1,data:Array(be)}))}for(_e=0;_e<be;_e++){var je=xe[_e];ye.times[_e]=je.pageValue;for(var Se=0;Se<ke.length;Se++)ye.series[Se+1].data[_e]=parseFloat(je[ke[Se]]);je.data&&(ye.series[0].data[_e]=[je.data[0].x,je.data[0].y])}fe.gcms=ye}function ae(fe){var xe=fe.spectra,be=[],ye;for(ye=0;ye<me.length;ye++){var _e=ee(me[ye]);xe[0][_e]&&be.push(_e)}if(0!==be.length){var ke={gc:{},ms:[]};for(ye=0;ye<be.length;ye++)ke.gc[be[ye]]=[];for(ye=0;ye<xe.length;ye++){for(var we=xe[ye],je=0;je<be.length;je++)ke.gc[be[je]].push(we.pageValue),ke.gc[be[je]].push(parseFloat(we[be[je]]));we.data&&(ke.ms[ye]=we.data[0])}fe.gcms=ke}}function se(fe,xe){if(xe.xFactor||(xe.xFactor=1),xe.yFactor||(xe.yFactor=1),xe.observeFrequency&&xe.xUnit&&'HZ'===xe.xUnit.toUpperCase()&&(xe.xUnit='PPM',xe.xFactor/=xe.observeFrequency,xe.firstX/=xe.observeFrequency,xe.lastX/=xe.observeFrequency,xe.deltaX/=xe.observeFrequency),fe.shiftOffsetVal){var be=xe.firstX-fe.shiftOffsetVal;xe.firstX-=be,xe.lastX-=be}}function oe(fe){fe=fe.sort(le);var xe=fe.length;return fe[_Mathfloor(xe/2)]}function le(fe,xe){return fe-xe}function de(fe){for(var xe=fe[0].data[0][0],be=xe,ye=fe.length,_e=fe[0].data[0].length/2,ke=Array(ye),we=0;we<ye;we++){ke[we]=Array(_e);for(var je=fe[we].data[0],Se=0,ve;Se<_e;Se++)ve=je[2*Se+1],ke[we][Se]=ve,ve<xe&&(xe=ve),ve>be&&(be=ve)}return{z:ke,minX:fe[0].data[0][0],maxX:fe[0].data[0][fe[0].data[0].length-2],minY:fe[0].pageValue,maxY:fe[ye-1].pageValue,minZ:xe,maxZ:be,noise:oe(ke[0].map(Math.abs))}}function ue(fe,xe){var be=de(fe.spectra);xe.noContour||(fe.contourLines=he(be,xe),delete be.z),fe.minMax=be}function he(fe,xe){for(var be=fe.noise,ye=fe.z,_e=xe.nbContourLevels||7,ke=void 0===xe.noiseMultiplier?5:xe.noiseMultiplier,Ae=ye.length,Re=ye[0].length,Me=fe.minX,Xe=fe.maxX,Ye=(Xe-Me)/(Re-1),Ne=fe.minY,Oe=fe.maxY,Le=(Oe-Ne)/(Ae-1),Ue=fe.minZ,Be=fe.maxZ,Ve=2*_e,qe=Array(Ve),Ze=0,we,je,Se,ve,Ce,Ee,De,Ie,Pe,Te,Fe,ze,$e,We;Ze<Ve;Ze++){We={},qe[Ze]=We;var He=Ze%2,Je=(Be-ke*be)*_Mathexp((Ze>>1)-_e);$e=0==He?Je+ke*be:0-Je-ke*be;var Ke=[];if(We.zValue=$e,We.lines=Ke,!($e<=Ue||$e>=Be))for(var Qe=0;Qe<Ae-1;Qe++)for(var Ge=ye[Qe],et=ye[Qe+1],tt=0;tt<Re-1;tt++)we=Ge[tt],je=Ge[tt+1],Se=et[tt],ve=et[tt+1],Ce=we>$e,Ee=je>$e,De=Se>$e,Ie=ve>$e,Ce!==Ee&&Ce!==De&&(Pe=tt+($e-we)/(je-we),Te=Qe,Fe=tt,ze=Qe+($e-we)/(Se-we),Ke.push(Pe*Ye+Me),Ke.push(Te*Le+Ne),Ke.push(Fe*Ye+Me),Ke.push(ze*Le+Ne)),Ie!==Ee&&Ie!==De&&(Pe=tt+1,Te=Qe+1-($e-ve)/(je-ve),Fe=tt+1-($e-ve)/(Se-ve),ze=Qe+1,Ke.push(Pe*Ye+Me),Ke.push(Te*Le+Ne),Ke.push(Fe*Ye+Me),Ke.push(ze*Le+Ne)),Ee!==De&&(Pe=(tt+1-($e-je)/(Se-je))*Ye+Me,Te=(Qe+($e-je)/(Se-je))*Le+Ne,Ee!==Ce&&(Fe=tt+1-($e-je)/(we-je),ze=Qe,Ke.push(Pe),Ke.push(Te),Ke.push(Fe*Ye+Me),Ke.push(ze*Le+Ne)),De!==Ce&&(Fe=tt,ze=Qe+1-($e-Se)/(we-Se),Ke.push(Pe),Ke.push(Te),Ke.push(Fe*Ye+Me),Ke.push(ze*Le+Ne)),Ee!==Ie&&(Fe=tt+1,ze=Qe+($e-je)/(ve-je),Ke.push(Pe),Ke.push(Te),Ke.push(Fe*Ye+Me),Ke.push(ze*Le+Ne)),De!==Ie&&(Fe=tt+($e-Se)/(ve-Se),ze=Qe+1,Ke.push(Pe),Ke.push(Te),Ke.push(Fe*Ye+Me),Ke.push(ze*Le+Ne)))}return{minX:fe.minX,maxX:fe.maxX,minY:fe.minY,maxY:fe.maxY,segments:qe}}function ce(fe,xe){var be=fe.yFactor,ye=fe.deltaX;fe.isXYdata=!0;var _e=[];fe.data=[_e];for(var ke=fe.firstX,we=fe.firstY,je=!1,Se=0,ve;Se<xe.length;Se++)if(ve=xe.charCodeAt(Se),13===ve||10===ve)je=!0;else if(je)break;for(var Ce=!0,Ee=!1,De=!1,Ie=0,Ae=!1,Re=!1,Pe=0,Te=!1,Fe=!1,ze=!1,Me=0,ve;Se<=xe.length;Se++)if(ve=Se===xe.length?13:xe.charCodeAt(Se),Re)(13===ve||10===ve)&&(Ce=!0,Re=!1);else if(57>=ve&&48<=ve)Fe=!0,0<Me?Pe+=(ve-48)/_Mathpow(10,Me++):(Pe*=10,Pe+=ve-48);else if(44===ve||46===ve)Fe=!0,Me++;else{if(Fe){if(Ce)Ce=!1,De&&(ze=!0);else if(ze)ze=!1;else{Ee&&(Ie=Te?0-Pe:Pe,De=!0,Ee=!1);for(var Xe=Ae?Pe-1:1,Ye=0;Ye<Xe;Ye++)De?we+=Ie:we=Te?0-Pe:Pe,_e.push(ke),_e.push(we*be),ke+=ye}Te=!1,Pe=0,Me=0,Fe=!1,Ae=!1}if(74>ve&&63<ve)Fe=!0,De=!1,Pe=ve-64;else if(96<ve&&106>ve)Fe=!0,De=!1,Pe=ve-96,Te=!0;else if(115===ve)Fe=!0,Ae=!0,Pe=9;else if(82<ve&&91>ve)Fe=!0,Ae=!0,Pe=ve-82;else if(73<ve&&83>ve)Fe=!0,Ee=!0,Pe=ve-73;else if(105<ve&&115>ve)Fe=!0,Ee=!0,Pe=ve-105,Te=!0;else if(36===ve&&36===xe.charCodeAt(Se+1))Fe=!0,Re=!0;else if(37===ve)Fe=!0,Ee=!0,Pe=0,Te=!1;else if(45===ve){var Ne=xe.charCodeAt(Se+1);(48<=Ne&&57>=Ne||44===Ne||46===Ne)&&(Fe=!0,De=!1,Te=!0)}else(13===ve||10===ve)&&(Ce=!0,Re=!1)}}function ge(fe,xe,be){var ye=/\$\$.*/,_e=/[,\t ]+/;fe.isPeaktable=!0;var ke,we,je,Se,ve,Ce=[];fe.data=[Ce];var Ee=xe.split(/,? *,?[;\r\n]+ */);for(ke=1,we=Ee.length;ke<we;ke++)if(ve=Ee[ke].trim().replace(ye,'').split(_e),0==ve.length%2)for(je=0,Se=ve.length;je<Se;je+=2)Ce.push(parseFloat(ve[je])*fe.xFactor),Ce.push(parseFloat(ve[je+1])*fe.yFactor);else be.logs.push('Format error: '+ve)}var pe=/[, \t]{1,}/,me=['TIC','.RIC','SCANNUMBER'];return function(fe,xe){xe=xe||{};var be=/^$/;xe.keepRecordsRegExp&&(be=xe.keepRecordsRegExp);var ye=!xe.withoutXY,_e=Date.now(),ke={},Re={},we,je,Se,ve,Ce,Ee,De,Ie,Ae;Re.profiling=[],Re.logs=[];var Pe=[];Re.spectra=Pe,Re.info={};var Te=new Q;if('string'!=typeof fe)return Re;for(Re.profiling&&Re.profiling.push({action:'Before split to LDRS',time:Date.now()-_e}),ve=fe.split(/[\r\n]+##/),Re.profiling&&Re.profiling.push({action:'Split to LDRS',time:Date.now()-_e}),ve[0]&&(ve[0]=ve[0].replace(/^[\r\n ]*##/,'')),(Ce=0,Ee=ve.length);Ce<Ee;Ce++){if(we=ve[Ce],De=we.indexOf('='),0<De?(je=we.substring(0,De),Se=we.substring(De+1).trim()):(je=we,Se=''),je=je.replace(/[_ -]/g,'').toUpperCase(),'DATATABLE'===je&&(Ie=Se.indexOf('\n'),-1===Ie&&(Ie=Se.indexOf('\r')),0<Ie)){var Fe=-1,ze=-1;if(Ae=Se.substring(0,Ie).split(/[ ,;\t]+/),0<Ae[0].indexOf('++')){var Me=Ae[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,'$1'),Xe=Ae[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,'$1');Fe=ke.symbol.indexOf(Me),ze=ke.symbol.indexOf(Xe)}-1===Fe&&(Fe=0),-1===ze&&(ze=0),ke.first&&(ke.first.length>Fe&&(Te.firstX=ke.first[Fe]),ke.first.length>ze&&(Te.firstY=ke.first[ze])),ke.last&&(ke.last.length>Fe&&(Te.lastX=ke.last[Fe]),ke.last.length>ze&&(Te.lastY=ke.last[ze])),ke.vardim&&ke.vardim.length>Fe&&(Te.nbPoints=ke.vardim[Fe]),ke.factor&&(ke.factor.length>Fe&&(Te.xFactor=ke.factor[Fe]),ke.factor.length>ze&&(Te.yFactor=ke.factor[ze])),ke.units&&(ke.units.length>Fe&&(Te.xUnit=ke.units[Fe]),ke.units.length>ze&&(Te.yUnit=ke.units[ze])),Te.datatable=Ae[0],Ae[1]&&-1<Ae[1].indexOf('PEAKS')?je='PEAKTABLE':Ae[1]&&(Ae[1].indexOf('XYDATA')||0<Ae[0].indexOf('++'))&&(je='XYDATA',Te.deltaX=(Te.lastX-Te.firstX)/(Te.nbPoints-1))}if('XYDATA'===je){ye&&(se(Re,Te),Se.match(/.*\+\+.*/)?!1===xe.fastParse?O(Te,Se,Re):(!Te.deltaX&&(Te.deltaX=(Te.lastX-Te.firstX)/(Te.nbPoints-1)),ce(Te,Se,Re)):ge(Te,Se,Re),Pe.push(Te),Te=new Q);continue}else if('PEAKTABLE'===je){ye&&(se(Re,Te),ge(Te,Se,Re),Pe.push(Te),Te=new Q);continue}if('TITLE'===je)Te.title=Se;else if('DATATYPE'===je)Te.dataType=Se,-1<Se.indexOf('nD')&&(Re.twoD=!0);else if('NTUPLES'===je)-1<Se.indexOf('nD')&&(Re.twoD=!0);else if('XUNITS'===je)Te.xUnit=Se;else if('YUNITS'===je)Te.yUnit=Se;else if('FIRSTX'===je)Te.firstX=parseFloat(Se);else if('LASTX'===je)Te.lastX=parseFloat(Se);else if('FIRSTY'===je)Te.firstY=parseFloat(Se);else if('LASTY'===je)Te.lastY=parseFloat(Se);else if('NPOINTS'===je)Te.nbPoints=parseFloat(Se);else if('XFACTOR'===je)Te.xFactor=parseFloat(Se);else if('YFACTOR'===je)Te.yFactor=parseFloat(Se);else if('DELTAX'===je)Te.deltaX=parseFloat(Se);else if('.OBSERVEFREQUENCY'===je||'$SFO1'===je)Te.observeFrequency||(Te.observeFrequency=parseFloat(Se));else if('.OBSERVENUCLEUS'===je)Te.xType||(Re.xType=Se.replace(/[^a-zA-Z0-9]/g,''));else if('$SFO2'===je)Re.indirectFrequency||(Re.indirectFrequency=parseFloat(Se));else if('$OFFSET'===je)Re.shiftOffsetNum=0,Re.shiftOffsetVal||(Re.shiftOffsetVal=parseFloat(Se));else if('$REFERENCEPOINT'===je);else if('VARNAME'===je)ke.varname=Se.split(pe);else if('SYMBOL'===je)ke.symbol=Se.split(pe);else if('VARTYPE'===je)ke.vartype=Se.split(pe);else if('VARFORM'===je)ke.varform=Se.split(pe);else if('VARDIM'===je)ke.vardim=K(Se.split(pe));else if('UNITS'===je)ke.units=Se.split(pe);else if('FACTOR'===je)ke.factor=K(Se.split(pe));else if('FIRST'===je)ke.first=K(Se.split(pe));else if('LAST'===je)ke.last=K(Se.split(pe));else if('MIN'===je)ke.min=K(Se.split(pe));else if('MAX'===je)ke.max=K(Se.split(pe));else if('.NUCLEUS'===je)Re.twoD&&(Re.yType=Se.split(pe)[0]);else if('PAGE'===je){Te.page=Se.trim(),Te.pageValue=parseFloat(Se.replace(/^.*=/,'')),Te.pageSymbol=Te.page.replace(/=.*/,'');var Ye=ke.symbol.indexOf(Te.pageSymbol),Ne='';ke.units&&ke.units[Ye]&&(Ne=ke.units[Ye]),Re.indirectFrequency&&'PPM'!==Ne&&(Te.pageValue/=Re.indirectFrequency)}else'RETENTIONTIME'===je?Te.pageValue=parseFloat(Se):te(je)&&(Te[ee(je)]=Se);je.match(be)&&(Re.info[je]=Se.trim())}if(Re.profiling&&Re.profiling.push({action:'Finished parsing',time:Date.now()-_e}),0<Object.keys(ke).length){for(var Oe=[],Le=Object.keys(ke),Ce=0;Ce<Le.length;Ce++)for(var Ue=Le[Ce],Be=ke[Ue],Ve=0;Ve<Be.length;Ve++)Oe[Ve]||(Oe[Ve]={}),Oe[Ve][Ue]=Be[Ve];Re.ntuples=Oe}Re.twoD&&ye&&(ue(Re,xe),Re.profiling&&Re.profiling.push({action:'Finished countour plot calculation',time:Date.now()-_e}),!xe.keepSpectra&&delete Re.spectra);var qe=1<Pe.length&&(!Pe[0].dataType||Pe[0].dataType.match(/.*mass.*/i));if(qe&&xe.newGCMS&&(xe.xy=!0),xe.xy&&ye&&0<Pe.length)for(var Ce=0,Te;Ce<Pe.length;Ce++)if(Te=Pe[Ce],0<Te.data.length)for(var Ve=0;Ve<Te.data.length;Ve++){for(var $e=Te.data[Ve],Ze={x:Array($e.length/2),y:Array($e.length/2)},We=0;We<$e.length;We+=2)Ze.x[We/2]=$e[We],Ze.y[We/2]=$e[We+1];Te.data[Ve]=Ze}return qe&&ye&&(xe.newGCMS?ne(Re):ae(Re),Re.profiling&&Re.profiling.push({action:'Finished GCMS calculation',time:Date.now()-_e})),Re.profiling&&Re.profiling.push({action:'Total time',time:Date.now()-_e}),Re}}function T(K,Q){return W||F(),new Promise(function(G){var ee=Date.now()+''+Math.random();Z[ee]=G,W.postMessage(JSON.stringify({stamp:ee,input:K,options:Q}))})}function F(){var K=URL.createObjectURL(new Blob(['var getConverter ='+R.toString()+';var convert = getConverter(); onmessage = function (event) { var data = JSON.parse(event.data); postMessage(JSON.stringify({stamp: data.stamp, output: convert(data.input, data.options)})); };'],{type:'application/javascript'}));W=new Worker(K),URL.revokeObjectURL(K),W.addEventListener('message',function(Q){var G=JSON.parse(Q.data),ee=G.stamp;Z[ee]&&Z[ee](G.output)})}var O=I(80),$=R(),Z={},W;E.exports={convert:function(K,Q,G){return'boolean'==typeof Q&&(G=Q,Q={}),G?T(K,Q):$(K,Q)}}},function(E,D,I){'use strict';function R(T){if(T){this.data=T,this.length=this.data.length,this.index=0,this.zero=0;for(var F=0;F<this.data.length;F++)T[F]&=255}}var P=I(32);R.prototype=new P,R.prototype.byteAt=function(T){return this.data[this.zero+T]},R.prototype.lastIndexOfSignature=function(T){for(var F=T.charCodeAt(0),O=T.charCodeAt(1),$=T.charCodeAt(2),Z=T.charCodeAt(3),W=this.length-4;0<=W;--W)if(this.data[W]===F&&this.data[W+1]===O&&this.data[W+2]===$&&this.data[W+3]===Z)return W-this.zero;return-1},R.prototype.readData=function(T){if(this.checkOffset(T),0===T)return[];var F=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,F},E.exports=R},function(E){'use strict';function R(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}R.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},E.exports=R},function(E,D,I){'use strict';function R(){this.data=null,this.length=0,this.index=0,this.zero=0}var P=I(0);R.prototype={checkOffset:function(T){this.checkIndex(this.index+T)},checkIndex:function(T){if(this.length<this.zero+T||0>T)throw new Error('End of data reached (data length = '+this.length+', asked index = '+T+'). Corrupted zip ?')},setIndex:function(T){this.checkIndex(T),this.index=T},skip:function(T){this.setIndex(this.index+T)},byteAt:function(){},readInt:function(T){var F=0,O;for(this.checkOffset(T),O=this.index+T-1;O>=this.index;O--)F=(F<<8)+this.byteAt(O);return this.index+=T,F},readString:function(T){return P.transformTo('string',this.readData(T))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var T=this.readInt(4);return new Date((127&T>>25)+1980,(15&T>>21)-1,31&T>>16,31&T>>11,63&T>>5,(31&T)<<1)}},E.exports=R},function(E,D){'use strict';D.base64=!1,D.binary=!1,D.dir=!1,D.createFolders=!1,D.date=null,D.compression=null,D.compressionOptions=null,D.comment=null,D.unixPermissions=null,D.dosPermissions=null},function(E,D){'use strict';D.LOCAL_FILE_HEADER='PK\x03\x04',D.CENTRAL_FILE_HEADER='PK\x01\x02',D.CENTRAL_DIRECTORY_END='PK\x05\x06',D.ZIP64_CENTRAL_DIRECTORY_LOCATOR='PK\x06\x07',D.ZIP64_CENTRAL_DIRECTORY_END='PK\x06\x06',D.DATA_DESCRIPTOR='PK\x07\b'},function(E,D,I){'use strict';function R(F,O){this.data=F,O||(this.data=T.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}var P=I(32),T=I(0);R.prototype=new P,R.prototype.byteAt=function(F){return this.data.charCodeAt(this.zero+F)},R.prototype.lastIndexOfSignature=function(F){return this.data.lastIndexOf(F)-this.zero},R.prototype.readData=function(F){this.checkOffset(F);var O=this.data.slice(this.zero+this.index,this.zero+this.index+F);return this.index+=F,O},E.exports=R},function(E,D,I){'use strict';function R(T){T&&(this.data=T,this.length=this.data.length,this.index=0,this.zero=0)}var P=I(30);R.prototype=new P,R.prototype.readData=function(T){if(this.checkOffset(T),0===T)return new Uint8Array(0);var F=this.data.subarray(this.zero+this.index,this.zero+this.index+T);return this.index+=T,F},E.exports=R},function(E,D,I){'use strict';for(var R=I(0),P=I(5),T=I(12),F=Array(256),O=0;256>O;O++)F[O]=252<=O?6:248<=O?5:240<=O?4:224<=O?3:192<=O?2:1;F[254]=F[254]=1;var $=function(K){var ae=K.length,se=0,Q,G,ee,te,ne;for(te=0;te<ae;te++)G=K.charCodeAt(te),55296==(64512&G)&&te+1<ae&&(ee=K.charCodeAt(te+1),56320==(64512&ee)&&(G=65536+(G-55296<<10)+(ee-56320),te++)),se+=128>G?1:2048>G?2:65536>G?3:4;for(Q=P.uint8array?new Uint8Array(se):Array(se),ne=0,te=0;ne<se;te++)G=K.charCodeAt(te),55296==(64512&G)&&te+1<ae&&(ee=K.charCodeAt(te+1),56320==(64512&ee)&&(G=65536+(G-55296<<10)+(ee-56320),te++)),128>G?Q[ne++]=G:2048>G?(Q[ne++]=192|G>>>6,Q[ne++]=128|63&G):65536>G?(Q[ne++]=224|G>>>12,Q[ne++]=128|63&G>>>6,Q[ne++]=128|63&G):(Q[ne++]=240|G>>>18,Q[ne++]=128|63&G>>>12,Q[ne++]=128|63&G>>>6,Q[ne++]=128|63&G);return Q},Z=function(K,Q){var G;for(Q=Q||K.length,Q>K.length&&(Q=K.length),G=Q-1;0<=G&&128==(192&K[G]);)G--;return 0>G?Q:0===G?Q:G+F[K[G]]>Q?G:Q},W=function(K){var ae=K.length,se=Array(2*ae),G,ee,te,ne;for(ee=0,G=0;G<ae;){if(te=K[G++],128>te){se[ee++]=te;continue}if(ne=F[te],4<ne){se[ee++]=65533,G+=ne-1;continue}for(te&=2===ne?31:3===ne?15:7;1<ne&&G<ae;)te=te<<6|63&K[G++],ne--;if(1<ne){se[ee++]=65533;continue}65536>te?se[ee++]=te:(te-=65536,se[ee++]=55296|1023&te>>10,se[ee++]=56320|1023&te)}return se.length!==ee&&(se.subarray?se=se.subarray(0,ee):se.length=ee),R.applyFromCharCode(se)};D.utf8encode=function(Q){return P.nodebuffer?T(Q,'utf-8'):$(Q)},D.utf8decode=function(Q){if(P.nodebuffer)return R.transformTo('nodebuffer',Q).toString('utf-8');Q=R.transformTo(P.uint8array?'uint8array':'array',Q);for(var G=[],ee=0,te=Q.length,ae;ee<te;)ae=Z(Q,_Mathmin(ee+65536,te)),P.uint8array?G.push(W(Q.subarray(ee,ae))):G.push(W(Q.slice(ee,ae))),ee=ae;return G.join('')}},function(E,D,I){E.exports=D=I(91),D.getEquallySpacedData=I(92).getEquallySpacedData,D.SNV=I(93).SNV},function(E){'use strict';function R(T,F){for(var O=0,$=0;$<T.length;$++)O+=(T[$]-F[$])*(T[$]-F[$]);return O}function P(T,F){return _Mathsqrt(R(T,F))}E.exports=P,P.squared=R},function(E,D){(function(){var P=0?{}:D;var T={release:'0.3.0',date:'2013-03'};P.toString=function(){return'version '+T.release+', released '+T.date};for(var F=0,O=null,$=null,Z={init:function(Q){if(0!==Q&&0==(Q&Q-1))F=Q,Z._initArray(),Z._makeBitReversalTable(),Z._makeCosSinTable();else throw new Error('init: radix-2 required')},fft1d:function(Q,G){Z.fft(Q,G,1)},ifft1d:function(Q,G){var ee=1/F;Z.fft(Q,G,-1);for(var te=0;te<F;te++)Q[te]*=ee,G[te]*=ee},bt1d:function(Q,G){Z.fft(Q,G,-1)},fft2d:function(Q,G){for(var ee=[],te=[],ne=0,ae=0;ae<F;ae++){ne=ae*F;for(var se=0;se<F;se++)ee[se]=Q[se+ne],te[se]=G[se+ne];Z.fft1d(ee,te);for(var oe=0;oe<F;oe++)Q[oe+ne]=ee[oe],G[oe+ne]=te[oe]}for(var le=0;le<F;le++){for(var de=0;de<F;de++)ne=le+de*F,ee[de]=Q[ne],te[de]=G[ne];Z.fft1d(ee,te);for(var ue=0;ue<F;ue++)ne=le+ue*F,Q[ne]=ee[ue],G[ne]=te[ue]}},ifft2d:function(Q,G){for(var ee=[],te=[],ne=0,ae=0;ae<F;ae++){ne=ae*F;for(var se=0;se<F;se++)ee[se]=Q[se+ne],te[se]=G[se+ne];Z.ifft1d(ee,te);for(var oe=0;oe<F;oe++)Q[oe+ne]=ee[oe],G[oe+ne]=te[oe]}for(var le=0;le<F;le++){for(var de=0;de<F;de++)ne=le+de*F,ee[de]=Q[ne],te[de]=G[ne];Z.ifft1d(ee,te);for(var ue=0;ue<F;ue++)ne=le+ue*F,Q[ne]=ee[ue],G[ne]=te[ue]}},fft:function(Q,G,ee){for(var ce=F>>2,ge=0,te,ne,ae,se,oe,le,de,ue,he;ge<F;ge++)se=O[ge],ge<se&&(oe=Q[ge],Q[ge]=Q[se],Q[se]=oe,oe=G[ge],G[ge]=G[se],G[se]=oe);for(var pe=1;pe<F;pe<<=1){ne=0,te=F/(pe<<1);for(var me=0;me<pe;me++){le=$[ne+ce],de=ee*$[ne];for(var fe=me;fe<F;fe+=pe<<1)ae=fe+pe,ue=le*Q[ae]+de*G[ae],he=le*G[ae]-de*Q[ae],Q[ae]=Q[fe]-ue,Q[fe]+=ue,G[ae]=G[fe]-he,G[fe]+=he;ne+=te}}},_initArray:function(){O='undefined'==typeof Uint32Array?[]:new Uint32Array(F),$='undefined'==typeof Float64Array?[]:new Float64Array(1.25*F)},_paddingZero:function(){},_makeBitReversalTable:function(){var Q=0,G=0,ee=0;for(O[0]=0;++Q<F;){for(ee=F>>1;ee<=G;)G-=ee,ee>>=1;G+=ee,O[Q]=G}},_makeCosSinTable:function(){var Q=F>>1,G=F>>2,ee=F>>3,ne=_Mathsin(Math.PI/F),ae=2*ne*ne,se=_Mathsqrt(ae*(2-ae)),oe=$[G]=1,le=$[0]=0;ne=2*ae;for(var de=1;de<ee;de++)oe-=ae,ae+=ne*oe,le+=se,se-=ne*le,$[de]=le,$[G-de]=oe;0!=ee&&($[ee]=0.7071067811865476);for(var ue=0;ue<G;ue++)$[Q-ue]=$[ue];for(var he=0;he<Q+G;he++)$[he+Q]=-$[he]}},W=['init','fft1d','ifft1d','fft2d','ifft2d'],K=0;K<W.length;K++)P[W[K]]=Z[W[K]];return P.bt=Z.bt1d,P.fft=Z.fft1d,P.ifft=Z.ifft1d,P}).call(this)},function(E,D,I){'use strict';function R(F){P.call(this),this.index=F,this.distance=0,this.children=[]}const P=I(15),T=I(150);T.inherits(R,P),E.exports=R},function(E,D,I){'use strict';var he=I(7);E.exports={transpose:function(ce){if('number'==typeof ce)return ce;var ge=ce.clone();return ge.transpose()},add:function(ce,ge){if('number'==typeof ce&&'number'==typeof ge)return ce+ge;if('number'==typeof ce)return this.add(ge,ce);var pe=ce.clone();return pe.add(ge)},subtract:function(ce,ge){if('number'==typeof ce&&'number'==typeof ge)return ce-ge;if('number'==typeof ce)return this.subtract(ge,ce);var pe=ce.clone();return pe.sub(ge)},multiply:function(ce,ge){if('number'==typeof ce&&'number'==typeof ge)return ce*ge;if('number'==typeof ce)return this.multiply(ge,ce);var pe=ce.clone();return'number'==typeof ge?pe.mul(ge):pe=pe.mmul(ge),1==pe.rows&&1==pe.columns?pe[0][0]:pe},dotMultiply:function(ce,ge){var pe=ce.clone();return pe.mul(ge)},dotDivide:function(ce,ge){var pe=ce.clone();return pe.div(ge)},diag:function(ce){var ge=null,pe=ce.rows,me=ce.columns,fe,xe;if('undefined'==typeof me&&'object'==typeof ce)if(ce[0]&&ce[0].length)for(pe=ce.length,me=ce[0].length,xe=_Mathmin(pe,me),ge=he.zeros(me,me),fe=0;fe<me;fe++)ge[fe][fe]=ce[fe][fe];else for(me=ce.length,ge=he.zeros(me,me),fe=0;fe<me;fe++)ge[fe][fe]=ce[fe];if(1==pe)for(ge=he.zeros(me,me),fe=0;fe<me;fe++)ge[fe][fe]=ce[0][fe];else if(0<pe&&0<me)for(xe=_Mathmin(pe,me),ge=Array(xe),fe=0;fe<xe;fe++)ge[fe]=ce[fe][fe];return ge},min:function(ce,ge){if('number'==typeof ce&&'number'==typeof ge)return _Mathmin(ce,ge);for(var pe=ce.rows,me=ce.columns,fe=new he(pe,me),xe=0;xe<pe;xe++)for(var be=0;be<me;be++)fe[xe][be]=ce[xe][be]<ge[xe][be]?ce[xe][be]:ge[xe][be];return fe},max:function(ce,ge){if('number'==typeof ce&&'number'==typeof ge)return _Mathmax(ce,ge);for(var pe=ce.rows,me=ce.columns,fe=new he(pe,me),xe=0;xe<pe;xe++)for(var be=0;be<me;be++)fe[xe][be]=ce[xe][be]>ge[xe][be]?ce[xe][be]:ge[xe][be];return fe},solve:function(ce,ge){return ce.solve(ge)},inv:function(ce){return'number'==typeof ce?1/ce:ce.inverse()},sqrt:function(ce){if('number'==typeof ce)return _Mathsqrt(ce);for(var ge=ce.rows,pe=ce.columns,me=new he(ge,pe),fe=0;fe<ge;fe++)for(var xe=0;xe<pe;xe++)me[fe][xe]=_Mathsqrt(ce[fe][xe]);return me},exp:function(ce){if('number'==typeof ce)return _Mathsqrt(ce);for(var ge=ce.rows,pe=ce.columns,me=new he(ge,pe),fe=0;fe<ge;fe++)for(var xe=0;xe<pe;xe++)me[fe][xe]=_Mathexp(ce[fe][xe]);return me},dotPow:function(ce,ge){if('number'==typeof ce)return _Mathpow(ce,ge);for(var pe=ce.rows,me=ce.columns,fe=new he(pe,me),xe=0;xe<pe;xe++)for(var be=0;be<me;be++)fe[xe][be]=_Mathpow(ce[xe][be],ge);return fe},abs:function(ce){if('number'==typeof ce)return _Mathabs(ce);for(var ge=ce.rows,pe=ce.columns,me=new he(ge,pe),fe=0;fe<ge;fe++)for(var xe=0;xe<pe;xe++)me[fe][xe]=_Mathabs(ce[fe][xe]);return me},matrix:function(ce,ge){return new he(ce,ge)},ones:function(ce,ge){return he.ones(ce,ge)},zeros:function(ce,ge){return he.zeros(ce,ge)},random:function(ce,ge){return he.rand(ce,ge)},eye:function(ce,ge){return he.eye(ce,ge)}}},function(E,D){'use strict';function R(P,T){return P-T}D.sum=function(T){for(var P=0,F=0;F<T.length;F++)P+=T[F];return P},D.max=function(T){for(var P=-Infinity,F=T.length,O=0;O<F;O++)T[O]>P&&(P=T[O]);return P},D.min=function(T){for(var P=Infinity,F=T.length,O=0;O<F;O++)T[O]<P&&(P=T[O]);return P},D.minMax=function(T){for(var F=Infinity,O=-Infinity,$=T.length,Z=0;Z<$;Z++)T[Z]<F&&(F=T[Z]),T[Z]>O&&(O=T[Z]);return{min:F,max:O}},D.arithmeticMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++)F+=T[$];return F/O},D.mean=D.arithmeticMean,D.geometricMean=function(T){for(var F=1,O=T.length,$=0;$<O;$++)F*=T[$];return _Mathpow(F,1/O)},D.logMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++)F+=_Mathlog(T[$]);return F/O},D.grandMean=function(T,F){for(var O=0,$=0,Z=T.length,W=0;W<Z;W++)O+=F[W]*T[W],$+=F[W];return O/$},D.truncatedMean=function(T,F,O){O===void 0&&(O=!1),O||(T=T.slice().sort(R));for(var $=T.length,Z=_Mathfloor($*F),W=0,K=Z;K<$-Z;K++)W+=T[K];return W/($-2*Z)},D.harmonicMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++){if(0===T[$])throw new RangeError('value at index '+$+'is zero');F+=1/T[$]}return O/F},D.contraHarmonicMean=function(T){for(var F=0,O=0,$=T.length,Z=0;Z<$;Z++)F+=T[Z]*T[Z],O+=T[Z];if(0>O)throw new RangeError('sum of values is negative');return F/O},D.median=function(T,F){F===void 0&&(F=!1),F||(T=T.slice().sort(R));var O=T.length,$=_Mathfloor(O/2);return 0==O%2?0.5*(T[$-1]+T[$]):T[$]},D.variance=function(T,F){F===void 0&&(F=!0);for(var O=D.mean(T),$=0,Z=T.length,W=0,K;W<Z;W++)K=T[W]-O,$+=K*K;return F?$/(Z-1):$/Z},D.standardDeviation=function(T,F){return _Mathsqrt(D.variance(T,F))},D.standardError=function(T){return D.standardDeviation(T)/_Mathsqrt(T.length)},D.quartiles=function(T,F){'undefined'==typeof F&&(F=!1),F||(T=T.slice(),T.sort(R));var O=T.length/4,$=T[_Mathceil(O)-1],Z=D.median(T,!0),W=T[_Mathceil(3*O)-1];return{q1:$,q2:Z,q3:W}},D.pooledStandardDeviation=function(T,F){return _Mathsqrt(D.pooledVariance(T,F))},D.pooledVariance=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=0,$=0,Z=T.length,W=0;W<Z;W++){var K=T[W],Q=D.variance(K);O+=(K.length-1)*Q,$+=F?K.length-1:K.length}return O/$},D.mode=function(T){var F=T.length,O=Array(F),$;for($=0;$<F;$++)O[$]=0;var Z=Array(F),W=0;for($=0;$<F;$++){var K=Z.indexOf(T[$]);0<=K?O[K]++:(Z[W]=T[$],O[W]=1,W++)}var Q=0,G=0;for($=0;$<W;$++)O[$]>Q&&(Q=O[$],G=$);return Z[G]},D.covariance=function(T,F,O){'undefined'==typeof O&&(O=!0);var $=D.mean(T),Z=D.mean(F);if(T.length!==F.length)throw'Vectors do not have the same dimensions';for(var W=0,K=T.length,Q=0;Q<K;Q++){var G=T[Q]-$,ee=F[Q]-Z;W+=G*ee}return O?W/(K-1):W/K},D.skewness=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=D.mean(T),$=0,Z=0,W=T.length,K=0,Q;K<W;K++)Q=T[K]-O,$+=Q*Q,Z+=Q*Q*Q;var G=$/W,ee=Z/W,te=ee/_Mathpow(G,3/2);if(F){var ne=_Mathsqrt(W*(W-1));return ne/(W-2)*te}return te},D.kurtosis=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=D.mean(T),$=T.length,Z=0,W=0,K=0,Q;K<$;K++)Q=T[K]-O,Z+=Q*Q,W+=Q*Q*Q*Q;var G=Z/$,ee=W/$;if(F){var te=Z/($-1),ae=W/(te*te);return $*($+1)/(($-1)*($-2)*($-3))*ae-3*(($-1)*($-1)/(($-2)*($-3)))}return ee/(G*G)-3},D.entropy=function(T,F){'undefined'==typeof F&&(F=0);for(var O=0,$=T.length,Z=0;Z<$;Z++)O+=T[Z]*_Mathlog(T[Z]+F);return-O},D.weightedMean=function(T,F){for(var O=0,$=T.length,Z=0;Z<$;Z++)O+=T[Z]*F[Z];return O},D.weightedStandardDeviation=function(T,F){return _Mathsqrt(D.weightedVariance(T,F))},D.weightedVariance=function(T,F){for(var O=D.weightedMean(T,F),$=0,Z=T.length,W=0,K=0,Q=0;Q<Z;Q++){var G=T[Q]-O,ee=F[Q];$+=ee*(G*G),K+=ee,W+=ee*ee}return $*(K/(K*K-W))},D.center=function(T,F){'undefined'==typeof F&&(F=!1);var O=T;F||(O=T.slice());for(var $=D.mean(O),Z=O.length,W=0;W<Z;W++)O[W]-=$},D.standardize=function(T,F,O){'undefined'==typeof F&&(F=D.standardDeviation(T)),'undefined'==typeof O&&(O=!1);for(var $=T.length,Z=O?T:Array($),W=0;W<$;W++)Z[W]=T[W]/F;return Z},D.cumulativeSum=function(T){var F=T.length,O=Array(F);O[0]=T[0];for(var $=1;$<F;$++)O[$]=O[$-1]+T[$];return O}},function(E){'use strict';function R(T){var F=_Mathsqrt(2*T.length+0.25)-0.5,O=[],$=Array(F),Z=F,W=0,K=[];for(W=F-1;0<=W;W--)$[W]=1;for(var Q=-1,G=[];0<Z;){if(0===G.length){for(K=Array(F),W=0;W<F;W++)K[W]=0;for(O.push(K),Q=0;0==$[Q];Q++);}else Q=G.splice(0,1);K[Q]=1,$[Q]=0,Z--;var ee=Array(F);for(W=0;W<F;W++){var te=_Mathmax(Q,W),ne=_Mathmin(Q,W);ee[W]=T[ne*(2*F-ne-1)/2+te],1==ee[W]&&1==$[W]&&0==K[W]&&(G.push(W),K[W]=1)}}return O}const P={threshold:0,out:'assignment'};E.exports=function(F,O){const $=Object.assign({},P,O);var Z,W,K,Q;if('number'==typeof F[0])Z=R(F);else if('object'==typeof F[0]){for(var G=F.length,ee=Array(G*(G+1)/2),te=0,W=0;W<G;W++)for(var K=W;K<G;K++)ee[te++]=F[W][K]>$.threshold?1:0;Z=R(ee)}if('indexes'===$.out||'values'===$.out){var ne=Array(Z.length);for(W=0;W<Z.length;W++)for(ne[W]=[],K=0;K<Z[W].length;K++)0!=Z[W][K]&&ne[W].push(K);if('values'===$.out){var ae=Array(ne.length);for(W=0;W<ne.length;W++)for(ae[W]=Array(ne[W].length),K=0;K<ne[W].length;K++)for(ae[W][K]=Array(ne[W].length),Q=0;Q<ne[W].length;Q++)ae[W][K][Q]=F[ne[W][K]][ne[W][Q]];return ae}return ne}return Z}},function(module,exports,__webpack_require__){function fillTemplateFunction(E,D){for(var I in D)E=E.replace(new RegExp('%'+I+'%','g'),D[I]);return E}const HashTable=__webpack_require__(100);class SparseMatrix{constructor(E,D,I={}){if(E instanceof SparseMatrix){const F=E;return void this._init(F.rows,F.columns,F.elements.clone(),F.threshold)}if(Array.isArray(E)){const F=E;E=F.length,I=D||{},D=F[0].length,this._init(E,D,new HashTable(I),I.threshold);for(var R=0;R<E;R++)for(var P=0,T;P<D;P++)T=F[R][P],this.threshold&&_Mathabs(T)<this.threshold&&(T=0),0!==T&&this.elements.set(R*D+P,F[R][P])}else this._init(E,D,new HashTable(I),I.threshold)}_init(E,D,I,R){this.rows=E,this.columns=D,this.elements=I,this.threshold=R||0}static eye(E=1,D=E){const I=_Mathmin(E,D),R=new SparseMatrix(E,D,{initialCapacity:I});for(var P=0;P<I;P++)R.set(P,P,1);return R}clone(){return new SparseMatrix(this)}to2DArray(){const E=Array(this.rows);for(var D=0;D<this.rows;D++){E[D]=Array(this.columns);for(var I=0;I<this.columns;I++)E[D][I]=this.get(D,I)}return E}isSquare(){return this.rows===this.columns}isSymmetric(){if(!this.isSquare())return!1;var E=!0;return this.forEachNonZero((D,I,R)=>{return this.get(I,D)===R?R:(E=!1,!1)}),E}get cardinality(){return this.elements.size}get size(){return this.rows*this.columns}get(E,D){return this.elements.get(E*this.columns+D)}set(E,D,I){return this.threshold&&_Mathabs(I)<this.threshold&&(I=0),0===I?this.elements.remove(E*this.columns+D):this.elements.set(E*this.columns+D,I),this}mmul(E){this.columns!==E.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');const D=this.rows,I=E.columns,R=new SparseMatrix(D,I);return this.forEachNonZero((P,T,F)=>{return E.forEachNonZero((O,$,Z)=>{return T===O&&R.set(P,$,R.get(P,$)+F*Z),Z}),F}),R}kroneckerProduct(E){const D=this.rows,I=this.columns,R=E.rows,P=E.columns,T=new SparseMatrix(D*R,I*P,{initialCapacity:this.cardinality*E.cardinality});return this.forEachNonZero((F,O,$)=>{return E.forEachNonZero((Z,W,K)=>{return T.set(R*F+Z,P*O+W,$*K),K}),$}),T}forEachNonZero(E){return this.elements.forEachPair((D,I)=>{const R=0|D/this.columns,P=D%this.columns;let T=E(R,P,I);return!1!==T&&(this.threshold&&_Mathabs(T)<this.threshold&&(T=0),T!==I&&(0===T?this.elements.remove(D,!0):this.elements.set(D,T)),!0)}),this.elements.maybeShrinkCapacity(),this}getNonZeros(){const E=this.cardinality,D=Array(E),I=Array(E),R=Array(E);var P=0;return this.forEachNonZero((T,F,O)=>{return D[P]=T,I[P]=F,R[P]=O,P++,O}),{rows:D,columns:I,values:R}}setThreshold(E){return 0!==E&&E!==this.threshold&&(this.threshold=E,this.forEachNonZero((D,I,R)=>R)),this}}SparseMatrix.prototype.klass='Matrix',SparseMatrix.identity=SparseMatrix.eye,SparseMatrix.prototype.tensorProduct=SparseMatrix.prototype.kroneckerProduct,module.exports=SparseMatrix;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    this.forEachNonZero((i, j, v) => v %op% value);
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix.forEachNonZero((i, j, v) => {
        this.set(i, j, this.get(i, j) %op% v);
        return v;
    });
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new SparseMatrix(matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    this.forEachNonZero((i, j, v) => %method%(v));
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new SparseMatrix(matrix);
    return newMatrix.%name%();
})
`,operators=[['+','add'],['-','sub','subtract'],['*','mul','multiply'],['/','div','divide'],['%','mod','modulus'],['&','and'],['|','or'],['^','xor'],['<<','leftShift'],['>>','signPropagatingRightShift'],['>>>','rightShift','zeroFillRightShift']];for(var operator of operators)for(var i=1;i<operator.length;i++)SparseMatrix.prototype[operator[i]]=eval(fillTemplateFunction(inplaceOperator,{name:operator[i],op:operator[0]})),SparseMatrix.prototype[operator[i]+'S']=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[i]+'S',op:operator[0]})),SparseMatrix.prototype[operator[i]+'M']=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[i]+'M',op:operator[0]})),SparseMatrix[operator[i]]=eval(fillTemplateFunction(staticOperator,{name:operator[i]}));var methods=[['~','not']];['abs','acos','acosh','asin','asinh','atan','atanh','cbrt','ceil','clz32','cos','cosh','exp','expm1','floor','fround','log','log1p','log10','log2','round','sign','sin','sinh','sqrt','tan','tanh','trunc'].forEach(function(E){methods.push(['Math.'+E,E])});for(var method of methods)for(var i=1;i<method.length;i++)SparseMatrix.prototype[method[i]]=eval(fillTemplateFunction(inplaceMethod,{name:method[i],method:method[0]})),SparseMatrix[method[i]]=eval(fillTemplateFunction(staticMethod,{name:method[i]}))},function(E,D){'use strict';function R(P,T){return P-T}D.sum=function(T){for(var P=0,F=0;F<T.length;F++)P+=T[F];return P},D.max=function(T){for(var P=T[0],F=T.length,O=1;O<F;O++)T[O]>P&&(P=T[O]);return P},D.min=function(T){for(var P=T[0],F=T.length,O=1;O<F;O++)T[O]<P&&(P=T[O]);return P},D.minMax=function(T){for(var F=T[0],O=T[0],$=T.length,Z=1;Z<$;Z++)T[Z]<F&&(F=T[Z]),T[Z]>O&&(O=T[Z]);return{min:F,max:O}},D.arithmeticMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++)F+=T[$];return F/O},D.mean=D.arithmeticMean,D.geometricMean=function(T){for(var F=1,O=T.length,$=0;$<O;$++)F*=T[$];return _Mathpow(F,1/O)},D.logMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++)F+=_Mathlog(T[$]);return F/O},D.grandMean=function(T,F){for(var O=0,$=0,Z=T.length,W=0;W<Z;W++)O+=F[W]*T[W],$+=F[W];return O/$},D.truncatedMean=function(T,F,O){O===void 0&&(O=!1),O||(T=[].concat(T).sort(R));for(var $=T.length,Z=_Mathfloor($*F),W=0,K=Z;K<$-Z;K++)W+=T[K];return W/($-2*Z)},D.harmonicMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++){if(0===T[$])throw new RangeError('value at index '+$+'is zero');F+=1/T[$]}return O/F},D.contraHarmonicMean=function(T){for(var F=0,O=0,$=T.length,Z=0;Z<$;Z++)F+=T[Z]*T[Z],O+=T[Z];if(0>O)throw new RangeError('sum of values is negative');return F/O},D.median=function(T,F){F===void 0&&(F=!1),F||(T=[].concat(T).sort(R));var O=T.length,$=_Mathfloor(O/2);return 0==O%2?0.5*(T[$-1]+T[$]):T[$]},D.variance=function(T,F){F===void 0&&(F=!0);for(var O=D.mean(T),$=0,Z=T.length,W=0,K;W<Z;W++)K=T[W]-O,$+=K*K;return F?$/(Z-1):$/Z},D.standardDeviation=function(T,F){return _Mathsqrt(D.variance(T,F))},D.standardError=function(T){return D.standardDeviation(T)/_Mathsqrt(T.length)},D.robustMeanAndStdev=function(T){var F=0,O=0,$=T.length,Z=0;for(Z=0;Z<$;Z++)F+=T[Z];F/=$;var W=Array($);for(Z=0;Z<$;Z++)W[Z]=_Mathabs(T[Z]-F);return W.sort(R),O=1==$%2?W[($-1)/2]/0.6745:0.5*(W[$/2]+W[$/2-1])/0.6745,{mean:F,stdev:O}},D.quartiles=function(T,F){'undefined'==typeof F&&(F=!1),F||(T=[].concat(T).sort(R));var O=T.length/4,$=T[_Mathceil(O)-1],Z=D.median(T,!0),W=T[_Mathceil(3*O)-1];return{q1:$,q2:Z,q3:W}},D.pooledStandardDeviation=function(T,F){return _Mathsqrt(D.pooledVariance(T,F))},D.pooledVariance=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=0,$=0,Z=T.length,W=0;W<Z;W++){var K=T[W],Q=D.variance(K);O+=(K.length-1)*Q,$+=F?K.length-1:K.length}return O/$},D.mode=function(T){var F=T.length,O=Array(F),$;for($=0;$<F;$++)O[$]=0;var Z=Array(F),W=0;for($=0;$<F;$++){var K=Z.indexOf(T[$]);0<=K?O[K]++:(Z[W]=T[$],O[W]=1,W++)}var Q=0,G=0;for($=0;$<W;$++)O[$]>Q&&(Q=O[$],G=$);return Z[G]},D.covariance=function(T,F,O){'undefined'==typeof O&&(O=!0);var $=D.mean(T),Z=D.mean(F);if(T.length!==F.length)throw'Vectors do not have the same dimensions';for(var W=0,K=T.length,Q=0;Q<K;Q++){var G=T[Q]-$,ee=F[Q]-Z;W+=G*ee}return O?W/(K-1):W/K},D.skewness=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=D.mean(T),$=0,Z=0,W=T.length,K=0,Q;K<W;K++)Q=T[K]-O,$+=Q*Q,Z+=Q*Q*Q;var G=$/W,ee=Z/W,te=ee/_Mathpow(G,3/2);if(F){var ne=_Mathsqrt(W*(W-1));return ne/(W-2)*te}return te},D.kurtosis=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=D.mean(T),$=T.length,Z=0,W=0,K=0,Q;K<$;K++)Q=T[K]-O,Z+=Q*Q,W+=Q*Q*Q*Q;var G=Z/$,ee=W/$;if(F){var te=Z/($-1),ae=W/(te*te);return $*($+1)/(($-1)*($-2)*($-3))*ae-3*(($-1)*($-1)/(($-2)*($-3)))}return ee/(G*G)-3},D.entropy=function(T,F){'undefined'==typeof F&&(F=0);for(var O=0,$=T.length,Z=0;Z<$;Z++)O+=T[Z]*_Mathlog(T[Z]+F);return-O},D.weightedMean=function(T,F){for(var O=0,$=T.length,Z=0;Z<$;Z++)O+=T[Z]*F[Z];return O},D.weightedStandardDeviation=function(T,F){return _Mathsqrt(D.weightedVariance(T,F))},D.weightedVariance=function(T,F){for(var O=D.weightedMean(T,F),$=0,Z=T.length,W=0,K=0,Q=0;Q<Z;Q++){var G=T[Q]-O,ee=F[Q];$+=ee*(G*G),K+=ee,W+=ee*ee}return $*(K/(K*K-W))},D.center=function(T,F){'undefined'==typeof F&&(F=!1);var O=T;F||(O=[].concat(T));for(var $=D.mean(O),Z=O.length,W=0;W<Z;W++)O[W]-=$},D.standardize=function(T,F,O){'undefined'==typeof F&&(F=D.standardDeviation(T)),'undefined'==typeof O&&(O=!1);for(var $=T.length,Z=O?T:Array($),W=0;W<$;W++)Z[W]=T[W]/F;return Z},D.cumulativeSum=function(T){var F=T.length,O=Array(F);O[0]=T[0];for(var $=1;$<F;$++)O[$]=O[$-1]+T[$];return O}},function(module,exports,__webpack_require__){'use strict';function abstractMatrix(superCtor){function checkDimensions(E,D){if(E.rows!==D.rows||E.columns!==D.columns)throw new RangeError('Matrices dimensions must be equal')}function compareNumbers(E,D){return E-D}function fillTemplateFunction(E,D){for(var I in D)E=E.replace(new RegExp('%'+I+'%','g'),D[I]);return E}superCtor===void 0&&(superCtor=Object);class Matrix extends superCtor{static get[Symbol.species](){return this}static from1DArray(E,D,I){if(E*D!==I.length)throw new RangeError('Data length does not match given dimensions');for(var P=new this(E,D),T=0;T<E;T++)for(var F=0;F<D;F++)P.set(T,F,I[T*D+F]);return P}static rowVector(E){for(var D=new this(1,E.length),I=0;I<E.length;I++)D.set(0,I,E[I]);return D}static columnVector(E){for(var D=new this(E.length,1),I=0;I<E.length;I++)D.set(I,0,E[I]);return D}static empty(E,D){return new this(E,D)}static zeros(E,D){return this.empty(E,D).fill(0)}static ones(E,D){return this.empty(E,D).fill(1)}static rand(E,D,I){I===void 0&&(I=Math.random);for(var R=this.empty(E,D),P=0;P<E;P++)for(var T=0;T<D;T++)R.set(P,T,I());return R}static randInt(E,D,I,R){I===void 0&&(I=1e3),R===void 0&&(R=Math.random);for(var P=this.empty(E,D),T=0;T<E;T++)for(var F=0,O;F<D;F++)O=_Mathfloor(R()*I),P.set(T,F,O);return P}static eye(E,D,I){D===void 0&&(D=E),I===void 0&&(I=1);for(var R=_Mathmin(E,D),P=this.zeros(E,D),T=0;T<R;T++)P.set(T,T,I);return P}static diag(E,D,I){var R=E.length;D===void 0&&(D=R),I===void 0&&(I=D);for(var P=_Mathmin(R,D,I),T=this.zeros(D,I),F=0;F<P;F++)T.set(F,F,E[F]);return T}static min(E,D){E=this.checkMatrix(E),D=this.checkMatrix(D);for(var I=E.rows,R=E.columns,P=new this(I,R),T=0;T<I;T++)for(var F=0;F<R;F++)P.set(T,F,_Mathmin(E.get(T,F),D.get(T,F)));return P}static max(E,D){E=this.checkMatrix(E),D=this.checkMatrix(D);for(var I=E.rows,R=E.columns,P=new this(I,R),T=0;T<I;T++)for(var F=0;F<R;F++)P.set(T,F,_Mathmax(E.get(T,F),D.get(T,F)));return P}static checkMatrix(E){return Matrix.isMatrix(E)?E:new this(E)}static isMatrix(E){return null!=E&&'Matrix'===E.klass}get size(){return this.rows*this.columns}apply(E){if('function'!=typeof E)throw new TypeError('callback must be a function');for(var D=this.rows,I=this.columns,R=0;R<D;R++)for(var P=0;P<I;P++)E.call(this,R,P);return this}to1DArray(){for(var E=Array(this.size),D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)E[D*this.columns+I]=this.get(D,I);return E}to2DArray(){for(var E=Array(this.rows),D=0;D<this.rows;D++){E[D]=Array(this.columns);for(var I=0;I<this.columns;I++)E[D][I]=this.get(D,I)}return E}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var E=0;E<this.rows;E++)for(var D=0;D<=E;D++)if(this.get(E,D)!==this.get(D,E))return!1;return!0}return!1}set(){throw new Error('set method is unimplemented')}get(){throw new Error('get method is unimplemented')}repeat(E,D){E=E||1,D=D||1;for(var I=new this.constructor[Symbol.species](this.rows*E,this.columns*D),R=0;R<E;R++)for(var P=0;P<D;P++)I.setSubMatrix(this,this.rows*R,this.columns*P);return I}fill(E){for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,E);return this}neg(){return this.mulS(-1)}getRow(E){util.checkRowIndex(this,E);for(var D=Array(this.columns),I=0;I<this.columns;I++)D[I]=this.get(E,I);return D}getRowVector(E){return this.constructor.rowVector(this.getRow(E))}setRow(E,D){util.checkRowIndex(this,E),D=util.checkRowVector(this,D);for(var I=0;I<this.columns;I++)this.set(E,I,D[I]);return this}swapRows(E,D){util.checkRowIndex(this,E),util.checkRowIndex(this,D);for(var I=0,R;I<this.columns;I++)R=this.get(E,I),this.set(E,I,this.get(D,I)),this.set(D,I,R);return this}getColumn(E){util.checkColumnIndex(this,E);for(var D=Array(this.rows),I=0;I<this.rows;I++)D[I]=this.get(I,E);return D}getColumnVector(E){return this.constructor.columnVector(this.getColumn(E))}setColumn(E,D){util.checkColumnIndex(this,E),D=util.checkColumnVector(this,D);for(var I=0;I<this.rows;I++)this.set(I,E,D[I]);return this}swapColumns(E,D){util.checkColumnIndex(this,E),util.checkColumnIndex(this,D);for(var I=0,R;I<this.rows;I++)R=this.get(I,E),this.set(I,E,this.get(I,D)),this.set(I,D,R);return this}addRowVector(E){E=util.checkRowVector(this,E);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)+E[I]);return this}subRowVector(E){E=util.checkRowVector(this,E);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)-E[I]);return this}mulRowVector(E){E=util.checkRowVector(this,E);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)*E[I]);return this}divRowVector(E){E=util.checkRowVector(this,E);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)/E[I]);return this}addColumnVector(E){E=util.checkColumnVector(this,E);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)+E[D]);return this}subColumnVector(E){E=util.checkColumnVector(this,E);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)-E[D]);return this}mulColumnVector(E){E=util.checkColumnVector(this,E);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)*E[D]);return this}divColumnVector(E){E=util.checkColumnVector(this,E);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)/E[D]);return this}mulRow(E,D){util.checkRowIndex(this,E);for(var I=0;I<this.columns;I++)this.set(E,I,this.get(E,I)*D);return this}mulColumn(E,D){util.checkColumnIndex(this,E);for(var I=0;I<this.rows;I++)this.set(I,E,this.get(I,E)*D);return this}max(){for(var E=this.get(0,0),D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.get(D,I)>E&&(E=this.get(D,I));return E}maxIndex(){for(var E=this.get(0,0),D=[0,0],I=0;I<this.rows;I++)for(var R=0;R<this.columns;R++)this.get(I,R)>E&&(E=this.get(I,R),D[0]=I,D[1]=R);return D}min(){for(var E=this.get(0,0),D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.get(D,I)<E&&(E=this.get(D,I));return E}minIndex(){for(var E=this.get(0,0),D=[0,0],I=0;I<this.rows;I++)for(var R=0;R<this.columns;R++)this.get(I,R)<E&&(E=this.get(I,R),D[0]=I,D[1]=R);return D}maxRow(E){util.checkRowIndex(this,E);for(var D=this.get(E,0),I=1;I<this.columns;I++)this.get(E,I)>D&&(D=this.get(E,I));return D}maxRowIndex(E){util.checkRowIndex(this,E);for(var D=this.get(E,0),I=[E,0],R=1;R<this.columns;R++)this.get(E,R)>D&&(D=this.get(E,R),I[1]=R);return I}minRow(E){util.checkRowIndex(this,E);for(var D=this.get(E,0),I=1;I<this.columns;I++)this.get(E,I)<D&&(D=this.get(E,I));return D}minRowIndex(E){util.checkRowIndex(this,E);for(var D=this.get(E,0),I=[E,0],R=1;R<this.columns;R++)this.get(E,R)<D&&(D=this.get(E,R),I[1]=R);return I}maxColumn(E){util.checkColumnIndex(this,E);for(var D=this.get(0,E),I=1;I<this.rows;I++)this.get(I,E)>D&&(D=this.get(I,E));return D}maxColumnIndex(E){util.checkColumnIndex(this,E);for(var D=this.get(0,E),I=[0,E],R=1;R<this.rows;R++)this.get(R,E)>D&&(D=this.get(R,E),I[0]=R);return I}minColumn(E){util.checkColumnIndex(this,E);for(var D=this.get(0,E),I=1;I<this.rows;I++)this.get(I,E)<D&&(D=this.get(I,E));return D}minColumnIndex(E){util.checkColumnIndex(this,E);for(var D=this.get(0,E),I=[0,E],R=1;R<this.rows;R++)this.get(R,E)<D&&(D=this.get(R,E),I[0]=R);return I}diag(){for(var E=_Mathmin(this.rows,this.columns),D=Array(E),I=0;I<E;I++)D[I]=this.get(I,I);return D}sum(E){return'row'===E?util.sumByRow(this):'column'===E?util.sumByColumn(this):util.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var E=1,D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)E*=this.get(D,I);return E}cumulativeSum(){for(var E=0,D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)E+=this.get(D,I),this.set(D,I,E);return this}dot(E){Matrix.isMatrix(E)&&(E=E.to1DArray());var D=this.to1DArray();if(D.length!==E.length)throw new RangeError('vectors do not have the same size');for(var I=0,R=0;R<D.length;R++)I+=D[R]*E[R];return I}mmul(E){E=this.constructor.checkMatrix(E),this.columns!==E.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');for(var D=this.rows,I=this.columns,R=E.columns,P=new this.constructor[Symbol.species](D,R),T=Array(I),F=0;F<R;F++){for(var O=0;O<I;O++)T[O]=E.get(O,F);for(var $=0,Z;$<D;$++){for(Z=0,O=0;O<I;O++)Z+=this.get($,O)*T[O];P.set($,F,Z)}}return P}strassen2x2(E){var D=new this.constructor[Symbol.species](2,2);const I=this.get(0,0),R=E.get(0,0),P=this.get(0,1),T=E.get(0,1),F=this.get(1,0),O=E.get(1,0),$=this.get(1,1),Z=E.get(1,1),W=(I+$)*(R+Z),K=(F+$)*R,Q=I*(T-Z),G=$*(O-R),ee=(I+P)*Z;return D.set(0,0,W+G-ee+(P-$)*(O+Z)),D.set(0,1,Q+ee),D.set(1,0,K+G),D.set(1,1,W-K+Q+(F-I)*(R+T)),D}strassen3x3(E){var D=new this.constructor[Symbol.species](3,3);const I=this.get(0,0),R=this.get(0,1),P=this.get(0,2),T=this.get(1,0),F=this.get(1,1),O=this.get(1,2),$=this.get(2,0),Z=this.get(2,1),W=this.get(2,2),K=E.get(0,0),Q=E.get(0,1),G=E.get(0,2),ee=E.get(1,0),te=E.get(1,1),ne=E.get(1,2),ae=E.get(2,0),se=E.get(2,1),oe=E.get(2,2),de=(I-T)*(-Q+te),he=(-I+T+F)*(K-Q+te),ce=(T+F)*(-K+Q),ge=I*K,pe=(-I+$+Z)*(K-G+ne),me=(-I+$)*(G-ne),fe=($+Z)*(-K+G),ye=(-P+Z+W)*(te+ae-se),_e=(P-W)*(te-se),ke=P*ae,we=(Z+W)*(-ae+se),je=(-P+F+O)*(ne+ae-oe),Se=(P-O)*(ne-oe),ve=(F+O)*(-ae+oe);return D.set(0,0,ge+ke+R*ee),D.set(0,1,(I+R+P-T-F-Z-W)*te+he+ce+ge+ye+ke+we),D.set(0,2,ge+pe+fe+(I+R+P-F-O-$-Z)*ne+ke+je+ve),D.set(1,0,de+F*(-K+Q+ee-te-ne-ae+oe)+he+ge+ke+je+Se),D.set(1,1,de+he+ce+ge+O*se),D.set(1,2,ke+je+Se+ve+T*G),D.set(2,0,ge+pe+me+Z*(-K+G+ee-te-ne-ae+se)+ye+_e+ke),D.set(2,1,ye+_e+ke+we+$*Q),D.set(2,2,ge+pe+me+fe+W*oe),D}mmulStrassen(E){function D(W,K,Q){var G=W.rows,ee=W.columns;if(G===K&&ee===Q)return W;var te=Matrix.zeros(K,Q);return te=te.setSubMatrix(W,0,0),te}function I(W,K,Q,G){if(512>=Q||512>=G)return W.mmul(K);1==Q%2&&1==G%2?(W=D(W,Q+1,G+1),K=D(K,Q+1,G+1)):1==Q%2?(W=D(W,Q+1,G),K=D(K,Q+1,G)):1==G%2&&(W=D(W,Q,G+1),K=D(K,Q,G+1));var ee=parseInt(W.rows/2),te=parseInt(W.columns/2),ne=W.subMatrix(0,ee-1,0,te-1),ae=K.subMatrix(0,ee-1,0,te-1),se=W.subMatrix(0,ee-1,te,W.columns-1),oe=K.subMatrix(0,ee-1,te,K.columns-1),le=W.subMatrix(ee,W.rows-1,0,te-1),de=K.subMatrix(ee,K.rows-1,0,te-1),ue=W.subMatrix(ee,W.rows-1,te,W.columns-1),he=K.subMatrix(ee,K.rows-1,te,K.columns-1),ce=I(Matrix.add(ne,ue),Matrix.add(ae,he),ee,te),ge=I(Matrix.add(le,ue),ae,ee,te),pe=I(ne,Matrix.sub(oe,he),ee,te),me=I(ue,Matrix.sub(de,ae),ee,te),fe=I(Matrix.add(ne,se),he,ee,te),xe=I(Matrix.sub(le,ne),Matrix.add(ae,oe),ee,te),be=I(Matrix.sub(se,ue),Matrix.add(de,he),ee,te),ye=Matrix.add(ce,me);ye.sub(fe),ye.add(be);var _e=Matrix.add(pe,fe),ke=Matrix.add(ge,me),we=Matrix.sub(ce,ge);we.add(pe),we.add(xe);var je=Matrix.zeros(2*ye.rows,2*ye.columns);return je=je.setSubMatrix(ye,0,0),je=je.setSubMatrix(_e,ye.rows,0),je=je.setSubMatrix(ke,0,ye.columns),je=je.setSubMatrix(we,ye.rows,ye.columns),je.subMatrix(0,Q-1,0,G-1)}var R=this.clone(),P=R.rows,T=R.columns,F=E.rows,O=E.columns;T!==F&&console.warn(`Multiplying ${P} x ${T} and ${F} x ${O} matrix: dimensions do not match.`);var $=_Mathmax(P,F),Z=_Mathmax(T,O);return R=D(R,$,Z),E=D(E,$,Z),I(R,E,$,Z)}scaleRows(E,D){if(E=void 0===E?0:E,D=void 0===D?1:D,E>=D)throw new RangeError('min should be strictly smaller than max');for(var I=this.constructor.empty(this.rows,this.columns),R=0,P;R<this.rows;R++)P=arrayUtils.scale(this.getRow(R),{min:E,max:D}),I.setRow(R,P);return I}scaleColumns(E,D){if(E=void 0===E?0:E,D=void 0===D?1:D,E>=D)throw new RangeError('min should be strictly smaller than max');for(var I=this.constructor.empty(this.rows,this.columns),R=0,P;R<this.columns;R++)P=arrayUtils.scale(this.getColumn(R),{min:E,max:D}),I.setColumn(R,P);return I}kroneckerProduct(E){E=this.constructor.checkMatrix(E);for(var D=this.rows,I=this.columns,R=E.rows,P=E.columns,T=new this.constructor[Symbol.species](D*R,I*P),F=0;F<D;F++)for(var O=0;O<I;O++)for(var $=0;$<R;$++)for(var Z=0;Z<P;Z++)T[R*F+$][P*O+Z]=this.get(F,O)*E.get($,Z);return T}transpose(){for(var E=new this.constructor[Symbol.species](this.columns,this.rows),D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)E.set(I,D,this.get(D,I));return E}sortRows(E){E===void 0&&(E=compareNumbers);for(var D=0;D<this.rows;D++)this.setRow(D,this.getRow(D).sort(E));return this}sortColumns(E){E===void 0&&(E=compareNumbers);for(var D=0;D<this.columns;D++)this.setColumn(D,this.getColumn(D).sort(E));return this}subMatrix(E,D,I,R){util.checkRange(this,E,D,I,R);for(var P=new this.constructor[Symbol.species](D-E+1,R-I+1),T=E;T<=D;T++)for(var F=I;F<=R;F++)P[T-E][F-I]=this.get(T,F);return P}subMatrixRow(E,D,I){if(void 0===D&&(D=0),void 0===I&&(I=this.columns-1),D>I||0>D||D>=this.columns||0>I||I>=this.columns)throw new RangeError('Argument out of range');for(var R=new this.constructor[Symbol.species](E.length,I-D+1),P=0;P<E.length;P++)for(var T=D;T<=I;T++){if(0>E[P]||E[P]>=this.rows)throw new RangeError('Row index out of range: '+E[P]);R.set(P,T-D,this.get(E[P],T))}return R}subMatrixColumn(E,D,I){if(void 0===D&&(D=0),void 0===I&&(I=this.rows-1),D>I||0>D||D>=this.rows||0>I||I>=this.rows)throw new RangeError('Argument out of range');for(var R=new this.constructor[Symbol.species](I-D+1,E.length),P=0;P<E.length;P++)for(var T=D;T<=I;T++){if(0>E[P]||E[P]>=this.columns)throw new RangeError('Column index out of range: '+E[P]);R.set(T-D,P,this.get(T,E[P]))}return R}setSubMatrix(E,D,I){E=this.constructor.checkMatrix(E);var R=D+E.rows-1,P=I+E.columns-1;util.checkRange(this,D,R,I,P);for(var T=0;T<E.rows;T++)for(var F=0;F<E.columns;F++)this[D+T][I+F]=E.get(T,F);return this}selection(E,D){for(var I=util.checkIndices(this,E,D),R=new this.constructor[Symbol.species](E.length,D.length),P=0,T;P<I.row.length;P++){T=I.row[P];for(var F=0,O;F<I.column.length;F++)O=I.column[F],R[P][F]=this.get(T,O)}return R}trace(){for(var E=_Mathmin(this.rows,this.columns),D=0,I=0;I<E;I++)D+=this.get(I,I);return D}transposeView(){return new MatrixTransposeView(this)}rowView(E){return util.checkRowIndex(this,E),new MatrixRowView(this,E)}columnView(E){return util.checkColumnIndex(this,E),new MatrixColumnView(this,E)}flipRowView(){return new MatrixFlipRowView(this)}flipColumnView(){return new MatrixFlipColumnView(this)}subMatrixView(E,D,I,R){return new MatrixSubView(this,E,D,I,R)}selectionView(E,D){return new MatrixSelectionView(this,E,D)}det(){if(this.isSquare()){var E,D,I,R;if(2===this.columns)return E=this.get(0,0),D=this.get(0,1),I=this.get(1,0),R=this.get(1,1),E*R-D*I;if(3===this.columns){var P,T,F;return P=this.selectionView([1,2],[1,2]),T=this.selectionView([1,2],[0,2]),F=this.selectionView([1,2],[0,1]),E=this.get(0,0),D=this.get(0,1),I=this.get(0,2),E*P.det()-D*T.det()+I*F.det()}return new LuDecomposition(this).determinant}throw Error('Determinant can only be calculated for a square matrix.')}pseudoInverse(E){void 0===E&&(E=Number.EPSILON);for(var D=new SvDecomposition(this,{autoTranspose:!0}),I=D.leftSingularVectors,R=D.rightSingularVectors,P=D.diagonal,T=0;T<P.length;T++)P[T]=_Mathabs(P[T])>E?1/P[T]:0;return P=this.constructor[Symbol.species].diag(P),R.mmul(P.mmul(I.transposeView()))}}Matrix.prototype.klass='Matrix',Matrix.random=Matrix.rand,Matrix.diagonal=Matrix.diag,Matrix.prototype.diagonal=Matrix.prototype.diag,Matrix.identity=Matrix.eye,Matrix.prototype.negate=Matrix.prototype.neg,Matrix.prototype.tensorProduct=Matrix.prototype.kroneckerProduct,Matrix.prototype.determinant=Matrix.prototype.det;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,inplaceMethodWithArgs=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,staticMethodWithArgs=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,inplaceMethodWithOneArgScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,inplaceMethodWithOneArgMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,inplaceMethodWithOneArg=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,staticMethodWithOneArg=staticMethodWithArgs,operators=[['+','add'],['-','sub','subtract'],['*','mul','multiply'],['/','div','divide'],['%','mod','modulus'],['&','and'],['|','or'],['^','xor'],['<<','leftShift'],['>>','signPropagatingRightShift'],['>>>','rightShift','zeroFillRightShift']],i;for(var operator of operators){var inplaceOp=eval(fillTemplateFunction(inplaceOperator,{name:operator[1],op:operator[0]})),inplaceOpS=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[1]+'S',op:operator[0]})),inplaceOpM=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[1]+'M',op:operator[0]})),staticOp=eval(fillTemplateFunction(staticOperator,{name:operator[1]}));for(i=1;i<operator.length;i++)Matrix.prototype[operator[i]]=inplaceOp,Matrix.prototype[operator[i]+'S']=inplaceOpS,Matrix.prototype[operator[i]+'M']=inplaceOpM,Matrix[operator[i]]=staticOp}var methods=[['~','not']];['abs','acos','acosh','asin','asinh','atan','atanh','cbrt','ceil','clz32','cos','cosh','exp','expm1','floor','fround','log','log1p','log10','log2','round','sign','sin','sinh','sqrt','tan','tanh','trunc'].forEach(function(E){methods.push(['Math.'+E,E])});for(var method of methods){var inplaceMeth=eval(fillTemplateFunction(inplaceMethod,{name:method[1],method:method[0]})),staticMeth=eval(fillTemplateFunction(staticMethod,{name:method[1]}));for(i=1;i<method.length;i++)Matrix.prototype[method[i]]=inplaceMeth,Matrix[method[i]]=staticMeth}var methodsWithArgs=[['Math.pow',1,'pow']];for(var methodWithArg of methodsWithArgs){var args='arg0';for(i=1;i<methodWithArg[1];i++)args+=`, arg${i}`;if(1!==methodWithArg[1]){var inplaceMethWithArgs=eval(fillTemplateFunction(inplaceMethodWithArgs,{name:methodWithArg[2],method:methodWithArg[0],args:args})),staticMethWithArgs=eval(fillTemplateFunction(staticMethodWithArgs,{name:methodWithArg[2],args:args}));for(i=2;i<methodWithArg.length;i++)Matrix.prototype[methodWithArg[i]]=inplaceMethWithArgs,Matrix[methodWithArg[i]]=staticMethWithArgs}else{var tmplVar={name:methodWithArg[2],args:args,method:methodWithArg[0]},inplaceMethod2=eval(fillTemplateFunction(inplaceMethodWithOneArg,tmplVar)),inplaceMethodS=eval(fillTemplateFunction(inplaceMethodWithOneArgScalar,tmplVar)),inplaceMethodM=eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix,tmplVar)),staticMethod2=eval(fillTemplateFunction(staticMethodWithOneArg,tmplVar));for(i=2;i<methodWithArg.length;i++)Matrix.prototype[methodWithArg[i]]=inplaceMethod2,Matrix.prototype[methodWithArg[i]+'M']=inplaceMethodM,Matrix.prototype[methodWithArg[i]+'S']=inplaceMethodS,Matrix[methodWithArg[i]]=staticMethod2}}return Matrix}module.exports=abstractMatrix;var LuDecomposition=__webpack_require__(48),SvDecomposition=__webpack_require__(49),arrayUtils=__webpack_require__(38),util=__webpack_require__(8),MatrixTransposeView=__webpack_require__(132),MatrixRowView=__webpack_require__(129),MatrixSubView=__webpack_require__(131),MatrixSelectionView=__webpack_require__(130),MatrixColumnView=__webpack_require__(126),MatrixFlipRowView=__webpack_require__(128),MatrixFlipColumnView=__webpack_require__(127)},function(E,D,I){'use strict';function R(T){if(!(this instanceof R))return new R(T);T=P.Matrix.checkMatrix(T);var F=T.clone(),O=F.rows,$=F.columns,Z=Array(O),W=1,K,Q,G,ee,te,ne,ae,se,oe,le;for(K=0;K<O;K++)Z[K]=K;for(oe=Array(O),Q=0;Q<$;Q++){for(K=0;K<O;K++)oe[K]=F[K][Q];for(K=0;K<O;K++){for(se=F[K],le=_Mathmin(K,Q),te=0,G=0;G<le;G++)te+=se[G]*oe[G];se[Q]=oe[K]-=te}for(ee=Q,K=Q+1;K<O;K++)_Mathabs(oe[K])>_Mathabs(oe[ee])&&(ee=K);if(ee!==Q){for(G=0;G<$;G++)ne=F[ee][G],F[ee][G]=F[Q][G],F[Q][G]=ne;ae=Z[ee],Z[ee]=Z[Q],Z[Q]=ae,W=-W}if(Q<O&&0!==F[Q][Q])for(K=Q+1;K<O;K++)F[K][Q]/=F[Q][Q]}this.LU=F,this.pivotVector=Z,this.pivotSign=W}var P=I(1);R.prototype={isSingular:function(){for(var T=this.LU,F=T.columns,O=0;O<F;O++)if(0===T[O][O])return!0;return!1},get determinant(){var T=this.LU;if(!T.isSquare())throw new Error('Matrix must be square');for(var F=this.pivotSign,O=T.columns,$=0;$<O;$++)F*=T[$][$];return F},get lowerTriangularMatrix(){for(var T=this.LU,F=T.rows,O=T.columns,$=new P.Matrix(F,O),Z=0;Z<F;Z++)for(var W=0;W<O;W++)$[Z][W]=Z>W?T[Z][W]:Z===W?1:0;return $},get upperTriangularMatrix(){for(var T=this.LU,F=T.rows,O=T.columns,$=new P.Matrix(F,O),Z=0;Z<F;Z++)for(var W=0;W<O;W++)$[Z][W]=Z<=W?T[Z][W]:0;return $},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(T){T=P.Matrix.checkMatrix(T);var F=this.LU,O=F.rows;if(O!==T.rows)throw new Error('Invalid matrix dimensions');if(this.isSingular())throw new Error('LU matrix is singular');var $=T.columns,Z=T.subMatrixRow(this.pivotVector,0,$-1),W=F.columns,K,Q,G;for(G=0;G<W;G++)for(K=G+1;K<W;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*F[K][G];for(G=W-1;0<=G;G--){for(Q=0;Q<$;Q++)Z[G][Q]/=F[G][G];for(K=0;K<G;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*F[K][G]}return Z}},E.exports=R},function(E,D,I){'use strict';function R($,Z){if(!(this instanceof R))return new R($,Z);$=P.Matrix.checkMatrix($),Z=Z||{};var W=$.rows,K=$.columns,Q=_Mathmin(W,K),G=!0,ee=!0;!1===Z.computeLeftSingularVectors&&(G=!1),!1===Z.computeRightSingularVectors&&(ee=!1);var te=!0===Z.autoTranspose,ne=!1,ae;if(!(W<K))ae=$.clone();else if(!te)ae=$.clone(),console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');else{ae=$.transpose(),W=ae.rows,K=ae.columns,ne=!0;var se=G;G=ee,ee=se}var oe=Array(_Mathmin(W+1,K)),le=O(W,Q,0),de=O(K,K,0),ue=Array(K),he=Array(W),ce=_Mathmin(W-1,K),ge=_Mathmax(0,_Mathmin(K-2,W)),pe,me,fe,xe,be,ye,_e,ke,we,je,Se,ve,Ce,Ee,De,Ie,Ae,Re,Pe,Te,Fe;for(fe=0,je=_Mathmax(ce,ge);fe<je;fe++){if(fe<ce){for(oe[fe]=0,pe=fe;pe<W;pe++)oe[fe]=F(oe[fe],ae[pe][fe]);if(0!==oe[fe]){for(0>ae[fe][fe]&&(oe[fe]=-oe[fe]),pe=fe;pe<W;pe++)ae[pe][fe]/=oe[fe];ae[fe][fe]+=1}oe[fe]=-oe[fe]}for(me=fe+1;me<K;me++){if(fe<ce&&0!==oe[fe]){for(be=0,pe=fe;pe<W;pe++)be+=ae[pe][fe]*ae[pe][me];for(be=-be/ae[fe][fe],pe=fe;pe<W;pe++)ae[pe][me]+=be*ae[pe][fe]}ue[me]=ae[fe][me]}if(G&&fe<ce)for(pe=fe;pe<W;pe++)le[pe][fe]=ae[pe][fe];if(fe<ge){for(ue[fe]=0,pe=fe+1;pe<K;pe++)ue[fe]=F(ue[fe],ue[pe]);if(0!==ue[fe]){for(0>ue[fe+1]&&(ue[fe]=0-ue[fe]),pe=fe+1;pe<K;pe++)ue[pe]/=ue[fe];ue[fe+1]+=1}if(ue[fe]=-ue[fe],fe+1<W&&0!==ue[fe]){for(pe=fe+1;pe<W;pe++)he[pe]=0;for(me=fe+1;me<K;me++)for(pe=fe+1;pe<W;pe++)he[pe]+=ue[me]*ae[pe][me];for(me=fe+1;me<K;me++)for(be=-ue[me]/ue[fe+1],pe=fe+1;pe<W;pe++)ae[pe][me]+=be*he[pe]}if(ee)for(pe=fe+1;pe<K;pe++)de[pe][fe]=ue[pe]}}if(xe=_Mathmin(K,W+1),ce<K&&(oe[ce]=ae[ce][ce]),W<xe&&(oe[xe-1]=0),ge+1<xe&&(ue[ge]=ae[ge][xe-1]),ue[xe-1]=0,G){for(me=ce;me<Q;me++){for(pe=0;pe<W;pe++)le[pe][me]=0;le[me][me]=1}for(fe=ce-1;0<=fe;fe--)if(0!==oe[fe]){for(me=fe+1;me<Q;me++){for(be=0,pe=fe;pe<W;pe++)be+=le[pe][fe]*le[pe][me];for(be=-be/le[fe][fe],pe=fe;pe<W;pe++)le[pe][me]+=be*le[pe][fe]}for(pe=fe;pe<W;pe++)le[pe][fe]=-le[pe][fe];for(le[fe][fe]=1+le[fe][fe],pe=0;pe<fe-1;pe++)le[pe][fe]=0}else{for(pe=0;pe<W;pe++)le[pe][fe]=0;le[fe][fe]=1}}if(ee)for(fe=K-1;0<=fe;fe--){if(fe<ge&&0!==ue[fe])for(me=fe+1;me<K;me++){for(be=0,pe=fe+1;pe<K;pe++)be+=de[pe][fe]*de[pe][me];for(be=-be/de[fe+1][fe],pe=fe+1;pe<K;pe++)de[pe][me]+=be*de[pe][fe]}for(pe=0;pe<K;pe++)de[pe][fe]=0;de[fe][fe]=1}for(var ze=xe-1,Me=0,Xe=2.220446049250313e-16;0<xe;){for(fe=xe-2;-1<=fe&&-1!==fe;fe--)if(_Mathabs(ue[fe])<=Xe*(_Mathabs(oe[fe])+_Mathabs(oe[fe+1]))){ue[fe]=0;break}if(fe===xe-2)Se=4;else{for(ye=xe-1;ye>=fe&&ye!==fe;ye--)if(be=(ye===xe?0:_Mathabs(ue[ye]))+(ye===fe+1?0:_Mathabs(ue[ye-1])),_Mathabs(oe[ye])<=Xe*be){oe[ye]=0;break}ye===fe?Se=3:ye===xe-1?Se=1:(Se=2,fe=ye)}switch(fe++,Se){case 1:{for(_e=ue[xe-2],ue[xe-2]=0,me=xe-2;me>=fe;me--)if(be=F(oe[me],_e),ke=oe[me]/be,we=_e/be,oe[me]=be,me!==fe&&(_e=-we*ue[me-1],ue[me-1]=ke*ue[me-1]),ee)for(pe=0;pe<K;pe++)be=ke*de[pe][me]+we*de[pe][xe-1],de[pe][xe-1]=-we*de[pe][me]+ke*de[pe][xe-1],de[pe][me]=be;break}case 2:{for(_e=ue[fe-1],ue[fe-1]=0,me=fe;me<xe;me++)if(be=F(oe[me],_e),ke=oe[me]/be,we=_e/be,oe[me]=be,_e=-we*ue[me],ue[me]=ke*ue[me],G)for(pe=0;pe<W;pe++)be=ke*le[pe][me]+we*le[pe][fe-1],le[pe][fe-1]=-we*le[pe][me]+ke*le[pe][fe-1],le[pe][me]=be;break}case 3:{for(ve=_Mathmax(_Mathmax(_Mathmax(_Mathmax(_Mathabs(oe[xe-1]),_Mathabs(oe[xe-2])),_Mathabs(ue[xe-2])),_Mathabs(oe[fe])),_Mathabs(ue[fe])),Ce=oe[xe-1]/ve,Ee=oe[xe-2]/ve,De=ue[xe-2]/ve,Ie=oe[fe]/ve,Ae=ue[fe]/ve,Re=((Ee+Ce)*(Ee-Ce)+De*De)/2,Pe=Ce*De*(Ce*De),Te=0,(0!==Re||0!==Pe)&&(Te=_Mathsqrt(Re*Re+Pe),0>Re&&(Te=-Te),Te=Pe/(Re+Te)),_e=(Ie+Ce)*(Ie-Ce)+Te,Fe=Ie*Ae,me=fe;me<xe-1;me++){if(be=F(_e,Fe),ke=_e/be,we=Fe/be,me!==fe&&(ue[me-1]=be),_e=ke*oe[me]+we*ue[me],ue[me]=ke*ue[me]-we*oe[me],Fe=we*oe[me+1],oe[me+1]=ke*oe[me+1],ee)for(pe=0;pe<K;pe++)be=ke*de[pe][me]+we*de[pe][me+1],de[pe][me+1]=-we*de[pe][me]+ke*de[pe][me+1],de[pe][me]=be;if(be=F(_e,Fe),ke=_e/be,we=Fe/be,oe[me]=be,_e=ke*ue[me]+we*oe[me+1],oe[me+1]=-we*ue[me]+ke*oe[me+1],Fe=we*ue[me+1],ue[me+1]=ke*ue[me+1],G&&me<W-1)for(pe=0;pe<W;pe++)be=ke*le[pe][me]+we*le[pe][me+1],le[pe][me+1]=-we*le[pe][me]+ke*le[pe][me+1],le[pe][me]=be}ue[xe-2]=_e,++Me;break}case 4:{if(0>=oe[fe]&&(oe[fe]=0>oe[fe]?-oe[fe]:0,ee))for(pe=0;pe<=ze;pe++)de[pe][fe]=-de[pe][fe];for(;fe<ze&&!(oe[fe]>=oe[fe+1]);){if(be=oe[fe],oe[fe]=oe[fe+1],oe[fe+1]=be,ee&&fe<K-1)for(pe=0;pe<K;pe++)be=de[pe][fe+1],de[pe][fe+1]=de[pe][fe],de[pe][fe]=be;if(G&&fe<W-1)for(pe=0;pe<W;pe++)be=le[pe][fe+1],le[pe][fe+1]=le[pe][fe],le[pe][fe]=be;fe++}Me=0,xe--;break}}}if(ne){var Ye=de;de=le,le=Ye}this.m=W,this.n=K,this.s=oe,this.U=le,this.V=de}var P=I(1),T=I(18),F=T.hypotenuse,O=T.getFilled2DArray;R.prototype={get condition(){return this.s[0]/this.s[_Mathmin(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var Z=_Mathmax(this.m,this.n)*this.s[0]*2.220446049250313e-16,W=0,K=this.s,Q=0,G=K.length;Q<G;Q++)K[Q]>Z&&W++;return W},get diagonal(){return this.s},get threshold(){return 2.220446049250313e-16/2*_Mathmax(this.m,this.n)*this.s[0]},get leftSingularVectors(){return P.Matrix.isMatrix(this.U)||(this.U=new P.Matrix(this.U)),this.U},get rightSingularVectors(){return P.Matrix.isMatrix(this.V)||(this.V=new P.Matrix(this.V)),this.V},get diagonalMatrix(){return P.Matrix.diag(this.s)},solve:function($){var W=this.threshold,K=this.s.length,Q=P.Matrix.zeros(K,K),G;for(G=0;G<K;G++)Q[G][G]=_Mathabs(this.s[G])<=W?0:1/this.s[G];var ee=this.U,te=this.rightSingularVectors,ne=te.mmul(Q),ae=te.rows,se=ee.length,oe=P.Matrix.zeros(ae,se),le,de,ue;for(G=0;G<ae;G++)for(le=0;le<se;le++){for(ue=0,de=0;de<K;de++)ue+=ne[G][de]*ee[le][de];oe[G][le]=ue}return oe.mmul($)},solveForDiagonal:function($){return this.solve(P.Matrix.diag($))},inverse:function(){var $=this.V,Z=this.threshold,W=$.length,K=$[0].length,Q=new P.Matrix(W,this.s.length),G,ee;for(G=0;G<W;G++)for(ee=0;ee<K;ee++)Q[G][ee]=_Mathabs(this.s[ee])>Z?$[G][ee]/this.s[ee]:0;var te=this.U,ne=te.length,ae=te[0].length,se=new P.Matrix(W,ne),oe,le;for(G=0;G<W;G++)for(ee=0;ee<ne;ee++){for(le=0,oe=0;oe<ae;oe++)le+=Q[G][oe]*te[ee][oe];se[G][ee]=le}return se}},E.exports=R},function(E,D,I){'use strict';D.SpinSystem=I(133),D.simulate1D=I(135),D.simulate2D=I(136)},function(E,D,I){'use strict';function R(T){if('number'!=typeof T||P(T))throw new TypeError('Expected a number')}var P=I(137);D.asc=function(T,F){return R(T),R(F),T-F},D.desc=function(T,F){return R(T),R(F),F-T}},function(E,D,I){'use strict';function R(Z,W){if(65537>W&&(Z.subarray&&F||!Z.subarray&&T))return _StringfromCharCode.apply(null,P.shrinkBuf(Z,W));for(var K='',Q=0;Q<W;Q++)K+=_StringfromCharCode(Z[Q]);return K}var P=I(2),T=!0,F=!0;try{_StringfromCharCode.apply(null,[0])}catch(Z){T=!1}try{_StringfromCharCode.apply(null,new Uint8Array(1))}catch(Z){F=!1}for(var O=new P.Buf8(256),$=0;256>$;$++)O[$]=252<=$?6:248<=$?5:240<=$?4:224<=$?3:192<=$?2:1;O[254]=O[254]=1,D.string2buf=function(Z){var te=Z.length,ne=0,W,K,Q,G,ee;for(G=0;G<te;G++)K=Z.charCodeAt(G),55296==(64512&K)&&G+1<te&&(Q=Z.charCodeAt(G+1),56320==(64512&Q)&&(K=65536+(K-55296<<10)+(Q-56320),G++)),ne+=128>K?1:2048>K?2:65536>K?3:4;for(W=new P.Buf8(ne),ee=0,G=0;ee<ne;G++)K=Z.charCodeAt(G),55296==(64512&K)&&G+1<te&&(Q=Z.charCodeAt(G+1),56320==(64512&Q)&&(K=65536+(K-55296<<10)+(Q-56320),G++)),128>K?W[ee++]=K:2048>K?(W[ee++]=192|K>>>6,W[ee++]=128|63&K):65536>K?(W[ee++]=224|K>>>12,W[ee++]=128|63&K>>>6,W[ee++]=128|63&K):(W[ee++]=240|K>>>18,W[ee++]=128|63&K>>>12,W[ee++]=128|63&K>>>6,W[ee++]=128|63&K);return W},D.buf2binstring=function(Z){return R(Z,Z.length)},D.binstring2buf=function(Z){for(var W=new P.Buf8(Z.length),K=0,Q=W.length;K<Q;K++)W[K]=Z.charCodeAt(K);return W},D.buf2string=function(Z,W){var K,Q,G,ee,te=W||Z.length,ne=Array(2*te);for(Q=0,K=0;K<te;){if(G=Z[K++],128>G){ne[Q++]=G;continue}if(ee=O[G],4<ee){ne[Q++]=65533,K+=ee-1;continue}for(G&=2===ee?31:3===ee?15:7;1<ee&&K<te;)G=G<<6|63&Z[K++],ee--;if(1<ee){ne[Q++]=65533;continue}65536>G?ne[Q++]=G:(G-=65536,ne[Q++]=55296|1023&G>>10,ne[Q++]=56320|1023&G)}return R(ne,Q)},D.utf8border=function(Z,W){var K;for(W=W||Z.length,W>Z.length&&(W=Z.length),K=W-1;0<=K&&128==(192&Z[K]);)K--;return 0>K?W:0===K?W:K+O[Z[K]]>W?K:W}},function(E){'use strict';E.exports=function(P,T,F,O){for(var $=0|65535&P,Z=0|65535&P>>>16,W=0;0!==F;){W=2e3<F?2e3:F,F-=W;do $=0|$+T[O++],Z=0|Z+$;while(--W);$%=65521,Z%=65521}return 0|($|Z<<16)}},function(E){'use strict';E.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(E){'use strict';var T=function(){for(var O=[],$=0,F;256>$;$++){F=$;for(var Z=0;8>Z;Z++)F=1&F?3988292384^F>>>1:F>>>1;O[$]=F}return O}();E.exports=function(F,O,$,Z){F^=-1;for(var Q=Z;Q<Z+$;Q++)F=F>>>8^T[255&(F^O[Q])];return-1^F}},function(E){'use strict';E.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg='',this.state=null,this.data_type=2,this.adler=0}},function(E){var I=function(){return this}();try{I=I||Function('return this')()||(1,eval)('this')}catch(R){'object'==typeof window&&(I=window)}E.exports=I},function(E,D,I){'use strict';var R=I(9),P=I(22),T=I(26),F=I(70),O=I(50);class $ extends R{constructor(Z){super(Z)}static fromPrediction(Z,W){var K=O.SpinSystem.fromPrediction(Z),Q=Object.assign({},W,{nbPoints:16384,maxClusterSize:8,output:'xy'});K.ensureClusterSize(Q);var G=O.simulate1D(K,Q);return $.fromXY(G.x,G.y,W)}static fromXY(Z,W,K){var Q={profiling:[],logs:[]},G=[];Q.spectra=G,Q.info={};var ee={};return ee.isXYdata=!0,ee.nbPoints=Z.length,ee.firstX=Z[0],ee.firstY=W[0],ee.lastX=Z[ee.nbPoints-1],ee.lastY=W[ee.nbPoints-1],ee.xFactor=1,ee.yFactor=1,ee.xUnit=K.xUnit||'PPM',ee.yUnit=K.yUnit||'Intensity',ee.deltaX=(ee.lastX-ee.firstX)/(ee.nbPoints-1),ee.title=K.title||'spectra-data from xy',ee.dataType=K.dataType||'NMR',ee.observeFrequency=K.frequency||400,Q.info.observefrequency=ee.observeFrequency,Q.info['.SOLVENTNAME']=K.solvent||'none',Q.info.$SW_h=_Mathabs(ee.lastX-ee.firstX)*ee.observeFrequency,Q.info.$SW=_Mathabs(ee.lastX-ee.firstX),Q.info.$TD=ee.nbPoints,Q.xType=K.nucleus||'1H',ee.data=[{x:Z,y:W}],Q.twoD=!1,G.push(ee),new $(Q)}static fromBruker(Z,W){W=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},W);var K=null;return K=Array.isArray(Z)?T.converFolder(Z,W):T.convertZip(Z,W),K?K.map(function(Q){return new $(Q)}):null}getNucleus(Z){return Z&&0!==Z&&1!==Z?'':this.sd.xType}getSolventName(){return(this.sd.info['.SOLVENTNAME']||this.sd.info.$SOLVENT||'').replace('<','').replace('>','')}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}getNMRPeakThreshold(Z){return'1H'===Z?3:'13C'===Z?5:1}fourierTransform(){return P.fourierTransform(this)}postFourierTransform(Z){return P.phaseCorrection(0,Z)}zeroFilling(Z,W){return P.zeroFilling(this,Z,W)}brukerFilter(){return P.digitalFilter(this,{brukerFilter:!0})}digitalFilter(Z){return P.digitalFilter(this,Z)}apodization(Z,W){return P.apodization(this,{functionName:Z,lineBroadening:W})}echoAntiechoFilter(){return this}SNVFilter(){return this}powerFilter(Z){var W=this.getMinY();return 1>Z&&0>W&&this.YShift(-1*W),this}phaseCorrection(Z,W){return P.phaseCorrection(this,Z,W)}getRanges(Z){if(this.ranges)return this.ranges;var W=this.getPeaks(Z),K=Object.assign({},{nH:this.totalIntegral},Z);return F(this,W,K)}createRanges(Z){return this.ranges=null,this.peaks=null,this.ranges=this.getRanges(Z),this.ranges}}E.exports=$},function(E,D,I){'use strict';var R=I(9),P=I(69),T=I(23),F=I(26),O=I(22),$=I(6).array,Z=I(50).simulate2D;class W extends R{constructor(K){super(K)}static fromPrediction(K,Q){var G=Z(K,Q),ee=W.fromMatrix(G,Q),te=ee.toJcamp({type:'NTUPLES'});return W.fromJcamp(te)}static fromBruker(K,Q){Q=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},Q);var G=null;return G=Array.isArray(K)?F.converFolder(K,Q):F.convertZip(K,Q),G?G.map(function(ee){return new W(ee)}):null}static fromMatrix(K,Q){var G={profiling:[],logs:[]},ee=[],te=K[0].length;G.spectra=ee,G.info={};var ne=Q.firstY||0,ae=Q.lastY||K.length-1,se=(ae-ne)/(K.length-1),oe=Q.firstX||0,le=Q.lastX||te-1,ue=Q.x;if(!ue){ue=Array(te);for(var he=0;he<te;he++)ue[he]=oe+(ae-ne)/(te-1)*he}var ce=Q.frequencyX||400,ge=_NumberMAX_SAFE_INTEGER,pe=_NumberMIN_SAFE_INTEGER;return K.forEach((me,fe)=>{var xe={};xe.isXYdata=!0,xe.nbPoints=te,xe.firstX=oe,xe.firstY=me[0],xe.lastX=le,xe.lastY=me[xe.nbPoints-1],xe.xFactor=1,xe.yFactor=1,xe.deltaX=(xe.lastX-xe.firstX)/(xe.nbPoints-1),xe.title=Q.title||'spectra-data from matrix',xe.dataType=Q.dataType||'nD NMR SPECTRUM',xe.observeFrequency=ce,xe.data=[{x:ue,y:me}],xe.page=ne+fe*se,G.xType=Q.xType||Q.nucleusX||'1H',ee.push(xe);var be=$.minMax(me);ge=_Mathmin(ge,be.min),pe=_Mathmax(pe,be.max)}),G.ntuples=[{units:Q.xUnit||'PPM'},{units:Q.yUnit||'PPM'},{units:Q.zUnit||'Intensity'}],G.info['2D_Y_FREQUENCY']=Q.frequencyY||400,G.info['2D_X_FREQUENCY']=Q.frequencyX||400,G.info.observefrequency=G.info['2D_X_FREQUENCY'],G.info.$BF1=G.info.observefrequency,G.info['.SOLVENTNAME']=Q.solvent||'none',G.info.$SW_h=_Mathabs(le-oe)*ce,G.info.$SW=_Mathabs(le-oe),G.info.$TD=te,G.info.firstY=ne,G.info.lastY=ae,G.minMax={minY:ne,maxY:ae,minX:oe,maxX:le,minZ:ge,maxZ:pe},G.yType=Q.yType||Q.nucleusY||'1H',G.twoD=!0,new W(G)}isHomoNuclear(){return this.sd.xType===this.sd.yType}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}observeFrequencyY(){return this.sd.indirectFrequency}getSolventName(){return(this.sd.info['.SOLVENTNAME']||this.sd.info.$SOLVENT).replace('<','').replace('>','')}getXUnits(){return this.sd.ntuples[1].units}getYUnits(){return this.sd.ntuples[0].units}getZUnits(){return this.sd.ntuples[2].units}getLastY(){return this.sd.minMax.maxY}getFirstY(){return this.sd.minMax.minY}getDeltaY(){return(this.getLastY()-this.getFirstY())/(this.getNbSubSpectra()-1)}getMinZ(){return this.sd.minMax.minZ}getMaxZ(){return this.sd.minMax.maxZ}getZones(K){K=K||{},K.thresholdFactor||(K.thresholdFactor=1);var Q=_Mathround(255*Math.random());K.idPrefix&&(Q=K.idPrefix);for(var G=P(this,K.thresholdFactor),ee=0;ee<G.length;ee++)G[ee]._highlight=[Q+'_'+ee],G[ee].signalID=Q+'_'+ee;if(K.references&&T.alignDimensions(G,K.references),'new'===K.format){for(var te=Array(G.length),ne=G.length-1,ae;0<=ne;ne--)ae=G[ne],te[ne]={fromTo:ae.fromTo,integral:ae.intensity||1,remark:'',signal:[{peak:ae.peaks,delta:[ae.shiftX,ae.shiftY]}],_highlight:ae._highlight,signalID:ae.signalID};G=te}return this.zones=G,this.zones}getNMRPeakThreshold(K){return'1H'===K?3:'13C'===K?5:1}getNucleus(K){return 1===K?this.sd.xType:2===K?this.sd.yType:this.sd.xType}zeroFilling(K,Q){return O.zeroFilling(this,K,Q)}brukerFilter(){return O.digitalFilter(this,{brukerFilter:!0})}digitalFilter(K){return O.digitalFilter(this,K)}fourierTransform(){return O.fourierTransform(this)}postFourierTransform(K){return O.phaseCorrection(0,K)}}E.exports=W},function(E){'use strict';E.exports=function(P,T){var F=Object.assign({},T);return F?P:P}},function(E,D,I){'use strict';var P=I(64);E.exports=function(T,F){var O=T.activeElement,$=0;F.nbPoints?$=F.nbPoints:F.brukerFilter&&($=0);var Z=T.getNbSubSpectra();if(0!==$)for(var W=0;W<Z;W++)T.setActiveElement(W),P(T.getYData(),$),F.rotateX&&(P(T.getXData(),$),T.setFirstX(T.getX(0)),T.setLastX(T.getX(T.getNbPoints()-1)));return T.setActiveElement(O),T}},function(E,D,I){'use strict';function P(F,O){var $=F.getParamDouble('$BF1',NaN),Z=F.getParamDouble('$SFO1',NaN),W=F.getParamDouble('$SW',NaN),K=1e6*((Z-$)/$),Q=0.5*W*Z/$;F.setDataType(O),F.setFirstX(K+Q),F.setLastX(K-Q),F.setXUnits('PPM');var G=F.getXData(),ee=K+Q;Q=-2*Q/(G.length-1);for(var te=0;te<G.length;te++)G[te]=ee,ee+=Q}var T=I(14);E.exports=function(F){var O=F.getNbPoints(),$=F.getNbSubSpectra()/2,Z='NMR SPECTRUM',W=T.FFT;1<$&&(Z='nD NMR SPECTRUM'),W.init(O);for(var K=F.getParamDouble('$FCOR',0),Q=0;Q<$;Q++){var G=F.getYData(2*Q),ee=F.getYData(2*Q+1);G[0]*=K,ee[0]*=K,W.fft(G,ee),G=G.concat(G.slice(0,(O+1)/2)),G.splice(0,(O+1)/2),ee=ee.concat(ee.slice(0,(O+1)/2)),ee.splice(0,(O+1)/2),F.setActiveElement(2*Q),P(F,Z),F.setActiveElement(2*Q+1),P(F,Z)}return F.is2D(),F.setActiveElement(0),F}},function(E){'use strict';E.exports=function(P,T,F){T=_NumberisFinite(T)?T:0,F=_NumberisFinite(F)?F:0;for(var O=P.getNbPoints(),$=P.getYData(0),Z=P.getYData(1),W=F/O,K=2*_Mathpow(_Mathsin(W/2),2),Q=_Mathsin(W),G=Math.cos(T),ee=_Mathsin(T),le=0,te,ne,ae,se,oe;le<O;le++)oe=O-le-1,oe=le,ae=$[oe]*G-Z[oe]*ee,se=$[oe]*ee+Z[oe]*G,$[oe]=ae,Z[oe]=se,te=G-(K*G+Q*ee),ne=ee-(K*ee-Q*G),G=te,ee=ne;return P.resetMinMax(),P.putParam('PHC0',T),P.putParam('PHC1',F),P}},function(E){'use strict';function P(T,F){return 0>T&&(T+=F),T>=F&&(T-=F),T}E.exports=function(T,F){var O=T.length;if(F%=O,_Mathabs(F)>O/2&&(F=0<F?F-O:F+O),0!==F)for(var $=0,Z=F,W=O,K=T[$],G=F,ee=0<F?1:-1,Q;0<W;)Z=P(Z,O),Q=T[Z],T[Z]=K,Z+=F,K=Q,W--,Z===G&&(Z=P(Z+ee,O),G=Z,$=P(Z-F,O),K=T[$])}},function(E){'use strict';E.exports=function(P,T){var F=P.getNbSubSpectra(),O,$,Z,W,K,Q;if(0!==T)for(var G=0;G<F;G++){for(P.setActiveElement(G),O=P.getNbPoints(),Q=P.getYData(),K=P.getXData(),$=P.getLastX(),Z=($-K[0])/(O-1),W=O;W<T;W++)Q.push(0),K.push($+Z);T<O&&(Q.splice(T,Q.length-1),K.splice(T,K.length-1)),P.setFirstX(K[0]),P.setLastX(K[K.length-1])}return P.setActiveElement(0),P}},function(E,D,I){'use strict';function R(K,Q,G,ee,te){var ne='',ae=K.getSpectraVariable(0),se=K.getSpectraVariable(1),oe=K.getSpectraVariable(2);ne+='##DATA CLASS= NTUPLES'+O,ne+='##NUM DIM= 2'+O;var le=K.getDataType().trim(),de={},ue;for(ue=0;ue<K.getNbSubSpectra();ue++)K.setActiveElement(ue),de[K.getXUnits()]?de[K.getXUnits()].value++:de[K.getXUnits()]={value:1,index:ue};var he=Object.keys(de),ce=he[0],ge=0;for(ue=1;ue<he.length;ue++)de[he[ue]].value>de[ce].value&&(ce=he[ue],ge=de[he[ue]].index);var pe=!1;K.setActiveElement(ge);var me=0<=K.getDataType().indexOf('NMR');me&&(ne+='##.OBSERVE FREQUENCY= '+K.getParamDouble('observefrequency',0)+O,ne+='##.OBSERVE NUCLEUS= ^'+K.getNucleus()+O,ne+='##$DECIM= '+K.getParamDouble('$DECIM',0)+O,ne+='##$DSPFVS= '+K.getParamDouble('$DSPFVS',0)+O,ne+='##$FCOR= '+_Mathfloor(K.getParamDouble('$FCOR',0))+O,K.containsParam('$SW_h')?ne+='##$SW_h= '+K.getParamDouble('$SW_h',0)+O:K.containsParam('$SW_p')&&(ne+='##$SW_p= '+K.getParamDouble('$SW_p',0)+O),ne+='##$SW= '+K.getParamDouble('$SW',0)+O,ne+='##$TD= '+_Mathfloor(K.getParamDouble('$TD',0))+O,ne+='##$BF1= '+K.getParamDouble('$BF1',0)+O,ne+='##$GRPDLY= '+K.getParamDouble('$GRPDLY',0)+O,ne+='##.DIGITISER RES= '+K.getParamInt('.DIGITISER RES',0)+O,ne+='##.PULSE SEQUENCE= '+K.getParamString('.PULSE SEQUENCE','')+O,ne+='##.SOLVENT NAME= '+K.getSolventName()+O,ne+='##$NUC1= <'+K.getNucleus()+'>'+O,ne+=K.containsParam('2D_X_FREQUENCY')?'##$SFO1= '+K.getParamDouble('2D_X_FREQUENCY',0)+O:'##$SFO1= '+K.getParamDouble('$SFO1',0)+O,K.containsParam('2D_X_OFFSET')&&(ne+='##$OFFSET= '+K.getParamDouble('2D_X_OFFSET',0)+O),K.is2D()&&(ne+='$$Parameters for 2D NMR Spectrum'+O,ne+='##$NUC1= <'+K.getNucleus(2)+'>'+O,K.containsParam('2D_Y_FREQUENCY')&&(ne+='##$SFO1= '+K.getParamDouble('2D_Y_FREQUENCY',0)+O,ne+='##$SFO2= '+K.getParamDouble('2D_Y_FREQUENCY',0)+O,ne+='##$BF2= '+K.getParamDouble('2D_Y_FREQUENCY',0)+O),K.containsParam('2D_Y_OFFSET')&&(ne+='##$OFFSET= '+K.getParamDouble('2D_Y_OFFSET',0)+O),ne+='$$End of Parameters for 2D NMR Spectrum'+O)),ne+='##NTUPLES=\t'+le+O;var fe=1,xe=1;if(!K.is2D()&&1<K.getNbSubSpectra()&&me&&(pe=!0),pe?(ne+='##VAR_NAME=\t'+K.getXUnits()+',\t'+le.substring(4)+'/REAL,\t'+le.substring(4)+'/IMAG'+O,ne+='##SYMBOL=\tX,\tR,\tI'+O,ne+='##VAR_TYPE=\tINDEPENDENT,\tDEPENDENT,\tDEPENDENT'+O,ne+='CSV'!==ee||'PAC'!==ee?'##VAR_FORM=\tAFFN,\tASDF,\tASDF'+O:'##VAR_FORM=\tAFFN,\tAFFN,\tAFFN'+O,ne+='##VAR_DIM=\t'+K.getNbPoints()+',\t'+K.getNbPoints()+',\t'+K.getNbPoints()+O,ne+='##UNITS=\\tHZ,\\t'+K.getYUnits()+',\t'+oe.units+O,ne+='##FACTOR=\t'+1/G+',\t'+1/Q+',\t'+1/Q+O,'PPM'===K.getXUnits()&&(fe=K.observeFrequencyX()),ne+='##FIRST=\t'+K.getFirstX()*fe+',\t'+K.getY(0)+',\t0'+O,ne+='##LAST=\t'+K.getLastX()*fe+',\t'+K.getLastY()+',\t0'+O):(fe=1,K.is2D()?(ne+='##VAR_NAME=\tFREQUENCY1,\tFREQUENCY2,\tSPECTRUM'+O,ne+='##SYMBOL=\tF1,\tF2,\tY'+O,ne+='##.NUCLEUS=\t'+K.getNucleus(2)+',\t'+K.getNucleus(1)+O,ne+='##VAR_TYPE=\tINDEPENDENT,\tINDEPENDENT,\tDEPENDENT'+O,ne+='CSV'!==ee||'PAC'!==ee?'##VAR_FORM=\tAFFN,\tAFFN,\tASDF'+O:'##VAR_FORM=\tAFFN,\tAFFN,\tASDF'+O,ne+='##VAR_DIM=\t'+K.getNbSubSpectra()+',\t'+K.getNbPoints()+',\t'+K.getNbPoints()+O,ne+='##UNITS=\tHZ,\tHZ,\t'+K.getZUnits()+O,'PPM'===K.getXUnits()&&(fe=K.getParamDouble('2D_Y_FREQUENCY',1)),'PPM'===K.getYUnits()&&(xe=K.getParamDouble('2D_X_FREQUENCY',1)),ne+='##FACTOR=\t1,\t'+xe/G+',\t'+1/Q+O,ne+='##FIRST=\t'+K.getParamDouble('firstY',0)*fe+',\t'+K.getFirstX()*xe+',\t'+K.getY(0)+O,ne+='##LAST=\t'+K.getParamDouble('lastY',0)*fe+',\t'+K.getLastX()*xe+',\t'+K.getY(K.getNbPoints()-1)+O):(ne+='##VAR_NAME=\t'+ae.varname+',\t'+se.varname+',\t'+ae.varname+O,ne+='##SYMBOL=\t'+ae.symbol+',\t'+se.symbol+',\t'+oe.symbol+O,ne+='##VAR_TYPE=\t'+ae.vartype+',\t'+se.vartype+',\t'+oe.vartype+O,ne+='CSV'!==ee||'PAC'!==ee?'##VAR_FORM=\tAFFN,\tASDF,\tASDF'+O:'##VAR_FORM=\tAFFN,\tAFFN,\tAFFN'+O,ne+='##VAR_DIM=\t'+ae.vardim+',\t'+se.vardim+',\t'+oe.vardim+O,ne+='##UNITS=\\tHZ,\\t'+K.getYUnits()+',\t'+oe.units+O,'PPM'===K.getXUnits()&&(fe=K.observeFrequencyX()),ne+='##FACTOR=\t'+1/G+',\t'+1/Q+O,ne+='##FIRST=\t'+ae.first*fe+',\t'+se.first+',\t'+oe.first+O,ne+='##LAST=\t'+ae.last*fe+',\t'+se.last+',\t'+oe.last+O)),null!==te)for(var be=te.length-1;0<=be;be--)K.containsParam(te[be])&&(ne+='##'+te[be]+'= '+K.getParam(te[be],'')+O);var ye=0,_e=0,ke=1;for(K.is2D()&&me&&(ye=K.getParamDouble('firstY',0)*fe,_e=K.getParamDouble('lastY',0)*fe,ke=(_e-ye)/(K.getNbSubSpectra()-1)),ue=0;ue<K.getNbSubSpectra();ue++)if(K.setActiveElement(ue),ye=K.getParamDouble('firstY',0)*fe+ke*ue,ne+='##PAGE= '+ye+O,K.is2D()&&me&&(ne+='##FIRST=\t'+K.getParamDouble('firstY',0)*fe+',\t'+K.getFirstX()*xe+',\t'+K.getY(0)+O),ne+='##DATA TABLE= ',K.isDataClassPeak()){ne+='(XY..XY), PEAKS'+O;for(var we=0;we<K.getNbPoints();we++)ne+=K.getX(we)+', '+K.getY(we)+O}else if(K.isDataClassXY()){ne+=me?K.is2D()?'(F2++(Y..Y)), PROFILE'+O:0==ue%2?'(X++(R..R)), XYDATA'+O:'(X++(I..I)), XYDATA'+O:'(X++(Y..Y)), XYDATA'+O;for(var je='',Se=Array(K.getNbPoints()),ve=Se.length-1;0<=ve;ve--)Se[ve]=_Mathround(K.getY(ve)*Q);je+=T.encode(Se,K.getFirstX()*G,K.getDeltaX()*G,ee),ne+=je+O}return ne+='##END NTUPLES= '+le+O,ne+='##END= ',K.setActiveElement(0),ne}function P(K,Q,G,ee,te){var ne='';if(K.isDataClassPeak()&&(ne+='##DATA CLASS= PEAK TABLE'+O),K.isDataClassXY()&&(ne+='##DATA CLASS= XYDATA'+O),K.setActiveElement(0),0<=K.getDataType().indexOf('NMR')&&(ne+='##.OBSERVE FREQUENCY= '+K.getParamDouble('observefrequency',0)+O,ne+='##.OBSERVE NUCLEUS= ^'+K.getNucleus()+O,ne+='##$DECIM= '+_Mathround(K.getParamDouble('$DECIM',0))+O,ne+='##$DSPFVS= '+_Mathround(K.getParamDouble('$DSPFVS',0))+O,ne+='##$FCOR= '+_Mathround(K.getParamDouble('$FCOR',0))+O,ne+='##$SW_h= '+K.getParamDouble('$SW_h',0)+O,ne+='##$SW= '+K.getParamDouble('$SW',0)+O,ne+='##$TD= '+_Mathround(K.getParamDouble('$TD',0))+O,ne+='##$GRPDLY= '+K.getParamDouble('$GRPDLY',0)+O,ne+='##$BF1= '+K.getParamDouble('$BF1',0)+O,ne+='##$SFO1= '+K.getParamDouble('$SFO1',0)+O,ne+='##$NUC1= <'+K.getNucleus()+'>'+O,ne+='##.SOLVENT NAME= '+K.getSolventName()+O),ne+='##XUNITS=\t'+K.getXUnits()+O,ne+='##YUNITS=\t'+K.getYUnits()+O,ne+='##NPOINTS=\t'+K.getNbPoints()+O,ne+='##FIRSTX=\t'+K.getFirstX()+O,ne+='##LASTX=\t'+K.getLastX()+O,ne+='##FIRSTY=\t'+K.getFirstY()+O,ne+='##LASTY=\t'+K.getLastY()+O,K.isDataClassPeak()?(ne+='##XFACTOR=1'+O,ne+='##YFACTOR=1'+O):K.isDataClassXY()&&(ne+='##XFACTOR= '+1/G+O,ne+='##YFACTOR= '+1/Q+O),ne+='##MAXY= '+K.getMaxY()+O,ne+='##MINY= '+K.getMinY()+O,null!==te)for(var ae=te.length-1;0<=ae;ae--)K.containsParam(te[ae])&&(ne+='##'+te[ae]+'= '+K.getParam(te[ae],'')+O);if(K.isDataClassPeak()){ne+='##PEAK TABLE= (XY..XY)'+O;for(var se=0;se<K.getNbPoints();se++)ne+=K.getX(se)+', '+K.getY(se)+O;ne+='##END '}else if(K.isDataClassXY()){ne+='##DELTAX= '+K.getDeltaX()+O,ne+='##XYDATA=(X++(Y..Y))'+O;for(var oe='',le=Array(K.getNbPoints()),de=le.length-1;0<=de;de--)le[de]=_Mathround(K.getY(de)*Q);oe+=T.encode(le,K.getFirstX()*G,K.getDeltaX()*G,ee),ne+=oe+O,ne+='##END= '}return K.setActiveElement(0),ne}var T=I(67),F={MAX_VALUE:_NumberMAX_SAFE_INTEGER,MIN_VALUE:_NumberMIN_SAFE_INTEGER},O='\r\n',$='Cheminfo tools '+I(151).version,Z={encode:'DIFDUP',yFactor:1,type:'SIMPLE',keep:[]};E.exports=class{convert(K,Q){Q=Object.assign({},Z,Q);var G=Q.encode.toUpperCase().trim(),ee=Q.yFactor||1,te=Q.type,ne=Q.keep;(null===te||0===te.length)&&(te='SIMPLE');var ae='';K.setActiveElement(0);var se=ee/K.getParamDouble('YFACTOR',1),oe={};oe=K.is2D()?{min:K.getMinZ(),max:K.getMaxZ()}:K.getMinMaxY(),oe.max*se>=F.MAX_VALUE/2&&(se=F.MAX_VALUE/(2*oe.max)),16>_Mathabs(oe.max-oe.min)*se&&(se=16/_Mathabs(oe.max-oe.min));var le=_Mathabs(1/K.getDeltaX());return ae+='##TITLE= '+K.getTitle()+O,ae+='##JCAMP-DX= 5.00\t$$'+$+O,ae+='##OWNER= '+K.getParamString('##OWNER=','')+O,ae+='##DATA TYPE= '+K.getDataType()+O,'NTUPLES'===te&&(ae+=R(K,se,le,G,ne)),'SIMPLE'===te&&(ae+=P(K,se,le,G,ne)),ae}}},function(E){'use strict';function P(de,ue,he){return T(de,ue,he,',')}function T(de,ue,he,ce){ce||(ce=' ');for(var ge='',pe=0,me=de.length,fe;pe<me-7;){for(ge+=_Mathceil(ue+pe*he),fe=0;8>fe;fe++)ge+=ce+de[pe++];ge+=G}if(pe<me)for(ge+=_Mathceil(ue+pe*he),fe=pe;fe<me;fe++)ge+=ce+de[fe];return ge}function F(de,ue,he){for(var ce='',ge=0,pe=de.length,me;ge<pe-7;){for(ce+=_Mathceil(ue+ge*he),me=0;8>me;me++)ce+=0>de[ge]?'-'+de[ge++]:'+'+de[ge++];ce+=G}if(ge<pe)for(ce+=_Mathceil(ue+ge*he),me=ge;me<pe;me++)ce+=0>de[me]?'-'+de[me]:'+'+de[me];return ce}function O(de,ue,he){for(var ce='',ge=0,pe=de.length,me;ge<pe-10;){for(ce+=_Mathceil(ue+ge*he),me=0;10>me;me++)ce+=W(de[ge++].toString());ce+=G}if(ge<pe)for(ce+=_Mathceil(ue+ge*he),me=ge;me<pe;me++)ce+=W(de[me].toString());return ce}function $(de,ue,he){var ce=0,ge=0,pe=0,fe='',xe='',be='',ye=Array(de.length-1),me;for(me=0;me<ye.length;me++)ye[me]=de[me+1]-de[me];for(var _e=ye.length;ge<_e;)0==pe?(xe=_Mathceil(ue+ge*he)+W(de[ge].toString())+K(ye[ge].toString()),fe+=xe,pe+=xe.length):ye[ge-1]===ye[ge]?ce++:0<ce?(ce++,xe=Q(ce.toString()),fe+=xe,pe+=xe.length,ce=0,ge--):(xe=K(ye[ge].toString()),xe.length+pe<le?(fe+=xe,pe+=xe.length):(fe+=G,be=_Mathceil(ue+ge*he)+W(de[ge].toString())+xe,fe+=be,pe=be.length)),ge++;return 0<ce&&(fe+=Q((ce+1).toString())),fe+=G+_Mathceil(ue+ge*he)+W(de[ge].toString()),fe}function Z(de,ue,he){var ce=0,ge=0,me='',fe='',xe='',be=Array(de.length-1),pe;for(pe=0;pe<be.length;pe++)be[pe]=de[pe+1]-de[pe];ce=0;for(var ye=be.length;ce<ye;)0==ge?(fe=_Mathceil(ue+ce*he)+W(de[ce].toString())+K(be[ce].toString()),me+=fe,ge+=fe.length):(fe=K(be[ce].toString()),fe.length+ge<le?(me+=fe,ge+=fe.length):(me+=G,xe=_Mathceil(ue+ce*he)+W(de[ce].toString())+fe,me+=xe,ge=xe.length)),ce++;return me+=G+_Mathceil(ue+ce*he)+W(de[ce].toString()),me}function W(de){var ue='';return'-'===de.charAt(0)?(ue+=ee[ne][de.charAt(1)],2<de.length&&(ue+=de.substring(2))):(ue+=ee[te][de.charAt(0)],1<de.length&&(ue+=de.substring(1))),ue}function K(de){var ue='';return'-'===de.charAt(0)?(ue+=ee[se][de.charAt(1)],2<de.length&&(ue+=de.substring(2))):(ue+=ee[ae][de.charAt(0)],1<de.length&&(ue+=de.substring(1))),ue}function Q(de){var ue='';return ue+=ee[oe][de.charAt(0)],1<de.length&&(ue+=de.substring(1)),ue}var G='\r\n',ee=[['0','1','2','3','4','5','6','7','8','9'],['@','A','B','C','D','E','F','G','H','I'],['@','a','b','c','d','e','f','g','h','i'],['%','J','K','L','M','N','O','P','Q','R'],['%','j','k','l','m','n','o','p','q','r'],[' ','S','T','U','V','W','X','Y','Z','s']],te=1,ne=2,ae=3,se=4,oe=5,le=100;E.exports={encode:function(de,ue,he,ce){return'FIX'===ce?T(de,ue,he):'SQZ'===ce?O(de,ue,he):'DIF'===ce?Z(de,ue,he):'DIFDUP'===ce?$(de,ue,he):'CSV'===ce?P(de,ue,he):'PAC'===ce?F(de,ue,he):Z(de,ue,he)},fixEncoding:T,commaSeparatedValuesEncoding:P,packedEncoding:F,squeezedEncoding:O,differenceDuplicateEncoding:$,differenceEncoding:Z}},function(E){'use strict';function R(se,oe){var le=se.peaksComp,de=le.length;se.startX=le[0].x/se.observe-le[0].width,se.stopX=le[de-1].x/se.observe+le[de-1].width,se.integralData.from=le[0].x/se.observe-3*le[0].width,se.integralData.to=le[de-1].x/se.observe+3*le[de-1].width,se.maskPattern=se.mask2,se.multiplicity=P(se,oe),se.pattern=se.multiplicity}function P(se,oe){var ue='',he=1,ce=[],de;if(oe&&0<oe.length){for(oe.sort(function(ge,pe){return ge-pe}),de=0;de<oe.length-1;de++)_Mathabs(oe[de]-oe[de+1])<0.05?he++:(ce.push({coupling:_Mathabs(oe[de]),multiplicity:ee[he]}),ue+=ee[he],he=1);ce.push({coupling:_Mathabs(oe[de]),multiplicity:ee[he]}),ue+=ee[he],se.nmrJs=ce}else ue='s',16<_Mathabs(se.startX-se.stopX)*se.observe&&(ue='br s');return ue}function T(se){var oe=_Mathpow(2,se.length),le,de,ue=[{x:0,intensity:oe}];for(le=0;le<se.length;le++)for(de=ue.length-1;0<=de;de--)ue.push({x:ue[de].x+se[le]/2,intensity:ue[de].intensity/2}),ue[de].x-=se[le]/2,ue[de].intensity/=2;for(ue.sort(function(ce,ge){return ce.x-ge.x}),de=ue.length-2;0<=de;de--)0.1>_Mathabs(ue[de].x-ue[de+1].x)&&(ue[de].intensity+=ue[de+1].intensity,ue.splice(de+1,1));return ue}function F(se,oe){for(var le=_Mathceil(se.values.length/2),de=se.values.length,ue=0,he,ce;ue!==oe;){for(ce=!1;!ce;)if(ce=!0,se.currentIndex[se.active]++,se.currentIndex[se.active]>=se.values[se.active].length){if(se.active+1===le)return null;se.currentIndex[se.active]=0,ce=!1,se.active++}else se.active=0;for(ue=0,he=0;he<le;he++)ue+=2*se.values[he][se.currentIndex[he]];0!=se.values.length%2&&(ue-=se.values[le-1][se.currentIndex[le-1]])}if(ue===oe){var ge=Array(de);for(he=0;he<le;he++)ge[he]=se.values[he][se.currentIndex[he]],ge[de-he-1]=se.values[he][se.currentIndex[he]];return ge}return null}function O(se){var oe=Array(se.length),le=Array(se.length),de,ue;oe[0]=[1],oe[se.length-1]=[1],le[0]=-1,le[se.length-1]=0;for(var he=1;he<se.length-1;he++){de=_Mathround(0.85*se[he].intensity),ue=_Mathround(1.15*se[he].intensity),oe[he]=[];for(var ce=de;ce<=ue;ce++)oe[he].push(ce);le[he]=0}return{values:oe,currentIndex:le,active:0}}function $(se,oe,le){var de=Z(se,oe,le),ue=se.peaksComp,he=se.mask,ce=se.delta1;se.delta1=(se.peaks[0].x+se.peaks[se.peaks.length-1].x)/2;var ge=Z(se,oe,le);return se.peaksComp.length>ue.length?ge:(se.delta1=ce,se.peaksComp=ue,se.mask=he,de)}function Z(se,oe,le){var me=Array(se.peaks.length),de,ue,he,ce,ge,pe;for(pe=0;pe<me.length;pe++)me[pe]={x:se.peaks[pe].x*se.observe,intensity:se.peaks[pe].intensity,width:se.peaks[pe].width};for(pe=me.length-2;0<=pe;pe--)0.25>_Mathabs(me[pe].x-me[pe+1].x)&&(me[pe].x=me[pe].x*me[pe].intensity+me[pe+1].x*me[pe+1].intensity,me[pe].intensity+=me[pe+1].intensity,me[pe].x/=me[pe].intensity,me[pe].intensity/=2,me[pe].width+=me[pe+1].width,me.splice(pe+1,1));se.peaksComp=me;var fe=me.length,xe=Array(fe);se.mask=xe;var be=0,ye=me.length-1,_e=se.delta1*se.observe,ke=[(me[0].x+me[fe-1].x)/2,1];oe=W(_Mathabs(_e-ke[0]));for(var we=0,je=0;je<fe;je++)xe[je]=!0,we+=se.peaks[je].intensity;for(;be<=ye;){if(xe[be]=!0,xe[ye]=!0,be==ye)2<fe&&_Mathabs(me[be].x-_e)>oe&&(xe[be]=!1);else if(de=_Mathmax(me[be].intensity,me[ye].intensity),ue=_Mathmin(me[be].intensity,me[ye].intensity),ce=de/ue,ce>te)me[be].intensity===ue?(xe[be]=!1,ye++):(xe[ye]=!1,be--);else{var Se=_Mathabs(me[be].x-_e),ve=_Mathabs(me[ye].x-_e);_Mathabs(Se-ve)<oe?(he=_Mathmin(me[be].intensity,me[ye].intensity),ge=_Mathmin(me[be].width,me[ye].width),me[be].intensity=me[ye].intensity=he,me[be].width=me[ye].width=ge,ke=[ke[0]+(me[ye].x+me[be].x)/2,ke[1]+1]):_Mathmax(Se,ve)===ve?(xe[ye]=!1,be--):(xe[be]=!1,ye++)}if(be++,ye--,1===le&&(_e=Q(me,xe),isNaN(_e)))return 0;oe=W(_Mathabs(_e-ke[0]/ke[1]))}for(je=fe-1;0<=je;je--)!1===xe[je]&&me.splice(je,1);if(_e=Q(me),isNaN(_e))return 0;se.delta1=_e/se.observe;var Ce=0,Ee=0;if(1<me.length){for(je=_Mathceil(me.length/2)-1;0<=je;je--)Ce+=(3+_Mathmin(_Mathabs(me[je].x-_e),_Mathabs(me[me.length-1-je].x-_e)))/(3+_Mathmax(_Mathabs(me[je].x-_e),_Mathabs(me[me.length-1-je].x-_e)))*me[je].intensity,Ee+=me[je].intensity;Ce/=Ee}else 1===me.length&&(Ce=1);var De=0;for(je=0;je<me.length;je++)De+=me[je].intensity;if(Ce-=0.12*((we-De)/we),0.8<Ce&&0.97>Ce&&2>le)return Z(se,ae,2);if(1<me.length){var Ie;for(je=_Mathceil(me.length/2)-1;0<=je;je--)Ie=(me[je].x-me[me.length-1-je].x)/2,me[je].x=_e+Ie,me[me.length-1-je].x=_e-Ie}return Ce}function W(se){var oe=2.5*se;return 0.75>oe&&(oe=0.75),3<oe&&(oe=3),oe}function K(se,oe){var le=JSON.parse(JSON.stringify(se.peaksComp)),de=0,ue=0,he;for(he=0;he<le.length;he++)de+=le[he].intensity;de=_Mathpow(2,oe)/de,se.mask2=JSON.parse(JSON.stringify(se.mask));var ce=se.mask2.length-1;for(he=le.length-1;0<=he;he--){for(le[he].intensity*=de;0<=ce&&!1===se.mask2[ce];)ce--;0.75>le[he].intensity?(le.splice(he,1),se.mask2[ce]=!1):ue+=le[he].intensity,ce--}for(ue=_Mathpow(2,oe)/ue,he=le.length-1;0<=he;he--)le[he].intensity*=ue;return le}function Q(se,oe){var le=0,de=0,ue,he;if(oe)for(ue=0;ue<se.length;ue++)!0===oe[ue]&&(he=G(se[ue]),le+=he,de+=he*se[ue].x);else for(ue=0;ue<se.length;ue++)he=G(se[ue]),le+=he,de+=he*se[ue].x;return de/le}function G(se){return _Mathabs(1.57*(se.intensity*se.width))}var ee=['s','d','t','q','quint','h','sept','o','n'],te=1.5,ae=1;E.exports={compilePattern:function(oe){if(oe.multiplicity='m',oe.symRank=$(oe,2.5,1),oe.asymmetric=!0,0.95<=oe.symRank&&32>oe.peaksComp.length){oe.asymmetric=!1;var he=1,ge=[],le,de,ue,ce,pe,me;for(ue=0;9>ue;ue++){var fe=K(oe,ue),xe=!1;if(1===fe.length&&0===ue)xe=!0;else if(1>=fe.length)continue;var be=O(fe);pe=_Mathpow(2,ue);for(var ye=null,_e;!xe&&null!==(ye=F(be,pe));){for(_e=Array(ye.length),he=1,le=0;le<ye.length;le++)for(_e[le]=Array(ye[le]),de=0;de<ye[le];de++)_e[le][de]=he++;ge=[],de=1,ge.push(fe[1].x-fe[0].x),ce=fe[0].x,_e[0].splice(0,1),_e[1].splice(0,1),he=1;var ke=2;for(me=_Mathpow(2,ue)-1;ge.length<ue&&ke<me&&he<fe.length;){for(de++;he<fe.length&&0===_e[he].length;)he++;if(he<fe.length){ge.push(fe[he].x-fe[0].x),_e[he].splice(0,1),ke++;for(var we=2,je;we<=de;we++){for(je=0,le=0;le<we;le++)je+=ge[le];for(le=1;le<_e.length;le++)if(0.25>_Mathabs(fe[le].x-(ce+je))){_e[le].splice(0,1),ke++;break}}}}var Se=T(ge);for(xe=!0,le=0;le<Se.length;le++)Se[le].intensity!==ye[le]&&(xe=!1)}xe&&R(oe,ge)}}for(le=0;le<oe.peaksComp.length;le++)oe.peaksComp[le].x/=oe.observe}}},function(E,D,I){'use strict';function P(K){return K.isHomoNuclear()?1.5:3}function T(K,Q,G){var ee=Q.observeFrequencyX(),te=Q.observeFrequencyY(),ne=Q.getFirstY(),ae=Q.getDeltaY(),se;for(se=K.length-1;0<=se;se--)K[se].x=Q.arrayPointToUnits(K[se].x),K[se].y=ne+ae*K[se].y,(-1>K[se].y||210<=K[se].y)&&K.splice(se,1);var oe=[],le=0;for(G*=G,se=0;se<K.length;se++)for(var de=se;de<K.length;de++)le=_Mathpow((K[se].x-K[de].x)*ee,2)+_Mathpow((K[se].y-K[de].y)*te,2),le<G?oe.push(1):oe.push(0);var ue=O(oe),he=[];if(null!=K)for(var ce=0,ge;ce<ue.length;ce++){ge={nucleusX:Q.getNucleus(1),nucleusY:Q.getNucleus(2)},ge.resolutionX=(Q.getLastX()-Q.getFirstX())/Q.getNbPoints(),ge.resolutionY=ae;var pe=[];ge.shiftX=0,ge.shiftY=0;for(var me=[_NumberMAX_VALUE,0],fe=[_NumberMAX_VALUE,0],xe=0,be=ue[ce].length-1;0<=be;be--)1===ue[ce][be]&&(pe.push({x:K[be].x,y:K[be].y,z:K[be].z}),ge.shiftX+=K[be].x*K[be].z,ge.shiftY+=K[be].y*K[be].z,xe+=K[be].z,K[be].x<me[0]&&(me[0]=K[be].x),K[be].x>me[1]&&(me[1]=K[be].x),K[be].y<fe[0]&&(fe[0]=K[be].y),K[be].y>fe[1]&&(fe[1]=K[be].y));ge.fromTo=[{from:me[0],to:me[1]},{from:fe[0],to:fe[1]}],ge.shiftX/=xe,ge.shiftY/=xe,ge.peaks=pe,he.push(ge)}return he}var F=I(23),O=I(44),$=I(107),Z=I(14).FFTUtils,W=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];E.exports=function(K,Q){0===Q&&(Q=1),0>Q&&(Q=-Q);for(var G=K.getNbPoints(),ee=K.getNbSubSpectra(),te=Array(G*ee),ne=K.isHomoNuclear(),ae=0,se;ae<ee;ae++){se=K.getYData(ae);for(var oe=0;oe<G;oe++)te[ae*G+oe]=ne?0<se[oe]?se[oe]:0:_Mathabs(se[oe])}var le=P(K);if(ne){for(var de=Z.convolute(te,W,ee,G),ue=$.findPeaks2DRegion(te,{filteredData:de,rows:ee,cols:G,nStdDev:le*Q}),he=$.findPeaks2DMax(te,{filteredData:de,rows:ee,cols:G,nStdDev:(le+0.5)*Q}),ce=0;ce<ue.length;ce++)he.push(ue[ce]);return F.enhanceSymmetry(T(he,K,24))}var ge=Z.convolute(te,W,ee,G),pe=$.findPeaks2DRegion(te,{filteredData:ge,rows:ee,cols:G,nStdDev:le*Q});return T(F.clean(pe,0.05),K,24)}},function(E,D,I){'use strict';function P(Z,W,K,Q,G){var ee=W.observeFrequencyX(),te,ne,ae,se,oe=[],le={},de=null,ue={x:1e5,y:0,width:0},he=0,G=_NumberisFinite(G)?G:16,Q='sum'===Q||'peaks'===Q?Q:'sum';for(ae=0;ae<Z.length;ae++){if(_Mathabs(Z[ae].x-ue.x)>G/ee)le={nbPeaks:1,units:'PPM',startX:Z[ae].x-Z[ae].width,stopX:Z[ae].x+Z[ae].width,multiplicity:'',pattern:'',observe:ee,nucleus:'1H',integralData:{from:Z[ae].x-3*Z[ae].width,to:Z[ae].x+3*Z[ae].width},peaks:[]},le.peaks.push({x:Z[ae].x,intensity:Z[ae].y,width:Z[ae].width}),oe.push(le);else{var ge=Z[ae].x+Z[ae].width;le.stopX=_Mathmax(le.stopX,ge),ge=Z[ae].x-Z[ae].width,le.startX=_Mathmin(le.startX,ge),le.nbPeaks++,le.peaks.push({x:Z[ae].x,intensity:Z[ae].y,width:Z[ae].width}),le.integralData.from=_Mathmin(le.integralData.from,Z[ae].x-3*Z[ae].width),le.integralData.to=_Mathmax(le.integralData.to,Z[ae].x+3*Z[ae].width)}ue=Z[ae]}for(ae=0;ae<oe.length;ae++){de=oe[ae].peaks;var pe=oe[ae].integralData;for(te=0,ne=0,se=0;se<de.length;se++)te+=de[se].x*T(de[se]),ne+=T(de[se]);oe[ae].delta1=te/ne,pe.value='sum'===Q?W.getArea(pe.from,pe.to):ne,he+=pe.value}if(0!==K)for(ae=0;ae<oe.length;ae++){var me=oe[ae].integralData;me.value*=K/he}return oe}function T(Z){return _Mathabs(1.57*(Z.intensity*Z.width))}var F=I(68),O=I(21),$={nH:99,clean:!0,compile:!0,integralType:'sum',idPrefix:'',frequencyCluster:16};E.exports=function(Z,W,K){K=Object.assign({},$,K);var ne=P(W,Z,K.nH,K.integralType,K.frequencyCluster),Q,G,ee,te;if(K.clean||!1)for(Q=ne.length-1;0<=Q;Q--)0.5>ne[Q].integralData.value&&ne.splice(Q,1);if(K.compile||!1){for(Q=0;Q<ne.length;Q++)if(F.compilePattern(ne[Q]),ne[Q].maskPattern&&'m'!==ne[Q].multiplicity&&''!==ne[Q].multiplicity){ee=0,te=0;var ae=[];for(G=ne[Q].maskPattern.length-1;0<=G;G--)if(te+=T(ne[Q].peaks[G]),!1===ne[Q].maskPattern[G]){var se=ne[Q].peaks.splice(G,1)[0];ae.push({x:se.x,y:se.intensity,width:se.width}),ne[Q].mask.splice(G,1),ne[Q].mask2.splice(G,1),ne[Q].maskPattern.splice(G,1),ne[Q].nbPeaks--,ee+=T(se)}if(0<ae.length){ee=ee*ne[Q].integralData.value/te,ne[Q].integralData.value-=ee;var oe=[];for(G=ae.length-1;0<=G;G--)oe.push(ae[G]);var le=P(oe,Z,ee,K.integralType,K.frequencyCluster);for(G=0;G<le.length;G++)ne.push(le[G])}}var de=0,ue=0;for(Q=0;Q<ne.length;Q++)ue+=_Mathround(ne[Q].integralData.value);if(ue!==K.nH)for(de=K.nH/ue,Q=0;Q<ne.length;Q++)ne[Q].integralData.value*=de}if(ne.sort(function(ge,pe){return pe.delta1-ge.delta1}),K.clean||!1)for(Q=ne.length-1;0<=Q;Q--)0.5>ne[Q].integralData.value&&ne.splice(Q,1);for(Q=0;Q<ne.length;Q++)ne[Q].signalID=K.idPrefix&&0<K.idPrefix.length?K.idPrefix+'_'+(Q+1):Q+1+'',ne[Q]._highlight=[ne[Q].signalID];var he=Array(ne.length);for(Q=0;Q<ne.length;Q++){var ce=ne[Q];he[Q]={from:ce.integralData.from,to:ce.integralData.to,integral:ce.integralData.value,signal:[{nbAtoms:0,diaID:[],multiplicity:ce.multiplicity,peak:ce.peaks,kind:'',remark:''}],signalID:ce.signalID,_highlight:ce._highlight},ce.nmrJs&&(he[Q].signal[0].j=ce.nmrJs),ce.asymmetric&&'m'!==ce.multiplicity||(he[Q].signal[0].delta=ce.delta1)}return ne=new O(he),ne}},function(E){'use strict';function P(le,de,ue,he,ce,ge){te(),T(le,ce,ge);for(var pe=le.length,fe=0,me;fe<pe;fe++)me=de?le[fe]:le[pe-fe-1],me&&(te(),F(me,ue),O(me,he))}function T(le,de,ue){'NMR SPEC'===le.type?(ue.nucleus&&(ae+=ee(ue.nucleus)),ae+=' NMR',(de||ue.observe)&&(ae+=' (',ue.observe&&(ae+=(1*ue.observe).toFixed(0)+' MHz',de&&(ae+=', ')),de&&(ae+=G(de)),ae+=')'),ae+=' \u03B4 '):'IR'===le.type?ae+=' IR ':'MASS'===le.type&&(ae+=' MASS ')}function F(le,de){var ue=0,he=0,ce=0,ge;le.from&&('string'==typeof le.from?ue=parseFloat(le.from):ue=le.from),le.to&&('string'==typeof le.to?he=parseFloat(le.to):he=le.to),le.signal[0].delta?'string'==typeof le.signal[0].delta?ce=parseFloat(le.signal[0].delta):ce=le.signal[0].delta:ge=!0,!0===ge||'m'===le.signal[0].multiplicity&&!0===oe?le.from&&le.to?ue<he?ae+=ue.toFixed(de)+'-'+he.toFixed(de):ae+=he.toFixed(de)+'-'+ue.toFixed(de):le.signal[0].delta&&(ae+='?'):le.signal[0].delta?ae+=ce.toFixed(de):le.from&&le.to&&(ae+=((ue+he)/2).toFixed(de))}function O(le,de){se='',W(le),$(le),K(le,de),Z(le),0<se.length&&(ae+=' ('+se+')')}function $(le){le.pubIntegral?(ne(),se+=le.pubIntegral):le.integral&&(ne(),se+=le.integral.toFixed(0)+' H')}function Z(le){le.signal[0].pubAssignment?(ne(),se+=Q(le.signal[0].pubAssignment)):le.signal[0].assignment&&(ne(),se+=Q(le.signal[0].assignment))}function W(le){le.signal[0].pubMultiplicity?(ne(),se+=le.pubMultiplicity):le.signal[0].multiplicity&&(ne(),se+=le.signal[0].multiplicity)}function K(le,de){if(0>'sm'.indexOf(le.signal[0].multiplicity)&&le.signal[0].j&&0<le.signal[0].j.length){for(var ue=le.signal[0].j,he='<i>J</i> = ',ce=0,ge;ce<ue.length;ce++)ge=ue[ce].coupling||0,11<he.length&&(he+=', '),he+=ge.toFixed(de);ne(),se+=he+' Hz'}}function Q(le){return le=le.replace(/([0-9])/g,'<sub>$1</sub>'),le=le.replace(/\"([^\"]*)\"/g,'<i>$1</i>'),le}function G(le){return le=le.replace(/([0-9])/g,'<sub>$1</sub>'),le}function ee(le){return le=le.replace(/([0-9])/g,'<sup>$1</sup>'),le}function te(){0<ae.length&&!ae.match(/ $/)&&(ae+=', ')}function ne(){0<se.length&&!se.match(', $')&&(se+=', ')}var ae='',se='',oe=!1;E.exports=function(le,de){var ue=Object.assign({},{nucleus:'1H'},de),he=JSON.parse(JSON.stringify(le));if(he[0].delta1)throw new Error('Old unsupported format');he.updateMultiplicity&&(he=he.updateMultiplicity()),ae='',se='';var ce=null;return ue&&ue.solvent&&(ce=ue.solvent),ue&&void 0!==ue.rangeForMultiplet&&(oe=ue.rangeForMultiplet),ue&&ue.ascending?he.sort(function(ge,pe){return pe.from-ge.from}):he.sort(function(ge,pe){return ge.from-pe.from}),he.type='NMR SPEC',ue&&'1H'===ue.nucleus&&P(he,!1,2,1,ce,ue),ue&&'13C'===ue.nucleus&&P(he,!1,1,0,ce,ue),0<ae.length&&(ae+='.'),ae}},function(E){'use strict';E.exports=function(P,T){var T=T||{},F=T.from,O=T.to,$=T.nbPoints||16384,Z=T.fnName||'gaussian',W=T.nWidth||4;if(!F){F=_NumberMAX_VALUE;for(var K=0;K<P.length;K++)P[K].x-P[K].width*W<F&&(F=P[K].x-P[K].width*W)}if(!O){O=_NumberMIN_VALUE;for(var Q=0;Q<P.length;Q++)P[Q].x+P[Q].width*W>O&&(O=P[Q].x+P[Q].width*W)}for(var G=Array($),ee=Array($),te=(O-F)/($-1),ne=0;ne<$;ne++)G[ne]=F+ne*te,ee[ne]=0;var ae='intensity';P[0].y&&(ae='y');for(var se=0,oe;se<P.length;se++)if(oe=P[se],oe.x>F&&oe.x<O){var le=_Mathround((oe.x-F)/te),de=_Mathround(oe.width*W/te);if('gaussian'===Z)for(var ue=le-de;ue<le+de;ue++)0<=ue&&ue<$&&(ee[ue]+=oe[ae]*_Mathexp(-0.5*_Mathpow((oe.x-G[ue])/(oe.width/2),2)));else for(var he=oe[ae]*_Mathpow(oe.width,2)/4,ce=le-de;ce<le+de;ce++)0<=ce&&ce<$&&(ee[ce]+=he/(_Mathpow(oe.x-G[ce],2)+_Mathpow(oe.width/2,2)))}return{x:G,y:ee}}},function(E){'use strict';var T={type:'rect',line:0,lineLabel:1,labelColor:'red',strokeColor:'red',strokeWidth:'1px',fillColor:'green',width:0.05,height:10,toFixed:1},F={type:'rect',labelColor:'red',strokeColor:'red',strokeWidth:'1px',fillColor:'green',width:'6px',height:'6px'};E.exports={annotations2D:function(O,$){for(var Z=Object.assign({},F,$),W=[],K=O.length-1;0<=K;K--){var Q=O[K],G={};G.type=Z.type,G._highlight=Q._highlight,G._highlight&&0!==G._highlight.length||(G._highlight=[Q.signalID]),Q._highlight=G._highlight,G.position=[{x:Q.fromTo[0].from-0.01,y:Q.fromTo[1].from-0.01,dx:Z.width,dy:Z.height},{x:Q.fromTo[0].to+0.01,y:Q.fromTo[1].to+0.01}],G.fillColor=Z.fillColor,G.label={text:Q.remark,position:{x:Q.signal[0].delta[0],y:Q.signal[0].delta[1]-0.025}},G.strokeColor=1===Q.integral?Z.strokeColor:'rgb(0,128,0)',G.strokeWidth=Z.strokeWidth,G.width=Z.width,G.height=Z.height,G.info=Q,W.push(G)}return W},annotations1D:function(O,$){for(var Z=Object.assign({},T,$),W=Z.height,K=[],Q=0;Q<O.length;Q++){var G=O[Q],ee={};K.push(ee),ee.line=Z.line,ee._highlight=G._highlight,ee._highlight&&0!==ee._highlight.length||(ee._highlight=[G.signalID],G.signal.forEach(function(te){for(var ne=0;ne<te.diaID.length;ne++)ee._highlight.push(te.diaID[ne])})),G._highlight=ee._highlight,ee.type=Z.type,ee.position=G.to&&G.from&&G.to!==G.from?[{x:G.to,y:Z.line*W+'px'},{x:G.from,y:Z.line*W+3+'px'}]:[{x:G.signal[0].delta-Z.width,y:Z.line*W+'px'},{x:G.signal[0].delta+Z.width,y:Z.line*W+3+'px'}],!Z.noLabel&&G.integral&&(ee.label={text:G.integral.toFixed(Z.toFixed),size:'11px',anchor:'middle',color:Z.labelColor,position:{x:(ee.position[0].x+ee.position[1].x)/2,y:(Z.line+Z.lineLabel)*W+'px',dy:'5px'}}),ee.strokeColor=Z.strokeColor,ee.strokeWidth=Z.strokeWidth,ee.fillColor=Z.fillColor,ee.info=G}return K}}},function(E,D){'use strict';function R(te){var ne=te.length;if(0<ne%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===te[ne-2]?2:'='===te[ne-1]?1:0}function F(te){return Z[63&te>>18]+Z[63&te>>12]+Z[63&te>>6]+Z[63&te]}function O(te,ne,ae){for(var oe=[],le=ne,se;le<ae;le+=3)se=(te[le]<<16)+(te[le+1]<<8)+te[le+2],oe.push(F(se));return oe.join('')}D.byteLength=function(te){return 3*te.length/4-R(te)},D.toByteArray=function(te){var ue=te.length,ne,ae,se,oe,le,de;le=R(te),de=new K(3*ue/4-le),se=0<le?ue-4:ue;var he=0;for(ne=0,ae=0;ne<se;ne+=4,ae+=3)oe=W[te.charCodeAt(ne)]<<18|W[te.charCodeAt(ne+1)]<<12|W[te.charCodeAt(ne+2)]<<6|W[te.charCodeAt(ne+3)],de[he++]=255&oe>>16,de[he++]=255&oe>>8,de[he++]=255&oe;return 2===le?(oe=W[te.charCodeAt(ne)]<<2|W[te.charCodeAt(ne+1)]>>4,de[he++]=255&oe):1===le&&(oe=W[te.charCodeAt(ne)]<<10|W[te.charCodeAt(ne+1)]<<4|W[te.charCodeAt(ne+2)]>>2,de[he++]=255&oe>>8,de[he++]=255&oe),de},D.fromByteArray=function(te){for(var ae=te.length,se=ae%3,oe='',le=[],de=16383,ue=0,he=ae-se,ne;ue<he;ue+=de)le.push(O(te,ue,ue+de>he?he:ue+de));return 1==se?(ne=te[ae-1],oe+=Z[ne>>2],oe+=Z[63&ne<<4],oe+='=='):2==se&&(ne=(te[ae-2]<<8)+te[ae-1],oe+=Z[ne>>10],oe+=Z[63&ne>>4],oe+=Z[63&ne<<2],oe+='='),le.push(oe),le.join('')};for(var Z=[],W=[],K='undefined'==typeof Uint8Array?Array:Uint8Array,Q='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',G=0,ee=Q.length;G<ee;++G)Z[G]=Q[G],W[Q.charCodeAt(G)]=G;W['-'.charCodeAt(0)]=62,W['_'.charCodeAt(0)]=63},function(E,D,I){E.exports=I(76)},function(E,D){var R,P,T;(function(){var F,O,$,Z,W,K,Q,G,ee,te,ne,ae,se,oe,le;$=_Mathfloor,te=_Mathmin,O=function(de,ue){return de<ue?-1:de>ue?1:0},ee=function(de,ue,he,ce,ge){var pe;if(null==he&&(he=0),null==ge&&(ge=O),0>he)throw new Error('lo must be non-negative');for(null==ce&&(ce=de.length);he<ce;)pe=$((he+ce)/2),0>ge(ue,de[pe])?ce=pe:he=pe+1;return[].splice.apply(de,[he,he-he].concat(ue)),ue},K=function(de,ue,he){return null==he&&(he=O),de.push(ue),oe(de,0,de.length-1,he)},W=function(de,ue){var he,ce;return null==ue&&(ue=O),he=de.pop(),de.length?(ce=de[0],de[0]=he,le(de,0,ue)):ce=he,ce},G=function(de,ue,he){var ce;return null==he&&(he=O),ce=de[0],de[0]=ue,le(de,0,he),ce},Q=function(de,ue,he){var ce;return null==he&&(he=O),de.length&&0>he(de[0],ue)&&(ce=[de[0],ue],ue=ce[0],de[0]=ce[1],le(de,0,he)),ue},Z=function(de,ue){var he,ce,pe,fe,xe,be;for(null==ue&&(ue=O),fe=function(){be=[];for(var ye=0,_e=$(de.length/2);0<=_e?ye<_e:ye>_e;0<=_e?ye++:ye--)be.push(ye);return be}.apply(this).reverse(),xe=[],(ce=0,pe=fe.length);ce<pe;ce++)he=fe[ce],xe.push(le(de,he,ue));return xe},se=function(de,ue,he){var ce;if(null==he&&(he=O),ce=de.indexOf(ue),-1!==ce)return oe(de,0,ce,he),le(de,ce,he)},ne=function(de,ue,he){var ce,ge,pe,me,fe;if(null==he&&(he=O),ge=de.slice(0,ue),!ge.length)return ge;for(Z(ge,he),fe=de.slice(ue),(pe=0,me=fe.length);pe<me;pe++)ce=fe[pe],Q(ge,ce,he);return ge.sort(he).reverse()},ae=function(de,ue,he){var ce,ge,pe,me,fe,xe,be,ye,_e,ke;if(null==he&&(he=O),10*ue<=de.length){if(me=de.slice(0,ue).sort(he),!me.length)return me;for(pe=me[me.length-1],ye=de.slice(ue),(fe=0,be=ye.length);fe<be;fe++)ce=ye[fe],0>he(ce,pe)&&(ee(me,ce,0,null,he),me.pop(),pe=me[me.length-1]);return me}for(Z(de,he),ke=[],(ge=xe=0,_e=te(ue,de.length));0<=_e?xe<_e:xe>_e;ge=0<=_e?++xe:--xe)ke.push(W(de,he));return ke},oe=function(de,ue,he,ce){var ge,pe,me;for(null==ce&&(ce=O),ge=de[he];he>ue;){if(me=he-1>>1,pe=de[me],0>ce(ge,pe)){de[he]=pe,he=me;continue}break}return de[he]=ge},le=function(de,ue,he){var ce,ge,pe,me,fe;for(null==he&&(he=O),ge=de.length,fe=ue,pe=de[ue],ce=2*ue+1;ce<ge;)me=ce+1,me<ge&&!(0>he(de[ce],de[me]))&&(ce=me),de[ue]=de[ce],ue=ce,ce=2*ue+1;return de[ue]=pe,oe(de,fe,ue,he)},F=function(){function de(ue){this.cmp=null==ue?O:ue,this.nodes=[]}return de.push=K,de.pop=W,de.replace=G,de.pushpop=Q,de.heapify=Z,de.updateItem=se,de.nlargest=ne,de.nsmallest=ae,de.prototype.push=function(ue){return K(this.nodes,ue,this.cmp)},de.prototype.pop=function(){return W(this.nodes,this.cmp)},de.prototype.peek=function(){return this.nodes[0]},de.prototype.contains=function(ue){return-1!==this.nodes.indexOf(ue)},de.prototype.replace=function(ue){return G(this.nodes,ue,this.cmp)},de.prototype.pushpop=function(ue){return Q(this.nodes,ue,this.cmp)},de.prototype.heapify=function(){return Z(this.nodes,this.cmp)},de.prototype.updateItem=function(ue){return se(this.nodes,ue,this.cmp)},de.prototype.clear=function(){return this.nodes=[]},de.prototype.empty=function(){return 0===this.nodes.length},de.prototype.size=function(){return this.nodes.length},de.prototype.clone=function(){var ue;return ue=new de,ue.nodes=this.nodes.slice(0),ue},de.prototype.toArray=function(){return this.nodes.slice(0)},de.prototype.insert=de.prototype.push,de.prototype.top=de.prototype.peek,de.prototype.front=de.prototype.peek,de.prototype.has=de.prototype.contains,de.prototype.copy=de.prototype.clone,de}(),function(de,ue){return P=[],R=ue,T='function'==typeof R?R.apply(D,P):R,!(void 0!==T&&(E.exports=T))}(this,function(){return F})}).call(this)},function(E,D){D.read=function(I,R,P,T,F){var O,$,Z=8*F-T-1,W=(1<<Z)-1,K=W>>1,Q=-7,G=P?F-1:0,ee=P?-1:1,te=I[R+G];for(G+=ee,O=te&(1<<-Q)-1,te>>=-Q,Q+=Z;0<Q;O=256*O+I[R+G],G+=ee,Q-=8);for($=O&(1<<-Q)-1,O>>=-Q,Q+=T;0<Q;$=256*$+I[R+G],G+=ee,Q-=8);if(0===O)O=1-K;else{if(O===W)return $?NaN:(te?-1:1)*Infinity;$+=_Mathpow(2,T),O-=K}return(te?-1:1)*$*_Mathpow(2,O-T)},D.write=function(I,R,P,T,F,O){var $,Z,W,K=8*O-F-1,Q=(1<<K)-1,G=Q>>1,ee=23===F?5.960464477539063e-8-6.617444900424222e-24:0,te=T?0:O-1,ne=T?1:-1,ae=0>R||0===R&&0>1/R?1:0;for(R=_Mathabs(R),isNaN(R)||R===Infinity?(Z=isNaN(R)?1:0,$=Q):($=_Mathfloor(_Mathlog(R)/Math.LN2),1>R*(W=_Mathpow(2,-$))&&($--,W*=2),R+=1<=$+G?ee/W:ee*_Mathpow(2,1-G),2<=R*W&&($++,W/=2),$+G>=Q?(Z=0,$=Q):1<=$+G?(Z=(R*W-1)*_Mathpow(2,F),$+=G):(Z=R*_Mathpow(2,G-1)*_Mathpow(2,F),$=0));8<=F;I[P+te]=255&Z,te+=ne,Z/=256,F-=8);for($=$<<F|Z,K+=F;0<K;I[P+te]=255&$,te+=ne,$/=256,K-=8);I[P+te-ne]|=128*ae}},function(E){'use strict';const R=8192,P=[];E.exports=class{constructor(F,O){O=O||{},F===void 0&&(F=R),'number'==typeof F&&(F=new ArrayBuffer(F));let $=F.byteLength;const Z=O.offset?O.offset>>>0:0;F.buffer&&($=F.byteLength-Z,F=F.byteLength===F.buffer.byteLength?Z?F.buffer.slice(Z):F.buffer:F.buffer.slice(F.byteOffset+Z,F.byteOffset+F.byteLength)),this.buffer=F,this.length=$,this.byteLength=$,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=$||R,this._mark=0}available(F){return void 0===F&&(F=1),this.offset+F<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(F){F===void 0&&(F=1),this.offset+=F}seek(F){this.offset=F}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(F){if(void 0===F&&(F=1),!this.available(F)){const O=this._increment+this._increment;this._increment=O;const $=this.length+O,Z=new Uint8Array($);Z.set(new Uint8Array(this.buffer)),this.buffer=Z.buffer,this.length=$,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(F){F===void 0&&(F=1);for(var O=new Uint8Array(F),$=0;$<F;$++)O[$]=this.readByte();return O}readInt16(){var F=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,F}readUint16(){var F=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,F}readInt32(){var F=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,F}readUint32(){var F=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,F}readFloat32(){var F=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,F}readFloat64(){var F=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,F}readChar(){return _StringfromCharCode(this.readInt8())}readChars(F){F===void 0&&(F=1),P.length=F;for(var O=0;O<F;O++)P[O]=this.readChar();return P.join('')}writeBoolean(F){this.writeUint8(F?255:0)}writeInt8(F){this.ensureAvailable(1),this._data.setInt8(this.offset++,F)}writeUint8(F){this.ensureAvailable(1),this._data.setUint8(this.offset++,F)}writeByte(F){this.writeUint8(F)}writeBytes(F){this.ensureAvailable(F.length);for(var O=0;O<F.length;O++)this._data.setUint8(this.offset++,F[O])}writeInt16(F){this.ensureAvailable(2),this._data.setInt16(this.offset,F,this.littleEndian),this.offset+=2}writeUint16(F){this.ensureAvailable(2),this._data.setUint16(this.offset,F,this.littleEndian),this.offset+=2}writeInt32(F){this.ensureAvailable(4),this._data.setInt32(this.offset,F,this.littleEndian),this.offset+=4}writeUint32(F){this.ensureAvailable(4),this._data.setUint32(this.offset,F,this.littleEndian),this.offset+=4}writeFloat32(F){this.ensureAvailable(4),this._data.setFloat32(this.offset,F,this.littleEndian),this.offset+=4}writeFloat64(F){this.ensureAvailable(8),this._data.setFloat64(this.offset,F,this.littleEndian),this.offset+=8}writeChar(F){this.writeUint8(F.charCodeAt(0))}writeChars(F){for(var O=0;O<F.length;O++)this.writeUint8(F.charCodeAt(O))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},function(E){var I={}.toString;E.exports=Array.isArray||function(R){return'[object Array]'==I.call(R)}},function(E){'use strict';var R=/[,\t \+-]*(?=[^\d,\t \.])|[ \t]+(?=[\d+\.-])/,P=/\$\$.*/;E.exports=function(F,O){F.deltaX||(F.deltaX=(F.lastX-F.firstX)/(F.nbPoints-1)),F.isXYdata=!0;var Z=[],W=0;F.data=[Z];var K=F.firstX,Q=F.firstY,G=O.split(/[\r\n]+/),ee,te,ne;te=[];for(var se=1,oe=G.length;se<oe;se++)if(te=G[se].trim().replace(P,'').split(R),0<te.length)for(var de=1,ue=te.length;de<ue;de++)if(1===de&&(ee||0===ee))ee=null,ne=te[de].charCodeAt(0),!1;else if(0<te[de].length)if(ne=te[de].charCodeAt(0),43===ne||45===ne||46===ne||47<ne&&58>ne)ee=null,Q=+te[de],Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX;else if(63<ne&&74>ne)ee=null,Q=+(_StringfromCharCode(ne-16)+te[de].substring(1)),Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX;else if(96<ne&&106>ne)ee=null,Q=1*-(_StringfromCharCode(ne-48)+te[de].substring(1)),Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX;else if(82<ne&&91>ne||115===ne){var he=_StringfromCharCode(ne-34)+te[de].substring(1)-1;115===ne&&(he='9'+te[de].substring(1)-1);for(var ce=0;ce<he;ce++)ee&&(Q+=ee),Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX}else 37===ne?(ee=+('0'+te[de].substring(1)),Q+=ee,Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX):73<ne&&83>ne?(ee=1*(_StringfromCharCode(ne-25)+te[de].substring(1)),Q+=ee,Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX):105<ne&&115>ne&&(ee=1*-(_StringfromCharCode(ne-57)+te[de].substring(1)),Q+=ee,Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX)}},function(E,D,I){'use strict';var R=I(0),P=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];E.exports=function(F,O){if('undefined'==typeof F||!F.length)return 0;var $='string'!==R.getTypeOf(F);'undefined'==typeof O&&(O=0);var Z=0,W=0,K=0;O^=-1;for(var Q=0,G=F.length;Q<G;Q++)K=$?F[Q]:F.charCodeAt(Q),W=255&(O^K),Z=P[W],O=O>>>8^Z;return-1^O}},function(E,D,I){'use strict';var R=I(0);D.string2binary=function(P){return R.string2binary(P)},D.string2Uint8Array=function(P){return R.transformTo('uint8array',P)},D.uint8Array2String=function(P){return R.transformTo('string',P)},D.string2Blob=function(P){var T=R.transformTo('arraybuffer',P);return R.arrayBuffer2Blob(T)},D.arrayBuffer2Blob=function(P){return R.arrayBuffer2Blob(P)},D.transformTo=function(P,T){return R.transformTo(P,T)},D.getTypeOf=function(P){return R.getTypeOf(P)},D.checkSupport=function(P){return R.checkSupport(P)},D.MAX_VALUE_16BITS=R.MAX_VALUE_16BITS,D.MAX_VALUE_32BITS=R.MAX_VALUE_32BITS,D.pretty=function(P){return R.pretty(P)},D.findCompression=function(P){return R.findCompression(P)},D.isRegExp=function(P){return R.isRegExp(P)}},function(E,D,I){'use strict';var R='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Uint32Array,P=I(138);D.uncompressInputType=R?'uint8array':'array',D.compressInputType=R?'uint8array':'array',D.magic='\b\0',D.compress=function(T,F){return P.deflateRaw(T,{level:F.level||-1})},D.uncompress=function(T){return P.inflateRaw(T)}},function(E,D,I){'use strict';function R(T,F){return this instanceof R?void(this.files={},this.comment=null,this.root='',T&&this.load(T,F),this.clone=function(){var O=new R;for(var $ in this)'function'!=typeof this[$]&&(O[$]=this[$]);return O}):new R(T,F)}var P=I(10);R.prototype=I(13),R.prototype.load=I(85),R.support=I(5),R.defaults=I(33),R.utils=I(82),R.base64={encode:function(T){return P.encode(T)},decode:function(T){return P.decode(T)}},R.compressions=I(11),E.exports=R},function(E,D,I){'use strict';var R=I(10),P=I(37),T=I(0),F=I(89);E.exports=function(O,$){var Z,W,K,Q;for($=T.extend($||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:P.utf8decode}),$.base64&&(O=R.decode(O)),W=new F(O,$),Z=W.files,K=0;K<Z.length;K++)Q=Z[K],this.file(Q.fileNameStr,Q.decompressed,{binary:!0,optimizedBinaryString:!0,date:Q.date,dir:Q.dir,comment:Q.fileCommentStr.length?Q.fileCommentStr:null,unixPermissions:Q.unixPermissions,dosPermissions:Q.dosPermissions,createFolders:$.createFolders});return W.zipComment.length&&(this.comment=W.zipComment),this}},function(E,D,I){'use strict';function R(T){this.data=T,this.length=this.data.length,this.index=0,this.zero=0}var P=I(36);R.prototype=new P,R.prototype.readData=function(T){this.checkOffset(T);var F=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,F},E.exports=R},function(E,D,I){'use strict';var R=I(0),P=function(){this.data=[]};P.prototype={append:function(T){T=R.transformTo('string',T),this.data.push(T)},finalize:function(){return this.data.join('')}},E.exports=P},function(E,D,I){'use strict';var R=I(0),P=function(T){this.data=new Uint8Array(T),this.index=0};P.prototype={append:function(T){0!==T.length&&(T=R.transformTo('uint8array',T),this.data.set(T,this.index),this.index+=T.length)},finalize:function(){return this.data}},E.exports=P},function(E,D,I){'use strict';function R(G,ee){this.files=[],this.loadOptions=ee,G&&this.load(G)}var P=I(35),T=I(86),F=I(36),O=I(30),$=I(0),Z=I(34),W=I(90),K=I(5),Q=I(13);R.prototype={checkSignature:function(G){var ee=this.reader.readString(4);if(ee!==G)throw new Error('Corrupted zip or bug : unexpected signature ('+$.pretty(ee)+', expected '+$.pretty(G)+')')},isSignature:function(G,ee){var te=this.reader.index;this.reader.setIndex(G);var ne=this.reader.readString(4);return this.reader.setIndex(te),ne===ee},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var G=this.reader.readData(this.zipCommentLength),ee=K.uint8array?'uint8array':'array',te=$.transformTo(ee,G);this.zipComment=this.loadOptions.decodeFileName(te)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var G=this.zip64EndOfCentralSize-44,te,ne,ae;0<G;)te=this.reader.readInt(2),ne=this.reader.readInt(4),ae=this.reader.readString(ne),this.zip64ExtensibleData[te]={id:te,length:ne,value:ae}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error('Multi-volumes zip are not supported')},readLocalFiles:function(){var G,ee;for(G=0;G<this.files.length;G++)ee=this.files[G],this.reader.setIndex(ee.localHeaderOffset),this.checkSignature(Z.LOCAL_FILE_HEADER),ee.readLocalPart(this.reader),ee.handleUTF8(),ee.processAttributes()},readCentralDir:function(){var G;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===Z.CENTRAL_FILE_HEADER;)G=new W({zip64:this.zip64},this.loadOptions),G.readCentralPart(this.reader),this.files.push(G);if(this.centralDirRecords!==this.files.length)if(0!==this.centralDirRecords&&0===this.files.length)throw new Error('Corrupted zip or bug: expected '+this.centralDirRecords+' records in central dir, got '+this.files.length);else;},readEndOfCentral:function(){var G=this.reader.lastIndexOfSignature(Z.CENTRAL_DIRECTORY_END);if(0>G){var ee=!this.isSignature(0,Z.LOCAL_FILE_HEADER);if(ee)throw new Error('Can\\\'t find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html');else throw new Error('Corrupted zip : can\'t find end of central directory')}this.reader.setIndex(G);var te=G;if(this.checkSignature(Z.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===$.MAX_VALUE_16BITS||this.diskWithCentralDirStart===$.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===$.MAX_VALUE_16BITS||this.centralDirRecords===$.MAX_VALUE_16BITS||this.centralDirSize===$.MAX_VALUE_32BITS||this.centralDirOffset===$.MAX_VALUE_32BITS){if(this.zip64=!0,G=this.reader.lastIndexOfSignature(Z.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>G)throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory locator');if(this.reader.setIndex(G),this.checkSignature(Z.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,Z.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(Z.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory');this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(Z.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var ne=this.centralDirOffset+this.centralDirSize;this.zip64&&(ne+=20,ne+=12+this.zip64EndOfCentralSize);var ae=te-ne;if(0<ae)this.isSignature(te,Z.CENTRAL_FILE_HEADER)||(this.reader.zero=ae);else if(0>ae)throw new Error('Corrupted zip: missing '+_Mathabs(ae)+' bytes.')},prepareReader:function(G){var ee=$.getTypeOf(G);if($.checkSupport(ee),'string'===ee&&!K.uint8array)this.reader=new P(G,this.loadOptions.optimizedBinaryString);else if('nodebuffer'===ee)this.reader=new T(G);else if(K.uint8array)this.reader=new F($.transformTo('uint8array',G));else if(K.array)this.reader=new O($.transformTo('array',G));else throw new Error('Unexpected error: unsupported type \''+ee+'\'')},load:function(G){this.prepareReader(G),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},E.exports=R},function(E,D,I){'use strict';function R(K,Q){this.options=K,this.loadOptions=Q}var P=I(35),T=I(0),F=I(31),O=I(13),$=I(5);R.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(K,Q,G){return function(){var ee=K.index;K.setIndex(Q);var te=K.readData(G);return K.setIndex(ee),te}},prepareContent:function(K,Q,G,ee,te){return function(){var ne=T.transformTo(ee.uncompressInputType,this.getCompressedContent()),ae=ee.uncompress(ne);if(ae.length!==te)throw new Error('Bug : uncompressed data size mismatch');return ae}},readLocalPart:function(K){var Q,G;if(K.skip(22),this.fileNameLength=K.readInt(2),G=K.readInt(2),this.fileName=K.readData(this.fileNameLength),K.skip(G),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error('Bug or corrupted zip : didn\\\'t get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)');if(Q=T.findCompression(this.compressionMethod),null===Q)throw new Error('Corrupted zip : compression '+T.pretty(this.compressionMethod)+' unknown (inner file : '+T.transformTo('string',this.fileName)+')');if(this.decompressed=new F,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(K,K.index,this.compressedSize,Q),this.decompressed.getContent=this.prepareContent(K,K.index,this.compressedSize,Q,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=T.transformTo('string',this.decompressed.getContent()),O.crc32(this.decompressed)!==this.crc32))throw new Error('Corrupted zip : CRC32 mismatch')},readCentralPart:function(K){if(this.versionMadeBy=K.readInt(2),this.versionNeeded=K.readInt(2),this.bitFlag=K.readInt(2),this.compressionMethod=K.readString(2),this.date=K.readDate(),this.crc32=K.readInt(4),this.compressedSize=K.readInt(4),this.uncompressedSize=K.readInt(4),this.fileNameLength=K.readInt(2),this.extraFieldsLength=K.readInt(2),this.fileCommentLength=K.readInt(2),this.diskNumberStart=K.readInt(2),this.internalFileAttributes=K.readInt(2),this.externalFileAttributes=K.readInt(4),this.localHeaderOffset=K.readInt(4),this.isEncrypted())throw new Error('Encrypted zip are not supported');this.fileName=K.readData(this.fileNameLength),this.readExtraFields(K),this.parseZIP64ExtraField(K),this.fileComment=K.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var K=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),K==0&&(this.dosPermissions=63&this.externalFileAttributes),K==3&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||'/'!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var Q=new P(this.extraFields[1].value);this.uncompressedSize===T.MAX_VALUE_32BITS&&(this.uncompressedSize=Q.readInt(8)),this.compressedSize===T.MAX_VALUE_32BITS&&(this.compressedSize=Q.readInt(8)),this.localHeaderOffset===T.MAX_VALUE_32BITS&&(this.localHeaderOffset=Q.readInt(8)),this.diskNumberStart===T.MAX_VALUE_32BITS&&(this.diskNumberStart=Q.readInt(4))}},readExtraFields:function(K){var Q=K.index,G,ee,te;for(this.extraFields=this.extraFields||{};K.index<Q+this.extraFieldsLength;)G=K.readInt(2),ee=K.readInt(2),te=K.readString(ee),this.extraFields[G]={id:G,length:ee,value:te}},handleUTF8:function(){var K=$.uint8array?'uint8array':'array';if(this.useUTF8())this.fileNameStr=O.utf8decode(this.fileName),this.fileCommentStr=O.utf8decode(this.fileComment);else{var Q=this.findExtraFieldUnicodePath();if(null!==Q)this.fileNameStr=Q;else{var G=T.transformTo(K,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(G)}var ee=this.findExtraFieldUnicodeComment();if(null!==ee)this.fileCommentStr=ee;else{var te=T.transformTo(K,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(te)}}},findExtraFieldUnicodePath:function(){var K=this.extraFields[28789];if(K){var Q=new P(K.value);return 1===Q.readInt(1)?O.crc32(this.fileName)===Q.readInt(4)?O.utf8decode(Q.readString(K.length-5)):null:null}return null},findExtraFieldUnicodeComment:function(){var K=this.extraFields[25461];if(K){var Q=new P(K.value);return 1===Q.readInt(1)?O.crc32(this.fileComment)===Q.readInt(4)?O.utf8decode(Q.readString(K.length-5)):null:null}return null}},E.exports=R},function(E,D,I){'use strict';function F(K){for(var Q=Array(K[0].length),G=0;G<Q.length;++G)Q[G]=Array(K.length);for(G=0;G<K.length;++G)for(var ee=0;ee<K[0].length;++ee)Q[ee][G]=K[G][ee];return Q}const W=I(6).array;E.exports={coordArrayToPoints:function(K,Q){if(0!=K.length%Q)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var G=K.length/Q,ee=Array(G),te=0,ne=0,ae;ne<K.length;ne+=Q){ae=Array(Q);for(var se=0;se<Q;++se)ae[se]=K[ne+se];ee[te]=ae,te++}return ee},coordArrayToCoordMatrix:function(K,Q){if(0!=K.length%Q)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var G=Array(Q),ee=K.length/Q,te=0;te<G.length;te++)G[te]=Array(ee);for(te=0;te<K.length;te+=Q)for(var ne=0,ae;ne<Q;++ne)ae=_Mathfloor(te/Q),G[ne][ae]=K[te+ne];return G},coordMatrixToCoordArray:function(K){for(var Q=Array(K.length*K[0].length),G=0,ee=0;ee<K[0].length;++ee)for(var te=0;te<K.length;++te)Q[G]=K[te][ee],++G;return Q},coordMatrixToPoints:F,pointsToCoordArray:function(K){for(var Q=Array(K.length*K[0].length),G=0,ee=0;ee<K.length;++ee)for(var te=0;te<K[0].length;++te)Q[G]=K[ee][te],++G;return Q},pointsToCoordMatrix:F,applyDotProduct:function(K,Q){var G,ee;K.length<=Q.length?(ee=K,G=Q):(ee=Q,G=K);for(var te=G.length-ee.length+1,ne=Array(te),ae=0,se;ae<te;++ae){se=0;for(var oe=0;oe<ee.length;++oe)se+=ee[oe]*G[ae+oe];ne[ae]=se}return ne},scale:function(K,Q){var G=Q.inPlace?K:Array(K.length);const ee=Q.max,te=Q.min;if('number'==typeof ee){if('number'==typeof te)for(var ne=W.minMax(K),ae=(ee-te)/(ne.max-ne.min),se=0;se<G.length;se++)G[se]=(K[se]-ne.min)*ae+te;else for(var oe=W.max(K),ae=ee/oe,se=0;se<G.length;se++)G[se]=K[se]*ae;}else if('number'==typeof te)for(var oe=W.min(K),ae=te/oe,se=0;se<G.length;se++)G[se]=K[se]*ae;return G}}},function(E,D){'use strict';function P(O,$,Z,W,K){function Q(we,je,Se,ve){return(ve-je)/(Se-we)}var G=O.length,ee=(W-Z)/(K-1),ne=Z-ee/2,ae=Array(K),se=O[1]-O[0],oe=O[O.length-1]-O[O.length-2],le=ne,de=ne+ee,ue=_NumberMIN_VALUE,he=0,ce=O[0]-se,ge=0,pe=0,me=0,fe=0,xe=0,be=0,ye=0,_e=0;main:for(;;){for(;0<=ce-de;){var ke=F(0,de-ue,me,he);if(be=pe+ke,ae[_e]=(be-xe)/ee,_e++,_e===K)break main;le=de,de+=ee,xe=be}ue<=le&&le<=ce&&(ke=F(0,le-ue,me,he),xe=pe+ke),pe+=F(ue,ce,me,fe),ue=ce,he=ge,ye<G?(ce=O[ye],ge=$[ye],ye++):ye===G&&(ce+=oe,ge=0),me=Q(ue,he,ce,ge),fe=-me*ue+he}return ae}function T(O,$,Z,W,K){var Q=O.length,G=(W-Z)/(K-1),te=O[O.length-1]-O[O.length-2],ne=Z-G/2,ae=Array(K),se=ne,oe=ne+G,le=-_NumberMAX_VALUE,de=0,ue=O[0],he=$[0],ce=0,ge=!0,pe=0,me=0,fe=1,xe=0;main:for(;;){if(le>=ue)throw new Error('x must be an increasing serie');for(;0<le-oe;){if(ge&&(me++,ge=!1),ae[xe]=0>=me?0:pe/me,xe++,xe===K)break main;se=oe,oe+=G,pe=0,me=0}le>se&&(pe+=de,me++),(le==-_NumberMAX_VALUE||1<ce)&&me--,le=ue,de=he,fe<Q?(ue=O[fe],he=$[fe],fe++):(ue+=te,he=0,ce++)}return ae}function F(O,$,Z,W){return 0.5*Z*$*$+W*$-(0.5*Z*O*O+W*O)}D.getEquallySpacedData=function(O,$,Z){1<O.length&&O[0]>O[1]&&(O=O.slice().reverse(),$=$.slice().reverse());var W=O.length;if(W!==$.length)throw new RangeError('the x and y vector doesn\'t have the same size.');Z===void 0&&(Z={});var K=Z.from===void 0?O[0]:Z.from;if(isNaN(K)||!isFinite(K))throw new RangeError('\'From\' value must be a number');var Q=Z.to===void 0?O[O.length-1]:Z.to;if(isNaN(Q)||!isFinite(Q))throw new RangeError('\'To\' value must be a number');var G=K>Q;if(G){var ee=K;K=Q,Q=ee}var te=Z.numberOfPoints===void 0?100:Z.numberOfPoints;if(isNaN(te)||!isFinite(te))throw new RangeError('\'Number of points\' value must be a number');if(1>te)throw new RangeError('the number of point must be higher than 1');var ne='slot'===Z.variant?'slot':'smooth',ae='slot'==ne?T(O,$,K,Q,te):P(O,$,K,Q,te);return G?ae.reverse():ae},D.integral=F},function(E,D,I){'use strict';D.SNV=function(T){for(var F=P.mean(T),O=P.standardDeviation(T),$=T.slice(),Z=0;Z<T.length;Z++)$[Z]=($[Z]-F)/O;return $};var P=I(6).array},function(E){'use strict';function R(T){this.value=T,this.parent=null,this.rank=0}E.exports=class{constructor(){this.nodes=new Map}add(T){var F=this.nodes.get(T);return F||(F=new R(T),this.nodes.set(T,F)),F}union(T,F){const O=this.find(T),$=this.find(F);O===$||(O.rank<$.rank?O.parent=$:O.rank>$.rank?$.parent=O:($.parent=O,O.rank++))}find(T){for(var F=T;null!==F.parent;)F=F.parent;for(var O=T,$;null!==O.parent;)$=O,O=O.parent,$.parent=F;return F}connected(T,F){return this.find(T)===this.find(F)}}},function(E){'use strict';E.exports=function(P,T){const F=P.length;let O=Array.from({length:F}).map(()=>Array.from({length:F}));for(let $=0;$<F;$++)for(let Z=0;Z<=$;Z++)O[$][Z]=T(P[$],P[Z]);for(let $=0;$<F;$++)for(let Z=$+1;Z<F;Z++)O[$][Z]=O[Z][$];return O}},function(E,D,I){'use strict';var R=I(40);E.exports={DEBUG:!1,ifft2DArray:function(T,F,O){var $=Array(F*O),Z=F/2,W=2*(O-1);R.init(Z);for(var K={re:Array(Z),im:Array(Z)},Q=0;Q<O;Q++){for(var G=Z-1;0<=G;G--)K.re[G]=T[2*G*O+Q],K.im[G]=T[(2*G+1)*O+Q];R.bt(K.re,K.im);for(var G=Z-1;0<=G;G--)$[2*G*O+Q]=K.re[G],$[(2*G+1)*O+Q]=K.im[G]}var ee=Array(Z*W);R.init(W);for(var te={re:Array(W),im:Array(W)},G=0;G<F;G+=2){te.re[0]=$[G*O],te.im[0]=$[(G+1)*O];for(var Q=1;Q<O;Q++)te.re[Q]=$[G*O+Q],te.im[Q]=$[(G+1)*O+Q],te.re[W-Q]=$[G*O+Q],te.im[W-Q]=-$[(G+1)*O+Q];R.bt(te.re,te.im);for(var ae=G/2*W,Q=W-1;0<=Q;Q--)ee[ae+Q]=te.re[Q]/(W*Z)}return ee},fft2DArray:function(T,F,O){var Z=Object.assign({},{inplace:!0}),W=O/2+1,K=2*F,Q=Array(K*W);R.init(O);for(var G={re:Array(O),im:Array(O)},ee={re:Array(O),im:Array(O)},te={re:Array(O),im:Array(O)},de=0,ne,ae,se,oe,le;de<F/2;de++){ne=2*de*O,G.re=T.slice(ne,ne+O),ne=(2*de+1)*O,G.im=T.slice(ne,ne+O),R.fft1d(G.re,G.im),this.reconstructTwoRealFFT(G,ee,te),ae=4*de*W,se=(4*de+1)*W,oe=(4*de+2)*W,le=(4*de+3)*W;for(var ue=W-1;0<=ue;ue--)Q[ae+ue]=ee.re[ue],Q[se+ue]=ee.im[ue],Q[oe+ue]=te.re[ue],Q[le+ue]=te.im[ue]}ee=null,te=null;var he=Array(K*W);R.init(F);for(var ce={re:Array(F),im:Array(F)},ge=W-1;0<=ge;ge--){for(var de=F-1;0<=de;de--)ce.re[de]=Q[2*de*W+ge],ce.im[de]=Q[(2*de+1)*W+ge],isNaN(ce.re[de])&&(ce.re[de]=0),isNaN(ce.im[de])&&(ce.im[de]=0);R.fft1d(ce.re,ce.im);for(var de=F-1;0<=de;de--)he[2*de*W+ge]=ce.re[de],he[(2*de+1)*W+ge]=ce.im[de]}return he},reconstructTwoRealFFT:function(T,F,O){var $=T.re.length;F.re[0]=T.re[0],F.im[0]=0,O.re[0]=T.im[0],O.im[0]=0;for(var ee=$/2,Z,W,K,Q,G;0<ee;ee--)G=$-ee,Z=0.5*(T.re[ee]-T.re[G]),W=0.5*(T.re[ee]+T.re[G]),K=0.5*(T.im[ee]-T.im[G]),Q=0.5*(T.im[ee]+T.im[G]),F.re[ee]=W,F.im[ee]=K,F.re[G]=W,F.im[G]=-K,O.re[ee]=Q,O.im[ee]=-Z,O.re[G]=Q,O.im[G]=Z},convolute2DI:function(T,F,O,$){for(var K=0,Z,W;K<O/2;K++)for(var Q=0;Q<$;Q++)Z=T[2*K*$+Q]*F[2*K*$+Q]-T[(2*K+1)*$+Q]*F[(2*K+1)*$+Q],W=T[2*K*$+Q]*F[(2*K+1)*$+Q]+T[(2*K+1)*$+Q]*F[2*K*$+Q],T[2*K*$+Q]=Z,T[(2*K+1)*$+Q]=W},convolute:function(T,F,O,$){for(var W=Array($*O),K=0;K<O*$;K++)W[K]=T[K];W=this.fft2DArray(W,O,$);for(var Q=F.length,G=F[0].length,ee=Array($*O),K=0;K<$*O;K++)ee[K]=0;for(var ae=_Mathfloor((Q-1)/2),se=_Mathfloor((G-1)/2),oe=0,te,ne;oe<Q;oe++){te=(oe-ae+O)%O;for(var le=0;le<G;le++)ne=(le-se+$)%$,ee[te*$+ne]=F[oe][le]}ee=this.fft2DArray(ee,O,$);var de=2*O,ue=$/2+1;return this.convolute2DI(W,ee,de,ue),this.ifft2DArray(W,de,ue)},toRadix2:function(T,F,O){var $,Z,W,K,Q=O,G=F,ee=0,te=0;if(0===O||0!=(O&O-1)){for(Q=0;0!=O>>++Q;);Q=1<<Q,te=Q-O}if(0===F||0!=(F&F-1)){for(G=0;0!=F>>++G;);G=1<<G,ee=(G-F)*Q}if(G==F&&Q==O)return{data:T,rows:F,cols:O};var ne=Array(G*Q),ae=_Mathfloor((G-F)/2)-F,se=_Mathfloor((Q-O)/2)-O;for($=0;$<G;$++)for(W=$*Q,K=($-ae)%F*O,Z=0;Z<Q;Z++)ne[W+Z]=T[K+(Z-se)%O];return{data:ne,rows:G,cols:Q}},crop:function(T,F,O,$,Z,W){if(F==$&&O==Z)return T;var K=Object.assign({},W),Q=Array(Z*$),G=_Mathfloor((F-$)/2),ee=_Mathfloor((O-Z)/2),te,ne,ae,se;for(ae=0;ae<$;ae++)for(te=ae*$,ne=(ae+G)*O,se=0;se<Z;se++)Q[te+se]=T[ne+(se+ee)];return Q}}},function(E,D,I){'use strict';function P(Z){var W=0,K=0,Q=Z.length;for(let ee=0;ee<Q;++ee)W+=Z[ee];W/=Q;var G=Array(Q);for(let ee=0;ee<Q;++ee)G[ee]=_Mathabs(Z[ee]-W);return G.sort(),K=1==Q%2?G[(Q-1)/2]/0.6745:0.5*(G[Q/2]+G[Q/2-1])/0.6745,K}function T(Z,W,K){for(var ae=0,Q,G,ee,te,ne;ae<Z.length;ae++)ne=Z[ae].i,K[ne-1]>=K[ne-2]&&K[ne-1]>=K[ne]?ne--:K[ne+1]>=K[ne]&&K[ne+1]>=K[ne+2]?ne++:K[ne-2]>=K[ne-3]&&K[ne-2]>=K[ne-1]?ne-=2:K[ne+2]>=K[ne+1]&&K[ne+2]>=K[ne+3]&&(ne+=2),0<K[ne-1]&&0<K[ne+1]&&K[ne]>=K[ne-1]&&K[ne]>=K[ne+1]&&(Q=20*_Mathlog2(K[ne-1]),G=20*_Mathlog2(K[ne]),ee=20*_Mathlog2(K[ne+1]),te=0.5*(Q-ee)/(Q-2*G+ee),Z[ae].x=W[ne]+(W[ne]-W[ne-1])*te,Z[ae].y=K[ne]-0.25*(K[ne-1]-K[ne+1])*te)}const F=I(28),O=I(119),$={sgOptions:{windowSize:9,polynomial:3},minMaxRatio:2.5e-4,broadRatio:0,maxCriteria:!0,smoothY:!0,realTopDetection:!1,heightFactor:0,boundaries:!1,derivativeThreshold:-1};E.exports=function(Z,W,K){K=F({},$,K);let Q=K.sgOptions;const G=[].concat(W);if(!('noiseLevel'in K)){var ee=0,te=_NumberMAX_VALUE,ne;for(let Re=0;Re<Z.length-1;++Re)ne=_Mathabs(Z[Re+1]-Z[Re]),ne<te&&(te=ne),ne>ee&&(ee=ne);K.noiseLevel=0.05>(ee-te)/ee?P(G):0}const ae={m:1,b:K.noiseLevel};K.maxCriteria||(ae.m=-1,ae.b*=-1);for(let Re=0;Re<G.length;Re++)G[Re]=ae.m*G[Re]-ae.b;for(let Re=0;Re<G.length;Re++)0>G[Re]&&(G[Re]=0);let se=G,oe,le;0.05>(ee-te)/ee?(K.smoothY&&(se=O(G,Z[1]-Z[0],{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:0})),oe=O(G,Z[1]-Z[0],{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:1}),le=O(G,Z[1]-Z[0],{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:2})):(K.smoothY&&(se=O(G,Z,{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:0})),oe=O(G,Z,{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:1}),le=O(G,Z,{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:2}));const de=Z,ue=Z[1]-Z[0];var he=0,ce=0;for(let Re=0;Re<se.length;Re++)_Mathabs(le[Re])>he&&(he=_Mathabs(le[Re])),_Mathabs(se[Re])>ce&&(ce=_Mathabs(se[Re]));var ge=null,pe=null,me=Array(se.length-2),fe=Array(se.length),xe=Array(se.length),be=Array(se.length-2),ye=0,_e=0,ke=0,we=0;for(let Re=1;Re<se.length-1;++Re)_Mathabs(oe[Re])>K.derivativeThreshold&&((oe[Re]<oe[Re-1]&&oe[Re]<=oe[Re+1]||oe[Re]<=oe[Re-1]&&oe[Re]<oe[Re+1])&&(pe={x:de[Re],index:Re},0<ue&&null!=ge&&(fe[_e++]=ge,xe[ke++]=pe)),(oe[Re]>=oe[Re-1]&&oe[Re]>oe[Re+1]||oe[Re]>oe[Re-1]&&oe[Re]>=oe[Re+1])&&(ge={x:de[Re],index:Re},0>ue&&null!==pe&&(fe[_e++]=ge,xe[ke++]=pe))),le[Re]<le[Re-1]&&le[Re]<le[Re+1]&&(me[ye++]=Re,be[we++]=_Mathabs(le[Re])<=K.broadRatio*he);me.length=ye,fe.length=_e,xe.length=ke,be.length=we;let je=Array(me.length),Se=0,ve=-1,Ce,Ee,De,Ie,Ae;for(let Re=0;Re<me.length;++Re){Ee=de[me[Re]],Ce=-1;let Pe=ve+1;for(Ie=_NumberMAX_VALUE,De=0,Ae=!0;-1===Ce&&Pe<fe.length&&Ae;)De=_Mathabs(Ee-(fe[Pe].x+xe[Pe].x)/2),De<Ie?Ie=De:Ae=!1,De<_Mathabs(fe[Pe].x-xe[Pe].x)/2&&(Ce=Pe,ve=Pe),++Pe;if(-1!==Ce&&_Mathabs(se[me[Re]])>K.minMaxRatio*ce&&(je[Se++]={index:me[Re],x:Ee,y:(se[me[Re]]+ae.b)/ae.m,width:_Mathabs(xe[Ce].x-fe[Ce].x),soft:be[Re]},K.boundaries&&(je[Se-1].left=fe[Ce],je[Se-1].right=xe[Ce]),K.heightFactor)){let Te=se[fe[Ce].index],Fe=se[xe[Ce].index];je[Se-1].height=K.heightFactor*(je[Se-1].y-(Te+Fe)/2)}}je.length=Se,K.realTopDetection&&T(je,de,se);for(let Re=0;Re<je.length;Re++)je[Re].base=K.noiseLevel;return je.sort(function(Re,Pe){return Re.x-Pe.x}),je}},function(E,D,I){'use strict';E.exports.post=I(99),E.exports.gsd=I(97)},function(E,D,I){'use strict';function R($,Z,W,K,Q){var G=W.length,ee=[],te=[],ne=_Mathsign(W[1]-W[0]);-1===ne&&(Q[0]=W.length-1);for(var ae=_Mathabs(Z-$)/2,se=($+Z)/2,oe=!1,le=Q[0];!oe&&le<G&&0<=le;)_Mathabs(W[le]-se)<=ae?(ee.push(W[le]),te.push(K[le]),le+=ne):1===_Mathsign(se-W[le])?le+=ne:oe=!0;return Q[0]=le,[ee,te]}function T($,Z){var W=[],K=[],Q,G,ee=[$[0].x,Z*$[0].width],te,ne;for(Q=0;Q<$.length;Q++)_Mathabs($[Q].x-ee[0])<Z*$[Q].width+ee[1]?(W.push($[Q]),te=ee[0]+ee[1],$[Q].x+Z*$[Q].width>te&&(te=$[Q].x+Z*$[Q].width),ne=ee[0]-ee[1],$[Q].x-Z*$[Q].width<ne&&(ne=$[Q].x-Z*$[Q].width),ee=[(te+ne)/2,_Mathabs(te-ne)/2]):(K.push({limits:ee,group:W}),W=[$[Q]],ee=[$[Q].x,Z*$[Q].width]);for(K.push({limits:ee,group:W}),Q=K.length-2;0<=Q;Q--)if(_Mathabs(K[Q].limits[0]-K[Q+1].limits[0])<(K[Q].limits[1]+K[Q+1].limits[1])/2){for(G=0;G<K[Q+1].group.length;G++)K[Q].group.push(K[Q+1].group[G]);te=K[Q].limits[0]+K[Q].limits[1],K[Q+1].limits[0]+K[Q+1].limits[1]>te&&(te=K[Q+1].limits[0]+K[Q+1].limits[1]),ne=K[Q].limits[0]-K[Q].limits[1],K[Q+1].limits[0]-K[Q+1].limits[1]<ne&&(ne=K[Q+1].limits[0]-K[Q+1].limits[1]),K[Q].limits=[(te+ne)/2,_Mathabs(te-ne)/2],K.splice(Q+1,1)}return K}var O=I(116);E.exports={optimizePeaks:function($,Z,W,K,Q){var te=[0],G,ee,ne=T($,K),ae=[],se=1;'gaussian'===Q&&(se=1.17741);var oe,le,de;for(G=0;G<ne.length;G++){var ue=ne[G].group;if(1<ue.length){if(oe=R(ne[G].limits[0]-ne[G].limits[1],ne[G].limits[0]+ne[G].limits[1],Z,W,te),5<oe[0].length){le=ue[0].width/1e3,de=[3,100,le,le,le,10*le,10*le,11,9,1];var he=[];for('gaussian'===Q?he=O.optimizeGaussianSum(oe,ue,de):'lorentzian'===Q&&(he=O.optimizeLorentzianSum(oe,ue,de)),ee=0;ee<he.length;ee++)ae.push({x:he[ee][0][0],y:he[ee][1][0],width:he[ee][2][0]*se})}}else if(ue=ue[0],oe=R(ue.x-K*ue.width,ue.x+K*ue.width,Z,W,te),5<oe[0].length){le=ue.width/1e3,de=[3,100,le,le,le,10*le,10*le,11,9,1];var ce=[];'gaussian'===Q?ce=O.optimizeSingleGaussian([oe[0],oe[1]],ue,de):'lorentzian'===Q&&(ce=O.optimizeSingleLorentzian([oe[0],oe[1]],ue,de)),ae.push({x:ce[0][0],y:ce[1][0],width:ce[2][0]*se})}}return ae},joinBroadPeaks:function($,Z){var W=Z.width,K=[],Q=0,G=0,ee=1;for(let se=$.length-1;0<=se;se--)$[se].soft&&K.push($.splice(se,1)[0]);K.push({x:_NumberMAX_VALUE});var te=[[K[0].x,K[0].y]],ne=[0];for(let se=1;se<K.length;se++)if(_Mathabs(K[se-1].x-K[se].x)<W)te.push([K[se].x,K[se].y]),K[se].y>Q&&(Q=K[se].y,G=se),ne.push(se),ee++;else{if(2<ee){var ae=O.optimizeSingleLorentzian(te,{x:K[G].x,y:Q,width:_Mathabs(te[0][0]-te[te.length-1][0])});$.push({x:ae[0][0],y:ae[1][0],width:ae[2][0],soft:!1})}else ne.map(function(oe){$.push(K[oe])});te=[[K[se].x,K[se].y]],ne=[se],Q=K[se].y,G=se,ee=1}return $.sort(function(se,oe){return se.x-oe.x}),$}}},function(E,D,I){'use strict';function R(se,oe){return 0|se*oe}function P(se,oe){return _Mathmin(se-2,0|se*oe)}function T(se,oe,le){return Z(_Mathmax(se+1,0|4*se/(3*oe+le)))}function F(se,oe,le){return Z(_Mathmax(se+1,0|4*se/(oe+3*le)))}const O=I(17),$=I(101),Z=$.nextPrime,W=$.largestPrime,K=0,Q=1,G=2;class ae{constructor(se={}){if(se instanceof ae)return this.table=se.table.slice(),this.values=se.values.slice(),this.state=se.state.slice(),this.minLoadFactor=se.minLoadFactor,this.maxLoadFactor=se.maxLoadFactor,this.distinct=se.distinct,this.freeEntries=se.freeEntries,this.lowWaterMark=se.lowWaterMark,void(this.highWaterMark=se.maxLoadFactor);const oe=se.initialCapacity===void 0?150:se.initialCapacity;if(0>oe)throw new RangeError(`initial capacity must not be less than zero: ${oe}`);const le=se.minLoadFactor===void 0?1/6:se.minLoadFactor,de=se.maxLoadFactor===void 0?2/3:se.maxLoadFactor;if(0>le||1<=le)throw new RangeError(`invalid minLoadFactor: ${le}`);if(0>=de||1<=de)throw new RangeError(`invalid maxLoadFactor: ${de}`);if(le>=de)throw new RangeError(`minLoadFactor (${le}) must be smaller than maxLoadFactor (${de})`);let ue=oe;ue=0|ue/de,ue=Z(ue),0===ue&&(ue=1),this.table=O(ue,0),this.values=O(ue,0),this.state=O(ue,0),this.minLoadFactor=le,this.maxLoadFactor=ue===W?1:de,this.distinct=0,this.freeEntries=ue,this.lowWaterMark=0,this.highWaterMark=P(ue,this.maxLoadFactor)}clone(){return new ae(this)}get size(){return this.distinct}get(se){const oe=this.indexOfKey(se);return 0>oe?0:this.values[oe]}set(se,oe){let le=this.indexOfInsertion(se);if(0>le)return le=-le-1,this.values[le]=oe,!1;if(this.distinct>this.highWaterMark){const de=T(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);return this.rehash(de),this.set(se,oe)}if(this.table[le]=se,this.values[le]=oe,this.state[le]===K&&this.freeEntries--,this.state[le]=Q,this.distinct++,1>this.freeEntries){const de=T(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);this.rehash(de)}return!0}remove(se,oe){const le=this.indexOfKey(se);return!(0>le)&&(this.state[le]=G,this.distinct--,oe||this.maybeShrinkCapacity(),!0)}delete(se,oe){const le=this.indexOfKey(se);return!(0>le)&&(this.state[le]=K,this.distinct--,oe||this.maybeShrinkCapacity(),!0)}maybeShrinkCapacity(){if(this.distinct<this.lowWaterMark){const se=F(this.distinct,this.minLoadFactor,this.maxLoadFactor);this.rehash(se)}}containsKey(se){return 0<=this.indexOfKey(se)}indexOfKey(se){const oe=this.table,le=this.state,de=this.table.length,ue=2147483647&se;let he=ue%de,ce=ue%(de-2);for(0==ce&&(ce=1);le[he]!==K&&(le[he]===G||oe[he]!==se);)he-=ce,0>he&&(he+=de);return le[he]===K?-1:he}containsValue(se){return 0<=this.indexOfValue(se)}indexOfValue(se){const oe=this.values,le=this.state;for(var de=0;de<le.length;de++)if(le[de]===Q&&oe[de]===se)return de;return-1}indexOfInsertion(se){const oe=this.table,le=this.state,de=oe.length,ue=2147483647&se;let he=ue%de,ce=ue%(de-2);for(0==ce&&(ce=1);le[he]===Q&&oe[he]!==se;)he-=ce,0>he&&(he+=de);if(le[he]===G){const ge=he;for(;le[he]!==K&&(le[he]===G||oe[he]!==se);)he-=ce,0>he&&(he+=de);le[he]===K&&(he=ge)}return le[he]===Q?-he-1:he}ensureCapacity(se){if(this.table.length<se){const oe=Z(se);this.rehash(oe)}}rehash(se){const oe=this.table.length;if(se<=this.distinct)throw new Error('Unexpected');const le=this.table,de=this.values,ue=this.state,he=O(se,0),ce=O(se,0),ge=O(se,0);this.lowWaterMark=R(se,this.minLoadFactor),this.highWaterMark=P(se,this.maxLoadFactor),this.table=he,this.values=ce,this.state=ge,this.freeEntries=se-this.distinct;for(var pe=0;pe<oe;pe++)if(ue[pe]===Q){var me=le[pe],fe=this.indexOfInsertion(me);he[fe]=me,ce[fe]=de[pe],ge[fe]=Q}}forEachKey(se){for(var oe=0;oe<this.state.length;oe++)if(this.state[oe]===Q&&!se(this.table[oe]))return!1;return!0}forEachValue(se){for(var oe=0;oe<this.state.length;oe++)if(this.state[oe]===Q&&!se(this.values[oe]))return!1;return!0}forEachPair(se){for(var oe=0;oe<this.state.length;oe++)if(this.state[oe]===Q&&!se(this.table[oe],this.values[oe]))return!1;return!0}}E.exports=ae},function(E,D,I){const P=I(25),T=I(51).asc,F=2147483647,O=[F,5,11,23,47,97,197,397,797,1597,3203,6421,12853,25717,51437,102877,205759,411527,823117,1646237,3292489,6584983,13169977,26339969,52679969,105359939,210719881,421439783,842879579,1685759167,433,877,1759,3527,7057,14143,28289,56591,113189,226379,452759,905551,1811107,3622219,7244441,14488931,28977863,57955739,115911563,231823147,463646329,927292699,1854585413,953,1907,3821,7643,15287,30577,61169,122347,244703,489407,978821,1957651,3915341,7830701,15661423,31322867,62645741,125291483,250582987,501165979,1002331963,2004663929,1039,2081,4177,8363,16729,33461,66923,133853,267713,535481,1070981,2141977,4283963,8567929,17135863,34271747,68543509,137087021,274174111,548348231,1096696463,31,67,137,277,557,1117,2237,4481,8963,17929,35863,71741,143483,286973,573953,1147921,2295859,4591721,9183457,18366923,36733847,73467739,146935499,293871013,587742049,1175484103,599,1201,2411,4831,9677,19373,38747,77509,155027,310081,620171,1240361,2480729,4961459,9922933,19845871,39691759,79383533,158767069,317534141,635068283,1270136683,311,631,1277,2557,5119,10243,20507,41017,82037,164089,328213,656429,1312867,2625761,5251529,10503061,21006137,42012281,84024581,168049163,336098327,672196673,1344393353,3,7,17,37,79,163,331,673,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,43,89,179,359,719,1439,2879,5779,11579,23159,46327,92657,185323,370661,741337,1482707,2965421,5930887,11861791,23723597,47447201,94894427,189788857,379577741,759155483,1518310967,379,761,1523,3049,6101,12203,24407,48817,97649,195311,390647,781301,1562611,3125257,6250537,12501169,25002389,50004791,100009607,200019221,400038451,800076929,1600153859,13,29,59,127,257,521,1049,2099,4201,8419,16843,33703,67409,134837,269683,539389,1078787,2157587,4315183,8630387,17260781,34521589,69043189,138086407,276172823,552345671,1104691373,19,41,83,167,337,677,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,53,107,223,449,907,1823,3659,7321,14653,29311,58631,117269,234539,469099,938207,1876417,3752839,7505681,15011389,30022781,60045577,120091177,240182359,480364727,960729461,1921458943];O.sort(T),D.nextPrime=function($){let Z=P(O,$,T);return 0>Z&&(Z=~Z),O[Z]},D.largestPrime=F},function(E,D,I){'use strict';function R(ne,ae,se){for(var oe=1e101,le=0;le<ne.length;le++)for(var de=0,ue;de<ae.length;de++)ue=se[ne[le]][ae[de]],oe=_Mathmin(ue,oe);return oe}function P(ne,ae,se){for(var oe=-1,le=0;le<ne.length;le++)for(var de=0,ue;de<ae.length;de++)ue=se[ne[le]][ae[de]],oe=_Mathmax(ue,oe);return oe}function T(ne,ae,se){for(var oe=0,le=0;le<ne.length;le++)for(var de=0;de<ae.length;de++)oe+=se[ne[le]][ae[de]];return oe/(ne.length*ae.length)}function F(ne,ae,se){for(var oe=Array(ne.length*ae.length),le=0;le<ne.length;le++)for(var de=0;de<ae.length;de++)oe[le*ae.length+de]=se[ne[le]][ae[de]];return Z(oe)}function O(ne,ae,se){return F(ne,ae,se)*ne.length*ae.length/(ne.length+ae.length)}function $(ne,ae){return ne-ae}function Z(ne,ae){ae===void 0&&(ae=!1),ae||(ne=[].concat(ne).sort($));var se=ne.length,oe=_Mathfloor(se/2);return 0==se%2?0.5*(ne[oe-1]+ne[oe]):ne[oe]}const K=I(39),Q=I(41),G=I(15),ee=I(95);var te={disFunc:K,kind:'single',isDistanceMatrix:!1};E.exports=function(ne,ae){ae=Object.assign({},te,ae);var se=ne.length,oe=ne;if(ae.isDistanceMatrix||(oe=ee(ne,ae.disFunc)),'string'==typeof ae.kind)switch(ae.kind){case'single':ae.kind=R;break;case'complete':ae.kind=P;break;case'average':ae.kind=T;break;case'centroid':ae.kind=F;break;case'ward':ae.kind=O;break;default:throw new RangeError('Unknown kind of similarity');}else if('function'!=typeof ae.kind)throw new TypeError('Undefined kind of similarity');for(var le=Array(se),de=0;de<oe.length;de++)le[de]=new Q(de);for(var ue=1e6,he={},ce=0;1<le.length;){he={},ue=1e6;for(var ge=0;ge<le.length;ge++)for(var pe=ge+1;pe<le.length;pe++){var me,fe;if(le[ge]instanceof Q)me=[le[ge].index];else{me=Array(le[ge].index.length);for(var xe=0;xe<me.length;xe++)me[xe]=le[ge].index[xe].index}if(le[pe]instanceof Q)fe=[le[pe].index];else{fe=Array(le[pe].index.length);for(var be=0;be<fe.length;be++)fe[be]=le[pe].index[be].index}ce=ae.kind(me,fe,oe).toFixed(4),ce in he?he[ce].push([le[ge],le[pe]]):he[ce]=[[le[ge],le[pe]]],ue=_Mathmin(ce,ue)}for(var ye=he[ue.toFixed(4)],_e=Array(ye.length),we=0,ke;0<ye.length;){ke=ye.shift();for(var je=0,Se;je<ye.length;je++)if(Se=ye[je].filter(function(Ae){return-1!==ke.indexOf(Ae)}),0<Se.length){var ve=ye[je].filter(function(Ae){return-1===ke.indexOf(Ae)});ke=ke.concat(ve),ye.splice(je--,1)}_e[we++]=ke}_e.length=we;for(var Ce=0,Ee;Ce<_e.length;Ce++){Ee=new G,Ee.children=_e[Ce].concat(),Ee.distance=ue,Ee.index=Array(se);for(var De=0,Ie=0;Ie<_e[Ce].length;Ie++)_e[Ce][Ie]instanceof Q?Ee.index[De++]=_e[Ce][Ie]:(De+=_e[Ce][Ie].index.length,Ee.index=_e[Ce][Ie].index.concat(Ee.index)),le.splice(le.indexOf(_e[Ce][Ie]),1);Ee.index.length=De,le.push(Ee)}}return le[0]}},function(E,D,I){'use strict';function R(te,ne,ae){for(var se=1e101,oe=0;oe<te.length;oe++)for(var le=oe,de;le<ne.length;le++)de=ae(te[oe],ne[le]),se=_Mathmin(de,se);return se}function P(te,ne,ae){for(var se=-1,oe=0;oe<te.length;oe++)for(var le=oe,de;le<ne.length;le++)de=ae(te[oe],ne[le]),se=_Mathmax(de,se);return se}function T(te,ne,ae){for(var se=0,oe=0;oe<te.length;oe++)for(var le=0;le<ne.length;le++)se+=ae(te[oe],ne[le]);return se/(te.length*ne.length)}function F(te,ne,ae){for(var se=0,oe=0,le=0,de=0,ue=0;ue<te.length;ue++)se+=te[ue][0],oe+=te[ue][1];for(var he=0;he<ne.length;he++)le+=ne[he][0],de+=ne[he][1];return se/=te.length,oe/=te.length,le/=ne.length,de/=ne.length,ae([se,oe],[le,de])}function O(te,ne,ae){for(var se=0,oe=0,le=0,de=0,ue=0;ue<te.length;ue++)se+=te[ue][0],oe+=te[ue][1];for(var he=0;he<ne.length;he++)le+=ne[he][0],de+=ne[he][1];return se/=te.length,oe/=te.length,le/=ne.length,de/=ne.length,ae([se,oe],[le,de])*te.length*ne.length/(te.length+ne.length)}function $(te,ne,ae){for(var se={d:0,p:0},oe=Array(te[0].length),le=0;le<te[0].length;le++)oe[le]=ne[te[0][le]];for(var de=Array(te[1].length),ue=0;ue<te[1].length;ue++)de[ue]=ne[te[1][ue]];for(var ge=0,he,ce;ge<oe.length;ge++){he=0;for(var pe=0;pe<oe.length;pe++)ge!==pe&&(he+=ae(oe[ge],oe[pe]));he/=oe.length-1,ce=0;for(var me=0;me<de.length;me++)ce+=ae(oe[ge],de[me]);ce/=de.length,he-ce>se.d&&(se.d=he-ce,se.p=ge)}return se}function Z(te,ne,ae){for(var se=0,oe=0,le=0;le<te.length;le++)for(var de=le;de<te.length;de++)se+=ae(ne[te[le].index],ne[te[de].index]),oe++;return se/oe}const K=I(39),Q=I(41),G=I(15);var ee={dist:K,kind:'single'};E.exports=function(te,ne){if(ne=Object.assign({},ee,ne),'string'==typeof ne.kind)switch(ne.kind){case'single':ne.kind=R;break;case'complete':ne.kind=P;break;case'average':ne.kind=T;break;case'centroid':ne.kind=F;break;case'ward':ne.kind=O;break;default:throw new RangeError('Unknown kind of similarity');}else if('function'!=typeof ne.kind)throw new TypeError('Undefined kind of similarity');var ae=new G;ae.children=Array(te.length),ae.index=Array(te.length);for(var se=0;se<te.length;se++)ae.children[se]=new Q(se),ae.index[se]=new Q(se);ae.distance=Z(ae.index,te,ne.dist);for(var ce=[ae],oe,le,de,ue,he;0<ce.length;){le=0,de=0;for(var ge=0;ge<ce.length;ge++){oe=0;for(var pe=0;pe<ce[ge].length;pe++)for(var me=pe+1;me<ce[ge].length;me++)oe=_Mathmax(ne.dist(te[ce[ge].index[pe].index],te[ce[ge].index[me].index]),oe);oe>le&&(le=oe,de=ge)}if(le=0,2===ce[de].index.length)ce[de].children=[ce[de].index[0],ce[de].index[1]],ce[de].distance=ne.dist(te[ce[de].index[0].index],te[ce[de].index[1].index]);else if(3===ce[de].index.length){ce[de].children=[ce[de].index[0],ce[de].index[1],ce[de].index[2]];var fe=[ne.dist(te[ce[de].index[0].index],te[ce[de].index[1].index]),ne.dist(te[ce[de].index[1].index],te[ce[de].index[2].index])];ce[de].distance=(fe[0]+fe[1])/2}else{for(var xe=new G,be=new G,ye=[Array(ce[de].index.length),[]],_e=0;_e<ye[0].length;_e++)ye[0][_e]=_e;for(var ke=0;ke<ye[0].length;ke++){ue=0;for(var we=0;we<ye[0].length;we++)ke!==we&&(ue+=ne.dist(te[ce[de].index[ye[0][we]].index],te[ce[de].index[ye[0][ke]].index]));ue/=ye[0].length-1,ue>le&&(le=ue,he=ke)}for(ye[1]=[he],ye[0].splice(he,1),ue=$(ye,te,ne.dist);0<ue.d;)ye[1].push(ye[0][ue.p]),ye[0].splice(ue.p,1),ue=$(ye,te,ne.dist);var je=Array(ye[0].length);xe.index=Array(ye[0].length);for(var Se=0;Se<je.length;Se++)je[Se]=te[ce[de].index[ye[0][Se]].index],xe.index[Se]=ce[de].index[ye[0][Se]],xe.children[Se]=ce[de].index[ye[0][Se]];var ve=Array(ye[1].length);be.index=Array(ye[1].length);for(var Ce=0;Ce<ve.length;Ce++)ve[Ce]=te[ce[de].index[ye[1][Ce]].index],be.index[Ce]=ce[de].index[ye[1][Ce]],be.children[Ce]=ce[de].index[ye[1][Ce]];xe.distance=Z(xe.index,te,ne.dist),be.distance=Z(be.index,te,ne.dist),ce.push(xe),ce.push(be),ce[de].children=[xe,be]}ce.splice(de,1)}return ae}},function(E,D,I){'use strict';D.agnes=I(102),D.diana=I(103)},function(E,D,I){'use strict;';function F($){var Z=$,W,K;if('number'!=typeof $[0]){W=$.length,K=$[0].length,Z=Array(W*K);for(var Q=0;Q<W;Q++)for(var G=0;G<K;G++)Z[Q*K+G]=$[Q][G]}else{var ee=_Mathsqrt($.length);_NumberisInteger(ee)&&(W=ee,K=ee)}return{data:Z,rows:W,cols:K}}var O=I(14).FFTUtils;E.exports={fft:function($,Z,W){var K=F($),Q=K.data,G=Object.assign({normalize:!1,divisor:1,rows:K.rows,cols:K.cols},W),ee,te;if(G.rows&&G.cols)ee=G.rows,te=G.cols;else throw new Error('Invalid number of rows or columns '+ee+' '+te);var ne=G.divisor,oe=Z.length,le=Z[0].length,ae,se;if(G.normalize)for(ne=0,ae=0;ae<oe;ae++)for(se=0;se<le;se++)ne+=Z[ae][se];if(0===ne)throw new RangeError('convolution: The divisor is equal to zero');var de=O.toRadix2(Q,ee,te),ue=O.convolute(de.data,Z,de.rows,de.cols);if(ue=O.crop(ue,de.rows,de.cols,ee,te),0!=ne)for(ae=0;ae<ue.length;ae++)ue[ae]/ne;return ue},direct:function($,Z,W){var K=F($),Q=K.data,G=Object.assign({normalize:!1,divisor:1,rows:K.rows,cols:K.cols},W),ee,te;if(G.rows&&G.cols)ee=G.rows,te=G.cols;else throw new Error('Invalid number of rows or columns '+ee+' '+te);var ne=G.divisor,ae=Z.length,se=Z[0].length,oe,le,de,ue,he,ce,ge,pe,me;if(G.normalize)for(ne=0,oe=0;oe<ae;oe++)for(le=0;le<se;le++)ne+=Z[oe][le];if(0===ne)throw new RangeError('convolution: The divisor is equal to zero');var fe=Array(ee*te),xe=_Mathfloor(ae/2),be=_Mathfloor(se/2);for(ue=0;ue<ee;ue++)for(de=0;de<te;de++){for(ce=0,le=0;le<ae;le++)for(oe=0;oe<se;oe++)ge=Z[ae-le-1][se-oe-1],pe=(ue+le-xe+ee)%ee,me=(de+oe-be+te)%te,he=pe*te+me,ce+=Q[he]*ge;he=ue*te+de,fe[he]=ce/ne}return fe},kernelFactory:{LoG:function($,Z,W){var K=1e3;W&&W.factor&&(K=W.factor);var Q=Array(Z),G,ee,te,ne;K*=-1;var se=(Z-1)/2;for(G=0;G<Z;G++)for(Q[G]=Array(Z),ne=(G-se)*(G-se),ee=0;ee<Z;ee++)te=-((ee-se)*(ee-se)+ne)/(2*$*$),Q[G][ee]=_Mathround(K*(1+te)*_Mathexp(te));return Q}},matrix2Array:F}},function(E,D,I){'use strict';const P=I(94),T=[-1,0],F=[0,-1],O=[null,null],$=[-1,-1,0,1],Z=[0,-1,-1,-1],W=[null,null,null,null];E.exports=function(K,Q,G,ee){ee=ee||{};const te=ee.neighbours||8;var ne,ae,se;if(8===te)ne=$,ae=Z,se=W;else if(4===te)ne=T,ae=F,se=O;else throw new RangeError('unsupported neighbours count: '+te);const oe=K.length,le=Array(oe),de=new Int16Array(oe),ue=new P;for(var ce=1,ge=0,he;ge<G;ge++)for(var pe=0,me;pe<Q;pe++)if(me=null,he=pe+ge*Q,K[he]){for(var fe=0;fe<se.length;fe++){var xe=pe+ne[fe],be=ge+ae[fe];if(0<=xe&&0<=be&&xe<Q&&be<G){var ye=le[xe+be*Q];ye?(se[fe]=ye,(!me||se[fe].value<me.value)&&(me=se[fe])):se[fe]=null}}if(!me)le[he]=ue.add(ce++);else{le[he]=me;for(var fe=0;fe<se.length;fe++)se[fe]&&se[fe]!==me&&ue.union(me,se[fe])}}for(var ge=0;ge<G;ge++)for(var pe=0;pe<Q;pe++)he=pe+ge*Q,K[he]&&(de[he]=ue.find(le[he]).value);return de}},function(E,D,I){'use strict';function T(K,Q,G,ee){var te={},ne,ae,se,oe;for(oe=0;oe<K.length;oe++)0!=K[oe]&&(ae=oe%ee,ne=(oe-ae)/ee,te[K[oe]]?(se=te[K[oe]],se.x+=ae*Q[oe],se.y+=ne*Q[oe],se.z+=Q[oe],ae<se.minX&&(se.minX=ae),ae>se.maxX&&(se.maxX=ae),ne<se.minY&&(se.minY=ne),ne>se.maxY&&(se.maxY=ne)):te[K[oe]]={x:ae*Q[oe],y:ne*Q[oe],z:Q[oe],minX:ae,maxX:ae,minY:ne,maxY:ne});var le=Object.keys(te),de=Array(le.length);for(oe=0;oe<le.length;oe++)de[oe]=te[le[oe]],de[oe].x/=de[oe].z,de[oe].y/=de[oe].z;return de}var F=I(6).array,O=I(105),$=I(106);const Z=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];E.exports={findPeaks2DRegion:function(K,Q){var G=Object.assign({},{nStdev:3,kernel:Z},Q),ee=O.matrix2Array(K),te=ee.data,ne;ee.rows&&ee.cols&&(G.rows=ee.rows,G.cols=ee.cols);var ae=G.rows,se=G.cols;if(!ae||!se)throw new Error('Invalid number of rows or columns '+ae+' '+se);var oe=G.kernel,le=G.filteredData;le||(le=O.fft(te,oe,G));var de=G.nStdev,ue=0;for(ne=se*ae-2;0<=ne;ne--)ue+=_Mathpow(le[ne]-le[ne+1],2);ue=-_Mathsqrt(ue),ue*=de/ae;var he=Array(se*ae);for(ne=se*ae-1;0<=ne;ne--)he[ne]=0;var ce=0;for(ne=le.length-1;0<=ne;ne--)le[ne]<ue&&(he[ne]=1,ce++);var ge=$(he,se,ae,{neighbours:8}),pe=T(ge,te,ae,se);return 0<pe.length,pe},findPeaks2DMax:function(K,Q){var G=Object.assign({},{nStdev:3,kernel:Z},Q),ee=O.matrix2Array(K),te=ee.data;ee.rows&&ee.cols&&(G.rows=ee.rows,G.cols=ee.cols);var ne=G.rows,ae=G.cols;if(!ne||!ae)throw new Error('Invalid number of rows or columns '+ne+' '+ae);var se=G.kernel,oe=G.filteredData;oe||(oe=O.fft(te,se,G));for(var le=G.nStdev,de=0,ue=ae*ne-2;0<=ue;ue--)de+=_Mathpow(oe[ue]-oe[ue+1],2);de=-_Mathsqrt(de),de*=le/ne;for(var ge=[],pe=0,ue=0,he,ce;ue<oe.length;ue++)oe[ue]<de&&(he=_Mathfloor(ue/ae),ce=ue%ae,0<he&&he+1<ne&&ce+1<ae&&0<ce&&oe[ue]<oe[ue+1]&&oe[ue]<oe[ue-1]&&(pe=(he-1)*ae+ce,oe[ue]<oe[pe-1]&&oe[ue]<oe[pe]&&oe[ue]<oe[pe+1]&&(pe=(he+1)*ae+ce,oe[ue]<oe[pe-1]&&oe[ue]<oe[pe]&&oe[ue]<oe[pe+1]&&ge.push({x:ce,y:he,z:te[ue]}))));return ge}}},function(E,D,I){'use strict';function R(T){if(!(this instanceof R))return new R(T);if(T=P.checkMatrix(T),!T.isSymmetric())throw new Error('Matrix is not symmetric');var F=T,O=F.rows,$=new P(O,O),Z=!0,W,K,Q;for(K=0;K<O;K++){var G=$[K],ee=0;for(Q=0;Q<K;Q++){var te=$[Q],ne=0;for(W=0;W<Q;W++)ne+=te[W]*G[W];G[Q]=ne=(F[K][Q]-ne)/$[Q][Q],ee+=ne*ne}for(ee=F[K][K]-ee,Z&=0<ee,$[K][K]=_Mathsqrt(_Mathmax(ee,0)),Q=K+1;Q<O;Q++)$[K][Q]=0}if(!Z)throw new Error('Matrix is not positive definite');this.L=$}var P=I(3);R.prototype={get leftTriangularFactor(){return this.L},solve:function(T){T=P.checkMatrix(T);var F=this.L,O=F.rows;if(T.rows!==O)throw new Error('Matrix dimensions do not match');var $=T.columns,Z=T.clone(),W,K,Q;for(Q=0;Q<O;Q++)for(K=0;K<$;K++){for(W=0;W<Q;W++)Z[Q][K]-=Z[W][K]*F[Q][W];Z[Q][K]/=F[Q][Q]}for(Q=O-1;0<=Q;Q--)for(K=0;K<$;K++){for(W=Q+1;W<O;W++)Z[Q][K]-=Z[W][K]*F[W][Q];Z[Q][K]/=F[Q][Q]}return Z}},E.exports=R},function(E,D,I){'use strict';function R(K){if(!(this instanceof R))return new R(K);if(K=Z.checkMatrix(K),!K.isSquare())throw new Error('Matrix is not a square matrix');var Q=K.columns,G=Z.zeros(Q,Q),ee=Array(Q),te=Array(Q),ne=K,ae,se;if(K.isSymmetric()){for(ae=0;ae<Q;ae++)for(se=0;se<Q;se++)G[ae][se]=ne[ae][se];P(Q,te,ee,G),T(Q,te,ee,G)}else{var oe=Z.zeros(Q,Q),le=Array(Q);for(se=0;se<Q;se++)for(ae=0;ae<Q;ae++)oe[ae][se]=ne[ae][se];F(Q,oe,le,G),O(Q,te,ee,G,oe)}this.n=Q,this.e=te,this.d=ee,this.V=G}function P(K,Q,G,ee){var te,ne,ae,se,oe,le,de,ue;for(oe=0;oe<K;oe++)G[oe]=ee[K-1][oe];for(se=K-1;0<se;se--){for(ue=0,ae=0,le=0;le<se;le++)ue+=_Mathabs(G[le]);if(0===ue)for(Q[se]=G[se-1],oe=0;oe<se;oe++)G[oe]=ee[se-1][oe],ee[se][oe]=0,ee[oe][se]=0;else{for(le=0;le<se;le++)G[le]/=ue,ae+=G[le]*G[le];for(te=G[se-1],ne=_Mathsqrt(ae),0<te&&(ne=-ne),Q[se]=ue*ne,ae-=te*ne,G[se-1]=te-ne,oe=0;oe<se;oe++)Q[oe]=0;for(oe=0;oe<se;oe++){for(te=G[oe],ee[oe][se]=te,ne=Q[oe]+ee[oe][oe]*te,le=oe+1;le<=se-1;le++)ne+=ee[le][oe]*G[le],Q[le]+=ee[le][oe]*te;Q[oe]=ne}for(te=0,oe=0;oe<se;oe++)Q[oe]/=ae,te+=Q[oe]*G[oe];for(de=te/(ae+ae),oe=0;oe<se;oe++)Q[oe]-=de*G[oe];for(oe=0;oe<se;oe++){for(te=G[oe],ne=Q[oe],le=oe;le<=se-1;le++)ee[le][oe]-=te*Q[le]+ne*G[le];G[oe]=ee[se-1][oe],ee[se][oe]=0}}G[se]=ae}for(se=0;se<K-1;se++){if(ee[K-1][se]=ee[se][se],ee[se][se]=1,ae=G[se+1],0!==ae){for(le=0;le<=se;le++)G[le]=ee[le][se+1]/ae;for(oe=0;oe<=se;oe++){for(ne=0,le=0;le<=se;le++)ne+=ee[le][se+1]*ee[le][oe];for(le=0;le<=se;le++)ee[le][oe]-=ne*G[le]}}for(le=0;le<=se;le++)ee[le][se+1]=0}for(oe=0;oe<K;oe++)G[oe]=ee[K-1][oe],ee[K-1][oe]=0;ee[K-1][K-1]=1,Q[0]=0}function T(K,Q,G,ee){var te,ne,ae,se,oe,le,de,ue,he,ce,ge,pe,me,fe,xe,be,ye;for(ae=1;ae<K;ae++)Q[ae-1]=Q[ae];Q[K-1]=0;var _e=0,ke=0,we=2.220446049250313e-16;for(le=0;le<K;le++){for(ke=_Mathmax(ke,_Mathabs(G[le])+_Mathabs(Q[le])),de=le;de<K&&!(_Mathabs(Q[de])<=we*ke);)de++;if(de>le){ye=0;do{for(++ye,te=G[le],ue=(G[le+1]-te)/(2*Q[le]),he=W(ue,1),0>ue&&(he=-he),G[le]=Q[le]/(ue+he),G[le+1]=Q[le]*(ue+he),ce=G[le+1],ne=te-G[le],ae=le+2;ae<K;ae++)G[ae]-=ne;for(_e+=ne,ue=G[de],ge=1,pe=ge,me=ge,fe=Q[le+1],xe=0,be=0,ae=de-1;ae>=le;ae--)for(me=pe,pe=ge,be=xe,te=ge*Q[ae],ne=ge*ue,he=W(ue,Q[ae]),Q[ae+1]=xe*he,xe=Q[ae]/he,ge=ue/he,ue=ge*G[ae]-xe*te,G[ae+1]=ne+xe*(ge*te+xe*G[ae]),oe=0;oe<K;oe++)ne=ee[oe][ae+1],ee[oe][ae+1]=xe*ee[oe][ae]+ge*ne,ee[oe][ae]=ge*ee[oe][ae]-xe*ne;ue=-xe*be*me*fe*Q[le]/ce,Q[le]=xe*ue,G[le]=ge*ue}while(_Mathabs(Q[le])>we*ke)}G[le]+=_e,Q[le]=0}for(ae=0;ae<K-1;ae++){for(oe=ae,ue=G[ae],se=ae+1;se<K;se++)G[se]<ue&&(oe=se,ue=G[se]);if(oe!==ae)for(G[oe]=G[ae],G[ae]=ue,se=0;se<K;se++)ue=ee[se][ae],ee[se][ae]=ee[se][oe],ee[se][oe]=ue}}function F(K,Q,G,ee){var te=0,ne=K-1,ae,se,oe,le,de,ue,he;for(ue=te+1;ue<=ne-1;ue++){for(he=0,le=ue;le<=ne;le++)he+=_Mathabs(Q[le][ue-1]);if(0!==he){for(oe=0,le=ne;le>=ue;le--)G[le]=Q[le][ue-1]/he,oe+=G[le]*G[le];for(se=_Mathsqrt(oe),0<G[ue]&&(se=-se),oe-=G[ue]*se,G[ue]-=se,de=ue;de<K;de++){for(ae=0,le=ne;le>=ue;le--)ae+=G[le]*Q[le][de];for(ae/=oe,le=ue;le<=ne;le++)Q[le][de]-=ae*G[le]}for(le=0;le<=ne;le++){for(ae=0,de=ne;de>=ue;de--)ae+=G[de]*Q[le][de];for(ae/=oe,de=ue;de<=ne;de++)Q[le][de]-=ae*G[de]}G[ue]=he*G[ue],Q[ue][ue-1]=he*se}}for(le=0;le<K;le++)for(de=0;de<K;de++)ee[le][de]=le===de?1:0;for(ue=ne-1;ue>=te+1;ue--)if(0!==Q[ue][ue-1]){for(le=ue+1;le<=ne;le++)G[le]=Q[le][ue-1];for(de=ue;de<=ne;de++){for(se=0,le=ue;le<=ne;le++)se+=G[le]*ee[le][de];for(se=se/G[ue]/Q[ue][ue-1],le=ue;le<=ne;le++)ee[le][de]+=se*G[le]}}}function O(K,Q,G,ee,te){var ne=K-1,ae=0,se=K-1,oe=2.220446049250313e-16,le=0,de=0,ue=0,he=0,ce=0,ge=0,pe=0,me=0,fe,xe,be,ye,_e,ke,we,je,Se,ve,Ce,Ee,De,Ie,Ae;for(fe=0;fe<K;fe++)for((fe<ae||fe>se)&&(G[fe]=te[fe][fe],Q[fe]=0),xe=_Mathmax(fe-1,0);xe<K;xe++)de+=_Mathabs(te[fe][xe]);for(;ne>=ae;){for(ye=ne;ye>ae&&(ge=_Mathabs(te[ye-1][ye-1])+_Mathabs(te[ye][ye]),0===ge&&(ge=de),!(_Mathabs(te[ye][ye-1])<oe*ge));)ye--;if(ye===ne)te[ne][ne]+=le,G[ne]=te[ne][ne],Q[ne]=0,ne--,me=0;else if(ye===ne-1){if(we=te[ne][ne-1]*te[ne-1][ne],ue=(te[ne-1][ne-1]-te[ne][ne])/2,he=ue*ue+we,pe=_Mathsqrt(_Mathabs(he)),te[ne][ne]+=le,te[ne-1][ne-1]=te[ne-1][ne-1]+le,je=te[ne][ne],0<=he){for(pe=0<=ue?ue+pe:ue-pe,G[ne-1]=je+pe,G[ne]=G[ne-1],0!==pe&&(G[ne]=je-we/pe),Q[ne-1]=0,Q[ne]=0,je=te[ne][ne-1],ge=_Mathabs(je)+_Mathabs(pe),ue=je/ge,he=pe/ge,ce=_Mathsqrt(ue*ue+he*he),ue/=ce,he/=ce,xe=ne-1;xe<K;xe++)pe=te[ne-1][xe],te[ne-1][xe]=he*pe+ue*te[ne][xe],te[ne][xe]=he*te[ne][xe]-ue*pe;for(fe=0;fe<=ne;fe++)pe=te[fe][ne-1],te[fe][ne-1]=he*pe+ue*te[fe][ne],te[fe][ne]=he*te[fe][ne]-ue*pe;for(fe=ae;fe<=se;fe++)pe=ee[fe][ne-1],ee[fe][ne-1]=he*pe+ue*ee[fe][ne],ee[fe][ne]=he*ee[fe][ne]-ue*pe}else G[ne-1]=je+ue,G[ne]=je+ue,Q[ne-1]=pe,Q[ne]=-pe;ne-=2,me=0}else{if(je=te[ne][ne],Se=0,we=0,ye<ne&&(Se=te[ne-1][ne-1],we=te[ne][ne-1]*te[ne-1][ne]),10==me){for(le+=je,fe=ae;fe<=ne;fe++)te[fe][fe]-=je;ge=_Mathabs(te[ne][ne-1])+_Mathabs(te[ne-1][ne-2]),je=Se=0.75*ge,we=-0.4375*ge*ge}if(30==me&&(ge=(Se-je)/2,ge=ge*ge+we,0<ge)){for(ge=_Mathsqrt(ge),Se<je&&(ge=-ge),ge=je-we/((Se-je)/2+ge),fe=ae;fe<=ne;fe++)te[fe][fe]-=ge;le+=ge,je=Se=we=0.964}for(++me,_e=ne-2;_e>=ye&&(pe=te[_e][_e],ce=je-pe,ge=Se-pe,ue=(ce*ge-we)/te[_e+1][_e]+te[_e][_e+1],he=te[_e+1][_e+1]-pe-ce-ge,ce=te[_e+2][_e+1],ge=_Mathabs(ue)+_Mathabs(he)+_Mathabs(ce),ue/=ge,he/=ge,ce/=ge,_e!==ye)&&!(_Mathabs(te[_e][_e-1])*(_Mathabs(he)+_Mathabs(ce))<oe*(_Mathabs(ue)*(_Mathabs(te[_e-1][_e-1])+_Mathabs(pe)+_Mathabs(te[_e+1][_e+1]))));)_e--;for(fe=_e+2;fe<=ne;fe++)te[fe][fe-2]=0,fe>_e+2&&(te[fe][fe-3]=0);for(be=_e;be<=ne-1&&(Ie=be!==ne-1,be!==_e&&(ue=te[be][be-1],he=te[be+1][be-1],ce=Ie?te[be+2][be-1]:0,je=_Mathabs(ue)+_Mathabs(he)+_Mathabs(ce),0!==je&&(ue/=je,he/=je,ce/=je)),0!==je);be++)if(ge=_Mathsqrt(ue*ue+he*he+ce*ce),0>ue&&(ge=-ge),0!==ge){for(be===_e?ye!==_e&&(te[be][be-1]=-te[be][be-1]):te[be][be-1]=-ge*je,ue+=ge,je=ue/ge,Se=he/ge,pe=ce/ge,he/=ue,ce/=ue,xe=be;xe<K;xe++)ue=te[be][xe]+he*te[be+1][xe],Ie&&(ue+=ce*te[be+2][xe],te[be+2][xe]=te[be+2][xe]-ue*pe),te[be][xe]-=ue*je,te[be+1][xe]=te[be+1][xe]-ue*Se;for(fe=0;fe<=_Mathmin(ne,be+3);fe++)ue=je*te[fe][be]+Se*te[fe][be+1],Ie&&(ue+=pe*te[fe][be+2],te[fe][be+2]=te[fe][be+2]-ue*ce),te[fe][be]-=ue,te[fe][be+1]=te[fe][be+1]-ue*he;for(fe=ae;fe<=se;fe++)ue=je*ee[fe][be]+Se*ee[fe][be+1],Ie&&(ue+=pe*ee[fe][be+2],ee[fe][be+2]=ee[fe][be+2]-ue*ce),ee[fe][be]-=ue,ee[fe][be+1]=ee[fe][be+1]-ue*he}}}if(0!==de){for(ne=K-1;0<=ne;ne--)if(ue=G[ne],he=Q[ne],0===he)for(ye=ne,te[ne][ne]=1,fe=ne-1;0<=fe;fe--){for(we=te[fe][fe]-ue,ce=0,xe=ye;xe<=ne;xe++)ce+=te[fe][xe]*te[xe][ne];if(0>Q[fe])pe=we,ge=ce;else if(ye=fe,0===Q[fe]?te[fe][ne]=0===we?-ce/(oe*de):-ce/we:(je=te[fe][fe+1],Se=te[fe+1][fe],he=(G[fe]-ue)*(G[fe]-ue)+Q[fe]*Q[fe],ke=(je*ge-pe*ce)/he,te[fe][ne]=ke,te[fe+1][ne]=_Mathabs(je)>_Mathabs(pe)?(-ce-we*ke)/je:(-ge-Se*ke)/pe),ke=_Mathabs(te[fe][ne]),1<oe*ke*ke)for(xe=fe;xe<=ne;xe++)te[xe][ne]/=ke}else if(0>he)for(ye=ne-1,_Mathabs(te[ne][ne-1])>_Mathabs(te[ne-1][ne])?(te[ne-1][ne-1]=he/te[ne][ne-1],te[ne-1][ne]=-(te[ne][ne]-ue)/te[ne][ne-1]):(Ae=$(0,-te[ne-1][ne],te[ne-1][ne-1]-ue,he),te[ne-1][ne-1]=Ae[0],te[ne-1][ne]=Ae[1]),te[ne][ne-1]=0,te[ne][ne]=1,fe=ne-2;0<=fe;fe--){for(ve=0,Ce=0,xe=ye;xe<=ne;xe++)ve+=te[fe][xe]*te[xe][ne-1],Ce+=te[fe][xe]*te[xe][ne];if(we=te[fe][fe]-ue,0>Q[fe])pe=we,ce=ve,ge=Ce;else if(ye=fe,0===Q[fe]?(Ae=$(-ve,-Ce,we,he),te[fe][ne-1]=Ae[0],te[fe][ne]=Ae[1]):(je=te[fe][fe+1],Se=te[fe+1][fe],Ee=(G[fe]-ue)*(G[fe]-ue)+Q[fe]*Q[fe]-he*he,De=2*(G[fe]-ue)*he,0===Ee&&0===De&&(Ee=oe*de*(_Mathabs(we)+_Mathabs(he)+_Mathabs(je)+_Mathabs(Se)+_Mathabs(pe))),Ae=$(je*ce-pe*ve+he*Ce,je*ge-pe*Ce-he*ve,Ee,De),te[fe][ne-1]=Ae[0],te[fe][ne]=Ae[1],_Mathabs(je)>_Mathabs(pe)+_Mathabs(he)?(te[fe+1][ne-1]=(-ve-we*te[fe][ne-1]+he*te[fe][ne])/je,te[fe+1][ne]=(-Ce-we*te[fe][ne]-he*te[fe][ne-1])/je):(Ae=$(-ce-Se*te[fe][ne-1],-ge-Se*te[fe][ne],pe,he),te[fe+1][ne-1]=Ae[0],te[fe+1][ne]=Ae[1])),ke=_Mathmax(_Mathabs(te[fe][ne-1]),_Mathabs(te[fe][ne])),1<oe*ke*ke)for(xe=fe;xe<=ne;xe++)te[xe][ne-1]=te[xe][ne-1]/ke,te[xe][ne]/=ke}for(fe=0;fe<K;fe++)if(fe<ae||fe>se)for(xe=fe;xe<K;xe++)ee[fe][xe]=te[fe][xe];for(xe=K-1;xe>=ae;xe--)for(fe=ae;fe<=se;fe++){for(pe=0,be=ae;be<=_Mathmin(xe,se);be++)pe+=ee[fe][be]*te[be][xe];ee[fe][xe]=pe}}}function $(K,Q,G,ee){var te,ne;return _Mathabs(G)>_Mathabs(ee)?(te=ee/G,ne=G+te*ee,[(K+te*Q)/ne,(Q-te*K)/ne]):(te=G/ee,ne=ee+te*G,[(te*K+Q)/ne,(te*Q-K)/ne])}var Z=I(3),W=I(16).hypotenuse;R.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return this.V},get diagonalMatrix(){var K=this.n,Q=this.e,G=this.d,ee=new Z(K,K),te,ne;for(te=0;te<K;te++){for(ne=0;ne<K;ne++)ee[te][ne]=0;ee[te][te]=G[te],0<Q[te]?ee[te][te+1]=Q[te]:0>Q[te]&&(ee[te][te-1]=Q[te])}return ee}},E.exports=R},function(E,D,I){'use strict';function R(T){if(!(this instanceof R))return new R(T);T=P.checkMatrix(T);var F=T.clone(),O=F.rows,$=F.columns,Z=Array(O),W=1,K,Q,G,ee,te,ne,ae,se,oe,le;for(K=0;K<O;K++)Z[K]=K;for(oe=Array(O),Q=0;Q<$;Q++){for(K=0;K<O;K++)oe[K]=F[K][Q];for(K=0;K<O;K++){for(se=F[K],le=_Mathmin(K,Q),te=0,G=0;G<le;G++)te+=se[G]*oe[G];se[Q]=oe[K]-=te}for(ee=Q,K=Q+1;K<O;K++)_Mathabs(oe[K])>_Mathabs(oe[ee])&&(ee=K);if(ee!==Q){for(G=0;G<$;G++)ne=F[ee][G],F[ee][G]=F[Q][G],F[Q][G]=ne;ae=Z[ee],Z[ee]=Z[Q],Z[Q]=ae,W=-W}if(Q<O&&0!==F[Q][Q])for(K=Q+1;K<O;K++)F[K][Q]/=F[Q][Q]}this.LU=F,this.pivotVector=Z,this.pivotSign=W}var P=I(3);R.prototype={isSingular:function(){for(var T=this.LU,F=T.columns,O=0;O<F;O++)if(0===T[O][O])return!0;return!1},get determinant(){var T=this.LU;if(!T.isSquare())throw new Error('Matrix must be square');for(var F=this.pivotSign,O=T.columns,$=0;$<O;$++)F*=T[$][$];return F},get lowerTriangularFactor(){for(var T=this.LU,F=T.rows,O=T.columns,$=new P(F,O),Z=0;Z<F;Z++)for(var W=0;W<O;W++)$[Z][W]=Z>W?T[Z][W]:Z===W?1:0;return $},get upperTriangularFactor(){for(var T=this.LU,F=T.rows,O=T.columns,$=new P(F,O),Z=0;Z<F;Z++)for(var W=0;W<O;W++)$[Z][W]=Z<=W?T[Z][W]:0;return $},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(T){T=P.checkMatrix(T);var F=this.LU,O=F.rows;if(O!==T.rows)throw new Error('Invalid matrix dimensions');if(this.isSingular())throw new Error('LU matrix is singular');var $=T.columns,Z=T.subMatrixRow(this.pivotVector,0,$-1),W=F.columns,K,Q,G;for(G=0;G<W;G++)for(K=G+1;K<W;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*F[K][G];for(G=W-1;0<=G;G--){for(Q=0;Q<$;Q++)Z[G][Q]/=F[G][G];for(K=0;K<G;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*F[K][G]}return Z}},E.exports=R},function(E,D,I){'use strict';function R(F){if(!(this instanceof R))return new R(F);F=P.checkMatrix(F);var O=F.clone(),$=F.rows,Z=F.columns,W=Array(Z),K,Q,G,ee;for(G=0;G<Z;G++){var te=0;for(K=G;K<$;K++)te=T(te,O[K][G]);if(0!==te){for(0>O[G][G]&&(te=-te),K=G;K<$;K++)O[K][G]/=te;for(O[G][G]+=1,Q=G+1;Q<Z;Q++){for(ee=0,K=G;K<$;K++)ee+=O[K][G]*O[K][Q];for(ee=-ee/O[G][G],K=G;K<$;K++)O[K][Q]+=ee*O[K][G]}}W[G]=-te}this.QR=O,this.Rdiag=W}var P=I(3),T=I(16).hypotenuse;R.prototype={solve:function(F){F=P.checkMatrix(F);var O=this.QR,$=O.rows;if(F.rows!==$)throw new Error('Matrix row dimensions must agree');if(!this.isFullRank())throw new Error('Matrix is rank deficient');var Z=F.columns,W=F.clone(),K=O.columns,Q,G,ee,te;for(ee=0;ee<K;ee++)for(G=0;G<Z;G++){for(te=0,Q=ee;Q<$;Q++)te+=O[Q][ee]*W[Q][G];for(te=-te/O[ee][ee],Q=ee;Q<$;Q++)W[Q][G]+=te*O[Q][ee]}for(ee=K-1;0<=ee;ee--){for(G=0;G<Z;G++)W[ee][G]/=this.Rdiag[ee];for(Q=0;Q<ee;Q++)for(G=0;G<Z;G++)W[Q][G]-=W[ee][G]*O[Q][ee]}return W.subMatrix(0,K-1,0,Z-1)},isFullRank:function(){for(var F=this.QR.columns,O=0;O<F;O++)if(0===this.Rdiag[O])return!1;return!0},get upperTriangularFactor(){var F=this.QR,O=F.columns,$=new P(O,O),Z,W;for(Z=0;Z<O;Z++)for(W=0;W<O;W++)$[Z][W]=Z<W?F[Z][W]:Z===W?this.Rdiag[Z]:0;return $},get orthogonalFactor(){var F=this.QR,O=F.rows,$=F.columns,Z=new P(O,$),W,K,Q,G;for(Q=$-1;0<=Q;Q--){for(W=0;W<O;W++)Z[W][Q]=0;for(Z[Q][Q]=1,K=Q;K<$;K++)if(0!==F[Q][Q]){for(G=0,W=Q;W<O;W++)G+=F[W][Q]*Z[W][K];for(G=-G/F[Q][Q],W=Q;W<O;W++)Z[W][K]+=G*F[W][Q]}}return Z}},E.exports=R},function(E,D,I){'use strict';function R(F,O){if(!(this instanceof R))return new R(F,O);F=P.checkMatrix(F),O=O||{};var $=F.clone(),Z=F.rows,W=F.columns,K=_Mathmin(Z,W),Q=!0,G=!0;!1===O.computeLeftSingularVectors&&(Q=!1),!1===O.computeRightSingularVectors&&(G=!1);var ee=!0===O.autoTranspose,te=!1;if(Z<W)if(!ee)console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');else{$=$.transpose(),Z=$.rows,W=$.columns,te=!0;var ne=Q;Q=G,G=ne}var ae=Array(_Mathmin(Z+1,W)),se=P.zeros(Z,K),oe=P.zeros(W,W),le=Array(W),de=Array(Z),ue=_Mathmin(Z-1,W),he=_Mathmax(0,_Mathmin(W-2,Z)),ce,ge,pe,me,fe,xe,be,ye,_e,ke,we,je,Se,ve,Ce,Ee,De,Ie,Ae,Re,Pe;for(pe=0,ke=_Mathmax(ue,he);pe<ke;pe++){if(pe<ue){for(ae[pe]=0,ce=pe;ce<Z;ce++)ae[pe]=T(ae[pe],$[ce][pe]);if(0!==ae[pe]){for(0>$[pe][pe]&&(ae[pe]=-ae[pe]),ce=pe;ce<Z;ce++)$[ce][pe]/=ae[pe];$[pe][pe]+=1}ae[pe]=-ae[pe]}for(ge=pe+1;ge<W;ge++){if(pe<ue&&0!==ae[pe]){for(fe=0,ce=pe;ce<Z;ce++)fe+=$[ce][pe]*$[ce][ge];for(fe=-fe/$[pe][pe],ce=pe;ce<Z;ce++)$[ce][ge]+=fe*$[ce][pe]}le[ge]=$[pe][ge]}if(Q&&pe<ue)for(ce=pe;ce<Z;ce++)se[ce][pe]=$[ce][pe];if(pe<he){for(le[pe]=0,ce=pe+1;ce<W;ce++)le[pe]=T(le[pe],le[ce]);if(0!==le[pe]){for(0>le[pe+1]&&(le[pe]=-le[pe]),ce=pe+1;ce<W;ce++)le[ce]/=le[pe];le[pe+1]+=1}if(le[pe]=-le[pe],pe+1<Z&&0!==le[pe]){for(ce=pe+1;ce<Z;ce++)de[ce]=0;for(ge=pe+1;ge<W;ge++)for(ce=pe+1;ce<Z;ce++)de[ce]+=le[ge]*$[ce][ge];for(ge=pe+1;ge<W;ge++)for(fe=-le[ge]/le[pe+1],ce=pe+1;ce<Z;ce++)$[ce][ge]+=fe*de[ce]}if(G)for(ce=pe+1;ce<W;ce++)oe[ce][pe]=le[ce]}}if(me=_Mathmin(W,Z+1),ue<W&&(ae[ue]=$[ue][ue]),Z<me&&(ae[me-1]=0),he+1<me&&(le[he]=$[he][me-1]),le[me-1]=0,Q){for(ge=ue;ge<K;ge++){for(ce=0;ce<Z;ce++)se[ce][ge]=0;se[ge][ge]=1}for(pe=ue-1;0<=pe;pe--)if(0!==ae[pe]){for(ge=pe+1;ge<K;ge++){for(fe=0,ce=pe;ce<Z;ce++)fe+=se[ce][pe]*se[ce][ge];for(fe=-fe/se[pe][pe],ce=pe;ce<Z;ce++)se[ce][ge]+=fe*se[ce][pe]}for(ce=pe;ce<Z;ce++)se[ce][pe]=-se[ce][pe];for(se[pe][pe]=1+se[pe][pe],ce=0;ce<pe-1;ce++)se[ce][pe]=0}else{for(ce=0;ce<Z;ce++)se[ce][pe]=0;se[pe][pe]=1}}if(G)for(pe=W-1;0<=pe;pe--){if(pe<he&&0!==le[pe])for(ge=pe+1;ge<W;ge++){for(fe=0,ce=pe+1;ce<W;ce++)fe+=oe[ce][pe]*oe[ce][ge];for(fe=-fe/oe[pe+1][pe],ce=pe+1;ce<W;ce++)oe[ce][ge]+=fe*oe[ce][pe]}for(ce=0;ce<W;ce++)oe[ce][pe]=0;oe[pe][pe]=1}for(var Te=me-1,Fe=0,ze=2.220446049250313e-16;0<me;){for(pe=me-2;-1<=pe&&-1!==pe;pe--)if(_Mathabs(le[pe])<=ze*(_Mathabs(ae[pe])+_Mathabs(ae[pe+1]))){le[pe]=0;break}if(pe===me-2)we=4;else{for(xe=me-1;xe>=pe&&xe!==pe;xe--)if(fe=(xe===me?0:_Mathabs(le[xe]))+(xe===pe+1?0:_Mathabs(le[xe-1])),_Mathabs(ae[xe])<=ze*fe){ae[xe]=0;break}xe===pe?we=3:xe===me-1?we=1:(we=2,pe=xe)}switch(pe++,we){case 1:{for(be=le[me-2],le[me-2]=0,ge=me-2;ge>=pe;ge--)if(fe=T(ae[ge],be),ye=ae[ge]/fe,_e=be/fe,ae[ge]=fe,ge!==pe&&(be=-_e*le[ge-1],le[ge-1]=ye*le[ge-1]),G)for(ce=0;ce<W;ce++)fe=ye*oe[ce][ge]+_e*oe[ce][me-1],oe[ce][me-1]=-_e*oe[ce][ge]+ye*oe[ce][me-1],oe[ce][ge]=fe;break}case 2:{for(be=le[pe-1],le[pe-1]=0,ge=pe;ge<me;ge++)if(fe=T(ae[ge],be),ye=ae[ge]/fe,_e=be/fe,ae[ge]=fe,be=-_e*le[ge],le[ge]=ye*le[ge],Q)for(ce=0;ce<Z;ce++)fe=ye*se[ce][ge]+_e*se[ce][pe-1],se[ce][pe-1]=-_e*se[ce][ge]+ye*se[ce][pe-1],se[ce][ge]=fe;break}case 3:{for(je=_Mathmax(_Mathmax(_Mathmax(_Mathmax(_Mathabs(ae[me-1]),_Mathabs(ae[me-2])),_Mathabs(le[me-2])),_Mathabs(ae[pe])),_Mathabs(le[pe])),Se=ae[me-1]/je,ve=ae[me-2]/je,Ce=le[me-2]/je,Ee=ae[pe]/je,De=le[pe]/je,Ie=((ve+Se)*(ve-Se)+Ce*Ce)/2,Ae=Se*Ce*(Se*Ce),Re=0,(0!==Ie||0!==Ae)&&(Re=_Mathsqrt(Ie*Ie+Ae),0>Ie&&(Re=-Re),Re=Ae/(Ie+Re)),be=(Ee+Se)*(Ee-Se)+Re,Pe=Ee*De,ge=pe;ge<me-1;ge++){if(fe=T(be,Pe),ye=be/fe,_e=Pe/fe,ge!==pe&&(le[ge-1]=fe),be=ye*ae[ge]+_e*le[ge],le[ge]=ye*le[ge]-_e*ae[ge],Pe=_e*ae[ge+1],ae[ge+1]=ye*ae[ge+1],G)for(ce=0;ce<W;ce++)fe=ye*oe[ce][ge]+_e*oe[ce][ge+1],oe[ce][ge+1]=-_e*oe[ce][ge]+ye*oe[ce][ge+1],oe[ce][ge]=fe;if(fe=T(be,Pe),ye=be/fe,_e=Pe/fe,ae[ge]=fe,be=ye*le[ge]+_e*ae[ge+1],ae[ge+1]=-_e*le[ge]+ye*ae[ge+1],Pe=_e*le[ge+1],le[ge+1]=ye*le[ge+1],Q&&ge<Z-1)for(ce=0;ce<Z;ce++)fe=ye*se[ce][ge]+_e*se[ce][ge+1],se[ce][ge+1]=-_e*se[ce][ge]+ye*se[ce][ge+1],se[ce][ge]=fe}le[me-2]=be,++Fe;break}case 4:{if(0>=ae[pe]&&(ae[pe]=0>ae[pe]?-ae[pe]:0,G))for(ce=0;ce<=Te;ce++)oe[ce][pe]=-oe[ce][pe];for(;pe<Te&&!(ae[pe]>=ae[pe+1]);){if(fe=ae[pe],ae[pe]=ae[pe+1],ae[pe+1]=fe,G&&pe<W-1)for(ce=0;ce<W;ce++)fe=oe[ce][pe+1],oe[ce][pe+1]=oe[ce][pe],oe[ce][pe]=fe;if(Q&&pe<Z-1)for(ce=0;ce<Z;ce++)fe=se[ce][pe+1],se[ce][pe+1]=se[ce][pe],se[ce][pe]=fe;pe++}Fe=0,me--;break}}}if(te){var Me=oe;oe=se,se=Me}this.m=Z,this.n=W,this.s=ae,this.U=se,this.V=oe}var P=I(3),T=I(16).hypotenuse;R.prototype={get condition(){return this.s[0]/this.s[_Mathmin(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var O=_Mathmax(this.m,this.n)*this.s[0]*2.220446049250313e-16,$=0,Z=this.s,W=0,K=Z.length;W<K;W++)Z[W]>O&&$++;return $},get diagonal(){return this.s},get threshold(){return 2.220446049250313e-16/2*_Mathmax(this.m,this.n)*this.s[0]},get leftSingularVectors(){return this.U},get rightSingularVectors(){return this.V},get diagonalMatrix(){return P.diag(this.s)},solve:function(F){var $=this.threshold,Z=this.s.length,W=P.zeros(Z,Z),K;for(K=0;K<Z;K++)W[K][K]=_Mathabs(this.s[K])<=$?0:1/this.s[K];var Q=this.V.mmul(W),G=this.V.rows,ee=this.U.rows,te=P.zeros(G,ee),ne,ae,se;for(K=0;K<G;K++)for(ne=0;ne<ee;ne++){for(se=0,ae=0;ae<Z;ae++)se+=Q[K][ae]*this.U[ne][ae];te[K][ne]=se}return te.mmul(F)},solveForDiagonal:function(F){return this.solve(P.diag(F))},inverse:function(){var F=this.threshold,O=this.V.rows,$=this.V.columns,Z=new P(O,this.s.length),W,K;for(W=0;W<O;W++)for(K=0;K<$;K++)Z[W][K]=_Mathabs(this.s[K])>F?this.V[W][K]/this.s[K]:0;var Q=this.U.rows,G=this.U.columns,ee=new P(O,Q),te,ne;for(W=0;W<O;W++)for(K=0;K<Q;K++){for(ne=0,te=0;te<G;te++)ne+=Z[W][te]*this.U[K][te];ee[W][K]=ne}return ee}},E.exports=R},function(E,D,I){'use strict';function R(K){return P(K,T.eye(K.rows))}function P(K,Q){return K.isSquare()?new $(K).solve(Q):new Z(K).solve(Q)}var T=I(3),F=I(112),O=I(109),$=I(110),Z=I(111),W=I(108);T.prototype.inverse=function(){return R(this)},T.prototype.solve=function(K){return P(this,K)},E.exports={SingularValueDecomposition:F,SVD:F,EigenvalueDecomposition:O,EVD:O,LuDecomposition:$,LU:$,QrDecomposition:Z,QR:Z,CholeskyDecomposition:W,CHO:W,inverse:R,solve:P}},function(E,D,I){var R=I(7),P=I(42);E.exports={optimize:function(O,$,Z,W,K,Q,G,ee,te,ne){var se=0;if('object'!=typeof $[0])for(var oe=0;oe<$.length;oe++)$[oe]=[$[oe]];var de=-50,ue=$.length,he=W.length,ce=R.zeros(ue,1),ge=R.zeros(he,1),pe=0.01/de,me=0.01/de,fe=R.zeros(he,ue),oe,le;if(Z.length!=W.length){console.log('lm.m error: the length of t must equal the length of y_dat'),length_t=Z.length,length_y_dat=W.length;var pe=0;return}K=K||_Mathsqrt((he-ue+1)/P.multiply(P.transpose(W),W)),Q=Q||1e-3,G=G||P.multiply(_Mathabs($),-100),ee=ee||P.multiply(_Mathabs($),100),te=te||1,ne=ne||[3,10*ue,1e-3,1e-3,1e-3,0.01,0.01,11,9,1];var we=ne[0],je=ne[1],Se=ne[2],ve=ne[3],Ce=ne[4],Ee=ne[5],De=ne[6],Ie=ne[7],Ae=ne[8],Re=ne[9];if(0,!Q.length||1==Q.length){for(var Pe=Array(ue),oe=0;oe<ue;oe++)Pe[oe]=[Q];Q=Pe}var Te=[];for(oe=0;oe<Q.length;oe++)0!=Q[oe][0]&&Te.push(oe);var Fe=Te.length,ze=!1,Me=null;if(!K.length||K.length<he){var Xe=P.multiply(R.ones(he,1),K[0]);Me=P.dotMultiply(Xe,Xe)}else Me=P.dotMultiply(K,K);var Ye=this.lm_matx(O,Z,ce,ge,1,fe,$,W,Me,Q,te),Ne=Ye.JtWJ,Oe=Ye.JtWdy,pe=Ye.Chi_sq,Le=Ye.y_hat,fe=Ye.J;_Mathmax(_Mathabs(Oe))<Se&&(console.log(' *** Your Initial Guess is Extremely Close to Optimal ***'),console.log(' *** epsilon_1 = ',Se),ze=!0),1===Re?lambda=De:(lambda=De*_Mathmax(P.diag(Ne)),nu=2),me=pe;for(var Ue=null;!ze&&se<=je;){++se,Ue=1===Re?P.solve(P.add(Ne,P.multiply(P.diag(P.diag(Ne)),lambda)),Oe):P.solve(P.add(Ne,P.multiply(R.eye(ue),lambda)),Oe);var Be=Array(Te.length);for(le=0;le<Te.length;le++)Be[le]=Ue[Te[le]];var Ve=P.add($,Be);for(le=0;le<Ve.length;le++)Ve[le][0]=_Mathmin(_Mathmax(G[le][0],Ve[le][0]),ee[le][0]);var qe=P.subtract(W,O(Z,Ve,te)),$e=P.multiply(P.transpose(qe),P.dotMultiply(qe,Me));if(2==Re){var Ze=P.multiply(P.transpose(Oe),Ue),We=P.multiply(Ze,P.inv(P.add(P.multiply(P.subtract($e-pe),1/2)),P.multiply(Ze,2)));Ue=P.multiply(We,Ue);for(var le=0;le<Te.length;le++)Be[le]=Ue[Te[le]];Ve=P.add($,Be),Ve=P.min(P.max(G,Ve),ee),qe=P.subtract(W,O(Z,Ve,te)),$e=P.multiply(P.transpose(qe),mat.dotMultiply(qe,Me))}var He=(pe-$e)/P.multiply(P.multiply(P.transpose(Ue),2),P.add(P.multiply(lambda,Ue),Oe));He>Ee?(dX2=pe-me,me=pe,ce=$,ge=Le,$=Ve,Ye=this.lm_matx(O,Z,ce,ge,dX2,fe,$,W,Me,Q,te),Ne=Ye.JtWJ,Oe=Ye.JtWdy,pe=Ye.Chi_sq,Le=Ye.y_hat,fe=Ye.J,1===Re?lambda=_Mathmax(lambda/Ae,1e-7):2===Re?lambda=_Mathmax(lambda/(1+We),1e-7):3===Re?(lambda=P.multiply(_Mathmax(1/3,3^1-(2*He-1)),lambda),nu=2):void 0):(pe=me,0==se%(2*ue)&&(Ye=this.lm_matx(O,Z,ce,ge,-1,fe,$,W,Me,Q,te),Ne=Ye.JtWJ,Oe=Ye.JtWdy,dX2=Ye.Chi_sq,Le=Ye.y_hat,fe=Ye.J),1===Re?lambda=_Mathmin(lambda*Ie,1e7):2===Re?lambda+=_Mathabs(($e-pe)/2/We):3===Re?(lambda*=nu,nu=2*nu):void 0)}return Me=P.multiply(P.multiply(P.transpose(qe),qe),R.ones(he,1)),Me.apply(function(Je,Ke){Me[Je][Ke]=(he-Fe+1)/Me[Je][Ke]}),Ye=this.lm_matx(O,Z,ce,ge,-1,fe,$,W,Me,Q,te),Ne=Ye.JtWJ,Oe=Ye.JtWdy,pe=Ye.Chi_sq,Le=Ye.y_hat,fe=Ye.J,{p:$,X2:pe}},lm_FD_J:function(O,$,Z,W,K,Q){var G=W.length,ee=Z.length;K=K||P.multiply(R.ones(ee,1),1e-3);for(var te=Z.clone(),ne=new R(G,ee),ae=Array(ee),se=0;se<ee;se++){if(ae[se]=K[se]*(1+_Mathabs(Z[se][0])),Z[se]=[te[se][0]+ae[se]],0!=ae[se])if(y1=O($,Z,Q),0>K[se][0])for(var oe=P.dotDivide(P.subtract(y1,W),ae[se]),le=0;le<G;le++)ne[le][se]=oe[le][0];else{Z[se][0]=te[se][0]-ae[se];for(var oe=P.dotDivide(P.subtract(y1,O($,Z,Q)),2*ae[se]),le=0;le<G;le++)ne[le][se]=oe[le][0]}Z[se]=te[se]}return ne},lm_Broyden_J:function(O,$,Z,W,K){var Q=P.subtract(W,O),G=P.transpose(Q);return G.div(P.multiply(G,Q)),Z=P.add(Z,P.multiply(P.subtract(K,P.add($,P.multiply(Z,Q))),G)),Z},lm_matx:function(O,$,Z,W,K,Q,G,ee,te,ne,ae,se){var oe=ee.length,le=G.length;ne=ne||1e-3;var de=O($,G,ae);Q=0==se%(2*le)||0<K?this.lm_FD_J(O,$,G,de,ne,ae):this.lm_Broyden_J(Z,W,Q,G,de);var ue=P.subtract(ee,de),he=P.multiply(P.transpose(ue),P.dotMultiply(ue,te)),ce=P.transpose(Q),ge=P.multiply(ce,P.dotMultiply(Q,P.multiply(te,R.ones(1,le)))),pe=P.multiply(ce,P.dotMultiply(te,ue));return{JtWJ:ge,JtWdy:pe,Chi_sq:he,y_hat:de,J:Q}}}},function(E,D,I){'use strict';E.exports=I(114),E.exports.Matrix=I(7),E.exports.Matrix.algebra=I(42)},function(E,D,I){'use strict';function R(se,oe){var de=oe.length/3,pe=se.rows,ue,he,ce,ge,me=ae.zeros(se.length,1);for(he=0;he<de;he++)for(ge=_Mathpow(oe[he+2*de][0]/2,2),ue=oe[he+de][0]*ge,ce=0;ce<pe;ce++)me[ce][0]+=ue/(_Mathpow(se[ce][0]-oe[he][0],2)+ge);return me}function T(se,oe){for(var de=oe[1][0]*_Mathpow(oe[2][0]/2,2),ue=se.rows,he=new ae(se.rows,se.columns),ce=0;ce<ue;ce++)he[ce][0]=de/(_Mathpow(se[ce][0]-oe[0][0],2)+_Mathpow(oe[2][0]/2,2));return he}function F(se,oe){for(var de=oe[2][0]*oe[2][0]/2,ue=se.rows,he=new ae(se.rows,se.columns),ce=0;ce<ue;ce++)he[ce][0]=oe[1][0]*_Mathexp(-(se[ce][0]-oe[0][0])*(se[ce][0]-oe[0][0])/de);return he}function O(se,oe,le){le=le||{};var de=G(se,le.percentage||0);if(null===de||3>de[0].rows)return null;var ue=de[0],he=de[1],ce=de[2],ge=ue.rows,me=[ge/_Mathsqrt(he.dot(he))],le=Object.create(le.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),xe=_Mathabs(ue[0][0]-ue[1][0]),be=new ae([[-xe/1e4],[-0.001],[-xe/1e4]]),ye=new ae([[oe.x],[1],[oe.width]]),_e=new ae([[oe.x-xe],[0.75],[oe.width/4]]),ke=new ae([[oe.x+xe],[1.25],[4*oe.width]]),we=te.optimize(T,ye,ue,he,me,be,_e,ke,[],le);return we=we.p,[we[0],[we[1][0]*ce],we[2]]}function $(se,oe,le){le=le||{};var de=G(se,le.percentage||0);if(null===de||3>de[0].rows)return null;var ue=de[0],he=de[1],ce=de[2],ge=ue.rows,me=[ge/_Mathsqrt(he.dot(he))],le=Object.create(le.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),xe=_Mathabs(ue[0][0]-ue[1][0]),be=new ae([[-xe/1e4],[-0.001],[-xe/1e4]]),be=new ae([[-_Mathabs(ue[0][0]-ue[1][0])/1e3],[-0.001],[-oe.width/1e3]]),ye=new ae([[oe.x],[1],[oe.width]]),_e=new ae([[oe.x-xe],[0.75],[oe.width/4]]),ke=new ae([[oe.x+xe],[1.25],[4*oe.width]]),we=te.optimize(F,ye,ue,he,me,be,_e,ke,[],le);return we=we.p,[we[0],[we[1][0]*ce],we[2]]}function G(se,oe){var le=se.length,de=null,ue=null,he,ce,ge=0,pe;if(2==le){var fe=se[0].length;if(de=Array(fe),ue=Array(fe),he=se[0],ce=se[1],'number'==typeof he[0])for(pe=0;pe<fe;pe++)de[pe]=he[pe],ue[pe]=ce[pe],ce[pe]>ge&&(ge=ce[pe]);else if('object'==typeof he[0])for(pe=0;pe<fe;pe++)de[pe]=he[pe][0],ue[pe]=ce[pe][0],ce[pe][0]>ge&&(ge=ce[pe][0])}else{var fe=le;for(de=Array(fe),ue=Array(fe),pe=0;pe<fe;pe++)de[pe]=se[pe][0],ue[pe]=se[pe][1],ue[pe]>ge&&(ge=ue[pe])}for(pe=0;pe<fe;pe++)ue[pe]/=ge;if(oe)for(pe=fe-1;0<=pe;pe--)ue[pe]<oe&&(ue.splice(pe,1),de.splice(pe,1));return 0<de.length?[new ae([de]).transpose(),new ae([ue]).transpose(),ge]:null}var te=I(115),ne=te.Matrix.algebra,ae=I(7);E.exports.optimizeSingleLorentzian=O,E.exports.optimizeLorentzianSum=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;var ue=de[0],he=de[1],ce=de[2],ge=ue.rows,pe,me=[ge/ne.sqrt(he.dot(he))],le=Object.create(le||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),xe=oe.length,be=new ae(3*xe,1),ye=new ae(3*xe,1),_e=new ae(3*xe,1),ke=new ae(3*xe,1),we=_Mathabs(ue[0][0]-ue[1][0]);for(pe=0;pe<xe;pe++)be[pe][0]=oe[pe].x,be[pe+xe][0]=1,be[pe+2*xe][0]=oe[pe].width,ye[pe][0]=oe[pe].x-we,ye[pe+xe][0]=0,ye[pe+2*xe][0]=oe[pe].width/4,_e[pe][0]=oe[pe].x+we,_e[pe+xe][0]=1.5,_e[pe+2*xe][0]=4*oe[pe].width,ke[pe][0]=-we/1e3,ke[pe+xe][0]=-1e-3,ke[pe+2*xe][0]=-we/1e3;var ke=-_Mathabs(ue[0][0]-ue[1][0])/1e4,je=te.optimize(R,be,ue,he,me,ke,ye,_e,[],le);je=je.p;var Se=Array(xe);for(pe=0;pe<xe;pe++)Se[pe]=[je[pe],[je[pe+xe][0]*ce],je[pe+2*xe]];return Se},E.exports.optimizeSingleGaussian=$,E.exports.optimizeGaussianSum=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;var ue=de[0],he=de[1],ce=de[2],ge=ue.rows,pe,me=new ae(ge,1),fe=ge/ne.sqrt(he.dot(he));for(pe=0;pe<ge;pe++)me[pe][0]=fe;var le=Object.create(le||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,2]),be=oe.length,ye=new ae(3*be,1),_e=new ae(3*be,1),ke=new ae(3*be,1),we=new ae(3*be,1),je=_Mathabs(ue[0][0]-ue[1][0]);for(pe=0;pe<be;pe++)ye[pe][0]=oe[pe].x,ye[pe+be][0]=oe[pe].y/ce,ye[pe+2*be][0]=oe[pe].width,_e[pe][0]=oe[pe].x-je,_e[pe+be][0]=0.8*oe[pe].y/ce,_e[pe+2*be][0]=oe[pe].width/2,ke[pe][0]=oe[pe].x+je,ke[pe+be][0]=1.2*oe[pe].y/ce,ke[pe+2*be][0]=2*oe[pe].width,we[pe][0]=-je/1e3,we[pe+be][0]=-1e-3,we[pe+2*be][0]=-je/1e3;var Se=te.optimize(R,ye,ue,he,me,we,_e,ke,[],le);Se=Se.p;var ve=Array(be);for(pe=0;pe<be;pe++)ve[pe]=[Se[pe],[Se[pe+be][0]*ce],Se[pe+2*be]];return ve},E.exports.singleGaussian=F,E.exports.singleLorentzian=T,E.exports.optimizeGaussianTrain=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;for(var ue=de[0],he=de[1],ce=de[2],ge=0,pe=ue.length,be=[],_e=0,me,fe,xe,ce,ye;_e<oe.length;_e++){for(me=oe[_e].x-4*oe[_e].width;ue[ge++]<me&&ge<pe;);for(me=oe[_e].x+4*oe[_e].width,fe=[],xe=[];ue[ge]<=me&&ge<pe;)fe.push(ue[ge][0]),xe.push(he[ge][0]*ce),ge++;ye=$([fe,xe],oe[_e],le),ye?be.push({x:ye[0][0],y:ye[1][0],width:ye[2][0],opt:!0}):be.push({x:oe[_e].x,y:oe[_e].y,width:oe[_e].width,opt:!1})}return be},E.exports.optimizeLorentzianTrain=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;for(var ue=de[0],he=de[1],ce=de[2],ge=0,pe=ue.length,be=[],_e=0,me,fe,xe,ce,ye;_e<oe.length;_e++){for(me=oe[_e].x-4*oe[_e].width;ue[ge++]<me&&ge<pe;);for(me=oe[_e].x+4*oe[_e].width,fe=[],xe=[];ue[ge]<=me&&ge<pe;)fe.push(ue[ge][0]),xe.push(he[ge][0]*ce),ge++;ye=O([fe,xe],oe[_e],le),ye?be.push({x:ye[0][0],y:ye[1][0],width:ye[2][0],opt:!0}):be.push({x:oe[_e].x,y:oe[_e].y,width:oe[_e].width,opt:!1})}return be}},function(E,D,I){'use strict';D.array=I(43),D.matrix=I(118)},function(E,D,I){'use strict';function P(he,ce){'undefined'==typeof ce&&(ce=0);var ge=he.length,pe=he[0].length,me,fe,xe,be;if(-1===ce){for(me=[0],fe=ge*pe,xe=0;xe<ge;xe++)for(be=0;be<pe;be++)me[0]+=he[xe][be];me[0]/=fe}else if(0===ce)for(me=Array(pe),fe=ge,be=0;be<pe;be++){for(me[be]=0,xe=0;xe<ge;xe++)me[be]+=he[xe][be];me[be]/=fe}else if(1===ce)for(me=Array(ge),fe=pe,be=0;be<ge;be++){for(me[be]=0,xe=0;xe<pe;xe++)me[be]+=he[be][xe];me[be]/=fe}else throw new Error('Invalid dimension');return me}function T(he,ce,ge){for(var pe=F(he,ce,ge),me=pe.length,fe=0;fe<me;fe++)pe[fe]=_Mathsqrt(pe[fe]);return pe}function F(he,ce,ge){'undefined'==typeof ge&&(ge=!0),ce=ce||P(he);var pe=he.length;if(0===pe)return[];for(var me=he[0].length,fe=Array(me),xe=0;xe<me;xe++){for(var be=0,ye=0,_e=0,ke=0;ke<pe;ke++)_e=he[ke][xe]-ce[xe],be+=_e,ye+=_e*_e;fe[xe]=ge?(ye-be*be/pe)/(pe-1):(ye-be*be/pe)/pe}return fe}function G(he,ce,ge){'undefined'==typeof ge&&(ge=0),'undefined'==typeof ce&&(0===ge?ce=he.length-1:1===ge&&(ce=he[0].length-1));var pe=P(he,ge),me=he.length;if(0===me)return[[]];var fe=he[0].length,xe,be,ye,_e,ke;if(0===ge){for(xe=Array(fe),be=0;be<fe;be++)xe[be]=Array(fe);for(be=0;be<fe;be++)for(ye=be;ye<fe;ye++){for(_e=0,ke=0;ke<me;ke++)_e+=(he[ke][ye]-pe[ye])*(he[ke][be]-pe[be]);_e/=ce,xe[be][ye]=_e,xe[ye][be]=_e}}else if(1===ge){for(xe=Array(me),be=0;be<me;be++)xe[be]=Array(me);for(be=0;be<me;be++)for(ye=be;ye<me;ye++){for(_e=0,ke=0;ke<fe;ke++)_e+=(he[ye][ke]-pe[ye])*(he[be][ke]-pe[be]);_e/=ce,xe[be][ye]=_e,xe[ye][be]=_e}}else throw new Error('Invalid dimension');return xe}function te(he,ce,ge){return ce=ce||P(he),'undefined'==typeof ge&&(ge=T(he,!0,ce)),ae(ne(he,ce,!1),ge,!0)}function ne(he,ce,ge){ce=ce||P(he);var pe=he,me=he.length,fe,xe,be;if(!ge)for(pe=Array(me),fe=0;fe<me;fe++)pe[fe]=Array(he[fe].length);for(fe=0;fe<me;fe++){var ye=pe[fe];for(xe=0,be=ye.length;xe<be;xe++)ye[xe]=he[fe][xe]-ce[xe]}return pe}function ae(he,ce,ge){'undefined'==typeof ce&&(ce=T(he));var pe=he,me=he.length,fe,xe,be;if(!ge)for(pe=Array(me),fe=0;fe<me;fe++)pe[fe]=Array(he[fe].length);for(fe=0;fe<me;fe++){var ye=pe[fe],_e=he[fe];for(xe=0,be=ye.length;xe<be;xe++)0===ce[xe]||isNaN(ce[xe])||(ye[xe]=_e[xe]/ce[xe])}return pe}function oe(he,ce,ge){'undefined'==typeof ge&&(ge=0);var pe=he.length;if(0===pe)return[];var me=he[0].length,fe,xe,be,ye,_e,ke;if(0===ge){for(fe=Array(me),xe=0;xe<me;xe++)fe[xe]=0;for(xe=0;xe<pe;xe++)for(ke=he[xe],_e=ce[xe],ye=0;ye<me;ye++)fe[ye]+=ke[ye]*_e}else if(1===ge){for(fe=Array(pe),xe=0;xe<pe;xe++)fe[xe]=0;for(ye=0;ye<pe;ye++)for(ke=he[ye],_e=ce[ye],xe=0;xe<me;xe++)fe[ye]+=ke[xe]*_e}else throw new Error('Invalid dimension');var we=ue.sum(ce);if(0!==we)for(xe=0,be=fe.length;xe<be;xe++)fe[xe]/=we;return fe}function de(he,ce,ge,pe,me){me=me||0,ge=ge||oe(he,ce,me),'undefined'==typeof pe&&(pe=1);var fe=he.length;if(0===fe)return[[]];var xe=he[0].length,be,ye,_e,ke,we;if(0===me){for(be=Array(xe),ye=0;ye<xe;ye++)be[ye]=Array(xe);for(ye=0;ye<xe;ye++)for(_e=ye;_e<xe;_e++){for(we=0,ke=0;ke<fe;ke++)we+=ce[ke]*(he[ke][_e]-ge[_e])*(he[ke][ye]-ge[ye]);be[ye][_e]=we*pe,be[_e][ye]=we*pe}}else if(1===me){for(be=Array(fe),ye=0;ye<fe;ye++)be[ye]=Array(fe);for(ye=0;ye<fe;ye++)for(_e=ye;_e<fe;_e++){for(we=0,ke=0;ke<xe;ke++)we+=ce[ke]*(he[_e][ke]-ge[_e])*(he[ye][ke]-ge[ye]);be[ye][_e]=we*pe,be[_e][ye]=we*pe}}else throw new Error('Invalid dimension');return be}var ue=I(43);E.exports={entropy:function(he,ce){'undefined'==typeof ce&&(ce=0);for(var ge=0,pe=he.length,me=he[0].length,fe=0;fe<pe;fe++)for(var xe=0;xe<me;xe++)ge+=he[fe][xe]*_Mathlog(he[fe][xe]+ce);return-ge},mean:P,standardDeviation:T,variance:F,median:function(he){for(var ce=he.length,ge=he[0].length,pe=Array(ge),me=0,fe;me<ge;me++){fe=Array(ce);for(var xe=0;xe<ce;xe++)fe[xe]=he[xe][me];fe.sort();var be=fe.length;pe[me]=0==be%2?0.5*(fe[be/2]+fe[be/2-1]):fe[_Mathfloor(be/2)]}return pe},mode:function(he){var ce=he.length,ge=he[0].length,pe=Array(ge),me,fe;for(me=0;me<ge;me++){for(var xe=Array(ce),be=0;be<ce;be++)xe[be]=0;var ye=Array(ce),_e=0;for(fe=0;fe<ce;fe++){var ke=ye.indexOf(he[fe][me]);0<=ke?xe[ke]++:(ye[_e]=he[fe][me],xe[_e]=1,_e++)}var we=0,je=0;for(fe=0;fe<_e;fe++)xe[fe]>we&&(we=xe[fe],je=fe);pe[me]=ye[je]}return pe},skewness:function(he,ce){'undefined'==typeof ce&&(ce=!0);for(var ge=P(he),pe=he.length,me=ge.length,fe=Array(me),xe=0;xe<me;xe++){for(var be=0,ye=0,_e=0,ke;_e<pe;_e++)ke=he[_e][xe]-ge[xe],be+=ke*ke,ye+=ke*ke*ke;var we=be/pe,je=ye/pe,Se=je/_Mathpow(we,3/2);if(ce){var ve=_Mathsqrt(pe*(pe-1));fe[xe]=ve/(pe-2)*Se}else fe[xe]=Se}return fe},kurtosis:function(he,ce){'undefined'==typeof ce&&(ce=!0);for(var ge=P(he),pe=he.length,me=he[0].length,fe=Array(me),xe=0;xe<me;xe++){for(var be=0,ye=0,_e=0,ke;_e<pe;_e++)ke=he[_e][xe]-ge[xe],be+=ke*ke,ye+=ke*ke*ke*ke;var we=be/pe,je=ye/pe;if(ce){var Se=be/(pe-1),Ce=ye/(Se*Se);fe[xe]=pe*(pe+1)/((pe-1)*(pe-2)*(pe-3))*Ce-3*((pe-1)*(pe-1)/((pe-2)*(pe-3)))}else fe[xe]=je/(we*we)-3}return fe},standardError:function(he){for(var ce=he.length,ge=T(he),pe=ge.length,me=Array(pe),fe=_Mathsqrt(ce),xe=0;xe<pe;xe++)me[xe]=ge[xe]/fe;return me},covariance:function(he,ce){return G(he,void 0,ce)},scatter:G,correlation:function(he){var ce=P(he),ge=T(he,!0,ce),pe=te(he,ce,ge),me=he.length,fe=he[0].length,xe,be,ye=Array(fe);for(xe=0;xe<fe;xe++)ye[xe]=Array(fe);for(xe=0;xe<fe;xe++)for(be=xe;be<fe;be++){for(var _e=0,ke=0,we=pe.length;ke<we;ke++)_e+=pe[ke][be]*pe[ke][xe];_e/=me-1,ye[xe][be]=_e,ye[be][xe]=_e}return ye},zScores:te,center:ne,standardize:ae,weightedVariance:function(he,ce){var ge=P(he),pe=he.length;if(0===pe)return[];for(var me=he[0].length,fe=Array(me),xe=0;xe<me;xe++){for(var be=0,ye=0,_e=0,ke=0;ke<pe;ke++){var we=he[ke][xe]-ge[xe],je=ce[ke];be+=je*(we*we),_e+=je,ye+=je*je}fe[xe]=be*(_e/(_e*_e-ye))}return fe},weightedMean:oe,weightedCovariance:function(he,ce,ge,pe){pe=pe||0,ge=ge||oe(he,ce,pe);for(var me=0,fe=0,xe=0,be=ce.length;xe<be;xe++)me+=ce[xe],fe+=ce[xe]*ce[xe];var ye=me/(me*me-fe);return de(he,ce,ge,ye,pe)},weightedScatter:de}},function(E,D,I){function P(Q,G,ee,te){for(var ne=0,ae=0,se=G-ee;se<G+ee;se++)0<=se&&se<Q.length-1&&(ne+=Q[se+1]-Q[se],ae++);return _Mathpow(ne/ae,te)}function T(Q,G,ee,te){var ne=0;return ne=0<ee?(4*ee-2)/(ee*(2*G-ee+1))*(Q*T(Q,G,ee-1,te)+te*T(Q,G,ee-1,te-1))-(ee-1)*(2*G+ee)/(ee*(2*G-ee+1))*T(Q,G,ee-2,te):0==ee&&0==te?1:0,ne}function F(Q,G){var ee=1;if(Q>=G)for(var te=Q-G+1;te<=Q;te++)ee*=te;return ee}function O(Q,G,ee,te,ne){for(var ae=0,se=0;se<=te;se++)ae+=(2*se+1)*(F(2*ee,se)/F(2*ee+se+1,se+1))*T(Q,ee,se,0)*T(G,ee,se,ne);return ae}function $(Q,G,ee){for(var te=Array(Q),ne=_Mathfloor(Q/2),ae=-ne;ae<=ne;ae++){te[ae+ne]=Array(Q);for(var se=-ne;se<=ne;se++)te[ae+ne][se+ne]=O(se,ae,ne,G,ee)}return te}var Z=I(28),W=I(117),K={windowSize:9,derivative:0,polynomial:3};E.exports=function(Q,G,ee){if(ee=Z({},K,ee),0==ee.windowSize%2||5>ee.windowSize||!_NumberisInteger(ee.windowSize))throw new RangeError('Invalid window size (should be odd and at least 5 integer number)');if(ee.windowSize>Q.length)throw new RangeError('Window size is higher than the data length '+ee.windowSize+'>'+Q.length);if(0>ee.derivative||!_NumberisInteger(ee.derivative))throw new RangeError('Derivative should be a positive integer');if(1>ee.polynomial||!_NumberisInteger(ee.polynomial))throw new RangeError('Polynomial should be a positive integer');6<=ee.polynomial&&console.warn('You should not use polynomial grade higher than 5 if you are not sure that your data arises from such a model. Possible polynomial oscillation problems');var te=ee.windowSize,ne=_Mathfloor(te/2),ae=Q.length,se=Array(ae),oe=$(te,ee.polynomial,ee.derivative),le=0,de=!0;'[object Array]'===Object.prototype.toString.call(G)?de=!1:le=_Mathpow(G,ee.derivative);for(var ue=0;ue<ne;ue++){for(var he=oe[ne-ue-1],ce=oe[ne+ue+1],ge=0,pe=0,me=0;me<te;me++)ge+=he[me]*Q[me],pe+=ce[me]*Q[ae-te+me-1];de?(se[ne-ue-1]=ge/le,se[ae-ne+ue]=pe/le):(le=P(G,ne-ue-1,ne,ee.derivative),se[ne-ue-1]=ge/le,le=P(G,ae-ne+ue,ne,ee.derivative),se[ae-ne+ue]=pe/le)}for(var fe=oe[ne],ue=te,xe;ue<ae+1;ue++){xe=0;for(var me=0;me<te;me++)xe+=fe[me]*Q[me+ue-te];de||(le=P(G,ue-ne-1,ne,ee.derivative)),se[ue-ne-1]=xe/le}return se}},function(E,D,I){'use strict';function R(T,F){return T-F}var P=I(46);D.max=function(F){for(var T=-Infinity,O=0;O<F.length;O++)for(var $=0;$<F[O].length;$++)F[O][$]>T&&(T=F[O][$]);return T},D.min=function(F){for(var T=Infinity,O=0;O<F.length;O++)for(var $=0;$<F[O].length;$++)F[O][$]<T&&(T=F[O][$]);return T},D.minMax=function(F){for(var O=Infinity,$=-Infinity,Z=0;Z<F.length;Z++)for(var W=0;W<F[Z].length;W++)F[Z][W]<O&&(O=F[Z][W]),F[Z][W]>$&&($=F[Z][W]);return{min:O,max:$}},D.entropy=function(F,O){'undefined'==typeof O&&(O=0);for(var $=0,Z=F.length,W=F[0].length,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$+=F[K][Q]*_Mathlog(F[K][Q]+O);return-$},D.mean=function(F,O){'undefined'==typeof O&&(O=0);var $=F.length,Z=F[0].length,W,K,Q,G;if(-1===O){for(W=[0],K=$*Z,Q=0;Q<$;Q++)for(G=0;G<Z;G++)W[0]+=F[Q][G];W[0]/=K}else if(0===O)for(W=Array(Z),K=$,G=0;G<Z;G++){for(W[G]=0,Q=0;Q<$;Q++)W[G]+=F[Q][G];W[G]/=K}else if(1===O)for(W=Array($),K=Z,G=0;G<$;G++){for(W[G]=0,Q=0;Q<Z;Q++)W[G]+=F[G][Q];W[G]/=K}else throw new Error('Invalid dimension');return W},D.sum=function(F,O){'undefined'==typeof O&&(O=0);var $=F.length,Z=F[0].length,W,K,Q;if(-1===O)for(W=[0],K=0;K<$;K++)for(Q=0;Q<Z;Q++)W[0]+=F[K][Q];else if(0===O)for(W=Array(Z),Q=0;Q<Z;Q++)for(W[Q]=0,K=0;K<$;K++)W[Q]+=F[K][Q];else if(1===O)for(W=Array($),Q=0;Q<$;Q++)for(W[Q]=0,K=0;K<Z;K++)W[Q]+=F[Q][K];else throw new Error('Invalid dimension');return W},D.product=function(F,O){'undefined'==typeof O&&(O=0);var $=F.length,Z=F[0].length,W,K,Q;if(-1===O)for(W=[1],K=0;K<$;K++)for(Q=0;Q<Z;Q++)W[0]*=F[K][Q];else if(0===O)for(W=Array(Z),Q=0;Q<Z;Q++)for(W[Q]=1,K=0;K<$;K++)W[Q]*=F[K][Q];else if(1===O)for(W=Array($),Q=0;Q<$;Q++)for(W[Q]=1,K=0;K<Z;K++)W[Q]*=F[Q][K];else throw new Error('Invalid dimension');return W},D.standardDeviation=function(F,O,$){for(var Z=D.variance(F,O,$),W=Z.length,K=0;K<W;K++)Z[K]=_Mathsqrt(Z[K]);return Z},D.variance=function(F,O,$){'undefined'==typeof $&&($=!0),O=O||D.mean(F);var Z=F.length;if(0===Z)return[];for(var W=F[0].length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne=0;ne<Z;ne++)te=F[ne][Q]-O[Q],G+=te,ee+=te*te;K[Q]=$?(ee-G*G/Z)/(Z-1):(ee-G*G/Z)/Z}return K},D.median=function(F){for(var O=F.length,$=F[0].length,Z=Array($),W=0,K;W<$;W++){K=Array(O);for(var Q=0;Q<O;Q++)K[Q]=F[Q][W];K.sort(R);var G=K.length;Z[W]=0==G%2?0.5*(K[G/2]+K[G/2-1]):K[_Mathfloor(G/2)]}return Z},D.mode=function(F){var O=F.length,$=F[0].length,Z=Array($),W,K;for(W=0;W<$;W++){for(var Q=Array(O),G=0;G<O;G++)Q[G]=0;var ee=Array(O),te=0;for(K=0;K<O;K++){var ne=ee.indexOf(F[K][W]);0<=ne?Q[ne]++:(ee[te]=F[K][W],Q[te]=1,te++)}var ae=0,se=0;for(K=0;K<te;K++)Q[K]>ae&&(ae=Q[K],se=K);Z[W]=ee[se]}return Z},D.skewness=function(F,O){'undefined'==typeof O&&(O=!0);for(var $=D.mean(F),Z=F.length,W=$.length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne;te<Z;te++)ne=F[te][Q]-$[Q],G+=ne*ne,ee+=ne*ne*ne;var ae=G/Z,se=ee/Z,oe=se/_Mathpow(ae,3/2);if(O){var le=_Mathsqrt(Z*(Z-1));K[Q]=le/(Z-2)*oe}else K[Q]=oe}return K},D.kurtosis=function(F,O){'undefined'==typeof O&&(O=!0);for(var $=D.mean(F),Z=F.length,W=F[0].length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne;te<Z;te++)ne=F[te][Q]-$[Q],G+=ne*ne,ee+=ne*ne*ne*ne;var ae=G/Z,se=ee/Z;if(O){var oe=G/(Z-1),de=ee/(oe*oe);K[Q]=Z*(Z+1)/((Z-1)*(Z-2)*(Z-3))*de-3*((Z-1)*(Z-1)/((Z-2)*(Z-3)))}else K[Q]=se/(ae*ae)-3}return K},D.standardError=function(F){for(var O=F.length,$=D.standardDeviation(F),Z=$.length,W=Array(Z),K=_Mathsqrt(O),Q=0;Q<Z;Q++)W[Q]=$[Q]/K;return W},D.covariance=function(F,O){return D.scatter(F,void 0,O)},D.scatter=function(F,O,$){'undefined'==typeof $&&($=0),'undefined'==typeof O&&(0===$?O=F.length-1:1===$&&(O=F[0].length-1));var Z=D.mean(F,$),W=F.length;if(0===W)return[[]];var K=F[0].length,Q,G,ee,te,ne;if(0===$){for(Q=Array(K),G=0;G<K;G++)Q[G]=Array(K);for(G=0;G<K;G++)for(ee=G;ee<K;ee++){for(te=0,ne=0;ne<W;ne++)te+=(F[ne][ee]-Z[ee])*(F[ne][G]-Z[G]);te/=O,Q[G][ee]=te,Q[ee][G]=te}}else if(1===$){for(Q=Array(W),G=0;G<W;G++)Q[G]=Array(W);for(G=0;G<W;G++)for(ee=G;ee<W;ee++){for(te=0,ne=0;ne<K;ne++)te+=(F[ee][ne]-Z[ee])*(F[G][ne]-Z[G]);te/=O,Q[G][ee]=te,Q[ee][G]=te}}else throw new Error('Invalid dimension');return Q},D.correlation=function(F){var O=D.mean(F),$=D.standardDeviation(F,!0,O),Z=D.zScores(F,O,$),W=F.length,K=F[0].length,Q,G,ee=Array(K);for(Q=0;Q<K;Q++)ee[Q]=Array(K);for(Q=0;Q<K;Q++)for(G=Q;G<K;G++){for(var te=0,ne=0,ae=Z.length;ne<ae;ne++)te+=Z[ne][G]*Z[ne][Q];te/=W-1,ee[Q][G]=te,ee[G][Q]=te}return ee},D.zScores=function(F,O,$){return O=O||D.mean(F),'undefined'==typeof $&&($=D.standardDeviation(F,!0,O)),D.standardize(D.center(F,O,!1),$,!0)},D.center=function(F,O,$){O=O||D.mean(F);var Z=F,W=F.length,K,Q,G;if(!$)for(Z=Array(W),K=0;K<W;K++)Z[K]=Array(F[K].length);for(K=0;K<W;K++){var ee=Z[K];for(Q=0,G=ee.length;Q<G;Q++)ee[Q]=F[K][Q]-O[Q]}return Z},D.standardize=function(F,O,$){'undefined'==typeof O&&(O=D.standardDeviation(F));var Z=F,W=F.length,K,Q,G;if(!$)for(Z=Array(W),K=0;K<W;K++)Z[K]=Array(F[K].length);for(K=0;K<W;K++){var ee=Z[K],te=F[K];for(Q=0,G=ee.length;Q<G;Q++)0===O[Q]||isNaN(O[Q])||(ee[Q]=te[Q]/O[Q])}return Z},D.weightedVariance=function(F,O){var $=D.mean(F),Z=F.length;if(0===Z)return[];for(var W=F[0].length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne=0;ne<Z;ne++){var ae=F[ne][Q]-$[Q],se=O[ne];G+=se*(ae*ae),te+=se,ee+=se*se}K[Q]=G*(te/(te*te-ee))}return K},D.weightedMean=function(F,O,$){'undefined'==typeof $&&($=0);var Z=F.length;if(0===Z)return[];var W=F[0].length,K,Q,G,ee,te,ne;if(0===$){for(K=Array(W),Q=0;Q<W;Q++)K[Q]=0;for(Q=0;Q<Z;Q++)for(ne=F[Q],te=O[Q],ee=0;ee<W;ee++)K[ee]+=ne[ee]*te}else if(1===$){for(K=Array(Z),Q=0;Q<Z;Q++)K[Q]=0;for(ee=0;ee<Z;ee++)for(ne=F[ee],te=O[ee],Q=0;Q<W;Q++)K[ee]+=ne[Q]*te}else throw new Error('Invalid dimension');var ae=P.sum(O);if(0!==ae)for(Q=0,G=K.length;Q<G;Q++)K[Q]/=ae;return K},D.weightedCovariance=function(F,O,$,Z){Z=Z||0,$=$||D.weightedMean(F,O,Z);for(var W=0,K=0,Q=0,G=O.length;Q<G;Q++)W+=O[Q],K+=O[Q]*O[Q];var ee=W/(W*W-K);return D.weightedScatter(F,O,$,ee,Z)},D.weightedScatter=function(F,O,$,Z,W){W=W||0,$=$||D.weightedMean(F,O,W),'undefined'==typeof Z&&(Z=1);var K=F.length;if(0===K)return[[]];var Q=F[0].length,G,ee,te,ne,ae;if(0===W){for(G=Array(Q),ee=0;ee<Q;ee++)G[ee]=Array(Q);for(ee=0;ee<Q;ee++)for(te=ee;te<Q;te++){for(ae=0,ne=0;ne<K;ne++)ae+=O[ne]*(F[ne][te]-$[te])*(F[ne][ee]-$[ee]);G[ee][te]=ae*Z,G[te][ee]=ae*Z}}else if(1===W){for(G=Array(K),ee=0;ee<K;ee++)G[ee]=Array(K);for(ee=0;ee<K;ee++)for(te=ee;te<K;te++){for(ae=0,ne=0;ne<Q;ne++)ae+=O[ne]*(F[te][ne]-$[te])*(F[ee][ne]-$[ee]);G[ee][te]=ae*Z,G[te][ee]=ae*Z}}else throw new Error('Invalid dimension');return G}},function(E,D,I){'use strict';function R(T){if(!(this instanceof R))return new R(T);if(T=P.checkMatrix(T),!T.isSymmetric())throw new Error('Matrix is not symmetric');var F=T,O=F.rows,$=new P(O,O),Z=!0,W,K,Q;for(K=0;K<O;K++){var G=$[K],ee=0;for(Q=0;Q<K;Q++){var te=$[Q],ne=0;for(W=0;W<Q;W++)ne+=te[W]*G[W];G[Q]=ne=(F[K][Q]-ne)/$[Q][Q],ee+=ne*ne}for(ee=F[K][K]-ee,Z&=0<ee,$[K][K]=_Mathsqrt(_Mathmax(ee,0)),Q=K+1;Q<O;Q++)$[K][Q]=0}if(!Z)throw new Error('Matrix is not positive definite');this.L=$}var P=I(1).Matrix;R.prototype={get lowerTriangularMatrix(){return this.L},solve:function(T){T=P.checkMatrix(T);var F=this.L,O=F.rows;if(T.rows!==O)throw new Error('Matrix dimensions do not match');var $=T.columns,Z=T.clone(),W,K,Q;for(Q=0;Q<O;Q++)for(K=0;K<$;K++){for(W=0;W<Q;W++)Z[Q][K]-=Z[W][K]*F[Q][W];Z[Q][K]/=F[Q][Q]}for(Q=O-1;0<=Q;Q--)for(K=0;K<$;K++){for(W=Q+1;W<O;W++)Z[Q][K]-=Z[W][K]*F[W][Q];Z[Q][K]/=F[Q][Q]}return Z}},E.exports=R},function(E,D,I){'use strict';function R(ee,te){if(te=Object.assign({},G,te),!(this instanceof R))return new R(ee,te);if(ee=Z.checkMatrix(ee),!ee.isSquare())throw new Error('Matrix is not a square matrix');var ne=ee.columns,ae=Q(ne,ne,0),se=Array(ne),oe=Array(ne),le=ee,he=!1,de,ue;if(he=!!te.assumeSymmetric||ee.isSymmetric(),he){for(de=0;de<ne;de++)for(ue=0;ue<ne;ue++)ae[de][ue]=le.get(de,ue);P(ne,oe,se,ae),T(ne,oe,se,ae)}else{var ce=Q(ne,ne,0),ge=Array(ne);for(ue=0;ue<ne;ue++)for(de=0;de<ne;de++)ce[de][ue]=le.get(de,ue);F(ne,ce,ge,ae),O(ne,oe,se,ae,ce)}this.n=ne,this.e=oe,this.d=se,this.V=ae}function P(ee,te,ne,ae){var se,oe,le,de,ue,he,ce,ge;for(ue=0;ue<ee;ue++)ne[ue]=ae[ee-1][ue];for(de=ee-1;0<de;de--){for(ge=0,le=0,he=0;he<de;he++)ge+=_Mathabs(ne[he]);if(0===ge)for(te[de]=ne[de-1],ue=0;ue<de;ue++)ne[ue]=ae[de-1][ue],ae[de][ue]=0,ae[ue][de]=0;else{for(he=0;he<de;he++)ne[he]/=ge,le+=ne[he]*ne[he];for(se=ne[de-1],oe=_Mathsqrt(le),0<se&&(oe=-oe),te[de]=ge*oe,le-=se*oe,ne[de-1]=se-oe,ue=0;ue<de;ue++)te[ue]=0;for(ue=0;ue<de;ue++){for(se=ne[ue],ae[ue][de]=se,oe=te[ue]+ae[ue][ue]*se,he=ue+1;he<=de-1;he++)oe+=ae[he][ue]*ne[he],te[he]+=ae[he][ue]*se;te[ue]=oe}for(se=0,ue=0;ue<de;ue++)te[ue]/=le,se+=te[ue]*ne[ue];for(ce=se/(le+le),ue=0;ue<de;ue++)te[ue]-=ce*ne[ue];for(ue=0;ue<de;ue++){for(se=ne[ue],oe=te[ue],he=ue;he<=de-1;he++)ae[he][ue]-=se*te[he]+oe*ne[he];ne[ue]=ae[de-1][ue],ae[de][ue]=0}}ne[de]=le}for(de=0;de<ee-1;de++){if(ae[ee-1][de]=ae[de][de],ae[de][de]=1,le=ne[de+1],0!==le){for(he=0;he<=de;he++)ne[he]=ae[he][de+1]/le;for(ue=0;ue<=de;ue++){for(oe=0,he=0;he<=de;he++)oe+=ae[he][de+1]*ae[he][ue];for(he=0;he<=de;he++)ae[he][ue]-=oe*ne[he]}}for(he=0;he<=de;he++)ae[he][de+1]=0}for(ue=0;ue<ee;ue++)ne[ue]=ae[ee-1][ue],ae[ee-1][ue]=0;ae[ee-1][ee-1]=1,te[0]=0}function T(ee,te,ne,ae){var se,oe,le,de,ue,he,ce,ge,pe,me,fe,xe,be,ye,_e,ke,we;for(le=1;le<ee;le++)te[le-1]=te[le];te[ee-1]=0;var je=0,Se=0,ve=2.220446049250313e-16;for(he=0;he<ee;he++){for(Se=_Mathmax(Se,_Mathabs(ne[he])+_Mathabs(te[he])),ce=he;ce<ee&&!(_Mathabs(te[ce])<=ve*Se);)ce++;if(ce>he){we=0;do{for(++we,se=ne[he],ge=(ne[he+1]-se)/(2*te[he]),pe=K(ge,1),0>ge&&(pe=-pe),ne[he]=te[he]/(ge+pe),ne[he+1]=te[he]*(ge+pe),me=ne[he+1],oe=se-ne[he],le=he+2;le<ee;le++)ne[le]-=oe;for(je+=oe,ge=ne[ce],fe=1,xe=fe,be=fe,ye=te[he+1],_e=0,ke=0,le=ce-1;le>=he;le--)for(be=xe,xe=fe,ke=_e,se=fe*te[le],oe=fe*ge,pe=K(ge,te[le]),te[le+1]=_e*pe,_e=te[le]/pe,fe=ge/pe,ge=fe*ne[le]-_e*se,ne[le+1]=oe+_e*(fe*se+_e*ne[le]),ue=0;ue<ee;ue++)oe=ae[ue][le+1],ae[ue][le+1]=_e*ae[ue][le]+fe*oe,ae[ue][le]=fe*ae[ue][le]-_e*oe;ge=-_e*ke*be*ye*te[he]/me,te[he]=_e*ge,ne[he]=fe*ge}while(_Mathabs(te[he])>ve*Se)}ne[he]+=je,te[he]=0}for(le=0;le<ee-1;le++){for(ue=le,ge=ne[le],de=le+1;de<ee;de++)ne[de]<ge&&(ue=de,ge=ne[de]);if(ue!==le)for(ne[ue]=ne[le],ne[le]=ge,de=0;de<ee;de++)ge=ae[de][le],ae[de][le]=ae[de][ue],ae[de][ue]=ge}}function F(ee,te,ne,ae){var se=0,oe=ee-1,le,de,ue,he,ce,ge,pe;for(ge=se+1;ge<=oe-1;ge++){for(pe=0,he=ge;he<=oe;he++)pe+=_Mathabs(te[he][ge-1]);if(0!==pe){for(ue=0,he=oe;he>=ge;he--)ne[he]=te[he][ge-1]/pe,ue+=ne[he]*ne[he];for(de=_Mathsqrt(ue),0<ne[ge]&&(de=-de),ue-=ne[ge]*de,ne[ge]-=de,ce=ge;ce<ee;ce++){for(le=0,he=oe;he>=ge;he--)le+=ne[he]*te[he][ce];for(le/=ue,he=ge;he<=oe;he++)te[he][ce]-=le*ne[he]}for(he=0;he<=oe;he++){for(le=0,ce=oe;ce>=ge;ce--)le+=ne[ce]*te[he][ce];for(le/=ue,ce=ge;ce<=oe;ce++)te[he][ce]-=le*ne[ce]}ne[ge]=pe*ne[ge],te[ge][ge-1]=pe*de}}for(he=0;he<ee;he++)for(ce=0;ce<ee;ce++)ae[he][ce]=he===ce?1:0;for(ge=oe-1;ge>=se+1;ge--)if(0!==te[ge][ge-1]){for(he=ge+1;he<=oe;he++)ne[he]=te[he][ge-1];for(ce=ge;ce<=oe;ce++){for(de=0,he=ge;he<=oe;he++)de+=ne[he]*ae[he][ce];for(de=de/ne[ge]/te[ge][ge-1],he=ge;he<=oe;he++)ae[he][ce]+=de*ne[he]}}}function O(ee,te,ne,ae,se){var oe=ee-1,le=0,de=ee-1,ue=2.220446049250313e-16,he=0,ce=0,ge=0,pe=0,me=0,fe=0,xe=0,be=0,ye,_e,ke,we,je,Se,ve,Ce,Ee,De,Ie,Ae,Re,Pe,Te;for(ye=0;ye<ee;ye++)for((ye<le||ye>de)&&(ne[ye]=se[ye][ye],te[ye]=0),_e=_Mathmax(ye-1,0);_e<ee;_e++)ce+=_Mathabs(se[ye][_e]);for(;oe>=le;){for(we=oe;we>le&&(fe=_Mathabs(se[we-1][we-1])+_Mathabs(se[we][we]),0===fe&&(fe=ce),!(_Mathabs(se[we][we-1])<ue*fe));)we--;if(we===oe)se[oe][oe]+=he,ne[oe]=se[oe][oe],te[oe]=0,oe--,be=0;else if(we===oe-1){if(ve=se[oe][oe-1]*se[oe-1][oe],ge=(se[oe-1][oe-1]-se[oe][oe])/2,pe=ge*ge+ve,xe=_Mathsqrt(_Mathabs(pe)),se[oe][oe]+=he,se[oe-1][oe-1]=se[oe-1][oe-1]+he,Ce=se[oe][oe],0<=pe){for(xe=0<=ge?ge+xe:ge-xe,ne[oe-1]=Ce+xe,ne[oe]=ne[oe-1],0!==xe&&(ne[oe]=Ce-ve/xe),te[oe-1]=0,te[oe]=0,Ce=se[oe][oe-1],fe=_Mathabs(Ce)+_Mathabs(xe),ge=Ce/fe,pe=xe/fe,me=_Mathsqrt(ge*ge+pe*pe),ge/=me,pe/=me,_e=oe-1;_e<ee;_e++)xe=se[oe-1][_e],se[oe-1][_e]=pe*xe+ge*se[oe][_e],se[oe][_e]=pe*se[oe][_e]-ge*xe;for(ye=0;ye<=oe;ye++)xe=se[ye][oe-1],se[ye][oe-1]=pe*xe+ge*se[ye][oe],se[ye][oe]=pe*se[ye][oe]-ge*xe;for(ye=le;ye<=de;ye++)xe=ae[ye][oe-1],ae[ye][oe-1]=pe*xe+ge*ae[ye][oe],ae[ye][oe]=pe*ae[ye][oe]-ge*xe}else ne[oe-1]=Ce+ge,ne[oe]=Ce+ge,te[oe-1]=xe,te[oe]=-xe;oe-=2,be=0}else{if(Ce=se[oe][oe],Ee=0,ve=0,we<oe&&(Ee=se[oe-1][oe-1],ve=se[oe][oe-1]*se[oe-1][oe]),10==be){for(he+=Ce,ye=le;ye<=oe;ye++)se[ye][ye]-=Ce;fe=_Mathabs(se[oe][oe-1])+_Mathabs(se[oe-1][oe-2]),Ce=Ee=0.75*fe,ve=-0.4375*fe*fe}if(30==be&&(fe=(Ee-Ce)/2,fe=fe*fe+ve,0<fe)){for(fe=_Mathsqrt(fe),Ee<Ce&&(fe=-fe),fe=Ce-ve/((Ee-Ce)/2+fe),ye=le;ye<=oe;ye++)se[ye][ye]-=fe;he+=fe,Ce=Ee=ve=0.964}for(++be,je=oe-2;je>=we&&(xe=se[je][je],me=Ce-xe,fe=Ee-xe,ge=(me*fe-ve)/se[je+1][je]+se[je][je+1],pe=se[je+1][je+1]-xe-me-fe,me=se[je+2][je+1],fe=_Mathabs(ge)+_Mathabs(pe)+_Mathabs(me),ge/=fe,pe/=fe,me/=fe,je!==we)&&!(_Mathabs(se[je][je-1])*(_Mathabs(pe)+_Mathabs(me))<ue*(_Mathabs(ge)*(_Mathabs(se[je-1][je-1])+_Mathabs(xe)+_Mathabs(se[je+1][je+1]))));)je--;for(ye=je+2;ye<=oe;ye++)se[ye][ye-2]=0,ye>je+2&&(se[ye][ye-3]=0);for(ke=je;ke<=oe-1&&(Pe=ke!==oe-1,ke!==je&&(ge=se[ke][ke-1],pe=se[ke+1][ke-1],me=Pe?se[ke+2][ke-1]:0,Ce=_Mathabs(ge)+_Mathabs(pe)+_Mathabs(me),0!==Ce&&(ge/=Ce,pe/=Ce,me/=Ce)),0!==Ce);ke++)if(fe=_Mathsqrt(ge*ge+pe*pe+me*me),0>ge&&(fe=-fe),0!==fe){for(ke===je?we!==je&&(se[ke][ke-1]=-se[ke][ke-1]):se[ke][ke-1]=-fe*Ce,ge+=fe,Ce=ge/fe,Ee=pe/fe,xe=me/fe,pe/=ge,me/=ge,_e=ke;_e<ee;_e++)ge=se[ke][_e]+pe*se[ke+1][_e],Pe&&(ge+=me*se[ke+2][_e],se[ke+2][_e]=se[ke+2][_e]-ge*xe),se[ke][_e]-=ge*Ce,se[ke+1][_e]=se[ke+1][_e]-ge*Ee;for(ye=0;ye<=_Mathmin(oe,ke+3);ye++)ge=Ce*se[ye][ke]+Ee*se[ye][ke+1],Pe&&(ge+=xe*se[ye][ke+2],se[ye][ke+2]=se[ye][ke+2]-ge*me),se[ye][ke]-=ge,se[ye][ke+1]=se[ye][ke+1]-ge*pe;for(ye=le;ye<=de;ye++)ge=Ce*ae[ye][ke]+Ee*ae[ye][ke+1],Pe&&(ge+=xe*ae[ye][ke+2],ae[ye][ke+2]=ae[ye][ke+2]-ge*me),ae[ye][ke]-=ge,ae[ye][ke+1]=ae[ye][ke+1]-ge*pe}}}if(0!==ce){for(oe=ee-1;0<=oe;oe--)if(ge=ne[oe],pe=te[oe],0===pe)for(we=oe,se[oe][oe]=1,ye=oe-1;0<=ye;ye--){for(ve=se[ye][ye]-ge,me=0,_e=we;_e<=oe;_e++)me+=se[ye][_e]*se[_e][oe];if(0>te[ye])xe=ve,fe=me;else if(we=ye,0===te[ye]?se[ye][oe]=0===ve?-me/(ue*ce):-me/ve:(Ce=se[ye][ye+1],Ee=se[ye+1][ye],pe=(ne[ye]-ge)*(ne[ye]-ge)+te[ye]*te[ye],Se=(Ce*fe-xe*me)/pe,se[ye][oe]=Se,se[ye+1][oe]=_Mathabs(Ce)>_Mathabs(xe)?(-me-ve*Se)/Ce:(-fe-Ee*Se)/xe),Se=_Mathabs(se[ye][oe]),1<ue*Se*Se)for(_e=ye;_e<=oe;_e++)se[_e][oe]/=Se}else if(0>pe)for(we=oe-1,_Mathabs(se[oe][oe-1])>_Mathabs(se[oe-1][oe])?(se[oe-1][oe-1]=pe/se[oe][oe-1],se[oe-1][oe]=-(se[oe][oe]-ge)/se[oe][oe-1]):(Te=$(0,-se[oe-1][oe],se[oe-1][oe-1]-ge,pe),se[oe-1][oe-1]=Te[0],se[oe-1][oe]=Te[1]),se[oe][oe-1]=0,se[oe][oe]=1,ye=oe-2;0<=ye;ye--){for(De=0,Ie=0,_e=we;_e<=oe;_e++)De+=se[ye][_e]*se[_e][oe-1],Ie+=se[ye][_e]*se[_e][oe];if(ve=se[ye][ye]-ge,0>te[ye])xe=ve,me=De,fe=Ie;else if(we=ye,0===te[ye]?(Te=$(-De,-Ie,ve,pe),se[ye][oe-1]=Te[0],se[ye][oe]=Te[1]):(Ce=se[ye][ye+1],Ee=se[ye+1][ye],Ae=(ne[ye]-ge)*(ne[ye]-ge)+te[ye]*te[ye]-pe*pe,Re=2*(ne[ye]-ge)*pe,0===Ae&&0===Re&&(Ae=ue*ce*(_Mathabs(ve)+_Mathabs(pe)+_Mathabs(Ce)+_Mathabs(Ee)+_Mathabs(xe))),Te=$(Ce*me-xe*De+pe*Ie,Ce*fe-xe*Ie-pe*De,Ae,Re),se[ye][oe-1]=Te[0],se[ye][oe]=Te[1],_Mathabs(Ce)>_Mathabs(xe)+_Mathabs(pe)?(se[ye+1][oe-1]=(-De-ve*se[ye][oe-1]+pe*se[ye][oe])/Ce,se[ye+1][oe]=(-Ie-ve*se[ye][oe]-pe*se[ye][oe-1])/Ce):(Te=$(-me-Ee*se[ye][oe-1],-fe-Ee*se[ye][oe],xe,pe),se[ye+1][oe-1]=Te[0],se[ye+1][oe]=Te[1])),Se=_Mathmax(_Mathabs(se[ye][oe-1]),_Mathabs(se[ye][oe])),1<ue*Se*Se)for(_e=ye;_e<=oe;_e++)se[_e][oe-1]=se[_e][oe-1]/Se,se[_e][oe]/=Se}for(ye=0;ye<ee;ye++)if(ye<le||ye>de)for(_e=ye;_e<ee;_e++)ae[ye][_e]=se[ye][_e];for(_e=ee-1;_e>=le;_e--)for(ye=le;ye<=de;ye++){for(xe=0,ke=le;ke<=_Mathmin(_e,de);ke++)xe+=ae[ye][ke]*se[ke][_e];ae[ye][_e]=xe}}}function $(ee,te,ne,ae){var se,oe;return _Mathabs(ne)>_Mathabs(ae)?(se=ae/ne,oe=ne+se*ae,[(ee+se*te)/oe,(te-se*ee)/oe]):(se=ne/ae,oe=ae+se*ne,[(se*ee+te)/oe,(se*te-ee)/oe])}const Z=I(1).Matrix,W=I(18),K=W.hypotenuse,Q=W.getFilled2DArray,G={assumeSymmetric:!1};R.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return Z.isMatrix(this.V)||(this.V=new Z(this.V)),this.V},get diagonalMatrix(){var ee=this.n,te=this.e,ne=this.d,ae=new Z(ee,ee),se,oe;for(se=0;se<ee;se++){for(oe=0;oe<ee;oe++)ae[se][oe]=0;ae[se][se]=ne[se],0<te[se]?ae[se][se+1]=te[se]:0>te[se]&&(ae[se][se-1]=te[se])}return ae}},E.exports=R},function(E,D,I){'use strict';function R(F){if(!(this instanceof R))return new R(F);F=P.checkMatrix(F);var O=F.clone(),$=F.rows,Z=F.columns,W=Array(Z),K,Q,G,ee;for(G=0;G<Z;G++){var te=0;for(K=G;K<$;K++)te=T(te,O[K][G]);if(0!==te){for(0>O[G][G]&&(te=-te),K=G;K<$;K++)O[K][G]/=te;for(O[G][G]+=1,Q=G+1;Q<Z;Q++){for(ee=0,K=G;K<$;K++)ee+=O[K][G]*O[K][Q];for(ee=-ee/O[G][G],K=G;K<$;K++)O[K][Q]+=ee*O[K][G]}}W[G]=-te}this.QR=O,this.Rdiag=W}var P=I(1).Matrix,T=I(18).hypotenuse;R.prototype={solve:function(F){F=P.checkMatrix(F);var O=this.QR,$=O.rows;if(F.rows!==$)throw new Error('Matrix row dimensions must agree');if(!this.isFullRank())throw new Error('Matrix is rank deficient');var Z=F.columns,W=F.clone(),K=O.columns,Q,G,ee,te;for(ee=0;ee<K;ee++)for(G=0;G<Z;G++){for(te=0,Q=ee;Q<$;Q++)te+=O[Q][ee]*W[Q][G];for(te=-te/O[ee][ee],Q=ee;Q<$;Q++)W[Q][G]+=te*O[Q][ee]}for(ee=K-1;0<=ee;ee--){for(G=0;G<Z;G++)W[ee][G]/=this.Rdiag[ee];for(Q=0;Q<ee;Q++)for(G=0;G<Z;G++)W[Q][G]-=W[ee][G]*O[Q][ee]}return W.subMatrix(0,K-1,0,Z-1)},isFullRank:function(){for(var F=this.QR.columns,O=0;O<F;O++)if(0===this.Rdiag[O])return!1;return!0},get upperTriangularMatrix(){var F=this.QR,O=F.columns,$=new P(O,O),Z,W;for(Z=0;Z<O;Z++)for(W=0;W<O;W++)$[Z][W]=Z<W?F[Z][W]:Z===W?this.Rdiag[Z]:0;return $},get orthogonalMatrix(){var F=this.QR,O=F.rows,$=F.columns,Z=new P(O,$),W,K,Q,G;for(Q=$-1;0<=Q;Q--){for(W=0;W<O;W++)Z[W][Q]=0;for(Z[Q][Q]=1,K=Q;K<$;K++)if(0!==F[Q][Q]){for(G=0,W=Q;W<O;W++)G+=F[W][Q]*Z[W][K];for(G=-G/F[Q][Q],W=Q;W<O;W++)Z[W][K]+=G*F[W][Q]}}return Z}},E.exports=R},function(E,D,I){'use strict';function R(K){return K=T.checkMatrix(K),P(K,T.eye(K.rows))}function P(K,Q){return K=T.checkMatrix(K),Q=T.checkMatrix(Q),K.isSquare()?new $(K).solve(Q):new Z(K).solve(Q)}var T=I(1).Matrix,F=I(49),O=I(122),$=I(48),Z=I(123),W=I(121);T.inverse=T.inv=R,T.prototype.inverse=T.prototype.inv=function(){return R(this)},T.solve=P,T.prototype.solve=function(K){return P(this,K)},E.exports={SingularValueDecomposition:F,SVD:F,EigenvalueDecomposition:O,EVD:O,LuDecomposition:$,LU:$,QrDecomposition:Z,QR:Z,CholeskyDecomposition:W,CHO:W,inverse:R,solve:P}},function(){'use strict';Symbol.species||(Symbol.species=Symbol.for('@@species'))},function(E,D,I){'use strict';var R=I(4);E.exports=class extends R{constructor(T,F){super(T,T.rows,1),this.column=F}set(T,F,O){return this.matrix.set(T,this.column,O),this}get(T){return this.matrix.get(T,this.column)}}},function(E,D,I){'use strict';var R=I(4);E.exports=class extends R{constructor(T){super(T,T.rows,T.columns)}set(T,F,O){return this.matrix.set(T,this.columns-F-1,O),this}get(T,F){return this.matrix.get(T,this.columns-F-1)}}},function(E,D,I){'use strict';var R=I(4);E.exports=class extends R{constructor(T){super(T,T.rows,T.columns)}set(T,F,O){return this.matrix.set(this.rows-T-1,F,O),this}get(T,F){return this.matrix.get(this.rows-T-1,F)}}},function(E,D,I){'use strict';var R=I(4);E.exports=class extends R{constructor(T,F){super(T,1,T.columns),this.row=F}set(T,F,O){return this.matrix.set(this.row,F,O),this}get(T,F){return this.matrix.get(this.row,F)}}},function(E,D,I){'use strict';var R=I(4),P=I(8);E.exports=class extends R{constructor(F,O,$){var Z=P.checkIndices(F,O,$);super(F,Z.row.length,Z.column.length),this.rowIndices=Z.row,this.columnIndices=Z.column}set(F,O,$){return this.matrix.set(this.rowIndices[F],this.columnIndices[O],$),this}get(F,O){return this.matrix.get(this.rowIndices[F],this.columnIndices[O])}}},function(E,D,I){'use strict';var R=I(4),P=I(8);E.exports=class extends R{constructor(F,O,$,Z,W){P.checkRange(F,O,$,Z,W),super(F,$-O+1,W-Z+1),this.startRow=O,this.startColumn=Z}set(F,O,$){return this.matrix.set(this.startRow+F,this.startColumn+O,$),this}get(F,O){return this.matrix.get(this.startRow+F,this.startColumn+O)}}},function(E,D,I){'use strict';var R=I(4);E.exports=class extends R{constructor(T){super(T,T.columns,T.rows)}set(T,F,O){return this.matrix.set(F,T,O),this}get(T,F){return this.matrix.get(F,T)}}},function(E,D,I){'use strict';const R=I(19),P=I(17),T=I(44),F=I(104);class O{constructor($,Z,W){this.chemicalShifts=$,this.couplingConstants=Z,this.multiplicity=W,this.nSpins=$.length,this._initConnectivity(),this._initClusters()}static fromSpinusPrediction($){var Z=$.split('\n'),W=Z.length-1,K=Array(W),Q=Array(W),G={},ee=R.zeros(W,W);for(let de=0;de<W;de++){var te=Z[de].split('\t');K[de]=+te[2],G[te[0]-1]=de,Q[de]=+te[5]}for(let de=0;de<W;de++){te=Z[de].split('\t');var ne=(te.length-4)/3;for(oe=0;oe<ne;oe++){var ae=te[4+3*oe]-1,se=G[ae];ee[de][se]=+te[6+3*oe]}}for(var oe=0;oe<W;oe++)for(var le=oe;le<W;le++)ee[oe][le]=ee[le][oe];return new O(K,ee,P(W,2))}static fromPrediction($){let Z=O.ungroupAtoms($);const W=Z.length,K=Array(W),Q=R.zeros(W,W),G=Array(W),ee={};var te,ne,ae;for(te=0;te<W;te++)K[te]=Z[te].delta,ee[Z[te].atomIDs[0]]=te;for(te=0;te<W;te++){for(K[te]=Z[te].delta,ae=Z[te].j,ne=0;ne<ae.length;ne++)Q[ee[Z[te].atomIDs[0]]][ee[ae[ne].assignment]]=ae[ne].coupling,Q[ee[ae[ne].assignment]][ee[Z[te].atomIDs[0]]]=ae[ne].coupling;G[te]=Z[te].integral+1}return new O(K,Q,G)}static ungroupAtoms($){let Z=[];return $.forEach((W)=>{let K=W.atomIDs;for(let Q=0,G;Q<K.length;Q++)G=JSON.parse(JSON.stringify(W)),G.atomIDs=[K[Q]],G.integral=1,Z.push(G)}),Z}_initClusters(){this.clusters=T(this.connectivity,{out:'indexes'})}_initConnectivity(){const $=this.couplingConstants,Z=R.ones($.length,$.length);for(var W=0;W<$.length;W++)for(var K=W;K<$[W].length;K++)0===$[W][K]&&(Z[W][K]=0,Z[K][W]=0);this.connectivity=Z}_calculateBetas($,Z){var W=R.zeros($.length,$.length),K,Q;for(K=0;K<$.rows;K++)for(Q=K;Q<$.columns;Q++)0==this.chemicalShifts[K]-this.chemicalShifts[Q]?K!==Q&&0===$[K][Q]&&(W[K][Q]=1,W[Q][K]=1):(W[K][Q]=1-_Mathabs($[K][Q]/((this.chemicalShifts[K]-this.chemicalShifts[Q])*Z)),W[Q][K]=W[K][Q]);return W}ensureClusterSize($){var Z=this._calculateBetas(this.couplingConstants,$.frequency||400),W=F.agnes(Z,{isDistanceMatrix:!0}),K=[];this._splitCluster(W,K,$.maxClusterSize||8,!1);var Q=this._mergeClusters(K);this.nClusters=Q.length,this.clusters=Array(Q.length);for(var G=0;G<this.nClusters;G++){this.clusters[G]=[];for(var ee=0;ee<this.nSpins;ee++)0!==Q[G][ee]&&(0>Q[G][ee]?this.clusters[G].push(-(ee+1)):this.clusters[G].push(ee))}}_splitCluster($,Z,W,K){if(!K&&$.index.length<=W)Z.push(this._getMembers($));else for(var Q of $.children)if(!isNaN(Q.index)||Q.index.length<=W){for(var G=this._getMembers(Q),ee=0,te=0;te<this.nSpins;te++)if(1===G[te]){ee++;for(var ne=0;ne<this.nSpins;ne++)1===this.connectivity[te][ne]&&0===G[ne]&&(G[ne]=-1,ee++)}ee<=W?Z.push(G):isNaN(Q.index)?this._splitCluster(Q,Z,W,!0):(G[Q.index]=2,Z.push(G))}else this._splitCluster(Q,Z,W,!1)}_getMembers($){for(var Z=Array(this.nSpins),W=0;W<this.nSpins;W++)Z[W]=0;if(!isNaN($.index))Z[1*$.index]=1;else for(var K of $.index)Z[1*K.index]=1;return Z}_mergeClusters($){var Z=0,W,K,Q,G,ee,te,ne;for(Q=$.length-1;0<=Q;Q--){for(W=$[Q],Z=W.length,ee=0;ee<Z&&-1!==W[ee++];);if(ee<Z)for(G=$.length-1;G>=Q+1;G--){for(K=$[G],ee=0,te=0,ne=0;ee<Z;)-1==W[ee]*K[ee]&&te++,(0!==W[ee]||0!==K[ee])&&ne++,ee++;if(0<te&&ne<=this.maxClusterSize){for(ee=0;ee<Z;)1===K[ee]?W[ee]=1:-1===K[ee]&&1!==W[ee]&&(W[ee]=-1),ee++;$.splice(G,1),G++}}}return $}}E.exports=O},function(E,D,I){'use strict';function R($){const Z=($-1)/2,W=Array($),K=Array($);for(var Q=0;Q<$;Q++)W[Q]=$-1-Q-Z,K[Q]=_Mathsqrt(Z*(Z+1)-W[Q]*(W[Q]+1));const G=P(K,1,$,$);for(Q=0;Q<$;Q++)K[Q]=_Mathsqrt(Z*(Z+1)-W[Q]*(W[Q]-1));const ee=P(K,-1,$,$),te=G.clone().add(ee).mul(0.5),ne=ee.clone().mul(-1).add(G).mul(-0.5),ae=P(W,0,$,$);return{x:te,y:ne,z:ae,m:ee,p:G}}function P($,Z,W,K){const Q=new F(W,K,{initialCapacity:20});for(var G=0;G<$.length;G++)0<=G-Z&&G-Z<W&&G<K&&Q.set(G-Z,G,$[G]);return Q}const F=I(45),O=R(2);E.exports=function($){return 2===$?O:R($)}},function(E,D,I){'use strict';function P(te,ne,ae,se,oe,le,de){const ue=0|le*(-ne-se)/(oe-se),he=de.length;for(var ce=0,ge=0,pe=ue-he/2;pe<ue+he/2;pe++)ce=0|pe,0<=pe&&pe<le&&(te[ce]+=de[ge]*ae),ge++}function T(te,ne){te.forEachNonZero((ae,se,oe)=>{return ae>se?0:_Mathabs(oe)<=ne?0:oe})}function F(te,ne,ae,se,oe){let le=1;for(var de=0;de<oe.length;de++)le*=ae[oe[de]];const ue=new Z(le,le);for(var he=0,ce;he<oe.length;he++){ce=oe[he];const pe=G(ae[ce]);let me,fe,xe=1;for(let _e=0;_e<he;_e++)xe*=ae[oe[_e]];me=Z.eye(xe),xe=1;for(let _e=he+1;_e<oe.length;_e++)xe*=ae[oe[_e]];fe=Z.eye(xe);const be=te[ce],ye=me.kroneckerProduct(pe.z).kroneckerProduct(fe);ue.add(ye.mul(be));for(var ge=0;ge<oe.length;ge++){const _e=oe[ge];if(1===se[ce][_e]){const ke=G(ae[_e]);let we,je,Se=1;for(let Ce=0;Ce<ge;Ce++)Se*=ae[oe[Ce]];we=Z.eye(Se),Se=1;for(let Ce=ge+1;Ce<oe.length;Ce++)Se*=ae[oe[Ce]];je=Z.eye(Se);const ve=me.kroneckerProduct(pe.x).kroneckerProduct(fe).mmul(we.kroneckerProduct(ke.x).kroneckerProduct(je));ve.add(me.kroneckerProduct(pe.y).kroneckerProduct(fe).mul(-1).mmul(we.kroneckerProduct(ke.y).kroneckerProduct(je))),ve.add(me.kroneckerProduct(pe.z).kroneckerProduct(fe).mmul(we.kroneckerProduct(ke.z).kroneckerProduct(je))),ue.add(ve.mul(ne[ce][_e]/2))}}}return ue}function O(te,ne,ae){const se=Array(ae);for(var le=0;le<ae;le++)se[le]=te+le*((ne-te)/(ae-1));return se}const $=I(19),Z=I(45),W=I(25),K=I(51).asc,Q=I(17),G=I(134),ee=0.01;E.exports=function(te,ne){var ae,se;const oe=ne.frequency||400,le=(ne.from||0)*oe,de=(ne.to||10)*oe,ue=ne.lineWidth||1,he=ne.nbPoints||1024,ce=ne.maxClusterSize||10,ge=ne.output||'y',pe=te.chemicalShifts.slice();for(ae=0;ae<pe.length;ae++)pe[ae]*=oe;let me=he*ue/_Mathabs(de-le)/2.355,fe=20*me;const xe=0|fe,be=Array(xe),ye=fe/2;for(ae=0;ae<xe;ae++)be[ae]=1e12*_Mathexp(-((ae-ye)*(ae-ye))/(2*(me*me)));const ke=new Q(he,0),we=te.multiplicity;for(var je=0;je<te.clusters.length;je++){const Re=te.clusters[je];var Se=Array(Re.length);for(ae=0;ae<Re.length;ae++)Se[ae]=0>Re[ae]?-Re[ae]-1:Re[ae];var ve=1,Ce=0;const Pe=[],Te=[];if(Re.length>ce){for(var Ee=0;0>Re[Ee++];);Ee=Re[Ee-1];var De,Ie;for(Pe.push(-pe[Ee]),ae=0;ae<Re.length;ae++)if(0>Re[ae])for(Ie=te.couplingConstants[Ee][Se[ae]]/2,De=Pe.length,se=0;se<De;se++)Pe.push(Pe[se]+Ie),Pe[se]-=Ie;for(Pe.sort(K),Ce=Pe.length,ve=1,ae=0;ae<Ce;ae++)Te.push(1)}else{const ze=F(pe,te.couplingConstants,we,te.connectivity,Se),Me=ze.rows,Xe=new $.DC.EVD(ze),Ye=Xe.eigenvectorMatrix,Ne=Xe.realEigenvalues,Oe=new Z(Me,Me),Le=Re.length;ve=0;for(var Ae=0;Ae<Le;Ae++){const qe=G(we[Se[Ae]]);let $e=1;for(se=0;se<Ae;se++)$e*=we[Se[se]];const Ze=Z.eye($e);for($e=1,se=Ae+1;se<Le;se++)$e*=we[Se[se]];const We=Z.eye($e),He=Ze.kroneckerProduct(qe.m).kroneckerProduct(We);0<=Re[Ae]?(Oe.add(He.mul(Re[Ae]+1)),ve++):Oe.add(He.mul(Re[Ae]))}let Ue=$.zeros(Me,Me);Oe.forEachNonZero((qe,$e,Ze)=>{if(0<Ze){const He=Ye[$e];for(var We=0;We<He.length;We++)0!==He[We]&&Ue.set(qe,We,Ue.get(qe,We)+He[We])}return Ze});let Be=Ue.clone();Oe.forEachNonZero((qe,$e,Ze)=>{if(0>Ze){const He=Ye[$e];for(var We=0;We<He.length;We++)0!==He[We]&&Be.set(qe,We,Be.get(qe,We)+He[We])}return Ze});const Ve=Ye.transpose();Ue=Ve.mmul(Ue),Ue=new Z(Ue,{threshold:ee}),T(Ue,ee),Be=Ve.mmul(Be),Be=new Z(Be,{threshold:ee}),T(Be,ee),Be.forEachNonZero((qe,$e,Ze)=>{var We=Ue.get(qe,$e);We=_Mathmin(_Mathabs(We),_Mathabs(Ze)),We*=We,Ce+=We;var He=Ne[qe]-Ne[$e],Je=W(Pe,He,K);0>Je?(Pe.splice(-1-Je,0,He),Te.splice(-1-Je,0,We)):Te[Je]+=We})}const Fe=Pe.length;if(0<Fe){ve/=Ce;let Me=Pe[0],Xe=Te[0],Ye=1;for(ae=1;ae<Fe;ae++)_Mathabs(Pe[ae]-Me/Ye)<ue/32?(Xe+=Te[ae],Me+=Pe[ae],Ye++):(P(ke,Me/Ye,Xe*ve,le,de,he,be),Me=Pe[ae],Xe=Te[ae],Ye=1);P(ke,Me/Ye,Xe*ve,le,de,he,be)}}if('xy'===ge)return{x:O(ne.from,ne.to,he),y:ke};if('y'===ge)return ke;throw new RangeError('wrong output option')}},function(E,D,I){'use strict';function P($,Z,W,K){return(($-Z)*K-1)/(W-Z)}function T($,Z){for(var W=4,K=_Mathmax(0,_Mathround(Z.x-Z.widthX*W)),Q=_Mathmin($[0].length-1,_Mathround(Z.x+Z.widthX*W)),G=_Mathmax(0,_Mathround(Z.y-Z.widthY*W)),ee=_Mathmin($.length-1,_Mathround(Z.y+Z.widthY*W)),te=Z.widthX*Z.widthX,ne=Z.widthY*Z.widthY,ae=G;ae<ee;ae++)for(var se=K;se<Q;se++){var oe=_Mathpow(Z.x-se,2)/te+_Mathpow(Z.y-ae,2)/ne,le=1e4*Z.z*_Mathexp(-oe);$[ae][se]+=le}}const F=I(19);let O={H:{frequency:400,lineWidth:10},C:{frequency:100,lineWidth:10}};E.exports=function($,Z){var W;const K=$[0].fromAtomLabel,Q=$[0].toLabel,G=Z.frequencyX||O[K].frequency,ee=Z.frequencyY||O[Q].frequency;var te=Z.lineWidthX||O[K].lineWidth,ne=Z.lineWidthY||O[Q].lineWidth,oe=$[0].fromChemicalShift,le=$[0].fromChemicalShift,de=$[0].toChemicalShift,ue=$[0].toChemicalShift;for(W=1;W<$.length;)oe=_Mathmin(oe,$[W].fromChemicalShift),le=_Mathmax(le,$[W].fromChemicalShift),de=_Mathmin(de,$[W].toChemicalShift),ue=_Mathmax(ue,$[W].toChemicalShift),W++;null===Z.firstX||isNaN(Z.firstX)||(oe=Z.firstX),null===Z.firstY||isNaN(Z.firstY)||(de=Z.firstY),null===Z.lastX||isNaN(Z.lastX)||(le=Z.lastX),null===Z.lastY||isNaN(Z.lastY)||(ue=Z.lastY);var he=Z.nbPointsX||512,ce=Z.nbPointsY||512,ge=new F(ce,he).fill(0);for(W=0;W<$.length;){let pe={x:P($[W].fromChemicalShift,oe,le,he),y:P($[W].toChemicalShift,de,ue,ce),z:$[W].fromAtoms.length+$[W].toAtoms.length,widthX:P(te/G+oe,oe,le,he),widthY:P(ne/ee+de,de,ue,ce)};T(ge,pe),W++}return ge}},function(E){'use strict';E.exports=Number.isNaN||function(R){return R!==R}},function(E,D,I){'use strict';var R=I(2).assign,P=I(139),T=I(140),F=I(54),O={};R(O,P,T,F),E.exports=O},function(E,D,I){'use strict';function R(de){if(!(this instanceof R))return new R(de);this.options=$.assign({level:se,method:le,chunkSize:16384,windowBits:15,memLevel:8,strategy:oe,to:''},de||{});var ue=this.options;ue.raw&&0<ue.windowBits?ue.windowBits=-ue.windowBits:ue.gzip&&0<ue.windowBits&&16>ue.windowBits&&(ue.windowBits+=16),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new K,this.strm.avail_out=0;var he=O.deflateInit2(this.strm,ue.level,ue.method,ue.windowBits,ue.memLevel,ue.strategy);if(he!==te)throw new Error(W[he]);if(ue.header&&O.deflateSetHeader(this.strm,ue.header),ue.dictionary){var ce;if(ce='string'==typeof ue.dictionary?Z.string2buf(ue.dictionary):'[object ArrayBuffer]'===Q.call(ue.dictionary)?new Uint8Array(ue.dictionary):ue.dictionary,he=O.deflateSetDictionary(this.strm,ce),he!==te)throw new Error(W[he]);this._dict_set=!0}}function P(de,ue){var he=new R(ue);if(he.push(de,!0),he.err)throw he.msg||W[he.err];return he.result}var O=I(141),$=I(2),Z=I(52),W=I(20),K=I(56),Q=Object.prototype.toString,ee=4,te=0,ne=1,ae=2,se=-1,oe=0,le=8;R.prototype.push=function(de,ue){var he=this.strm,ce=this.options.chunkSize,ge,pe;if(this.ended)return!1;pe=ue===~~ue?ue:!0===ue?ee:0,he.input='string'==typeof de?Z.string2buf(de):'[object ArrayBuffer]'===Q.call(de)?new Uint8Array(de):de,he.next_in=0,he.avail_in=he.input.length;do{if(0===he.avail_out&&(he.output=new $.Buf8(ce),he.next_out=0,he.avail_out=ce),ge=O.deflate(he,pe),ge!==ne&&ge!==te)return this.onEnd(ge),this.ended=!0,!1;(0===he.avail_out||0===he.avail_in&&(pe===ee||pe===ae))&&('string'===this.options.to?this.onData(Z.buf2binstring($.shrinkBuf(he.output,he.next_out))):this.onData($.shrinkBuf(he.output,he.next_out)))}while((0<he.avail_in||0===he.avail_out)&&ge!==ne);return pe===ee?(ge=O.deflateEnd(this.strm),this.onEnd(ge),this.ended=!0,ge===te):pe!==ae||(this.onEnd(te),he.avail_out=0,!0)},R.prototype.onData=function(de){this.chunks.push(de)},R.prototype.onEnd=function(de){de===te&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=$.flattenChunks(this.chunks)),this.chunks=[],this.err=de,this.msg=this.strm.msg},D.Deflate=R,D.deflate=P,D.deflateRaw=function(de,ue){return ue=ue||{},ue.raw=!0,P(de,ue)},D.gzip=function(de,ue){return ue=ue||{},ue.gzip=!0,P(de,ue)}},function(E,D,I){'use strict';function R(ee){if(!(this instanceof R))return new R(ee);this.options=O.assign({chunkSize:16384,windowBits:0,to:''},ee||{});var te=this.options;te.raw&&0<=te.windowBits&&16>te.windowBits&&(te.windowBits=-te.windowBits,0===te.windowBits&&(te.windowBits=-15)),0<=te.windowBits&&16>te.windowBits&&!(ee&&ee.windowBits)&&(te.windowBits+=32),15<te.windowBits&&48>te.windowBits&&0==(15&te.windowBits)&&(te.windowBits|=15),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new K,this.strm.avail_out=0;var ne=F.inflateInit2(this.strm,te.windowBits);if(ne!==Z.Z_OK)throw new Error(W[ne]);this.header=new Q,F.inflateGetHeader(this.strm,this.header)}function P(ee,te){var ne=new R(te);if(ne.push(ee,!0),ne.err)throw ne.msg||W[ne.err];return ne.result}var F=I(144),O=I(2),$=I(52),Z=I(54),W=I(20),K=I(56),Q=I(142),G=Object.prototype.toString;R.prototype.push=function(ee,te){var ne=this.strm,ae=this.options.chunkSize,se=this.options.dictionary,ge=!1,oe,le,de,ue,he,ce;if(this.ended)return!1;le=te===~~te?te:!0===te?Z.Z_FINISH:Z.Z_NO_FLUSH,ne.input='string'==typeof ee?$.binstring2buf(ee):'[object ArrayBuffer]'===G.call(ee)?new Uint8Array(ee):ee,ne.next_in=0,ne.avail_in=ne.input.length;do{if(0===ne.avail_out&&(ne.output=new O.Buf8(ae),ne.next_out=0,ne.avail_out=ae),oe=F.inflate(ne,Z.Z_NO_FLUSH),oe===Z.Z_NEED_DICT&&se&&(ce='string'==typeof se?$.string2buf(se):'[object ArrayBuffer]'===G.call(se)?new Uint8Array(se):se,oe=F.inflateSetDictionary(this.strm,ce)),oe===Z.Z_BUF_ERROR&&!0==ge&&(oe=Z.Z_OK,ge=!1),oe!==Z.Z_STREAM_END&&oe!==Z.Z_OK)return this.onEnd(oe),this.ended=!0,!1;ne.next_out&&(0===ne.avail_out||oe===Z.Z_STREAM_END||0===ne.avail_in&&(le===Z.Z_FINISH||le===Z.Z_SYNC_FLUSH))&&('string'===this.options.to?(de=$.utf8border(ne.output,ne.next_out),ue=ne.next_out-de,he=$.buf2string(ne.output,de),ne.next_out=ue,ne.avail_out=ae-ue,ue&&O.arraySet(ne.output,ne.output,de,ue,0),this.onData(he)):this.onData(O.shrinkBuf(ne.output,ne.next_out))),0===ne.avail_in&&0===ne.avail_out&&(ge=!0)}while((0<ne.avail_in||0===ne.avail_out)&&oe!==Z.Z_STREAM_END);return oe===Z.Z_STREAM_END&&(le=Z.Z_FINISH),le===Z.Z_FINISH?(oe=F.inflateEnd(this.strm),this.onEnd(oe),this.ended=!0,oe===Z.Z_OK):le!==Z.Z_SYNC_FLUSH||(this.onEnd(Z.Z_OK),ne.avail_out=0,!0)},R.prototype.onData=function(ee){this.chunks.push(ee)},R.prototype.onEnd=function(ee){ee===Z.Z_OK&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=O.flattenChunks(this.chunks)),this.chunks=[],this.err=ee,this.msg=this.strm.msg},D.Inflate=R,D.inflate=P,D.inflateRaw=function(ee,te){return te=te||{},te.raw=!0,P(ee,te)},D.ungzip=P},function(E,D,I){'use strict';function R(mt,xt){return mt.msg=ke[xt],xt}function P(mt){return(mt<<1)-(4<mt?9:0)}function T(mt){for(var xt=mt.length;0<=--xt;)mt[xt]=0}function F(mt){var xt=mt.state,bt=xt.pending;bt>mt.avail_out&&(bt=mt.avail_out);0===bt||(xe.arraySet(mt.output,xt.pending_buf,xt.pending_out,bt,mt.next_out),mt.next_out+=bt,xt.pending_out+=bt,mt.total_out+=bt,mt.avail_out-=bt,xt.pending-=bt,0===xt.pending&&(xt.pending_out=0))}function O(mt,xt){be._tr_flush_block(mt,0<=mt.block_start?mt.block_start:-1,mt.strstart-mt.block_start,xt),mt.block_start=mt.strstart,F(mt.strm)}function $(mt,xt){mt.pending_buf[mt.pending++]=xt}function Z(mt,xt){mt.pending_buf[mt.pending++]=255&xt>>>8,mt.pending_buf[mt.pending++]=255&xt}function W(mt,xt,bt,yt){var _t=mt.avail_in;return(_t>yt&&(_t=yt),0===_t)?0:(mt.avail_in-=_t,xe.arraySet(xt,mt.input,mt.next_in,_t,bt),1===mt.state.wrap?mt.adler=ye(mt.adler,xt,_t,bt):2===mt.state.wrap&&(mt.adler=_e(mt.adler,xt,_t,bt)),mt.next_in+=_t,mt.total_in+=_t,_t)}function K(mt,xt){var bt=mt.max_chain_length,yt=mt.strstart,_t,kt,wt=mt.prev_length,jt=mt.nice_match,St=mt.strstart>mt.w_size-Qe?mt.strstart-(mt.w_size-Qe):0,vt=mt.window,Ct=mt.w_mask,Et=mt.prev,Dt=mt.strstart+Ke,It=vt[yt+wt-1],At=vt[yt+wt];mt.prev_length>=mt.good_match&&(bt>>=2),jt>mt.lookahead&&(jt=mt.lookahead);do{if(_t=xt,vt[_t+wt]!==At||vt[_t+wt-1]!==It||vt[_t]!==vt[yt]||vt[++_t]!==vt[yt+1])continue;yt+=2,_t++;do;while(vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&yt<Dt);if(kt=Ke-(Dt-yt),yt=Dt-Ke,kt>wt){if(mt.match_start=xt,wt=kt,kt>=jt)break;It=vt[yt+wt-1],At=vt[yt+wt]}}while((xt=Et[xt&Ct])>St&&0!=--bt);return wt<=mt.lookahead?wt:mt.lookahead}function Q(mt){var xt=mt.w_size,bt,yt,_t,kt,wt;do{if(kt=mt.window_size-mt.lookahead-mt.strstart,mt.strstart>=xt+(xt-Qe)){xe.arraySet(mt.window,mt.window,xt,xt,0),mt.match_start-=xt,mt.strstart-=xt,mt.block_start-=xt,yt=mt.hash_size,bt=yt;do _t=mt.head[--bt],mt.head[bt]=_t>=xt?_t-xt:0;while(--yt);yt=xt,bt=yt;do _t=mt.prev[--bt],mt.prev[bt]=_t>=xt?_t-xt:0;while(--yt);kt+=xt}if(0===mt.strm.avail_in)break;if(yt=W(mt.strm,mt.window,mt.strstart+mt.lookahead,kt),mt.lookahead+=yt,mt.lookahead+mt.insert>=Je)for(wt=mt.strstart-mt.insert,mt.ins_h=mt.window[wt],mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[wt+1])&mt.hash_mask;mt.insert&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[wt+Je-1])&mt.hash_mask,mt.prev[wt&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=wt,wt++,mt.insert--,!(mt.lookahead+mt.insert<Je)););}while(mt.lookahead<Qe&&0!==mt.strm.avail_in)}function ee(mt,xt){for(var bt,yt;;){if(mt.lookahead<Qe){if(Q(mt),mt.lookahead<Qe&&xt===we)return lt;if(0===mt.lookahead)break}if(bt=0,mt.lookahead>=Je&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Je-1])&mt.hash_mask,bt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart),0!==bt&&mt.strstart-bt<=mt.w_size-Qe&&(mt.match_length=K(mt,bt)),!(mt.match_length>=Je))yt=be._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++;else if(yt=be._tr_tally(mt,mt.strstart-mt.match_start,mt.match_length-Je),mt.lookahead-=mt.match_length,mt.match_length<=mt.max_lazy_match&&mt.lookahead>=Je){mt.match_length--;do mt.strstart++,mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Je-1])&mt.hash_mask,bt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart;while(0!=--mt.match_length);mt.strstart++}else mt.strstart+=mt.match_length,mt.match_length=0,mt.ins_h=mt.window[mt.strstart],mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+1])&mt.hash_mask;if(yt&&(O(mt,!1),0===mt.strm.avail_out))return lt}return mt.insert=mt.strstart<Je-1?mt.strstart:Je-1,xt===ve?(O(mt,!0),0===mt.strm.avail_out?ht:ct):mt.last_lit&&(O(mt,!1),0===mt.strm.avail_out)?lt:ut}function te(mt,xt){for(var bt,yt,_t;;){if(mt.lookahead<Qe){if(Q(mt),mt.lookahead<Qe&&xt===we)return lt;if(0===mt.lookahead)break}if(bt=0,mt.lookahead>=Je&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Je-1])&mt.hash_mask,bt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart),mt.prev_length=mt.match_length,mt.prev_match=mt.match_start,mt.match_length=Je-1,0!==bt&&mt.prev_length<mt.max_lazy_match&&mt.strstart-bt<=mt.w_size-Qe&&(mt.match_length=K(mt,bt),5>=mt.match_length&&(mt.strategy===Te||mt.match_length===Je&&4096<mt.strstart-mt.match_start)&&(mt.match_length=Je-1)),mt.prev_length>=Je&&mt.match_length<=mt.prev_length){_t=mt.strstart+mt.lookahead-Je,yt=be._tr_tally(mt,mt.strstart-1-mt.prev_match,mt.prev_length-Je),mt.lookahead-=mt.prev_length-1,mt.prev_length-=2;do++mt.strstart<=_t&&(mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[mt.strstart+Je-1])&mt.hash_mask,bt=mt.prev[mt.strstart&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=mt.strstart);while(0!=--mt.prev_length);if(mt.match_available=0,mt.match_length=Je-1,mt.strstart++,yt&&(O(mt,!1),0===mt.strm.avail_out))return lt}else if(!mt.match_available)mt.match_available=1,mt.strstart++,mt.lookahead--;else if(yt=be._tr_tally(mt,0,mt.window[mt.strstart-1]),yt&&O(mt,!1),mt.strstart++,mt.lookahead--,0===mt.strm.avail_out)return lt}return mt.match_available&&(yt=be._tr_tally(mt,0,mt.window[mt.strstart-1]),mt.match_available=0),mt.insert=mt.strstart<Je-1?mt.strstart:Je-1,xt===ve?(O(mt,!0),0===mt.strm.avail_out?ht:ct):mt.last_lit&&(O(mt,!1),0===mt.strm.avail_out)?lt:ut}function ne(mt,xt){for(var wt=mt.window,bt,yt,_t,kt;;){if(mt.lookahead<=Ke){if(Q(mt),mt.lookahead<=Ke&&xt===we)return lt;if(0===mt.lookahead)break}if(mt.match_length=0,mt.lookahead>=Je&&0<mt.strstart&&(_t=mt.strstart-1,yt=wt[_t],yt===wt[++_t]&&yt===wt[++_t]&&yt===wt[++_t])){kt=mt.strstart+Ke;do;while(yt===wt[++_t]&&yt===wt[++_t]&&yt===wt[++_t]&&yt===wt[++_t]&&yt===wt[++_t]&&yt===wt[++_t]&&yt===wt[++_t]&&yt===wt[++_t]&&_t<kt);mt.match_length=Ke-(kt-_t),mt.match_length>mt.lookahead&&(mt.match_length=mt.lookahead)}if(mt.match_length>=Je?(bt=be._tr_tally(mt,1,mt.match_length-Je),mt.lookahead-=mt.match_length,mt.strstart+=mt.match_length,mt.match_length=0):(bt=be._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++),bt&&(O(mt,!1),0===mt.strm.avail_out))return lt}return mt.insert=0,xt===ve?(O(mt,!0),0===mt.strm.avail_out?ht:ct):mt.last_lit&&(O(mt,!1),0===mt.strm.avail_out)?lt:ut}function ae(mt,xt){for(var bt;;){if(0===mt.lookahead&&(Q(mt),0===mt.lookahead)){if(xt===we)return lt;break}if(mt.match_length=0,bt=be._tr_tally(mt,0,mt.window[mt.strstart]),mt.lookahead--,mt.strstart++,bt&&(O(mt,!1),0===mt.strm.avail_out))return lt}return mt.insert=0,xt===ve?(O(mt,!0),0===mt.strm.avail_out?ht:ct):mt.last_lit&&(O(mt,!1),0===mt.strm.avail_out)?lt:ut}function se(mt,xt,bt,yt,_t){this.good_length=mt,this.max_lazy=xt,this.nice_length=bt,this.max_chain=yt,this.func=_t}function oe(mt){mt.window_size=2*mt.w_size,T(mt.head),mt.max_lazy_match=pt[mt.level].max_lazy,mt.good_match=pt[mt.level].good_length,mt.nice_match=pt[mt.level].nice_length,mt.max_chain_length=pt[mt.level].max_chain,mt.strstart=0,mt.block_start=0,mt.lookahead=0,mt.insert=0,mt.match_length=mt.prev_length=Je-1,mt.match_available=0,mt.ins_h=0}function le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ne,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new xe.Buf16(2*We),this.dyn_dtree=new xe.Buf16(2*(2*$e+1)),this.bl_tree=new xe.Buf16(2*(2*Ze+1)),T(this.dyn_ltree),T(this.dyn_dtree),T(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new xe.Buf16(He+1),this.heap=new xe.Buf16(2*qe+1),T(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new xe.Buf16(2*qe+1),T(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(mt){var xt;return mt&&mt.state?(mt.total_in=mt.total_out=0,mt.data_type=Ye,xt=mt.state,xt.pending=0,xt.pending_out=0,0>xt.wrap&&(xt.wrap=-xt.wrap),xt.status=xt.wrap?et:st,mt.adler=2===xt.wrap?0:1,xt.last_flush=we,be._tr_init(xt),Ee):R(mt,Ie)}function ue(mt){var xt=de(mt);return xt===Ee&&oe(mt.state),xt}function ce(mt,xt,bt,yt,_t,kt){if(!mt)return Ie;var wt=1;if(xt===Pe&&(xt=6),0>yt?(wt=0,yt=-yt):15<yt&&(wt=2,yt-=16),1>_t||_t>Oe||bt!==Ne||8>yt||15<yt||0>xt||9<xt||0>kt||kt>Me)return R(mt,Ie);8===yt&&(yt=9);var jt=new le;return mt.state=jt,jt.strm=mt,jt.wrap=wt,jt.gzhead=null,jt.w_bits=yt,jt.w_size=1<<jt.w_bits,jt.w_mask=jt.w_size-1,jt.hash_bits=_t+7,jt.hash_size=1<<jt.hash_bits,jt.hash_mask=jt.hash_size-1,jt.hash_shift=~~((jt.hash_bits+Je-1)/Je),jt.window=new xe.Buf8(2*jt.w_size),jt.head=new xe.Buf16(jt.hash_size),jt.prev=new xe.Buf16(jt.w_size),jt.lit_bufsize=1<<_t+6,jt.pending_buf_size=4*jt.lit_bufsize,jt.pending_buf=new xe.Buf8(jt.pending_buf_size),jt.d_buf=1*jt.lit_bufsize,jt.l_buf=3*jt.lit_bufsize,jt.level=xt,jt.strategy=kt,jt.method=bt,ue(mt)}var xe=I(2),be=I(146),ye=I(53),_e=I(55),ke=I(20),we=0,ve=4,Ce=5,Ee=0,De=1,Ie=-2,Re=-5,Pe=-1,Te=1,Fe=2,Me=4,Ye=2,Ne=8,Oe=9,qe=256+1+29,$e=30,Ze=19,We=2*qe+1,He=15,Je=3,Ke=258,Qe=Ke+Je+1,et=42,tt=69,it=73,nt=91,at=103,st=113,ot=666,lt=1,ut=2,ht=3,ct=4,pt;pt=[new se(0,0,0,0,function(mt,xt){var bt=65535;for(bt>mt.pending_buf_size-5&&(bt=mt.pending_buf_size-5);;){if(1>=mt.lookahead){if(Q(mt),0===mt.lookahead&&xt===we)return lt;if(0===mt.lookahead)break}mt.strstart+=mt.lookahead,mt.lookahead=0;var yt=mt.block_start+bt;if((0===mt.strstart||mt.strstart>=yt)&&(mt.lookahead=mt.strstart-yt,mt.strstart=yt,O(mt,!1),0===mt.strm.avail_out))return lt;if(mt.strstart-mt.block_start>=mt.w_size-Qe&&(O(mt,!1),0===mt.strm.avail_out))return lt}return mt.insert=0,xt===ve?(O(mt,!0),0===mt.strm.avail_out?ht:ct):mt.strstart>mt.block_start&&(O(mt,!1),0===mt.strm.avail_out)?lt:lt}),new se(4,4,8,4,ee),new se(4,5,16,8,ee),new se(4,6,32,32,ee),new se(4,4,16,16,te),new se(8,16,32,32,te),new se(8,16,128,128,te),new se(8,32,128,256,te),new se(32,128,258,1024,te),new se(32,258,258,4096,te)],D.deflateInit=function(mt,xt){return ce(mt,xt,Ne,15,8,0)},D.deflateInit2=ce,D.deflateReset=ue,D.deflateResetKeep=de,D.deflateSetHeader=function(mt,xt){return mt&&mt.state?2===mt.state.wrap?(mt.state.gzhead=xt,Ee):Ie:Ie},D.deflate=function(mt,xt){var bt,yt,_t,kt;if(!mt||!mt.state||xt>Ce||0>xt)return mt?R(mt,Ie):Ie;if(yt=mt.state,!mt.output||!mt.input&&0!==mt.avail_in||yt.status===ot&&xt!==ve)return R(mt,0===mt.avail_out?Re:Ie);if(yt.strm=mt,bt=yt.last_flush,yt.last_flush=xt,yt.status===et)if(2===yt.wrap)mt.adler=0,$(yt,31),$(yt,139),$(yt,8),yt.gzhead?($(yt,(yt.gzhead.text?1:0)+(yt.gzhead.hcrc?2:0)+(yt.gzhead.extra?4:0)+(yt.gzhead.name?8:0)+(yt.gzhead.comment?16:0)),$(yt,255&yt.gzhead.time),$(yt,255&yt.gzhead.time>>8),$(yt,255&yt.gzhead.time>>16),$(yt,255&yt.gzhead.time>>24),$(yt,9===yt.level?2:yt.strategy>=Fe||2>yt.level?4:0),$(yt,255&yt.gzhead.os),yt.gzhead.extra&&yt.gzhead.extra.length&&($(yt,255&yt.gzhead.extra.length),$(yt,255&yt.gzhead.extra.length>>8)),yt.gzhead.hcrc&&(mt.adler=_e(mt.adler,yt.pending_buf,yt.pending,0)),yt.gzindex=0,yt.status=tt):($(yt,0),$(yt,0),$(yt,0),$(yt,0),$(yt,0),$(yt,9===yt.level?2:yt.strategy>=Fe||2>yt.level?4:0),$(yt,3),yt.status=st);else{var wt=Ne+(yt.w_bits-8<<4)<<8,jt=-1;jt=yt.strategy>=Fe||2>yt.level?0:6>yt.level?1:6===yt.level?2:3,wt|=jt<<6,0!==yt.strstart&&(wt|=32),wt+=31-wt%31,yt.status=st,Z(yt,wt),0!==yt.strstart&&(Z(yt,mt.adler>>>16),Z(yt,65535&mt.adler)),mt.adler=1}if(yt.status===tt)if(yt.gzhead.extra){for(_t=yt.pending;yt.gzindex<(65535&yt.gzhead.extra.length)&&!(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>_t&&(mt.adler=_e(mt.adler,yt.pending_buf,yt.pending-_t,_t)),F(mt),_t=yt.pending,yt.pending===yt.pending_buf_size));)$(yt,255&yt.gzhead.extra[yt.gzindex]),yt.gzindex++;yt.gzhead.hcrc&&yt.pending>_t&&(mt.adler=_e(mt.adler,yt.pending_buf,yt.pending-_t,_t)),yt.gzindex===yt.gzhead.extra.length&&(yt.gzindex=0,yt.status=it)}else yt.status=it;if(yt.status===it)if(yt.gzhead.name){_t=yt.pending;do{if(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>_t&&(mt.adler=_e(mt.adler,yt.pending_buf,yt.pending-_t,_t)),F(mt),_t=yt.pending,yt.pending===yt.pending_buf_size)){kt=1;break}kt=yt.gzindex<yt.gzhead.name.length?255&yt.gzhead.name.charCodeAt(yt.gzindex++):0,$(yt,kt)}while(0!==kt);yt.gzhead.hcrc&&yt.pending>_t&&(mt.adler=_e(mt.adler,yt.pending_buf,yt.pending-_t,_t)),0===kt&&(yt.gzindex=0,yt.status=nt)}else yt.status=nt;if(yt.status===nt)if(yt.gzhead.comment){_t=yt.pending;do{if(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>_t&&(mt.adler=_e(mt.adler,yt.pending_buf,yt.pending-_t,_t)),F(mt),_t=yt.pending,yt.pending===yt.pending_buf_size)){kt=1;break}kt=yt.gzindex<yt.gzhead.comment.length?255&yt.gzhead.comment.charCodeAt(yt.gzindex++):0,$(yt,kt)}while(0!==kt);yt.gzhead.hcrc&&yt.pending>_t&&(mt.adler=_e(mt.adler,yt.pending_buf,yt.pending-_t,_t)),0===kt&&(yt.status=at)}else yt.status=at;if(yt.status===at&&(yt.gzhead.hcrc?(yt.pending+2>yt.pending_buf_size&&F(mt),yt.pending+2<=yt.pending_buf_size&&($(yt,255&mt.adler),$(yt,255&mt.adler>>8),mt.adler=0,yt.status=st)):yt.status=st),0!==yt.pending){if(F(mt),0===mt.avail_out)return yt.last_flush=-1,Ee;}else if(0===mt.avail_in&&P(xt)<=P(bt)&&xt!==ve)return R(mt,Re);if(yt.status===ot&&0!==mt.avail_in)return R(mt,Re);if(0!==mt.avail_in||0!==yt.lookahead||xt!==we&&yt.status!==ot){var St=yt.strategy===Fe?ae(yt,xt):yt.strategy===3?ne(yt,xt):pt[yt.level].func(yt,xt);if((St===ht||St===ct)&&(yt.status=ot),St===lt||St===ht)return 0===mt.avail_out&&(yt.last_flush=-1),Ee;if(St===ut&&(xt===1?be._tr_align(yt):xt!==Ce&&(be._tr_stored_block(yt,0,0,!1),xt===3&&(T(yt.head),0===yt.lookahead&&(yt.strstart=0,yt.block_start=0,yt.insert=0))),F(mt),0===mt.avail_out))return yt.last_flush=-1,Ee}return xt===ve?0>=yt.wrap?De:(2===yt.wrap?($(yt,255&mt.adler),$(yt,255&mt.adler>>8),$(yt,255&mt.adler>>16),$(yt,255&mt.adler>>24),$(yt,255&mt.total_in),$(yt,255&mt.total_in>>8),$(yt,255&mt.total_in>>16),$(yt,255&mt.total_in>>24)):(Z(yt,mt.adler>>>16),Z(yt,65535&mt.adler)),F(mt),0<yt.wrap&&(yt.wrap=-yt.wrap),0===yt.pending?De:Ee):Ee},D.deflateEnd=function(mt){var xt;return mt&&mt.state?(xt=mt.state.status,xt!==et&&xt!==tt&&xt!==it&&xt!==nt&&xt!==at&&xt!==st&&xt!==ot)?R(mt,Ie):(mt.state=null,xt===st?R(mt,-3):Ee):Ie},D.deflateSetDictionary=function(mt,xt){var bt=xt.length,yt,_t,kt,wt,jt,St,vt,Ct;if(!mt||!mt.state)return Ie;if(yt=mt.state,wt=yt.wrap,2===wt||1===wt&&yt.status!==et||yt.lookahead)return Ie;for(1===wt&&(mt.adler=ye(mt.adler,xt,bt,0)),yt.wrap=0,bt>=yt.w_size&&(0===wt&&(T(yt.head),yt.strstart=0,yt.block_start=0,yt.insert=0),Ct=new xe.Buf8(yt.w_size),xe.arraySet(Ct,xt,bt-yt.w_size,yt.w_size,0),xt=Ct,bt=yt.w_size),jt=mt.avail_in,St=mt.next_in,vt=mt.input,mt.avail_in=bt,mt.next_in=0,mt.input=xt,Q(yt);yt.lookahead>=Je;){_t=yt.strstart,kt=yt.lookahead-(Je-1);do yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[_t+Je-1])&yt.hash_mask,yt.prev[_t&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=_t,_t++;while(--kt);yt.strstart=_t,yt.lookahead=Je-1,Q(yt)}return yt.strstart+=yt.lookahead,yt.block_start=yt.strstart,yt.insert=yt.lookahead,yt.lookahead=0,yt.match_length=yt.prev_length=Je-1,yt.match_available=0,mt.next_in=St,mt.input=vt,mt.avail_in=jt,yt.wrap=wt,Ee},D.deflateInfo='pako deflate (from Nodeca project)'},function(E){'use strict';E.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name='',this.comment='',this.hcrc=0,this.done=!1}},function(E){'use strict';var R=30;E.exports=function(F,O){var $,Z,W,K,Q,G,ee,te,ne,ae,se,oe,le,de,ue,he,ce,ge,pe,me,fe,xe,be,ye,_e;$=F.state,Z=F.next_in,ye=F.input,W=Z+(F.avail_in-5),K=F.next_out,_e=F.output,Q=K-(O-F.avail_out),G=K+(F.avail_out-257),ee=$.dmax,te=$.wsize,ne=$.whave,ae=$.wnext,se=$.window,oe=$.hold,le=$.bits,de=$.lencode,ue=$.distcode,he=(1<<$.lenbits)-1,ce=(1<<$.distbits)-1;top:do{15>le&&(oe+=ye[Z++]<<le,le+=8,oe+=ye[Z++]<<le,le+=8),ge=de[oe&he];dolen:for(;;){if(pe=ge>>>24,oe>>>=pe,le-=pe,pe=255&ge>>>16,0===pe)_e[K++]=65535&ge;else if(16&pe){me=65535&ge,pe&=15,pe&&(le<pe&&(oe+=ye[Z++]<<le,le+=8),me+=oe&(1<<pe)-1,oe>>>=pe,le-=pe),15>le&&(oe+=ye[Z++]<<le,le+=8,oe+=ye[Z++]<<le,le+=8),ge=ue[oe&ce];dodist:for(;;){if(pe=ge>>>24,oe>>>=pe,le-=pe,pe=255&ge>>>16,16&pe){if(fe=65535&ge,pe&=15,le<pe&&(oe+=ye[Z++]<<le,le+=8,le<pe&&(oe+=ye[Z++]<<le,le+=8)),fe+=oe&(1<<pe)-1,fe>ee){F.msg='invalid distance too far back',$.mode=R;break top}if(oe>>>=pe,le-=pe,pe=K-Q,fe>pe){if(pe=fe-pe,pe>ne&&$.sane){F.msg='invalid distance too far back',$.mode=R;break top}if(xe=0,be=se,0===ae){if(xe+=te-pe,pe<me){me-=pe;do _e[K++]=se[xe++];while(--pe);xe=K-fe,be=_e}}else if(ae<pe){if(xe+=te+ae-pe,pe-=ae,pe<me){me-=pe;do _e[K++]=se[xe++];while(--pe);if(xe=0,ae<me){pe=ae,me-=pe;do _e[K++]=se[xe++];while(--pe);xe=K-fe,be=_e}}}else if(xe+=ae-pe,pe<me){me-=pe;do _e[K++]=se[xe++];while(--pe);xe=K-fe,be=_e}for(;2<me;)_e[K++]=be[xe++],_e[K++]=be[xe++],_e[K++]=be[xe++],me-=3;me&&(_e[K++]=be[xe++],1<me&&(_e[K++]=be[xe++]))}else{xe=K-fe;do _e[K++]=_e[xe++],_e[K++]=_e[xe++],_e[K++]=_e[xe++],me-=3;while(2<me);me&&(_e[K++]=_e[xe++],1<me&&(_e[K++]=_e[xe++]))}}else if(0==(64&pe)){ge=ue[(65535&ge)+(oe&(1<<pe)-1)];continue dodist}else{F.msg='invalid distance code',$.mode=R;break top}break}}else if(0==(64&pe)){ge=de[(65535&ge)+(oe&(1<<pe)-1)];continue dolen}else if(32&pe){$.mode=12;break top}else{F.msg='invalid literal/length code',$.mode=R;break top}break}}while(Z<W&&K<G);return me=le>>3,Z-=me,le-=me<<3,oe&=(1<<le)-1,F.next_in=Z,F.next_out=K,F.avail_in=Z<W?5+(W-Z):5-(Z-W),F.avail_out=K<G?257+(G-K):257-(K-G),$.hold=oe,void($.bits=le)}},function(E,D,I){'use strict';function R(ut){return(255&ut>>>24)+(65280&ut>>>8)+((65280&ut)<<8)+((255&ut)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ne.Buf16(320),this.work=new ne.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(ut){var ht;return ut&&ut.state?(ht=ut.state,ut.total_in=ut.total_out=ht.total=0,ut.msg='',ht.wrap&&(ut.adler=1&ht.wrap),ht.mode=je,ht.last=0,ht.havedict=0,ht.dmax=32768,ht.head=null,ht.hold=0,ht.bits=0,ht.lencode=ht.lendyn=new ne.Buf32(tt),ht.distcode=ht.distdyn=new ne.Buf32(it),ht.sane=1,ht.back=-1,me):be}function F(ut){var ht;return ut&&ut.state?(ht=ut.state,ht.wsize=0,ht.whave=0,ht.wnext=0,T(ut)):be}function O(ut,ht){var ct,gt;return ut&&ut.state?(gt=ut.state,0>ht?(ct=0,ht=-ht):(ct=(ht>>4)+1,48>ht&&(ht&=15)),ht&&(8>ht||15<ht))?be:(null!==gt.window&&gt.wbits!==ht&&(gt.window=null),gt.wrap=ct,gt.wbits=ht,F(ut)):be}function $(ut,ht){var ct,gt;return ut?(gt=new P,ut.state=gt,gt.window=null,ct=O(ut,ht),ct!==me&&(ut.state=null),ct):be}function W(ut){if(st){var ht;for(ot=new ne.Buf32(512),lt=new ne.Buf32(32),ht=0;144>ht;)ut.lens[ht++]=8;for(;256>ht;)ut.lens[ht++]=9;for(;280>ht;)ut.lens[ht++]=7;for(;288>ht;)ut.lens[ht++]=8;for(le(ue,ut.lens,0,288,ot,0,ut.work,{bits:9}),ht=0;32>ht;)ut.lens[ht++]=5;le(he,ut.lens,0,32,lt,0,ut.work,{bits:5}),st=!1}ut.lencode=ot,ut.lenbits=9,ut.distcode=lt,ut.distbits=5}function K(ut,ht,ct,gt){var mt=ut.state,pt;return null===mt.window&&(mt.wsize=1<<mt.wbits,mt.wnext=0,mt.whave=0,mt.window=new ne.Buf8(mt.wsize)),gt>=mt.wsize?(ne.arraySet(mt.window,ht,ct-mt.wsize,mt.wsize,0),mt.wnext=0,mt.whave=mt.wsize):(pt=mt.wsize-mt.wnext,pt>gt&&(pt=gt),ne.arraySet(mt.window,ht,ct-gt,pt,mt.wnext),gt-=pt,gt?(ne.arraySet(mt.window,ht,ct-gt,gt,0),mt.wnext=gt,mt.whave=mt.wsize):(mt.wnext+=pt,mt.wnext===mt.wsize&&(mt.wnext=0),mt.whave<mt.wsize&&(mt.whave+=pt))),0}var ne=I(2),ae=I(53),se=I(55),oe=I(143),le=I(145),ue=1,he=2,ce=4,pe=6,me=0,be=-2,ye=-3,_e=-4,we=8,je=1,Se=2,ve=3,Ce=4,Ee=5,De=6,Ie=7,Ae=8,Re=9,Pe=10,Te=11,Fe=12,ze=13,Me=14,Xe=15,Ye=16,Ne=17,Oe=18,Le=19,Ue=20,Be=21,Ve=22,qe=23,$e=24,Ze=25,We=26,He=27,Je=28,Ke=29,Qe=30,Ge=31,tt=852,it=592,st=!0,ot,lt;D.inflateReset=F,D.inflateReset2=O,D.inflateResetKeep=T,D.inflateInit=function(ut){return $(ut,15)},D.inflateInit2=$,D.inflate=function(ut,ht){var Et=0,Mt=new ne.Buf8(4),Nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ct,gt,pt,mt,xt,bt,yt,_t,kt,wt,jt,St,vt,Ct,Dt,It,At,Rt,Pt,Tt,Ft,zt,Xt,Yt;if(!ut||!ut.state||!ut.output||!ut.input&&0!==ut.avail_in)return be;ct=ut.state,ct.mode===Fe&&(ct.mode=ze),xt=ut.next_out,pt=ut.output,yt=ut.avail_out,mt=ut.next_in,gt=ut.input,bt=ut.avail_in,_t=ct.hold,kt=ct.bits,wt=bt,jt=yt,zt=me;inf_leave:for(;;)switch(ct.mode){case je:if(0===ct.wrap){ct.mode=ze;break}for(;16>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}if(2&ct.wrap&&35615===_t){ct.check=0,Mt[0]=255&_t,Mt[1]=255&_t>>>8,ct.check=se(ct.check,Mt,2,0),_t=0,kt=0,ct.mode=Se;break}if(ct.flags=0,ct.head&&(ct.head.done=!1),!(1&ct.wrap)||(((255&_t)<<8)+(_t>>8))%31){ut.msg='incorrect header check',ct.mode=Qe;break}if((15&_t)!=we){ut.msg='unknown compression method',ct.mode=Qe;break}if(_t>>>=4,kt-=4,Ft=(15&_t)+8,0===ct.wbits)ct.wbits=Ft;else if(Ft>ct.wbits){ut.msg='invalid window size',ct.mode=Qe;break}ct.dmax=1<<Ft,ut.adler=ct.check=1,ct.mode=512&_t?Pe:Fe,_t=0,kt=0;break;case Se:for(;16>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}if(ct.flags=_t,(255&ct.flags)!=we){ut.msg='unknown compression method',ct.mode=Qe;break}if(57344&ct.flags){ut.msg='unknown header flags set',ct.mode=Qe;break}ct.head&&(ct.head.text=1&_t>>8),512&ct.flags&&(Mt[0]=255&_t,Mt[1]=255&_t>>>8,ct.check=se(ct.check,Mt,2,0)),_t=0,kt=0,ct.mode=ve;case ve:for(;32>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}ct.head&&(ct.head.time=_t),512&ct.flags&&(Mt[0]=255&_t,Mt[1]=255&_t>>>8,Mt[2]=255&_t>>>16,Mt[3]=255&_t>>>24,ct.check=se(ct.check,Mt,4,0)),_t=0,kt=0,ct.mode=Ce;case Ce:for(;16>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}ct.head&&(ct.head.xflags=255&_t,ct.head.os=_t>>8),512&ct.flags&&(Mt[0]=255&_t,Mt[1]=255&_t>>>8,ct.check=se(ct.check,Mt,2,0)),_t=0,kt=0,ct.mode=Ee;case Ee:if(1024&ct.flags){for(;16>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}ct.length=_t,ct.head&&(ct.head.extra_len=_t),512&ct.flags&&(Mt[0]=255&_t,Mt[1]=255&_t>>>8,ct.check=se(ct.check,Mt,2,0)),_t=0,kt=0}else ct.head&&(ct.head.extra=null);ct.mode=De;case De:if(1024&ct.flags&&(St=ct.length,St>bt&&(St=bt),St&&(ct.head&&(Ft=ct.head.extra_len-ct.length,!ct.head.extra&&(ct.head.extra=Array(ct.head.extra_len)),ne.arraySet(ct.head.extra,gt,mt,St,Ft)),512&ct.flags&&(ct.check=se(ct.check,gt,St,mt)),bt-=St,mt+=St,ct.length-=St),ct.length))break inf_leave;ct.length=0,ct.mode=Ie;case Ie:if(2048&ct.flags){if(0===bt)break inf_leave;St=0;do Ft=gt[mt+St++],ct.head&&Ft&&65536>ct.length&&(ct.head.name+=_StringfromCharCode(Ft));while(Ft&&St<bt);if(512&ct.flags&&(ct.check=se(ct.check,gt,St,mt)),bt-=St,mt+=St,Ft)break inf_leave}else ct.head&&(ct.head.name=null);ct.length=0,ct.mode=Ae;case Ae:if(4096&ct.flags){if(0===bt)break inf_leave;St=0;do Ft=gt[mt+St++],ct.head&&Ft&&65536>ct.length&&(ct.head.comment+=_StringfromCharCode(Ft));while(Ft&&St<bt);if(512&ct.flags&&(ct.check=se(ct.check,gt,St,mt)),bt-=St,mt+=St,Ft)break inf_leave}else ct.head&&(ct.head.comment=null);ct.mode=Re;case Re:if(512&ct.flags){for(;16>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}if(_t!==(65535&ct.check)){ut.msg='header crc mismatch',ct.mode=Qe;break}_t=0,kt=0}ct.head&&(ct.head.hcrc=1&ct.flags>>9,ct.head.done=!0),ut.adler=ct.check=0,ct.mode=Fe;break;case Pe:for(;32>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}ut.adler=ct.check=R(_t),_t=0,kt=0,ct.mode=Te;case Te:if(0===ct.havedict)return ut.next_out=xt,ut.avail_out=yt,ut.next_in=mt,ut.avail_in=bt,ct.hold=_t,ct.bits=kt,2;ut.adler=ct.check=1,ct.mode=Fe;case Fe:if(ht===5||ht===pe)break inf_leave;case ze:if(ct.last){_t>>>=7&kt,kt-=7&kt,ct.mode=He;break}for(;3>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}switch(ct.last=1&_t,_t>>>=1,kt-=1,3&_t){case 0:ct.mode=Me;break;case 1:if(W(ct),ct.mode=Ue,ht===pe){_t>>>=2,kt-=2;break inf_leave}break;case 2:ct.mode=Ne;break;case 3:ut.msg='invalid block type',ct.mode=Qe;}_t>>>=2,kt-=2;break;case Me:for(_t>>>=7&kt,kt-=7&kt;32>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}if((65535&_t)!=(65535^_t>>>16)){ut.msg='invalid stored block lengths',ct.mode=Qe;break}if(ct.length=65535&_t,_t=0,kt=0,ct.mode=Xe,ht===pe)break inf_leave;case Xe:ct.mode=Ye;case Ye:if(St=ct.length,St){if(St>bt&&(St=bt),St>yt&&(St=yt),0===St)break inf_leave;ne.arraySet(pt,gt,mt,St,xt),bt-=St,mt+=St,yt-=St,xt+=St,ct.length-=St;break}ct.mode=Fe;break;case Ne:for(;14>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}if(ct.nlen=(31&_t)+257,_t>>>=5,kt-=5,ct.ndist=(31&_t)+1,_t>>>=5,kt-=5,ct.ncode=(15&_t)+4,_t>>>=4,kt-=4,286<ct.nlen||30<ct.ndist){ut.msg='too many length or distance symbols',ct.mode=Qe;break}ct.have=0,ct.mode=Oe;case Oe:for(;ct.have<ct.ncode;){for(;3>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}ct.lens[Nt[ct.have++]]=7&_t,_t>>>=3,kt-=3}for(;19>ct.have;)ct.lens[Nt[ct.have++]]=0;if(ct.lencode=ct.lendyn,ct.lenbits=7,Xt={bits:ct.lenbits},zt=le(0,ct.lens,0,19,ct.lencode,0,ct.work,Xt),ct.lenbits=Xt.bits,zt){ut.msg='invalid code lengths set',ct.mode=Qe;break}ct.have=0,ct.mode=Le;case Le:for(;ct.have<ct.nlen+ct.ndist;){for(;;){if(Et=ct.lencode[_t&(1<<ct.lenbits)-1],Dt=Et>>>24,It=255&Et>>>16,At=65535&Et,Dt<=kt)break;if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}if(16>At)_t>>>=Dt,kt-=Dt,ct.lens[ct.have++]=At;else{if(16===At){for(Yt=Dt+2;kt<Yt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}if(_t>>>=Dt,kt-=Dt,0===ct.have){ut.msg='invalid bit length repeat',ct.mode=Qe;break}Ft=ct.lens[ct.have-1],St=3+(3&_t),_t>>>=2,kt-=2}else if(17===At){for(Yt=Dt+3;kt<Yt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}_t>>>=Dt,kt-=Dt,Ft=0,St=3+(7&_t),_t>>>=3,kt-=3}else{for(Yt=Dt+7;kt<Yt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}_t>>>=Dt,kt-=Dt,Ft=0,St=11+(127&_t),_t>>>=7,kt-=7}if(ct.have+St>ct.nlen+ct.ndist){ut.msg='invalid bit length repeat',ct.mode=Qe;break}for(;St--;)ct.lens[ct.have++]=Ft}}if(ct.mode===Qe)break;if(0===ct.lens[256]){ut.msg='invalid code -- missing end-of-block',ct.mode=Qe;break}if(ct.lenbits=9,Xt={bits:ct.lenbits},zt=le(ue,ct.lens,0,ct.nlen,ct.lencode,0,ct.work,Xt),ct.lenbits=Xt.bits,zt){ut.msg='invalid literal/lengths set',ct.mode=Qe;break}if(ct.distbits=6,ct.distcode=ct.distdyn,Xt={bits:ct.distbits},zt=le(he,ct.lens,ct.nlen,ct.ndist,ct.distcode,0,ct.work,Xt),ct.distbits=Xt.bits,zt){ut.msg='invalid distances set',ct.mode=Qe;break}if(ct.mode=Ue,ht===pe)break inf_leave;case Ue:ct.mode=Be;case Be:if(6<=bt&&258<=yt){ut.next_out=xt,ut.avail_out=yt,ut.next_in=mt,ut.avail_in=bt,ct.hold=_t,ct.bits=kt,oe(ut,jt),xt=ut.next_out,pt=ut.output,yt=ut.avail_out,mt=ut.next_in,gt=ut.input,bt=ut.avail_in,_t=ct.hold,kt=ct.bits,ct.mode===Fe&&(ct.back=-1);break}for(ct.back=0;;){if(Et=ct.lencode[_t&(1<<ct.lenbits)-1],Dt=Et>>>24,It=255&Et>>>16,At=65535&Et,Dt<=kt)break;if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}if(It&&0==(240&It)){for(Rt=Dt,Pt=It,Tt=At;;){if(Et=ct.lencode[Tt+((_t&(1<<Rt+Pt)-1)>>Rt)],Dt=Et>>>24,It=255&Et>>>16,At=65535&Et,Rt+Dt<=kt)break;if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}_t>>>=Rt,kt-=Rt,ct.back+=Rt}if(_t>>>=Dt,kt-=Dt,ct.back+=Dt,ct.length=At,0===It){ct.mode=We;break}if(32&It){ct.back=-1,ct.mode=Fe;break}if(64&It){ut.msg='invalid literal/length code',ct.mode=Qe;break}ct.extra=15&It,ct.mode=Ve;case Ve:if(ct.extra){for(Yt=ct.extra;kt<Yt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}ct.length+=_t&(1<<ct.extra)-1,_t>>>=ct.extra,kt-=ct.extra,ct.back+=ct.extra}ct.was=ct.length,ct.mode=qe;case qe:for(;;){if(Et=ct.distcode[_t&(1<<ct.distbits)-1],Dt=Et>>>24,It=255&Et>>>16,At=65535&Et,Dt<=kt)break;if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}if(0==(240&It)){for(Rt=Dt,Pt=It,Tt=At;;){if(Et=ct.distcode[Tt+((_t&(1<<Rt+Pt)-1)>>Rt)],Dt=Et>>>24,It=255&Et>>>16,At=65535&Et,Rt+Dt<=kt)break;if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}_t>>>=Rt,kt-=Rt,ct.back+=Rt}if(_t>>>=Dt,kt-=Dt,ct.back+=Dt,64&It){ut.msg='invalid distance code',ct.mode=Qe;break}ct.offset=At,ct.extra=15&It,ct.mode=$e;case $e:if(ct.extra){for(Yt=ct.extra;kt<Yt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}ct.offset+=_t&(1<<ct.extra)-1,_t>>>=ct.extra,kt-=ct.extra,ct.back+=ct.extra}if(ct.offset>ct.dmax){ut.msg='invalid distance too far back',ct.mode=Qe;break}ct.mode=Ze;case Ze:if(0===yt)break inf_leave;if(St=jt-yt,ct.offset>St){if(St=ct.offset-St,St>ct.whave&&ct.sane){ut.msg='invalid distance too far back',ct.mode=Qe;break}St>ct.wnext?(St-=ct.wnext,vt=ct.wsize-St):vt=ct.wnext-St,St>ct.length&&(St=ct.length),Ct=ct.window}else Ct=pt,vt=xt-ct.offset,St=ct.length;St>yt&&(St=yt),yt-=St,ct.length-=St;do pt[xt++]=Ct[vt++];while(--St);0===ct.length&&(ct.mode=Be);break;case We:if(0===yt)break inf_leave;pt[xt++]=ct.length,yt--,ct.mode=Be;break;case He:if(ct.wrap){for(;32>kt;){if(0===bt)break inf_leave;bt--,_t|=gt[mt++]<<kt,kt+=8}if(jt-=yt,ut.total_out+=jt,ct.total+=jt,jt&&(ut.adler=ct.check=ct.flags?se(ct.check,pt,jt,xt-jt):ae(ct.check,pt,jt,xt-jt)),jt=yt,(ct.flags?_t:R(_t))!==ct.check){ut.msg='incorrect data check',ct.mode=Qe;break}_t=0,kt=0}ct.mode=Je;case Je:if(ct.wrap&&ct.flags){for(;32>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[mt++]<<kt,kt+=8}if(_t!==(4294967295&ct.total)){ut.msg='incorrect length check',ct.mode=Qe;break}_t=0,kt=0}ct.mode=Ke;case Ke:zt=1;break inf_leave;case Qe:zt=ye;break inf_leave;case Ge:return _e;case 32:default:return be;}return(ut.next_out=xt,ut.avail_out=yt,ut.next_in=mt,ut.avail_in=bt,ct.hold=_t,ct.bits=kt,(ct.wsize||jt!==ut.avail_out&&ct.mode<Qe&&(ct.mode<He||ht!==ce))&&K(ut,ut.output,ut.next_out,jt-ut.avail_out))?(ct.mode=Ge,_e):(wt-=ut.avail_in,jt-=ut.avail_out,ut.total_in+=wt,ut.total_out+=jt,ct.total+=jt,ct.wrap&&jt&&(ut.adler=ct.check=ct.flags?se(ct.check,pt,jt,ut.next_out-jt):ae(ct.check,pt,jt,ut.next_out-jt)),ut.data_type=ct.bits+(ct.last?64:0)+(ct.mode===Fe?128:0)+(ct.mode===Ue||ct.mode===Xe?256:0),(0===wt&&0===jt||ht===ce)&&zt===me&&(zt=-5),zt)},D.inflateEnd=function(ut){if(!ut||!ut.state)return be;var ht=ut.state;return ht.window&&(ht.window=null),ut.state=null,me},D.inflateGetHeader=function(ut,ht){var ct;return ut&&ut.state?(ct=ut.state,0==(2&ct.wrap))?be:(ct.head=ht,ht.done=!1,me):be},D.inflateSetDictionary=function(ut,ht){var ct=ht.length,gt,pt,mt;return ut&&ut.state?(gt=ut.state,0!==gt.wrap&&gt.mode!==Te)?be:gt.mode===Te&&(pt=1,pt=ae(pt,ht,ct,0),pt!==gt.check)?ye:(mt=K(ut,ht,ct,ct),mt)?(gt.mode=Ge,_e):(gt.havedict=1,me):be},D.inflateInfo='pako inflate (from Nodeca project)'},function(E,D,I){'use strict';var R=I(2),P=15,T=852,F=592,O=0,$=1,Z=2,W=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],K=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],G=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];E.exports=function(te,ne,ae,se,oe,le,de,ue){var he=ue.bits,ce=0,ge=0,pe=0,me=0,fe=0,xe=0,be=0,ye=0,_e=0,ke=0,Ee=null,De=0,Ae=new R.Buf16(P+1),Re=new R.Buf16(P+1),Pe=null,Te=0,we,je,Se,ve,Ce,Ie,Fe,ze,Me;for(ce=0;ce<=P;ce++)Ae[ce]=0;for(ge=0;ge<se;ge++)Ae[ne[ae+ge]]++;for(fe=he,me=P;1<=me&&0===Ae[me];me--);if(fe>me&&(fe=me),0==me)return oe[le++]=20971520,oe[le++]=20971520,ue.bits=1,0;for(pe=1;pe<me&&0===Ae[pe];pe++);for(fe<pe&&(fe=pe),ye=1,ce=1;ce<=P;ce++)if(ye<<=1,ye-=Ae[ce],0>ye)return-1;if(0<ye&&(te===O||1!=me))return-1;for(Re[1]=0,ce=1;ce<P;ce++)Re[ce+1]=Re[ce]+Ae[ce];for(ge=0;ge<se;ge++)0!==ne[ae+ge]&&(de[Re[ne[ae+ge]]++]=ge);if(te===O?(Ee=Pe=de,Ie=19):te===$?(Ee=W,De-=257,Pe=K,Te-=257,Ie=256):(Ee=Q,Pe=G,Ie=-1),ke=0,ge=0,ce=pe,Ce=le,xe=fe,be=0,Se=-1,_e=1<<fe,ve=_e-1,te===$&&_e>T||te===Z&&_e>F)return 1;for(;;){Fe=ce-be,de[ge]<Ie?(ze=0,Me=de[ge]):de[ge]>Ie?(ze=Pe[Te+de[ge]],Me=Ee[De+de[ge]]):(ze=96,Me=0),we=1<<ce-be,je=1<<xe,pe=je;do je-=we,oe[Ce+(ke>>be)+je]=0|(Fe<<24|ze<<16|Me);while(0!==je);for(we=1<<ce-1;ke&we;)we>>=1;if(0===we?ke=0:(ke&=we-1,ke+=we),ge++,0==--Ae[ce]){if(ce==me)break;ce=ne[ae+de[ge]]}if(ce>fe&&(ke&ve)!==Se){for(0==be&&(be=fe),Ce+=pe,xe=ce-be,ye=1<<xe;xe+be<me&&(ye-=Ae[xe+be],!(0>=ye));)xe++,ye<<=1;if(_e+=1<<xe,te===$&&_e>T||te===Z&&_e>F)return 1;Se=ke&ve,oe[Se]=0|(fe<<24|xe<<16|Ce-le)}}return 0!==ke&&(oe[Ce+ke]=0|(4194304|ce-be<<24)),ue.bits=fe,0}},function(E,D,I){'use strict';function R(at){for(var st=at.length;0<=--st;)at[st]=0}function P(at,st,ot,lt,ut){this.static_tree=at,this.extra_bits=st,this.extra_base=ot,this.elems=lt,this.max_length=ut,this.has_stree=at&&at.length}function T(at,st){this.dyn_tree=at,this.max_code=0,this.stat_desc=st}function F(at){return 256>at?Je[at]:Je[256+(at>>>7)]}function O(at,st){at.pending_buf[at.pending++]=255&st,at.pending_buf[at.pending++]=255&st>>>8}function $(at,st,ot){at.bi_valid>Xe-ot?(at.bi_buf|=65535&st<<at.bi_valid,O(at,at.bi_buf),at.bi_buf=st>>Xe-at.bi_valid,at.bi_valid+=ot-Xe):(at.bi_buf|=65535&st<<at.bi_valid,at.bi_valid+=ot)}function Z(at,st,ot){$(at,ot[2*st],ot[2*st+1])}function W(at,st){var ot=0;do ot|=1&at,at>>>=1,ot<<=1;while(0<--st);return ot>>>1}function K(at){16===at.bi_valid?(O(at,at.bi_buf),at.bi_buf=0,at.bi_valid=0):8<=at.bi_valid&&(at.pending_buf[at.pending++]=255&at.bi_buf,at.bi_buf>>=8,at.bi_valid-=8)}function Q(at,st){var ot=st.dyn_tree,lt=st.max_code,ut=st.stat_desc.static_tree,ht=st.stat_desc.has_stree,ct=st.stat_desc.extra_bits,gt=st.stat_desc.extra_base,pt=st.stat_desc.max_length,mt,xt,bt,yt,_t,kt,wt=0;for(yt=0;yt<=Me;yt++)at.bl_count[yt]=0;for(ot[2*at.heap[at.heap_max]+1]=0,mt=at.heap_max+1;mt<ze;mt++)(xt=at.heap[mt],yt=ot[2*ot[2*xt+1]+1]+1,yt>pt&&(yt=pt,wt++),ot[2*xt+1]=yt,!(xt>lt))&&(at.bl_count[yt]++,_t=0,xt>=gt&&(_t=ct[xt-gt]),kt=ot[2*xt],at.opt_len+=kt*(yt+_t),ht&&(at.static_len+=kt*(ut[2*xt+1]+_t)));if(0!=wt){do{for(yt=pt-1;0===at.bl_count[yt];)yt--;at.bl_count[yt]--,at.bl_count[yt+1]+=2,at.bl_count[pt]--,wt-=2}while(0<wt);for(yt=pt;0!==yt;yt--)for(xt=at.bl_count[yt];0!==xt;)(bt=at.heap[--mt],!(bt>lt))&&(ot[2*bt+1]!==yt&&(at.opt_len+=(yt-ot[2*bt+1])*ot[2*bt],ot[2*bt+1]=yt),xt--)}}function G(at,st,ot){var lt=Array(Me+1),ut=0,ht,ct;for(ht=1;ht<=Me;ht++)lt[ht]=ut=ut+ot[ht-1]<<1;for(ct=0;ct<=st;ct++){var gt=at[2*ct+1];0!==gt&&(at[2*ct]=W(lt[gt]++,gt))}}function ee(){var at,st,ot,lt,ut,ht=Array(Me+1);for(ot=0,lt=0;lt<Ae-1;lt++)for(Qe[lt]=ot,at=0;at<1<<Be[lt];at++)Ke[ot++]=lt;for(Ke[ot-1]=lt,ut=0,lt=0;16>lt;lt++)for(Ge[lt]=ut,at=0;at<1<<Ve[lt];at++)Je[ut++]=lt;for(ut>>=7;lt<Te;lt++)for(Ge[lt]=ut<<7,at=0;at<1<<Ve[lt]-7;at++)Je[256+ut++]=lt;for(st=0;st<=Me;st++)ht[st]=0;for(at=0;143>=at;)We[2*at+1]=8,at++,ht[8]++;for(;255>=at;)We[2*at+1]=9,at++,ht[9]++;for(;279>=at;)We[2*at+1]=7,at++,ht[7]++;for(;287>=at;)We[2*at+1]=8,at++,ht[8]++;for(G(We,Pe+1,ht),at=0;at<Te;at++)He[2*at+1]=5,He[2*at]=W(at,5);et=new P(We,Be,Re+1,Pe,Me),tt=new P(He,Ve,0,Te,Me),it=new P([],qe,0,Fe,Ye)}function te(at){var st;for(st=0;st<Pe;st++)at.dyn_ltree[2*st]=0;for(st=0;st<Te;st++)at.dyn_dtree[2*st]=0;for(st=0;st<Fe;st++)at.bl_tree[2*st]=0;at.dyn_ltree[2*Ne]=1,at.opt_len=at.static_len=0,at.last_lit=at.matches=0}function ne(at){8<at.bi_valid?O(at,at.bi_buf):0<at.bi_valid&&(at.pending_buf[at.pending++]=at.bi_buf),at.bi_buf=0,at.bi_valid=0}function ae(at,st,ot,lt){ne(at),lt&&(O(at,ot),O(at,~ot)),_e.arraySet(at.pending_buf,at.window,st,ot,at.pending),at.pending+=ot}function se(at,st,ot,lt){var ut=2*st,ht=2*ot;return at[ut]<at[ht]||at[ut]===at[ht]&&lt[st]<=lt[ot]}function oe(at,st,ot){for(var lt=at.heap[ot],ut=ot<<1;ut<=at.heap_len&&(ut<at.heap_len&&se(st,at.heap[ut+1],at.heap[ut],at.depth)&&ut++,!se(st,lt,at.heap[ut],at.depth));)at.heap[ot]=at.heap[ut],ot=ut,ut<<=1;at.heap[ot]=lt}function le(at,st,ot){var lt,ut,ht=0,ct,gt;if(0!==at.last_lit)do lt=at.pending_buf[at.d_buf+2*ht]<<8|at.pending_buf[at.d_buf+2*ht+1],ut=at.pending_buf[at.l_buf+ht],ht++,0===lt?Z(at,ut,st):(ct=Ke[ut],Z(at,ct+Re+1,st),gt=Be[ct],0!==gt&&(ut-=Qe[ct],$(at,ut,gt)),lt--,ct=F(lt),Z(at,ct,ot),gt=Ve[ct],0!==gt&&(lt-=Ge[ct],$(at,lt,gt)));while(ht<at.last_lit);Z(at,Ne,st)}function de(at,st){var ot=st.dyn_tree,lt=st.stat_desc.static_tree,ut=st.stat_desc.has_stree,ht=st.stat_desc.elems,ct,gt,pt=-1,mt;for(at.heap_len=0,at.heap_max=ze,ct=0;ct<ht;ct++)0===ot[2*ct]?ot[2*ct+1]=0:(at.heap[++at.heap_len]=pt=ct,at.depth[ct]=0);for(;2>at.heap_len;)mt=at.heap[++at.heap_len]=2>pt?++pt:0,ot[2*mt]=1,at.depth[mt]=0,at.opt_len--,ut&&(at.static_len-=lt[2*mt+1]);for(st.max_code=pt,ct=at.heap_len>>1;1<=ct;ct--)oe(at,ot,ct);mt=ht;do ct=at.heap[1],at.heap[1]=at.heap[at.heap_len--],oe(at,ot,1),gt=at.heap[1],at.heap[--at.heap_max]=ct,at.heap[--at.heap_max]=gt,ot[2*mt]=ot[2*ct]+ot[2*gt],at.depth[mt]=(at.depth[ct]>=at.depth[gt]?at.depth[ct]:at.depth[gt])+1,ot[2*ct+1]=ot[2*gt+1]=mt,at.heap[1]=mt++,oe(at,ot,1);while(2<=at.heap_len);at.heap[--at.heap_max]=at.heap[1],Q(at,st),G(ot,pt,at.bl_count)}function ue(at,st,ot){var lt,ut=-1,ht,ct=st[1],gt=0,pt=7,mt=4;for(0===ct&&(pt=138,mt=3),st[2*(ot+1)+1]=65535,lt=0;lt<=ot;lt++){if(ht=ct,ct=st[2*(lt+1)+1],++gt<pt&&ht===ct)continue;else gt<mt?at.bl_tree[2*ht]+=gt:0===ht?10>=gt?at.bl_tree[2*Le]++:at.bl_tree[2*Ue]++:(ht!==ut&&at.bl_tree[2*ht]++,at.bl_tree[2*Oe]++);gt=0,ut=ht,0===ct?(pt=138,mt=3):ht===ct?(pt=6,mt=3):(pt=7,mt=4)}}function he(at,st,ot){var lt,ut=-1,ht,ct=st[1],gt=0,pt=7,mt=4;for(0===ct&&(pt=138,mt=3),lt=0;lt<=ot;lt++){if(ht=ct,ct=st[2*(lt+1)+1],++gt<pt&&ht===ct)continue;else if(gt<mt)do Z(at,ht,at.bl_tree);while(0!=--gt);else 0===ht?10>=gt?(Z(at,Le,at.bl_tree),$(at,gt-3,3)):(Z(at,Ue,at.bl_tree),$(at,gt-11,7)):(ht!==ut&&(Z(at,ht,at.bl_tree),gt--),Z(at,Oe,at.bl_tree),$(at,gt-3,2));gt=0,ut=ht,0===ct?(pt=138,mt=3):ht===ct?(pt=6,mt=3):(pt=7,mt=4)}}function ce(at){var st;for(ue(at,at.dyn_ltree,at.l_desc.max_code),ue(at,at.dyn_dtree,at.d_desc.max_code),de(at,at.bl_desc),st=Fe-1;3<=st&&0===at.bl_tree[2*$e[st]+1];st--);return at.opt_len+=3*(st+1)+5+5+4,st}function ge(at,st,ot,lt){var ut;for($(at,st-257,5),$(at,ot-1,5),$(at,lt-4,4),ut=0;ut<lt;ut++)$(at,at.bl_tree[2*$e[ut]+1],3);he(at,at.dyn_ltree,st-1),he(at,at.dyn_dtree,ot-1)}function pe(at){var st=4093624447,ot;for(ot=0;31>=ot;ot++,st>>>=1)if(1&st&&0!==at.dyn_ltree[2*ot])return we;if(0!==at.dyn_ltree[18]||0!==at.dyn_ltree[20]||0!==at.dyn_ltree[26])return je;for(ot=32;ot<Re;ot++)if(0!==at.dyn_ltree[2*ot])return je;return we}function fe(at,st,ot,lt){$(at,(ve<<1)+(lt?1:0),3),ae(at,st,ot,!0)}var _e=I(2),we=0,je=1,ve=0,Ce=1,Ae=29,Re=256,Pe=Re+1+Ae,Te=30,Fe=19,ze=2*Pe+1,Me=15,Xe=16,Ye=7,Ne=256,Oe=16,Le=17,Ue=18,Be=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ve=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],We=Array(2*(Pe+2));R(We);var He=Array(2*Te);R(He);var Je=Array(512);R(Je);var Ke=Array(258-3+1);R(Ke);var Qe=Array(Ae);R(Qe);var Ge=Array(Te);R(Ge);var et,tt,it,nt=!1;D._tr_init=function(at){nt||(ee(),nt=!0),at.l_desc=new T(at.dyn_ltree,et),at.d_desc=new T(at.dyn_dtree,tt),at.bl_desc=new T(at.bl_tree,it),at.bi_buf=0,at.bi_valid=0,te(at)},D._tr_stored_block=fe,D._tr_flush_block=function(at,st,ot,lt){var ut,ht,ct=0;0<at.level?(at.strm.data_type===2&&(at.strm.data_type=pe(at)),de(at,at.l_desc),de(at,at.d_desc),ct=ce(at),ut=at.opt_len+3+7>>>3,ht=at.static_len+3+7>>>3,ht<=ut&&(ut=ht)):ut=ht=ot+5,ot+4<=ut&&-1!==st?fe(at,st,ot,lt):at.strategy===4||ht===ut?($(at,(Ce<<1)+(lt?1:0),3),le(at,We,He)):($(at,(2<<1)+(lt?1:0),3),ge(at,at.l_desc.max_code+1,at.d_desc.max_code+1,ct+1),le(at,at.dyn_ltree,at.dyn_dtree)),te(at),lt&&ne(at)},D._tr_tally=function(at,st,ot){return at.pending_buf[at.d_buf+2*at.last_lit]=255&st>>>8,at.pending_buf[at.d_buf+2*at.last_lit+1]=255&st,at.pending_buf[at.l_buf+at.last_lit]=255&ot,at.last_lit++,0===st?at.dyn_ltree[2*ot]++:(at.matches++,st--,at.dyn_ltree[2*(Ke[ot]+Re+1)]++,at.dyn_dtree[2*F(st)]++),at.last_lit===at.lit_bufsize-1},D._tr_align=function(at){$(at,Ce<<1,3),Z(at,Ne,We),K(at)}},function(E){function I(){throw new Error('setTimeout has not been defined')}function R(){throw new Error('clearTimeout has not been defined')}function P(ae){if(K===setTimeout)return setTimeout(ae,0);if((K===I||!K)&&setTimeout)return K=setTimeout,setTimeout(ae,0);try{return K(ae,0)}catch(se){try{return K.call(null,ae,0)}catch(oe){return K.call(this,ae,0)}}}function T(ae){if(Q===clearTimeout)return clearTimeout(ae);if((Q===R||!Q)&&clearTimeout)return Q=clearTimeout,clearTimeout(ae);try{return Q(ae)}catch(se){try{return Q.call(null,ae)}catch(oe){return Q.call(this,ae)}}}function F(){ee&&te&&(ee=!1,te.length?G=te.concat(G):ne=-1,G.length&&O())}function O(){if(!ee){var ae=P(F);ee=!0;for(var se=G.length;se;){for(te=G,G=[];++ne<se;)te&&te[ne].run();ne=-1,se=G.length}te=null,ee=!1,T(ae)}}function $(ae,se){this.fun=ae,this.array=se}function Z(){}var W=E.exports={},K,Q;(function(){try{K='function'==typeof setTimeout?setTimeout:I}catch(ae){K=I}try{Q='function'==typeof clearTimeout?clearTimeout:R}catch(ae){Q=R}})();var G=[],ee=!1,te,ne=-1;W.nextTick=function(ae){var se=Array(arguments.length-1);if(1<arguments.length)for(var oe=1;oe<arguments.length;oe++)se[oe-1]=arguments[oe];G.push(new $(ae,se)),1!==G.length||ee||P(O)},$.prototype.run=function(){this.fun.apply(null,this.array)},W.title='browser',W.browser=!0,W.env={},W.argv=[],W.version='',W.versions={},W.on=Z,W.addListener=Z,W.once=Z,W.off=Z,W.removeListener=Z,W.removeAllListeners=Z,W.emit=Z,W.binding=function(){throw new Error('process.binding is not supported')},W.cwd=function(){return'/'},W.chdir=function(){throw new Error('process.chdir is not supported')},W.umask=function(){return 0}},function(E){E.exports='function'==typeof Object.create?function(R,P){R.super_=P,R.prototype=Object.create(P.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}})}:function(R,P){R.super_=P;var T=function(){};T.prototype=P.prototype,R.prototype=new T,R.prototype.constructor=R}},function(E){E.exports=function(R){return R&&'object'==typeof R&&'function'==typeof R.copy&&'function'==typeof R.fill&&'function'==typeof R.readUInt8}},function(E,D,I){(function(R,P){function T(ve,Ce){var Ee={seen:[],stylize:O};return 3<=arguments.length&&(Ee.depth=arguments[2]),4<=arguments.length&&(Ee.colors=arguments[3]),ne(Ce)?Ee.showHidden=Ce:Ce&&D._extend(Ee,Ce),ue(Ee.showHidden)&&(Ee.showHidden=!1),ue(Ee.depth)&&(Ee.depth=2),ue(Ee.colors)&&(Ee.colors=!1),ue(Ee.customInspect)&&(Ee.customInspect=!0),Ee.colors&&(Ee.stylize=F),Z(Ee,ve,Ee.depth)}function F(ve,Ce){var Ee=T.styles[Ce];return Ee?'\x1B['+T.colors[Ee][0]+'m'+ve+'\x1B['+T.colors[Ee][1]+'m':ve}function O(ve){return ve}function $(ve){var Ce={};return ve.forEach(function(Ee){Ce[Ee]=!0}),Ce}function Z(ve,Ce,Ee){if(ve.customInspect&&Ce&&me(Ce.inspect)&&Ce.inspect!==D.inspect&&!(Ce.constructor&&Ce.constructor.prototype===Ce)){var De=Ce.inspect(Ee,ve);return le(De)||(De=Z(ve,De,Ee)),De}var Ie=W(ve,Ce);if(Ie)return Ie;var Ae=Object.keys(Ce),Re=$(Ae);if(ve.showHidden&&(Ae=Object.getOwnPropertyNames(Ce)),pe(Ce)&&(0<=Ae.indexOf('message')||0<=Ae.indexOf('description')))return K(Ce);if(0===Ae.length){if(me(Ce)){var Pe=Ce.name?': '+Ce.name:'';return ve.stylize('[Function'+Pe+']','special')}if(he(Ce))return ve.stylize(RegExp.prototype.toString.call(Ce),'regexp');if(ge(Ce))return ve.stylize(Date.prototype.toString.call(Ce),'date');if(pe(Ce))return K(Ce)}var Te='',Fe=!1,ze=['{','}'];if(te(Ce)&&(Fe=!0,ze=['[',']']),me(Ce)){var Me=Ce.name?': '+Ce.name:'';Te=' [Function'+Me+']'}if(he(Ce)&&(Te=' '+RegExp.prototype.toString.call(Ce)),ge(Ce)&&(Te=' '+Date.prototype.toUTCString.call(Ce)),pe(Ce)&&(Te=' '+K(Ce)),0===Ae.length&&(!Fe||0==Ce.length))return ze[0]+Te+ze[1];if(0>Ee)return he(Ce)?ve.stylize(RegExp.prototype.toString.call(Ce),'regexp'):ve.stylize('[Object]','special');ve.seen.push(Ce);var Xe;return Xe=Fe?Q(ve,Ce,Ee,Re,Ae):Ae.map(function(Ye){return G(ve,Ce,Ee,Re,Ye,Fe)}),ve.seen.pop(),ee(Xe,Te,ze)}function W(ve,Ce){if(ue(Ce))return ve.stylize('undefined','undefined');if(le(Ce)){var Ee='\''+JSON.stringify(Ce).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return ve.stylize(Ee,'string')}return oe(Ce)?ve.stylize(''+Ce,'number'):ne(Ce)?ve.stylize(''+Ce,'boolean'):ae(Ce)?ve.stylize('null','null'):void 0}function K(ve){return'['+Error.prototype.toString.call(ve)+']'}function Q(ve,Ce,Ee,De,Ie){for(var Ae=[],Re=0,Pe=Ce.length;Re<Pe;++Re)_e(Ce,Re+'')?Ae.push(G(ve,Ce,Ee,De,Re+'',!0)):Ae.push('');return Ie.forEach(function(Te){Te.match(/^\d+$/)||Ae.push(G(ve,Ce,Ee,De,Te,!0))}),Ae}function G(ve,Ce,Ee,De,Ie,Ae){var Re,Pe,Te;if(Te=Object.getOwnPropertyDescriptor(Ce,Ie)||{value:Ce[Ie]},Te.get?Te.set?Pe=ve.stylize('[Getter/Setter]','special'):Pe=ve.stylize('[Getter]','special'):Te.set&&(Pe=ve.stylize('[Setter]','special')),_e(De,Ie)||(Re='['+Ie+']'),Pe||(0>ve.seen.indexOf(Te.value)?(Pe=ae(Ee)?Z(ve,Te.value,null):Z(ve,Te.value,Ee-1),-1<Pe.indexOf('\n')&&(Ae?Pe=Pe.split('\n').map(function(Fe){return'  '+Fe}).join('\n').substr(2):Pe='\n'+Pe.split('\n').map(function(Fe){return'   '+Fe}).join('\n'))):Pe=ve.stylize('[Circular]','special')),ue(Re)){if(Ae&&Ie.match(/^\d+$/))return Pe;Re=JSON.stringify(''+Ie),Re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Re=Re.substr(1,Re.length-2),Re=ve.stylize(Re,'name')):(Re=Re.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),Re=ve.stylize(Re,'string'))}return Re+': '+Pe}function ee(ve,Ce,Ee){var De=0,Ie=ve.reduce(function(Ae,Re){return De++,0<=Re.indexOf('\n')&&De++,Ae+Re.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<Ie?Ee[0]+(''===Ce?'':Ce+'\n ')+' '+ve.join(',\n  ')+' '+Ee[1]:Ee[0]+Ce+' '+ve.join(', ')+' '+Ee[1]}function te(ve){return Array.isArray(ve)}function ne(ve){return'boolean'==typeof ve}function ae(ve){return null===ve}function oe(ve){return'number'==typeof ve}function le(ve){return'string'==typeof ve}function ue(ve){return void 0===ve}function he(ve){return ce(ve)&&'[object RegExp]'===xe(ve)}function ce(ve){return'object'==typeof ve&&null!==ve}function ge(ve){return ce(ve)&&'[object Date]'===xe(ve)}function pe(ve){return ce(ve)&&('[object Error]'===xe(ve)||ve instanceof Error)}function me(ve){return'function'==typeof ve}function xe(ve){return Object.prototype.toString.call(ve)}function be(ve){return 10>ve?'0'+ve.toString(10):ve.toString(10)}function ye(){var ve=new Date,Ce=[be(ve.getHours()),be(ve.getMinutes()),be(ve.getSeconds())].join(':');return[ve.getDate(),Se[ve.getMonth()],Ce].join(' ')}function _e(ve,Ce){return Object.prototype.hasOwnProperty.call(ve,Ce)}var ke=/%[sdj%]/g;D.format=function(ve){if(!le(ve)){for(var Ce=[],Ee=0;Ee<arguments.length;Ee++)Ce.push(T(arguments[Ee]));return Ce.join(' ')}for(var Ee=1,De=arguments,Ie=De.length,Ae=(ve+'').replace(ke,function(Pe){if('%%'===Pe)return'%';if(Ee>=Ie)return Pe;switch(Pe){case'%s':return De[Ee++]+'';case'%d':return+De[Ee++];case'%j':try{return JSON.stringify(De[Ee++])}catch(Te){return'[Circular]'}default:return Pe;}}),Re=De[Ee];Ee<Ie;Re=De[++Ee])Ae+=ae(Re)||!ce(Re)?' '+Re:' '+T(Re);return Ae},D.deprecate=function(ve,Ce){if(ue(R.process))return function(){return D.deprecate(ve,Ce).apply(this,arguments)};if(!0===P.noDeprecation)return ve;var De=!1;return function(){if(!De){if(P.throwDeprecation)throw new Error(Ce);else P.traceDeprecation?console.trace(Ce):console.error(Ce);De=!0}return ve.apply(this,arguments)}};var we={},je;D.debuglog=function(ve){if(ue(je)&&(je=P.env.NODE_DEBUG||''),ve=ve.toUpperCase(),!we[ve])if(new RegExp('\\b'+ve+'\\b','i').test(je)){var Ce=P.pid;we[ve]=function(){var Ee=D.format.apply(D,arguments);console.error('%s %d: %s',ve,Ce,Ee)}}else we[ve]=function(){};return we[ve]},D.inspect=T,T.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},T.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey','null':'bold',string:'green',date:'magenta',regexp:'red'},D.isArray=te,D.isBoolean=ne,D.isNull=ae,D.isNullOrUndefined=function(ve){return null==ve},D.isNumber=oe,D.isString=le,D.isSymbol=function(ve){return'symbol'==typeof ve},D.isUndefined=ue,D.isRegExp=he,D.isObject=ce,D.isDate=ge,D.isError=pe,D.isFunction=me,D.isPrimitive=function(ve){return null===ve||'boolean'==typeof ve||'number'==typeof ve||'string'==typeof ve||'symbol'==typeof ve||'undefined'==typeof ve},D.isBuffer=I(149);var Se=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];D.log=function(){console.log('%s - %s',ye(),D.format.apply(D,arguments))},D.inherits=I(148),D._extend=function(ve,Ce){if(!Ce||!ce(Ce))return ve;for(var Ee=Object.keys(Ce),De=Ee.length;De--;)ve[Ee[De]]=Ce[Ee[De]];return ve}}).call(D,I(57),I(147))},function(E){E.exports={name:'spectra-data',version:'3.0.4',description:'spectra-data project - manipulate spectra',keywords:['spectra-data','project'],author:'Andres Castillo',contributors:['Micha\xEBl Zasso','Luc Patiny'],repository:'cheminfo-js/spectra-data',bugs:{url:'https://github.com/cheminfo-js/spectra-data/issues'},homepage:'https://github.com/cheminfo-js/spectra-data',license:'MIT',main:'./src/index.js',scripts:{eslint:'eslint src test --cache','eslint-fix':'npm run eslint -- --fix',test:'npm run test-mocha','test-mocha':'mocha --require should --reporter mocha-better-spec-reporter --recursive src/**/__tests__/**/*.js',build:'cheminfo build'},devDependencies:{'cheminfo-tools':'^1.13.0',eslint:'^3.9.1','eslint-config-cheminfo':'^1.5.2','eslint-plugin-no-only-tests':'^1.1.0',mocha:'^3.1.2','mocha-better-spec-reporter':'^3.0.1',should:'^11.1.1'},dependencies:{brukerconverter:'^1.0.1',jcampconverter:'^2.4.5','ml-array-utils':'^0.3.0','ml-curve-fitting':'0.0.7','ml-gsd':'^2.0.1','ml-matrix-peaks-finder':'^0.2.1','ml-simple-clustering':'0.1.0','ml-stat':'^1.3.0','nmr-simulation':'^1.0.0'}}},function(E,D,I){'use strict';D.SD=I(9),D.NMR=I(58),D.NMR2D=I(59),D.Ranges=I(21)}])});
//# sourceMappingURL=spectra-data.min.js.map