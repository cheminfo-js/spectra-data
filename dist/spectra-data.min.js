(function(D,I){'object'==typeof exports&&'object'==typeof module?module.exports=I():'function'==typeof define&&define.amd?define([],I):'object'==typeof exports?exports.spectraData=I():D.spectraData=I()})(this,function(){return function(E){function D(P){if(I[P])return I[P].exports;var R=I[P]={i:P,l:!1,exports:{}};return E[P].call(R.exports,R,R.exports,D),R.l=!0,R.exports}var I={};return D.m=E,D.c=I,D.i=function(P){return P},D.d=function(P,R,T){D.o(P,R)||Object.defineProperty(P,R,{configurable:!1,enumerable:!0,get:T})},D.n=function(P){var R=P&&P.__esModule?function(){return P['default']}:function(){return P};return D.d(R,'a',R),R},D.o=function(P,R){return Object.prototype.hasOwnProperty.call(P,R)},D.p='',D(D.s=146)}([function(E,D,I){'use strict';function P(K){return K}function R(K,Q){for(var G=0;G<K.length;++G)Q[G]=255&K.charCodeAt(G);return Q}function T(K){var Q=65536,G=[],ee=K.length,te=D.getTypeOf(K),ne=0,ae=!0;try{'uint8array'===te?String.fromCharCode.apply(null,new Uint8Array(0)):'nodebuffer'===te?String.fromCharCode.apply(null,Z(0)):void 0}catch(le){ae=!1}if(!ae){for(var se='',oe=0;oe<K.length;oe++)se+=String.fromCharCode(K[oe]);return se}for(;ne<ee&&1<Q;)try{'array'===te||'nodebuffer'===te?G.push(String.fromCharCode.apply(null,K.slice(ne,Math.min(ne+Q,ee)))):G.push(String.fromCharCode.apply(null,K.subarray(ne,Math.min(ne+Q,ee)))),ne+=Q}catch(le){Q=Math.floor(Q/2)}return G.join('')}function F(K,Q){for(var G=0;G<K.length;G++)Q[G]=K[G];return Q}var O=I(5),$=I(9),Z=I(10);D.string2binary=function(K){for(var Q='',G=0;G<K.length;G++)Q+=String.fromCharCode(255&K.charCodeAt(G));return Q},D.arrayBuffer2Blob=function(K,Q){D.checkSupport('blob'),Q=Q||'application/zip';try{return new Blob([K],{type:Q})}catch(te){try{var G=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,ee=new G;return ee.append(K),ee.getBlob(Q)}catch(ne){throw new Error('Bug : can\'t construct the Blob.')}}},D.applyFromCharCode=T;var W={};W.string={string:P,array:function(K){return R(K,Array(K.length))},arraybuffer:function(K){return W.string.uint8array(K).buffer},uint8array:function(K){return R(K,new Uint8Array(K.length))},nodebuffer:function(K){return R(K,Z(K.length))}},W.array={string:T,array:P,arraybuffer:function(K){return new Uint8Array(K).buffer},uint8array:function(K){return new Uint8Array(K)},nodebuffer:function(K){return Z(K)}},W.arraybuffer={string:function(K){return T(new Uint8Array(K))},array:function(K){return F(new Uint8Array(K),Array(K.byteLength))},arraybuffer:P,uint8array:function(K){return new Uint8Array(K)},nodebuffer:function(K){return Z(new Uint8Array(K))}},W.uint8array={string:T,array:function(K){return F(K,Array(K.length))},arraybuffer:function(K){return K.buffer},uint8array:P,nodebuffer:function(K){return Z(K)}},W.nodebuffer={string:T,array:function(K){return F(K,Array(K.length))},arraybuffer:function(K){return W.nodebuffer.uint8array(K).buffer},uint8array:function(K){return F(K,new Uint8Array(K.length))},nodebuffer:P},D.transformTo=function(K,Q){if(Q||(Q=''),!K)return Q;D.checkSupport(K);var G=D.getTypeOf(Q),ee=W[G][K](Q);return ee},D.getTypeOf=function(K){return'string'==typeof K?'string':'[object Array]'===Object.prototype.toString.call(K)?'array':O.nodebuffer&&Z.test(K)?'nodebuffer':O.uint8array&&K instanceof Uint8Array?'uint8array':O.arraybuffer&&K instanceof ArrayBuffer?'arraybuffer':void 0},D.checkSupport=function(K){var Q=O[K.toLowerCase()];if(!Q)throw new Error(K+' is not supported by this browser')},D.MAX_VALUE_16BITS=65535,D.MAX_VALUE_32BITS=-1,D.pretty=function(K){var Q='',G,ee;for(ee=0;ee<(K||'').length;ee++)G=K.charCodeAt(ee),Q+='\\x'+(16>G?'0':'')+G.toString(16).toUpperCase();return Q},D.findCompression=function(K){for(var Q in $)if($.hasOwnProperty(Q)&&$[Q].magic===K)return $[Q];return null},D.isRegExp=function(K){return'[object RegExp]'===Object.prototype.toString.call(K)},D.extend=function(){var K={},Q,G;for(Q=0;Q<arguments.length;Q++)for(G in arguments[Q])arguments[Q].hasOwnProperty(G)&&'undefined'==typeof K[G]&&(K[G]=arguments[Q][G]);return K}},function(E,D){'use strict';var P='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Int32Array;D.assign=function(F){for(var O=Array.prototype.slice.call(arguments,1),$;O.length;)if($=O.shift(),!!$){if('object'!=typeof $)throw new TypeError($+'must be non-object');for(var Z in $)$.hasOwnProperty(Z)&&(F[Z]=$[Z])}return F},D.shrinkBuf=function(F,O){return F.length===O?F:F.subarray?F.subarray(0,O):(F.length=O,F)};var R={arraySet:function(F,O,$,Z,W){if(O.subarray&&F.subarray)return void F.set(O.subarray($,$+Z),W);for(var K=0;K<Z;K++)F[W+K]=O[$+K]},flattenChunks:function(F){var O,$,Z,W,K,Q;for(Z=0,O=0,$=F.length;O<$;O++)Z+=F[O].length;for(Q=new Uint8Array(Z),W=0,(O=0,$=F.length);O<$;O++)K=F[O],Q.set(K,W),W+=K.length;return Q}},T={arraySet:function(F,O,$,Z,W){for(var K=0;K<Z;K++)F[W+K]=O[$+K]},flattenChunks:function(F){return[].concat.apply([],F)}};D.setTyped=function(F){F?(D.Buf8=Uint8Array,D.Buf16=Uint16Array,D.Buf32=Int32Array,D.assign(D,R)):(D.Buf8=Array,D.Buf16=Array,D.Buf32=Array,D.assign(D,T))},D.setTyped(P)},function(E){'use strict';function P(O){for(var $=0,Z=O.length,W=Array(Z);$<Z;$++)W[$]=O[$];return W}function R(O,$){var Z=0,Q,G;if(Array.isArray(O)){if(G=$,Q=G?P(O):O,O=Q.length,$=Q[0].length,'undefined'==typeof $)throw new TypeError('Data must be a 2D array');if(0<O&&0<$){for(;Z<O;Z++)if(Q[Z].length!==$)throw new RangeError('Inconsistent array dimensions');else G&&(Q[Z]=P(Q[Z]));}else throw new RangeError('Invalid dimensions: '+O+'x'+$)}else if('number'!=typeof O)throw new TypeError('Invalid arguments');else if(0<O&&0<$)for(Q=Array(O);Z<O;Z++)Q[Z]=Array($);else throw new RangeError('Invalid dimensions: '+O+'x'+$);return Object.defineProperty(Q,'rows',{writable:!0,value:O}),Object.defineProperty(Q,'columns',{writable:!0,value:$}),Q.__proto__=R.prototype,Q}var T=Array.prototype.splice,F=Array.prototype.concat;R.from1DArray=function($,Z,W){var G=0,K,Q;if(K=$*Z,K!==W.length)throw new RangeError('Data length does not match given dimensions');for(Q=Array($);G<$;G++)Q[G]=W.slice(G*Z,(G+1)*Z);return new R(Q)},R.rowVector=function($){return new R([$])},R.columnVector=function($){for(var Z=$.length,W=Array(Z),K=0;K<Z;K++)W[K]=[$[K]];return new R(W)},R.empty=function($,Z){return new R($,Z)},R.zeros=function($,Z){return R.empty($,Z).fill(0)},R.ones=function($,Z){return R.empty($,Z).fill(1)},R.rand=function($,Z){for(var W=R.empty($,Z),K=0,Q=W.rows;K<Q;K++)for(var G=0,ee=W.columns;G<ee;G++)W[K][G]=Math.random();return W},R.eye=function($){for(var Z=R.zeros($,$),W=Z.rows,K=0;K<W;K++)Z[K][K]=1;return Z},R.diag=function($){for(var Z=$.length,W=R.zeros(Z,Z),K=0;K<Z;K++)W[K][K]=$[K];return W},R.indices=function($,Z){for(var W=Array(Z-$),K=0;K<W.length;K++)W[K]=$++;return W},R.stack=function($){var Z,W,K;if(R.isMatrix($)){var Q=0,G=0;for(Z=0;Z<arguments.length;Z++)Q+=arguments[Z].rows,arguments[Z].columns>G&&(G=arguments[Z].columns);var ee=R.zeros(Q,G),te=0;for(Z=0;Z<arguments.length;Z++){var ne=arguments[Z];for(W=0;W<ne.rows;W++){for(K=0;K<ne.columns;K++)ee[te][K]=ne[W][K];te++}}return ee}if(Array.isArray($)){var ae=R.empty(arguments.length,$.length);for(Z=0;Z<arguments.length;Z++)ae.setRow(Z,arguments[Z]);return ae}},R.expand=function($,Z){for(var W=[],K=0;K<Z.length;K++)for(var Q=0;Q<Z[K];Q++)W.push($[K]);return new R(W)},R.checkMatrix=function($){if(!$)throw new TypeError('Argument has to be a matrix');return'Matrix'!==$.klass&&($=new R($)),$},R.isMatrix=function($){return!!$&&'Matrix'===$.klass},Object.defineProperty(R.prototype,'klass',{get:function(){return'Matrix'}}),Object.defineProperty(R.prototype,'size',{get:function(){return this.rows*this.columns}}),R.prototype.checkRowIndex=function($){if(0>$||$>this.rows-1)throw new RangeError('Row index out of range.')},R.prototype.checkColumnIndex=function($){if(0>$||$>this.columns-1)throw new RangeError('Column index out of range.')},R.prototype.checkDimensions=function($){if(this.rows!==$.rows||this.columns!==$.columns)throw new RangeError('Matrices dimensions must be equal.')},R.prototype.apply=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$.call(this,K,Q);return this},R.prototype.clone=function(){return new R(this.to2DArray())},R.prototype.to1DArray=function(){return F.apply([],this)},R.prototype.to2DArray=function(){for(var $=this.rows,Z=Array($),W=0;W<$;W++)Z[W]=P(this[W]);return Z},R.prototype.isRowVector=function(){return 1===this.rows},R.prototype.isColumnVector=function(){return 1===this.columns},R.prototype.isVector=function(){return 1===this.rows||1===this.columns},R.prototype.isSquare=function(){return this.rows===this.columns},R.prototype.isSymmetric=function(){if(this.isSquare()){for(var $=this.rows,Z=0;Z<$;Z++)for(var W=0;W<=Z;W++)if(this[Z][W]!==this[W][Z])return!1;return!0}return!1},R.prototype.set=function($,Z,W){return this[$][Z]=W,this},R.prototype.get=function($,Z){return this[$][Z]},R.prototype.fill=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]=$;return this},R.prototype.neg=function(){return this.mulS(-1)},R.prototype.add=function($){return'number'==typeof $?this.addS($):($=R.checkMatrix($),this.addM($))},R.prototype.addS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$;return this},R.prototype.addM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$[K][Q];return this},R.prototype.sub=function($){return'number'==typeof $?this.subS($):($=R.checkMatrix($),this.subM($))},R.prototype.subS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$;return this},R.prototype.subM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$[K][Q];return this},R.prototype.mul=function($){return'number'==typeof $?this.mulS($):($=R.checkMatrix($),this.mulM($))},R.prototype.mulS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$;return this},R.prototype.mulM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$[K][Q];return this},R.prototype.div=function($){return'number'==typeof $?this.divS($):($=R.checkMatrix($),this.divM($))},R.prototype.divS=function($){for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$;return this},R.prototype.divM=function($){this.checkDimensions($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$[K][Q];return this},R.prototype.getRow=function($){return this.checkRowIndex($),P(this[$])},R.prototype.getRowVector=function($){return R.rowVector(this.getRow($))},R.prototype.setRow=function($,Z){if(this.checkRowIndex($),R.isMatrix(Z)&&(Z=Z.to1DArray()),Z.length!==this.columns)throw new RangeError('Invalid row size');return this[$]=P(Z),this},R.prototype.removeRow=function($){if(this.checkRowIndex($),1===this.rows)throw new RangeError('A matrix cannot have less than one row');return T.call(this,$,1),this.rows-=1,this},R.prototype.addRow=function($,Z){if('undefined'==typeof Z&&(Z=$,$=this.rows),0>$||$>this.rows)throw new RangeError('Row index out of range.');if(R.isMatrix(Z)&&(Z=Z.to1DArray()),Z.length!==this.columns)throw new RangeError('Invalid row size');return T.call(this,$,0,P(Z)),this.rows+=1,this},R.prototype.swapRows=function($,Z){this.checkRowIndex($),this.checkRowIndex(Z);var W=this[$];return this[$]=this[Z],this[Z]=W,this},R.prototype.getColumn=function($){this.checkColumnIndex($);for(var Z=this.rows,W=Array(Z),K=0;K<Z;K++)W[K]=this[K][$];return W},R.prototype.getColumnVector=function($){return R.columnVector(this.getColumn($))},R.prototype.setColumn=function($,Z){this.checkColumnIndex($),R.isMatrix(Z)&&(Z=Z.to1DArray());var W=this.rows;if(Z.length!==W)throw new RangeError('Invalid column size');for(var K=0;K<W;K++)this[K][$]=Z[K];return this},R.prototype.removeColumn=function($){if(this.checkColumnIndex($),1===this.columns)throw new RangeError('A matrix cannot have less than one column');for(var Z=0,W=this.rows;Z<W;Z++)this[Z].splice($,1);return this.columns-=1,this},R.prototype.addColumn=function($,Z){if('undefined'==typeof Z&&(Z=$,$=this.columns),0>$||$>this.columns)throw new RangeError('Column index out of range.');R.isMatrix(Z)&&(Z=Z.to1DArray());var W=this.rows;if(Z.length!==W)throw new RangeError('Invalid column size');for(var K=0;K<W;K++)this[K].splice($,0,Z[K]);return this.columns+=1,this},R.prototype.swapColumns=function($,Z){this.checkRowIndex($),this.checkRowIndex(Z);for(var W=this.rows,G=0,K,Q;G<W;G++)Q=this[G],K=Q[$],Q[$]=Q[Z],Q[Z]=K;return this},R.prototype.checkRowVector=function($){if(R.isMatrix($)&&($=$.to1DArray()),$.length!==this.columns)throw new RangeError('vector size must be the same as the number of columns');return $},R.prototype.checkColumnVector=function($){if(R.isMatrix($)&&($=$.to1DArray()),$.length!==this.rows)throw new RangeError('vector size must be the same as the number of rows');return $},R.prototype.addRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$[Q];return this},R.prototype.subRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$[Q];return this},R.prototype.mulRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$[Q];return this},R.prototype.divRowVector=function($){$=this.checkRowVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$[Q];return this},R.prototype.addColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]+=$[K];return this},R.prototype.subColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]-=$[K];return this},R.prototype.mulColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]*=$[K];return this},R.prototype.divColumnVector=function($){$=this.checkColumnVector($);for(var Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]/=$[K];return this},R.prototype.mulRow=function($,Z){this.checkRowIndex($);for(var W=0,K=this.columns;W<K;W++)this[$][W]*=Z;return this},R.prototype.mulColumn=function($,Z){this.checkColumnIndex($);for(var W=0,K=this.rows;W<K;W++)this[W][$]*=Z},R.prototype.max=function(){for(var $=-Infinity,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]>$&&($=this[K][Q]);return $},R.prototype.maxIndex=function(){for(var $=-Infinity,Z={},W=this.rows,K=this.columns,Q=0;Q<W;Q++)for(var G=0;G<K;G++)this[Q][G]>$&&($=this[Q][G],Z.row=Q,Z.column=G);return Z},R.prototype.min=function(){for(var $=Infinity,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)this[K][Q]<$&&($=this[K][Q]);return $},R.prototype.minIndex=function(){for(var $=Infinity,Z={},W=this.rows,K=this.columns,Q=0;Q<W;Q++)for(var G=0;G<K;G++)this[Q][G]<$&&($=this[Q][G],Z.row=Q,Z.column=G);return Z},R.prototype.maxRow=function($){this.checkRowIndex($);for(var Z=-Infinity,W=0,K=this.columns;W<K;W++)this[$][W]>Z&&(Z=this[$][W]);return Z},R.prototype.maxRowIndex=function($){this.checkRowIndex($);for(var Z=-Infinity,W={row:$},K=0,Q=this.columns;K<Q;K++)this[$][K]>Z&&(Z=this[$][K],W.column=K);return W},R.prototype.minRow=function($){this.checkRowIndex($);for(var Z=Infinity,W=0,K=this.columns;W<K;W++)this[$][W]<Z&&(Z=this[$][W]);return Z},R.prototype.minRowIndex=function($){this.checkRowIndex($);for(var Z=Infinity,W={row:$,column:0},K=0,Q=this.columns;K<Q;K++)this[$][K]<Z&&(Z=this[$][K],W.column=K);return W},R.prototype.maxColumn=function($){this.checkColumnIndex($);for(var Z=-Infinity,W=0,K=this.rows;W<K;W++)this[W][$]>Z&&(Z=this[W][$]);return Z},R.prototype.maxColumnIndex=function($){this.checkColumnIndex($);for(var Z=-Infinity,W={row:0,column:$},K=0,Q=this.rows;K<Q;K++)this[K][$]>Z&&(Z=this[K][$],W.row=K);return W},R.prototype.minColumn=function($){this.checkColumnIndex($);for(var Z=Infinity,W=0,K=this.rows;W<K;W++)this[W][$]<Z&&(Z=this[W][$]);return Z},R.prototype.minColumnIndex=function($){this.checkColumnIndex($);for(var Z=Infinity,W={row:0,column:$},K=0,Q=this.rows;K<Q;K++)this[K][$]<Z&&(Z=this[K][$],W.row=K);return W},R.prototype.diag=function(){if(!this.isSquare())throw new TypeError('Only square matrices have a diagonal.');for(var O=Array(this.rows),$=0,Z=this.rows;$<Z;$++)O[$]=this[$][$];return O},R.prototype.sum=function(){for(var $=0,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$+=this[K][Q];return $},R.prototype.mean=function(){return this.sum()/this.size},R.prototype.prod=function(){for(var O=1,$=this.rows,Z=this.columns,W=0;W<$;W++)for(var K=0;K<Z;K++)O*=this[W][K];return O},R.prototype.cumulativeSum=function(){for(var $=0,Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$+=this[K][Q],this[K][Q]=$;return this},R.prototype.dot=function($){if(this.size!==$.size)throw new RangeError('vectors do not have the same size');for(var Z=this.to1DArray(),W=$.to1DArray(),O=0,K=Z.length,Q=0;Q<K;Q++)O+=Z[Q]*W[Q];return O},R.prototype.mmul=function($){if(!R.isMatrix($))throw new TypeError('parameter "other" must be a matrix');this.columns!==$.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');var Z=this.rows,W=this.columns,K=$.columns,Q=new R(Z,K),G=Array(W),ee,te,ne;for(te=0;te<K;te++){for(ne=0;ne<W;ne++)G[ne]=$[ne][te];for(ee=0;ee<Z;ee++){var ae=this[ee],se=0;for(ne=0;ne<W;ne++)se+=ae[ne]*G[ne];Q[ee][te]=se}}return Q},R.prototype.sortRows=function($){for(var Z=0,W=this.rows;Z<W;Z++)this[Z].sort($);return this},R.prototype.sortColumns=function($){for(var Z=0,W=this.columns;Z<W;Z++)this.setColumn(Z,this.getColumn(Z).sort($));return this},R.prototype.transpose=function(){for(var $=new R(this.columns,this.rows),Z=this.rows,W=this.columns,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$[Q][K]=this[K][Q];return $},R.prototype.subMatrix=function($,Z,W,K){if($>Z||W>K||0>$||$>=this.rows||0>Z||Z>=this.rows||0>W||W>=this.columns||0>K||K>=this.columns)throw new RangeError('Argument out of range');for(var Q=new R(Z-$+1,K-W+1),G=$;G<=Z;G++)for(var ee=W;ee<=K;ee++)Q[G-$][ee-W]=this[G][ee];return Q},R.prototype.subMatrixRow=function($,Z,W){if('undefined'==typeof Z?(Z=0,W=this.columns-1):'undefined'==typeof W&&(W=this.columns-1),Z>W||0>Z||Z>=this.columns||0>W||W>=this.columns)throw new RangeError('Argument out of range.');for(var K=$.length,Q=this.rows,G=new R(K,W-Z+1),ee=0;ee<K;ee++)for(var te=Z;te<=W;te++){if(0>$[ee]||$[ee]>=Q)throw new RangeError('Argument out of range.');G[ee][te-Z]=this[$[ee]][te]}return G},R.prototype.subMatrixColumn=function($,Z,W){if('undefined'==typeof Z?(Z=0,W=this.rows-1):'undefined'==typeof W&&(W=this.rows-1),Z>W||0>Z||Z>=this.rows||0>W||W>=this.rows)throw new RangeError('Argument out of range.');for(var K=$.length,Q=this.columns,G=new R(W-Z+1,K),ee=0;ee<K;ee++)for(var te=Z;te<=W;te++){if(0>$[ee]||$[ee]>=Q)throw new RangeError('Argument out of range.');G[te-Z][ee]=this[te][$[ee]]}return G},R.prototype.trace=function(){if(!this.isSquare())throw new TypeError('The matrix is not square');for(var O=0,$=0,Z=this.rows;$<Z;$++)O+=this[$][$];return O},R.prototype.abs=function(){for(var $=this.rows,Z=this.columns,W=0;W<$;W++)for(var K=0;K<Z;K++)this[W][K]=Math.abs(this[W][K])},E.exports=R},function(E,D,I){'use strict';D.array=I(41),D.matrix=I(102)},function(module,exports,__webpack_require__){'use strict';function checkRowIndex(E,D,I){var P=I?E.rows:E.rows-1;if(0>D||D>P)throw new RangeError('Row index out of range')}function checkRowVector(E,D,I){if(E.isMatrix(D)?D=D.to1DArray():I&&(D=[].concat(D)),D.length!==E.columns)throw new RangeError('vector size must be the same as the number of columns');return D}function checkColumnVector(E,D,I){if(E.isMatrix(D)?D=D.to1DArray():I&&(D=[].concat(D)),D.length!==E.rows)throw new RangeError('vector size must be the same as the number of rows');return D}function checkColumnIndex(E,D,I){var P=I?E.columns:E.columns-1;if(0>D||D>P)throw new RangeError('Column index out of range')}function checkDimensions(E,D){if(E.rows!==D.length||E.columns!==D[0].length)throw new RangeError('Matrices dimensions must be equal')}function compareNumbers(E,D){return E-D}function fillTemplateFunction(E,D){for(var I in D)E=E.replace(new RegExp('%'+I+'%','g'),D[I]);return E}const arrayUtils=__webpack_require__(105);class E extends Array{constructor(D,I){if(E.isMatrix(D))return D.clone();if(Number.isInteger(D)&&0<D){if(super(D),Number.isInteger(I)&&0<I)for(var P=0;P<D;P++)this[P]=Array(I);else throw new TypeError('nColumns must be a positive integer');}else if(Array.isArray(D)){var R=D;if(D=R.length,I=R[0].length,'number'!=typeof I||0===I)throw new TypeError('Data must be a 2D array with at least one element');super(D);for(var P=0;P<D;P++){if(R[P].length!==I)throw new RangeError('Inconsistent array dimensions');this[P]=[].concat(R[P])}}else throw new TypeError('First argument must be a positive number or an array');this.rows=D,this.columns=I}static get[Symbol.species](){return Array}static from1DArray(D,I,P){if(D*I!==P.length)throw new RangeError('Data length does not match given dimensions');for(var T=new E(D,I),F=0;F<D;F++)for(var O=0;O<I;O++)T[F][O]=P[F*I+O];return T}static rowVector(D){for(var I=new E(1,D.length),P=0;P<D.length;P++)I[0][P]=D[P];return I}static columnVector(D){for(var I=new E(D.length,1),P=0;P<D.length;P++)I[P][0]=D[P];return I}static empty(D,I){return new E(D,I)}static zeros(D,I){return E.empty(D,I).fill(0)}static ones(D,I){return E.empty(D,I).fill(1)}static rand(D,I,P){P===void 0&&(P=Math.random);for(var R=E.empty(D,I),T=0;T<D;T++)for(var F=0;F<I;F++)R[T][F]=P();return R}static eye(D,I){I===void 0&&(I=D);for(var P=Math.min(D,I),R=E.zeros(D,I),T=0;T<P;T++)R[T][T]=1;return R}static diag(D,I,P){var R=D.length;I===void 0&&(I=R),P===void 0&&(P=I);for(var T=Math.min(R,I,P),F=E.zeros(I,P),O=0;O<T;O++)F[O][O]=D[O];return F}static min(D,I){for(var P=D.length,R=D[0].length,T=new E(P,R),F=0;F<P;F++)for(var O=0;O<R;O++)T[F][O]=Math.min(D[F][O],I[F][O]);return T}static max(D,I){for(var P=D.length,R=D[0].length,T=new E(P,R),F=0;F<P;F++)for(var O=0;O<R;O++)T[F][O]=Math.max(D[F][O],I[F][O]);return T}static checkMatrix(D){return E.isMatrix(D)?D:new E(D)}static isMatrix(D){return null!=D&&'Matrix'===D.klass}get size(){return this.rows*this.columns}apply(D){if('function'!=typeof D)throw new TypeError('callback must be a function');for(var I=this.rows,P=this.columns,R=0;R<I;R++)for(var T=0;T<P;T++)D.call(this,R,T);return this}clone(){for(var D=new E(this.rows,this.columns),I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)D[I][P]=this[I][P];return D}to1DArray(){for(var D=Array(this.size),I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)D[I*this.columns+P]=this[I][P];return D}to2DArray(){for(var D=Array(this.rows),I=0;I<this.rows;I++)D[I]=[].concat(this[I]);return D}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var D=0;D<this.rows;D++)for(var I=0;I<=D;I++)if(this[D][I]!==this[I][D])return!1;return!0}return!1}set(D,I,P){return this[D][I]=P,this}get(D,I){return this[D][I]}repeat(D,I){D=D||1,I=I||1;for(var P=new E(this.rows*D,this.columns*I),R=0;R<D;R++)for(var T=0;T<I;T++)P.setSubMatrix(this,this.rows*R,this.columns*T);return P}fill(D){for(var I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]=D;return this}neg(){return this.mulS(-1)}getRow(D){return checkRowIndex(this,D),[].concat(this[D])}getRowVector(D){return E.rowVector(this.getRow(D))}setRow(D,I){return checkRowIndex(this,D),I=checkRowVector(this,I,!0),this[D]=I,this}removeRow(D){if(checkRowIndex(this,D),1===this.rows)throw new RangeError('A matrix cannot have less than one row');return this.splice(D,1),this.rows-=1,this}addRow(D,I){return void 0===I&&(I=D,D=this.rows),checkRowIndex(this,D,!0),I=checkRowVector(this,I,!0),this.splice(D,0,I),this.rows+=1,this}swapRows(D,I){checkRowIndex(this,D),checkRowIndex(this,I);var P=this[D];return this[D]=this[I],this[I]=P,this}getColumn(D){checkColumnIndex(this,D);for(var I=Array(this.rows),P=0;P<this.rows;P++)I[P]=this[P][D];return I}getColumnVector(D){return E.columnVector(this.getColumn(D))}setColumn(D,I){checkColumnIndex(this,D),I=checkColumnVector(this,I);for(var P=0;P<this.rows;P++)this[P][D]=I[P];return this}removeColumn(D){if(checkColumnIndex(this,D),1===this.columns)throw new RangeError('A matrix cannot have less than one column');for(var I=0;I<this.rows;I++)this[I].splice(D,1);return this.columns-=1,this}addColumn(D,I){'undefined'==typeof I&&(I=D,D=this.columns),checkColumnIndex(this,D,!0),I=checkColumnVector(this,I);for(var P=0;P<this.rows;P++)this[P].splice(D,0,I[P]);return this.columns+=1,this}swapColumns(D,I){checkColumnIndex(this,D),checkColumnIndex(this,I);for(var T=0,P,R;T<this.rows;T++)R=this[T],P=R[D],R[D]=R[I],R[I]=P;return this}addRowVector(D){D=checkRowVector(this,D);for(var I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]+=D[P];return this}subRowVector(D){D=checkRowVector(this,D);for(var I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]-=D[P];return this}mulRowVector(D){D=checkRowVector(this,D);for(var I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]*=D[P];return this}divRowVector(D){D=checkRowVector(this,D);for(var I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]/=D[P];return this}addColumnVector(D){D=checkColumnVector(this,D);for(var I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]+=D[I];return this}subColumnVector(D){D=checkColumnVector(this,D);for(var I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]-=D[I];return this}mulColumnVector(D){D=checkColumnVector(this,D);for(var I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]*=D[I];return this}divColumnVector(D){D=checkColumnVector(this,D);for(var I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]/=D[I];return this}mulRow(D,I){checkRowIndex(this,D);for(var P=0;P<this.columns;P++)this[D][P]*=I;return this}mulColumn(D,I){checkColumnIndex(this,D);for(var P=0;P<this.rows;P++)this[P][D]*=I}max(){for(var D=this[0][0],I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]>D&&(D=this[I][P]);return D}maxIndex(){for(var D=this[0][0],I=[0,0],P=0;P<this.rows;P++)for(var R=0;R<this.columns;R++)this[P][R]>D&&(D=this[P][R],I[0]=P,I[1]=R);return I}min(){for(var D=this[0][0],I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)this[I][P]<D&&(D=this[I][P]);return D}minIndex(){for(var D=this[0][0],I=[0,0],P=0;P<this.rows;P++)for(var R=0;R<this.columns;R++)this[P][R]<D&&(D=this[P][R],I[0]=P,I[1]=R);return I}maxRow(D){checkRowIndex(this,D);for(var I=this[D][0],P=1;P<this.columns;P++)this[D][P]>I&&(I=this[D][P]);return I}maxRowIndex(D){checkRowIndex(this,D);for(var I=this[D][0],P=[D,0],R=1;R<this.columns;R++)this[D][R]>I&&(I=this[D][R],P[1]=R);return P}minRow(D){checkRowIndex(this,D);for(var I=this[D][0],P=1;P<this.columns;P++)this[D][P]<I&&(I=this[D][P]);return I}minRowIndex(D){checkRowIndex(this,D);for(var I=this[D][0],P=[D,0],R=1;R<this.columns;R++)this[D][R]<I&&(I=this[D][R],P[1]=R);return P}maxColumn(D){checkColumnIndex(this,D);for(var I=this[0][D],P=1;P<this.rows;P++)this[P][D]>I&&(I=this[P][D]);return I}maxColumnIndex(D){checkColumnIndex(this,D);for(var I=this[0][D],P=[0,D],R=1;R<this.rows;R++)this[R][D]>I&&(I=this[R][D],P[0]=R);return P}minColumn(D){checkColumnIndex(this,D);for(var I=this[0][D],P=1;P<this.rows;P++)this[P][D]<I&&(I=this[P][D]);return I}minColumnIndex(D){checkColumnIndex(this,D);for(var I=this[0][D],P=[0,D],R=1;R<this.rows;R++)this[R][D]<I&&(I=this[R][D],P[0]=R);return P}diag(){for(var D=Math.min(this.rows,this.columns),I=Array(D),P=0;P<D;P++)I[P]=this[P][P];return I}sum(){for(var D=0,I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)D+=this[I][P];return D}mean(){return this.sum()/this.size}prod(){for(var D=1,I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)D*=this[I][P];return D}cumulativeSum(){for(var D=0,I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)D+=this[I][P],this[I][P]=D;return this}dot(D){E.isMatrix(D)&&(D=D.to1DArray());var I=this.to1DArray();if(I.length!==D.length)throw new RangeError('vectors do not have the same size');for(var P=0,R=0;R<I.length;R++)P+=I[R]*D[R];return P}mmul(D){D=E.checkMatrix(D),this.columns!==D.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');for(var I=this.rows,P=this.columns,R=D.columns,T=new E(I,R),F=Array(P),O=0;O<R;O++){for(var $=0;$<P;$++)F[$]=D[$][O];for(var Z=0;Z<I;Z++){var W=this[Z],K=0;for($=0;$<P;$++)K+=W[$]*F[$];T[Z][O]=K}}return T}scaleRows(D,I){if(D=void 0===D?0:D,I=void 0===I?1:I,D>=I)throw new RangeError('min should be strictly smaller than max');for(var P=E.empty(this.rows,this.columns),R=0,T;R<this.rows;R++)T=arrayUtils.scale(this.getRow(R),{min:D,max:I}),P.setRow(R,T);return P}scaleColumns(D,I){if(D=void 0===D?0:D,I=void 0===I?1:I,D>=I)throw new RangeError('min should be strictly smaller than max');for(var P=E.empty(this.rows,this.columns),R=0,T;R<this.columns;R++)T=arrayUtils.scale(this.getColumn(R),{min:D,max:I}),P.setColumn(R,T);return P}kroneckerProduct(D){D=E.checkMatrix(D);for(var I=this.rows,P=this.columns,R=D.rows,T=D.columns,F=new E(I*R,P*T),O=0;O<I;O++)for(var $=0;$<P;$++)for(var Z=0;Z<R;Z++)for(var W=0;W<T;W++)F[R*O+Z][T*$+W]=this[O][$]*D[Z][W];return F}transpose(){for(var D=new E(this.columns,this.rows),I=0;I<this.rows;I++)for(var P=0;P<this.columns;P++)D[P][I]=this[I][P];return D}sortRows(D){D===void 0&&(D=compareNumbers);for(var I=0;I<this.rows;I++)this[I].sort(D);return this}sortColumns(D){D===void 0&&(D=compareNumbers);for(var I=0;I<this.columns;I++)this.setColumn(I,this.getColumn(I).sort(D));return this}subMatrix(D,I,P,R){if(D>I||P>R||0>D||D>=this.rows||0>I||I>=this.rows||0>P||P>=this.columns||0>R||R>=this.columns)throw new RangeError('Argument out of range');for(var T=new E(I-D+1,R-P+1),F=D;F<=I;F++)for(var O=P;O<=R;O++)T[F-D][O-P]=this[F][O];return T}subMatrixRow(D,I,P){if(void 0===I&&(I=0),void 0===P&&(P=this.columns-1),I>P||0>I||I>=this.columns||0>P||P>=this.columns)throw new RangeError('Argument out of range');for(var R=new E(D.length,P-I+1),T=0;T<D.length;T++)for(var F=I;F<=P;F++){if(0>D[T]||D[T]>=this.rows)throw new RangeError('Row index out of range: '+D[T]);R[T][F-I]=this[D[T]][F]}return R}subMatrixColumn(D,I,P){if(void 0===I&&(I=0),void 0===P&&(P=this.rows-1),I>P||0>I||I>=this.rows||0>P||P>=this.rows)throw new RangeError('Argument out of range');for(var R=new E(P-I+1,D.length),T=0;T<D.length;T++)for(var F=I;F<=P;F++){if(0>D[T]||D[T]>=this.columns)throw new RangeError('Column index out of range: '+D[T]);R[F-I][T]=this[F][D[T]]}return R}setSubMatrix(D,I,P){D=E.checkMatrix(D);var R=I+D.rows-1,T=P+D.columns-1;if(I>R||P>T||0>I||I>=this.rows||0>R||R>=this.rows||0>P||P>=this.columns||0>T||T>=this.columns)throw new RangeError('Argument out of range');for(var F=0;F<D.rows;F++)for(var O=0;O<D.columns;O++)this[I+F][P+O]=D[F][O];return this}trace(){for(var D=Math.min(this.rows,this.columns),I=0,P=0;P<D;P++)I+=this[P][P];return I}}E.prototype.klass='Matrix',module.exports=E,E.random=E.rand,E.diagonal=E.diag,E.prototype.diagonal=E.prototype.diag,E.identity=E.eye,E.prototype.negate=E.prototype.neg,E.prototype.tensorProduct=E.prototype.kroneckerProduct;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this[i][j] = this[i][j] %op% value;
        }
    }
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this[i][j] = this[i][j] %op% matrix[i][j];
        }
    }
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new Matrix(matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this[i][j] = %method%(this[i][j]);
        }
    }
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new Matrix(matrix);
    return newMatrix.%name%();
})
`,inplaceMethodWithArgs=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this[i][j] = %method%(this[i][j], %args%);
        }
    }
    return this;
})
`,staticMethodWithArgs=`
(function %name%(matrix, %args%) {
    var newMatrix = new Matrix(matrix);
    return newMatrix.%name%(%args%);
})
`,inplaceMethodWithOneArgScalar=`
(function %name%S(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this[i][j] = %method%(this[i][j], %args%);
        }
    }
    return this;
})
`,inplaceMethodWithOneArgMatrix=`
(function %name%M(%args%) {
    checkDimensions(this, %args%);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this[i][j] = %method%(this[i][j], %args%[i][j]);
        }
    }
    return this;
})
`,inplaceMethodWithOneArg=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,staticMethodWithOneArg=staticMethodWithArgs,operators=[['+','add'],['-','sub','subtract'],['*','mul','multiply'],['/','div','divide'],['%','mod','modulus'],['&','and'],['|','or'],['^','xor'],['<<','leftShift'],['>>','signPropagatingRightShift'],['>>>','rightShift','zeroFillRightShift']];for(var operator of operators)for(var inplaceOp=eval(fillTemplateFunction(inplaceOperator,{name:operator[1],op:operator[0]})),inplaceOpS=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[1]+'S',op:operator[0]})),inplaceOpM=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[1]+'M',op:operator[0]})),staticOp=eval(fillTemplateFunction(staticOperator,{name:operator[1]})),i=1;i<operator.length;i++)E.prototype[operator[i]]=inplaceOp,E.prototype[operator[i]+'S']=inplaceOpS,E.prototype[operator[i]+'M']=inplaceOpM,E[operator[i]]=staticOp;var methods=[['~','not']];['abs','acos','acosh','asin','asinh','atan','atanh','cbrt','ceil','clz32','cos','cosh','exp','expm1','floor','fround','log','log1p','log10','log2','round','sign','sin','sinh','sqrt','tan','tanh','trunc'].forEach(function(E){methods.push(['Math.'+E,E])});for(var method of methods)for(var inplaceMeth=eval(fillTemplateFunction(inplaceMethod,{name:method[1],method:method[0]})),staticMeth=eval(fillTemplateFunction(staticMethod,{name:method[1]})),i=1;i<method.length;i++)E.prototype[method[i]]=inplaceMeth,E[method[i]]=staticMeth;var methodsWithArgs=[['Math.pow',1,'pow']];for(var methodWithArg of methodsWithArgs){for(var args='arg0',i=1;i<methodWithArg[1];i++)args+=`, arg${i}`;if(1!==methodWithArg[1])for(var inplaceMethWithArgs=eval(fillTemplateFunction(inplaceMethodWithArgs,{name:methodWithArg[2],method:methodWithArg[0],args:args})),staticMethWithArgs=eval(fillTemplateFunction(staticMethodWithArgs,{name:methodWithArg[2],args:args})),i=2;i<methodWithArg.length;i++)E.prototype[methodWithArg[i]]=inplaceMethWithArgs,E[methodWithArg[i]]=staticMethWithArgs;else{var tmplVar={name:methodWithArg[2],args:args,method:methodWithArg[0]};console.log(tmplVar);let inplaceMethod=eval(fillTemplateFunction(inplaceMethodWithOneArg,tmplVar)),inplaceMethodS=eval(fillTemplateFunction(inplaceMethodWithOneArgScalar,tmplVar)),inplaceMethodM=eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix,tmplVar));console.log(fillTemplateFunction(staticMethodWithOneArg,tmplVar));let staticMethod=eval(fillTemplateFunction(staticMethodWithOneArg,tmplVar));for(var i=2;i<methodWithArg.length;i++)E.prototype[methodWithArg[i]]=inplaceMethod,E.prototype[methodWithArg[i]+'M']=inplaceMethodM,E.prototype[methodWithArg[i]+'S']=inplaceMethodS,E[methodWithArg[i]]=staticMethod}}},function(E,D,I){'use strict';(function(P){if(D.base64=!0,D.array=!0,D.string=!0,D.arraybuffer='undefined'!=typeof ArrayBuffer&&'undefined'!=typeof Uint8Array,D.nodebuffer='undefined'!=typeof P,D.uint8array='undefined'!=typeof Uint8Array,'undefined'==typeof ArrayBuffer)D.blob=!1;else{var R=new ArrayBuffer(0);try{D.blob=0===new Blob([R],{type:'application/zip'}).size}catch(O){try{var T=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,F=new T;F.append(R),D.blob=0===F.getBlob('application/zip').size}catch($){D.blob=!1}}}}).call(D,I(21).Buffer)},function(E,D,I){'use strict';E.exports=I(2),E.exports.Decompositions=E.exports.DC=I(97)},function(E,D,I){'use strict';const P=I(3).array,R=I(72),T=I(23),F=I(138),O=I(52),Z=2;class W{constructor(K){this.sd=K,this.activeElement=0}static fromJcamp(K,Q){Q=Object.assign({},{keepSpectra:!0,keepRecordsRegExp:/^.+$/},Q,{xy:!0});var G=T.convert(K,Q);return new this(G)}setActiveElement(K){this.activeElement=K}getActiveElement(){return this.activeElement}getXUnits(){return this.getSpectrum().xUnit}setXUnits(K){this.getSpectrum().xUnit=K}getYUnits(){return this.getSpectrum().yUnit}getSpectraVariable(K){return this.sd.ntuples[K]}getPage(K){return this.sd.spectra[K].page}getNbPoints(K){return this.getSpectrumData(K).y.length}getFirstX(K){return K=K||this.activeElement,this.sd.spectra[K].firstX}setFirstX(K,Q){Q=Q||this.activeElement,this.sd.spectra[Q].firstX=K}getLastX(K){return K=K||this.activeElement,this.sd.spectra[K].lastX}setLastX(K,Q){Q=Q||this.activeElement,this.sd.spectra[Q].lastX=K}getFirstY(K){return K=K||this.activeElement,this.sd.spectra[K].firstY}setFirstY(K,Q){Q=Q||this.activeElement,this.sd.spectra[Q].firstY=K}getLastY(K){return K=K||this.activeElement,this.sd.spectra[K].lastY}setLastY(K,Q){Q=Q||this.activeElement,this.sd.spectra[Q].lastY=K}setDataClass(K){K===Z&&(this.getSpectrum().isPeaktable=!0,this.getSpectrum().isXYdata=!1),K===1&&(this.getSpectrum().isXYdata=!0,this.getSpectrum().isPeaktable=!1)}isDataClassPeak(){return!!this.getSpectrum().isPeaktable&&this.getSpectrum().isPeaktable}isDataClassXY(){return!!this.getSpectrum().isXYdata&&this.getSpectrum().isXYdata}setDataType(K){this.getSpectrum().dataType=K}getDataType(){return this.getSpectrum().dataType}getSpectrumData(K){return K=K||this.activeElement,this.sd.spectra[K].data[0]}getSpectrum(K){return K=K||this.activeElement,this.sd.spectra[K]}getNbSubSpectra(){return this.sd.spectra.length}getXData(K){return this.getSpectrumData(K).x}getYData(K){return this.getSpectrumData(K).y}getX(K){return this.getXData()[K]}getY(K){return this.getYData()[K]}getXYData(K){return[this.getXData(K),this.getYData(K)]}getTitle(K){return this.getSpectrum(K).title}setTitle(K,Q){this.getSpectrum(Q).title=K}getMinY(K){return P.min(this.getYData(K))}getMaxY(K){return P.max(this.getYData(K))}getMinMaxY(K){return P.minMax(this.getYData(K))}getNoiseLevel(){var K=P.robustMeanAndStdev(this.getYData()).stdev;return K*this.getNMRPeakThreshold(this.getNucleus(1))}arrayPointToUnits(K){return this.getFirstX()-K*(this.getFirstX()-this.getLastX())/(this.getNbPoints()-1)}unitsToArrayPoint(K){if(this.isDataClassXY())return Math.round((this.getFirstX()-K)*(-1/this.getDeltaX()));if(this.isDataClassPeak()){var Q=0,G=this.getNbPoints()-1,ee=0,te;if(this.getFirstX()>this.getLastX()){if(G=0,ee=this.getNbPoints()-1,K>this.getFirstX())return this.getNbPoints();if(K<this.getLastX())return-1}else{if(K<this.getFirstX())return-1;if(K>this.getLastX())return this.getNbPoints()}for(;1<Math.abs(G-ee);){if(te=Math.round(Math.floor((G+ee)/2)),this.getX(te)===K)return te;this.getX(te)>K?G=te:ee=te}return Q=ee,Math.abs(this.getX(ee)-K)>Math.abs(this.getX(G)-K)&&(Q=G),Q}return 0}getDeltaX(){return(this.getLastX()-this.getFirstX())/(this.getNbPoints()-1)}setMinMax(K,Q){R.scale(this.getYData(),{min:K,max:Q,inplace:!0})}setMin(K){R.scale(this.getYData(),{min:K,inplace:!0})}setMax(K){R.scale(this.getYData(),{max:K,inplace:!0})}yShift(K){var Q=this.getSpectrumData().y,G=this.getNbPoints(),ee=0;for(ee=0;ee<G;ee++)Q[ee]+=K;this.getSpectrum().firstY+=K,this.getSpectrum().lastY+=K}shift(K){for(let te=0;te<this.getNbSubSpectra();te++){this.setActiveElement(te);var Q=this.getSpectrumData().x,G=this.getNbPoints(),ee=0;for(ee=0;ee<G;ee++)Q[ee]+=K;this.getSpectrum().firstX+=K,this.getSpectrum().lastX+=K}}fillWith(K,Q,G){var ee,te,ne,ae,se;K>Q&&(ee=K,K=Q,Q=ee);for(var oe=0;oe<this.getNbSubSpectra();oe++)if(this.setActiveElement(oe),ae=this.getXData(),se=this.getYData(),te=this.unitsToArrayPoint(K),ne=this.unitsToArrayPoint(Q),te>ne&&(ee=te,te=ne,ne=ee),0>te&&(te=0),ne>=this.getNbPoints&&(ne=this.getNbPoints-1),'number'!=typeof G)se.splice(te,ne-te),ae.splice(te,ne-te);else for(oe=te;oe<=ne;oe++)se[oe]=G}suppressZone(K,Q){this.fillWith(K,Q),this.setDataClass(Z)}getMaxPeak(){for(var K=this.getSpectraDataY(),Q=K[0],G=0,ee=0;ee<K.length;ee++)Q<K[ee]&&(Q=K[ee],G=ee);return[this.getX(G),Q]}getParamDouble(K,Q){var G=this.sd.info[K];return G||(G=Q),G}getParamString(K,Q){var G=this.sd.info[K];return G||(G=Q),G+''}getParamInt(K,Q){var G=this.sd.info[K];return G||(G=Q),G}getParam(K,Q){var G=this.sd.info[K];return G||(G=Q),G}containsParam(K){return!!this.sd.info[K]}getSpectraDataY(){return this.getYData()}getSpectraDataX(){return this.getXData()}resetMinMax(){}putParam(K,Q){this.sd.info[K]=Q}getArea(K,Q){var G=this.unitsToArrayPoint(K),ee=this.unitsToArrayPoint(Q),te=0;if(G>ee){var ne=G;G=ee,ee=ne}G=0>G?0:G,ee=ee>=this.getNbPoints()?this.getNbPoints()-1:ee;for(var ae=G;ae<ee;ae++)te+=this.getY(ae);return te*Math.abs(this.getDeltaX())}updateIntegrals(K,Q){var G=0;if(K.forEach(te=>{te.integral=this.getArea(te.from,te.to),G+=te.integral}),0!==Q.nH){var ee=Q.nH/G;K.forEach(te=>{te.integral*=ee})}}getVector(K,Q,G){return G?R.getEquallySpacedData(this.getSpectraDataX(),this.getSpectraDataY(),{from:K,to:Q,numberOfPoints:G}):this.getPointsInWindow(K,Q)}getPointsInWindow(K,Q,G){var ee=this.getSpectraDataX(),te=this.getSpectraDataY(),ne=0,ae=ee.length-1,se=1;if(ee[0]>ee[1]&&(se=-1,ne=ee.length-1,ae=0),K>Q){var oe=K;K=Q,Q=oe}if(ee[ne]>Q||ee[ae]<K)return[];for(;ee[ne]<K;)ne+=se;for(;ee[ae]>Q;)ae-=se;var le=Math.abs(ae-ne)+1;G||(G=le);var de=Array(G),ue=Array(G),he=0;-1==se&&(he=G-1);for(var ce=le/G,ge=ne-se,me=0;me<G;me++)ge+=Math.round(ce*se),de[he]=ee[ge],ue[he]=te[ge],he+=se;return[de,ue]}is2D(){return'undefined'!=typeof this.sd.twoD&&this.sd.twoD}setTotalIntegral(K){this.totalIntegralValue=K}get totalIntegral(){if(this.totalIntegralValue)return this.totalIntegralValue;if(this.molecule){if(this.getNucleus(0).indexOf('H'))return 1*this.mf.replace(/.*H([0-9]+).*/,'$1');if(this.getNucleus(0).indexOf('C'))return 1*this.mf.replace(/.*C([0-9]+).*/,'$1')}else return 100;return 1}setMolfile(K){this.molfile=K}setMF(K){this.mf=K}createPeaks(K){return this.peaks=null,this.peaks=this.getPeaks(K),this.peaks}getPeaks(K){return this.peaks?this.peaks:O(this,K)}toJcamp(K){var Q=new F;return Q.convert(this,Object.assign({},{yFactor:1,encode:'DIFDUP',type:'SIMPLE'},K))}}E.exports=W},function(E,D){'use strict';var P='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';D.encode=function(R){for(var F='',ee=0,O,$,Z,W,K,Q,G;ee<R.length;)O=R.charCodeAt(ee++),$=R.charCodeAt(ee++),Z=R.charCodeAt(ee++),W=O>>2,K=(3&O)<<4|$>>4,Q=(15&$)<<2|Z>>6,G=63&Z,isNaN($)?Q=G=64:isNaN(Z)&&(G=64),F=F+P.charAt(W)+P.charAt(K)+P.charAt(Q)+P.charAt(G);return F},D.decode=function(R){var F='',O,$,Z,W,K,Q,G,ee=0;for(R=R.replace(/[^A-Za-z0-9\+\/\=]/g,'');ee<R.length;)W=P.indexOf(R.charAt(ee++)),K=P.indexOf(R.charAt(ee++)),Q=P.indexOf(R.charAt(ee++)),G=P.indexOf(R.charAt(ee++)),O=W<<2|K>>4,$=(15&K)<<4|Q>>2,Z=(3&Q)<<6|G,F+=String.fromCharCode(O),64!=Q&&(F+=String.fromCharCode($)),64!=G&&(F+=String.fromCharCode(Z));return F}},function(E,D,I){'use strict';D.STORE={magic:'\0\0',compress:function(P){return P},uncompress:function(P){return P},compressInputType:null,uncompressInputType:null},D.DEFLATE=I(62)},function(E,D,I){'use strict';(function(P){E.exports=function(R,T){return new P(R,T)},E.exports.test=function(R){return P.isBuffer(R)}}).call(D,I(21).Buffer)},function(E,D,I){'use strict';var P=I(5),R=I(0),T=I(60),F=I(28),O=I(27),$=I(8),Z=I(9),W=I(25),K=I(10),Q=I(31),G=I(66),ee=I(67),te=function(be){if(be._data instanceof W&&(be._data=be._data.getContent(),be.options.binary=!0,be.options.base64=!1,'uint8array'===R.getTypeOf(be._data))){var ye=be._data;be._data=new Uint8Array(ye.length),0!==ye.length&&be._data.set(ye,0)}return be._data},ne=function(be){var ye=te(be),_e=R.getTypeOf(ye);return'string'===_e?!be.options.binary&&P.nodebuffer?K(ye,'utf-8'):be.asBinary():ye},ae=function(be){var ye=te(this);return null===ye||'undefined'==typeof ye?'':(this.options.base64&&(ye=$.decode(ye)),ye=be&&this.options.binary?xe.utf8decode(ye):R.transformTo('string',ye),be||this.options.binary||(ye=R.transformTo('string',xe.utf8encode(ye))),ye)},se=function(be,ye,_e){this.name=be,this.dir=_e.dir,this.date=_e.date,this.comment=_e.comment,this.unixPermissions=_e.unixPermissions,this.dosPermissions=_e.dosPermissions,this._data=ye,this.options=_e,this._initialMetadata={dir:_e.dir,date:_e.date}};se.prototype={asText:function(){return ae.call(this,!0)},asBinary:function(){return ae.call(this,!1)},asNodeBuffer:function(){var be=ne(this);return R.transformTo('nodebuffer',be)},asUint8Array:function(){var be=ne(this);return R.transformTo('uint8array',be)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var oe=function(be,ye){var _e='',ke;for(ke=0;ke<ye;ke++)_e+=String.fromCharCode(255&be),be>>>=8;return _e},le=function(be){return be=be||{},!0===be.base64&&(null===be.binary||void 0===be.binary)&&(be.binary=!0),be=R.extend(be,O),be.date=be.date||new Date,null!==be.compression&&(be.compression=be.compression.toUpperCase()),be},de=function(be,ye,_e){var ke=R.getTypeOf(ye),je;if(_e=le(_e),'string'==typeof _e.unixPermissions&&(_e.unixPermissions=parseInt(_e.unixPermissions,8)),_e.unixPermissions&&16384&_e.unixPermissions&&(_e.dir=!0),_e.dosPermissions&&16&_e.dosPermissions&&(_e.dir=!0),_e.dir&&(be=he(be)),_e.createFolders&&(je=ue(be))&&ce.call(this,je,!0),_e.dir||null===ye||'undefined'==typeof ye)_e.base64=!1,_e.binary=!1,ye=null,ke=null;else if('string'===ke)_e.binary&&!_e.base64&&!0!==_e.optimizedBinaryString&&(ye=R.string2binary(ye));else{if(_e.base64=!1,_e.binary=!0,!ke&&!(ye instanceof W))throw new Error('The data of \''+be+'\' is in an unsupported format !');'arraybuffer'==ke&&(ye=R.transformTo('uint8array',ye))}var we=new se(be,ye,_e);return this.files[be]=we,we},ue=function(be){'/'==be.slice(-1)&&(be=be.substring(0,be.length-1));var ye=be.lastIndexOf('/');return 0<ye?be.substring(0,ye):''},he=function(be){return'/'!=be.slice(-1)&&(be+='/'),be},ce=function(be,ye){return ye='undefined'!=typeof ye&&ye,be=he(be),this.files[be]||de.call(this,be,null,{dir:!0,createFolders:ye}),this.files[be]},ge=function(be,ye,_e){var ke=new W,je;return be._data instanceof W?(ke.uncompressedSize=be._data.uncompressedSize,ke.crc32=be._data.crc32,0===ke.uncompressedSize||be.dir?(ye=Z.STORE,ke.compressedContent='',ke.crc32=0):be._data.compressionMethod===ye.magic?ke.compressedContent=be._data.getCompressedContent():(je=be._data.getContent(),ke.compressedContent=ye.compress(R.transformTo(ye.compressInputType,je),_e))):(je=ne(be),(!je||0===je.length||be.dir)&&(ye=Z.STORE,je=''),ke.uncompressedSize=je.length,ke.crc32=T(je),ke.compressedContent=ye.compress(R.transformTo(ye.compressInputType,je),_e)),ke.compressedSize=ke.compressedContent.length,ke.compressionMethod=ye.magic,ke},me=function(be,ye){var _e=be;return be||(_e=ye?16893:33204),(65535&_e)<<16},pe=function(be){return 63&(be||0)},fe=function(be,ye,_e,ke,je,we){var Se=_e.compressedContent,ve=we!==Q.utf8encode,Ee=R.transformTo('string',we(ye.name)),De=R.transformTo('string',Q.utf8encode(ye.name)),Ce=ye.comment||'',Ae=R.transformTo('string',we(Ce)),Ie=R.transformTo('string',Q.utf8encode(Ce)),Pe=De.length!==ye.name.length,Re=Ie.length!==Ce.length,Te=ye.options,Me='',Xe='',Ne='',Fe,ze,Ye,Oe;Ye=ye._initialMetadata.dir===ye.dir?Te.dir:ye.dir,Oe=ye._initialMetadata.date===ye.date?Te.date:ye.date;var Le=0,Ue=0;Ye&&(Le|=16),'UNIX'===je?(Ue=798,Le|=me(ye.unixPermissions,Ye)):(Ue=20,Le|=pe(ye.dosPermissions,Ye)),Fe=Oe.getHours(),Fe<<=6,Fe|=Oe.getMinutes(),Fe<<=5,Fe|=Oe.getSeconds()/2,ze=Oe.getFullYear()-1980,ze<<=4,ze|=Oe.getMonth()+1,ze<<=5,ze|=Oe.getDate(),Pe&&(Xe=oe(1,1)+oe(T(Ee),4)+De,Me+='up'+oe(Xe.length,2)+Xe),Re&&(Ne=oe(1,1)+oe(this.crc32(Ae),4)+Ie,Me+='uc'+oe(Ne.length,2)+Ne);var Be='';Be+='\n\0',Be+=!ve&&(Pe||Re)?'\0\b':'\0\0',Be+=_e.compressionMethod,Be+=oe(Fe,2),Be+=oe(ze,2),Be+=oe(_e.crc32,4),Be+=oe(_e.compressedSize,4),Be+=oe(_e.uncompressedSize,4),Be+=oe(Ee.length,2),Be+=oe(Me.length,2);var Ve=F.LOCAL_FILE_HEADER+Be+Ee+Me,qe=F.CENTRAL_FILE_HEADER+oe(Ue,2)+Be+oe(Ae.length,2)+'\0\0\0\0'+oe(Le,4)+oe(ke,4)+Ee+Me+Ae;return{fileRecord:Ve,dirRecord:qe,compressedObject:_e}},xe={load:function(){throw new Error('Load method is not defined. Is the file jszip-load.js included ?')},filter:function(be){var ye=[],_e,ke,je,we;for(_e in this.files)this.files.hasOwnProperty(_e)&&(je=this.files[_e],we=new se(je.name,je._data,R.extend(je.options)),ke=_e.slice(this.root.length,_e.length),_e.slice(0,this.root.length)===this.root&&be(ke,we)&&ye.push(we));return ye},file:function(be,ye,_e){if(1===arguments.length){if(R.isRegExp(be)){var ke=be;return this.filter(function(je,we){return!we.dir&&ke.test(je)})}return this.filter(function(je,we){return!we.dir&&je===be})[0]||null}return be=this.root+be,de.call(this,be,ye,_e),this},folder:function(be){if(!be)return this;if(R.isRegExp(be))return this.filter(function(je,we){return we.dir&&be.test(je)});var ye=this.root+be,_e=ce.call(this,ye),ke=this.clone();return ke.root=_e.name,ke},remove:function(be){be=this.root+be;var ye=this.files[be];if(ye||('/'!=be.slice(-1)&&(be+='/'),ye=this.files[be]),ye&&!ye.dir)delete this.files[be];else for(var _e=this.filter(function(je,we){return we.name.slice(0,be.length)===be}),ke=0;ke<_e.length;ke++)delete this.files[_e[ke].name];return this},generate:function(be){be=R.extend(be||{},{base64:!0,compression:'STORE',compressionOptions:null,type:'base64',platform:'DOS',comment:null,mimeType:'application/zip',encodeFileName:Q.utf8encode}),R.checkSupport(be.type),('darwin'===be.platform||'freebsd'===be.platform||'linux'===be.platform||'sunos'===be.platform)&&(be.platform='UNIX'),'win32'===be.platform&&(be.platform='DOS');var ye=[],_e=0,ke=0,Se=R.transformTo('string',be.encodeFileName(be.comment||this.comment||'')),je,we;for(var ve in this.files)if(this.files.hasOwnProperty(ve)){var Ee=this.files[ve],De=Ee.options.compression||be.compression.toUpperCase(),Ce=Z[De];if(!Ce)throw new Error(De+' is not a valid compression method !');var Ae=Ee.options.compressionOptions||be.compressionOptions||{},Ie=ge.call(this,Ee,Ce,Ae),Pe=fe.call(this,ve,Ee,Ie,_e,be.platform,be.encodeFileName);_e+=Pe.fileRecord.length+Ie.compressedSize,ke+=Pe.dirRecord.length,ye.push(Pe)}var Re='';Re=F.CENTRAL_DIRECTORY_END+'\0\0\0\0'+oe(ye.length,2)+oe(ye.length,2)+oe(ke,4)+oe(_e,4)+oe(Se.length,2)+Se;var Te=be.type.toLowerCase();for(je='uint8array'===Te||'arraybuffer'===Te||'blob'===Te||'nodebuffer'===Te?new ee(_e+ke+Re.length):new G(_e+ke+Re.length),we=0;we<ye.length;we++)je.append(ye[we].fileRecord),je.append(ye[we].compressedObject.compressedContent);for(we=0;we<ye.length;we++)je.append(ye[we].dirRecord);je.append(Re);var Fe=je.finalize();switch(be.type.toLowerCase()){case'uint8array':case'arraybuffer':case'nodebuffer':return R.transformTo(be.type.toLowerCase(),Fe);case'blob':return R.arrayBuffer2Blob(R.transformTo('arraybuffer',Fe),be.mimeType);case'base64':return be.base64?$.encode(Fe):Fe;default:return Fe;}},crc32:function(be,ye){return T(be,ye)},utf8encode:function(be){return R.transformTo('string',Q.utf8encode(be))},utf8decode:function(be){return Q.utf8decode(be)}};E.exports=xe},function(E){'use strict';function P(){this.children=[],this.distance=-1,this.index=[]}P.prototype.cut=function(R){if(0>R)throw new RangeError('Threshold too small');var T=new P;T.children=this.children,T.distance=this.distance,T.index=this.index;for(var F=[T],O=[],$;0<F.length;)$=F.shift(),R>=$.distance?O.push($):F=F.concat($.children);return O},P.prototype.group=function(R){if(1>R)throw new RangeError('Number of groups too small');var T=new P;if(T.children=this.children,T.distance=this.distance,T.index=this.index,1===R)return T;for(var F=[T],O;F.length<R&&0!==F.length;)O=F.shift(),F=F.concat(O.children);if(0===F.length)throw new RangeError('Number of groups too big');for(var $=0;$<F.length;$++)F[$].distance===O.distance&&(F.concat(F[$].children.slice(1)),F[$]=F[$].children[0]);for(var Z=0;Z<F.length;Z++)if(0!==F[Z].distance){var W=F[Z];W.children=W.index}return T},E.exports=P},function(E,D){'use strict';D.hypotenuse=function(R,T){var F;return Math.abs(R)>Math.abs(T)?(F=T/R,Math.abs(R)*Math.sqrt(1+F*F)):0===T?0:(F=R/T,Math.abs(T)*Math.sqrt(1+F*F))}},function(E){E.exports=function(P,R){P=P||0;for(var T=Array(P),F=0;F<P;F++)T[F]=R;return T}},function(E,D){'use strict';D.hypotenuse=function(R,T){if(Math.abs(R)>Math.abs(T)){var F=T/R;return Math.abs(R)*Math.sqrt(1+F*F)}if(0!==T){var F=R/T;return Math.abs(T)*Math.sqrt(1+F*F)}return 0},D.getEmpty2DArray=function(P,R){for(var T=Array(P),F=0;F<P;F++)T[F]=Array(R);return T},D.getFilled2DArray=function(P,R,T){for(var F=Array(P),O=0;O<P;O++){F[O]=Array(R);for(var $=0;$<R;$++)F[O][$]=T}return F}},function(E,D,I){'use strict';E.exports=I(4),E.exports.Decompositions=E.exports.DC=I(112)},function(E){'use strict';E.exports={0:'',1:'stream end',2:'need dictionary','-1':'file error','-2':'stream error','-3':'data error','-4':'insufficient memory','-5':'buffer error','-6':'incompatible version'}},function(E,D,I){'use strict';const P=I(52),R=I(143),T=I(144),F=I(145);class O extends Array{constructor($){if(Array.isArray($)){super($.length);for(let Z=0;Z<$.length;Z++)this[Z]=$[Z]}else'number'==typeof $?super($):super()}static fromPrediction($,Z){Z=Object.assign({},{lineWidth:1,frequency:400,nucleus:'1H'},Z);const W=$.length,K=Array(W);var Q,G,ee,te,ne,ae,se;for(Q=0;Q<W;Q++)K[$[Q].diaIDs[0]]?K[$[Q].diaIDs[0]].push(Q):K[$[Q].diaIDs[0]]=[Q];const oe=Object.keys(K),le=Array(oe.length);for(Q=0;Q<oe.length;Q++){if(ee=K[oe[Q]],te=$[ee[0]],ne=0,se=te.j,se)for(G=0;G<se.length;G++)ne+=se[G].coupling;for(ne+=2*Z.lineWidth,ne/=Z.frequency,le[Q]={from:te.delta-ne,to:te.delta+ne,integral:1,signal:[$[ee[0]]]},G=1;G<ee.length;G++)le[Q].signal.push($[ee[G]]),le[Q].integral++}for(Q=0;Q<le.length;Q++)for(le[Q]._highlight=le[Q].signal[0].diaIDs,ae=(le[Q].from+le[Q].to)/2,ne=Math.abs(le[Q].from-le[Q].to),G=le.length-1;G>Q;G--)Math.abs(ae-(le[G].from+le[G].to)/2)<=Math.abs(ne+Math.abs(le[G].from-le[G].to))/2&&(le[Q].from=Math.min(le[Q].from,le[G].from),le[Q].to=Math.max(le[Q].to,le[G].to),le[Q].integral+=le[G].integral,le[Q]._highlight.push(le[G].signal[0].diaIDs[0]),le.splice(G,1),G=le.length-1,ae=(le[Q].from+le[Q].to)/2,ne=Math.abs(le[Q].from-le[Q].to));return new O(le)}static fromSpectrum($,Z){return this.options=Object.assign({},{nH:99,clean:!0,realTop:!1,thresholdFactor:1,compile:!0,integralType:'sum',optimize:!0,idPrefix:'',format:'new',frequencyCluster:16},Z),new O(P($,this.options))}updateMultiplicity(){for(let W=0;W<this.length;W++){var $=this[W];for(let K=0;K<$.signal.length;K++){var Z=$.signal[K];if(Z.j&&!Z.multiplicity){Z.multiplicity='';for(let Q=0;Q<Z.j.length;Q++)Z.multiplicity+=Z.j[Q].multiplicity}}}return this}updateIntegrals($){var Z=$.factor||1,W;if($.sum){var K=$.sum||1,Q=0;for(W=0;W<this.length;W++)Q+=this[W].integral;Z=K/Q}for(W=0;W<this.length;W++)this[W].integral*=Z;return this}getVector($){return T(this.getPeakList(),$)}getPeakList(){var $=[],Z,W;for(Z=0;Z<this.length;Z++){var K=this[Z];for(W=0;W<K.signal.length;W++)$=$.concat(K.signal[W].peak)}return $}getACS($){return R(this,$)}getAnnotations($){return F.annotations1D(this,$)}}E.exports=O},function(E){E.exports=function(I,P,R,T,F){var O,$;if(void 0===T)T=0;else if(T|=0,0>T||T>=I.length)throw new RangeError('invalid lower bound');if(void 0===F)F=I.length-1;else if(F|=0,F<T||F>=I.length)throw new RangeError('invalid upper bound');for(;T<=F;)if(O=T+(F-T>>1),$=+R(I[O],P,O,I),0>$)T=O+1;else if(0<$)F=O-1;else return O;return~T}},function(E,D,I){'use strict';function R(se,oe){oe=oe||{};var le=new Date,de;if(se.ser||se['2rr'])de=F(se,oe);else if(se['1r']||se['1i']||se.fid)de=T(se,oe);else throw new RangeError('The current files are invalid');de.twoD&&!oe.noContours&&(K(de),de.profiling&&de.profiling.push({action:'Finished countour plot calculation',time:new Date-le}),!oe.keepSpectra&&delete de.spectra);var ue=de.spectra;if(oe.xy&&0<ue.length)for(var he=0,ce;he<ue.length;he++)if(ce=ue[he],0<ce.data.length)for(var ge=0;ge<ce.data.length;ge++){for(var me=ce.data[ge],pe={x:Array(me.length/2),y:Array(me.length/2)},fe=0;fe<me.length;fe+=2)pe.x[fe/2]=me[fe],pe.y[fe/2]=me[fe+1];ce.data[ge]=pe}return de}function T(se,oe){for(var le=$(se.procs,oe),de=$(se.acqus,oe),ue=Object.keys(de.info),he=0,ce;he<ue.length;he++)ce=ue[he],void 0===le.info[ce]&&(le.info[ce]=de.info[ce]);return se['1r']||se['1i']?(se['1r']&&O(se['1r'],le,'1r',!0),se['1i']&&O(se['1i'],le,'1i',!1)):se.fid&&Z(se.fid,le),le}function F(se,oe){var le,de,he;if(se['2rr']){for(var ce=$(se.procs,oe),ge=$(se.acqus,oe),me=Object.keys(ge.info),pe=0,fe;pe<me.length;pe++)fe=me[pe],void 0===ce.info[fe]&&(ce.info[fe]=ge.info[fe]);ge=$(se.proc2s,oe),ce.info.nbSubSpectra=ge.info.$SI=parseInt(ge.info.$SI),le=ge.info.$SF=parseFloat(ge.info.$SF),de=ge.info.$SWP=parseFloat(ge.info.$SWP),he=ge.info.$OFFSET=parseFloat(ge.info.$OFFSET)}else se.ser&&(ce=$(se.acqus,oe),ge=$(se.acqu2s,oe),ce.info.nbSubSpectra=ge.info.$SI=parseInt(ge.info.$TD),ce.info.$SI=parseInt(ce.info.$TD),de=ge.info.$SW,ce.info.$SWP=ce.info.$SWH,ce.info.$SF=parseFloat(ge.info.$SFO1),ce.info.$OFFSET=0,le=ge.info.$SFO1=parseFloat(ge.info.$SFO1),le=1,he=0,ce.info.$AXNUC=ce.info.$NUC1,ge.info.$AXNUC=ge.info.$NUC1);ce.info.firstY=he,ce.info.lastY=he-de/le,ce.info.$BF2=le,ce.info.$SFO1=le;var xe=ce.info.nbSubSpectra,be=ce.info.firstY,ye=(ce.info.lastY-ce.info.firstY)/(xe-1);se['2rr']?O(se['2rr'],ce,'2rr',!0):se.ser&&Z(se.ser,ce,'ser',!0);for(var pe=0;pe<xe;pe++)be+=ye,ce.spectra[pe].pageValue=be;se.ser?'TYPE_2DNMR_FID':'TYPE_2DNMR_SPECTRUM';return ce.info['2D_Y_NUCLEUS']=ge.info.$AXNUC,ce.info['2D_X_NUCLEUS']=ce.info.$AXNUC,ce.info['2D_Y_FRECUENCY']=le,ce.info['2D_Y_OFFSET']=he,ce.info['2D_X_FRECUENCY']=ce.info.$SF,ce.info['2D_X_OFFSET']=ce.info.$OFFSET,ce.twoD=!0,ce}function O(se,oe,le,de){var ue=oe.info.$SI=parseInt(oe.info.$SI),he=parseFloat(oe.info.$SWP),ce=parseFloat(oe.info.$SF),ge=ce,me=oe.shiftOffsetVal;oe.info.observeFrequency=ce,oe.info.$BF1=ge,oe.info.$SFO1=ce,oe.info.brukerReference=ge;var pe=parseInt(oe.info.$BYTORDP);pe=pe?0:1;var fe=oe.info.nbSubSpectra?oe.info.nbSubSpectra:1;pe?se.setLittleEndian():se.setBigEndian();for(var xe=0;xe<fe;xe++){var be={dataType:'NMR Spectrum',dataTable:'(X++(R..R))',nbPoints:ue,firstX:me,lastX:me-he/ce,xUnit:'PPM',yUnit:'Arbitrary',data:[Array(2*ue)],isXYdata:!0,observeFrequency:ce,title:oe.info.TITLE,deltaX:-(he/ce)/(ue-1)},ye=me,_e=be.deltaX;if(de)for(var ke=0;ke<ue;++ke)be.data[0][2*ke]=ye,be.data[0][2*ke+1]=se.readInt32(),(null===be.data[0][2*ke+1]||isNaN(be.data[0][2*ke+1]))&&(be.data[0][2*ke+1]=0),ye+=_e;else for(ke=ue-1;0<=ke;--ke)be.data[0][2*ke]=ye,be.data[0][2*ke+1]=se.readInt32(),(null===be.data[0][2*ke+1]||isNaN(be.data[0][2*ke+1]))&&(be.data[0][2*ke+1]=0),ye+=_e;oe.spectra.push(be)}}function $(se,oe){var le=/.*/;return oe.keepRecordsRegExp&&(le=oe.keepRecordsRegExp),G.convert(se,{keepRecordsRegExp:le})}function Z(se,oe){var le=oe.info.$TD=parseInt(oe.info.$TD),de=oe.info.$SWH=parseFloat(oe.info.$SWH),ue=oe.info.$SW=parseFloat(oe.info.$SW),he=oe.info.$SFO1=parseFloat(oe.info.$SFO1),ce=parseFloat(oe.info.$BF1);oe.info.$BF1=ce;var ge=ue,me=ge/(le-1),pe=parseInt(oe.info.$BYTORDP);pe=pe?0:1,pe?se.setLittleEndian():se.setBigEndian();var fe=oe.info.nbSubSpectra?oe.info.nbSubSpectra:1;oe.spectra=Array(fe);for(var xe=0,be;xe<fe/2;xe++){be={dataType:'NMR FID',dataTable:'(X++(R..R))',nbPoints:le,firstX:0,lastX:ge,nucleus:oe.info.$NUC1?oe.info.$NUC1:void 0,xUnit:'Sec',yUnit:'Arbitrary',data:[Array(2*le)],isXYdata:!0,observeFrequency:he,title:oe.info.TITLE,deltaX:me},oe.spectra[2*xe]=be,be={dataType:'NMR FID',dataTable:'(X++(I..I))',nbPoints:le,firstX:0,lastX:ge,nucleus:oe.info.$NUC1?oe.info.$NUC1:void 0,xUnit:'Sec',yUnit:'Arbitrary',data:[Array(2*le)],isXYdata:!0,observeFrequency:he,title:oe.info.TITLE,deltaX:me},oe.spectra[2*xe+1]=be;for(var ye=0,ke=0,_e;se.available(8)&&ke<le;ke++,ye=ke*me)_e=se.readInt32(),(null===_e||isNaN(_e))&&(_e=0),oe.spectra[2*xe].data[0][2*ke+1]=_e,oe.spectra[2*xe].data[0][2*ke]=ye,_e=se.readInt32(),(null===_e||isNaN(_e))&&(_e=0),oe.spectra[2*xe+1].data[0][2*ke+1]=_e,oe.spectra[2*xe+1].data[0][2*ke]=ye;for(;ke<le;ke++,ye=ke*me)oe.spectra[2*xe].data[0][2*ke+1]=0,oe.spectra[2*xe].data[0][2*ke]=ye,oe.spectra[2*xe+1].data[0][2*ke+1]=0,oe.spectra[2*xe+1].data[0][2*ke]=ye}}function W(se){for(var oe=0,le=se[0].data[0][0],de=le,ue=se.length,he=se[0].data[0].length/2,ce=Array(ue),ge=0;ge<ue;ge++){ce[ge]=Array(he);for(var me=0;me<he;me++)ce[ge][me]=se[ge].data[0][2*me+1],ce[ge][me]<le&&(le=se[ge].data[0][2*me+1]),ce[ge][me]>de&&(de=se[ge].data[0][2*me+1]),0!==ge&&0!==me&&(oe+=Math.abs(ce[ge][me]-ce[ge][me-1])+Math.abs(ce[ge][me]-ce[ge-1][me]))}return{z:ce,minX:se[0].data[0][0],maxX:se[0].data[0][se[0].data[0].length-2],minY:se[0].pageValue,maxY:se[ue-1].pageValue,minZ:le,maxZ:de,noise:oe/(2*((ue-1)*(he-1)))}}function K(se){var oe=W(se.spectra);se.contourLines=Q(oe),delete oe.z,se.minMax=oe}function Q(se){for(var le=se.noise,de=se.z,ue=[],he=7,ce=new Float32Array(4),ge=[],me=de.length,pe=de[0].length,_e=se.minX,ke=se.maxX,je=(ke-_e)/(pe-1),we=se.minY,Se=se.maxY,ve=(Se-we)/(me-1),Ee=se.minZ,De=se.maxZ,Ae=0,fe,xe,be,ye,Ce,Ie;Ae<2*he;Ae++){Ie={},ue.push(Ie);var Pe=Ae%2;Ce=0==Pe?(De-5*le)*Math.exp(Ae/2-he)+5*le:-(De-5*le)*Math.exp(Ae/2-he)-5*le;var Re=[];if(Ie.zValue=Ce,Ie.lines=Re,!(Ce<=Ee||Ce>=De))for(var Te=0;Te<me-1;Te++)for(var Fe=0;Fe<pe-1;Fe++){ce[0]=de[Te][Fe],ce[1]=de[Te][Fe+1],ce[2]=de[Te+1][Fe],ce[3]=de[Te+1][Fe+1];for(var ze=0;4>ze;ze++)ge[ze]=ce[ze]>Ce;ge[0]!==ge[1]&&ge[0]!==ge[2]&&(fe=Fe+(Ce-ce[0])/(ce[1]-ce[0]),xe=Te,be=Fe,ye=Te+(Ce-ce[0])/(ce[2]-ce[0]),Re.push(fe*je+_e,xe*ve+we,be*je+_e,ye*ve+we)),ge[3]!==ge[1]&&ge[3]!==ge[2]&&(fe=Fe+1,xe=Te+1-(Ce-ce[3])/(ce[1]-ce[3]),be=Fe+1-(Ce-ce[3])/(ce[2]-ce[3]),ye=Te+1,Re.push(fe*je+_e,xe*ve+we,be*je+_e,ye*ve+we)),ge[1]!==ge[2]&&(fe=Fe+1-(Ce-ce[1])/(ce[2]-ce[1]),xe=Te+(Ce-ce[1])/(ce[2]-ce[1]),ge[1]!==ge[0]&&(be=Fe+1-(Ce-ce[1])/(ce[0]-ce[1]),ye=Te,Re.push(fe*je+_e,xe*ve+we,be*je+_e,ye*ve+we)),ge[2]!==ge[0]&&(be=Fe,ye=Te+1-(Ce-ce[2])/(ce[0]-ce[2]),Re.push(fe*je+_e,xe*ve+we,be*je+_e,ye*ve+we)),ge[1]!==ge[3]&&(be=Fe+1,ye=Te+(Ce-ce[1])/(ce[3]-ce[1]),Re.push(fe*je+_e,xe*ve+we,be*je+_e,ye*ve+we)),ge[2]!==ge[3]&&(be=Fe+(Ce-ce[2])/(ce[3]-ce[2]),ye=Te+1,Re.push(fe*je+_e,xe*ve+we,be*je+_e,ye*ve+we)))}}return{minX:se.minX,maxX:se.maxX,minY:se.minY,maxY:se.maxY,segments:ue}}const G=I(23),ee=I(57),te=I(63);var ne=1,ae=2;E.exports={convertZip:function(se,oe){oe=oe||{};var le=new te;le.load(se,oe);for(var de={ser:ne,fid:ne,acqus:ae,acqu2s:ae,procs:ae,proc2s:ae,'1r':ne,'1i':ne,'2rr':ne},ue=le.filter(function(_e){return 0<=_e.indexOf('ser')||0<=_e.indexOf('fid')||0<=_e.indexOf('1r')||0<=_e.indexOf('2rr')}),he=Array(ue.length),ce=0;ce<ue.length;++ce){var ge=ue[ce].name.length,me=ue[ce].name;me=me.substr(0,me.lastIndexOf('/')+1);var pe=le.folder(me),fe=pe.filter(function(_e){return!!de[_e]}),xe={};0<=me.indexOf('pdata')&&(xe.acqus=le.file(me.replace(/pdata\/[0-9]\//,'acqus')).asText());for(var be=0;be<fe.length;++be){var ye=fe[be].name.lastIndexOf('/'),me=fe[be].name.substr(ye+1);xe[me]=de[me]===ne?new ee(fe[be].asArrayBuffer()):fe[be].asText()}he[ce]={filename:ue[ce].name,value:R(xe,oe)}}return he},converFolder:R}},function(E,D,I){'use strict';(function(P){function T(){return O.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function F(qe,$e){if(T()<$e)throw new RangeError('Invalid typed array length');return O.TYPED_ARRAY_SUPPORT?(qe=new Uint8Array($e),qe.__proto__=O.prototype):(null===qe&&(qe=new O($e)),qe.length=$e),qe}function O(qe,$e,Ze){if(!O.TYPED_ARRAY_SUPPORT&&!(this instanceof O))return new O(qe,$e,Ze);if('number'==typeof qe){if('string'==typeof $e)throw new Error('If encoding is specified then the first argument must be a string');return K(this,qe)}return $(this,qe,$e,Ze)}function $(qe,$e,Ze,We){if('number'==typeof $e)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&$e instanceof ArrayBuffer?ee(qe,$e,Ze,We):'string'==typeof $e?Q(qe,$e,Ze):te(qe,$e)}function Z(qe){if('number'!=typeof qe)throw new TypeError('"size" argument must be a number');else if(0>qe)throw new RangeError('"size" argument must not be negative')}function W(qe,$e,Ze,We){return Z($e),0>=$e?F(qe,$e):void 0===Ze?F(qe,$e):'string'==typeof We?F(qe,$e).fill(Ze,We):F(qe,$e).fill(Ze)}function K(qe,$e){if(Z($e),qe=F(qe,0>$e?0:0|ne($e)),!O.TYPED_ARRAY_SUPPORT)for(var Ze=0;Ze<$e;++Ze)qe[Ze]=0;return qe}function Q(qe,$e,Ze){if(('string'!=typeof Ze||''===Ze)&&(Ze='utf8'),!O.isEncoding(Ze))throw new TypeError('"encoding" must be a valid string encoding');var We=0|se($e,Ze);qe=F(qe,We);var He=qe.write($e,Ze);return He!==We&&(qe=qe.slice(0,He)),qe}function G(qe,$e){var Ze=0>$e.length?0:0|ne($e.length);qe=F(qe,Ze);for(var We=0;We<Ze;We+=1)qe[We]=255&$e[We];return qe}function ee(qe,$e,Ze,We){if($e.byteLength,0>Ze||$e.byteLength<Ze)throw new RangeError('\'offset\' is out of bounds');if($e.byteLength<Ze+(We||0))throw new RangeError('\'length\' is out of bounds');return $e=void 0===Ze&&void 0===We?new Uint8Array($e):void 0===We?new Uint8Array($e,Ze):new Uint8Array($e,Ze,We),O.TYPED_ARRAY_SUPPORT?(qe=$e,qe.__proto__=O.prototype):qe=G(qe,$e),qe}function te(qe,$e){if(O.isBuffer($e)){var Ze=0|ne($e.length);return(qe=F(qe,Ze),0===qe.length)?qe:($e.copy(qe,0,0,Ze),qe)}if($e){if('undefined'!=typeof ArrayBuffer&&$e.buffer instanceof ArrayBuffer||'length'in $e)return'number'!=typeof $e.length||Ye($e.length)?F(qe,0):G(qe,$e);if('Buffer'===$e.type&&Ue($e.data))return G(qe,$e.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function ne(qe){if(qe>=T())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+T().toString(16)+' bytes');return 0|qe}function se(qe,$e){if(O.isBuffer(qe))return qe.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(qe)||qe instanceof ArrayBuffer))return qe.byteLength;'string'!=typeof qe&&(qe=''+qe);var Ze=qe.length;if(0===Ze)return 0;for(var We=!1;;)switch($e){case'ascii':case'latin1':case'binary':return Ze;case'utf8':case'utf-8':case void 0:return Fe(qe).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*Ze;case'hex':return Ze>>>1;case'base64':return Xe(qe).length;default:if(We)return Fe(qe).length;$e=(''+$e).toLowerCase(),We=!0;}}function oe(qe,$e,Ze){var We=!1;if((void 0===$e||0>$e)&&($e=0),$e>this.length)return'';if((void 0===Ze||Ze>this.length)&&(Ze=this.length),0>=Ze)return'';if(Ze>>>=0,$e>>>=0,Ze<=$e)return'';for(qe||(qe='utf8');;)switch(qe){case'hex':return je(this,$e,Ze);case'utf8':case'utf-8':return be(this,$e,Ze);case'ascii':return _e(this,$e,Ze);case'latin1':case'binary':return ke(this,$e,Ze);case'base64':return xe(this,$e,Ze);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return we(this,$e,Ze);default:if(We)throw new TypeError('Unknown encoding: '+qe);qe=(qe+'').toLowerCase(),We=!0;}}function le(qe,$e,Ze){var We=qe[$e];qe[$e]=qe[Ze],qe[Ze]=We}function de(qe,$e,Ze,We,He){if(0===qe.length)return-1;if('string'==typeof Ze?(We=Ze,Ze=0):2147483647<Ze?Ze=2147483647:-2147483648>Ze&&(Ze=-2147483648),Ze=+Ze,isNaN(Ze)&&(Ze=He?0:qe.length-1),0>Ze&&(Ze=qe.length+Ze),Ze>=qe.length){if(He)return-1;Ze=qe.length-1}else if(0>Ze)if(He)Ze=0;else return-1;if('string'==typeof $e&&($e=O.from($e,We)),O.isBuffer($e))return 0===$e.length?-1:ue(qe,$e,Ze,We,He);if('number'==typeof $e)return $e&=255,O.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?He?Uint8Array.prototype.indexOf.call(qe,$e,Ze):Uint8Array.prototype.lastIndexOf.call(qe,$e,Ze):ue(qe,[$e],Ze,We,He);throw new TypeError('val must be string, number or Buffer')}function ue(qe,$e,Ze,We,He){function Je(at,st){return 1===Ke?at[st]:at.readUInt16BE(st*Ke)}var Ke=1,Qe=qe.length,Ge=$e.length;if(void 0!==We&&(We=(We+'').toLowerCase(),'ucs2'===We||'ucs-2'===We||'utf16le'===We||'utf-16le'===We)){if(2>qe.length||2>$e.length)return-1;Ke=2,Qe/=2,Ge/=2,Ze/=2}var et;if(He){var tt=-1;for(et=Ze;et<Qe;et++)if(Je(qe,et)!==Je($e,-1==tt?0:et-tt))-1!=tt&&(et-=et-tt),tt=-1;else if(-1==tt&&(tt=et),et-tt+1===Ge)return tt*Ke}else for(Ze+Ge>Qe&&(Ze=Qe-Ge),et=Ze;0<=et;et--){for(var it=!0,nt=0;nt<Ge;nt++)if(Je(qe,et+nt)!==Je($e,nt)){it=!1;break}if(it)return et}return-1}function he(qe,$e,Ze,We){Ze=+Ze||0;var He=qe.length-Ze;We?(We=+We,We>He&&(We=He)):We=He;var Je=$e.length;if(0!=Je%2)throw new TypeError('Invalid hex string');We>Je/2&&(We=Je/2);for(var Ke=0,Qe;Ke<We;++Ke){if(Qe=parseInt($e.substr(2*Ke,2),16),isNaN(Qe))return Ke;qe[Ze+Ke]=Qe}return Ke}function ce(qe,$e,Ze,We){return Ne(Fe($e,qe.length-Ze),qe,Ze,We)}function ge(qe,$e,Ze,We){return Ne(ze($e),qe,Ze,We)}function me(qe,$e,Ze,We){return ge(qe,$e,Ze,We)}function pe(qe,$e,Ze,We){return Ne(Xe($e),qe,Ze,We)}function fe(qe,$e,Ze,We){return Ne(Me($e,qe.length-Ze),qe,Ze,We)}function xe(qe,$e,Ze){return 0===$e&&Ze===qe.length?Oe.fromByteArray(qe):Oe.fromByteArray(qe.slice($e,Ze))}function be(qe,$e,Ze){Ze=Math.min(qe.length,Ze);for(var We=[],He=$e;He<Ze;){var Je=qe[He],Ke=null,Qe=239<Je?4:223<Je?3:191<Je?2:1;if(He+Qe<=Ze){var Ge,et,tt,it;1==Qe?128>Je&&(Ke=Je):2==Qe?(Ge=qe[He+1],128==(192&Ge)&&(it=(31&Je)<<6|63&Ge,127<it&&(Ke=it))):3==Qe?(Ge=qe[He+1],et=qe[He+2],128==(192&Ge)&&128==(192&et)&&(it=(15&Je)<<12|(63&Ge)<<6|63&et,2047<it&&(55296>it||57343<it)&&(Ke=it))):4==Qe?(Ge=qe[He+1],et=qe[He+2],tt=qe[He+3],128==(192&Ge)&&128==(192&et)&&128==(192&tt)&&(it=(15&Je)<<18|(63&Ge)<<12|(63&et)<<6|63&tt,65535<it&&1114112>it&&(Ke=it))):void 0}null===Ke?(Ke=65533,Qe=1):65535<Ke&&(Ke-=65536,We.push(55296|1023&Ke>>>10),Ke=56320|1023&Ke),We.push(Ke),He+=Qe}return ye(We)}function ye(qe){var $e=qe.length;if($e<=Be)return String.fromCharCode.apply(String,qe);for(var Ze='',We=0;We<$e;)Ze+=String.fromCharCode.apply(String,qe.slice(We,We+=Be));return Ze}function _e(qe,$e,Ze){var We='';Ze=Math.min(qe.length,Ze);for(var He=$e;He<Ze;++He)We+=String.fromCharCode(127&qe[He]);return We}function ke(qe,$e,Ze){var We='';Ze=Math.min(qe.length,Ze);for(var He=$e;He<Ze;++He)We+=String.fromCharCode(qe[He]);return We}function je(qe,$e,Ze){var We=qe.length;(!$e||0>$e)&&($e=0),(!Ze||0>Ze||Ze>We)&&(Ze=We);for(var He='',Je=$e;Je<Ze;++Je)He+=Te(qe[Je]);return He}function we(qe,$e,Ze){for(var We=qe.slice($e,Ze),He='',Je=0;Je<We.length;Je+=2)He+=String.fromCharCode(We[Je]+256*We[Je+1]);return He}function Se(qe,$e,Ze){if(0!=qe%1||0>qe)throw new RangeError('offset is not uint');if(qe+$e>Ze)throw new RangeError('Trying to access beyond buffer length')}function ve(qe,$e,Ze,We,He,Je){if(!O.isBuffer(qe))throw new TypeError('"buffer" argument must be a Buffer instance');if($e>He||$e<Je)throw new RangeError('"value" argument is out of bounds');if(Ze+We>qe.length)throw new RangeError('Index out of range')}function Ee(qe,$e,Ze,We){0>$e&&($e=65535+$e+1);for(var He=0,Je=Math.min(qe.length-Ze,2);He<Je;++He)qe[Ze+He]=($e&255<<8*(We?He:1-He))>>>8*(We?He:1-He)}function De(qe,$e,Ze,We){0>$e&&($e=4294967295+$e+1);for(var He=0,Je=Math.min(qe.length-Ze,4);He<Je;++He)qe[Ze+He]=255&$e>>>8*(We?He:3-He)}function Ce(qe,$e,Ze,We){if(Ze+We>qe.length)throw new RangeError('Index out of range');if(0>Ze)throw new RangeError('Index out of range')}function Ae(qe,$e,Ze,We,He){return He||Ce(qe,$e,Ze,4,3.4028234663852886e38,-3.4028234663852886e38),Le.write(qe,$e,Ze,We,23,4),Ze+4}function Ie(qe,$e,Ze,We,He){return He||Ce(qe,$e,Ze,8,1.7976931348623157e308,-1.7976931348623157e308),Le.write(qe,$e,Ze,We,52,8),Ze+8}function Pe(qe){if(qe=Re(qe).replace(Ve,''),2>qe.length)return'';for(;0!=qe.length%4;)qe+='=';return qe}function Re(qe){return qe.trim?qe.trim():qe.replace(/^\s+|\s+$/g,'')}function Te(qe){return 16>qe?'0'+qe.toString(16):qe.toString(16)}function Fe(qe,$e){$e=$e||Infinity;for(var We=qe.length,He=null,Je=[],Ke=0,Ze;Ke<We;++Ke){if(Ze=qe.charCodeAt(Ke),55295<Ze&&57344>Ze){if(!He){if(56319<Ze){-1<($e-=3)&&Je.push(239,191,189);continue}else if(Ke+1===We){-1<($e-=3)&&Je.push(239,191,189);continue}He=Ze;continue}if(56320>Ze){-1<($e-=3)&&Je.push(239,191,189),He=Ze;continue}Ze=(He-55296<<10|Ze-56320)+65536}else He&&-1<($e-=3)&&Je.push(239,191,189);if(He=null,128>Ze){if(0>($e-=1))break;Je.push(Ze)}else if(2048>Ze){if(0>($e-=2))break;Je.push(192|Ze>>6,128|63&Ze)}else if(65536>Ze){if(0>($e-=3))break;Je.push(224|Ze>>12,128|63&Ze>>6,128|63&Ze)}else if(1114112>Ze){if(0>($e-=4))break;Je.push(240|Ze>>18,128|63&Ze>>12,128|63&Ze>>6,128|63&Ze)}else throw new Error('Invalid code point')}return Je}function ze(qe){for(var $e=[],Ze=0;Ze<qe.length;++Ze)$e.push(255&qe.charCodeAt(Ze));return $e}function Me(qe,$e){for(var Je=[],Ke=0,Ze,We,He;Ke<qe.length&&!(0>($e-=2));++Ke)Ze=qe.charCodeAt(Ke),We=Ze>>8,He=Ze%256,Je.push(He),Je.push(We);return Je}function Xe(qe){return Oe.toByteArray(Pe(qe))}function Ne(qe,$e,Ze,We){for(var He=0;He<We&&!(He+Ze>=$e.length||He>=qe.length);++He)$e[He+Ze]=qe[He];return He}function Ye(qe){return qe!==qe}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var Oe=I(55),Le=I(56),Ue=I(58);D.Buffer=O,D.SlowBuffer=function(qe){return+qe!=qe&&(qe=0),O.alloc(+qe)},D.INSPECT_MAX_BYTES=50,O.TYPED_ARRAY_SUPPORT=P.TYPED_ARRAY_SUPPORT===void 0?function(){try{var qe=new Uint8Array(1);return qe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===qe.foo()&&'function'==typeof qe.subarray&&0===qe.subarray(1,1).byteLength}catch($e){return!1}}():P.TYPED_ARRAY_SUPPORT,D.kMaxLength=T(),O.poolSize=8192,O._augment=function(qe){return qe.__proto__=O.prototype,qe},O.from=function(qe,$e,Ze){return $(null,qe,$e,Ze)},O.TYPED_ARRAY_SUPPORT&&(O.prototype.__proto__=Uint8Array.prototype,O.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&O[Symbol.species]===O&&Object.defineProperty(O,Symbol.species,{value:null,configurable:!0})),O.alloc=function(qe,$e,Ze){return W(null,qe,$e,Ze)},O.allocUnsafe=function(qe){return K(null,qe)},O.allocUnsafeSlow=function(qe){return K(null,qe)},O.isBuffer=function($e){return!!(null!=$e&&$e._isBuffer)},O.compare=function($e,Ze){if(!O.isBuffer($e)||!O.isBuffer(Ze))throw new TypeError('Arguments must be Buffers');if($e===Ze)return 0;for(var We=$e.length,He=Ze.length,Je=0,Ke=Math.min(We,He);Je<Ke;++Je)if($e[Je]!==Ze[Je]){We=$e[Je],He=Ze[Je];break}return We<He?-1:He<We?1:0},O.isEncoding=function($e){switch(($e+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},O.concat=function($e,Ze){if(!Ue($e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===$e.length)return O.alloc(0);var We;if(Ze===void 0)for(Ze=0,We=0;We<$e.length;++We)Ze+=$e[We].length;var He=O.allocUnsafe(Ze),Je=0;for(We=0;We<$e.length;++We){var Ke=$e[We];if(!O.isBuffer(Ke))throw new TypeError('"list" argument must be an Array of Buffers');Ke.copy(He,Je),Je+=Ke.length}return He},O.byteLength=se,O.prototype._isBuffer=!0,O.prototype.swap16=function(){var $e=this.length;if(0!=$e%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var Ze=0;Ze<$e;Ze+=2)le(this,Ze,Ze+1);return this},O.prototype.swap32=function(){var $e=this.length;if(0!=$e%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var Ze=0;Ze<$e;Ze+=4)le(this,Ze,Ze+3),le(this,Ze+1,Ze+2);return this},O.prototype.swap64=function(){var $e=this.length;if(0!=$e%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var Ze=0;Ze<$e;Ze+=8)le(this,Ze,Ze+7),le(this,Ze+1,Ze+6),le(this,Ze+2,Ze+5),le(this,Ze+3,Ze+4);return this},O.prototype.toString=function(){var $e=0|this.length;return 0==$e?'':0===arguments.length?be(this,0,$e):oe.apply(this,arguments)},O.prototype.equals=function($e){if(!O.isBuffer($e))throw new TypeError('Argument must be a Buffer');return this===$e||0===O.compare(this,$e)},O.prototype.inspect=function(){var $e='',Ze=D.INSPECT_MAX_BYTES;return 0<this.length&&($e=this.toString('hex',0,Ze).match(/.{2}/g).join(' '),this.length>Ze&&($e+=' ... ')),'<Buffer '+$e+'>'},O.prototype.compare=function($e,Ze,We,He,Je){if(!O.isBuffer($e))throw new TypeError('Argument must be a Buffer');if(void 0===Ze&&(Ze=0),void 0===We&&(We=$e?$e.length:0),void 0===He&&(He=0),void 0===Je&&(Je=this.length),0>Ze||We>$e.length||0>He||Je>this.length)throw new RangeError('out of range index');if(He>=Je&&Ze>=We)return 0;if(He>=Je)return-1;if(Ze>=We)return 1;if(Ze>>>=0,We>>>=0,He>>>=0,Je>>>=0,this===$e)return 0;for(var Ke=Je-He,Qe=We-Ze,Ge=Math.min(Ke,Qe),et=this.slice(He,Je),tt=$e.slice(Ze,We),it=0;it<Ge;++it)if(et[it]!==tt[it]){Ke=et[it],Qe=tt[it];break}return Ke<Qe?-1:Qe<Ke?1:0},O.prototype.includes=function($e,Ze,We){return-1!==this.indexOf($e,Ze,We)},O.prototype.indexOf=function($e,Ze,We){return de(this,$e,Ze,We,!0)},O.prototype.lastIndexOf=function($e,Ze,We){return de(this,$e,Ze,We,!1)},O.prototype.write=function($e,Ze,We,He){if(void 0===Ze)He='utf8',We=this.length,Ze=0;else if(void 0===We&&'string'==typeof Ze)He=Ze,We=this.length,Ze=0;else if(isFinite(Ze))Ze|=0,isFinite(We)?(We|=0,void 0===He&&(He='utf8')):(He=We,We=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var Je=this.length-Ze;if((void 0===We||We>Je)&&(We=Je),0<$e.length&&(0>We||0>Ze)||Ze>this.length)throw new RangeError('Attempt to write outside buffer bounds');He||(He='utf8');for(var Ke=!1;;)switch(He){case'hex':return he(this,$e,Ze,We);case'utf8':case'utf-8':return ce(this,$e,Ze,We);case'ascii':return ge(this,$e,Ze,We);case'latin1':case'binary':return me(this,$e,Ze,We);case'base64':return pe(this,$e,Ze,We);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return fe(this,$e,Ze,We);default:if(Ke)throw new TypeError('Unknown encoding: '+He);He=(''+He).toLowerCase(),Ke=!0;}},O.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var Be=4096;O.prototype.slice=function($e,Ze){var We=this.length;$e=~~$e,Ze=Ze===void 0?We:~~Ze,0>$e?($e+=We,0>$e&&($e=0)):$e>We&&($e=We),0>Ze?(Ze+=We,0>Ze&&(Ze=0)):Ze>We&&(Ze=We),Ze<$e&&(Ze=$e);var He;if(O.TYPED_ARRAY_SUPPORT)He=this.subarray($e,Ze),He.__proto__=O.prototype;else{var Je=Ze-$e;He=new O(Je,void 0);for(var Ke=0;Ke<Je;++Ke)He[Ke]=this[Ke+$e]}return He},O.prototype.readUIntLE=function($e,Ze,We){$e|=0,Ze|=0,We||Se($e,Ze,this.length);for(var He=this[$e],Je=1,Ke=0;++Ke<Ze&&(Je*=256);)He+=this[$e+Ke]*Je;return He},O.prototype.readUIntBE=function($e,Ze,We){$e|=0,Ze|=0,We||Se($e,Ze,this.length);for(var He=this[$e+--Ze],Je=1;0<Ze&&(Je*=256);)He+=this[$e+--Ze]*Je;return He},O.prototype.readUInt8=function($e,Ze){return Ze||Se($e,1,this.length),this[$e]},O.prototype.readUInt16LE=function($e,Ze){return Ze||Se($e,2,this.length),this[$e]|this[$e+1]<<8},O.prototype.readUInt16BE=function($e,Ze){return Ze||Se($e,2,this.length),this[$e]<<8|this[$e+1]},O.prototype.readUInt32LE=function($e,Ze){return Ze||Se($e,4,this.length),(this[$e]|this[$e+1]<<8|this[$e+2]<<16)+16777216*this[$e+3]},O.prototype.readUInt32BE=function($e,Ze){return Ze||Se($e,4,this.length),16777216*this[$e]+(this[$e+1]<<16|this[$e+2]<<8|this[$e+3])},O.prototype.readIntLE=function($e,Ze,We){$e|=0,Ze|=0,We||Se($e,Ze,this.length);for(var He=this[$e],Je=1,Ke=0;++Ke<Ze&&(Je*=256);)He+=this[$e+Ke]*Je;return Je*=128,He>=Je&&(He-=Math.pow(2,8*Ze)),He},O.prototype.readIntBE=function($e,Ze,We){$e|=0,Ze|=0,We||Se($e,Ze,this.length);for(var He=Ze,Je=1,Ke=this[$e+--He];0<He&&(Je*=256);)Ke+=this[$e+--He]*Je;return Je*=128,Ke>=Je&&(Ke-=Math.pow(2,8*Ze)),Ke},O.prototype.readInt8=function($e,Ze){return Ze||Se($e,1,this.length),128&this[$e]?-1*(255-this[$e]+1):this[$e]},O.prototype.readInt16LE=function($e,Ze){Ze||Se($e,2,this.length);var We=this[$e]|this[$e+1]<<8;return 32768&We?4294901760|We:We},O.prototype.readInt16BE=function($e,Ze){Ze||Se($e,2,this.length);var We=this[$e+1]|this[$e]<<8;return 32768&We?4294901760|We:We},O.prototype.readInt32LE=function($e,Ze){return Ze||Se($e,4,this.length),this[$e]|this[$e+1]<<8|this[$e+2]<<16|this[$e+3]<<24},O.prototype.readInt32BE=function($e,Ze){return Ze||Se($e,4,this.length),this[$e]<<24|this[$e+1]<<16|this[$e+2]<<8|this[$e+3]},O.prototype.readFloatLE=function($e,Ze){return Ze||Se($e,4,this.length),Le.read(this,$e,!0,23,4)},O.prototype.readFloatBE=function($e,Ze){return Ze||Se($e,4,this.length),Le.read(this,$e,!1,23,4)},O.prototype.readDoubleLE=function($e,Ze){return Ze||Se($e,8,this.length),Le.read(this,$e,!0,52,8)},O.prototype.readDoubleBE=function($e,Ze){return Ze||Se($e,8,this.length),Le.read(this,$e,!1,52,8)},O.prototype.writeUIntLE=function($e,Ze,We,He){if($e=+$e,Ze|=0,We|=0,!He){var Je=Math.pow(2,8*We)-1;ve(this,$e,Ze,We,Je,0)}var Ke=1,Qe=0;for(this[Ze]=255&$e;++Qe<We&&(Ke*=256);)this[Ze+Qe]=255&$e/Ke;return Ze+We},O.prototype.writeUIntBE=function($e,Ze,We,He){if($e=+$e,Ze|=0,We|=0,!He){var Je=Math.pow(2,8*We)-1;ve(this,$e,Ze,We,Je,0)}var Ke=We-1,Qe=1;for(this[Ze+Ke]=255&$e;0<=--Ke&&(Qe*=256);)this[Ze+Ke]=255&$e/Qe;return Ze+We},O.prototype.writeUInt8=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,1,255,0),O.TYPED_ARRAY_SUPPORT||($e=Math.floor($e)),this[Ze]=255&$e,Ze+1},O.prototype.writeUInt16LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,2,65535,0),O.TYPED_ARRAY_SUPPORT?(this[Ze]=255&$e,this[Ze+1]=$e>>>8):Ee(this,$e,Ze,!0),Ze+2},O.prototype.writeUInt16BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,2,65535,0),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>8,this[Ze+1]=255&$e):Ee(this,$e,Ze,!1),Ze+2},O.prototype.writeUInt32LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,4,4294967295,0),O.TYPED_ARRAY_SUPPORT?(this[Ze+3]=$e>>>24,this[Ze+2]=$e>>>16,this[Ze+1]=$e>>>8,this[Ze]=255&$e):De(this,$e,Ze,!0),Ze+4},O.prototype.writeUInt32BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,4,4294967295,0),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>24,this[Ze+1]=$e>>>16,this[Ze+2]=$e>>>8,this[Ze+3]=255&$e):De(this,$e,Ze,!1),Ze+4},O.prototype.writeIntLE=function($e,Ze,We,He){if($e=+$e,Ze|=0,!He){var Je=Math.pow(2,8*We-1);ve(this,$e,Ze,We,Je-1,-Je)}var Ke=0,Qe=1,Ge=0;for(this[Ze]=255&$e;++Ke<We&&(Qe*=256);)0>$e&&0==Ge&&0!==this[Ze+Ke-1]&&(Ge=1),this[Ze+Ke]=255&($e/Qe>>0)-Ge;return Ze+We},O.prototype.writeIntBE=function($e,Ze,We,He){if($e=+$e,Ze|=0,!He){var Je=Math.pow(2,8*We-1);ve(this,$e,Ze,We,Je-1,-Je)}var Ke=We-1,Qe=1,Ge=0;for(this[Ze+Ke]=255&$e;0<=--Ke&&(Qe*=256);)0>$e&&0==Ge&&0!==this[Ze+Ke+1]&&(Ge=1),this[Ze+Ke]=255&($e/Qe>>0)-Ge;return Ze+We},O.prototype.writeInt8=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,1,127,-128),O.TYPED_ARRAY_SUPPORT||($e=Math.floor($e)),0>$e&&($e=255+$e+1),this[Ze]=255&$e,Ze+1},O.prototype.writeInt16LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,2,32767,-32768),O.TYPED_ARRAY_SUPPORT?(this[Ze]=255&$e,this[Ze+1]=$e>>>8):Ee(this,$e,Ze,!0),Ze+2},O.prototype.writeInt16BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,2,32767,-32768),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>8,this[Ze+1]=255&$e):Ee(this,$e,Ze,!1),Ze+2},O.prototype.writeInt32LE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,4,2147483647,-2147483648),O.TYPED_ARRAY_SUPPORT?(this[Ze]=255&$e,this[Ze+1]=$e>>>8,this[Ze+2]=$e>>>16,this[Ze+3]=$e>>>24):De(this,$e,Ze,!0),Ze+4},O.prototype.writeInt32BE=function($e,Ze,We){return $e=+$e,Ze|=0,We||ve(this,$e,Ze,4,2147483647,-2147483648),0>$e&&($e=4294967295+$e+1),O.TYPED_ARRAY_SUPPORT?(this[Ze]=$e>>>24,this[Ze+1]=$e>>>16,this[Ze+2]=$e>>>8,this[Ze+3]=255&$e):De(this,$e,Ze,!1),Ze+4},O.prototype.writeFloatLE=function($e,Ze,We){return Ae(this,$e,Ze,!0,We)},O.prototype.writeFloatBE=function($e,Ze,We){return Ae(this,$e,Ze,!1,We)},O.prototype.writeDoubleLE=function($e,Ze,We){return Ie(this,$e,Ze,!0,We)},O.prototype.writeDoubleBE=function($e,Ze,We){return Ie(this,$e,Ze,!1,We)},O.prototype.copy=function($e,Ze,We,He){if(We||(We=0),He||0===He||(He=this.length),Ze>=$e.length&&(Ze=$e.length),Ze||(Ze=0),0<He&&He<We&&(He=We),He===We)return 0;if(0===$e.length||0===this.length)return 0;if(0>Ze)throw new RangeError('targetStart out of bounds');if(0>We||We>=this.length)throw new RangeError('sourceStart out of bounds');if(0>He)throw new RangeError('sourceEnd out of bounds');He>this.length&&(He=this.length),$e.length-Ze<He-We&&(He=$e.length-Ze+We);var Je=He-We,Ke;if(this===$e&&We<Ze&&Ze<He)for(Ke=Je-1;0<=Ke;--Ke)$e[Ke+Ze]=this[Ke+We];else if(1e3>Je||!O.TYPED_ARRAY_SUPPORT)for(Ke=0;Ke<Je;++Ke)$e[Ke+Ze]=this[Ke+We];else Uint8Array.prototype.set.call($e,this.subarray(We,We+Je),Ze);return Je},O.prototype.fill=function($e,Ze,We,He){if('string'==typeof $e){if('string'==typeof Ze?(He=Ze,Ze=0,We=this.length):'string'==typeof We&&(He=We,We=this.length),1===$e.length){var Je=$e.charCodeAt(0);256>Je&&($e=Je)}if(void 0!==He&&'string'!=typeof He)throw new TypeError('encoding must be a string');if('string'==typeof He&&!O.isEncoding(He))throw new TypeError('Unknown encoding: '+He)}else'number'==typeof $e&&($e&=255);if(0>Ze||this.length<Ze||this.length<We)throw new RangeError('Out of range index');if(We<=Ze)return this;Ze>>>=0,We=We===void 0?this.length:We>>>0,$e||($e=0);var Ke;if('number'==typeof $e)for(Ke=Ze;Ke<We;++Ke)this[Ke]=$e;else{var Qe=O.isBuffer($e)?$e:Fe(new O($e,He).toString()),Ge=Qe.length;for(Ke=0;Ke<We-Ze;++Ke)this[Ke+Ze]=Qe[Ke%Ge]}return this};var Ve=/[^+\/0-9A-Za-z-_]/g}).call(D,I(49))},function(E){'use strict';var P=Object.prototype.hasOwnProperty,R=Object.prototype.toString,T=function($){return'function'==typeof Array.isArray?Array.isArray($):'[object Array]'===R.call($)},F=function($){if(!$||'[object Object]'!==R.call($))return!1;var Z=P.call($,'constructor'),W=$.constructor&&$.constructor.prototype&&P.call($.constructor.prototype,'isPrototypeOf');if($.constructor&&!Z&&!W)return!1;for(var K in $);return'undefined'==typeof K||P.call($,K)};E.exports=function O(){var ee=arguments[0],te=1,ne=arguments.length,ae=!1,$,Z,W,K,Q,G;for('boolean'==typeof ee?(ae=ee,ee=arguments[1]||{},te=2):('object'!=typeof ee&&'function'!=typeof ee||null==ee)&&(ee={});te<ne;++te)if($=arguments[te],null!=$)for(Z in $)W=ee[Z],K=$[Z],ee!==K&&(ae&&K&&(F(K)||(Q=T(K)))?(Q?(Q=!1,G=W&&T(W)?W:[]):G=W&&F(W)?W:{},ee[Z]=O(ae,G,K)):'undefined'!=typeof K&&(ee[Z]=K));return ee}},function(E,D,I){'use strict';function P(){function K(fe){for(var xe=fe.length,be=Array(xe),ye=0;ye<xe;ye++)be[ye]=parseFloat(fe[ye]);return be}function Q(){}function ee(fe){return fe.toLowerCase().replace(/[^a-z0-9]/g,'')}function te(fe){return-1!==pe.indexOf(fe)}function ne(fe){var xe=fe.spectra,be=xe.length,ye={times:Array(be),series:[{name:'ms',dimension:2,data:Array(be)}]},_e,ke=[];for(_e=0;_e<pe.length;_e++){var je=ee(pe[_e]);xe[0][je]&&(ke.push(je),ye.series.push({name:je,dimension:1,data:Array(be)}))}for(_e=0;_e<be;_e++){var we=xe[_e];ye.times[_e]=we.pageValue;for(var Se=0;Se<ke.length;Se++)ye.series[Se+1].data[_e]=parseFloat(we[ke[Se]]);we.data&&(ye.series[0].data[_e]=[we.data[0].x,we.data[0].y])}fe.gcms=ye}function ae(fe){var xe=fe.spectra,be=[],ye;for(ye=0;ye<pe.length;ye++){var _e=ee(pe[ye]);xe[0][_e]&&be.push(_e)}if(0!==be.length){var ke={gc:{},ms:[]};for(ye=0;ye<be.length;ye++)ke.gc[be[ye]]=[];for(ye=0;ye<xe.length;ye++){for(var je=xe[ye],we=0;we<be.length;we++)ke.gc[be[we]].push(je.pageValue),ke.gc[be[we]].push(parseFloat(je[be[we]]));je.data&&(ke.ms[ye]=je.data[0])}fe.gcms=ke}}function se(fe,xe){if(xe.xFactor||(xe.xFactor=1),xe.yFactor||(xe.yFactor=1),xe.observeFrequency&&xe.xUnit&&'HZ'===xe.xUnit.toUpperCase()&&(xe.xUnit='PPM',xe.xFactor/=xe.observeFrequency,xe.firstX/=xe.observeFrequency,xe.lastX/=xe.observeFrequency,xe.deltaX/=xe.observeFrequency),fe.shiftOffsetVal){var be=xe.firstX-fe.shiftOffsetVal;xe.firstX-=be,xe.lastX-=be}}function oe(fe){fe=fe.sort(le);var xe=fe.length;return fe[Math.floor(xe/2)]}function le(fe,xe){return fe-xe}function de(fe){for(var xe=fe[0].data[0][0],be=xe,ye=fe.length,_e=fe[0].data[0].length/2,ke=Array(ye),je=0;je<ye;je++){ke[je]=Array(_e);for(var we=fe[je].data[0],Se=0,ve;Se<_e;Se++)ve=we[2*Se+1],ke[je][Se]=ve,ve<xe&&(xe=ve),ve>be&&(be=ve)}return{z:ke,minX:fe[0].data[0][0],maxX:fe[0].data[0][fe[0].data[0].length-2],minY:fe[0].pageValue,maxY:fe[ye-1].pageValue,minZ:xe,maxZ:be,noise:oe(ke[0].map(Math.abs))}}function ue(fe,xe){var be=de(fe.spectra);xe.noContour||(fe.contourLines=he(be,xe),delete be.z),fe.minMax=be}function he(fe,xe){for(var be=fe.noise,ye=fe.z,_e=xe.nbContourLevels||7,ke=void 0===xe.noiseMultiplier?5:xe.noiseMultiplier,Ie=ye.length,Pe=ye[0].length,Me=fe.minX,Xe=fe.maxX,Ne=(Xe-Me)/(Pe-1),Ye=fe.minY,Oe=fe.maxY,Le=(Oe-Ye)/(Ie-1),Ue=fe.minZ,Be=fe.maxZ,Ve=2*_e,qe=Array(Ve),Ze=0,je,we,Se,ve,Ee,De,Ce,Ae,Re,Te,Fe,ze,$e,We;Ze<Ve;Ze++){We={},qe[Ze]=We;var He=Ze%2,Je=(Be-ke*be)*Math.exp((Ze>>1)-_e);$e=0==He?Je+ke*be:0-Je-ke*be;var Ke=[];if(We.zValue=$e,We.lines=Ke,!($e<=Ue||$e>=Be))for(var Qe=0;Qe<Ie-1;Qe++)for(var Ge=ye[Qe],et=ye[Qe+1],tt=0;tt<Pe-1;tt++)je=Ge[tt],we=Ge[tt+1],Se=et[tt],ve=et[tt+1],Ee=je>$e,De=we>$e,Ce=Se>$e,Ae=ve>$e,Ee!=De&&Ee!=Ce&&(Re=tt+($e-je)/(we-je),Te=Qe,Fe=tt,ze=Qe+($e-je)/(Se-je),Ke.push(Re*Ne+Me),Ke.push(Te*Le+Ye),Ke.push(Fe*Ne+Me),Ke.push(ze*Le+Ye)),Ae!=De&&Ae!=Ce&&(Re=tt+1,Te=Qe+1-($e-ve)/(we-ve),Fe=tt+1-($e-ve)/(Se-ve),ze=Qe+1,Ke.push(Re*Ne+Me),Ke.push(Te*Le+Ye),Ke.push(Fe*Ne+Me),Ke.push(ze*Le+Ye)),De!=Ce&&(Re=(tt+1-($e-we)/(Se-we))*Ne+Me,Te=(Qe+($e-we)/(Se-we))*Le+Ye,De!=Ee&&(Fe=tt+1-($e-we)/(je-we),ze=Qe,Ke.push(Re),Ke.push(Te),Ke.push(Fe*Ne+Me),Ke.push(ze*Le+Ye)),Ce!=Ee&&(Fe=tt,ze=Qe+1-($e-Se)/(je-Se),Ke.push(Re),Ke.push(Te),Ke.push(Fe*Ne+Me),Ke.push(ze*Le+Ye)),De!=Ae&&(Fe=tt+1,ze=Qe+($e-we)/(ve-we),Ke.push(Re),Ke.push(Te),Ke.push(Fe*Ne+Me),Ke.push(ze*Le+Ye)),Ce!=Ae&&(Fe=tt+($e-Se)/(ve-Se),ze=Qe+1,Ke.push(Re),Ke.push(Te),Ke.push(Fe*Ne+Me),Ke.push(ze*Le+Ye)))}return{minX:fe.minX,maxX:fe.maxX,minY:fe.minY,maxY:fe.maxY,segments:qe}}function ce(fe,xe){var be=fe.yFactor,ye=fe.deltaX;fe.isXYdata=!0;var _e=[];fe.data=[_e];for(var ke=fe.firstX,je=fe.firstY,we=!1,Se=0,ve;Se<xe.length;Se++)if(ve=xe.charCodeAt(Se),13===ve||10===ve)we=!0;else if(we)break;for(var Ee=!0,De=!1,Ce=!1,Ae=0,Ie=!1,Pe=!1,Re=0,Te=!1,Fe=!1,ze=!1,Me=0,ve;Se<=xe.length;Se++)if(ve=Se===xe.length?13:xe.charCodeAt(Se),Pe)(13===ve||10===ve)&&(Ee=!0,Pe=!1);else if(57>=ve&&48<=ve)Fe=!0,0<Me?Re+=(ve-48)/Math.pow(10,Me++):(Re*=10,Re+=ve-48);else if(44===ve||46===ve)Fe=!0,Me++;else{if(Fe){if(Ee)Ee=!1,Ce&&(ze=!0);else if(ze)ze=!1;else{De&&(Ae=Te?0-Re:Re,Ce=!0,De=!1);for(var Xe=Ie?Re-1:1,Ne=0;Ne<Xe;Ne++)Ce?je+=Ae:je=Te?0-Re:Re,_e.push(ke),_e.push(je*be),ke+=ye}Te=!1,Re=0,Me=0,Fe=!1,Ie=!1}if(74>ve&&63<ve)Fe=!0,Ce=!1,Re=ve-64;else if(96<ve&&106>ve)Fe=!0,Ce=!1,Re=ve-96,Te=!0;else if(115===ve)Fe=!0,Ie=!0,Re=9;else if(82<ve&&91>ve)Fe=!0,Ie=!0,Re=ve-82;else if(73<ve&&83>ve)Fe=!0,De=!0,Re=ve-73;else if(105<ve&&115>ve)Fe=!0,De=!0,Re=ve-105,Te=!0;else if(36===ve&&36===xe.charCodeAt(Se+1))Fe=!0,Pe=!0;else if(37===ve)Fe=!0,De=!0,Re=0,Te=!1;else if(45===ve){var Ye=xe.charCodeAt(Se+1);(48<=Ye&&57>=Ye||44===Ye||46===Ye)&&(Fe=!0,Ce=!1,Te=!0)}else(13===ve||10===ve)&&(Ee=!0,Pe=!1)}}function ge(fe,xe,be){var ye=/\$\$.*/,_e=/[,\t ]+/;fe.isPeaktable=!0;var ke,je,we,Se,ve,Ee=[];fe.data=[Ee];var De=xe.split(/,? *,?[;\r\n]+ */);for(ke=1,je=De.length;ke<je;ke++)if(ve=De[ke].trim().replace(ye,'').split(_e),0==ve.length%2)for(we=0,Se=ve.length;we<Se;we+=2)Ee.push(parseFloat(ve[we])*fe.xFactor),Ee.push(parseFloat(ve[we+1])*fe.yFactor);else be.logs.push('Format error: '+ve)}var me=/[, \t]{1,}/,pe=['TIC','.RIC','SCANNUMBER'];return function(fe,xe){xe=xe||{};var be=/^$/;xe.keepRecordsRegExp&&(be=xe.keepRecordsRegExp);var ye=!xe.withoutXY,_e=Date.now(),ke={},Pe={},je,we,Se,ve,Ee,De,Ce,Ae,Ie;Pe.profiling=[],Pe.logs=[];var Re=[];Pe.spectra=Re,Pe.info={};var Te=new Q;if('string'!=typeof fe)return Pe;for(Pe.profiling&&Pe.profiling.push({action:'Before split to LDRS',time:Date.now()-_e}),ve=fe.split(/[\r\n]+##/),Pe.profiling&&Pe.profiling.push({action:'Split to LDRS',time:Date.now()-_e}),ve[0]&&(ve[0]=ve[0].replace(/^[\r\n ]*##/,'')),(Ee=0,De=ve.length);Ee<De;Ee++){if(je=ve[Ee],Ce=je.indexOf('='),0<Ce?(we=je.substring(0,Ce),Se=je.substring(Ce+1).trim()):(we=je,Se=''),we=we.replace(/[_ -]/g,'').toUpperCase(),'DATATABLE'===we&&(Ae=Se.indexOf('\n'),-1===Ae&&(Ae=Se.indexOf('\r')),0<Ae)){var Fe=-1,ze=-1;if(Ie=Se.substring(0,Ae).split(/[ ,;\t]+/),0<Ie[0].indexOf('++')){var Me=Ie[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,'$1'),Xe=Ie[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,'$1');Fe=ke.symbol.indexOf(Me),ze=ke.symbol.indexOf(Xe)}-1===Fe&&(Fe=0),-1===ze&&(ze=0),ke.first&&(ke.first.length>Fe&&(Te.firstX=ke.first[Fe]),ke.first.length>ze&&(Te.firstY=ke.first[ze])),ke.last&&(ke.last.length>Fe&&(Te.lastX=ke.last[Fe]),ke.last.length>ze&&(Te.lastY=ke.last[ze])),ke.vardim&&ke.vardim.length>Fe&&(Te.nbPoints=ke.vardim[Fe]),ke.factor&&(ke.factor.length>Fe&&(Te.xFactor=ke.factor[Fe]),ke.factor.length>ze&&(Te.yFactor=ke.factor[ze])),ke.units&&(ke.units.length>Fe&&(Te.xUnit=ke.units[Fe]),ke.units.length>ze&&(Te.yUnit=ke.units[ze])),Te.datatable=Ie[0],Ie[1]&&-1<Ie[1].indexOf('PEAKS')?we='PEAKTABLE':Ie[1]&&(Ie[1].indexOf('XYDATA')||0<Ie[0].indexOf('++'))&&(we='XYDATA',Te.deltaX=(Te.lastX-Te.firstX)/(Te.nbPoints-1))}if('XYDATA'===we){ye&&(se(Pe,Te),Se.match(/.*\+\+.*/)?!1===xe.fastParse?O(Te,Se,Pe):(!Te.deltaX&&(Te.deltaX=(Te.lastX-Te.firstX)/(Te.nbPoints-1)),ce(Te,Se,Pe)):ge(Te,Se,Pe),Re.push(Te),Te=new Q);continue}else if('PEAKTABLE'===we){ye&&(se(Pe,Te),ge(Te,Se,Pe),Re.push(Te),Te=new Q);continue}if('TITLE'===we)Te.title=Se;else if('DATATYPE'===we)Te.dataType=Se,-1<Se.indexOf('nD')&&(Pe.twoD=!0);else if('NTUPLES'===we)-1<Se.indexOf('nD')&&(Pe.twoD=!0);else if('XUNITS'===we)Te.xUnit=Se;else if('YUNITS'===we)Te.yUnit=Se;else if('FIRSTX'===we)Te.firstX=parseFloat(Se);else if('LASTX'===we)Te.lastX=parseFloat(Se);else if('FIRSTY'===we)Te.firstY=parseFloat(Se);else if('LASTY'===we)Te.lastY=parseFloat(Se);else if('NPOINTS'===we)Te.nbPoints=parseFloat(Se);else if('XFACTOR'===we)Te.xFactor=parseFloat(Se);else if('YFACTOR'===we)Te.yFactor=parseFloat(Se);else if('DELTAX'===we)Te.deltaX=parseFloat(Se);else if('.OBSERVEFREQUENCY'===we||'$SFO1'===we)Te.observeFrequency||(Te.observeFrequency=parseFloat(Se));else if('.OBSERVENUCLEUS'===we)Te.xType||(Pe.xType=Se.replace(/[^a-zA-Z0-9]/g,''));else if('$SFO2'===we)Pe.indirectFrequency||(Pe.indirectFrequency=parseFloat(Se));else if('$OFFSET'===we)Pe.shiftOffsetNum=0,Pe.shiftOffsetVal||(Pe.shiftOffsetVal=parseFloat(Se));else if('$REFERENCEPOINT'===we);else if('VARNAME'===we)ke.varname=Se.split(me);else if('SYMBOL'===we)ke.symbol=Se.split(me);else if('VARTYPE'===we)ke.vartype=Se.split(me);else if('VARFORM'===we)ke.varform=Se.split(me);else if('VARDIM'===we)ke.vardim=K(Se.split(me));else if('UNITS'===we)ke.units=Se.split(me);else if('FACTOR'===we)ke.factor=K(Se.split(me));else if('FIRST'===we)ke.first=K(Se.split(me));else if('LAST'===we)ke.last=K(Se.split(me));else if('MIN'===we)ke.min=K(Se.split(me));else if('MAX'===we)ke.max=K(Se.split(me));else if('.NUCLEUS'===we)Pe.twoD&&(Pe.yType=Se.split(me)[0]);else if('PAGE'===we){Te.page=Se.trim(),Te.pageValue=parseFloat(Se.replace(/^.*=/,'')),Te.pageSymbol=Te.page.replace(/=.*/,'');var Ne=ke.symbol.indexOf(Te.pageSymbol),Ye='';ke.units&&ke.units[Ne]&&(Ye=ke.units[Ne]),Pe.indirectFrequency&&'PPM'!=Ye&&(Te.pageValue/=Pe.indirectFrequency)}else'RETENTIONTIME'===we?Te.pageValue=parseFloat(Se):te(we)&&(Te[ee(we)]=Se);we.match(be)&&(Pe.info[we]=Se.trim())}if(Pe.profiling&&Pe.profiling.push({action:'Finished parsing',time:Date.now()-_e}),0<Object.keys(ke).length){for(var Oe=[],Le=Object.keys(ke),Ee=0;Ee<Le.length;Ee++)for(var Ue=Le[Ee],Be=ke[Ue],Ve=0;Ve<Be.length;Ve++)Oe[Ve]||(Oe[Ve]={}),Oe[Ve][Ue]=Be[Ve];Pe.ntuples=Oe}Pe.twoD&&ye&&(ue(Pe,xe),Pe.profiling&&Pe.profiling.push({action:'Finished countour plot calculation',time:Date.now()-_e}),!xe.keepSpectra&&delete Pe.spectra);var qe=1<Re.length&&(!Re[0].dataType||Re[0].dataType.match(/.*mass.*/i));if(qe&&xe.newGCMS&&(xe.xy=!0),xe.xy&&ye&&0<Re.length)for(var Ee=0,Te;Ee<Re.length;Ee++)if(Te=Re[Ee],0<Te.data.length)for(var Ve=0;Ve<Te.data.length;Ve++){for(var $e=Te.data[Ve],Ze={x:Array($e.length/2),y:Array($e.length/2)},We=0;We<$e.length;We+=2)Ze.x[We/2]=$e[We],Ze.y[We/2]=$e[We+1];Te.data[Ve]=Ze}return qe&&ye&&(xe.newGCMS?ne(Pe):ae(Pe),Pe.profiling&&Pe.profiling.push({action:'Finished GCMS calculation',time:Date.now()-_e})),Pe.profiling&&Pe.profiling.push({action:'Total time',time:Date.now()-_e}),Pe}}function T(K,Q){return W||F(),new Promise(function(G){var ee=Date.now()+''+Math.random();Z[ee]=G,W.postMessage(JSON.stringify({stamp:ee,input:K,options:Q}))})}function F(){var K=URL.createObjectURL(new Blob(['var getConverter ='+P.toString()+';var convert = getConverter(); onmessage = function (event) { var data = JSON.parse(event.data); postMessage(JSON.stringify({stamp: data.stamp, output: convert(data.input, data.options)})); };'],{type:'application/javascript'}));W=new Worker(K),URL.revokeObjectURL(K),W.addEventListener('message',function(Q){var G=JSON.parse(Q.data),ee=G.stamp;Z[ee]&&Z[ee](G.output)})}var O=I(59),$=P(),Z={},W;E.exports={convert:function(K,Q,G){return'boolean'==typeof Q&&(G=Q,Q={}),G?T(K,Q):$(K,Q)}}},function(E,D,I){'use strict';function P(T){if(T){this.data=T,this.length=this.data.length,this.index=0,this.zero=0;for(var F=0;F<this.data.length;F++)T[F]&=255}}var R=I(26);P.prototype=new R,P.prototype.byteAt=function(T){return this.data[this.zero+T]},P.prototype.lastIndexOfSignature=function(T){for(var F=T.charCodeAt(0),O=T.charCodeAt(1),$=T.charCodeAt(2),Z=T.charCodeAt(3),W=this.length-4;0<=W;--W)if(this.data[W]===F&&this.data[W+1]===O&&this.data[W+2]===$&&this.data[W+3]===Z)return W-this.zero;return-1},P.prototype.readData=function(T){if(this.checkOffset(T),0===T)return[];var F=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,F},E.exports=P},function(E){'use strict';function P(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}P.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},E.exports=P},function(E,D,I){'use strict';function P(){this.data=null,this.length=0,this.index=0,this.zero=0}var R=I(0);P.prototype={checkOffset:function(T){this.checkIndex(this.index+T)},checkIndex:function(T){if(this.length<this.zero+T||0>T)throw new Error('End of data reached (data length = '+this.length+', asked index = '+T+'). Corrupted zip ?')},setIndex:function(T){this.checkIndex(T),this.index=T},skip:function(T){this.setIndex(this.index+T)},byteAt:function(){},readInt:function(T){var F=0,O;for(this.checkOffset(T),O=this.index+T-1;O>=this.index;O--)F=(F<<8)+this.byteAt(O);return this.index+=T,F},readString:function(T){return R.transformTo('string',this.readData(T))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var T=this.readInt(4);return new Date((127&T>>25)+1980,(15&T>>21)-1,31&T>>16,31&T>>11,63&T>>5,(31&T)<<1)}},E.exports=P},function(E,D){'use strict';D.base64=!1,D.binary=!1,D.dir=!1,D.createFolders=!1,D.date=null,D.compression=null,D.compressionOptions=null,D.comment=null,D.unixPermissions=null,D.dosPermissions=null},function(E,D){'use strict';D.LOCAL_FILE_HEADER='PK\x03\x04',D.CENTRAL_FILE_HEADER='PK\x01\x02',D.CENTRAL_DIRECTORY_END='PK\x05\x06',D.ZIP64_CENTRAL_DIRECTORY_LOCATOR='PK\x06\x07',D.ZIP64_CENTRAL_DIRECTORY_END='PK\x06\x06',D.DATA_DESCRIPTOR='PK\x07\b'},function(E,D,I){'use strict';function P(F,O){this.data=F,O||(this.data=T.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}var R=I(26),T=I(0);P.prototype=new R,P.prototype.byteAt=function(F){return this.data.charCodeAt(this.zero+F)},P.prototype.lastIndexOfSignature=function(F){return this.data.lastIndexOf(F)-this.zero},P.prototype.readData=function(F){this.checkOffset(F);var O=this.data.slice(this.zero+this.index,this.zero+this.index+F);return this.index+=F,O},E.exports=P},function(E,D,I){'use strict';function P(T){T&&(this.data=T,this.length=this.data.length,this.index=0,this.zero=0)}var R=I(24);P.prototype=new R,P.prototype.readData=function(T){if(this.checkOffset(T),0===T)return new Uint8Array(0);var F=this.data.subarray(this.zero+this.index,this.zero+this.index+T);return this.index+=T,F},E.exports=P},function(E,D,I){'use strict';for(var P=I(0),R=I(5),T=I(10),F=Array(256),O=0;256>O;O++)F[O]=252<=O?6:248<=O?5:240<=O?4:224<=O?3:192<=O?2:1;F[254]=F[254]=1;var $=function(K){var ae=K.length,se=0,Q,G,ee,te,ne;for(te=0;te<ae;te++)G=K.charCodeAt(te),55296==(64512&G)&&te+1<ae&&(ee=K.charCodeAt(te+1),56320==(64512&ee)&&(G=65536+(G-55296<<10)+(ee-56320),te++)),se+=128>G?1:2048>G?2:65536>G?3:4;for(Q=R.uint8array?new Uint8Array(se):Array(se),ne=0,te=0;ne<se;te++)G=K.charCodeAt(te),55296==(64512&G)&&te+1<ae&&(ee=K.charCodeAt(te+1),56320==(64512&ee)&&(G=65536+(G-55296<<10)+(ee-56320),te++)),128>G?Q[ne++]=G:2048>G?(Q[ne++]=192|G>>>6,Q[ne++]=128|63&G):65536>G?(Q[ne++]=224|G>>>12,Q[ne++]=128|63&G>>>6,Q[ne++]=128|63&G):(Q[ne++]=240|G>>>18,Q[ne++]=128|63&G>>>12,Q[ne++]=128|63&G>>>6,Q[ne++]=128|63&G);return Q},Z=function(K,Q){var G;for(Q=Q||K.length,Q>K.length&&(Q=K.length),G=Q-1;0<=G&&128==(192&K[G]);)G--;return 0>G?Q:0===G?Q:G+F[K[G]]>Q?G:Q},W=function(K){var ae=K.length,se=Array(2*ae),G,ee,te,ne;for(ee=0,G=0;G<ae;){if(te=K[G++],128>te){se[ee++]=te;continue}if(ne=F[te],4<ne){se[ee++]=65533,G+=ne-1;continue}for(te&=2===ne?31:3===ne?15:7;1<ne&&G<ae;)te=te<<6|63&K[G++],ne--;if(1<ne){se[ee++]=65533;continue}65536>te?se[ee++]=te:(te-=65536,se[ee++]=55296|1023&te>>10,se[ee++]=56320|1023&te)}return se.length!==ee&&(se.subarray?se=se.subarray(0,ee):se.length=ee),P.applyFromCharCode(se)};D.utf8encode=function(Q){return R.nodebuffer?T(Q,'utf-8'):$(Q)},D.utf8decode=function(Q){if(R.nodebuffer)return P.transformTo('nodebuffer',Q).toString('utf-8');Q=P.transformTo(R.uint8array?'uint8array':'array',Q);for(var G=[],ee=0,te=Q.length,ae;ee<te;)ae=Z(Q,Math.min(ee+65536,te)),R.uint8array?G.push(W(Q.subarray(ee,ae))):G.push(W(Q.slice(ee,ae))),ee=ae;return G.join('')}},function(E){'use strict';function P(T,F){for(var O=0,$=0;$<T.length;$++)O+=(T[$]-F[$])*(T[$]-F[$]);return O}function R(T,F){return Math.sqrt(P(T,F))}E.exports=R,R.squared=P},function(E,D){(function(){var R=0?{}:D;var T={release:'0.3.0',date:'2013-03'};R.toString=function(){return'version '+T.release+', released '+T.date};for(var F=0,O=null,$=null,Z={init:function(Q){if(0!==Q&&0==(Q&Q-1))F=Q,Z._initArray(),Z._makeBitReversalTable(),Z._makeCosSinTable();else throw new Error('init: radix-2 required')},fft1d:function(Q,G){Z.fft(Q,G,1)},ifft1d:function(Q,G){var ee=1/F;Z.fft(Q,G,-1);for(var te=0;te<F;te++)Q[te]*=ee,G[te]*=ee},bt1d:function(Q,G){Z.fft(Q,G,-1)},fft2d:function(Q,G){for(var ee=[],te=[],ne=0,ae=0;ae<F;ae++){ne=ae*F;for(var se=0;se<F;se++)ee[se]=Q[se+ne],te[se]=G[se+ne];Z.fft1d(ee,te);for(var oe=0;oe<F;oe++)Q[oe+ne]=ee[oe],G[oe+ne]=te[oe]}for(var le=0;le<F;le++){for(var de=0;de<F;de++)ne=le+de*F,ee[de]=Q[ne],te[de]=G[ne];Z.fft1d(ee,te);for(var ue=0;ue<F;ue++)ne=le+ue*F,Q[ne]=ee[ue],G[ne]=te[ue]}},ifft2d:function(Q,G){for(var ee=[],te=[],ne=0,ae=0;ae<F;ae++){ne=ae*F;for(var se=0;se<F;se++)ee[se]=Q[se+ne],te[se]=G[se+ne];Z.ifft1d(ee,te);for(var oe=0;oe<F;oe++)Q[oe+ne]=ee[oe],G[oe+ne]=te[oe]}for(var le=0;le<F;le++){for(var de=0;de<F;de++)ne=le+de*F,ee[de]=Q[ne],te[de]=G[ne];Z.ifft1d(ee,te);for(var ue=0;ue<F;ue++)ne=le+ue*F,Q[ne]=ee[ue],G[ne]=te[ue]}},fft:function(Q,G,ee){for(var ce=F>>2,ge=0,te,ne,ae,se,oe,le,de,ue,he;ge<F;ge++)se=O[ge],ge<se&&(oe=Q[ge],Q[ge]=Q[se],Q[se]=oe,oe=G[ge],G[ge]=G[se],G[se]=oe);for(var me=1;me<F;me<<=1){ne=0,te=F/(me<<1);for(var pe=0;pe<me;pe++){le=$[ne+ce],de=ee*$[ne];for(var fe=pe;fe<F;fe+=me<<1)ae=fe+me,ue=le*Q[ae]+de*G[ae],he=le*G[ae]-de*Q[ae],Q[ae]=Q[fe]-ue,Q[fe]+=ue,G[ae]=G[fe]-he,G[fe]+=he;ne+=te}}},_initArray:function(){O='undefined'==typeof Uint32Array?[]:new Uint32Array(F),$='undefined'==typeof Float64Array?[]:new Float64Array(1.25*F)},_paddingZero:function(){},_makeBitReversalTable:function(){var Q=0,G=0,ee=0;for(O[0]=0;++Q<F;){for(ee=F>>1;ee<=G;)G-=ee,ee>>=1;G+=ee,O[Q]=G}},_makeCosSinTable:function(){var Q=F>>1,G=F>>2,ee=F>>3,ne=Math.sin(Math.PI/F),ae=2*ne*ne,se=Math.sqrt(ae*(2-ae)),oe=$[G]=1,le=$[0]=0;ne=2*ae;for(var de=1;de<ee;de++)oe-=ae,ae+=ne*oe,le+=se,se-=ne*le,$[de]=le,$[G-de]=oe;0!=ee&&($[ee]=Math.sqrt(0.5));for(var ue=0;ue<G;ue++)$[Q-ue]=$[ue];for(var he=0;he<Q+G;he++)$[he+Q]=-$[he]}},W=['init','fft1d','ifft1d','fft2d','ifft2d'],K=0;K<W.length;K++)R[W[K]]=Z[W[K]];return R.bt=Z.bt1d,R.fft=Z.fft1d,R.ifft=Z.ifft1d,R}).call(this)},function(E,D,I){'use strict';D.FFTUtils=I(76),D.FFT=I(33)},function(E,D,I){'use strict';function P(F){R.call(this),this.index=F,this.distance=0,this.children=void 0}var R=I(12),T=I(130);T.inherits(P,R),E.exports=P},function(E,D){(function(){var R=0?{}:D;var T={release:'0.3.0',date:'2013-03'};R.toString=function(){return'version '+T.release+', released '+T.date};for(var F=0,O=null,$=null,Z={init:function(Q){if(0!==Q&&0==(Q&Q-1))F=Q,Z._initArray(),Z._makeBitReversalTable(),Z._makeCosSinTable();else throw new Error('init: radix-2 required')},fft1d:function(Q,G){Z.fft(Q,G,1)},ifft1d:function(Q,G){var ee=1/F;Z.fft(Q,G,-1);for(var te=0;te<F;te++)Q[te]*=ee,G[te]*=ee},bt1d:function(Q,G){Z.fft(Q,G,-1)},fft2d:function(Q,G){for(var ee=[],te=[],ne=0,ae=0;ae<F;ae++){ne=ae*F;for(var se=0;se<F;se++)ee[se]=Q[se+ne],te[se]=G[se+ne];Z.fft1d(ee,te);for(var oe=0;oe<F;oe++)Q[oe+ne]=ee[oe],G[oe+ne]=te[oe]}for(var le=0;le<F;le++){for(var de=0;de<F;de++)ne=le+de*F,ee[de]=Q[ne],te[de]=G[ne];Z.fft1d(ee,te);for(var ue=0;ue<F;ue++)ne=le+ue*F,Q[ne]=ee[ue],G[ne]=te[ue]}},ifft2d:function(Q,G){for(var ee=[],te=[],ne=0,ae=0;ae<F;ae++){ne=ae*F;for(var se=0;se<F;se++)ee[se]=Q[se+ne],te[se]=G[se+ne];Z.ifft1d(ee,te);for(var oe=0;oe<F;oe++)Q[oe+ne]=ee[oe],G[oe+ne]=te[oe]}for(var le=0;le<F;le++){for(var de=0;de<F;de++)ne=le+de*F,ee[de]=Q[ne],te[de]=G[ne];Z.ifft1d(ee,te);for(var ue=0;ue<F;ue++)ne=le+ue*F,Q[ne]=ee[ue],G[ne]=te[ue]}},fft:function(Q,G,ee){for(var ce=F>>2,ge=0,te,ne,ae,se,oe,le,de,ue,he;ge<F;ge++)se=O[ge],ge<se&&(oe=Q[ge],Q[ge]=Q[se],Q[se]=oe,oe=G[ge],G[ge]=G[se],G[se]=oe);for(var me=1;me<F;me<<=1){ne=0,te=F/(me<<1);for(var pe=0;pe<me;pe++){le=$[ne+ce],de=ee*$[ne];for(var fe=pe;fe<F;fe+=me<<1)ae=fe+me,ue=le*Q[ae]+de*G[ae],he=le*G[ae]-de*Q[ae],Q[ae]=Q[fe]-ue,Q[fe]+=ue,G[ae]=G[fe]-he,G[fe]+=he;ne+=te}}},_initArray:function(){O='undefined'==typeof Uint32Array?[]:new Uint32Array(F),$='undefined'==typeof Float64Array?[]:new Float64Array(1.25*F)},_paddingZero:function(){},_makeBitReversalTable:function(){var Q=0,G=0,ee=0;for(O[0]=0;++Q<F;){for(ee=F>>1;ee<=G;)G-=ee,ee>>=1;G+=ee,O[Q]=G}},_makeCosSinTable:function(){var Q=F>>1,G=F>>2,ee=F>>3,ne=Math.sin(Math.PI/F),ae=2*ne*ne,se=Math.sqrt(ae*(2-ae)),oe=$[G]=1,le=$[0]=0;ne=2*ae;for(var de=1;de<ee;de++)oe-=ae,ae+=ne*oe,le+=se,se-=ne*le,$[de]=le,$[G-de]=oe;0!=ee&&($[ee]=Math.sqrt(0.5));for(var ue=0;ue<G;ue++)$[Q-ue]=$[ue];for(var he=0;he<Q+G;he++)$[he+Q]=-$[he]}},W=['init','fft1d','ifft1d','fft2d','ifft2d'],K=0;K<W.length;K++)R[W[K]]=Z[W[K]];return R.bt=Z.bt1d,R.fft=Z.fft1d,R.ifft=Z.ifft1d,R}).call(this)},function(E,D,I){'use strict';var he=I(6);E.exports={transpose:function(ce){if('number'==typeof ce)return ce;var ge=ce.clone();return ge.transpose()},add:function(ce,ge){if('number'==typeof ce&&'number'==typeof ge)return ce+ge;if('number'==typeof ce)return this.add(ge,ce);var me=ce.clone();return me.add(ge)},subtract:function(ce,ge){if('number'==typeof ce&&'number'==typeof ge)return ce-ge;if('number'==typeof ce)return this.subtract(ge,ce);var me=ce.clone();return me.sub(ge)},multiply:function(ce,ge){if('number'==typeof ce&&'number'==typeof ge)return ce*ge;if('number'==typeof ce)return this.multiply(ge,ce);var me=ce.clone();return'number'==typeof ge?me.mul(ge):me=me.mmul(ge),1==me.rows&&1==me.columns?me[0][0]:me},dotMultiply:function(ce,ge){var me=ce.clone();return me.mul(ge)},dotDivide:function(ce,ge){var me=ce.clone();return me.div(ge)},diag:function(ce){var ge=null,me=ce.rows,pe=ce.columns,fe,xe;if('undefined'==typeof pe&&'object'==typeof ce)if(ce[0]&&ce[0].length)for(me=ce.length,pe=ce[0].length,xe=Math.min(me,pe),ge=he.zeros(pe,pe),fe=0;fe<pe;fe++)ge[fe][fe]=ce[fe][fe];else for(pe=ce.length,ge=he.zeros(pe,pe),fe=0;fe<pe;fe++)ge[fe][fe]=ce[fe];if(1==me)for(ge=he.zeros(pe,pe),fe=0;fe<pe;fe++)ge[fe][fe]=ce[0][fe];else if(0<me&&0<pe)for(xe=Math.min(me,pe),ge=Array(xe),fe=0;fe<xe;fe++)ge[fe]=ce[fe][fe];return ge},min:function(ce,ge){if('number'==typeof ce&&'number'==typeof ge)return Math.min(ce,ge);for(var me=ce.rows,pe=ce.columns,fe=new he(me,pe),xe=0;xe<me;xe++)for(var be=0;be<pe;be++)fe[xe][be]=ce[xe][be]<ge[xe][be]?ce[xe][be]:ge[xe][be];return fe},max:function(ce,ge){if('number'==typeof ce&&'number'==typeof ge)return Math.max(ce,ge);for(var me=ce.rows,pe=ce.columns,fe=new he(me,pe),xe=0;xe<me;xe++)for(var be=0;be<pe;be++)fe[xe][be]=ce[xe][be]>ge[xe][be]?ce[xe][be]:ge[xe][be];return fe},solve:function(ce,ge){return ce.solve(ge)},inv:function(ce){return'number'==typeof ce?1/ce:ce.inverse()},sqrt:function(ce){if('number'==typeof ce)return Math.sqrt(ce);for(var ge=ce.rows,me=ce.columns,pe=new he(ge,me),fe=0;fe<ge;fe++)for(var xe=0;xe<me;xe++)pe[fe][xe]=Math.sqrt(ce[fe][xe]);return pe},exp:function(ce){if('number'==typeof ce)return Math.sqrt(ce);for(var ge=ce.rows,me=ce.columns,pe=new he(ge,me),fe=0;fe<ge;fe++)for(var xe=0;xe<me;xe++)pe[fe][xe]=Math.exp(ce[fe][xe]);return pe},dotPow:function(ce,ge){if('number'==typeof ce)return Math.pow(ce,ge);for(var me=ce.rows,pe=ce.columns,fe=new he(me,pe),xe=0;xe<me;xe++)for(var be=0;be<pe;be++)fe[xe][be]=Math.pow(ce[xe][be],ge);return fe},abs:function(ce){if('number'==typeof ce)return Math.abs(ce);for(var ge=ce.rows,me=ce.columns,pe=new he(ge,me),fe=0;fe<ge;fe++)for(var xe=0;xe<me;xe++)pe[fe][xe]=Math.abs(ce[fe][xe]);return pe},matrix:function(ce,ge){return new he(ce,ge)},ones:function(ce,ge){return he.ones(ce,ge)},zeros:function(ce,ge){return he.zeros(ce,ge)},random:function(ce,ge){return he.rand(ce,ge)},eye:function(ce,ge){return he.eye(ce,ge)}}},function(E,D){'use strict';function P(R,T){return R-T}D.sum=function(T){for(var R=0,F=0;F<T.length;F++)R+=T[F];return R},D.max=function(T){for(var R=-Infinity,F=T.length,O=0;O<F;O++)T[O]>R&&(R=T[O]);return R},D.min=function(T){for(var R=Infinity,F=T.length,O=0;O<F;O++)T[O]<R&&(R=T[O]);return R},D.minMax=function(T){for(var F=Infinity,O=-Infinity,$=T.length,Z=0;Z<$;Z++)T[Z]<F&&(F=T[Z]),T[Z]>O&&(O=T[Z]);return{min:F,max:O}},D.arithmeticMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++)F+=T[$];return F/O},D.mean=D.arithmeticMean,D.geometricMean=function(T){for(var F=1,O=T.length,$=0;$<O;$++)F*=T[$];return Math.pow(F,1/O)},D.logMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++)F+=Math.log(T[$]);return F/O},D.grandMean=function(T,F){for(var O=0,$=0,Z=T.length,W=0;W<Z;W++)O+=F[W]*T[W],$+=F[W];return O/$},D.truncatedMean=function(T,F,O){O===void 0&&(O=!1),O||(T=T.slice().sort(P));for(var $=T.length,Z=Math.floor($*F),W=0,K=Z;K<$-Z;K++)W+=T[K];return W/($-2*Z)},D.harmonicMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++){if(0===T[$])throw new RangeError('value at index '+$+'is zero');F+=1/T[$]}return O/F},D.contraHarmonicMean=function(T){for(var F=0,O=0,$=T.length,Z=0;Z<$;Z++)F+=T[Z]*T[Z],O+=T[Z];if(0>O)throw new RangeError('sum of values is negative');return F/O},D.median=function(T,F){F===void 0&&(F=!1),F||(T=T.slice().sort(P));var O=T.length,$=Math.floor(O/2);return 0==O%2?0.5*(T[$-1]+T[$]):T[$]},D.variance=function(T,F){F===void 0&&(F=!0);for(var O=D.mean(T),$=0,Z=T.length,W=0,K;W<Z;W++)K=T[W]-O,$+=K*K;return F?$/(Z-1):$/Z},D.standardDeviation=function(T,F){return Math.sqrt(D.variance(T,F))},D.standardError=function(T){return D.standardDeviation(T)/Math.sqrt(T.length)},D.quartiles=function(T,F){'undefined'==typeof F&&(F=!1),F||(T=T.slice(),T.sort(P));var O=T.length/4,$=T[Math.ceil(O)-1],Z=D.median(T,!0),W=T[Math.ceil(3*O)-1];return{q1:$,q2:Z,q3:W}},D.pooledStandardDeviation=function(T,F){return Math.sqrt(D.pooledVariance(T,F))},D.pooledVariance=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=0,$=0,Z=T.length,W=0;W<Z;W++){var K=T[W],Q=D.variance(K);O+=(K.length-1)*Q,$+=F?K.length-1:K.length}return O/$},D.mode=function(T){var F=T.length,O=Array(F),$;for($=0;$<F;$++)O[$]=0;var Z=Array(F),W=0;for($=0;$<F;$++){var K=Z.indexOf(T[$]);0<=K?O[K]++:(Z[W]=T[$],O[W]=1,W++)}var Q=0,G=0;for($=0;$<W;$++)O[$]>Q&&(Q=O[$],G=$);return Z[G]},D.covariance=function(T,F,O){'undefined'==typeof O&&(O=!0);var $=D.mean(T),Z=D.mean(F);if(T.length!==F.length)throw'Vectors do not have the same dimensions';for(var W=0,K=T.length,Q=0;Q<K;Q++){var G=T[Q]-$,ee=F[Q]-Z;W+=G*ee}return O?W/(K-1):W/K},D.skewness=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=D.mean(T),$=0,Z=0,W=T.length,K=0,Q;K<W;K++)Q=T[K]-O,$+=Q*Q,Z+=Q*Q*Q;var G=$/W,ee=Z/W,te=ee/Math.pow(G,3/2);if(F){var ne=Math.sqrt(W*(W-1));return ne/(W-2)*te}return te},D.kurtosis=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=D.mean(T),$=T.length,Z=0,W=0,K=0,Q;K<$;K++)Q=T[K]-O,Z+=Q*Q,W+=Q*Q*Q*Q;var G=Z/$,ee=W/$;if(F){var te=Z/($-1),ae=W/(te*te);return $*($+1)/(($-1)*($-2)*($-3))*ae-3*(($-1)*($-1)/(($-2)*($-3)))}return ee/(G*G)-3},D.entropy=function(T,F){'undefined'==typeof F&&(F=0);for(var O=0,$=T.length,Z=0;Z<$;Z++)O+=T[Z]*Math.log(T[Z]+F);return-O},D.weightedMean=function(T,F){for(var O=0,$=T.length,Z=0;Z<$;Z++)O+=T[Z]*F[Z];return O},D.weightedStandardDeviation=function(T,F){return Math.sqrt(D.weightedVariance(T,F))},D.weightedVariance=function(T,F){for(var O=D.weightedMean(T,F),$=0,Z=T.length,W=0,K=0,Q=0;Q<Z;Q++){var G=T[Q]-O,ee=F[Q];$+=ee*(G*G),K+=ee,W+=ee*ee}return $*(K/(K*K-W))},D.center=function(T,F){'undefined'==typeof F&&(F=!1);var O=T;F||(O=T.slice());for(var $=D.mean(O),Z=O.length,W=0;W<Z;W++)O[W]-=$},D.standardize=function(T,F,O){'undefined'==typeof F&&(F=D.standardDeviation(T)),'undefined'==typeof O&&(O=!1);for(var $=T.length,Z=O?T:Array($),W=0;W<$;W++)Z[W]=T[W]/F;return Z},D.cumulativeSum=function(T){var F=T.length,O=Array(F);O[0]=T[0];for(var $=1;$<F;$++)O[$]=O[$-1]+T[$];return O}},function(E){'use strict';function P(T){var F=Math.sqrt(2*T.length+0.25)-0.5,O=[],$=Array(F),Z=F,W=0,K=[];for(W=F-1;0<=W;W--)$[W]=1;for(var Q=-1,G=[];0<Z;){if(0===G.length){for(K=Array(F),W=0;W<F;W++)K[W]=0;for(O.push(K),Q=0;0==$[Q];Q++);}else Q=G.splice(0,1);K[Q]=1,$[Q]=0,Z--;var ee=Array(F);for(W=0;W<F;W++){var te=Math.max(Q,W),ne=Math.min(Q,W);ee[W]=T[ne*(2*F-ne-1)/2+te],1==ee[W]&&1==$[W]&&0==K[W]&&(G.push(W),K[W]=1)}}return O}const R={threshold:0,out:'assignment'};E.exports=function(F,O){const $=Object.assign({},R,O);var Z,W,K,Q;if('number'==typeof F[0])Z=P(F);else if('object'==typeof F[0]){for(var G=F.length,ee=Array(G*(G+1)/2),te=0,W=0;W<G;W++)for(var K=W;K<G;K++)ee[te++]=F[W][K]>$.threshold?1:0;Z=P(ee)}if('indexes'===$.out||'values'===$.out){var ne=Array(Z.length);for(W=0;W<Z.length;W++)for(ne[W]=[],K=0;K<Z[W].length;K++)0!=Z[W][K]&&ne[W].push(K);if('values'===$.out){var ae=Array(ne.length);for(W=0;W<ne.length;W++)for(ae[W]=Array(ne[W].length),K=0;K<ne[W].length;K++)for(ae[W][K]=Array(ne[W].length),Q=0;Q<ne[W].length;Q++)ae[W][K][Q]=F[ne[W][K]][ne[W][Q]];return ae}return ne}return Z}},function(module,exports,__webpack_require__){function fillTemplateFunction(E,D){for(var I in D)E=E.replace(new RegExp('%'+I+'%','g'),D[I]);return E}const HashTable=__webpack_require__(80);class E{constructor(D,I,P={}){if(D instanceof E){const O=D;return void this._init(O.rows,O.columns,O.elements.clone(),O.threshold)}if(Array.isArray(D)){const O=D;D=O.length,P=I||{},I=O[0].length,this._init(D,I,new HashTable(P),P.threshold);for(var R=0;R<D;R++)for(var T=0,F;T<I;T++)F=O[R][T],this.threshold&&Math.abs(F)<this.threshold&&(F=0),0!==F&&this.elements.set(R*I+T,O[R][T])}else this._init(D,I,new HashTable(P),P.threshold)}_init(D,I,P,R){this.rows=D,this.columns=I,this.elements=P,this.threshold=R||0}static eye(D=1,I=D){const P=Math.min(D,I),R=new E(D,I,{initialCapacity:P});for(var T=0;T<P;T++)R.set(T,T,1);return R}clone(){return new E(this)}to2DArray(){const D=Array(this.rows);for(var I=0;I<this.rows;I++){D[I]=Array(this.columns);for(var P=0;P<this.columns;P++)D[I][P]=this.get(I,P)}return D}isSquare(){return this.rows===this.columns}isSymmetric(){if(!this.isSquare())return!1;var D=!0;return this.forEachNonZero((I,P,R)=>{return this.get(P,I)===R?R:(D=!1,!1)}),D}get cardinality(){return this.elements.size}get size(){return this.rows*this.columns}get(D,I){return this.elements.get(D*this.columns+I)}set(D,I,P){return this.threshold&&Math.abs(P)<this.threshold&&(P=0),0===P?this.elements.remove(D*this.columns+I):this.elements.set(D*this.columns+I,P),this}mmul(D){this.columns!==D.rows&&console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');const I=this.rows,P=D.columns,R=new E(I,P);return this.forEachNonZero((T,F,O)=>{return D.forEachNonZero(($,Z,W)=>{return F===$&&R.set(T,Z,R.get(T,Z)+O*W),W}),O}),R}kroneckerProduct(D){const I=this.rows,P=this.columns,R=D.rows,T=D.columns,F=new E(I*R,P*T,{initialCapacity:this.cardinality*D.cardinality});return this.forEachNonZero((O,$,Z)=>{return D.forEachNonZero((W,K,Q)=>{return F.set(R*O+W,T*$+K,Z*Q),Q}),Z}),F}forEachNonZero(D){return this.elements.forEachPair((I,P)=>{const R=0|I/this.columns,T=I%this.columns;let F=D(R,T,P);return!1!==F&&(this.threshold&&Math.abs(F)<this.threshold&&(F=0),F!==P&&(0===F?this.elements.remove(I,!0):this.elements.set(I,F)),!0)}),this.elements.maybeShrinkCapacity(),this}getNonZeros(){const D=this.cardinality,I=Array(D),P=Array(D),R=Array(D);var T=0;return this.forEachNonZero((F,O,$)=>{return I[T]=F,P[T]=O,R[T]=$,T++,$}),{rows:I,columns:P,values:R}}setThreshold(D){return 0!==D&&D!==this.threshold&&(this.threshold=D,this.forEachNonZero((I,P,R)=>R)),this}}E.prototype.klass='Matrix',E.identity=E.eye,E.prototype.tensorProduct=E.prototype.kroneckerProduct,module.exports=E;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    this.forEachNonZero((i, j, v) => v %op% value);
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix.forEachNonZero((i, j, v) => {
        this.set(i, j, this.get(i, j) %op% v);
        return v;
    });
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new SparseMatrix(matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    this.forEachNonZero((i, j, v) => %method%(v));
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new SparseMatrix(matrix);
    return newMatrix.%name%();
})
`,operators=[['+','add'],['-','sub','subtract'],['*','mul','multiply'],['/','div','divide'],['%','mod','modulus'],['&','and'],['|','or'],['^','xor'],['<<','leftShift'],['>>','signPropagatingRightShift'],['>>>','rightShift','zeroFillRightShift']];for(var operator of operators)for(var i=1;i<operator.length;i++)E.prototype[operator[i]]=eval(fillTemplateFunction(inplaceOperator,{name:operator[i],op:operator[0]})),E.prototype[operator[i]+'S']=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[i]+'S',op:operator[0]})),E.prototype[operator[i]+'M']=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[i]+'M',op:operator[0]})),E[operator[i]]=eval(fillTemplateFunction(staticOperator,{name:operator[i]}));var methods=[['~','not']];['abs','acos','acosh','asin','asinh','atan','atanh','cbrt','ceil','clz32','cos','cosh','exp','expm1','floor','fround','log','log1p','log10','log2','round','sign','sin','sinh','sqrt','tan','tanh','trunc'].forEach(function(E){methods.push(['Math.'+E,E])});for(var method of methods)for(var i=1;i<method.length;i++)E.prototype[method[i]]=eval(fillTemplateFunction(inplaceMethod,{name:method[i],method:method[0]})),E[method[i]]=eval(fillTemplateFunction(staticMethod,{name:method[i]}))},function(E,D){'use strict';function P(R,T){return R-T}D.sum=function(T){for(var R=0,F=0;F<T.length;F++)R+=T[F];return R},D.max=function(T){for(var R=T[0],F=T.length,O=1;O<F;O++)T[O]>R&&(R=T[O]);return R},D.min=function(T){for(var R=T[0],F=T.length,O=1;O<F;O++)T[O]<R&&(R=T[O]);return R},D.minMax=function(T){for(var F=T[0],O=T[0],$=T.length,Z=1;Z<$;Z++)T[Z]<F&&(F=T[Z]),T[Z]>O&&(O=T[Z]);return{min:F,max:O}},D.arithmeticMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++)F+=T[$];return F/O},D.mean=D.arithmeticMean,D.geometricMean=function(T){for(var F=1,O=T.length,$=0;$<O;$++)F*=T[$];return Math.pow(F,1/O)},D.logMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++)F+=Math.log(T[$]);return F/O},D.grandMean=function(T,F){for(var O=0,$=0,Z=T.length,W=0;W<Z;W++)O+=F[W]*T[W],$+=F[W];return O/$},D.truncatedMean=function(T,F,O){O===void 0&&(O=!1),O||(T=[].concat(T).sort(P));for(var $=T.length,Z=Math.floor($*F),W=0,K=Z;K<$-Z;K++)W+=T[K];return W/($-2*Z)},D.harmonicMean=function(T){for(var F=0,O=T.length,$=0;$<O;$++){if(0===T[$])throw new RangeError('value at index '+$+'is zero');F+=1/T[$]}return O/F},D.contraHarmonicMean=function(T){for(var F=0,O=0,$=T.length,Z=0;Z<$;Z++)F+=T[Z]*T[Z],O+=T[Z];if(0>O)throw new RangeError('sum of values is negative');return F/O},D.median=function(T,F){F===void 0&&(F=!1),F||(T=[].concat(T).sort(P));var O=T.length,$=Math.floor(O/2);return 0==O%2?0.5*(T[$-1]+T[$]):T[$]},D.variance=function(T,F){F===void 0&&(F=!0);for(var O=D.mean(T),$=0,Z=T.length,W=0,K;W<Z;W++)K=T[W]-O,$+=K*K;return F?$/(Z-1):$/Z},D.standardDeviation=function(T,F){return Math.sqrt(D.variance(T,F))},D.standardError=function(T){return D.standardDeviation(T)/Math.sqrt(T.length)},D.robustMeanAndStdev=function(T){var F=0,O=0,$=T.length,Z=0;for(Z=0;Z<$;Z++)F+=T[Z];F/=$;var W=Array($);for(Z=0;Z<$;Z++)W[Z]=Math.abs(T[Z]-F);return W.sort(P),O=1==$%2?W[($-1)/2]/0.6745:0.5*(W[$/2]+W[$/2-1])/0.6745,{mean:F,stdev:O}},D.quartiles=function(T,F){'undefined'==typeof F&&(F=!1),F||(T=[].concat(T).sort(P));var O=T.length/4,$=T[Math.ceil(O)-1],Z=D.median(T,!0),W=T[Math.ceil(3*O)-1];return{q1:$,q2:Z,q3:W}},D.pooledStandardDeviation=function(T,F){return Math.sqrt(D.pooledVariance(T,F))},D.pooledVariance=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=0,$=0,Z=T.length,W=0;W<Z;W++){var K=T[W],Q=D.variance(K);O+=(K.length-1)*Q,$+=F?K.length-1:K.length}return O/$},D.mode=function(T){var F=T.length,O=Array(F),$;for($=0;$<F;$++)O[$]=0;var Z=Array(F),W=0;for($=0;$<F;$++){var K=Z.indexOf(T[$]);0<=K?O[K]++:(Z[W]=T[$],O[W]=1,W++)}var Q=0,G=0;for($=0;$<W;$++)O[$]>Q&&(Q=O[$],G=$);return Z[G]},D.covariance=function(T,F,O){'undefined'==typeof O&&(O=!0);var $=D.mean(T),Z=D.mean(F);if(T.length!==F.length)throw'Vectors do not have the same dimensions';for(var W=0,K=T.length,Q=0;Q<K;Q++){var G=T[Q]-$,ee=F[Q]-Z;W+=G*ee}return O?W/(K-1):W/K},D.skewness=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=D.mean(T),$=0,Z=0,W=T.length,K=0,Q;K<W;K++)Q=T[K]-O,$+=Q*Q,Z+=Q*Q*Q;var G=$/W,ee=Z/W,te=ee/Math.pow(G,3/2);if(F){var ne=Math.sqrt(W*(W-1));return ne/(W-2)*te}return te},D.kurtosis=function(T,F){'undefined'==typeof F&&(F=!0);for(var O=D.mean(T),$=T.length,Z=0,W=0,K=0,Q;K<$;K++)Q=T[K]-O,Z+=Q*Q,W+=Q*Q*Q*Q;var G=Z/$,ee=W/$;if(F){var te=Z/($-1),ae=W/(te*te);return $*($+1)/(($-1)*($-2)*($-3))*ae-3*(($-1)*($-1)/(($-2)*($-3)))}return ee/(G*G)-3},D.entropy=function(T,F){'undefined'==typeof F&&(F=0);for(var O=0,$=T.length,Z=0;Z<$;Z++)O+=T[Z]*Math.log(T[Z]+F);return-O},D.weightedMean=function(T,F){for(var O=0,$=T.length,Z=0;Z<$;Z++)O+=T[Z]*F[Z];return O},D.weightedStandardDeviation=function(T,F){return Math.sqrt(D.weightedVariance(T,F))},D.weightedVariance=function(T,F){for(var O=D.weightedMean(T,F),$=0,Z=T.length,W=0,K=0,Q=0;Q<Z;Q++){var G=T[Q]-O,ee=F[Q];$+=ee*(G*G),K+=ee,W+=ee*ee}return $*(K/(K*K-W))},D.center=function(T,F){'undefined'==typeof F&&(F=!1);var O=T;F||(O=[].concat(T));for(var $=D.mean(O),Z=O.length,W=0;W<Z;W++)O[W]-=$},D.standardize=function(T,F,O){'undefined'==typeof F&&(F=D.standardDeviation(T)),'undefined'==typeof O&&(O=!1);for(var $=T.length,Z=O?T:Array($),W=0;W<$;W++)Z[W]=T[W]/F;return Z},D.cumulativeSum=function(T){var F=T.length,O=Array(F);O[0]=T[0];for(var $=1;$<F;$++)O[$]=O[$-1]+T[$];return O}},function(E,D,I){'use strict';D.SpinSystem=I(113),D.simulate1D=I(115),D.simulate2D=I(116)},function(E,D,I){'use strict';function P(T){if('number'!=typeof T||R(T))throw new TypeError('Expected a number')}var R=I(117);D.asc=function(T,F){return P(T),P(F),T-F},D.desc=function(T,F){return P(T),P(F),F-T}},function(E,D,I){'use strict';function P(Z,W){if(65537>W&&(Z.subarray&&F||!Z.subarray&&T))return String.fromCharCode.apply(null,R.shrinkBuf(Z,W));for(var K='',Q=0;Q<W;Q++)K+=String.fromCharCode(Z[Q]);return K}var R=I(1),T=!0,F=!0;try{String.fromCharCode.apply(null,[0])}catch(Z){T=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Z){F=!1}for(var O=new R.Buf8(256),$=0;256>$;$++)O[$]=252<=$?6:248<=$?5:240<=$?4:224<=$?3:192<=$?2:1;O[254]=O[254]=1,D.string2buf=function(Z){var te=Z.length,ne=0,W,K,Q,G,ee;for(G=0;G<te;G++)K=Z.charCodeAt(G),55296==(64512&K)&&G+1<te&&(Q=Z.charCodeAt(G+1),56320==(64512&Q)&&(K=65536+(K-55296<<10)+(Q-56320),G++)),ne+=128>K?1:2048>K?2:65536>K?3:4;for(W=new R.Buf8(ne),ee=0,G=0;ee<ne;G++)K=Z.charCodeAt(G),55296==(64512&K)&&G+1<te&&(Q=Z.charCodeAt(G+1),56320==(64512&Q)&&(K=65536+(K-55296<<10)+(Q-56320),G++)),128>K?W[ee++]=K:2048>K?(W[ee++]=192|K>>>6,W[ee++]=128|63&K):65536>K?(W[ee++]=224|K>>>12,W[ee++]=128|63&K>>>6,W[ee++]=128|63&K):(W[ee++]=240|K>>>18,W[ee++]=128|63&K>>>12,W[ee++]=128|63&K>>>6,W[ee++]=128|63&K);return W},D.buf2binstring=function(Z){return P(Z,Z.length)},D.binstring2buf=function(Z){for(var W=new R.Buf8(Z.length),K=0,Q=W.length;K<Q;K++)W[K]=Z.charCodeAt(K);return W},D.buf2string=function(Z,W){var K,Q,G,ee,te=W||Z.length,ne=Array(2*te);for(Q=0,K=0;K<te;){if(G=Z[K++],128>G){ne[Q++]=G;continue}if(ee=O[G],4<ee){ne[Q++]=65533,K+=ee-1;continue}for(G&=2===ee?31:3===ee?15:7;1<ee&&K<te;)G=G<<6|63&Z[K++],ee--;if(1<ee){ne[Q++]=65533;continue}65536>G?ne[Q++]=G:(G-=65536,ne[Q++]=55296|1023&G>>10,ne[Q++]=56320|1023&G)}return P(ne,Q)},D.utf8border=function(Z,W){var K;for(W=W||Z.length,W>Z.length&&(W=Z.length),K=W-1;0<=K&&128==(192&Z[K]);)K--;return 0>K?W:0===K?W:K+O[Z[K]]>W?K:W}},function(E){'use strict';E.exports=function(R,T,F,O){for(var $=0|65535&R,Z=0|65535&R>>>16,W=0;0!==F;){W=2e3<F?2e3:F,F-=W;do $=0|$+T[O++],Z=0|Z+$;while(--W);$%=65521,Z%=65521}return 0|($|Z<<16)}},function(E){'use strict';E.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(E){'use strict';var T=function(){for(var O=[],$=0,F;256>$;$++){F=$;for(var Z=0;8>Z;Z++)F=1&F?3988292384^F>>>1:F>>>1;O[$]=F}return O}();E.exports=function(F,O,$,Z){F^=-1;for(var Q=Z;Q<Z+$;Q++)F=F>>>8^T[255&(F^O[Q])];return-1^F}},function(E){'use strict';E.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg='',this.state=null,this.data_type=2,this.adler=0}},function(E){var I=function(){return this}();try{I=I||Function('return this')()||(1,eval)('this')}catch(P){'object'==typeof window&&(I=window)}E.exports=I},function(E,D,I){'use strict';E.exports.fourierTransform=I(134),E.exports.zeroFilling=I(137),E.exports.apodization=I(132),E.exports.phaseCorrection=I(135),E.exports.digitalFilter=I(133)},function(E){'use strict';function P(K,Q,G,ee){var te=T(K,Q,G,-ee[0],!0),ne=0,ae=null,se=null;0>te&&(ae={nucleusX:G.nucleusX,nucleusY:G.nucleusY},ae.resolutionX=G.resolutionX,ae.resolutionY=G.resolutionY,ae.shiftX=G.shiftY,ae.shiftY=G.shiftX,ae.peaks=[{x:G.shiftY,y:G.shiftX,z:1}],K.push(ae),se=[-ee[0],ee[1]],Q.push(se),ne++);var oe=0,le=!1,de=!1,ue;for(oe=K.length-1;0<=oe;oe--)ue=K[oe],0===Q[oe][0]&&(Math.abs(ue.shiftX-G.shiftX)<Z&&(le=!0),Math.abs(ue.shiftY-G.shiftY)<Z&&(de=!0));return!1==le&&(ae={nucleusX:G.nucleusX,nucleusY:G.nucleusY},ae.resolutionX=G.resolutionX,ae.resolutionY=G.resolutionY,ae.shiftX=G.shiftX,ae.shiftY=G.shiftX,ae.peaks=[{x:G.shiftX,y:G.shiftX,z:1}],K.push(ae),se=[0,ee[1]],Q.push(se),ne++),!1==de&&(ae={nucleusX:G.nucleusX,nucleusY:G.nucleusY},ae.resolutionX=G.resolutionX,ae.resolutionY=G.resolutionY,ae.shiftX=G.shiftY,ae.shiftY=G.shiftY,ae.peaks=[{x:G.shiftY,y:G.shiftY,z:1}],K.push(ae),se=[0,ee[1]],Q.push(se),ne++),ne}function R(K,Q,G,ee){var te=0,ne=0,ae=4*G.shiftX,se=[],oe=[],le;for(ne=K.length-1;0<=ne;ne--)le=K[ne],0!==Q[ne][0]&&(Math.abs(le.shiftX-G.shiftX)<Z?(te++,ee&&Q[ne][1]++,se.push(ne),ae+=le.shiftX):Math.abs(le.shiftY-G.shiftY)<Z&&(te++,ee&&Q[ne][1]++,oe.push(ne),ae+=le.shiftY));if(ae/=se.length+oe.length+4,0<se.length)for(ne=se.length-1;0<=ne;ne--)K[se[ne]].shiftX=ae;if(0<oe.length)for(ne=oe.length-1;0<=ne;ne--)K[oe[ne]].shiftY=ae;return G.shiftX=ae,G.shiftY=ae,te}function T(K,Q,G,ee,te){for(var ne=K.length-1;0<=ne;ne--)if(Q[ne][0]===ee&&O(G,K[ne],te)<W){if(!te){let ae=(K[ne].shiftX+G.shiftX)/2,se=(K[ne].shiftY+G.shiftY)/2;K[ne].shiftX=ae,K[ne].shiftY=se,G.shiftX=ae,G.shiftY=se}else{let ae=G.shiftX,se=K[ne].shiftX;K[ne].shiftY=ae,G.shiftY=se}return ne}return-1}function F(K){for(var Q=Array(K.length),G=K.length-1;0<=G;G--)if(Q[G]=[0,0],Math.abs(K[G].shiftX-K[G].shiftY)<=Z){Q[G][1]=1;var ee=(2*K[G].shiftX+K[G].shiftY)/3;K[G].shiftX=ee,K[G].shiftY=ee}else Q[G][0]=0<K[G].shiftX-K[G].shiftY?1:-1;return Q}function O(K,Q,G){return G?Math.sqrt(Math.pow(K.shiftX-Q.shiftY,2)+Math.pow(K.shiftY-Q.shiftX,2)):Math.sqrt(Math.pow(K.shiftX-Q.shiftX,2)+Math.pow(K.shiftY-Q.shiftY,2))}function $(K,Q){var G=0,ee=0,te,ne;for(te=0;te<K.length;te++){var ae=K[te];for(ne=0;ne<Q.length;ne++)G=(Q[ne].startX+Q[ne].stopX)/2,ee=Math.abs(Q[ne].startX-Q[ne].stopX)/2,ae.nucleusX===Q[ne].nucleus&&Math.abs(ae.shiftX-G)<=ee&&ae._highlight.push(Q[ne]._highlight[0]),ae.nucleusY===Q[ne].nucleus&&Math.abs(ae.shiftY-G)<=ee&&ae._highlight.push(Q[ne]._highlight[0])}}var Z=0.05,W=0.05;E.exports={clean:function(K,Q){var G=Number.NEGATIVE_INFINITY,ee;for(ee=K.length-1;0<=ee;ee--)Math.abs(K[ee].z)>G&&(G=Math.abs(K[ee].z));for(G*=Q,ee=K.length-1;0<=ee;ee--)Math.abs(K[ee].z)<G&&K.splice(ee,1);return K},enhanceSymmetry:function(K){var Q=F(K),G=K,ee,te,ne,ae;for(ee=G.length-1;0<=ee;ee--)ae=G[ee],1<ae.peaks.length&&Q[ee][1]++,1===Q[ee][0]&&(ne=T(G,Q,ae,-1,!0),0<=ne&&(Q[ee][1]+=2,Q[ne][1]+=2));for(ee=G.length-1;0<=ee;ee--)ae=G[ee],0===Q[ee][0]&&(te=R(G,Q,ae,!0),Q[ee][1]+=te);var se=0;for(ee=G.length-1;0<=ee;ee--)0!==Q[ee][0]&&2<Q[ee][1]&&(se++,se+=P(G,Q,G[ee],Q[ee])),2<=Q[ee][1]&&0===Q[ee][0]&&se++;var oe=Array(se);for(se--,ee=G.length-1;0<=ee;ee--)(0!==Q[ee][0]&&2<Q[ee][1]||0===Q[ee][0]&&1<Q[ee][1])&&(oe[se--]=G[ee]);return oe},alignDimensions:function(K,Q){for(var G=0,ee;G<Q.length;G++)ee=Q[G],ee&&$(K,ee)}}},function(E,D,I){'use strict';function R(O,$){for(var Z=O.length-1;0<=Z;Z--)Math.abs(O[Z].y)<$&&O.splice(Z,1);return O}const T=I(78),F={thresholdFactor:1,optimize:!1,minMaxRatio:0.01,broadRatio:2.5e-4,smoothY:!0,nL:4,functionType:'gaussian',broadWidth:0.25,sgOptions:{windowSize:9,polynomial:3}};E.exports=function(O,$){var Z=Object.assign({},F,$),W=Math.abs(O.getNoiseLevel())*Z.thresholdFactor,K=O.getXYData();Z.from&&Z.to&&(K=O.getVector(Z.from,Z.to));var Q=T.gsd(K[0],K[1],Z);return Z.broadWidth&&(Q=T.post.joinBroadPeaks(Q,{width:Z.broadWidth})),Z.optimize&&(Q=T.post.optimizePeaks(Q,K[0],K[1],Z.nL,Z.functionType)),R(Q,W)}},function(E,D,I){'use strict';const P=I(7),R=I(50),T=I(20),F=I(142),O=I(42).simulate1D;class $ extends P{constructor(Z){super(Z)}static fromPrediction(Z,W){const K=O.SpinSystem.fromPrediction(Z);var Q=Object.assign({},W,{nbPoints:16384,maxClusterSize:8,output:'xy'});K.ensureClusterSize(Q);var G=O.simulate1D(K,Q);return $.fromXY(G.x,G.y,W)}static fromXY(Z,W,K){var Q={profiling:[],logs:[]},G=[];Q.spectra=G,Q.info={};var ee={};return ee.isXYdata=!0,ee.nbPoints=Z.length,ee.firstX=Z[0],ee.firstY=W[0],ee.lastX=Z[ee.nbPoints-1],ee.lastY=W[ee.nbPoints-1],ee.xFactor=1,ee.yFactor=1,ee.xUnit=K.xUnit||'PPM',ee.yUnit=K.yUnit||'Intensity',ee.deltaX=(ee.lastX-ee.firstX)/(ee.nbPoints-1),ee.title=K.title||'spectra-data from xy',ee.dataType=K.dataType||'NMR',ee.observeFrequency=K.frequency||400,Q.info.observefrequency=ee.observeFrequency,Q.info['.SOLVENTNAME']=K.solvent||'none',Q.info.$SW_h=Math.abs(ee.lastX-ee.firstX)*ee.observeFrequency,Q.info.$SW=Math.abs(ee.lastX-ee.firstX),Q.info.$TD=ee.nbPoints,Q.xType=K.nucleus||'1H',ee.data=[{x:Z,y:W}],Q.twoD=!1,G.push(ee),new $(Q)}static fromBruker(Z,W){W=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},W);var K=null;return K=Array.isArray(Z)?T.converFolder(Z,W):T.convertZip(Z,W),K?K.map(function(Q){return new $(Q)}):null}getNucleus(Z){return Z&&0!==Z&&1!==Z?'':this.sd.xType}getSolventName(){return(this.sd.info['.SOLVENTNAME']||this.sd.info.$SOLVENT||'').replace('<','').replace('>','')}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}getNMRPeakThreshold(Z){return'1H'===Z?3:'13C'===Z?5:1}fourierTransform(){return R.fourierTransform(this)}postFourierTransform(Z){return R.phaseCorrection(0,Z)}zeroFilling(Z,W){return R.zeroFilling(this,Z,W)}brukerFilter(){return R.digitalFilter(this,{brukerFilter:!0})}digitalFilter(Z){return R.digitalFilter(this,Z)}apodization(Z,W){return R.apodization(this,{functionName:Z,lineBroadening:W})}echoAntiechoFilter(){return this}SNVFilter(){return this}powerFilter(Z){var W=this.getMinY();return 1>Z&&0>W&&this.YShift(-1*W),this}phaseCorrection(Z,W){return R.phaseCorrection(this,Z,W)}getRanges(Z){if(this.ranges)return this.ranges;var W=this.getPeaks(Z),K=Object.assign({},{nH:this.totalIntegral},Z);return F(this,W,K)}createRanges(Z){return this.ranges=null,this.peaks=null,this.ranges=this.getRanges(Z),this.ranges}}E.exports=$},function(E,D,I){'use strict';const P=I(7),R=I(141),T=I(51),F=I(20),O=I(50),$=I(3).array,Z=I(42).simulate2D;class W extends P{constructor(K){super(K)}static fromPrediction(K,Q){var G=Z(K,Q),ee=W.fromMatrix(G,Q),te=ee.toJcamp({type:'NTUPLES'});return W.fromJcamp(te)}static fromBruker(K,Q){Q=Object.assign({},{xy:!0,keepSpectra:!0,keepRecordsRegExp:/^.+$/},Q);var G=null;return G=Array.isArray(K)?F.converFolder(K,Q):F.convertZip(K,Q),G?G.map(function(ee){return new W(ee)}):null}static fromMatrix(K,Q){var G={profiling:[],logs:[]},ee=[];let te=K[0].length;G.spectra=ee,G.info={};let ne=Q.firstY||0,ae=Q.lastY||K.length-1,se=(ae-ne)/(K.length-1),oe=Q.firstX||0,le=Q.lastX||te-1,ue=Q.x;if(!ue){ue=Array(te);for(let me=0;me<te;me++)ue[me]=oe+(ae-ne)/(te-1)*me}let he=Q.frequencyX||400,ce=Number.MAX_SAFE_INTEGER,ge=Number.MIN_SAFE_INTEGER;return K.forEach((me,pe)=>{var fe={};fe.isXYdata=!0,fe.nbPoints=te,fe.firstX=oe,fe.firstY=me[0],fe.lastX=le,fe.lastY=me[fe.nbPoints-1],fe.xFactor=1,fe.yFactor=1,fe.deltaX=(fe.lastX-fe.firstX)/(fe.nbPoints-1),fe.title=Q.title||'spectra-data from matrix',fe.dataType=Q.dataType||'nD NMR SPECTRUM',fe.observeFrequency=he,fe.data=[{x:ue,y:me}],fe.page=ne+pe*se,G.xType=Q.xType||Q.nucleusX||'1H',ee.push(fe);let xe=$.minMax(me);ce=Math.min(ce,xe.min),ge=Math.max(ge,xe.max)}),G.ntuples=[{units:Q.xUnit||'PPM'},{units:Q.yUnit||'PPM'},{units:Q.zUnit||'Intensity'}],G.info['2D_Y_FREQUENCY']=Q.frequencyY||400,G.info['2D_X_FREQUENCY']=Q.frequencyX||400,G.info.observefrequency=G.info['2D_X_FREQUENCY'],G.info.$BF1=G.info.observefrequency,G.info['.SOLVENTNAME']=Q.solvent||'none',G.info.$SW_h=Math.abs(le-oe)*he,G.info.$SW=Math.abs(le-oe),G.info.$TD=te,G.info.firstY=ne,G.info.lastY=ae,G.minMax={minY:ne,maxY:ae,minX:oe,maxX:le,minZ:ce,maxZ:ge},G.yType=Q.yType||Q.nucleusY||'1H',G.twoD=!0,new W(G)}isHomoNuclear(){return this.sd.xType===this.sd.yType}observeFrequencyX(){return this.sd.spectra[0].observeFrequency}observeFrequencyY(){return this.sd.indirectFrequency}getSolventName(){return(this.sd.info['.SOLVENTNAME']||this.sd.info.$SOLVENT).replace('<','').replace('>','')}getXUnits(){return this.sd.ntuples[1].units}getYUnits(){return this.sd.ntuples[0].units}getZUnits(){return this.sd.ntuples[2].units}getLastY(){return this.sd.minMax.maxY}getFirstY(){return this.sd.minMax.minY}getDeltaY(){return(this.getLastY()-this.getFirstY())/(this.getNbSubSpectra()-1)}getMinZ(){return this.sd.minMax.minZ}getMaxZ(){return this.sd.minMax.maxZ}getZones(K){K=K||{},K.thresholdFactor||(K.thresholdFactor=1);var Q=Math.round(255*Math.random());K.idPrefix&&(Q=K.idPrefix);for(var G=R(this,K.thresholdFactor),ee=0;ee<G.length;ee++)G[ee]._highlight=[Q+'_'+ee],G[ee].signalID=Q+'_'+ee;if(K.references&&T.alignDimensions(G,K.references),'new'===K.format){for(var te=Array(G.length),ne=G.length-1,ae;0<=ne;ne--)ae=G[ne],te[ne]={fromTo:ae.fromTo,integral:ae.intensity||1,remark:'',signal:[{peak:ae.peaks,delta:[ae.shiftX,ae.shiftY]}],_highlight:ae._highlight,signalID:ae.signalID};G=te}return this.zones=G,this.zones}getNMRPeakThreshold(K){return'1H'===K?3:'13C'===K?5:1}getNucleus(K){return 1===K?this.sd.xType:2===K?this.sd.yType:this.sd.xType}zeroFilling(K,Q){return O.zeroFilling(this,K,Q)}brukerFilter(){return O.digitalFilter(this,{brukerFilter:!0})}digitalFilter(K){return O.digitalFilter(this,K)}fourierTransform(){return O.fourierTransform(this)}postFourierTransform(K){return O.phaseCorrection(0,K)}}E.exports=W},function(E,D){'use strict';function P(te){var ne=te.length;if(0<ne%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===te[ne-2]?2:'='===te[ne-1]?1:0}function F(te){return Z[63&te>>18]+Z[63&te>>12]+Z[63&te>>6]+Z[63&te]}function O(te,ne,ae){for(var oe=[],le=ne,se;le<ae;le+=3)se=(te[le]<<16)+(te[le+1]<<8)+te[le+2],oe.push(F(se));return oe.join('')}D.byteLength=function(te){return 3*te.length/4-P(te)},D.toByteArray=function(te){var ue=te.length,ne,ae,se,oe,le,de;le=P(te),de=new K(3*ue/4-le),se=0<le?ue-4:ue;var he=0;for(ne=0,ae=0;ne<se;ne+=4,ae+=3)oe=W[te.charCodeAt(ne)]<<18|W[te.charCodeAt(ne+1)]<<12|W[te.charCodeAt(ne+2)]<<6|W[te.charCodeAt(ne+3)],de[he++]=255&oe>>16,de[he++]=255&oe>>8,de[he++]=255&oe;return 2===le?(oe=W[te.charCodeAt(ne)]<<2|W[te.charCodeAt(ne+1)]>>4,de[he++]=255&oe):1==le&&(oe=W[te.charCodeAt(ne)]<<10|W[te.charCodeAt(ne+1)]<<4|W[te.charCodeAt(ne+2)]>>2,de[he++]=255&oe>>8,de[he++]=255&oe),de},D.fromByteArray=function(te){for(var ae=te.length,se=ae%3,oe='',le=[],de=16383,ue=0,he=ae-se,ne;ue<he;ue+=de)le.push(O(te,ue,ue+de>he?he:ue+de));return 1==se?(ne=te[ae-1],oe+=Z[ne>>2],oe+=Z[63&ne<<4],oe+='=='):2==se&&(ne=(te[ae-2]<<8)+te[ae-1],oe+=Z[ne>>10],oe+=Z[63&ne>>4],oe+=Z[63&ne<<2],oe+='='),le.push(oe),le.join('')};for(var Z=[],W=[],K='undefined'==typeof Uint8Array?Array:Uint8Array,Q='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',G=0,ee=Q.length;G<ee;++G)Z[G]=Q[G],W[Q.charCodeAt(G)]=G;W['-'.charCodeAt(0)]=62,W['_'.charCodeAt(0)]=63},function(E,D){D.read=function(I,P,R,T,F){var O,$,Z=8*F-T-1,W=(1<<Z)-1,K=W>>1,Q=-7,G=R?F-1:0,ee=R?-1:1,te=I[P+G];for(G+=ee,O=te&(1<<-Q)-1,te>>=-Q,Q+=Z;0<Q;O=256*O+I[P+G],G+=ee,Q-=8);for($=O&(1<<-Q)-1,O>>=-Q,Q+=T;0<Q;$=256*$+I[P+G],G+=ee,Q-=8);if(0===O)O=1-K;else{if(O===W)return $?NaN:(te?-1:1)*Infinity;$+=Math.pow(2,T),O-=K}return(te?-1:1)*$*Math.pow(2,O-T)},D.write=function(I,P,R,T,F,O){var $,Z,W,K=8*O-F-1,Q=(1<<K)-1,G=Q>>1,ee=23===F?Math.pow(2,-24)-Math.pow(2,-77):0,te=T?0:O-1,ne=T?1:-1,ae=0>P||0===P&&0>1/P?1:0;for(P=Math.abs(P),isNaN(P)||P===Infinity?(Z=isNaN(P)?1:0,$=Q):($=Math.floor(Math.log(P)/Math.LN2),1>P*(W=Math.pow(2,-$))&&($--,W*=2),P+=1<=$+G?ee/W:ee*Math.pow(2,1-G),2<=P*W&&($++,W/=2),$+G>=Q?(Z=0,$=Q):1<=$+G?(Z=(P*W-1)*Math.pow(2,F),$+=G):(Z=P*Math.pow(2,G-1)*Math.pow(2,F),$=0));8<=F;I[R+te]=255&Z,te+=ne,Z/=256,F-=8);for($=$<<F|Z,K+=F;0<K;I[R+te]=255&$,te+=ne,$/=256,K-=8);I[R+te-ne]|=128*ae}},function(E){'use strict';const P=8192,R=[];E.exports=class{constructor(F,O){O=O||{},F===void 0&&(F=P),'number'==typeof F&&(F=new ArrayBuffer(F));let $=F.byteLength;const Z=O.offset?O.offset>>>0:0;F.buffer&&($=F.byteLength-Z,F=F.byteLength===F.buffer.byteLength?Z?F.buffer.slice(Z):F.buffer:F.buffer.slice(F.byteOffset+Z,F.byteOffset+F.byteLength)),this.buffer=F,this.length=$,this.byteLength=$,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=$||P,this._mark=0}available(F){return void 0===F&&(F=1),this.offset+F<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(F){F===void 0&&(F=1),this.offset+=F}seek(F){this.offset=F}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(F){if(void 0===F&&(F=1),!this.available(F)){const O=this._increment+this._increment;this._increment=O;const $=this.length+O,Z=new Uint8Array($);Z.set(new Uint8Array(this.buffer)),this.buffer=Z.buffer,this.length=$,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(F){F===void 0&&(F=1);for(var O=new Uint8Array(F),$=0;$<F;$++)O[$]=this.readByte();return O}readInt16(){var F=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,F}readUint16(){var F=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,F}readInt32(){var F=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,F}readUint32(){var F=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,F}readFloat32(){var F=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,F}readFloat64(){var F=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,F}readChar(){return String.fromCharCode(this.readInt8())}readChars(F){F===void 0&&(F=1),R.length=F;for(var O=0;O<F;O++)R[O]=this.readChar();return R.join('')}writeBoolean(F){this.writeUint8(F?255:0)}writeInt8(F){this.ensureAvailable(1),this._data.setInt8(this.offset++,F)}writeUint8(F){this.ensureAvailable(1),this._data.setUint8(this.offset++,F)}writeByte(F){this.writeUint8(F)}writeBytes(F){this.ensureAvailable(F.length);for(var O=0;O<F.length;O++)this._data.setUint8(this.offset++,F[O])}writeInt16(F){this.ensureAvailable(2),this._data.setInt16(this.offset,F,this.littleEndian),this.offset+=2}writeUint16(F){this.ensureAvailable(2),this._data.setUint16(this.offset,F,this.littleEndian),this.offset+=2}writeInt32(F){this.ensureAvailable(4),this._data.setInt32(this.offset,F,this.littleEndian),this.offset+=4}writeUint32(F){this.ensureAvailable(4),this._data.setUint32(this.offset,F,this.littleEndian),this.offset+=4}writeFloat32(F){this.ensureAvailable(4),this._data.setFloat32(this.offset,F,this.littleEndian),this.offset+=4}writeFloat64(F){this.ensureAvailable(8),this._data.setFloat64(this.offset,F,this.littleEndian),this.offset+=8}writeChar(F){this.writeUint8(F.charCodeAt(0))}writeChars(F){for(var O=0;O<F.length;O++)this.writeUint8(F.charCodeAt(O))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},function(E){var I={}.toString;E.exports=Array.isArray||function(P){return'[object Array]'==I.call(P)}},function(E){'use strict';var P=/[,\t \+-]*(?=[^\d,\t \.])|[ \t]+(?=[\d+\.-])/,R=/\$\$.*/;E.exports=function(F,O){F.deltaX||(F.deltaX=(F.lastX-F.firstX)/(F.nbPoints-1)),F.isXYdata=!0;var Z=[],W=0;F.data=[Z];var K=F.firstX,Q=F.firstY,G=O.split(/[\r\n]+/),ee,te,ne;te=[];for(var se=1,oe=G.length;se<oe;se++)if(te=G[se].trim().replace(R,'').split(P),0<te.length)for(var de=1,ue=te.length;de<ue;de++)if(1===de&&(ee||0===ee))ee=null,ne=te[de].charCodeAt(0),!1;else if(0<te[de].length)if(ne=te[de].charCodeAt(0),43===ne||45===ne||46===ne||47<ne&&58>ne)ee=null,Q=+te[de],Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX;else if(63<ne&&74>ne)ee=null,Q=+(String.fromCharCode(ne-16)+te[de].substring(1)),Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX;else if(96<ne&&106>ne)ee=null,Q=1*-(String.fromCharCode(ne-48)+te[de].substring(1)),Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX;else if(82<ne&&91>ne||115===ne){var he=String.fromCharCode(ne-34)+te[de].substring(1)-1;115==ne&&(he='9'+te[de].substring(1)-1);for(var ce=0;ce<he;ce++)ee&&(Q+=ee),Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX}else 37===ne?(ee=+('0'+te[de].substring(1)),Q+=ee,Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX):73<ne&&83>ne?(ee=1*(String.fromCharCode(ne-25)+te[de].substring(1)),Q+=ee,Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX):105<ne&&115>ne&&(ee=1*-(String.fromCharCode(ne-57)+te[de].substring(1)),Q+=ee,Z[W++]=K,Z[W++]=Q*F.yFactor,K+=F.deltaX)}},function(E,D,I){'use strict';var P=I(0),R=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918000,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];E.exports=function(F,O){if('undefined'==typeof F||!F.length)return 0;var $='string'!==P.getTypeOf(F);'undefined'==typeof O&&(O=0);var Z=0,W=0,K=0;O^=-1;for(var Q=0,G=F.length;Q<G;Q++)K=$?F[Q]:F.charCodeAt(Q),W=255&(O^K),Z=R[W],O=O>>>8^Z;return-1^O}},function(E,D,I){'use strict';var P=I(0);D.string2binary=function(R){return P.string2binary(R)},D.string2Uint8Array=function(R){return P.transformTo('uint8array',R)},D.uint8Array2String=function(R){return P.transformTo('string',R)},D.string2Blob=function(R){var T=P.transformTo('arraybuffer',R);return P.arrayBuffer2Blob(T)},D.arrayBuffer2Blob=function(R){return P.arrayBuffer2Blob(R)},D.transformTo=function(R,T){return P.transformTo(R,T)},D.getTypeOf=function(R){return P.getTypeOf(R)},D.checkSupport=function(R){return P.checkSupport(R)},D.MAX_VALUE_16BITS=P.MAX_VALUE_16BITS,D.MAX_VALUE_32BITS=P.MAX_VALUE_32BITS,D.pretty=function(R){return P.pretty(R)},D.findCompression=function(R){return P.findCompression(R)},D.isRegExp=function(R){return P.isRegExp(R)}},function(E,D,I){'use strict';var P='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Uint32Array,R=I(118);D.uncompressInputType=P?'uint8array':'array',D.compressInputType=P?'uint8array':'array',D.magic='\b\0',D.compress=function(T,F){return R.deflateRaw(T,{level:F.level||-1})},D.uncompress=function(T){return R.inflateRaw(T)}},function(E,D,I){'use strict';function P(T,F){return this instanceof P?void(this.files={},this.comment=null,this.root='',T&&this.load(T,F),this.clone=function(){var O=new P;for(var $ in this)'function'!=typeof this[$]&&(O[$]=this[$]);return O}):new P(T,F)}var R=I(8);P.prototype=I(11),P.prototype.load=I(64),P.support=I(5),P.defaults=I(27),P.utils=I(61),P.base64={encode:function(T){return R.encode(T)},decode:function(T){return R.decode(T)}},P.compressions=I(9),E.exports=P},function(E,D,I){'use strict';var P=I(8),R=I(31),T=I(0),F=I(68);E.exports=function(O,$){var Z,W,K,Q;for($=T.extend($||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:R.utf8decode}),$.base64&&(O=P.decode(O)),W=new F(O,$),Z=W.files,K=0;K<Z.length;K++)Q=Z[K],this.file(Q.fileNameStr,Q.decompressed,{binary:!0,optimizedBinaryString:!0,date:Q.date,dir:Q.dir,comment:Q.fileCommentStr.length?Q.fileCommentStr:null,unixPermissions:Q.unixPermissions,dosPermissions:Q.dosPermissions,createFolders:$.createFolders});return W.zipComment.length&&(this.comment=W.zipComment),this}},function(E,D,I){'use strict';function P(T){this.data=T,this.length=this.data.length,this.index=0,this.zero=0}var R=I(30);P.prototype=new R,P.prototype.readData=function(T){this.checkOffset(T);var F=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,F},E.exports=P},function(E,D,I){'use strict';var P=I(0),R=function(){this.data=[]};R.prototype={append:function(T){T=P.transformTo('string',T),this.data.push(T)},finalize:function(){return this.data.join('')}},E.exports=R},function(E,D,I){'use strict';var P=I(0),R=function(T){this.data=new Uint8Array(T),this.index=0};R.prototype={append:function(T){0!==T.length&&(T=P.transformTo('uint8array',T),this.data.set(T,this.index),this.index+=T.length)},finalize:function(){return this.data}},E.exports=R},function(E,D,I){'use strict';function P(G,ee){this.files=[],this.loadOptions=ee,G&&this.load(G)}var R=I(29),T=I(65),F=I(30),O=I(24),$=I(0),Z=I(28),W=I(69),K=I(5),Q=I(11);P.prototype={checkSignature:function(G){var ee=this.reader.readString(4);if(ee!==G)throw new Error('Corrupted zip or bug : unexpected signature ('+$.pretty(ee)+', expected '+$.pretty(G)+')')},isSignature:function(G,ee){var te=this.reader.index;this.reader.setIndex(G);var ne=this.reader.readString(4);return this.reader.setIndex(te),ne===ee},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var G=this.reader.readData(this.zipCommentLength),ee=K.uint8array?'uint8array':'array',te=$.transformTo(ee,G);this.zipComment=this.loadOptions.decodeFileName(te)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var G=this.zip64EndOfCentralSize-44,te,ne,ae;0<G;)te=this.reader.readInt(2),ne=this.reader.readInt(4),ae=this.reader.readString(ne),this.zip64ExtensibleData[te]={id:te,length:ne,value:ae}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error('Multi-volumes zip are not supported')},readLocalFiles:function(){var G,ee;for(G=0;G<this.files.length;G++)ee=this.files[G],this.reader.setIndex(ee.localHeaderOffset),this.checkSignature(Z.LOCAL_FILE_HEADER),ee.readLocalPart(this.reader),ee.handleUTF8(),ee.processAttributes()},readCentralDir:function(){var G;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===Z.CENTRAL_FILE_HEADER;)G=new W({zip64:this.zip64},this.loadOptions),G.readCentralPart(this.reader),this.files.push(G);if(this.centralDirRecords!==this.files.length)if(0!==this.centralDirRecords&&0===this.files.length)throw new Error('Corrupted zip or bug: expected '+this.centralDirRecords+' records in central dir, got '+this.files.length);else;},readEndOfCentral:function(){var G=this.reader.lastIndexOfSignature(Z.CENTRAL_DIRECTORY_END);if(0>G){var ee=!this.isSignature(0,Z.LOCAL_FILE_HEADER);if(ee)throw new Error('Can\'t find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html');else throw new Error('Corrupted zip : can\'t find end of central directory')}this.reader.setIndex(G);var te=G;if(this.checkSignature(Z.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===$.MAX_VALUE_16BITS||this.diskWithCentralDirStart===$.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===$.MAX_VALUE_16BITS||this.centralDirRecords===$.MAX_VALUE_16BITS||this.centralDirSize===$.MAX_VALUE_32BITS||this.centralDirOffset===$.MAX_VALUE_32BITS){if(this.zip64=!0,G=this.reader.lastIndexOfSignature(Z.ZIP64_CENTRAL_DIRECTORY_LOCATOR),0>G)throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory locator');if(this.reader.setIndex(G),this.checkSignature(Z.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,Z.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(Z.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error('Corrupted zip : can\'t find the ZIP64 end of central directory');this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(Z.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var ne=this.centralDirOffset+this.centralDirSize;this.zip64&&(ne+=20,ne+=12+this.zip64EndOfCentralSize);var ae=te-ne;if(0<ae)this.isSignature(te,Z.CENTRAL_FILE_HEADER)||(this.reader.zero=ae);else if(0>ae)throw new Error('Corrupted zip: missing '+Math.abs(ae)+' bytes.')},prepareReader:function(G){var ee=$.getTypeOf(G);if($.checkSupport(ee),'string'===ee&&!K.uint8array)this.reader=new R(G,this.loadOptions.optimizedBinaryString);else if('nodebuffer'===ee)this.reader=new T(G);else if(K.uint8array)this.reader=new F($.transformTo('uint8array',G));else if(K.array)this.reader=new O($.transformTo('array',G));else throw new Error('Unexpected error: unsupported type \''+ee+'\'')},load:function(G){this.prepareReader(G),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},E.exports=P},function(E,D,I){'use strict';function P(K,Q){this.options=K,this.loadOptions=Q}var R=I(29),T=I(0),F=I(25),O=I(11),$=I(5);P.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(K,Q,G){return function(){var ee=K.index;K.setIndex(Q);var te=K.readData(G);return K.setIndex(ee),te}},prepareContent:function(K,Q,G,ee,te){return function(){var ne=T.transformTo(ee.uncompressInputType,this.getCompressedContent()),ae=ee.uncompress(ne);if(ae.length!==te)throw new Error('Bug : uncompressed data size mismatch');return ae}},readLocalPart:function(K){var Q,G;if(K.skip(22),this.fileNameLength=K.readInt(2),G=K.readInt(2),this.fileName=K.readData(this.fileNameLength),K.skip(G),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error('Bug or corrupted zip : didn\'t get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)');if(Q=T.findCompression(this.compressionMethod),null===Q)throw new Error('Corrupted zip : compression '+T.pretty(this.compressionMethod)+' unknown (inner file : '+T.transformTo('string',this.fileName)+')');if(this.decompressed=new F,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(K,K.index,this.compressedSize,Q),this.decompressed.getContent=this.prepareContent(K,K.index,this.compressedSize,Q,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=T.transformTo('string',this.decompressed.getContent()),O.crc32(this.decompressed)!==this.crc32))throw new Error('Corrupted zip : CRC32 mismatch')},readCentralPart:function(K){if(this.versionMadeBy=K.readInt(2),this.versionNeeded=K.readInt(2),this.bitFlag=K.readInt(2),this.compressionMethod=K.readString(2),this.date=K.readDate(),this.crc32=K.readInt(4),this.compressedSize=K.readInt(4),this.uncompressedSize=K.readInt(4),this.fileNameLength=K.readInt(2),this.extraFieldsLength=K.readInt(2),this.fileCommentLength=K.readInt(2),this.diskNumberStart=K.readInt(2),this.internalFileAttributes=K.readInt(2),this.externalFileAttributes=K.readInt(4),this.localHeaderOffset=K.readInt(4),this.isEncrypted())throw new Error('Encrypted zip are not supported');this.fileName=K.readData(this.fileNameLength),this.readExtraFields(K),this.parseZIP64ExtraField(K),this.fileComment=K.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var K=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),K==0&&(this.dosPermissions=63&this.externalFileAttributes),K==3&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||'/'!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var Q=new R(this.extraFields[1].value);this.uncompressedSize===T.MAX_VALUE_32BITS&&(this.uncompressedSize=Q.readInt(8)),this.compressedSize===T.MAX_VALUE_32BITS&&(this.compressedSize=Q.readInt(8)),this.localHeaderOffset===T.MAX_VALUE_32BITS&&(this.localHeaderOffset=Q.readInt(8)),this.diskNumberStart===T.MAX_VALUE_32BITS&&(this.diskNumberStart=Q.readInt(4))}},readExtraFields:function(K){var Q=K.index,G,ee,te;for(this.extraFields=this.extraFields||{};K.index<Q+this.extraFieldsLength;)G=K.readInt(2),ee=K.readInt(2),te=K.readString(ee),this.extraFields[G]={id:G,length:ee,value:te}},handleUTF8:function(){var K=$.uint8array?'uint8array':'array';if(this.useUTF8())this.fileNameStr=O.utf8decode(this.fileName),this.fileCommentStr=O.utf8decode(this.fileComment);else{var Q=this.findExtraFieldUnicodePath();if(null!==Q)this.fileNameStr=Q;else{var G=T.transformTo(K,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(G)}var ee=this.findExtraFieldUnicodeComment();if(null!==ee)this.fileCommentStr=ee;else{var te=T.transformTo(K,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(te)}}},findExtraFieldUnicodePath:function(){var K=this.extraFields[28789];if(K){var Q=new R(K.value);return 1===Q.readInt(1)?O.crc32(this.fileName)===Q.readInt(4)?O.utf8decode(Q.readString(K.length-5)):null:null}return null},findExtraFieldUnicodeComment:function(){var K=this.extraFields[25461];if(K){var Q=new R(K.value);return 1===Q.readInt(1)?O.crc32(this.fileComment)===Q.readInt(4)?O.utf8decode(Q.readString(K.length-5)):null:null}return null}},E.exports=P},function(E,D,I){'use strict';function F(K){for(var Q=Array(K[0].length),G=0;G<Q.length;++G)Q[G]=Array(K.length);for(G=0;G<K.length;++G)for(var ee=0;ee<K[0].length;++ee)Q[ee][G]=K[G][ee];return Q}const W=I(3).array;E.exports={coordArrayToPoints:function(K,Q){if(0!=K.length%Q)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var G=K.length/Q,ee=Array(G),te=0,ne=0,ae;ne<K.length;ne+=Q){ae=Array(Q);for(var se=0;se<Q;++se)ae[se]=K[ne+se];ee[te]=ae,te++}return ee},coordArrayToCoordMatrix:function(K,Q){if(0!=K.length%Q)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var G=Array(Q),ee=K.length/Q,te=0;te<G.length;te++)G[te]=Array(ee);for(te=0;te<K.length;te+=Q)for(var ne=0,ae;ne<Q;++ne)ae=Math.floor(te/Q),G[ne][ae]=K[te+ne];return G},coordMatrixToCoordArray:function(K){for(var Q=Array(K.length*K[0].length),G=0,ee=0;ee<K[0].length;++ee)for(var te=0;te<K.length;++te)Q[G]=K[te][ee],++G;return Q},coordMatrixToPoints:F,pointsToCoordArray:function(K){for(var Q=Array(K.length*K[0].length),G=0,ee=0;ee<K.length;++ee)for(var te=0;te<K[0].length;++te)Q[G]=K[ee][te],++G;return Q},pointsToCoordMatrix:F,applyDotProduct:function(K,Q){var G,ee;K.length<=Q.length?(ee=K,G=Q):(ee=Q,G=K);for(var te=G.length-ee.length+1,ne=Array(te),ae=0,se;ae<te;++ae){se=0;for(var oe=0;oe<ee.length;++oe)se+=ee[oe]*G[ae+oe];ne[ae]=se}return ne},scale:function(K,Q){var G=Q.inPlace?K:Array(K.length);const ee=Q.max,te=Q.min;if('number'==typeof ee){if('number'==typeof te)for(var ne=W.minMax(K),ae=(ee-te)/(ne.max-ne.min),se=0;se<G.length;se++)G[se]=(K[se]-ne.min)*ae+te;else for(var oe=W.max(K),ae=ee/oe,se=0;se<G.length;se++)G[se]=K[se]*ae;}else if('number'==typeof te)for(var oe=W.min(K),ae=te/oe,se=0;se<G.length;se++)G[se]=K[se]*ae;return G}}},function(E,D){'use strict';function R(O,$,Z,W,K){function Q(je,we,Se,ve){return(ve-we)/(Se-je)}var G=O.length,ee=(W-Z)/(K-1),ne=Z-ee/2,ae=Array(K),se=O[1]-O[0],oe=O[O.length-1]-O[O.length-2],le=ne,de=ne+ee,ue=Number.MIN_VALUE,he=0,ce=O[0]-se,ge=0,me=0,pe=0,fe=0,xe=0,be=0,ye=0,_e=0;main:for(;;){for(;0<=ce-de;){var ke=F(0,de-ue,pe,he);if(be=me+ke,ae[_e]=(be-xe)/ee,_e++,_e===K)break main;le=de,de+=ee,xe=be}ue<=le&&le<=ce&&(ke=F(0,le-ue,pe,he),xe=me+ke),me+=F(ue,ce,pe,fe),ue=ce,he=ge,ye<G?(ce=O[ye],ge=$[ye],ye++):ye===G&&(ce+=oe,ge=0),pe=Q(ue,he,ce,ge),fe=-pe*ue+he}return ae}function T(O,$,Z,W,K){var Q=O.length,G=(W-Z)/(K-1),te=O[O.length-1]-O[O.length-2],ne=Z-G/2,ae=Array(K),se=ne,oe=ne+G,le=-Number.MAX_VALUE,de=0,ue=O[0],he=$[0],ce=0,ge=!0,me=0,pe=0,fe=1,xe=0;main:for(;;){if(le>=ue)throw new Error('x must be an increasing serie');for(;0<le-oe;){if(ge&&(pe++,ge=!1),ae[xe]=0>=pe?0:me/pe,xe++,xe===K)break main;se=oe,oe+=G,me=0,pe=0}le>se&&(me+=de,pe++),(le==-Number.MAX_VALUE||1<ce)&&pe--,le=ue,de=he,fe<Q?(ue=O[fe],he=$[fe],fe++):(ue+=te,he=0,ce++)}return ae}function F(O,$,Z,W){return 0.5*Z*$*$+W*$-(0.5*Z*O*O+W*O)}D.getEquallySpacedData=function(O,$,Z){1<O.length&&O[0]>O[1]&&(O=O.slice().reverse(),$=$.slice().reverse());var W=O.length;if(W!==$.length)throw new RangeError('the x and y vector doesn\'t have the same size.');Z===void 0&&(Z={});var K=Z.from===void 0?O[0]:Z.from;if(isNaN(K)||!isFinite(K))throw new RangeError('\'From\' value must be a number');var Q=Z.to===void 0?O[O.length-1]:Z.to;if(isNaN(Q)||!isFinite(Q))throw new RangeError('\'To\' value must be a number');var G=K>Q;if(G){var ee=K;K=Q,Q=ee}var te=Z.numberOfPoints===void 0?100:Z.numberOfPoints;if(isNaN(te)||!isFinite(te))throw new RangeError('\'Number of points\' value must be a number');if(1>te)throw new RangeError('the number of point must be higher than 1');var ne='slot'===Z.variant?'slot':'smooth',ae='slot'==ne?T(O,$,K,Q,te):R(O,$,K,Q,te);return G?ae.reverse():ae},D.integral=F},function(E,D,I){E.exports=D=I(70),D.getEquallySpacedData=I(71).getEquallySpacedData,D.SNV=I(73).SNV},function(E,D,I){'use strict';D.SNV=function(T){for(var F=R.mean(T),O=R.standardDeviation(T),$=T.slice(),Z=0;Z<T.length;Z++)$[Z]=($[Z]-F)/O;return $};var R=I(3).array},function(E){E.exports=function(P,R,T){T=T||{};for(var F=T.from||0,O=T.to||P.length-1;F<=O;){var $=F+O>>>1,Z=P[$];if(Z<R)F=$+1;else if(Z>R)O=$-1;else return $}return-(F+1)}},function(E){'use strict';function P(T){this.value=T,this.parent=null,this.rank=0}E.exports=class{constructor(){this.nodes=new Map}add(T){var F=this.nodes.get(T);return F||(F=new P(T),this.nodes.set(T,F)),F}union(T,F){const O=this.find(T),$=this.find(F);O===$||(O.rank<$.rank?O.parent=$:O.rank>$.rank?$.parent=O:($.parent=O,O.rank++))}find(T){for(var F=T;null!==F.parent;)F=F.parent;for(var O=T,$;null!==O.parent;)$=O,O=O.parent,$.parent=F;return F}connected(T,F){return this.find(T)===this.find(F)}}},function(E,D,I){'use strict';var P=I(33);E.exports={DEBUG:!1,ifft2DArray:function(T,F,O){var $=Array(F*O),Z=F/2,W=2*(O-1);P.init(Z);for(var K={re:Array(Z),im:Array(Z)},Q=0;Q<O;Q++){for(var G=Z-1;0<=G;G--)K.re[G]=T[2*G*O+Q],K.im[G]=T[(2*G+1)*O+Q];P.bt(K.re,K.im);for(var G=Z-1;0<=G;G--)$[2*G*O+Q]=K.re[G],$[(2*G+1)*O+Q]=K.im[G]}var ee=Array(Z*W);P.init(W);for(var te={re:Array(W),im:Array(W)},G=0;G<F;G+=2){te.re[0]=$[G*O],te.im[0]=$[(G+1)*O];for(var Q=1;Q<O;Q++)te.re[Q]=$[G*O+Q],te.im[Q]=$[(G+1)*O+Q],te.re[W-Q]=$[G*O+Q],te.im[W-Q]=-$[(G+1)*O+Q];P.bt(te.re,te.im);for(var ae=G/2*W,Q=W-1;0<=Q;Q--)ee[ae+Q]=te.re[Q]/(W*Z)}return ee},fft2DArray:function(T,F,O){var Z=Object.assign({},{inplace:!0}),W=O/2+1,K=2*F,Q=Array(K*W);P.init(O);for(var G={re:Array(O),im:Array(O)},ee={re:Array(O),im:Array(O)},te={re:Array(O),im:Array(O)},de=0,ne,ae,se,oe,le;de<F/2;de++){ne=2*de*O,G.re=T.slice(ne,ne+O),ne=(2*de+1)*O,G.im=T.slice(ne,ne+O),P.fft1d(G.re,G.im),this.reconstructTwoRealFFT(G,ee,te),ae=4*de*W,se=(4*de+1)*W,oe=(4*de+2)*W,le=(4*de+3)*W;for(var ue=W-1;0<=ue;ue--)Q[ae+ue]=ee.re[ue],Q[se+ue]=ee.im[ue],Q[oe+ue]=te.re[ue],Q[le+ue]=te.im[ue]}ee=null,te=null;var he=Array(K*W);P.init(F);for(var ce={re:Array(F),im:Array(F)},ge=W-1;0<=ge;ge--){for(var de=F-1;0<=de;de--)ce.re[de]=Q[2*de*W+ge],ce.im[de]=Q[(2*de+1)*W+ge],isNaN(ce.re[de])&&(ce.re[de]=0),isNaN(ce.im[de])&&(ce.im[de]=0);P.fft1d(ce.re,ce.im);for(var de=F-1;0<=de;de--)he[2*de*W+ge]=ce.re[de],he[(2*de+1)*W+ge]=ce.im[de]}return he},reconstructTwoRealFFT:function(T,F,O){var $=T.re.length;F.re[0]=T.re[0],F.im[0]=0,O.re[0]=T.im[0],O.im[0]=0;for(var ee=$/2,Z,W,K,Q,G;0<ee;ee--)G=$-ee,Z=0.5*(T.re[ee]-T.re[G]),W=0.5*(T.re[ee]+T.re[G]),K=0.5*(T.im[ee]-T.im[G]),Q=0.5*(T.im[ee]+T.im[G]),F.re[ee]=W,F.im[ee]=K,F.re[G]=W,F.im[G]=-K,O.re[ee]=Q,O.im[ee]=-Z,O.re[G]=Q,O.im[G]=Z},convolute2DI:function(T,F,O,$){for(var K=0,Z,W;K<O/2;K++)for(var Q=0;Q<$;Q++)Z=T[2*K*$+Q]*F[2*K*$+Q]-T[(2*K+1)*$+Q]*F[(2*K+1)*$+Q],W=T[2*K*$+Q]*F[(2*K+1)*$+Q]+T[(2*K+1)*$+Q]*F[2*K*$+Q],T[2*K*$+Q]=Z,T[(2*K+1)*$+Q]=W},convolute:function(T,F,O,$){for(var W=Array($*O),K=0;K<O*$;K++)W[K]=T[K];W=this.fft2DArray(W,O,$);for(var Q=F.length,G=F[0].length,ee=Array($*O),K=0;K<$*O;K++)ee[K]=0;for(var ae=Math.floor((Q-1)/2),se=Math.floor((G-1)/2),oe=0,te,ne;oe<Q;oe++){te=(oe-ae+O)%O;for(var le=0;le<G;le++)ne=(le-se+$)%$,ee[te*$+ne]=F[oe][le]}ee=this.fft2DArray(ee,O,$);var de=2*O,ue=$/2+1;return this.convolute2DI(W,ee,de,ue),this.ifft2DArray(W,de,ue)},toRadix2:function(T,F,O){var $,Z,W,K,Q=O,G=F,ee=0,te=0;if(0===O||0!=(O&O-1)){for(Q=0;0!=O>>++Q;);Q=1<<Q,te=Q-O}if(0===F||0!=(F&F-1)){for(G=0;0!=F>>++G;);G=1<<G,ee=(G-F)*Q}if(G==F&&Q==O)return{data:T,rows:F,cols:O};var ne=Array(G*Q),ae=Math.floor((G-F)/2)-F,se=Math.floor((Q-O)/2)-O;for($=0;$<G;$++)for(W=$*Q,K=($-ae)%F*O,Z=0;Z<Q;Z++)ne[W+Z]=T[K+(Z-se)%O];return{data:ne,rows:G,cols:Q}},crop:function(T,F,O,$,Z,W){if(F==$&&O==Z)return T;var K=Object.assign({},W),Q=Array(Z*$),G=Math.floor((F-$)/2),ee=Math.floor((O-Z)/2),te,ne,ae,se;for(ae=0;ae<$;ae++)for(te=ae*Z,ne=(ae+G)*O,se=0;se<Z;se++)Q[te+se]=T[ne+(se+ee)];return Q}}},function(E,D,I){'use strict';function R(Z){var W=0,K=0,Q=Z.length;for(let ee=0;ee<Q;++ee)W+=Z[ee];W/=Q;var G=Array(Q);for(let ee=0;ee<Q;++ee)G[ee]=Math.abs(Z[ee]-W);return G.sort(),K=1==Q%2?G[(Q-1)/2]/0.6745:0.5*(G[Q/2]+G[Q/2-1])/0.6745,K}function T(Z,W,K){for(var ae=0,Q,G,ee,te,ne;ae<Z.length;ae++)ne=Z[ae].i,K[ne-1]>=K[ne-2]&&K[ne-1]>=K[ne]?ne--:K[ne+1]>=K[ne]&&K[ne+1]>=K[ne+2]?ne++:K[ne-2]>=K[ne-3]&&K[ne-2]>=K[ne-1]?ne-=2:K[ne+2]>=K[ne+1]&&K[ne+2]>=K[ne+3]&&(ne+=2),0<K[ne-1]&&0<K[ne+1]&&K[ne]>=K[ne-1]&&K[ne]>=K[ne+1]&&(Q=20*Math.log10(K[ne-1]),G=20*Math.log10(K[ne]),ee=20*Math.log10(K[ne+1]),te=0.5*(Q-ee)/(Q-2*G+ee),Z[ae].x=W[ne]+(W[ne]-W[ne-1])*te,Z[ae].y=K[ne]-0.25*(K[ne-1]-K[ne+1])*te)}const F=I(22),O=I(101),$={sgOptions:{windowSize:9,polynomial:3},minMaxRatio:2.5e-4,broadRatio:0,maxCriteria:!0,smoothY:!0,realTopDetection:!1,heightFactor:0,boundaries:!1,derivativeThreshold:-1};E.exports=function(Z,W,K){K=F({},$,K);let Q=K.sgOptions;const G=[].concat(W);if(!('noiseLevel'in K)){var ee=0,te=Number.MAX_VALUE,ne;for(let Pe=0;Pe<Z.length-1;++Pe)ne=Math.abs(Z[Pe+1]-Z[Pe]),ne<te&&(te=ne),ne>ee&&(ee=ne);K.noiseLevel=0.05>(ee-te)/ee?R(G):0}const ae={m:1,b:K.noiseLevel};K.maxCriteria||(ae.m=-1,ae.b*=-1);for(let Pe=0;Pe<G.length;Pe++)G[Pe]=ae.m*G[Pe]-ae.b;for(let Pe=0;Pe<G.length;Pe++)0>G[Pe]&&(G[Pe]=0);let se=G,oe,le;0.05>(ee-te)/ee?(K.smoothY&&(se=O(G,Z[1]-Z[0],{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:0})),oe=O(G,Z[1]-Z[0],{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:1}),le=O(G,Z[1]-Z[0],{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:2})):(K.smoothY&&(se=O(G,Z,{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:0})),oe=O(G,Z,{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:1}),le=O(G,Z,{windowSize:Q.windowSize,polynomial:Q.polynomial,derivative:2}));const de=Z,ue=Z[1]-Z[0];var he=0,ce=0;for(let Pe=0;Pe<se.length;Pe++)Math.abs(le[Pe])>he&&(he=Math.abs(le[Pe])),Math.abs(se[Pe])>ce&&(ce=Math.abs(se[Pe]));var ge=null,me=null,pe=Array(se.length-2),fe=Array(se.length),xe=Array(se.length),be=Array(se.length-2),ye=0,_e=0,ke=0,je=0;for(let Pe=1;Pe<se.length-1;++Pe)Math.abs(oe[Pe])>K.derivativeThreshold&&((oe[Pe]<oe[Pe-1]&&oe[Pe]<=oe[Pe+1]||oe[Pe]<=oe[Pe-1]&&oe[Pe]<oe[Pe+1])&&(me={x:de[Pe],index:Pe},0<ue&&null!=ge&&(fe[_e++]=ge,xe[ke++]=me)),(oe[Pe]>=oe[Pe-1]&&oe[Pe]>oe[Pe+1]||oe[Pe]>oe[Pe-1]&&oe[Pe]>=oe[Pe+1])&&(ge={x:de[Pe],index:Pe},0>ue&&null!=me&&(fe[_e++]=ge,xe[ke++]=me))),le[Pe]<le[Pe-1]&&le[Pe]<le[Pe+1]&&(pe[ye++]=Pe,be[je++]=Math.abs(le[Pe])<=K.broadRatio*he);pe.length=ye,fe.length=_e,xe.length=ke,be.length=je;let we=Array(pe.length),Se=0,ve=-1,Ee,De,Ce,Ae,Ie;for(let Pe=0;Pe<pe.length;++Pe){De=de[pe[Pe]],Ee=-1;let Re=ve+1;for(Ae=Number.MAX_VALUE,Ce=0,Ie=!0;-1===Ee&&Re<fe.length&&Ie;)Ce=Math.abs(De-(fe[Re].x+xe[Re].x)/2),Ce<Ae?Ae=Ce:Ie=!1,Ce<Math.abs(fe[Re].x-xe[Re].x)/2&&(Ee=Re,ve=Re),++Re;if(-1!==Ee&&Math.abs(se[pe[Pe]])>K.minMaxRatio*ce&&(we[Se++]={index:pe[Pe],x:De,y:(se[pe[Pe]]+ae.b)/ae.m,width:Math.abs(xe[Ee].x-fe[Ee].x),soft:be[Pe]},K.boundaries&&(we[Se-1].left=fe[Ee],we[Se-1].right=xe[Ee]),K.heightFactor)){let Te=se[fe[Ee].index],Fe=se[xe[Ee].index];we[Se-1].height=K.heightFactor*(we[Se-1].y-(Te+Fe)/2)}}we.length=Se,K.realTopDetection&&T(we,de,se);for(let Pe=0;Pe<we.length;Pe++)we[Pe].base=K.noiseLevel;return we.sort(function(Pe,Re){return Pe.x-Re.x}),we}},function(E,D,I){'use strict';E.exports.post=I(79),E.exports.gsd=I(77)},function(E,D,I){'use strict';function P($,Z,W,K,Q){var G=W.length,ee=[],te=[],ne=Math.sign(W[1]-W[0]);-1===ne&&(Q[0]=W.length-1);for(var ae=Math.abs(Z-$)/2,se=($+Z)/2,oe=!1,le=Q[0];!oe&&le<G&&0<=le;)Math.abs(W[le]-se)<=ae?(ee.push(W[le]),te.push(K[le]),le+=ne):1===Math.sign(se-W[le])?le+=ne:oe=!0;return Q[0]=le,[ee,te]}function T($,Z){var W=[],K=[],Q,G,ee=[$[0].x,Z*$[0].width],te,ne;for(Q=0;Q<$.length;Q++)Math.abs($[Q].x-ee[0])<Z*$[Q].width+ee[1]?(W.push($[Q]),te=ee[0]+ee[1],$[Q].x+Z*$[Q].width>te&&(te=$[Q].x+Z*$[Q].width),ne=ee[0]-ee[1],$[Q].x-Z*$[Q].width<ne&&(ne=$[Q].x-Z*$[Q].width),ee=[(te+ne)/2,Math.abs(te-ne)/2]):(K.push({limits:ee,group:W}),W=[$[Q]],ee=[$[Q].x,Z*$[Q].width]);for(K.push({limits:ee,group:W}),Q=K.length-2;0<=Q;Q--)if(Math.abs(K[Q].limits[0]-K[Q+1].limits[0])<(K[Q].limits[1]+K[Q+1].limits[1])/2){for(G=0;G<K[Q+1].group.length;G++)K[Q].group.push(K[Q+1].group[G]);te=K[Q].limits[0]+K[Q].limits[1],K[Q+1].limits[0]+K[Q+1].limits[1]>te&&(te=K[Q+1].limits[0]+K[Q+1].limits[1]),ne=K[Q].limits[0]-K[Q].limits[1],K[Q+1].limits[0]-K[Q+1].limits[1]<ne&&(ne=K[Q+1].limits[0]-K[Q+1].limits[1]),K[Q].limits=[(te+ne)/2,Math.abs(te-ne)/2],K.splice(Q+1,1)}return K}var O=I(98);E.exports={optimizePeaks:function($,Z,W,K,Q){var te=[0],G,ee,ne=T($,K),ae=[],se=1;'gaussian'===Q&&(se=1.17741);var oe,le,de;for(G=0;G<ne.length;G++){var ue=ne[G].group;if(1<ue.length){if(oe=P(ne[G].limits[0]-ne[G].limits[1],ne[G].limits[0]+ne[G].limits[1],Z,W,te),5<oe[0].length){le=ue[0].width/1e3,de=[3,100,le,le,le,10*le,10*le,11,9,1];var he=[];for('gaussian'===Q?he=O.optimizeGaussianSum(oe,ue,de):'lorentzian'==Q&&(he=O.optimizeLorentzianSum(oe,ue,de)),ee=0;ee<he.length;ee++)ae.push({x:he[ee][0][0],y:he[ee][1][0],width:he[ee][2][0]*se})}}else if(ue=ue[0],oe=P(ue.x-K*ue.width,ue.x+K*ue.width,Z,W,te),5<oe[0].length){le=ue.width/1e3,de=[3,100,le,le,le,10*le,10*le,11,9,1];var ce=[];'gaussian'===Q?ce=O.optimizeSingleGaussian([oe[0],oe[1]],ue,de):'lorentzian'==Q&&(ce=O.optimizeSingleLorentzian([oe[0],oe[1]],ue,de)),ae.push({x:ce[0][0],y:ce[1][0],width:ce[2][0]*se})}}return ae},joinBroadPeaks:function($,Z){var W=Z.width,K=[],Q=0,G=0,ee=1;for(let se=$.length-1;0<=se;se--)$[se].soft&&K.push($.splice(se,1)[0]);K.push({x:Number.MAX_VALUE});var te=[[K[0].x,K[0].y]],ne=[0];for(let se=1;se<K.length;se++)if(Math.abs(K[se-1].x-K[se].x)<W)te.push([K[se].x,K[se].y]),K[se].y>Q&&(Q=K[se].y,G=se),ne.push(se),ee++;else{if(2<ee){var ae=O.optimizeSingleLorentzian(te,{x:K[G].x,y:Q,width:Math.abs(te[0][0]-te[te.length-1][0])});$.push({x:ae[0][0],y:ae[1][0],width:ae[2][0],soft:!1})}else ne.map(function(oe){$.push(K[oe])});te=[[K[se].x,K[se].y]],ne=[se],Q=K[se].y,G=se,ee=1}return $.sort(function(se,oe){return se.x-oe.x}),$}}},function(E,D,I){'use strict';function P(se,oe){return 0|se*oe}function R(se,oe){return Math.min(se-2,0|se*oe)}function T(se,oe,le){return Z(Math.max(se+1,0|4*se/(3*oe+le)))}function F(se,oe,le){return Z(Math.max(se+1,0|4*se/(oe+3*le)))}const O=I(14),$=I(81),Z=$.nextPrime,W=$.largestPrime,K=0,Q=1,G=2;class ae{constructor(se={}){if(se instanceof ae)return this.table=se.table.slice(),this.values=se.values.slice(),this.state=se.state.slice(),this.minLoadFactor=se.minLoadFactor,this.maxLoadFactor=se.maxLoadFactor,this.distinct=se.distinct,this.freeEntries=se.freeEntries,this.lowWaterMark=se.lowWaterMark,void(this.highWaterMark=se.maxLoadFactor);const oe=se.initialCapacity===void 0?150:se.initialCapacity;if(0>oe)throw new RangeError(`initial capacity must not be less than zero: ${oe}`);const le=se.minLoadFactor===void 0?1/6:se.minLoadFactor,de=se.maxLoadFactor===void 0?2/3:se.maxLoadFactor;if(0>le||1<=le)throw new RangeError(`invalid minLoadFactor: ${le}`);if(0>=de||1<=de)throw new RangeError(`invalid maxLoadFactor: ${de}`);if(le>=de)throw new RangeError(`minLoadFactor (${le}) must be smaller than maxLoadFactor (${de})`);let ue=oe;ue=0|ue/de,ue=Z(ue),0===ue&&(ue=1),this.table=O(ue,0),this.values=O(ue,0),this.state=O(ue,0),this.minLoadFactor=le,this.maxLoadFactor=ue===W?1:de,this.distinct=0,this.freeEntries=ue,this.lowWaterMark=0,this.highWaterMark=R(ue,this.maxLoadFactor)}clone(){return new ae(this)}get size(){return this.distinct}get(se){const oe=this.indexOfKey(se);return 0>oe?0:this.values[oe]}set(se,oe){let le=this.indexOfInsertion(se);if(0>le)return le=-le-1,this.values[le]=oe,!1;if(this.distinct>this.highWaterMark){const de=T(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);return this.rehash(de),this.set(se,oe)}if(this.table[le]=se,this.values[le]=oe,this.state[le]===K&&this.freeEntries--,this.state[le]=Q,this.distinct++,1>this.freeEntries){const de=T(this.distinct+1,this.minLoadFactor,this.maxLoadFactor);this.rehash(de)}return!0}remove(se,oe){const le=this.indexOfKey(se);return!(0>le)&&(this.state[le]=G,this.distinct--,oe||this.maybeShrinkCapacity(),!0)}delete(se,oe){const le=this.indexOfKey(se);return!(0>le)&&(this.state[le]=K,this.distinct--,oe||this.maybeShrinkCapacity(),!0)}maybeShrinkCapacity(){if(this.distinct<this.lowWaterMark){const se=F(this.distinct,this.minLoadFactor,this.maxLoadFactor);this.rehash(se)}}containsKey(se){return 0<=this.indexOfKey(se)}indexOfKey(se){const oe=this.table,le=this.state,de=this.table.length,ue=2147483647&se;let he=ue%de,ce=ue%(de-2);for(0==ce&&(ce=1);le[he]!==K&&(le[he]===G||oe[he]!==se);)he-=ce,0>he&&(he+=de);return le[he]===K?-1:he}containsValue(se){return 0<=this.indexOfValue(se)}indexOfValue(se){const oe=this.values,le=this.state;for(var de=0;de<le.length;de++)if(le[de]===Q&&oe[de]===se)return de;return-1}indexOfInsertion(se){const oe=this.table,le=this.state,de=oe.length,ue=2147483647&se;let he=ue%de,ce=ue%(de-2);for(0==ce&&(ce=1);le[he]===Q&&oe[he]!==se;)he-=ce,0>he&&(he+=de);if(le[he]===G){const ge=he;for(;le[he]!==K&&(le[he]===G||oe[he]!==se);)he-=ce,0>he&&(he+=de);le[he]===K&&(he=ge)}return le[he]===Q?-he-1:he}ensureCapacity(se){if(this.table.length<se){const oe=Z(se);this.rehash(oe)}}rehash(se){const oe=this.table.length;if(se<=this.distinct)throw new Error('Unexpected');const le=this.table,de=this.values,ue=this.state,he=O(se,0),ce=O(se,0),ge=O(se,0);this.lowWaterMark=P(se,this.minLoadFactor),this.highWaterMark=R(se,this.maxLoadFactor),this.table=he,this.values=ce,this.state=ge,this.freeEntries=se-this.distinct;for(var me=0;me<oe;me++)if(ue[me]===Q){var pe=le[me],fe=this.indexOfInsertion(pe);he[fe]=pe,ce[fe]=de[me],ge[fe]=Q}}forEachKey(se){for(var oe=0;oe<this.state.length;oe++)if(this.state[oe]===Q&&!se(this.table[oe]))return!1;return!0}forEachValue(se){for(var oe=0;oe<this.state.length;oe++)if(this.state[oe]===Q&&!se(this.values[oe]))return!1;return!0}forEachPair(se){for(var oe=0;oe<this.state.length;oe++)if(this.state[oe]===Q&&!se(this.table[oe],this.values[oe]))return!1;return!0}}E.exports=ae},function(E,D,I){const R=I(19),T=I(43).asc,F=2147483647,O=[F,5,11,23,47,97,197,397,797,1597,3203,6421,12853,25717,51437,102877,205759,411527,823117,1646237,3292489,6584983,13169977,26339969,52679969,105359939,210719881,421439783,842879579,1685759167,433,877,1759,3527,7057,14143,28289,56591,113189,226379,452759,905551,1811107,3622219,7244441,14488931,28977863,57955739,115911563,231823147,463646329,927292699,1854585413,953,1907,3821,7643,15287,30577,61169,122347,244703,489407,978821,1957651,3915341,7830701,15661423,31322867,62645741,125291483,250582987,501165979,1002331963,2004663929,1039,2081,4177,8363,16729,33461,66923,133853,267713,535481,1070981,2141977,4283963,8567929,17135863,34271747,68543509,137087021,274174111,548348231,1096696463,31,67,137,277,557,1117,2237,4481,8963,17929,35863,71741,143483,286973,573953,1147921,2295859,4591721,9183457,18366923,36733847,73467739,146935499,293871013,587742049,1175484103,599,1201,2411,4831,9677,19373,38747,77509,155027,310081,620171,1240361,2480729,4961459,9922933,19845871,39691759,79383533,158767069,317534141,635068283,1270136683,311,631,1277,2557,5119,10243,20507,41017,82037,164089,328213,656429,1312867,2625761,5251529,10503061,21006137,42012281,84024581,168049163,336098327,672196673,1344393353,3,7,17,37,79,163,331,673,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,43,89,179,359,719,1439,2879,5779,11579,23159,46327,92657,185323,370661,741337,1482707,2965421,5930887,11861791,23723597,47447201,94894427,189788857,379577741,759155483,1518310967,379,761,1523,3049,6101,12203,24407,48817,97649,195311,390647,781301,1562611,3125257,6250537,12501169,25002389,50004791,100009607,200019221,400038451,800076929,1600153859,13,29,59,127,257,521,1049,2099,4201,8419,16843,33703,67409,134837,269683,539389,1078787,2157587,4315183,8630387,17260781,34521589,69043189,138086407,276172823,552345671,1104691373,19,41,83,167,337,677,1361,2729,5471,10949,21911,43853,87719,175447,350899,701819,1403641,2807303,5614657,11229331,22458671,44917381,89834777,179669557,359339171,718678369,1437356741,53,107,223,449,907,1823,3659,7321,14653,29311,58631,117269,234539,469099,938207,1876417,3752839,7505681,15011389,30022781,60045577,120091177,240182359,480364727,960729461,1921458943];O.sort(T),D.nextPrime=function($){let Z=R(O,$,T);return 0>Z&&(Z=~Z),O[Z]},D.largestPrime=F},function(E,D,I){'use strict';function P(te,ne,ae){for(var se=1e101,oe=0;oe<te.length;oe++)for(var le=0,de;le<ne.length;le++)de=ae[te[oe]][ne[le]],se=Math.min(de,se);return se}function R(te,ne,ae){for(var se=-1,oe=0;oe<te.length;oe++)for(var le=0,de;le<ne.length;le++)de=ae[te[oe]][ne[le]],se=Math.max(de,se);return se}function T(te,ne,ae){for(var se=0,oe=0;oe<te.length;oe++)for(var le=0;le<ne.length;le++)se+=ae[te[oe]][ne[le]];return se/(te.length*ne.length)}function F(te,ne,ae){for(var oe=Array(te.length*ne.length),le=0;le<te.length;le++)for(var de=0;de<ne.length;de++)oe[le*te.length+de]=ae[te[le]][ne[de]];return Z(oe)}function O(te,ne,ae){return F(te,ne,ae)*te.length*ne.length/(te.length+ne.length)}function $(te,ne){return te-ne}function Z(te,ne){ne===void 0&&(ne=!1),ne||(te=[].concat(te).sort($));var ae=te.length,se=Math.floor(ae/2);return 0==ae%2?0.5*(te[se-1]+te[se]):te[se]}var K=I(32),Q=I(35),G=I(12),ee={disFunc:K,kind:'single',isDistanceMatrix:!1};E.exports=function(te,ne){ne=Object.assign({},ee,ne);var ae=te.length,se=te;if(!ne.isDistanceMatrix){se=Array(ae);for(var oe=0;oe<ae;oe++){se[oe]=Array(ae);for(var le=0;le<ae;le++)se[oe][le]=ne.disFunc(te[oe],te[le])}}if('string'==typeof ne.kind)switch(ne.kind){case'single':ne.kind=P;break;case'complete':ne.kind=R;break;case'average':ne.kind=T;break;case'centroid':ne.kind=F;break;case'ward':ne.kind=O;break;default:throw new RangeError('Unknown kind of similarity');}else if('function'!=typeof ne.kind)throw new TypeError('Undefined kind of similarity');for(var de=Array(ae),oe=0;oe<se.length;oe++)de[oe]=new Q(oe);for(var ue=1e6,he={},ce=0;1<de.length;){he={},ue=1e6;for(var le=0;le<de.length;le++)for(var ge=le+1;ge<de.length;ge++){var me,pe;if(de[le]instanceof Q)me=[de[le].index];else{me=Array(de[le].index.length);for(var fe=0;fe<me.length;fe++)me[fe]=de[le].index[fe].index}if(de[ge]instanceof Q)pe=[de[ge].index];else{pe=Array(de[ge].index.length);for(var xe=0;xe<pe.length;xe++)pe[xe]=de[ge].index[xe].index}ce=ne.kind(me,pe,se).toFixed(4),ce in he?he[ce].push([de[le],de[ge]]):he[ce]=[[de[le],de[ge]]],ue=Math.min(ce,ue)}for(var be=he[ue.toFixed(4)],ye=Array(be.length),ke=0,_e;0<be.length;){_e=be.shift();for(var je=0,we;je<be.length;je++)if(we=be[je].filter(function(Ae){return-1!==_e.indexOf(Ae)}),0<we.length){var Se=be[je].filter(function(Ae){return-1===_e.indexOf(Ae)});_e=_e.concat(Se),be.splice(je--,1)}ye[ke++]=_e}ye.length=ke;for(var ve=0,Ee;ve<ye.length;ve++){Ee=new G,Ee.children=ye[ve].concat(),Ee.distance=ue,Ee.index=Array(ae);for(var De=0,Ce=0;Ce<ye[ve].length;Ce++)ye[ve][Ce]instanceof Q?Ee.index[De++]=ye[ve][Ce]:(De+=ye[ve][Ce].index.length,Ee.index=ye[ve][Ce].index.concat(Ee.index)),de.splice(de.indexOf(ye[ve][Ce]),1);Ee.index.length=De,de.push(Ee)}}return de[0]}},function(E,D,I){'use strict';function P(te,ne,ae){for(var se=1e101,oe=0;oe<te.length;oe++)for(var le=oe,de;le<ne.length;le++)de=ae(te[oe],ne[le]),se=Math.min(de,se);return se}function R(te,ne,ae){for(var se=-1,oe=0;oe<te.length;oe++)for(var le=oe,de;le<ne.length;le++)de=ae(te[oe],ne[le]),se=Math.max(de,se);return se}function T(te,ne,ae){for(var se=0,oe=0;oe<te.length;oe++)for(var le=0;le<ne.length;le++)se+=ae(te[oe],ne[le]);return se/(te.length*ne.length)}function F(te,ne,ae){for(var se=0,oe=0,le=0,de=0,ue=0;ue<te.length;ue++)se+=te[ue][0],oe+=te[ue][1];for(var he=0;he<ne.length;he++)le+=ne[he][0],de+=ne[he][1];return se/=te.length,oe/=te.length,le/=ne.length,de/=ne.length,ae([se,oe],[le,de])}function O(te,ne,ae){for(var se=0,oe=0,le=0,de=0,ue=0;ue<te.length;ue++)se+=te[ue][0],oe+=te[ue][1];for(var he=0;he<ne.length;he++)le+=ne[he][0],de+=ne[he][1];return se/=te.length,oe/=te.length,le/=ne.length,de/=ne.length,ae([se,oe],[le,de])*te.length*ne.length/(te.length+ne.length)}function $(te,ne,ae){for(var se={d:0,p:0},oe=Array(te[0].length),le=0;le<te[0].length;le++)oe[le]=ne[te[0][le]];for(var de=Array(te[1].length),ue=0;ue<te[1].length;ue++)de[ue]=ne[te[1][ue]];for(var ge=0,he,ce;ge<oe.length;ge++){he=0;for(var me=0;me<oe.length;me++)ge!==me&&(he+=ae(oe[ge],oe[me]));he/=oe.length-1,ce=0;for(var pe=0;pe<de.length;pe++)ce+=ae(oe[ge],de[pe]);ce/=de.length,he-ce>se.d&&(se.d=he-ce,se.p=ge)}return se}function Z(te,ne,ae){for(var se=0,oe=0,le=0;le<te.length;le++)for(var de=le;de<te.length;de++)se+=ae(ne[te[le].index],ne[te[de].index]),oe++;return se/oe}var K=I(32),Q=I(35),G=I(12),ee={dist:K,kind:'single'};E.exports=function(te,ne){for(var ae in ne=ne||{},ee)ne.hasOwnProperty(ae)||(ne[ae]=ee[ae]);if('string'==typeof ne.kind)switch(ne.kind){case'single':ne.kind=P;break;case'complete':ne.kind=R;break;case'average':ne.kind=T;break;case'centroid':ne.kind=F;break;case'ward':ne.kind=O;break;default:throw new RangeError('Unknown kind of similarity');}else if('function'!=typeof ne.kind)throw new TypeError('Undefined kind of similarity');var se=new G;se.children=Array(te.length),se.index=Array(te.length);for(var oe=0;oe<te.length;oe++)se.children[oe]=new Q(oe),se.index[oe]=new Q(oe);se.distance=Z(se.index,te,ne.dist);for(var ge=[se],le,de,ue,he,ce;0<ge.length;){de=0,ue=0;for(var me=0;me<ge.length;me++){le=0;for(var pe=0;pe<ge[me].length;pe++)for(var fe=pe+1;fe<ge[me].length;fe++)le=Math.max(ne.dist(te[ge[me].index[pe].index],te[ge[me].index[fe].index]),le);le>de&&(de=le,ue=me)}if(de=0,2===ge[ue].index.length)ge[ue].children=[ge[ue].index[0],ge[ue].index[1]],ge[ue].distance=ne.dist(te[ge[ue].index[0].index],te[ge[ue].index[1].index]);else if(3===ge[ue].index.length){ge[ue].children=[ge[ue].index[0],ge[ue].index[1],ge[ue].index[2]];var xe=[ne.dist(te[ge[ue].index[0].index],te[ge[ue].index[1].index]),ne.dist(te[ge[ue].index[1].index],te[ge[ue].index[2].index])];ge[ue].distance=(xe[0]+xe[1])/2}else{for(var be=new G,ye=new G,_e=[Array(ge[ue].index.length),[]],ke=0;ke<_e[0].length;ke++)_e[0][ke]=ke;for(var je=0;je<_e[0].length;je++){he=0;for(var we=0;we<_e[0].length;we++)je!==we&&(he+=ne.dist(te[ge[ue].index[_e[0][we]].index],te[ge[ue].index[_e[0][je]].index]));he/=_e[0].length-1,he>de&&(de=he,ce=je)}for(_e[1]=[ce],_e[0].splice(ce,1),he=$(_e,te,ne.dist);0<he.d;)_e[1].push(_e[0][he.p]),_e[0].splice(he.p,1),he=$(_e,te,ne.dist);var Se=Array(_e[0].length);be.index=Array(_e[0].length);for(var ve=0;ve<Se.length;ve++)Se[ve]=te[ge[ue].index[_e[0][ve]].index],be.index[ve]=ge[ue].index[_e[0][ve]],be.children[ve]=ge[ue].index[_e[0][ve]];var Ee=Array(_e[1].length);ye.index=Array(_e[1].length);for(var De=0;De<Ee.length;De++)Ee[De]=te[ge[ue].index[_e[1][De]].index],ye.index[De]=ge[ue].index[_e[1][De]],ye.children[De]=ge[ue].index[_e[1][De]];be.distance=Z(be.index,te,ne.dist),ye.distance=Z(ye.index,te,ne.dist),ge.push(be),ge.push(ye),ge[ue].children=[be,ye]}ge.splice(ue,1)}return se}},function(E,D,I){D.agnes=I(82),D.diana=I(83)},function(E,D,I){'use strict';var P=I(36);E.exports={DEBUG:!1,ifft2DArray:function(T,F,O){var $=Array(F*O),Z=F/2,W=2*(O-1);P.init(Z);for(var K={re:Array(Z),im:Array(Z)},Q=0;Q<O;Q++){for(var G=Z-1;0<=G;G--)K.re[G]=T[2*G*O+Q],K.im[G]=T[(2*G+1)*O+Q];P.bt(K.re,K.im);for(var G=Z-1;0<=G;G--)$[2*G*O+Q]=K.re[G],$[(2*G+1)*O+Q]=K.im[G]}var ee=Array(Z*W);P.init(W);for(var te={re:Array(W),im:Array(W)},G=0;G<F;G+=2){te.re[0]=$[G*O],te.im[0]=$[(G+1)*O];for(var Q=1;Q<O;Q++)te.re[Q]=$[G*O+Q],te.im[Q]=$[(G+1)*O+Q],te.re[W-Q]=$[G*O+Q],te.im[W-Q]=-$[(G+1)*O+Q];P.bt(te.re,te.im);for(var ae=G/2*W,Q=W-1;0<=Q;Q--)ee[ae+Q]=te.re[Q]/(W*Z)}return ee},fft2DArray:function(T,F,O){var Z=Object.assign({},{inplace:!0}),W=O/2+1,K=2*F,Q=Array(K*W);P.init(O);for(var G={re:Array(O),im:Array(O)},ee={re:Array(O),im:Array(O)},te={re:Array(O),im:Array(O)},de=0,ne,ae,se,oe,le;de<F/2;de++){ne=2*de*O,G.re=T.slice(ne,ne+O),ne=(2*de+1)*O,G.im=T.slice(ne,ne+O),P.fft1d(G.re,G.im),this.reconstructTwoRealFFT(G,ee,te),ae=4*de*W,se=(4*de+1)*W,oe=(4*de+2)*W,le=(4*de+3)*W;for(var ue=W-1;0<=ue;ue--)Q[ae+ue]=ee.re[ue],Q[se+ue]=ee.im[ue],Q[oe+ue]=te.re[ue],Q[le+ue]=te.im[ue]}ee=null,te=null;var he=Array(K*W);P.init(F);for(var ce={re:Array(F),im:Array(F)},ge=W-1;0<=ge;ge--){for(var de=F-1;0<=de;de--)ce.re[de]=Q[2*de*W+ge],ce.im[de]=Q[(2*de+1)*W+ge],isNaN(ce.re[de])&&(ce.re[de]=0),isNaN(ce.im[de])&&(ce.im[de]=0);P.fft1d(ce.re,ce.im);for(var de=F-1;0<=de;de--)he[2*de*W+ge]=ce.re[de],he[(2*de+1)*W+ge]=ce.im[de]}return he},reconstructTwoRealFFT:function(T,F,O){var $=T.re.length;F.re[0]=T.re[0],F.im[0]=0,O.re[0]=T.im[0],O.im[0]=0;for(var ee=$/2,Z,W,K,Q,G;0<ee;ee--)G=$-ee,Z=0.5*(T.re[ee]-T.re[G]),W=0.5*(T.re[ee]+T.re[G]),K=0.5*(T.im[ee]-T.im[G]),Q=0.5*(T.im[ee]+T.im[G]),F.re[ee]=W,F.im[ee]=K,F.re[G]=W,F.im[G]=-K,O.re[ee]=Q,O.im[ee]=-Z,O.re[G]=Q,O.im[G]=Z},convolute2DI:function(T,F,O,$){for(var K=0,Z,W;K<O/2;K++)for(var Q=0;Q<$;Q++)Z=T[2*K*$+Q]*F[2*K*$+Q]-T[(2*K+1)*$+Q]*F[(2*K+1)*$+Q],W=T[2*K*$+Q]*F[(2*K+1)*$+Q]+T[(2*K+1)*$+Q]*F[2*K*$+Q],T[2*K*$+Q]=Z,T[(2*K+1)*$+Q]=W},convolute:function(T,F,O,$){for(var W=Array($*O),K=0;K<O*$;K++)W[K]=T[K];W=this.fft2DArray(W,O,$);for(var Q=F.length,G=F[0].length,ee=Array($*O),K=0;K<$*O;K++)ee[K]=0;for(var ae=Math.floor((Q-1)/2),se=Math.floor((G-1)/2),oe=0,te,ne;oe<Q;oe++){te=(oe-ae+O)%O;for(var le=0;le<G;le++)ne=(le-se+$)%$,ee[te*$+ne]=F[oe][le]}ee=this.fft2DArray(ee,O,$);var de=2*O,ue=$/2+1;return this.convolute2DI(W,ee,de,ue),this.ifft2DArray(W,de,ue)},toRadix2:function(T,F,O){var $,Z,W,K,Q=O,G=F,ee=0,te=0;if(0===O||0!=(O&O-1)){for(Q=0;0!=O>>++Q;);Q=1<<Q,te=Q-O}if(0===F||0!=(F&F-1)){for(G=0;0!=F>>++G;);G=1<<G,ee=(G-F)*Q}if(G==F&&Q==O)return{data:T,rows:F,cols:O};var ne=Array(G*Q),ae=Math.floor((G-F)/2)-F,se=Math.floor((Q-O)/2)-O;for($=0;$<G;$++)for(W=$*Q,K=($-ae)%F*O,Z=0;Z<Q;Z++)ne[W+Z]=T[K+(Z-se)%O];return{data:ne,rows:G,cols:Q}},crop:function(T,F,O,$,Z,W){if(F==$&&O==Z)return T;var K=Object.assign({},W),Q=Array(Z*$),G=Math.floor((F-$)/2),ee=Math.floor((O-Z)/2),te,ne,ae,se;for(ae=0;ae<$;ae++)for(te=ae*$,ne=(ae+G)*O,se=0;se<Z;se++)Q[te+se]=T[ne+(se+ee)];return Q}}},function(E,D,I){'use strict';D.FFTUtils=I(85),D.FFT=I(36)},function(E,D,I){'use strict;';function F($){var Z=$,W,K;if('number'!=typeof $[0]){W=$.length,K=$[0].length,Z=Array(W*K);for(var Q=0;Q<W;Q++)for(var G=0;G<K;G++)Z[Q*K+G]=$[Q][G]}else{var ee=Math.sqrt($.length);Number.isInteger(ee)&&(W=ee,K=ee)}return{data:Z,rows:W,cols:K}}var O=I(86).FFTUtils;E.exports={fft:function($,Z,W){var K=F($),Q=K.data,G=Object.assign({normalize:!1,divisor:1,rows:K.rows,cols:K.cols},W),ee,te;if(G.rows&&G.cols)ee=G.rows,te=G.cols;else throw new Error('Invalid number of rows or columns '+ee+' '+te);var ne=G.divisor,oe=Z.length,le=Z[0].length,ae,se;if(G.normalize)for(ne=0,ae=0;ae<oe;ae++)for(se=0;se<le;se++)ne+=Z[ae][se];if(0===ne)throw new RangeError('convolution: The divisor is equal to zero');var de=O.toRadix2(Q,ee,te),ue=O.convolute(de.data,Z,de.rows,de.cols);if(ue=O.crop(ue,de.rows,de.cols,ee,te),0!=ne)for(ae=0;ae<ue.length;ae++)ue[ae]/ne;return ue},direct:function($,Z,W){var K=F($),Q=K.data,G=Object.assign({normalize:!1,divisor:1,rows:K.rows,cols:K.cols},W),ee,te;if(G.rows&&G.cols)ee=G.rows,te=G.cols;else throw new Error('Invalid number of rows or columns '+ee+' '+te);var ne=G.divisor,ae=Z.length,se=Z[0].length,oe,le,de,ue,he,ce,ge,me,pe;if(G.normalize)for(ne=0,oe=0;oe<ae;oe++)for(le=0;le<se;le++)ne+=Z[oe][le];if(0===ne)throw new RangeError('convolution: The divisor is equal to zero');var fe=Array(ee*te),xe=Math.floor(ae/2),be=Math.floor(se/2);for(ue=0;ue<ee;ue++)for(de=0;de<te;de++){for(ce=0,le=0;le<ae;le++)for(oe=0;oe<se;oe++)ge=Z[ae-le-1][se-oe-1],me=(ue+le-xe+ee)%ee,pe=(de+oe-be+te)%te,he=me*te+pe,ce+=Q[he]*ge;he=ue*te+de,fe[he]=ce/ne}return fe},kernelFactory:{LoG:function($,Z,W){var K=1e3;W&&W.factor&&(K=W.factor);var Q=Array(Z),G,ee,te,ne;K*=-1;var se=(Z-1)/2;for(G=0;G<Z;G++)for(Q[G]=Array(Z),ne=(G-se)*(G-se),ee=0;ee<Z;ee++)te=-((ee-se)*(ee-se)+ne)/(2*$*$),Q[G][ee]=Math.round(K*(1+te)*Math.exp(te));return Q}},matrix2Array:F}},function(E,D,I){'use strict';const R=I(75),T=[-1,0],F=[0,-1],O=[null,null],$=[-1,-1,0,1],Z=[0,-1,-1,-1],W=[null,null,null,null];E.exports=function(K,Q,G,ee){ee=ee||{};const te=ee.neighbours||8;var ne,ae,se;if(8===te)ne=$,ae=Z,se=W;else if(4===te)ne=T,ae=F,se=O;else throw new RangeError('unsupported neighbours count: '+te);const oe=K.length,le=Array(oe),de=new Int16Array(oe),ue=new R;for(var ce=1,ge=0,he;ge<G;ge++)for(var me=0,pe;me<Q;me++)if(pe=null,he=me+ge*Q,K[he]){for(var fe=0;fe<se.length;fe++){var xe=me+ne[fe],be=ge+ae[fe];if(0<=xe&&0<=be&&xe<Q&&be<G){var ye=le[xe+be*Q];ye?(se[fe]=ye,(!pe||se[fe].value<pe.value)&&(pe=se[fe])):se[fe]=null}}if(!pe)le[he]=ue.add(ce++);else{le[he]=pe;for(var fe=0;fe<se.length;fe++)se[fe]&&se[fe]!==pe&&ue.union(pe,se[fe])}}for(var ge=0;ge<G;ge++)for(var me=0;me<Q;me++)he=me+ge*Q,K[he]&&(de[he]=ue.find(le[he]).value);return de}},function(E,D,I){'use strict';function T(K,Q,G,ee){var te={},ne,ae,se,oe;for(oe=0;oe<K.length;oe++)0!=K[oe]&&(ae=oe%ee,ne=(oe-ae)/ee,te[K[oe]]?(se=te[K[oe]],se.x+=ae*Q[oe],se.y+=ne*Q[oe],se.z+=Q[oe],ae<se.minX&&(se.minX=ae),ae>se.maxX&&(se.maxX=ae),ne<se.minY&&(se.minY=ne),ne>se.maxY&&(se.maxY=ne)):te[K[oe]]={x:ae*Q[oe],y:ne*Q[oe],z:Q[oe],minX:ae,maxX:ae,minY:ne,maxY:ne});var le=Object.keys(te),de=Array(le.length);for(oe=0;oe<le.length;oe++)de[oe]=te[le[oe]],de[oe].x/=de[oe].z,de[oe].y/=de[oe].z;return de}var F=I(3).array,O=I(87),$=I(88);const Z=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];E.exports={findPeaks2DRegion:function(K,Q){var G=Object.assign({},{nStdev:3,kernel:Z},Q),ee=O.matrix2Array(K),te=ee.data,ne;ee.rows&&ee.cols&&(G.rows=ee.rows,G.cols=ee.cols);var ae=G.rows,se=G.cols;if(!ae||!se)throw new Error('Invalid number of rows or columns '+ae+' '+se);var oe=G.kernel,le=G.filteredData;le||(le=O.fft(te,oe,G));var de=G.nStdev,ue=0;for(ne=se*ae-2;0<=ne;ne--)ue+=Math.pow(le[ne]-le[ne+1],2);ue=-Math.sqrt(ue),ue*=de/ae;var he=Array(se*ae);for(ne=se*ae-1;0<=ne;ne--)he[ne]=0;var ce=0;for(ne=le.length-1;0<=ne;ne--)le[ne]<ue&&(he[ne]=1,ce++);var ge=$(he,se,ae,{neighbours:8}),me=T(ge,te,ae,se);return 0<me.length,me},findPeaks2DMax:function(K,Q){var G=Object.assign({},{nStdev:3,kernel:Z},Q),ee=O.matrix2Array(K),te=ee.data;ee.rows&&ee.cols&&(G.rows=ee.rows,G.cols=ee.cols);var ne=G.rows,ae=G.cols;if(!ne||!ae)throw new Error('Invalid number of rows or columns '+ne+' '+ae);var se=G.kernel,oe=G.filteredData;oe||(oe=O.fft(te,se,G));for(var le=G.nStdev,de=0,ue=ae*ne-2;0<=ue;ue--)de+=Math.pow(oe[ue]-oe[ue+1],2);de=-Math.sqrt(de),de*=le/ne;for(var ge=[],me=0,ue=0,he,ce;ue<oe.length;ue++)oe[ue]<de&&(he=Math.floor(ue/ae),ce=ue%ae,0<he&&he+1<ne&&ce+1<ae&&0<ce&&oe[ue]<oe[ue+1]&&oe[ue]<oe[ue-1]&&(me=(he-1)*ae+ce,oe[ue]<oe[me-1]&&oe[ue]<oe[me]&&oe[ue]<oe[me+1]&&(me=(he+1)*ae+ce,oe[ue]<oe[me-1]&&oe[ue]<oe[me]&&oe[ue]<oe[me+1]&&ge.push({x:ce,y:he,z:te[ue]}))));return ge}}},function(E,D,I){var P=I(6),R=I(37);E.exports={optimize:function(O,$,Z,W,K,Q,G,ee,te,ne){var se=0;if('object'!=typeof $[0])for(var oe=0;oe<$.length;oe++)$[oe]=[$[oe]];var de=-50,ue=$.length,he=W.length,ce=P.zeros(ue,1),ge=P.zeros(he,1),me=0.01/de,pe=0.01/de,fe=P.zeros(he,ue),oe,le;if(Z.length!=W.length){console.log('lm.m error: the length of t must equal the length of y_dat'),length_t=Z.length,length_y_dat=W.length;var me=0;return}K=K||Math.sqrt((he-ue+1)/R.multiply(R.transpose(W),W)),Q=Q||1e-3,G=G||R.multiply(Math.abs($),-100),ee=ee||R.multiply(Math.abs($),100),te=te||1,ne=ne||[3,10*ue,1e-3,1e-3,1e-3,0.01,0.01,11,9,1];var je=ne[0],we=ne[1],Se=ne[2],ve=ne[3],Ee=ne[4],De=ne[5],Ce=ne[6],Ae=ne[7],Ie=ne[8],Pe=ne[9];if(0,!Q.length||1==Q.length){for(var Re=Array(ue),oe=0;oe<ue;oe++)Re[oe]=[Q];Q=Re}var Te=[];for(oe=0;oe<Q.length;oe++)0!=Q[oe][0]&&Te.push(oe);var Fe=Te.length,ze=!1,Me=null;if(!K.length||K.length<he){var Xe=R.multiply(P.ones(he,1),K[0]);Me=R.dotMultiply(Xe,Xe)}else Me=R.dotMultiply(K,K);var Ne=this.lm_matx(O,Z,ce,ge,1,fe,$,W,Me,Q,te),Ye=Ne.JtWJ,Oe=Ne.JtWdy,me=Ne.Chi_sq,Le=Ne.y_hat,fe=Ne.J;Math.max(Math.abs(Oe))<Se&&(console.log(' *** Your Initial Guess is Extremely Close to Optimal ***'),console.log(' *** epsilon_1 = ',Se),ze=!0),1===Pe?lambda=Ce:(lambda=Ce*Math.max(R.diag(Ye)),nu=2),pe=me;for(var Ue=null;!ze&&se<=we;){++se,Ue=1===Pe?R.solve(R.add(Ye,R.multiply(R.diag(R.diag(Ye)),lambda)),Oe):R.solve(R.add(Ye,R.multiply(P.eye(ue),lambda)),Oe);var Be=Array(Te.length);for(le=0;le<Te.length;le++)Be[le]=Ue[Te[le]];var Ve=R.add($,Be);for(le=0;le<Ve.length;le++)Ve[le][0]=Math.min(Math.max(G[le][0],Ve[le][0]),ee[le][0]);var qe=R.subtract(W,O(Z,Ve,te)),$e=R.multiply(R.transpose(qe),R.dotMultiply(qe,Me));if(2==Pe){var Ze=R.multiply(R.transpose(Oe),Ue),We=R.multiply(Ze,R.inv(R.add(R.multiply(R.subtract($e-me),1/2)),R.multiply(Ze,2)));Ue=R.multiply(We,Ue);for(var le=0;le<Te.length;le++)Be[le]=Ue[Te[le]];Ve=R.add($,Be),Ve=R.min(R.max(G,Ve),ee),qe=R.subtract(W,O(Z,Ve,te)),$e=R.multiply(R.transpose(qe),mat.dotMultiply(qe,Me))}var He=(me-$e)/R.multiply(R.multiply(R.transpose(Ue),2),R.add(R.multiply(lambda,Ue),Oe));He>De?(dX2=me-pe,pe=me,ce=$,ge=Le,$=Ve,Ne=this.lm_matx(O,Z,ce,ge,dX2,fe,$,W,Me,Q,te),Ye=Ne.JtWJ,Oe=Ne.JtWdy,me=Ne.Chi_sq,Le=Ne.y_hat,fe=Ne.J,1===Pe?lambda=Math.max(lambda/Ie,1e-7):2===Pe?lambda=Math.max(lambda/(1+We),1e-7):3===Pe?(lambda=R.multiply(Math.max(1/3,3^1-(2*He-1)),lambda),nu=2):void 0):(me=pe,0==se%(2*ue)&&(Ne=this.lm_matx(O,Z,ce,ge,-1,fe,$,W,Me,Q,te),Ye=Ne.JtWJ,Oe=Ne.JtWdy,dX2=Ne.Chi_sq,Le=Ne.y_hat,fe=Ne.J),1===Pe?lambda=Math.min(lambda*Ae,1e7):2===Pe?lambda+=Math.abs(($e-me)/2/We):3===Pe?(lambda*=nu,nu=2*nu):void 0)}return Me=R.multiply(R.multiply(R.transpose(qe),qe),P.ones(he,1)),Me.apply(function(Je,Ke){Me[Je][Ke]=(he-Fe+1)/Me[Je][Ke]}),Ne=this.lm_matx(O,Z,ce,ge,-1,fe,$,W,Me,Q,te),Ye=Ne.JtWJ,Oe=Ne.JtWdy,me=Ne.Chi_sq,Le=Ne.y_hat,fe=Ne.J,{p:$,X2:me}},lm_FD_J:function(O,$,Z,W,K,Q){var G=W.length,ee=Z.length;K=K||R.multiply(P.ones(ee,1),1e-3);for(var te=Z.clone(),ne=new P(G,ee),ae=Array(ee),se=0;se<ee;se++){if(ae[se]=K[se]*(1+Math.abs(Z[se][0])),Z[se]=[te[se][0]+ae[se]],0!=ae[se])if(y1=O($,Z,Q),0>K[se][0])for(var oe=R.dotDivide(R.subtract(y1,W),ae[se]),le=0;le<G;le++)ne[le][se]=oe[le][0];else{Z[se][0]=te[se][0]-ae[se];for(var oe=R.dotDivide(R.subtract(y1,O($,Z,Q)),2*ae[se]),le=0;le<G;le++)ne[le][se]=oe[le][0]}Z[se]=te[se]}return ne},lm_Broyden_J:function(O,$,Z,W,K){var Q=R.subtract(W,O),G=R.transpose(Q);return G.div(R.multiply(G,Q)),Z=R.add(Z,R.multiply(R.subtract(K,R.add($,R.multiply(Z,Q))),G)),Z},lm_matx:function(O,$,Z,W,K,Q,G,ee,te,ne,ae,se){var oe=ee.length,le=G.length;ne=ne||1e-3;var de=O($,G,ae);Q=0==se%(2*le)||0<K?this.lm_FD_J(O,$,G,de,ne,ae):this.lm_Broyden_J(Z,W,Q,G,de);var ue=R.subtract(ee,de),he=R.multiply(R.transpose(ue),R.dotMultiply(ue,te)),ce=R.transpose(Q),ge=R.multiply(ce,R.dotMultiply(Q,R.multiply(te,P.ones(1,le)))),me=R.multiply(ce,R.dotMultiply(te,ue));return{JtWJ:ge,JtWdy:me,Chi_sq:he,y_hat:de,J:Q}}}},function(E,D,I){'use strict';E.exports=I(90),E.exports.Matrix=I(6),E.exports.Matrix.algebra=I(37)},function(E,D,I){'use strict';function P(T){if(!(this instanceof P))return new P(T);if(T=R.checkMatrix(T),!T.isSymmetric())throw new Error('Matrix is not symmetric');var F=T,O=F.rows,$=new R(O,O),Z=!0,W,K,Q;for(K=0;K<O;K++){var G=$[K],ee=0;for(Q=0;Q<K;Q++){var te=$[Q],ne=0;for(W=0;W<Q;W++)ne+=te[W]*G[W];G[Q]=ne=(F[K][Q]-ne)/$[Q][Q],ee+=ne*ne}for(ee=F[K][K]-ee,Z&=0<ee,$[K][K]=Math.sqrt(Math.max(ee,0)),Q=K+1;Q<O;Q++)$[K][Q]=0}if(!Z)throw new Error('Matrix is not positive definite');this.L=$}var R=I(2);P.prototype={get leftTriangularFactor(){return this.L},solve:function(T){T=R.checkMatrix(T);var F=this.L,O=F.rows;if(T.rows!==O)throw new Error('Matrix dimensions do not match');var $=T.columns,Z=T.clone(),W,K,Q;for(Q=0;Q<O;Q++)for(K=0;K<$;K++){for(W=0;W<Q;W++)Z[Q][K]-=Z[W][K]*F[Q][W];Z[Q][K]/=F[Q][Q]}for(Q=O-1;0<=Q;Q--)for(K=0;K<$;K++){for(W=Q+1;W<O;W++)Z[Q][K]-=Z[W][K]*F[W][Q];Z[Q][K]/=F[Q][Q]}return Z}},E.exports=P},function(E,D,I){'use strict';function P(K){if(!(this instanceof P))return new P(K);if(K=Z.checkMatrix(K),!K.isSquare())throw new Error('Matrix is not a square matrix');var Q=K.columns,G=Z.zeros(Q,Q),ee=Array(Q),te=Array(Q),ne=K,ae,se;if(K.isSymmetric()){for(ae=0;ae<Q;ae++)for(se=0;se<Q;se++)G[ae][se]=ne[ae][se];R(Q,te,ee,G),T(Q,te,ee,G)}else{var oe=Z.zeros(Q,Q),le=Array(Q);for(se=0;se<Q;se++)for(ae=0;ae<Q;ae++)oe[ae][se]=ne[ae][se];F(Q,oe,le,G),O(Q,te,ee,G,oe)}this.n=Q,this.e=te,this.d=ee,this.V=G}function R(K,Q,G,ee){var te,ne,ae,se,oe,le,de,ue;for(oe=0;oe<K;oe++)G[oe]=ee[K-1][oe];for(se=K-1;0<se;se--){for(ue=0,ae=0,le=0;le<se;le++)ue+=Math.abs(G[le]);if(0===ue)for(Q[se]=G[se-1],oe=0;oe<se;oe++)G[oe]=ee[se-1][oe],ee[se][oe]=0,ee[oe][se]=0;else{for(le=0;le<se;le++)G[le]/=ue,ae+=G[le]*G[le];for(te=G[se-1],ne=Math.sqrt(ae),0<te&&(ne=-ne),Q[se]=ue*ne,ae-=te*ne,G[se-1]=te-ne,oe=0;oe<se;oe++)Q[oe]=0;for(oe=0;oe<se;oe++){for(te=G[oe],ee[oe][se]=te,ne=Q[oe]+ee[oe][oe]*te,le=oe+1;le<=se-1;le++)ne+=ee[le][oe]*G[le],Q[le]+=ee[le][oe]*te;Q[oe]=ne}for(te=0,oe=0;oe<se;oe++)Q[oe]/=ae,te+=Q[oe]*G[oe];for(de=te/(ae+ae),oe=0;oe<se;oe++)Q[oe]-=de*G[oe];for(oe=0;oe<se;oe++){for(te=G[oe],ne=Q[oe],le=oe;le<=se-1;le++)ee[le][oe]-=te*Q[le]+ne*G[le];G[oe]=ee[se-1][oe],ee[se][oe]=0}}G[se]=ae}for(se=0;se<K-1;se++){if(ee[K-1][se]=ee[se][se],ee[se][se]=1,ae=G[se+1],0!==ae){for(le=0;le<=se;le++)G[le]=ee[le][se+1]/ae;for(oe=0;oe<=se;oe++){for(ne=0,le=0;le<=se;le++)ne+=ee[le][se+1]*ee[le][oe];for(le=0;le<=se;le++)ee[le][oe]-=ne*G[le]}}for(le=0;le<=se;le++)ee[le][se+1]=0}for(oe=0;oe<K;oe++)G[oe]=ee[K-1][oe],ee[K-1][oe]=0;ee[K-1][K-1]=1,Q[0]=0}function T(K,Q,G,ee){var te,ne,ae,se,oe,le,de,ue,he,ce,ge,me,pe,fe,xe,be,ye;for(ae=1;ae<K;ae++)Q[ae-1]=Q[ae];Q[K-1]=0;var _e=0,ke=0,je=Math.pow(2,-52);for(le=0;le<K;le++){for(ke=Math.max(ke,Math.abs(G[le])+Math.abs(Q[le])),de=le;de<K&&!(Math.abs(Q[de])<=je*ke);)de++;if(de>le){ye=0;do{for(++ye,te=G[le],ue=(G[le+1]-te)/(2*Q[le]),he=W(ue,1),0>ue&&(he=-he),G[le]=Q[le]/(ue+he),G[le+1]=Q[le]*(ue+he),ce=G[le+1],ne=te-G[le],ae=le+2;ae<K;ae++)G[ae]-=ne;for(_e+=ne,ue=G[de],ge=1,me=ge,pe=ge,fe=Q[le+1],xe=0,be=0,ae=de-1;ae>=le;ae--)for(pe=me,me=ge,be=xe,te=ge*Q[ae],ne=ge*ue,he=W(ue,Q[ae]),Q[ae+1]=xe*he,xe=Q[ae]/he,ge=ue/he,ue=ge*G[ae]-xe*te,G[ae+1]=ne+xe*(ge*te+xe*G[ae]),oe=0;oe<K;oe++)ne=ee[oe][ae+1],ee[oe][ae+1]=xe*ee[oe][ae]+ge*ne,ee[oe][ae]=ge*ee[oe][ae]-xe*ne;ue=-xe*be*pe*fe*Q[le]/ce,Q[le]=xe*ue,G[le]=ge*ue}while(Math.abs(Q[le])>je*ke)}G[le]+=_e,Q[le]=0}for(ae=0;ae<K-1;ae++){for(oe=ae,ue=G[ae],se=ae+1;se<K;se++)G[se]<ue&&(oe=se,ue=G[se]);if(oe!==ae)for(G[oe]=G[ae],G[ae]=ue,se=0;se<K;se++)ue=ee[se][ae],ee[se][ae]=ee[se][oe],ee[se][oe]=ue}}function F(K,Q,G,ee){var te=0,ne=K-1,ae,se,oe,le,de,ue,he;for(ue=te+1;ue<=ne-1;ue++){for(he=0,le=ue;le<=ne;le++)he+=Math.abs(Q[le][ue-1]);if(0!==he){for(oe=0,le=ne;le>=ue;le--)G[le]=Q[le][ue-1]/he,oe+=G[le]*G[le];for(se=Math.sqrt(oe),0<G[ue]&&(se=-se),oe-=G[ue]*se,G[ue]-=se,de=ue;de<K;de++){for(ae=0,le=ne;le>=ue;le--)ae+=G[le]*Q[le][de];for(ae/=oe,le=ue;le<=ne;le++)Q[le][de]-=ae*G[le]}for(le=0;le<=ne;le++){for(ae=0,de=ne;de>=ue;de--)ae+=G[de]*Q[le][de];for(ae/=oe,de=ue;de<=ne;de++)Q[le][de]-=ae*G[de]}G[ue]=he*G[ue],Q[ue][ue-1]=he*se}}for(le=0;le<K;le++)for(de=0;de<K;de++)ee[le][de]=le===de?1:0;for(ue=ne-1;ue>=te+1;ue--)if(0!==Q[ue][ue-1]){for(le=ue+1;le<=ne;le++)G[le]=Q[le][ue-1];for(de=ue;de<=ne;de++){for(se=0,le=ue;le<=ne;le++)se+=G[le]*ee[le][de];for(se=se/G[ue]/Q[ue][ue-1],le=ue;le<=ne;le++)ee[le][de]+=se*G[le]}}}function O(K,Q,G,ee,te){var ne=K-1,ae=0,se=K-1,oe=Math.pow(2,-52),le=0,de=0,ue=0,he=0,ce=0,ge=0,me=0,pe=0,fe,xe,be,ye,_e,ke,je,we,Se,ve,Ee,De,Ce,Ae,Ie;for(fe=0;fe<K;fe++)for((fe<ae||fe>se)&&(G[fe]=te[fe][fe],Q[fe]=0),xe=Math.max(fe-1,0);xe<K;xe++)de+=Math.abs(te[fe][xe]);for(;ne>=ae;){for(ye=ne;ye>ae&&(ge=Math.abs(te[ye-1][ye-1])+Math.abs(te[ye][ye]),0==ge&&(ge=de),!(Math.abs(te[ye][ye-1])<oe*ge));)ye--;if(ye===ne)te[ne][ne]+=le,G[ne]=te[ne][ne],Q[ne]=0,ne--,pe=0;else if(ye===ne-1){if(je=te[ne][ne-1]*te[ne-1][ne],ue=(te[ne-1][ne-1]-te[ne][ne])/2,he=ue*ue+je,me=Math.sqrt(Math.abs(he)),te[ne][ne]+=le,te[ne-1][ne-1]=te[ne-1][ne-1]+le,we=te[ne][ne],0<=he){for(me=0<=ue?ue+me:ue-me,G[ne-1]=we+me,G[ne]=G[ne-1],0!=me&&(G[ne]=we-je/me),Q[ne-1]=0,Q[ne]=0,we=te[ne][ne-1],ge=Math.abs(we)+Math.abs(me),ue=we/ge,he=me/ge,ce=Math.sqrt(ue*ue+he*he),ue/=ce,he/=ce,xe=ne-1;xe<K;xe++)me=te[ne-1][xe],te[ne-1][xe]=he*me+ue*te[ne][xe],te[ne][xe]=he*te[ne][xe]-ue*me;for(fe=0;fe<=ne;fe++)me=te[fe][ne-1],te[fe][ne-1]=he*me+ue*te[fe][ne],te[fe][ne]=he*te[fe][ne]-ue*me;for(fe=ae;fe<=se;fe++)me=ee[fe][ne-1],ee[fe][ne-1]=he*me+ue*ee[fe][ne],ee[fe][ne]=he*ee[fe][ne]-ue*me}else G[ne-1]=we+ue,G[ne]=we+ue,Q[ne-1]=me,Q[ne]=-me;ne-=2,pe=0}else{if(we=te[ne][ne],Se=0,je=0,ye<ne&&(Se=te[ne-1][ne-1],je=te[ne][ne-1]*te[ne-1][ne]),10==pe){for(le+=we,fe=ae;fe<=ne;fe++)te[fe][fe]-=we;ge=Math.abs(te[ne][ne-1])+Math.abs(te[ne-1][ne-2]),we=Se=0.75*ge,je=-0.4375*ge*ge}if(30==pe&&(ge=(Se-we)/2,ge=ge*ge+je,0<ge)){for(ge=Math.sqrt(ge),Se<we&&(ge=-ge),ge=we-je/((Se-we)/2+ge),fe=ae;fe<=ne;fe++)te[fe][fe]-=ge;le+=ge,we=Se=je=0.964}for(++pe,_e=ne-2;_e>=ye&&(me=te[_e][_e],ce=we-me,ge=Se-me,ue=(ce*ge-je)/te[_e+1][_e]+te[_e][_e+1],he=te[_e+1][_e+1]-me-ce-ge,ce=te[_e+2][_e+1],ge=Math.abs(ue)+Math.abs(he)+Math.abs(ce),ue/=ge,he/=ge,ce/=ge,_e!=ye)&&!(Math.abs(te[_e][_e-1])*(Math.abs(he)+Math.abs(ce))<oe*(Math.abs(ue)*(Math.abs(te[_e-1][_e-1])+Math.abs(me)+Math.abs(te[_e+1][_e+1]))));)_e--;for(fe=_e+2;fe<=ne;fe++)te[fe][fe-2]=0,fe>_e+2&&(te[fe][fe-3]=0);for(be=_e;be<=ne-1&&(Ae=be!==ne-1,be!=_e&&(ue=te[be][be-1],he=te[be+1][be-1],ce=Ae?te[be+2][be-1]:0,we=Math.abs(ue)+Math.abs(he)+Math.abs(ce),0!==we&&(ue/=we,he/=we,ce/=we)),0!==we);be++)if(ge=Math.sqrt(ue*ue+he*he+ce*ce),0>ue&&(ge=-ge),0!==ge){for(be==_e?ye!==_e&&(te[be][be-1]=-te[be][be-1]):te[be][be-1]=-ge*we,ue+=ge,we=ue/ge,Se=he/ge,me=ce/ge,he/=ue,ce/=ue,xe=be;xe<K;xe++)ue=te[be][xe]+he*te[be+1][xe],Ae&&(ue+=ce*te[be+2][xe],te[be+2][xe]=te[be+2][xe]-ue*me),te[be][xe]-=ue*we,te[be+1][xe]=te[be+1][xe]-ue*Se;for(fe=0;fe<=Math.min(ne,be+3);fe++)ue=we*te[fe][be]+Se*te[fe][be+1],Ae&&(ue+=me*te[fe][be+2],te[fe][be+2]=te[fe][be+2]-ue*ce),te[fe][be]-=ue,te[fe][be+1]=te[fe][be+1]-ue*he;for(fe=ae;fe<=se;fe++)ue=we*ee[fe][be]+Se*ee[fe][be+1],Ae&&(ue+=me*ee[fe][be+2],ee[fe][be+2]=ee[fe][be+2]-ue*ce),ee[fe][be]-=ue,ee[fe][be+1]=ee[fe][be+1]-ue*he}}}if(0!==de){for(ne=K-1;0<=ne;ne--)if(ue=G[ne],he=Q[ne],0===he)for(ye=ne,te[ne][ne]=1,fe=ne-1;0<=fe;fe--){for(je=te[fe][fe]-ue,ce=0,xe=ye;xe<=ne;xe++)ce+=te[fe][xe]*te[xe][ne];if(0>Q[fe])me=je,ge=ce;else if(ye=fe,0===Q[fe]?te[fe][ne]=0===je?-ce/(oe*de):-ce/je:(we=te[fe][fe+1],Se=te[fe+1][fe],he=(G[fe]-ue)*(G[fe]-ue)+Q[fe]*Q[fe],ke=(we*ge-me*ce)/he,te[fe][ne]=ke,te[fe+1][ne]=Math.abs(we)>Math.abs(me)?(-ce-je*ke)/we:(-ge-Se*ke)/me),ke=Math.abs(te[fe][ne]),1<oe*ke*ke)for(xe=fe;xe<=ne;xe++)te[xe][ne]/=ke}else if(0>he)for(ye=ne-1,Math.abs(te[ne][ne-1])>Math.abs(te[ne-1][ne])?(te[ne-1][ne-1]=he/te[ne][ne-1],te[ne-1][ne]=-(te[ne][ne]-ue)/te[ne][ne-1]):(Ie=$(0,-te[ne-1][ne],te[ne-1][ne-1]-ue,he),te[ne-1][ne-1]=Ie[0],te[ne-1][ne]=Ie[1]),te[ne][ne-1]=0,te[ne][ne]=1,fe=ne-2;0<=fe;fe--){for(ve=0,Ee=0,xe=ye;xe<=ne;xe++)ve+=te[fe][xe]*te[xe][ne-1],Ee+=te[fe][xe]*te[xe][ne];if(je=te[fe][fe]-ue,0>Q[fe])me=je,ce=ve,ge=Ee;else if(ye=fe,0===Q[fe]?(Ie=$(-ve,-Ee,je,he),te[fe][ne-1]=Ie[0],te[fe][ne]=Ie[1]):(we=te[fe][fe+1],Se=te[fe+1][fe],De=(G[fe]-ue)*(G[fe]-ue)+Q[fe]*Q[fe]-he*he,Ce=2*(G[fe]-ue)*he,0===De&&0===Ce&&(De=oe*de*(Math.abs(je)+Math.abs(he)+Math.abs(we)+Math.abs(Se)+Math.abs(me))),Ie=$(we*ce-me*ve+he*Ee,we*ge-me*Ee-he*ve,De,Ce),te[fe][ne-1]=Ie[0],te[fe][ne]=Ie[1],Math.abs(we)>Math.abs(me)+Math.abs(he)?(te[fe+1][ne-1]=(-ve-je*te[fe][ne-1]+he*te[fe][ne])/we,te[fe+1][ne]=(-Ee-je*te[fe][ne]-he*te[fe][ne-1])/we):(Ie=$(-ce-Se*te[fe][ne-1],-ge-Se*te[fe][ne],me,he),te[fe+1][ne-1]=Ie[0],te[fe+1][ne]=Ie[1])),ke=Math.max(Math.abs(te[fe][ne-1]),Math.abs(te[fe][ne])),1<oe*ke*ke)for(xe=fe;xe<=ne;xe++)te[xe][ne-1]=te[xe][ne-1]/ke,te[xe][ne]/=ke}for(fe=0;fe<K;fe++)if(fe<ae||fe>se)for(xe=fe;xe<K;xe++)ee[fe][xe]=te[fe][xe];for(xe=K-1;xe>=ae;xe--)for(fe=ae;fe<=se;fe++){for(me=0,be=ae;be<=Math.min(xe,se);be++)me+=ee[fe][be]*te[be][xe];ee[fe][xe]=me}}}function $(K,Q,G,ee){var te,ne;return Math.abs(G)>Math.abs(ee)?(te=ee/G,ne=G+te*ee,[(K+te*Q)/ne,(Q-te*K)/ne]):(te=G/ee,ne=ee+te*G,[(te*K+Q)/ne,(te*Q-K)/ne])}var Z=I(2),W=I(13).hypotenuse;P.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return this.V},get diagonalMatrix(){var K=this.n,Q=this.e,G=this.d,ee=new Z(K,K),te,ne;for(te=0;te<K;te++){for(ne=0;ne<K;ne++)ee[te][ne]=0;ee[te][te]=G[te],0<Q[te]?ee[te][te+1]=Q[te]:0>Q[te]&&(ee[te][te-1]=Q[te])}return ee}},E.exports=P},function(E,D,I){'use strict';function P(T){if(!(this instanceof P))return new P(T);T=R.checkMatrix(T);var F=T.clone(),O=F.rows,$=F.columns,Z=Array(O),W=1,K,Q,G,ee,te,ne,ae,se,oe,le;for(K=0;K<O;K++)Z[K]=K;for(oe=Array(O),Q=0;Q<$;Q++){for(K=0;K<O;K++)oe[K]=F[K][Q];for(K=0;K<O;K++){for(se=F[K],le=Math.min(K,Q),te=0,G=0;G<le;G++)te+=se[G]*oe[G];se[Q]=oe[K]-=te}for(ee=Q,K=Q+1;K<O;K++)Math.abs(oe[K])>Math.abs(oe[ee])&&(ee=K);if(ee!==Q){for(G=0;G<$;G++)ne=F[ee][G],F[ee][G]=F[Q][G],F[Q][G]=ne;ae=Z[ee],Z[ee]=Z[Q],Z[Q]=ae,W=-W}if(Q<O&&0!==F[Q][Q])for(K=Q+1;K<O;K++)F[K][Q]/=F[Q][Q]}this.LU=F,this.pivotVector=Z,this.pivotSign=W}var R=I(2);P.prototype={isSingular:function(){for(var T=this.LU,F=T.columns,O=0;O<F;O++)if(0===T[O][O])return!0;return!1},get determinant(){var T=this.LU;if(!T.isSquare())throw new Error('Matrix must be square');for(var F=this.pivotSign,O=T.columns,$=0;$<O;$++)F*=T[$][$];return F},get lowerTriangularFactor(){for(var T=this.LU,F=T.rows,O=T.columns,$=new R(F,O),Z=0;Z<F;Z++)for(var W=0;W<O;W++)$[Z][W]=Z>W?T[Z][W]:Z===W?1:0;return $},get upperTriangularFactor(){for(var T=this.LU,F=T.rows,O=T.columns,$=new R(F,O),Z=0;Z<F;Z++)for(var W=0;W<O;W++)$[Z][W]=Z<=W?T[Z][W]:0;return $},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(T){T=R.checkMatrix(T);var F=this.LU,O=F.rows;if(O!==T.rows)throw new Error('Invalid matrix dimensions');if(this.isSingular())throw new Error('LU matrix is singular');var $=T.columns,Z=T.subMatrixRow(this.pivotVector,0,$-1),W=F.columns,K,Q,G;for(G=0;G<W;G++)for(K=G+1;K<W;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*F[K][G];for(G=W-1;0<=G;G--){for(Q=0;Q<$;Q++)Z[G][Q]/=F[G][G];for(K=0;K<G;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*F[K][G]}return Z}},E.exports=P},function(E,D,I){'use strict';function P(F){if(!(this instanceof P))return new P(F);F=R.checkMatrix(F);var O=F.clone(),$=F.rows,Z=F.columns,W=Array(Z),K,Q,G,ee;for(G=0;G<Z;G++){var te=0;for(K=G;K<$;K++)te=T(te,O[K][G]);if(0!==te){for(0>O[G][G]&&(te=-te),K=G;K<$;K++)O[K][G]/=te;for(O[G][G]+=1,Q=G+1;Q<Z;Q++){for(ee=0,K=G;K<$;K++)ee+=O[K][G]*O[K][Q];for(ee=-ee/O[G][G],K=G;K<$;K++)O[K][Q]+=ee*O[K][G]}}W[G]=-te}this.QR=O,this.Rdiag=W}var R=I(2),T=I(13).hypotenuse;P.prototype={solve:function(F){F=R.checkMatrix(F);var O=this.QR,$=O.rows;if(F.rows!==$)throw new Error('Matrix row dimensions must agree');if(!this.isFullRank())throw new Error('Matrix is rank deficient');var Z=F.columns,W=F.clone(),K=O.columns,Q,G,ee,te;for(ee=0;ee<K;ee++)for(G=0;G<Z;G++){for(te=0,Q=ee;Q<$;Q++)te+=O[Q][ee]*W[Q][G];for(te=-te/O[ee][ee],Q=ee;Q<$;Q++)W[Q][G]+=te*O[Q][ee]}for(ee=K-1;0<=ee;ee--){for(G=0;G<Z;G++)W[ee][G]/=this.Rdiag[ee];for(Q=0;Q<ee;Q++)for(G=0;G<Z;G++)W[Q][G]-=W[ee][G]*O[Q][ee]}return W.subMatrix(0,K-1,0,Z-1)},isFullRank:function(){for(var F=this.QR.columns,O=0;O<F;O++)if(0===this.Rdiag[O])return!1;return!0},get upperTriangularFactor(){var F=this.QR,O=F.columns,$=new R(O,O),Z,W;for(Z=0;Z<O;Z++)for(W=0;W<O;W++)$[Z][W]=Z<W?F[Z][W]:Z===W?this.Rdiag[Z]:0;return $},get orthogonalFactor(){var F=this.QR,O=F.rows,$=F.columns,Z=new R(O,$),W,K,Q,G;for(Q=$-1;0<=Q;Q--){for(W=0;W<O;W++)Z[W][Q]=0;for(Z[Q][Q]=1,K=Q;K<$;K++)if(0!==F[Q][Q]){for(G=0,W=Q;W<O;W++)G+=F[W][Q]*Z[W][K];for(G=-G/F[Q][Q],W=Q;W<O;W++)Z[W][K]+=G*F[W][Q]}}return Z}},E.exports=P},function(E,D,I){'use strict';function P(F,O){if(!(this instanceof P))return new P(F,O);F=R.checkMatrix(F),O=O||{};var $=F.clone(),Z=F.rows,W=F.columns,K=Math.min(Z,W),Q=!0,G=!0;!1===O.computeLeftSingularVectors&&(Q=!1),!1===O.computeRightSingularVectors&&(G=!1);var ee=!0===O.autoTranspose,te=!1;if(Z<W)if(!ee)console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');else{$=$.transpose(),Z=$.rows,W=$.columns,te=!0;var ne=Q;Q=G,G=ne}var ae=Array(Math.min(Z+1,W)),se=R.zeros(Z,K),oe=R.zeros(W,W),le=Array(W),de=Array(Z),ue=Math.min(Z-1,W),he=Math.max(0,Math.min(W-2,Z)),ce,ge,me,pe,fe,xe,be,ye,_e,ke,je,we,Se,ve,Ee,De,Ce,Ae,Ie,Pe,Re;for(me=0,ke=Math.max(ue,he);me<ke;me++){if(me<ue){for(ae[me]=0,ce=me;ce<Z;ce++)ae[me]=T(ae[me],$[ce][me]);if(0!==ae[me]){for(0>$[me][me]&&(ae[me]=-ae[me]),ce=me;ce<Z;ce++)$[ce][me]/=ae[me];$[me][me]+=1}ae[me]=-ae[me]}for(ge=me+1;ge<W;ge++){if(me<ue&&0!==ae[me]){for(fe=0,ce=me;ce<Z;ce++)fe+=$[ce][me]*$[ce][ge];for(fe=-fe/$[me][me],ce=me;ce<Z;ce++)$[ce][ge]+=fe*$[ce][me]}le[ge]=$[me][ge]}if(Q&&me<ue)for(ce=me;ce<Z;ce++)se[ce][me]=$[ce][me];if(me<he){for(le[me]=0,ce=me+1;ce<W;ce++)le[me]=T(le[me],le[ce]);if(0!==le[me]){for(0>le[me+1]&&(le[me]=-le[me]),ce=me+1;ce<W;ce++)le[ce]/=le[me];le[me+1]+=1}if(le[me]=-le[me],me+1<Z&&0!==le[me]){for(ce=me+1;ce<Z;ce++)de[ce]=0;for(ge=me+1;ge<W;ge++)for(ce=me+1;ce<Z;ce++)de[ce]+=le[ge]*$[ce][ge];for(ge=me+1;ge<W;ge++)for(fe=-le[ge]/le[me+1],ce=me+1;ce<Z;ce++)$[ce][ge]+=fe*de[ce]}if(G)for(ce=me+1;ce<W;ce++)oe[ce][me]=le[ce]}}if(pe=Math.min(W,Z+1),ue<W&&(ae[ue]=$[ue][ue]),Z<pe&&(ae[pe-1]=0),he+1<pe&&(le[he]=$[he][pe-1]),le[pe-1]=0,Q){for(ge=ue;ge<K;ge++){for(ce=0;ce<Z;ce++)se[ce][ge]=0;se[ge][ge]=1}for(me=ue-1;0<=me;me--)if(0!==ae[me]){for(ge=me+1;ge<K;ge++){for(fe=0,ce=me;ce<Z;ce++)fe+=se[ce][me]*se[ce][ge];for(fe=-fe/se[me][me],ce=me;ce<Z;ce++)se[ce][ge]+=fe*se[ce][me]}for(ce=me;ce<Z;ce++)se[ce][me]=-se[ce][me];for(se[me][me]=1+se[me][me],ce=0;ce<me-1;ce++)se[ce][me]=0}else{for(ce=0;ce<Z;ce++)se[ce][me]=0;se[me][me]=1}}if(G)for(me=W-1;0<=me;me--){if(me<he&&0!==le[me])for(ge=me+1;ge<W;ge++){for(fe=0,ce=me+1;ce<W;ce++)fe+=oe[ce][me]*oe[ce][ge];for(fe=-fe/oe[me+1][me],ce=me+1;ce<W;ce++)oe[ce][ge]+=fe*oe[ce][me]}for(ce=0;ce<W;ce++)oe[ce][me]=0;oe[me][me]=1}for(var Te=pe-1,Fe=0,ze=Math.pow(2,-52);0<pe;){for(me=pe-2;-1<=me&&-1!==me;me--)if(Math.abs(le[me])<=ze*(Math.abs(ae[me])+Math.abs(ae[me+1]))){le[me]=0;break}if(me===pe-2)je=4;else{for(xe=pe-1;xe>=me&&xe!==me;xe--)if(fe=(xe===pe?0:Math.abs(le[xe]))+(xe===me+1?0:Math.abs(le[xe-1])),Math.abs(ae[xe])<=ze*fe){ae[xe]=0;break}xe===me?je=3:xe===pe-1?je=1:(je=2,me=xe)}switch(me++,je){case 1:{for(be=le[pe-2],le[pe-2]=0,ge=pe-2;ge>=me;ge--)if(fe=T(ae[ge],be),ye=ae[ge]/fe,_e=be/fe,ae[ge]=fe,ge!==me&&(be=-_e*le[ge-1],le[ge-1]=ye*le[ge-1]),G)for(ce=0;ce<W;ce++)fe=ye*oe[ce][ge]+_e*oe[ce][pe-1],oe[ce][pe-1]=-_e*oe[ce][ge]+ye*oe[ce][pe-1],oe[ce][ge]=fe;break}case 2:{for(be=le[me-1],le[me-1]=0,ge=me;ge<pe;ge++)if(fe=T(ae[ge],be),ye=ae[ge]/fe,_e=be/fe,ae[ge]=fe,be=-_e*le[ge],le[ge]=ye*le[ge],Q)for(ce=0;ce<Z;ce++)fe=ye*se[ce][ge]+_e*se[ce][me-1],se[ce][me-1]=-_e*se[ce][ge]+ye*se[ce][me-1],se[ce][ge]=fe;break}case 3:{for(we=Math.max(Math.max(Math.max(Math.max(Math.abs(ae[pe-1]),Math.abs(ae[pe-2])),Math.abs(le[pe-2])),Math.abs(ae[me])),Math.abs(le[me])),Se=ae[pe-1]/we,ve=ae[pe-2]/we,Ee=le[pe-2]/we,De=ae[me]/we,Ce=le[me]/we,Ae=((ve+Se)*(ve-Se)+Ee*Ee)/2,Ie=Se*Ee*(Se*Ee),Pe=0,(0!==Ae||0!==Ie)&&(Pe=Math.sqrt(Ae*Ae+Ie),0>Ae&&(Pe=-Pe),Pe=Ie/(Ae+Pe)),be=(De+Se)*(De-Se)+Pe,Re=De*Ce,ge=me;ge<pe-1;ge++){if(fe=T(be,Re),ye=be/fe,_e=Re/fe,ge!==me&&(le[ge-1]=fe),be=ye*ae[ge]+_e*le[ge],le[ge]=ye*le[ge]-_e*ae[ge],Re=_e*ae[ge+1],ae[ge+1]=ye*ae[ge+1],G)for(ce=0;ce<W;ce++)fe=ye*oe[ce][ge]+_e*oe[ce][ge+1],oe[ce][ge+1]=-_e*oe[ce][ge]+ye*oe[ce][ge+1],oe[ce][ge]=fe;if(fe=T(be,Re),ye=be/fe,_e=Re/fe,ae[ge]=fe,be=ye*le[ge]+_e*ae[ge+1],ae[ge+1]=-_e*le[ge]+ye*ae[ge+1],Re=_e*le[ge+1],le[ge+1]=ye*le[ge+1],Q&&ge<Z-1)for(ce=0;ce<Z;ce++)fe=ye*se[ce][ge]+_e*se[ce][ge+1],se[ce][ge+1]=-_e*se[ce][ge]+ye*se[ce][ge+1],se[ce][ge]=fe}le[pe-2]=be,++Fe;break}case 4:{if(0>=ae[me]&&(ae[me]=0>ae[me]?-ae[me]:0,G))for(ce=0;ce<=Te;ce++)oe[ce][me]=-oe[ce][me];for(;me<Te&&!(ae[me]>=ae[me+1]);){if(fe=ae[me],ae[me]=ae[me+1],ae[me+1]=fe,G&&me<W-1)for(ce=0;ce<W;ce++)fe=oe[ce][me+1],oe[ce][me+1]=oe[ce][me],oe[ce][me]=fe;if(Q&&me<Z-1)for(ce=0;ce<Z;ce++)fe=se[ce][me+1],se[ce][me+1]=se[ce][me],se[ce][me]=fe;me++}Fe=0,pe--;break}}}if(te){var Me=oe;oe=se,se=Me}this.m=Z,this.n=W,this.s=ae,this.U=se,this.V=oe}var R=I(2),T=I(13).hypotenuse;P.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var F=Math.pow(2,-52),O=Math.max(this.m,this.n)*this.s[0]*F,$=0,Z=this.s,W=0,K=Z.length;W<K;W++)Z[W]>O&&$++;return $},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return this.U},get rightSingularVectors(){return this.V},get diagonalMatrix(){return R.diag(this.s)},solve:function(F){var $=this.threshold,Z=this.s.length,W=R.zeros(Z,Z),K;for(K=0;K<Z;K++)W[K][K]=Math.abs(this.s[K])<=$?0:1/this.s[K];var Q=this.V.mmul(W),G=this.V.rows,ee=this.U.rows,te=R.zeros(G,ee),ne,ae,se;for(K=0;K<G;K++)for(ne=0;ne<ee;ne++){for(se=0,ae=0;ae<Z;ae++)se+=Q[K][ae]*this.U[ne][ae];te[K][ne]=se}return te.mmul(F)},solveForDiagonal:function(F){return this.solve(R.diag(F))},inverse:function(){var F=this.threshold,O=this.V.rows,$=this.V.columns,Z=new R(O,this.s.length),W,K;for(W=0;W<O;W++)for(K=0;K<$;K++)Z[W][K]=Math.abs(this.s[K])>F?this.V[W][K]/this.s[K]:0;var Q=this.U.rows,G=this.U.columns,ee=new R(O,Q),te,ne;for(W=0;W<O;W++)for(K=0;K<Q;K++){for(ne=0,te=0;te<G;te++)ne+=Z[W][te]*this.U[K][te];ee[W][K]=ne}return ee}},E.exports=P},function(E,D,I){'use strict';function P(K){return R(K,T.eye(K.rows))}function R(K,Q){return K.isSquare()?new $(K).solve(Q):new Z(K).solve(Q)}var T=I(2),F=I(96),O=I(93),$=I(94),Z=I(95),W=I(92);T.prototype.inverse=function(){return P(this)},T.prototype.solve=function(K){return R(this,K)},E.exports={SingularValueDecomposition:F,SVD:F,EigenvalueDecomposition:O,EVD:O,LuDecomposition:$,LU:$,QrDecomposition:Z,QR:Z,CholeskyDecomposition:W,CHO:W,inverse:P,solve:R}},function(E,D,I){'use strict';function P(se,oe){var de=oe.length/3,me=se.rows,ue,he,ce,ge,pe=ae.zeros(se.length,1);for(he=0;he<de;he++)for(ge=Math.pow(oe[he+2*de][0]/2,2),ue=oe[he+de][0]*ge,ce=0;ce<me;ce++)pe[ce][0]+=ue/(Math.pow(se[ce][0]-oe[he][0],2)+ge);return pe}function T(se,oe){for(var de=oe[1][0]*Math.pow(oe[2][0]/2,2),ue=se.rows,he=new ae(se.rows,se.columns),ce=0;ce<ue;ce++)he[ce][0]=de/(Math.pow(se[ce][0]-oe[0][0],2)+Math.pow(oe[2][0]/2,2));return he}function F(se,oe){for(var de=oe[2][0]*oe[2][0]/2,ue=se.rows,he=new ae(se.rows,se.columns),ce=0;ce<ue;ce++)he[ce][0]=oe[1][0]*Math.exp(-(se[ce][0]-oe[0][0])*(se[ce][0]-oe[0][0])/de);return he}function O(se,oe,le){le=le||{};var de=G(se,le.percentage||0);if(null===de||3>de[0].rows)return null;var ue=de[0],he=de[1],ce=de[2],ge=ue.rows,pe=[ge/Math.sqrt(he.dot(he))],le=Object.create(le.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),xe=Math.abs(ue[0][0]-ue[1][0]),be=new ae([[-xe/1e4],[-0.001],[-xe/1e4]]),ye=new ae([[oe.x],[1],[oe.width]]),_e=new ae([[oe.x-xe],[0.75],[oe.width/4]]),ke=new ae([[oe.x+xe],[1.25],[4*oe.width]]),je=te.optimize(T,ye,ue,he,pe,be,_e,ke,[],le);return je=je.p,[je[0],[je[1][0]*ce],je[2]]}function $(se,oe,le){le=le||{};var de=G(se,le.percentage||0);if(null===de||3>de[0].rows)return null;var ue=de[0],he=de[1],ce=de[2],ge=ue.rows,pe=[ge/Math.sqrt(he.dot(he))],le=Object.create(le.LMOptions||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),xe=Math.abs(ue[0][0]-ue[1][0]),be=new ae([[-xe/1e4],[-0.001],[-xe/1e4]]),be=new ae([[-Math.abs(ue[0][0]-ue[1][0])/1e3],[-0.001],[-oe.width/1e3]]),ye=new ae([[oe.x],[1],[oe.width]]),_e=new ae([[oe.x-xe],[0.75],[oe.width/4]]),ke=new ae([[oe.x+xe],[1.25],[4*oe.width]]),je=te.optimize(F,ye,ue,he,pe,be,_e,ke,[],le);return je=je.p,[je[0],[je[1][0]*ce],je[2]]}function G(se,oe){var le=se.length,de=null,ue=null,he,ce,ge=0,me;if(2==le){var fe=se[0].length;if(de=Array(fe),ue=Array(fe),he=se[0],ce=se[1],'number'==typeof he[0])for(me=0;me<fe;me++)de[me]=he[me],ue[me]=ce[me],ce[me]>ge&&(ge=ce[me]);else if('object'==typeof he[0])for(me=0;me<fe;me++)de[me]=he[me][0],ue[me]=ce[me][0],ce[me][0]>ge&&(ge=ce[me][0])}else{var fe=le;for(de=Array(fe),ue=Array(fe),me=0;me<fe;me++)de[me]=se[me][0],ue[me]=se[me][1],ue[me]>ge&&(ge=ue[me])}for(me=0;me<fe;me++)ue[me]/=ge;if(oe)for(me=fe-1;0<=me;me--)ue[me]<oe&&(ue.splice(me,1),de.splice(me,1));return 0<de.length?[new ae([de]).transpose(),new ae([ue]).transpose(),ge]:null}var te=I(91),ne=te.Matrix.algebra,ae=I(6);E.exports.optimizeSingleLorentzian=O,E.exports.optimizeLorentzianSum=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;var ue=de[0],he=de[1],ce=de[2],ge=ue.rows,me,pe=[ge/ne.sqrt(he.dot(he))],le=Object.create(le||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,1]),xe=oe.length,be=new ae(3*xe,1),ye=new ae(3*xe,1),_e=new ae(3*xe,1),ke=new ae(3*xe,1),je=Math.abs(ue[0][0]-ue[1][0]);for(me=0;me<xe;me++)be[me][0]=oe[me].x,be[me+xe][0]=1,be[me+2*xe][0]=oe[me].width,ye[me][0]=oe[me].x-je,ye[me+xe][0]=0,ye[me+2*xe][0]=oe[me].width/4,_e[me][0]=oe[me].x+je,_e[me+xe][0]=1.5,_e[me+2*xe][0]=4*oe[me].width,ke[me][0]=-je/1e3,ke[me+xe][0]=-1e-3,ke[me+2*xe][0]=-je/1e3;var ke=-Math.abs(ue[0][0]-ue[1][0])/1e4,we=te.optimize(P,be,ue,he,pe,ke,ye,_e,[],le);we=we.p;var Se=Array(xe);for(me=0;me<xe;me++)Se[me]=[we[me],[we[me+xe][0]*ce],we[me+2*xe]];return Se},E.exports.optimizeSingleGaussian=$,E.exports.optimizeGaussianSum=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;var ue=de[0],he=de[1],ce=de[2],ge=ue.rows,me,pe=new ae(ge,1),fe=ge/ne.sqrt(he.dot(he));for(me=0;me<ge;me++)pe[me][0]=fe;var le=Object.create(le||[3,100,0.001,0.001,0.001,0.01,0.01,11,9,2]),be=oe.length,ye=new ae(3*be,1),_e=new ae(3*be,1),ke=new ae(3*be,1),je=new ae(3*be,1),we=Math.abs(ue[0][0]-ue[1][0]);for(me=0;me<be;me++)ye[me][0]=oe[me].x,ye[me+be][0]=oe[me].y/ce,ye[me+2*be][0]=oe[me].width,_e[me][0]=oe[me].x-we,_e[me+be][0]=0.8*oe[me].y/ce,_e[me+2*be][0]=oe[me].width/2,ke[me][0]=oe[me].x+we,ke[me+be][0]=1.2*oe[me].y/ce,ke[me+2*be][0]=2*oe[me].width,je[me][0]=-we/1e3,je[me+be][0]=-1e-3,je[me+2*be][0]=-we/1e3;var Se=te.optimize(P,ye,ue,he,pe,je,_e,ke,[],le);Se=Se.p;var ve=Array(be);for(me=0;me<be;me++)ve[me]=[Se[me],[Se[me+be][0]*ce],Se[me+2*be]];return ve},E.exports.singleGaussian=F,E.exports.singleLorentzian=T,E.exports.optimizeGaussianTrain=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;for(var ue=de[0],he=de[1],ce=de[2],ge=0,me=ue.length,be=[],_e=0,pe,fe,xe,ce,ye;_e<oe.length;_e++){for(pe=oe[_e].x-4*oe[_e].width;ue[ge++]<pe&&ge<me;);for(pe=oe[_e].x+4*oe[_e].width,fe=[],xe=[];ue[ge]<=pe&&ge<me;)fe.push(ue[ge][0]),xe.push(he[ge][0]*ce),ge++;ye=$([fe,xe],oe[_e],le),ye?be.push({x:ye[0][0],y:ye[1][0],width:ye[2][0],opt:!0}):be.push({x:oe[_e].x,y:oe[_e].y,width:oe[_e].width,opt:!1})}return be},E.exports.optimizeLorentzianTrain=function(se,oe,le){var de=G(se);if(null===de||3>de[0].rows)return null;for(var ue=de[0],he=de[1],ce=de[2],ge=0,me=ue.length,be=[],_e=0,pe,fe,xe,ce,ye;_e<oe.length;_e++){for(pe=oe[_e].x-4*oe[_e].width;ue[ge++]<pe&&ge<me;);for(pe=oe[_e].x+4*oe[_e].width,fe=[],xe=[];ue[ge]<=pe&&ge<me;)fe.push(ue[ge][0]),xe.push(he[ge][0]*ce),ge++;ye=O([fe,xe],oe[_e],le),ye?be.push({x:ye[0][0],y:ye[1][0],width:ye[2][0],opt:!0}):be.push({x:oe[_e].x,y:oe[_e].y,width:oe[_e].width,opt:!1})}return be}},function(E,D,I){'use strict';D.array=I(38),D.matrix=I(100)},function(E,D,I){'use strict';function R(he,ce){'undefined'==typeof ce&&(ce=0);var ge=he.length,me=he[0].length,pe,fe,xe,be;if(-1===ce){for(pe=[0],fe=ge*me,xe=0;xe<ge;xe++)for(be=0;be<me;be++)pe[0]+=he[xe][be];pe[0]/=fe}else if(0===ce)for(pe=Array(me),fe=ge,be=0;be<me;be++){for(pe[be]=0,xe=0;xe<ge;xe++)pe[be]+=he[xe][be];pe[be]/=fe}else if(1===ce)for(pe=Array(ge),fe=me,be=0;be<ge;be++){for(pe[be]=0,xe=0;xe<me;xe++)pe[be]+=he[be][xe];pe[be]/=fe}else throw new Error('Invalid dimension');return pe}function T(he,ce,ge){for(var me=F(he,ce,ge),pe=me.length,fe=0;fe<pe;fe++)me[fe]=Math.sqrt(me[fe]);return me}function F(he,ce,ge){'undefined'==typeof ge&&(ge=!0),ce=ce||R(he);var me=he.length;if(0===me)return[];for(var pe=he[0].length,fe=Array(pe),xe=0;xe<pe;xe++){for(var be=0,ye=0,_e=0,ke=0;ke<me;ke++)_e=he[ke][xe]-ce[xe],be+=_e,ye+=_e*_e;fe[xe]=ge?(ye-be*be/me)/(me-1):(ye-be*be/me)/me}return fe}function G(he,ce,ge){'undefined'==typeof ge&&(ge=0),'undefined'==typeof ce&&(0===ge?ce=he.length-1:1==ge&&(ce=he[0].length-1));var me=R(he,ge),pe=he.length;if(0===pe)return[[]];var fe=he[0].length,xe,be,ye,_e,ke;if(0===ge){for(xe=Array(fe),be=0;be<fe;be++)xe[be]=Array(fe);for(be=0;be<fe;be++)for(ye=be;ye<fe;ye++){for(_e=0,ke=0;ke<pe;ke++)_e+=(he[ke][ye]-me[ye])*(he[ke][be]-me[be]);_e/=ce,xe[be][ye]=_e,xe[ye][be]=_e}}else if(1===ge){for(xe=Array(pe),be=0;be<pe;be++)xe[be]=Array(pe);for(be=0;be<pe;be++)for(ye=be;ye<pe;ye++){for(_e=0,ke=0;ke<fe;ke++)_e+=(he[ye][ke]-me[ye])*(he[be][ke]-me[be]);_e/=ce,xe[be][ye]=_e,xe[ye][be]=_e}}else throw new Error('Invalid dimension');return xe}function te(he,ce,ge){return ce=ce||R(he),'undefined'==typeof ge&&(ge=T(he,!0,ce)),ae(ne(he,ce,!1),ge,!0)}function ne(he,ce,ge){ce=ce||R(he);var me=he,pe=he.length,fe,xe,be;if(!ge)for(me=Array(pe),fe=0;fe<pe;fe++)me[fe]=Array(he[fe].length);for(fe=0;fe<pe;fe++){var ye=me[fe];for(xe=0,be=ye.length;xe<be;xe++)ye[xe]=he[fe][xe]-ce[xe]}return me}function ae(he,ce,ge){'undefined'==typeof ce&&(ce=T(he));var me=he,pe=he.length,fe,xe,be;if(!ge)for(me=Array(pe),fe=0;fe<pe;fe++)me[fe]=Array(he[fe].length);for(fe=0;fe<pe;fe++){var ye=me[fe],_e=he[fe];for(xe=0,be=ye.length;xe<be;xe++)0===ce[xe]||isNaN(ce[xe])||(ye[xe]=_e[xe]/ce[xe])}return me}function oe(he,ce,ge){'undefined'==typeof ge&&(ge=0);var me=he.length;if(0===me)return[];var pe=he[0].length,fe,xe,be,ye,_e,ke;if(0===ge){for(fe=Array(pe),xe=0;xe<pe;xe++)fe[xe]=0;for(xe=0;xe<me;xe++)for(ke=he[xe],_e=ce[xe],ye=0;ye<pe;ye++)fe[ye]+=ke[ye]*_e}else if(1===ge){for(fe=Array(me),xe=0;xe<me;xe++)fe[xe]=0;for(ye=0;ye<me;ye++)for(ke=he[ye],_e=ce[ye],xe=0;xe<pe;xe++)fe[ye]+=ke[xe]*_e}else throw new Error('Invalid dimension');var je=ue.sum(ce);if(0!==je)for(xe=0,be=fe.length;xe<be;xe++)fe[xe]/=je;return fe}function de(he,ce,ge,me,pe){pe=pe||0,ge=ge||oe(he,ce,pe),'undefined'==typeof me&&(me=1);var fe=he.length;if(0===fe)return[[]];var xe=he[0].length,be,ye,_e,ke,je;if(0===pe){for(be=Array(xe),ye=0;ye<xe;ye++)be[ye]=Array(xe);for(ye=0;ye<xe;ye++)for(_e=ye;_e<xe;_e++){for(je=0,ke=0;ke<fe;ke++)je+=ce[ke]*(he[ke][_e]-ge[_e])*(he[ke][ye]-ge[ye]);be[ye][_e]=je*me,be[_e][ye]=je*me}}else if(1===pe){for(be=Array(fe),ye=0;ye<fe;ye++)be[ye]=Array(fe);for(ye=0;ye<fe;ye++)for(_e=ye;_e<fe;_e++){for(je=0,ke=0;ke<xe;ke++)je+=ce[ke]*(he[_e][ke]-ge[_e])*(he[ye][ke]-ge[ye]);be[ye][_e]=je*me,be[_e][ye]=je*me}}else throw new Error('Invalid dimension');return be}var ue=I(38);E.exports={entropy:function(he,ce){'undefined'==typeof ce&&(ce=0);for(var ge=0,me=he.length,pe=he[0].length,fe=0;fe<me;fe++)for(var xe=0;xe<pe;xe++)ge+=he[fe][xe]*Math.log(he[fe][xe]+ce);return-ge},mean:R,standardDeviation:T,variance:F,median:function(he){for(var ce=he.length,ge=he[0].length,me=Array(ge),pe=0,fe;pe<ge;pe++){fe=Array(ce);for(var xe=0;xe<ce;xe++)fe[xe]=he[xe][pe];fe.sort();var be=fe.length;me[pe]=0==be%2?0.5*(fe[be/2]+fe[be/2-1]):fe[Math.floor(be/2)]}return me},mode:function(he){var ce=he.length,ge=he[0].length,me=Array(ge),pe,fe;for(pe=0;pe<ge;pe++){for(var xe=Array(ce),be=0;be<ce;be++)xe[be]=0;var ye=Array(ce),_e=0;for(fe=0;fe<ce;fe++){var ke=ye.indexOf(he[fe][pe]);0<=ke?xe[ke]++:(ye[_e]=he[fe][pe],xe[_e]=1,_e++)}var je=0,we=0;for(fe=0;fe<_e;fe++)xe[fe]>je&&(je=xe[fe],we=fe);me[pe]=ye[we]}return me},skewness:function(he,ce){'undefined'==typeof ce&&(ce=!0);for(var ge=R(he),me=he.length,pe=ge.length,fe=Array(pe),xe=0;xe<pe;xe++){for(var be=0,ye=0,_e=0,ke;_e<me;_e++)ke=he[_e][xe]-ge[xe],be+=ke*ke,ye+=ke*ke*ke;var je=be/me,we=ye/me,Se=we/Math.pow(je,3/2);if(ce){var ve=Math.sqrt(me*(me-1));fe[xe]=ve/(me-2)*Se}else fe[xe]=Se}return fe},kurtosis:function(he,ce){'undefined'==typeof ce&&(ce=!0);for(var ge=R(he),me=he.length,pe=he[0].length,fe=Array(pe),xe=0;xe<pe;xe++){for(var be=0,ye=0,_e=0,ke;_e<me;_e++)ke=he[_e][xe]-ge[xe],be+=ke*ke,ye+=ke*ke*ke*ke;var je=be/me,we=ye/me;if(ce){var Se=be/(me-1),Ee=ye/(Se*Se);fe[xe]=me*(me+1)/((me-1)*(me-2)*(me-3))*Ee-3*((me-1)*(me-1)/((me-2)*(me-3)))}else fe[xe]=we/(je*je)-3}return fe},standardError:function(he){for(var ce=he.length,ge=T(he),me=ge.length,pe=Array(me),fe=Math.sqrt(ce),xe=0;xe<me;xe++)pe[xe]=ge[xe]/fe;return pe},covariance:function(he,ce){return G(he,void 0,ce)},scatter:G,correlation:function(he){var ce=R(he),ge=T(he,!0,ce),me=te(he,ce,ge),pe=he.length,fe=he[0].length,xe,be,ye=Array(fe);for(xe=0;xe<fe;xe++)ye[xe]=Array(fe);for(xe=0;xe<fe;xe++)for(be=xe;be<fe;be++){for(var _e=0,ke=0,je=me.length;ke<je;ke++)_e+=me[ke][be]*me[ke][xe];_e/=pe-1,ye[xe][be]=_e,ye[be][xe]=_e}return ye},zScores:te,center:ne,standardize:ae,weightedVariance:function(he,ce){var ge=R(he),me=he.length;if(0===me)return[];for(var pe=he[0].length,fe=Array(pe),xe=0;xe<pe;xe++){for(var be=0,ye=0,_e=0,ke=0;ke<me;ke++){var je=he[ke][xe]-ge[xe],we=ce[ke];be+=we*(je*je),_e+=we,ye+=we*we}fe[xe]=be*(_e/(_e*_e-ye))}return fe},weightedMean:oe,weightedCovariance:function(he,ce,ge,me){me=me||0,ge=ge||oe(he,ce,me);for(var pe=0,fe=0,xe=0,be=ce.length;xe<be;xe++)pe+=ce[xe],fe+=ce[xe]*ce[xe];var ye=pe/(pe*pe-fe);return de(he,ce,ge,ye,me)},weightedScatter:de}},function(E,D,I){function R(Q,G,ee,te){for(var ne=0,ae=0,se=G-ee;se<G+ee;se++)0<=se&&se<Q.length-1&&(ne+=Q[se+1]-Q[se],ae++);return Math.pow(ne/ae,te)}function T(Q,G,ee,te){var ne=0;return ne=0<ee?(4*ee-2)/(ee*(2*G-ee+1))*(Q*T(Q,G,ee-1,te)+te*T(Q,G,ee-1,te-1))-(ee-1)*(2*G+ee)/(ee*(2*G-ee+1))*T(Q,G,ee-2,te):0==ee&&0==te?1:0,ne}function F(Q,G){var ee=1;if(Q>=G)for(var te=Q-G+1;te<=Q;te++)ee*=te;return ee}function O(Q,G,ee,te,ne){for(var ae=0,se=0;se<=te;se++)ae+=(2*se+1)*(F(2*ee,se)/F(2*ee+se+1,se+1))*T(Q,ee,se,0)*T(G,ee,se,ne);return ae}function $(Q,G,ee){for(var te=Array(Q),ne=Math.floor(Q/2),ae=-ne;ae<=ne;ae++){te[ae+ne]=Array(Q);for(var se=-ne;se<=ne;se++)te[ae+ne][se+ne]=O(se,ae,ne,G,ee)}return te}var Z=I(22),W=I(99),K={windowSize:9,derivative:0,polynomial:3};E.exports=function(Q,G,ee){if(ee=Z({},K,ee),0==ee.windowSize%2||5>ee.windowSize||!Number.isInteger(ee.windowSize))throw new RangeError('Invalid window size (should be odd and at least 5 integer number)');if(ee.windowSize>Q.length)throw new RangeError('Window size is higher than the data length '+ee.windowSize+'>'+Q.length);if(0>ee.derivative||!Number.isInteger(ee.derivative))throw new RangeError('Derivative should be a positive integer');if(1>ee.polynomial||!Number.isInteger(ee.polynomial))throw new RangeError('Polynomial should be a positive integer');6<=ee.polynomial&&console.warn('You should not use polynomial grade higher than 5 if you are not sure that your data arises from such a model. Possible polynomial oscillation problems');var te=ee.windowSize,ne=Math.floor(te/2),ae=Q.length,se=Array(ae),oe=$(te,ee.polynomial,ee.derivative),le=0,de=!0;'[object Array]'===Object.prototype.toString.call(G)?de=!1:le=Math.pow(G,ee.derivative);for(var ue=0;ue<ne;ue++){for(var he=oe[ne-ue-1],ce=oe[ne+ue+1],ge=0,me=0,pe=0;pe<te;pe++)ge+=he[pe]*Q[pe],me+=ce[pe]*Q[ae-te+pe-1];de?(se[ne-ue-1]=ge/le,se[ae-ne+ue]=me/le):(le=R(G,ne-ue-1,ne,ee.derivative),se[ne-ue-1]=ge/le,le=R(G,ae-ne+ue,ne,ee.derivative),se[ae-ne+ue]=me/le)}for(var fe=oe[ne],ue=te,xe;ue<ae+1;ue++){xe=0;for(var pe=0;pe<te;pe++)xe+=fe[pe]*Q[pe+ue-te];de||(le=R(G,ue-ne-1,ne,ee.derivative)),se[ue-ne-1]=xe/le}return se}},function(E,D,I){'use strict';function P(T,F){return T-F}var R=I(41);D.max=function(F){for(var T=-Infinity,O=0;O<F.length;O++)for(var $=0;$<F[O].length;$++)F[O][$]>T&&(T=F[O][$]);return T},D.min=function(F){for(var T=Infinity,O=0;O<F.length;O++)for(var $=0;$<F[O].length;$++)F[O][$]<T&&(T=F[O][$]);return T},D.minMax=function(F){for(var O=Infinity,$=-Infinity,Z=0;Z<F.length;Z++)for(var W=0;W<F[Z].length;W++)F[Z][W]<O&&(O=F[Z][W]),F[Z][W]>$&&($=F[Z][W]);return{min:O,max:$}},D.entropy=function(F,O){'undefined'==typeof O&&(O=0);for(var $=0,Z=F.length,W=F[0].length,K=0;K<Z;K++)for(var Q=0;Q<W;Q++)$+=F[K][Q]*Math.log(F[K][Q]+O);return-$},D.mean=function(F,O){'undefined'==typeof O&&(O=0);var $=F.length,Z=F[0].length,W,K,Q,G;if(-1===O){for(W=[0],K=$*Z,Q=0;Q<$;Q++)for(G=0;G<Z;G++)W[0]+=F[Q][G];W[0]/=K}else if(0===O)for(W=Array(Z),K=$,G=0;G<Z;G++){for(W[G]=0,Q=0;Q<$;Q++)W[G]+=F[Q][G];W[G]/=K}else if(1===O)for(W=Array($),K=Z,G=0;G<$;G++){for(W[G]=0,Q=0;Q<Z;Q++)W[G]+=F[G][Q];W[G]/=K}else throw new Error('Invalid dimension');return W},D.sum=function(F,O){'undefined'==typeof O&&(O=0);var $=F.length,Z=F[0].length,W,K,Q;if(-1===O)for(W=[0],K=0;K<$;K++)for(Q=0;Q<Z;Q++)W[0]+=F[K][Q];else if(0===O)for(W=Array(Z),Q=0;Q<Z;Q++)for(W[Q]=0,K=0;K<$;K++)W[Q]+=F[K][Q];else if(1===O)for(W=Array($),Q=0;Q<$;Q++)for(W[Q]=0,K=0;K<Z;K++)W[Q]+=F[Q][K];else throw new Error('Invalid dimension');return W},D.product=function(F,O){'undefined'==typeof O&&(O=0);var $=F.length,Z=F[0].length,W,K,Q;if(-1===O)for(W=[1],K=0;K<$;K++)for(Q=0;Q<Z;Q++)W[0]*=F[K][Q];else if(0===O)for(W=Array(Z),Q=0;Q<Z;Q++)for(W[Q]=1,K=0;K<$;K++)W[Q]*=F[K][Q];else if(1===O)for(W=Array($),Q=0;Q<$;Q++)for(W[Q]=1,K=0;K<Z;K++)W[Q]*=F[Q][K];else throw new Error('Invalid dimension');return W},D.standardDeviation=function(F,O,$){for(var Z=D.variance(F,O,$),W=Z.length,K=0;K<W;K++)Z[K]=Math.sqrt(Z[K]);return Z},D.variance=function(F,O,$){'undefined'==typeof $&&($=!0),O=O||D.mean(F);var Z=F.length;if(0===Z)return[];for(var W=F[0].length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne=0;ne<Z;ne++)te=F[ne][Q]-O[Q],G+=te,ee+=te*te;K[Q]=$?(ee-G*G/Z)/(Z-1):(ee-G*G/Z)/Z}return K},D.median=function(F){for(var O=F.length,$=F[0].length,Z=Array($),W=0,K;W<$;W++){K=Array(O);for(var Q=0;Q<O;Q++)K[Q]=F[Q][W];K.sort(P);var G=K.length;Z[W]=0==G%2?0.5*(K[G/2]+K[G/2-1]):K[Math.floor(G/2)]}return Z},D.mode=function(F){var O=F.length,$=F[0].length,Z=Array($),W,K;for(W=0;W<$;W++){for(var Q=Array(O),G=0;G<O;G++)Q[G]=0;var ee=Array(O),te=0;for(K=0;K<O;K++){var ne=ee.indexOf(F[K][W]);0<=ne?Q[ne]++:(ee[te]=F[K][W],Q[te]=1,te++)}var ae=0,se=0;for(K=0;K<te;K++)Q[K]>ae&&(ae=Q[K],se=K);Z[W]=ee[se]}return Z},D.skewness=function(F,O){'undefined'==typeof O&&(O=!0);for(var $=D.mean(F),Z=F.length,W=$.length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne;te<Z;te++)ne=F[te][Q]-$[Q],G+=ne*ne,ee+=ne*ne*ne;var ae=G/Z,se=ee/Z,oe=se/Math.pow(ae,3/2);if(O){var le=Math.sqrt(Z*(Z-1));K[Q]=le/(Z-2)*oe}else K[Q]=oe}return K},D.kurtosis=function(F,O){'undefined'==typeof O&&(O=!0);for(var $=D.mean(F),Z=F.length,W=F[0].length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne;te<Z;te++)ne=F[te][Q]-$[Q],G+=ne*ne,ee+=ne*ne*ne*ne;var ae=G/Z,se=ee/Z;if(O){var oe=G/(Z-1),de=ee/(oe*oe);K[Q]=Z*(Z+1)/((Z-1)*(Z-2)*(Z-3))*de-3*((Z-1)*(Z-1)/((Z-2)*(Z-3)))}else K[Q]=se/(ae*ae)-3}return K},D.standardError=function(F){for(var O=F.length,$=D.standardDeviation(F),Z=$.length,W=Array(Z),K=Math.sqrt(O),Q=0;Q<Z;Q++)W[Q]=$[Q]/K;return W},D.covariance=function(F,O){return D.scatter(F,void 0,O)},D.scatter=function(F,O,$){'undefined'==typeof $&&($=0),'undefined'==typeof O&&(0===$?O=F.length-1:1==$&&(O=F[0].length-1));var Z=D.mean(F,$),W=F.length;if(0===W)return[[]];var K=F[0].length,Q,G,ee,te,ne;if(0===$){for(Q=Array(K),G=0;G<K;G++)Q[G]=Array(K);for(G=0;G<K;G++)for(ee=G;ee<K;ee++){for(te=0,ne=0;ne<W;ne++)te+=(F[ne][ee]-Z[ee])*(F[ne][G]-Z[G]);te/=O,Q[G][ee]=te,Q[ee][G]=te}}else if(1===$){for(Q=Array(W),G=0;G<W;G++)Q[G]=Array(W);for(G=0;G<W;G++)for(ee=G;ee<W;ee++){for(te=0,ne=0;ne<K;ne++)te+=(F[ee][ne]-Z[ee])*(F[G][ne]-Z[G]);te/=O,Q[G][ee]=te,Q[ee][G]=te}}else throw new Error('Invalid dimension');return Q},D.correlation=function(F){var O=D.mean(F),$=D.standardDeviation(F,!0,O),Z=D.zScores(F,O,$),W=F.length,K=F[0].length,Q,G,ee=Array(K);for(Q=0;Q<K;Q++)ee[Q]=Array(K);for(Q=0;Q<K;Q++)for(G=Q;G<K;G++){for(var te=0,ne=0,ae=Z.length;ne<ae;ne++)te+=Z[ne][G]*Z[ne][Q];te/=W-1,ee[Q][G]=te,ee[G][Q]=te}return ee},D.zScores=function(F,O,$){return O=O||D.mean(F),'undefined'==typeof $&&($=D.standardDeviation(F,!0,O)),D.standardize(D.center(F,O,!1),$,!0)},D.center=function(F,O,$){O=O||D.mean(F);var Z=F,W=F.length,K,Q,G;if(!$)for(Z=Array(W),K=0;K<W;K++)Z[K]=Array(F[K].length);for(K=0;K<W;K++){var ee=Z[K];for(Q=0,G=ee.length;Q<G;Q++)ee[Q]=F[K][Q]-O[Q]}return Z},D.standardize=function(F,O,$){'undefined'==typeof O&&(O=D.standardDeviation(F));var Z=F,W=F.length,K,Q,G;if(!$)for(Z=Array(W),K=0;K<W;K++)Z[K]=Array(F[K].length);for(K=0;K<W;K++){var ee=Z[K],te=F[K];for(Q=0,G=ee.length;Q<G;Q++)0===O[Q]||isNaN(O[Q])||(ee[Q]=te[Q]/O[Q])}return Z},D.weightedVariance=function(F,O){var $=D.mean(F),Z=F.length;if(0===Z)return[];for(var W=F[0].length,K=Array(W),Q=0;Q<W;Q++){for(var G=0,ee=0,te=0,ne=0;ne<Z;ne++){var ae=F[ne][Q]-$[Q],se=O[ne];G+=se*(ae*ae),te+=se,ee+=se*se}K[Q]=G*(te/(te*te-ee))}return K},D.weightedMean=function(F,O,$){'undefined'==typeof $&&($=0);var Z=F.length;if(0===Z)return[];var W=F[0].length,K,Q,G,ee,te,ne;if(0===$){for(K=Array(W),Q=0;Q<W;Q++)K[Q]=0;for(Q=0;Q<Z;Q++)for(ne=F[Q],te=O[Q],ee=0;ee<W;ee++)K[ee]+=ne[ee]*te}else if(1===$){for(K=Array(Z),Q=0;Q<Z;Q++)K[Q]=0;for(ee=0;ee<Z;ee++)for(ne=F[ee],te=O[ee],Q=0;Q<W;Q++)K[ee]+=ne[Q]*te}else throw new Error('Invalid dimension');var ae=R.sum(O);if(0!==ae)for(Q=0,G=K.length;Q<G;Q++)K[Q]/=ae;return K},D.weightedCovariance=function(F,O,$,Z){Z=Z||0,$=$||D.weightedMean(F,O,Z);for(var W=0,K=0,Q=0,G=O.length;Q<G;Q++)W+=O[Q],K+=O[Q]*O[Q];var ee=W/(W*W-K);return D.weightedScatter(F,O,$,ee,Z)},D.weightedScatter=function(F,O,$,Z,W){W=W||0,$=$||D.weightedMean(F,O,W),'undefined'==typeof Z&&(Z=1);var K=F.length;if(0===K)return[[]];var Q=F[0].length,G,ee,te,ne,ae;if(0===W){for(G=Array(Q),ee=0;ee<Q;ee++)G[ee]=Array(Q);for(ee=0;ee<Q;ee++)for(te=ee;te<Q;te++){for(ae=0,ne=0;ne<K;ne++)ae+=O[ne]*(F[ne][te]-$[te])*(F[ne][ee]-$[ee]);G[ee][te]=ae*Z,G[te][ee]=ae*Z}}else if(1===W){for(G=Array(K),ee=0;ee<K;ee++)G[ee]=Array(K);for(ee=0;ee<K;ee++)for(te=ee;te<K;te++){for(ae=0,ne=0;ne<Q;ne++)ae+=O[ne]*(F[te][ne]-$[te])*(F[ee][ne]-$[ee]);G[ee][te]=ae*Z,G[te][ee]=ae*Z}}else throw new Error('Invalid dimension');return G}},function(E,D,I){'use strict';function F(K){for(var Q=Array(K[0].length),G=0;G<Q.length;++G)Q[G]=Array(K.length);for(G=0;G<K.length;++G)for(var ee=0;ee<K[0].length;++ee)Q[ee][G]=K[G][ee];return Q}const W=I(3).array;E.exports={coordArrayToPoints:function(K,Q){if(0!=K.length%Q)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var G=K.length/Q,ee=Array(G),te=0,ne=0,ae;ne<K.length;ne+=Q){ae=Array(Q);for(var se=0;se<Q;++se)ae[se]=K[ne+se];ee[te]=ae,te++}return ee},coordArrayToCoordMatrix:function(K,Q){if(0!=K.length%Q)throw new RangeError('Dimensions number must be accordance with the size of the array.');for(var G=Array(Q),ee=K.length/Q,te=0;te<G.length;te++)G[te]=Array(ee);for(te=0;te<K.length;te+=Q)for(var ne=0,ae;ne<Q;++ne)ae=Math.floor(te/Q),G[ne][ae]=K[te+ne];return G},coordMatrixToCoordArray:function(K){for(var Q=Array(K.length*K[0].length),G=0,ee=0;ee<K[0].length;++ee)for(var te=0;te<K.length;++te)Q[G]=K[te][ee],++G;return Q},coordMatrixToPoints:F,pointsToCoordArray:function(K){for(var Q=Array(K.length*K[0].length),G=0,ee=0;ee<K.length;++ee)for(var te=0;te<K[0].length;++te)Q[G]=K[ee][te],++G;return Q},pointsToCoordMatrix:F,applyDotProduct:function(K,Q){var G,ee;K.length<=Q.length?(ee=K,G=Q):(ee=Q,G=K);for(var te=G.length-ee.length+1,ne=Array(te),ae=0,se;ae<te;++ae){se=0;for(var oe=0;oe<ee.length;++oe)se+=ee[oe]*G[ae+oe];ne[ae]=se}return ne},scale:function(K,Q){var G=Q.inPlace?K:Array(K.length);const ee=Q.max,te=Q.min;if('number'==typeof ee){if('number'==typeof te)for(var ne=W.minMax(K),ae=(ee-te)/(ne.max-ne.min),se=0;se<G.length;se++)G[se]=(K[se]-ne.min)*ae+te;else for(var oe=W.max(K),ae=ee/oe,se=0;se<G.length;se++)G[se]=K[se]*ae;}else if('number'==typeof te)for(var oe=W.min(K),ae=te/oe,se=0;se<G.length;se++)G[se]=K[se]*ae;return G}}},function(E,D){'use strict';function R(O,$,Z,W,K){function Q(je,we,Se,ve){return(ve-we)/(Se-je)}var G=O.length,ee=(W-Z)/(K-1),ne=Z-ee/2,ae=Array(K),se=O[1]-O[0],oe=O[O.length-1]-O[O.length-2],le=ne,de=ne+ee,ue=Number.MIN_VALUE,he=0,ce=O[0]-se,ge=0,me=0,pe=0,fe=0,xe=0,be=0,ye=0,_e=0;main:for(;;){for(;0<=ce-de;){var ke=F(0,de-ue,pe,he);if(be=me+ke,ae[_e]=(be-xe)/ee,_e++,_e===K)break main;le=de,de+=ee,xe=be}ue<=le&&le<=ce&&(ke=F(0,le-ue,pe,he),xe=me+ke),me+=F(ue,ce,pe,fe),ue=ce,he=ge,ye<G?(ce=O[ye],ge=$[ye],ye++):ye===G&&(ce+=oe,ge=0),pe=Q(ue,he,ce,ge),fe=-pe*ue+he}return ae}function T(O,$,Z,W,K){var Q=O.length,G=(W-Z)/(K-1),te=O[O.length-1]-O[O.length-2],ne=Z-G/2,ae=Array(K),se=ne,oe=ne+G,le=-Number.MAX_VALUE,de=0,ue=O[0],he=$[0],ce=0,ge=!0,me=0,pe=0,fe=1,xe=0;main:for(;;){if(le>=ue)throw new Error('x must be an increasing serie');for(;0<le-oe;){if(ge&&(pe++,ge=!1),ae[xe]=0>=pe?0:me/pe,xe++,xe===K)break main;se=oe,oe+=G,me=0,pe=0}le>se&&(me+=de,pe++),(le==-Number.MAX_VALUE||1<ce)&&pe--,le=ue,de=he,fe<Q?(ue=O[fe],he=$[fe],fe++):(ue+=te,he=0,ce++)}return ae}function F(O,$,Z,W){return 0.5*Z*$*$+W*$-(0.5*Z*O*O+W*O)}D.getEquallySpacedData=function(O,$,Z){1<O.length&&O[0]>O[1]&&(O=O.slice().reverse(),$=$.slice().reverse());var W=O.length;if(W!==$.length)throw new RangeError('the x and y vector doesn\'t have the same size.');Z===void 0&&(Z={});var K=Z.from===void 0?O[0]:Z.from;if(isNaN(K)||!isFinite(K))throw new RangeError('\'From\' value must be a number');var Q=Z.to===void 0?O[O.length-1]:Z.to;if(isNaN(Q)||!isFinite(Q))throw new RangeError('\'To\' value must be a number');var G=K>Q;if(G){var ee=K;K=Q,Q=ee}var te=Z.numberOfPoints===void 0?100:Z.numberOfPoints;if(isNaN(te)||!isFinite(te))throw new RangeError('\'Number of points\' value must be a number');if(1>te)throw new RangeError('the number of point must be higher than 1');var ne='slot'===Z.variant?'slot':'smooth',ae='slot'==ne?T(O,$,K,Q,te):R(O,$,K,Q,te);return G?ae.reverse():ae},D.integral=F},function(E,D,I){E.exports=D=I(103),D.getEquallySpacedData=I(104).getEquallySpacedData,D.SNV=I(106).SNV,D.binarySearch=I(74)},function(E,D,I){'use strict';D.SNV=function(T){for(var F=R.mean(T),O=R.standardDeviation(T),$=T.slice(),Z=0;Z<T.length;Z++)$[Z]=($[Z]-F)/O;return $};var R=I(3).array},function(E,D,I){'use strict';function P(T){if(!(this instanceof P))return new P(T);if(T=R.checkMatrix(T),!T.isSymmetric())throw new Error('Matrix is not symmetric');var F=T,O=F.rows,$=new R(O,O),Z=!0,W,K,Q;for(K=0;K<O;K++){var G=$[K],ee=0;for(Q=0;Q<K;Q++){var te=$[Q],ne=0;for(W=0;W<Q;W++)ne+=te[W]*G[W];G[Q]=ne=(F[K][Q]-ne)/$[Q][Q],ee+=ne*ne}for(ee=F[K][K]-ee,Z&=0<ee,$[K][K]=Math.sqrt(Math.max(ee,0)),Q=K+1;Q<O;Q++)$[K][Q]=0}if(!Z)throw new Error('Matrix is not positive definite');this.L=$}var R=I(4);P.prototype={get lowerTriangularMatrix(){return this.L},solve:function(T){T=R.checkMatrix(T);var F=this.L,O=F.rows;if(T.rows!==O)throw new Error('Matrix dimensions do not match');var $=T.columns,Z=T.clone(),W,K,Q;for(Q=0;Q<O;Q++)for(K=0;K<$;K++){for(W=0;W<Q;W++)Z[Q][K]-=Z[W][K]*F[Q][W];Z[Q][K]/=F[Q][Q]}for(Q=O-1;0<=Q;Q--)for(K=0;K<$;K++){for(W=Q+1;W<O;W++)Z[Q][K]-=Z[W][K]*F[W][Q];Z[Q][K]/=F[Q][Q]}return Z}},E.exports=P},function(E,D,I){'use strict';function P(ee,te){if(te=Object.assign({},G,te),!(this instanceof P))return new P(ee,te);if(ee=Z.checkMatrix(ee),!ee.isSquare())throw new Error('Matrix is not a square matrix');var ne=ee.columns,ae=Q(ne,ne,0),se=Array(ne),oe=Array(ne),le=ee,he=!1,de,ue;if(he=!!te.assumeSymmetric||ee.isSymmetric(),he){for(de=0;de<ne;de++)for(ue=0;ue<ne;ue++)ae[de][ue]=le.get(de,ue);R(ne,oe,se,ae),T(ne,oe,se,ae)}else{var ce=Q(ne,ne,0),ge=Array(ne);for(ue=0;ue<ne;ue++)for(de=0;de<ne;de++)ce[de][ue]=le.get(de,ue);F(ne,ce,ge,ae),O(ne,oe,se,ae,ce)}this.n=ne,this.e=oe,this.d=se,this.V=ae}function R(ee,te,ne,ae){var se,oe,le,de,ue,he,ce,ge;for(ue=0;ue<ee;ue++)ne[ue]=ae[ee-1][ue];for(de=ee-1;0<de;de--){for(ge=0,le=0,he=0;he<de;he++)ge+=Math.abs(ne[he]);if(0===ge)for(te[de]=ne[de-1],ue=0;ue<de;ue++)ne[ue]=ae[de-1][ue],ae[de][ue]=0,ae[ue][de]=0;else{for(he=0;he<de;he++)ne[he]/=ge,le+=ne[he]*ne[he];for(se=ne[de-1],oe=Math.sqrt(le),0<se&&(oe=-oe),te[de]=ge*oe,le-=se*oe,ne[de-1]=se-oe,ue=0;ue<de;ue++)te[ue]=0;for(ue=0;ue<de;ue++){for(se=ne[ue],ae[ue][de]=se,oe=te[ue]+ae[ue][ue]*se,he=ue+1;he<=de-1;he++)oe+=ae[he][ue]*ne[he],te[he]+=ae[he][ue]*se;te[ue]=oe}for(se=0,ue=0;ue<de;ue++)te[ue]/=le,se+=te[ue]*ne[ue];for(ce=se/(le+le),ue=0;ue<de;ue++)te[ue]-=ce*ne[ue];for(ue=0;ue<de;ue++){for(se=ne[ue],oe=te[ue],he=ue;he<=de-1;he++)ae[he][ue]-=se*te[he]+oe*ne[he];ne[ue]=ae[de-1][ue],ae[de][ue]=0}}ne[de]=le}for(de=0;de<ee-1;de++){if(ae[ee-1][de]=ae[de][de],ae[de][de]=1,le=ne[de+1],0!==le){for(he=0;he<=de;he++)ne[he]=ae[he][de+1]/le;for(ue=0;ue<=de;ue++){for(oe=0,he=0;he<=de;he++)oe+=ae[he][de+1]*ae[he][ue];for(he=0;he<=de;he++)ae[he][ue]-=oe*ne[he]}}for(he=0;he<=de;he++)ae[he][de+1]=0}for(ue=0;ue<ee;ue++)ne[ue]=ae[ee-1][ue],ae[ee-1][ue]=0;ae[ee-1][ee-1]=1,te[0]=0}function T(ee,te,ne,ae){var se,oe,le,de,ue,he,ce,ge,me,pe,fe,xe,be,ye,_e,ke,je;for(le=1;le<ee;le++)te[le-1]=te[le];te[ee-1]=0;var we=0,Se=0,ve=Math.pow(2,-52);for(he=0;he<ee;he++){for(Se=Math.max(Se,Math.abs(ne[he])+Math.abs(te[he])),ce=he;ce<ee&&!(Math.abs(te[ce])<=ve*Se);)ce++;if(ce>he){je=0;do{for(++je,se=ne[he],ge=(ne[he+1]-se)/(2*te[he]),me=K(ge,1),0>ge&&(me=-me),ne[he]=te[he]/(ge+me),ne[he+1]=te[he]*(ge+me),pe=ne[he+1],oe=se-ne[he],le=he+2;le<ee;le++)ne[le]-=oe;for(we+=oe,ge=ne[ce],fe=1,xe=fe,be=fe,ye=te[he+1],_e=0,ke=0,le=ce-1;le>=he;le--)for(be=xe,xe=fe,ke=_e,se=fe*te[le],oe=fe*ge,me=K(ge,te[le]),te[le+1]=_e*me,_e=te[le]/me,fe=ge/me,ge=fe*ne[le]-_e*se,ne[le+1]=oe+_e*(fe*se+_e*ne[le]),ue=0;ue<ee;ue++)oe=ae[ue][le+1],ae[ue][le+1]=_e*ae[ue][le]+fe*oe,ae[ue][le]=fe*ae[ue][le]-_e*oe;ge=-_e*ke*be*ye*te[he]/pe,te[he]=_e*ge,ne[he]=fe*ge}while(Math.abs(te[he])>ve*Se)}ne[he]+=we,te[he]=0}for(le=0;le<ee-1;le++){for(ue=le,ge=ne[le],de=le+1;de<ee;de++)ne[de]<ge&&(ue=de,ge=ne[de]);if(ue!==le)for(ne[ue]=ne[le],ne[le]=ge,de=0;de<ee;de++)ge=ae[de][le],ae[de][le]=ae[de][ue],ae[de][ue]=ge}}function F(ee,te,ne,ae){var se=0,oe=ee-1,le,de,ue,he,ce,ge,me;for(ge=se+1;ge<=oe-1;ge++){for(me=0,he=ge;he<=oe;he++)me+=Math.abs(te[he][ge-1]);if(0!==me){for(ue=0,he=oe;he>=ge;he--)ne[he]=te[he][ge-1]/me,ue+=ne[he]*ne[he];for(de=Math.sqrt(ue),0<ne[ge]&&(de=-de),ue-=ne[ge]*de,ne[ge]-=de,ce=ge;ce<ee;ce++){for(le=0,he=oe;he>=ge;he--)le+=ne[he]*te[he][ce];for(le/=ue,he=ge;he<=oe;he++)te[he][ce]-=le*ne[he]}for(he=0;he<=oe;he++){for(le=0,ce=oe;ce>=ge;ce--)le+=ne[ce]*te[he][ce];for(le/=ue,ce=ge;ce<=oe;ce++)te[he][ce]-=le*ne[ce]}ne[ge]=me*ne[ge],te[ge][ge-1]=me*de}}for(he=0;he<ee;he++)for(ce=0;ce<ee;ce++)ae[he][ce]=he===ce?1:0;for(ge=oe-1;ge>=se+1;ge--)if(0!==te[ge][ge-1]){for(he=ge+1;he<=oe;he++)ne[he]=te[he][ge-1];for(ce=ge;ce<=oe;ce++){for(de=0,he=ge;he<=oe;he++)de+=ne[he]*ae[he][ce];for(de=de/ne[ge]/te[ge][ge-1],he=ge;he<=oe;he++)ae[he][ce]+=de*ne[he]}}}function O(ee,te,ne,ae,se){var oe=ee-1,le=0,de=ee-1,ue=Math.pow(2,-52),he=0,ce=0,ge=0,me=0,pe=0,fe=0,xe=0,be=0,ye,_e,ke,je,we,Se,ve,Ee,De,Ce,Ae,Ie,Pe,Re,Te;for(ye=0;ye<ee;ye++)for((ye<le||ye>de)&&(ne[ye]=se[ye][ye],te[ye]=0),_e=Math.max(ye-1,0);_e<ee;_e++)ce+=Math.abs(se[ye][_e]);for(;oe>=le;){for(je=oe;je>le&&(fe=Math.abs(se[je-1][je-1])+Math.abs(se[je][je]),0==fe&&(fe=ce),!(Math.abs(se[je][je-1])<ue*fe));)je--;if(je===oe)se[oe][oe]+=he,ne[oe]=se[oe][oe],te[oe]=0,oe--,be=0;else if(je===oe-1){if(ve=se[oe][oe-1]*se[oe-1][oe],ge=(se[oe-1][oe-1]-se[oe][oe])/2,me=ge*ge+ve,xe=Math.sqrt(Math.abs(me)),se[oe][oe]+=he,se[oe-1][oe-1]=se[oe-1][oe-1]+he,Ee=se[oe][oe],0<=me){for(xe=0<=ge?ge+xe:ge-xe,ne[oe-1]=Ee+xe,ne[oe]=ne[oe-1],0!=xe&&(ne[oe]=Ee-ve/xe),te[oe-1]=0,te[oe]=0,Ee=se[oe][oe-1],fe=Math.abs(Ee)+Math.abs(xe),ge=Ee/fe,me=xe/fe,pe=Math.sqrt(ge*ge+me*me),ge/=pe,me/=pe,_e=oe-1;_e<ee;_e++)xe=se[oe-1][_e],se[oe-1][_e]=me*xe+ge*se[oe][_e],se[oe][_e]=me*se[oe][_e]-ge*xe;for(ye=0;ye<=oe;ye++)xe=se[ye][oe-1],se[ye][oe-1]=me*xe+ge*se[ye][oe],se[ye][oe]=me*se[ye][oe]-ge*xe;for(ye=le;ye<=de;ye++)xe=ae[ye][oe-1],ae[ye][oe-1]=me*xe+ge*ae[ye][oe],ae[ye][oe]=me*ae[ye][oe]-ge*xe}else ne[oe-1]=Ee+ge,ne[oe]=Ee+ge,te[oe-1]=xe,te[oe]=-xe;oe-=2,be=0}else{if(Ee=se[oe][oe],De=0,ve=0,je<oe&&(De=se[oe-1][oe-1],ve=se[oe][oe-1]*se[oe-1][oe]),10==be){for(he+=Ee,ye=le;ye<=oe;ye++)se[ye][ye]-=Ee;fe=Math.abs(se[oe][oe-1])+Math.abs(se[oe-1][oe-2]),Ee=De=0.75*fe,ve=-0.4375*fe*fe}if(30==be&&(fe=(De-Ee)/2,fe=fe*fe+ve,0<fe)){for(fe=Math.sqrt(fe),De<Ee&&(fe=-fe),fe=Ee-ve/((De-Ee)/2+fe),ye=le;ye<=oe;ye++)se[ye][ye]-=fe;he+=fe,Ee=De=ve=0.964}for(++be,we=oe-2;we>=je&&(xe=se[we][we],pe=Ee-xe,fe=De-xe,ge=(pe*fe-ve)/se[we+1][we]+se[we][we+1],me=se[we+1][we+1]-xe-pe-fe,pe=se[we+2][we+1],fe=Math.abs(ge)+Math.abs(me)+Math.abs(pe),ge/=fe,me/=fe,pe/=fe,we!=je)&&!(Math.abs(se[we][we-1])*(Math.abs(me)+Math.abs(pe))<ue*(Math.abs(ge)*(Math.abs(se[we-1][we-1])+Math.abs(xe)+Math.abs(se[we+1][we+1]))));)we--;for(ye=we+2;ye<=oe;ye++)se[ye][ye-2]=0,ye>we+2&&(se[ye][ye-3]=0);for(ke=we;ke<=oe-1&&(Re=ke!==oe-1,ke!=we&&(ge=se[ke][ke-1],me=se[ke+1][ke-1],pe=Re?se[ke+2][ke-1]:0,Ee=Math.abs(ge)+Math.abs(me)+Math.abs(pe),0!==Ee&&(ge/=Ee,me/=Ee,pe/=Ee)),0!==Ee);ke++)if(fe=Math.sqrt(ge*ge+me*me+pe*pe),0>ge&&(fe=-fe),0!==fe){for(ke==we?je!==we&&(se[ke][ke-1]=-se[ke][ke-1]):se[ke][ke-1]=-fe*Ee,ge+=fe,Ee=ge/fe,De=me/fe,xe=pe/fe,me/=ge,pe/=ge,_e=ke;_e<ee;_e++)ge=se[ke][_e]+me*se[ke+1][_e],Re&&(ge+=pe*se[ke+2][_e],se[ke+2][_e]=se[ke+2][_e]-ge*xe),se[ke][_e]-=ge*Ee,se[ke+1][_e]=se[ke+1][_e]-ge*De;for(ye=0;ye<=Math.min(oe,ke+3);ye++)ge=Ee*se[ye][ke]+De*se[ye][ke+1],Re&&(ge+=xe*se[ye][ke+2],se[ye][ke+2]=se[ye][ke+2]-ge*pe),se[ye][ke]-=ge,se[ye][ke+1]=se[ye][ke+1]-ge*me;for(ye=le;ye<=de;ye++)ge=Ee*ae[ye][ke]+De*ae[ye][ke+1],Re&&(ge+=xe*ae[ye][ke+2],ae[ye][ke+2]=ae[ye][ke+2]-ge*pe),ae[ye][ke]-=ge,ae[ye][ke+1]=ae[ye][ke+1]-ge*me}}}if(0!==ce){for(oe=ee-1;0<=oe;oe--)if(ge=ne[oe],me=te[oe],0===me)for(je=oe,se[oe][oe]=1,ye=oe-1;0<=ye;ye--){for(ve=se[ye][ye]-ge,pe=0,_e=je;_e<=oe;_e++)pe+=se[ye][_e]*se[_e][oe];if(0>te[ye])xe=ve,fe=pe;else if(je=ye,0===te[ye]?se[ye][oe]=0===ve?-pe/(ue*ce):-pe/ve:(Ee=se[ye][ye+1],De=se[ye+1][ye],me=(ne[ye]-ge)*(ne[ye]-ge)+te[ye]*te[ye],Se=(Ee*fe-xe*pe)/me,se[ye][oe]=Se,se[ye+1][oe]=Math.abs(Ee)>Math.abs(xe)?(-pe-ve*Se)/Ee:(-fe-De*Se)/xe),Se=Math.abs(se[ye][oe]),1<ue*Se*Se)for(_e=ye;_e<=oe;_e++)se[_e][oe]/=Se}else if(0>me)for(je=oe-1,Math.abs(se[oe][oe-1])>Math.abs(se[oe-1][oe])?(se[oe-1][oe-1]=me/se[oe][oe-1],se[oe-1][oe]=-(se[oe][oe]-ge)/se[oe][oe-1]):(Te=$(0,-se[oe-1][oe],se[oe-1][oe-1]-ge,me),se[oe-1][oe-1]=Te[0],se[oe-1][oe]=Te[1]),se[oe][oe-1]=0,se[oe][oe]=1,ye=oe-2;0<=ye;ye--){for(Ce=0,Ae=0,_e=je;_e<=oe;_e++)Ce+=se[ye][_e]*se[_e][oe-1],Ae+=se[ye][_e]*se[_e][oe];if(ve=se[ye][ye]-ge,0>te[ye])xe=ve,pe=Ce,fe=Ae;else if(je=ye,0===te[ye]?(Te=$(-Ce,-Ae,ve,me),se[ye][oe-1]=Te[0],se[ye][oe]=Te[1]):(Ee=se[ye][ye+1],De=se[ye+1][ye],Ie=(ne[ye]-ge)*(ne[ye]-ge)+te[ye]*te[ye]-me*me,Pe=2*(ne[ye]-ge)*me,0===Ie&&0===Pe&&(Ie=ue*ce*(Math.abs(ve)+Math.abs(me)+Math.abs(Ee)+Math.abs(De)+Math.abs(xe))),Te=$(Ee*pe-xe*Ce+me*Ae,Ee*fe-xe*Ae-me*Ce,Ie,Pe),se[ye][oe-1]=Te[0],se[ye][oe]=Te[1],Math.abs(Ee)>Math.abs(xe)+Math.abs(me)?(se[ye+1][oe-1]=(-Ce-ve*se[ye][oe-1]+me*se[ye][oe])/Ee,se[ye+1][oe]=(-Ae-ve*se[ye][oe]-me*se[ye][oe-1])/Ee):(Te=$(-pe-De*se[ye][oe-1],-fe-De*se[ye][oe],xe,me),se[ye+1][oe-1]=Te[0],se[ye+1][oe]=Te[1])),Se=Math.max(Math.abs(se[ye][oe-1]),Math.abs(se[ye][oe])),1<ue*Se*Se)for(_e=ye;_e<=oe;_e++)se[_e][oe-1]=se[_e][oe-1]/Se,se[_e][oe]/=Se}for(ye=0;ye<ee;ye++)if(ye<le||ye>de)for(_e=ye;_e<ee;_e++)ae[ye][_e]=se[ye][_e];for(_e=ee-1;_e>=le;_e--)for(ye=le;ye<=de;ye++){for(xe=0,ke=le;ke<=Math.min(_e,de);ke++)xe+=ae[ye][ke]*se[ke][_e];ae[ye][_e]=xe}}}function $(ee,te,ne,ae){var se,oe;return Math.abs(ne)>Math.abs(ae)?(se=ae/ne,oe=ne+se*ae,[(ee+se*te)/oe,(te-se*ee)/oe]):(se=ne/ae,oe=ae+se*ne,[(se*ee+te)/oe,(se*te-ee)/oe])}const Z=I(4),W=I(15),K=W.hypotenuse,Q=W.getFilled2DArray,G={assumeSymmetric:!1};P.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return Z.isMatrix(this.V)||(this.V=new Z(this.V)),this.V},get diagonalMatrix(){var ee=this.n,te=this.e,ne=this.d,ae=new Z(ee,ee),se,oe;for(se=0;se<ee;se++){for(oe=0;oe<ee;oe++)ae[se][oe]=0;ae[se][se]=ne[se],0<te[se]?ae[se][se+1]=te[se]:0>te[se]&&(ae[se][se-1]=te[se])}return ae}},E.exports=P},function(E,D,I){'use strict';function P(T){if(!(this instanceof P))return new P(T);T=R.checkMatrix(T);var F=T.clone(),O=F.rows,$=F.columns,Z=Array(O),W=1,K,Q,G,ee,te,ne,ae,se,oe,le;for(K=0;K<O;K++)Z[K]=K;for(oe=Array(O),Q=0;Q<$;Q++){for(K=0;K<O;K++)oe[K]=F[K][Q];for(K=0;K<O;K++){for(se=F[K],le=Math.min(K,Q),te=0,G=0;G<le;G++)te+=se[G]*oe[G];se[Q]=oe[K]-=te}for(ee=Q,K=Q+1;K<O;K++)Math.abs(oe[K])>Math.abs(oe[ee])&&(ee=K);if(ee!==Q){for(G=0;G<$;G++)ne=F[ee][G],F[ee][G]=F[Q][G],F[Q][G]=ne;ae=Z[ee],Z[ee]=Z[Q],Z[Q]=ae,W=-W}if(Q<O&&0!==F[Q][Q])for(K=Q+1;K<O;K++)F[K][Q]/=F[Q][Q]}this.LU=F,this.pivotVector=Z,this.pivotSign=W}var R=I(4);P.prototype={isSingular:function(){for(var T=this.LU,F=T.columns,O=0;O<F;O++)if(0===T[O][O])return!0;return!1},get determinant(){var T=this.LU;if(!T.isSquare())throw new Error('Matrix must be square');for(var F=this.pivotSign,O=T.columns,$=0;$<O;$++)F*=T[$][$];return F},get lowerTriangularMatrix(){for(var T=this.LU,F=T.rows,O=T.columns,$=new R(F,O),Z=0;Z<F;Z++)for(var W=0;W<O;W++)$[Z][W]=Z>W?T[Z][W]:Z===W?1:0;return $},get upperTriangularMatrix(){for(var T=this.LU,F=T.rows,O=T.columns,$=new R(F,O),Z=0;Z<F;Z++)for(var W=0;W<O;W++)$[Z][W]=Z<=W?T[Z][W]:0;return $},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(T){T=R.checkMatrix(T);var F=this.LU,O=F.rows;if(O!==T.rows)throw new Error('Invalid matrix dimensions');if(this.isSingular())throw new Error('LU matrix is singular');var $=T.columns,Z=T.subMatrixRow(this.pivotVector,0,$-1),W=F.columns,K,Q,G;for(G=0;G<W;G++)for(K=G+1;K<W;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*F[K][G];for(G=W-1;0<=G;G--){for(Q=0;Q<$;Q++)Z[G][Q]/=F[G][G];for(K=0;K<G;K++)for(Q=0;Q<$;Q++)Z[K][Q]-=Z[G][Q]*F[K][G]}return Z}},E.exports=P},function(E,D,I){'use strict';function P(F){if(!(this instanceof P))return new P(F);F=R.checkMatrix(F);var O=F.clone(),$=F.rows,Z=F.columns,W=Array(Z),K,Q,G,ee;for(G=0;G<Z;G++){var te=0;for(K=G;K<$;K++)te=T(te,O[K][G]);if(0!==te){for(0>O[G][G]&&(te=-te),K=G;K<$;K++)O[K][G]/=te;for(O[G][G]+=1,Q=G+1;Q<Z;Q++){for(ee=0,K=G;K<$;K++)ee+=O[K][G]*O[K][Q];for(ee=-ee/O[G][G],K=G;K<$;K++)O[K][Q]+=ee*O[K][G]}}W[G]=-te}this.QR=O,this.Rdiag=W}var R=I(4),T=I(15).hypotenuse;P.prototype={solve:function(F){F=R.checkMatrix(F);var O=this.QR,$=O.rows;if(F.rows!==$)throw new Error('Matrix row dimensions must agree');if(!this.isFullRank())throw new Error('Matrix is rank deficient');var Z=F.columns,W=F.clone(),K=O.columns,Q,G,ee,te;for(ee=0;ee<K;ee++)for(G=0;G<Z;G++){for(te=0,Q=ee;Q<$;Q++)te+=O[Q][ee]*W[Q][G];for(te=-te/O[ee][ee],Q=ee;Q<$;Q++)W[Q][G]+=te*O[Q][ee]}for(ee=K-1;0<=ee;ee--){for(G=0;G<Z;G++)W[ee][G]/=this.Rdiag[ee];for(Q=0;Q<ee;Q++)for(G=0;G<Z;G++)W[Q][G]-=W[ee][G]*O[Q][ee]}return W.subMatrix(0,K-1,0,Z-1)},isFullRank:function(){for(var F=this.QR.columns,O=0;O<F;O++)if(0===this.Rdiag[O])return!1;return!0},get upperTriangularMatrix(){var F=this.QR,O=F.columns,$=new R(O,O),Z,W;for(Z=0;Z<O;Z++)for(W=0;W<O;W++)$[Z][W]=Z<W?F[Z][W]:Z===W?this.Rdiag[Z]:0;return $},get orthogonalMatrix(){var F=this.QR,O=F.rows,$=F.columns,Z=new R(O,$),W,K,Q,G;for(Q=$-1;0<=Q;Q--){for(W=0;W<O;W++)Z[W][Q]=0;for(Z[Q][Q]=1,K=Q;K<$;K++)if(0!==F[Q][Q]){for(G=0,W=Q;W<O;W++)G+=F[W][Q]*Z[W][K];for(G=-G/F[Q][Q],W=Q;W<O;W++)Z[W][K]+=G*F[W][Q]}}return Z}},E.exports=P},function(E,D,I){'use strict';function P($,Z){if(!(this instanceof P))return new P($,Z);$=R.checkMatrix($),Z=Z||{};var W=$.rows,K=$.columns,Q=Math.min(W,K),G=!0,ee=!0;!1===Z.computeLeftSingularVectors&&(G=!1),!1===Z.computeRightSingularVectors&&(ee=!1);var te=!0===Z.autoTranspose,ne=!1,ae;if(!(W<K))ae=$.clone();else if(!te)ae=$.clone(),console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');else{ae=$.transpose(),W=ae.rows,K=ae.columns,ne=!0;var se=G;G=ee,ee=se}var oe=Array(Math.min(W+1,K)),le=O(W,Q,0),de=O(K,K,0),ue=Array(K),he=Array(W),ce=Math.min(W-1,K),ge=Math.max(0,Math.min(K-2,W)),me,pe,fe,xe,be,ye,_e,ke,je,we,Se,ve,Ee,De,Ce,Ae,Ie,Pe,Re,Te,Fe;for(fe=0,we=Math.max(ce,ge);fe<we;fe++){if(fe<ce){for(oe[fe]=0,me=fe;me<W;me++)oe[fe]=F(oe[fe],ae[me][fe]);if(0!==oe[fe]){for(0>ae[fe][fe]&&(oe[fe]=-oe[fe]),me=fe;me<W;me++)ae[me][fe]/=oe[fe];ae[fe][fe]+=1}oe[fe]=-oe[fe]}for(pe=fe+1;pe<K;pe++){if(fe<ce&&0!==oe[fe]){for(be=0,me=fe;me<W;me++)be+=ae[me][fe]*ae[me][pe];for(be=-be/ae[fe][fe],me=fe;me<W;me++)ae[me][pe]+=be*ae[me][fe]}ue[pe]=ae[fe][pe]}if(G&&fe<ce)for(me=fe;me<W;me++)le[me][fe]=ae[me][fe];if(fe<ge){for(ue[fe]=0,me=fe+1;me<K;me++)ue[fe]=F(ue[fe],ue[me]);if(0!==ue[fe]){for(0>ue[fe+1]&&(ue[fe]=-ue[fe]),me=fe+1;me<K;me++)ue[me]/=ue[fe];ue[fe+1]+=1}if(ue[fe]=-ue[fe],fe+1<W&&0!==ue[fe]){for(me=fe+1;me<W;me++)he[me]=0;for(pe=fe+1;pe<K;pe++)for(me=fe+1;me<W;me++)he[me]+=ue[pe]*ae[me][pe];for(pe=fe+1;pe<K;pe++)for(be=-ue[pe]/ue[fe+1],me=fe+1;me<W;me++)ae[me][pe]+=be*he[me]}if(ee)for(me=fe+1;me<K;me++)de[me][fe]=ue[me]}}if(xe=Math.min(K,W+1),ce<K&&(oe[ce]=ae[ce][ce]),W<xe&&(oe[xe-1]=0),ge+1<xe&&(ue[ge]=ae[ge][xe-1]),ue[xe-1]=0,G){for(pe=ce;pe<Q;pe++){for(me=0;me<W;me++)le[me][pe]=0;le[pe][pe]=1}for(fe=ce-1;0<=fe;fe--)if(0!==oe[fe]){for(pe=fe+1;pe<Q;pe++){for(be=0,me=fe;me<W;me++)be+=le[me][fe]*le[me][pe];for(be=-be/le[fe][fe],me=fe;me<W;me++)le[me][pe]+=be*le[me][fe]}for(me=fe;me<W;me++)le[me][fe]=-le[me][fe];for(le[fe][fe]=1+le[fe][fe],me=0;me<fe-1;me++)le[me][fe]=0}else{for(me=0;me<W;me++)le[me][fe]=0;le[fe][fe]=1}}if(ee)for(fe=K-1;0<=fe;fe--){if(fe<ge&&0!==ue[fe])for(pe=fe+1;pe<K;pe++){for(be=0,me=fe+1;me<K;me++)be+=de[me][fe]*de[me][pe];for(be=-be/de[fe+1][fe],me=fe+1;me<K;me++)de[me][pe]+=be*de[me][fe]}for(me=0;me<K;me++)de[me][fe]=0;de[fe][fe]=1}for(var ze=xe-1,Me=0,Xe=Math.pow(2,-52);0<xe;){for(fe=xe-2;-1<=fe&&-1!==fe;fe--)if(Math.abs(ue[fe])<=Xe*(Math.abs(oe[fe])+Math.abs(oe[fe+1]))){ue[fe]=0;break}if(fe===xe-2)Se=4;else{for(ye=xe-1;ye>=fe&&ye!==fe;ye--)if(be=(ye===xe?0:Math.abs(ue[ye]))+(ye===fe+1?0:Math.abs(ue[ye-1])),Math.abs(oe[ye])<=Xe*be){oe[ye]=0;break}ye===fe?Se=3:ye===xe-1?Se=1:(Se=2,fe=ye)}switch(fe++,Se){case 1:{for(_e=ue[xe-2],ue[xe-2]=0,pe=xe-2;pe>=fe;pe--)if(be=F(oe[pe],_e),ke=oe[pe]/be,je=_e/be,oe[pe]=be,pe!==fe&&(_e=-je*ue[pe-1],ue[pe-1]=ke*ue[pe-1]),ee)for(me=0;me<K;me++)be=ke*de[me][pe]+je*de[me][xe-1],de[me][xe-1]=-je*de[me][pe]+ke*de[me][xe-1],de[me][pe]=be;break}case 2:{for(_e=ue[fe-1],ue[fe-1]=0,pe=fe;pe<xe;pe++)if(be=F(oe[pe],_e),ke=oe[pe]/be,je=_e/be,oe[pe]=be,_e=-je*ue[pe],ue[pe]=ke*ue[pe],G)for(me=0;me<W;me++)be=ke*le[me][pe]+je*le[me][fe-1],le[me][fe-1]=-je*le[me][pe]+ke*le[me][fe-1],le[me][pe]=be;break}case 3:{for(ve=Math.max(Math.max(Math.max(Math.max(Math.abs(oe[xe-1]),Math.abs(oe[xe-2])),Math.abs(ue[xe-2])),Math.abs(oe[fe])),Math.abs(ue[fe])),Ee=oe[xe-1]/ve,De=oe[xe-2]/ve,Ce=ue[xe-2]/ve,Ae=oe[fe]/ve,Ie=ue[fe]/ve,Pe=((De+Ee)*(De-Ee)+Ce*Ce)/2,Re=Ee*Ce*(Ee*Ce),Te=0,(0!==Pe||0!==Re)&&(Te=Math.sqrt(Pe*Pe+Re),0>Pe&&(Te=-Te),Te=Re/(Pe+Te)),_e=(Ae+Ee)*(Ae-Ee)+Te,Fe=Ae*Ie,pe=fe;pe<xe-1;pe++){if(be=F(_e,Fe),ke=_e/be,je=Fe/be,pe!==fe&&(ue[pe-1]=be),_e=ke*oe[pe]+je*ue[pe],ue[pe]=ke*ue[pe]-je*oe[pe],Fe=je*oe[pe+1],oe[pe+1]=ke*oe[pe+1],ee)for(me=0;me<K;me++)be=ke*de[me][pe]+je*de[me][pe+1],de[me][pe+1]=-je*de[me][pe]+ke*de[me][pe+1],de[me][pe]=be;if(be=F(_e,Fe),ke=_e/be,je=Fe/be,oe[pe]=be,_e=ke*ue[pe]+je*oe[pe+1],oe[pe+1]=-je*ue[pe]+ke*oe[pe+1],Fe=je*ue[pe+1],ue[pe+1]=ke*ue[pe+1],G&&pe<W-1)for(me=0;me<W;me++)be=ke*le[me][pe]+je*le[me][pe+1],le[me][pe+1]=-je*le[me][pe]+ke*le[me][pe+1],le[me][pe]=be}ue[xe-2]=_e,++Me;break}case 4:{if(0>=oe[fe]&&(oe[fe]=0>oe[fe]?-oe[fe]:0,ee))for(me=0;me<=ze;me++)de[me][fe]=-de[me][fe];for(;fe<ze&&!(oe[fe]>=oe[fe+1]);){if(be=oe[fe],oe[fe]=oe[fe+1],oe[fe+1]=be,ee&&fe<K-1)for(me=0;me<K;me++)be=de[me][fe+1],de[me][fe+1]=de[me][fe],de[me][fe]=be;if(G&&fe<W-1)for(me=0;me<W;me++)be=le[me][fe+1],le[me][fe+1]=le[me][fe],le[me][fe]=be;fe++}Me=0,xe--;break}}}if(ne){var Ne=de;de=le,le=Ne}this.m=W,this.n=K,this.s=oe,this.U=le,this.V=de}var R=I(4),T=I(15),F=T.hypotenuse,O=T.getFilled2DArray;P.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var $=Math.pow(2,-52),Z=Math.max(this.m,this.n)*this.s[0]*$,W=0,K=this.s,Q=0,G=K.length;Q<G;Q++)K[Q]>Z&&W++;return W},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return R.isMatrix(this.U)||(this.U=new R(this.U)),this.U},get rightSingularVectors(){return R.isMatrix(this.V)||(this.V=new R(this.V)),this.V},get diagonalMatrix(){return R.diag(this.s)},solve:function($){var W=this.threshold,K=this.s.length,Q=R.zeros(K,K),G;for(G=0;G<K;G++)Q[G][G]=Math.abs(this.s[G])<=W?0:1/this.s[G];var ee=this.U,te=this.rightSingularVectors,ne=te.mmul(Q),ae=te.rows,se=ee.length,oe=R.zeros(ae,se),le,de,ue;for(G=0;G<ae;G++)for(le=0;le<se;le++){for(ue=0,de=0;de<K;de++)ue+=ne[G][de]*ee[le][de];oe[G][le]=ue}return oe.mmul($)},solveForDiagonal:function($){return this.solve(R.diag($))},inverse:function(){var $=this.V,Z=this.threshold,W=$.length,K=$[0].length,Q=new R(W,this.s.length),G,ee;for(G=0;G<W;G++)for(ee=0;ee<K;ee++)Q[G][ee]=Math.abs(this.s[ee])>Z?$[G][ee]/this.s[ee]:0;var te=this.U,ne=te.length,ae=te[0].length,se=new R(W,ne),oe,le;for(G=0;G<W;G++)for(ee=0;ee<ne;ee++){for(le=0,oe=0;oe<ae;oe++)le+=Q[G][oe]*te[ee][oe];se[G][ee]=le}return se}},E.exports=P},function(E,D,I){'use strict';function P(K){return K=T.checkMatrix(K),R(K,T.eye(K.rows))}function R(K,Q){return K=T.checkMatrix(K),Q=T.checkMatrix(Q),K.isSquare()?new $(K).solve(Q):new Z(K).solve(Q)}var T=I(4),F=I(111),O=I(108),$=I(109),Z=I(110),W=I(107);T.inverse=T.inv=P,T.prototype.inverse=T.prototype.inv=function(){return P(this)},T.solve=R,T.prototype.solve=function(K){return R(this,K)},E.exports={SingularValueDecomposition:F,SVD:F,EigenvalueDecomposition:O,EVD:O,LuDecomposition:$,LU:$,QrDecomposition:Z,QR:Z,CholeskyDecomposition:W,CHO:W,inverse:P,solve:R}},function(E,D,I){'use strict';const P=I(16),R=I(14),T=I(39),F=I(84);class ${constructor(Z,W,K){this.chemicalShifts=Z,this.couplingConstants=W,this.multiplicity=K,this.nSpins=Z.length,this._initConnectivity(),this._initClusters()}static fromSpinusPrediction(Z){var W=Z.split('\n'),K=W.length-1,Q=Array(K),G=Array(K),ee={},te=P.zeros(K,K);for(let ue=0;ue<K;ue++){var ne=W[ue].split('\t');Q[ue]=+ne[2],ee[ne[0]-1]=ue,G[ue]=+ne[5]}for(let ue=0;ue<K;ue++){ne=W[ue].split('\t');var ae=(ne.length-4)/3;for(le=0;le<ae;le++){var se=ne[4+3*le]-1,oe=ee[se];te[ue][oe]=+ne[6+3*le]}}for(var le=0;le<K;le++)for(var de=le;de<K;de++)te[le][de]=te[de][le];return new $(Q,te,R(K,2))}static fromPrediction(Z){let W=$._ungroupAtoms(Z);const K=W.length,Q=Array(K),G=P.zeros(K,K),ee=Array(K),te={};var ne,ae,se;for(ne=0;ne<K;ne++)Q[ne]=W[ne].delta,te[W[ne].atomIDs[0]]=ne;for(ne=0;ne<K;ne++){for(Q[ne]=W[ne].delta,se=W[ne].j,ae=0;ae<se.length;ae++)G[te[W[ne].atomIDs[0]]][te[se[ae].assignment]]=se[ae].coupling,G[te[se[ae].assignment]][te[W[ne].atomIDs[0]]]=se[ae].coupling;ee[ne]=W[ne].integral+1}return new $(Q,G,ee)}static _ungroupAtoms(Z){let W=[];return Z.forEach(K=>{let Q=K.atomIDs;for(let G=0,ee;G<Q.length;G++)ee=JSON.parse(JSON.stringify(K)),ee.atomIDs=[Q[G]],ee.integral=1,W.push(ee)}),W}_initClusters(){this.clusters=T(this.connectivity,{out:'indexes'})}_initConnectivity(){const Z=this.couplingConstants,W=P.ones(Z.length,Z.length);for(var K=0;K<Z.length;K++)for(var Q=K;Q<Z[K].length;Q++)0===Z[K][Q]&&(W[K][Q]=0,W[Q][K]=0);this.connectivity=W}_calculateBetas(Z,W){var K=P.zeros(Z.length,Z.length),Q,G;for(Q=0;Q<Z.rows;Q++)for(G=Q;G<Z.columns;G++)0==this.chemicalShifts[Q]-this.chemicalShifts[G]?Q!=G&&0===Z[Q][G]&&(K[Q][G]=1,K[G][Q]=1):(K[Q][G]=1-Math.abs(Z[Q][G]/((this.chemicalShifts[Q]-this.chemicalShifts[G])*W)),K[G][Q]=K[Q][G]);return K}ensureClusterSize(Z){var W=this._calculateBetas(this.couplingConstants,Z.frequency||400),K=F.agnes(W,{isDistanceMatrix:!0}),Q=[];this._splitCluster(K,Q,Z.maxClusterSize||8,!1);var G=this._mergeClusters(Q);this.nClusters=G.length,this.clusters=Array(G.length);for(var ee=0;ee<this.nClusters;ee++){this.clusters[ee]=[];for(var te=0;te<this.nSpins;te++)0!==G[ee][te]&&(0>G[ee][te]?this.clusters[ee].push(-(te+1)):this.clusters[ee].push(te))}}_splitCluster(Z,W,K,Q){if(!Q&&Z.index.length<=K)W.push(this._getMembers(Z));else for(var G of Z.children)if(!isNaN(G.index)||G.index.length<=K){for(var ee=this._getMembers(G),te=0,ne=0;ne<this.nSpins;ne++)if(1==ee[ne]){te++;for(var ae=0;ae<this.nSpins;ae++)1==this.connectivity[ne][ae]&&0==ee[ae]&&(ee[ae]=-1,te++)}te<=K?W.push(ee):isNaN(G.index)?this._splitCluster(G,W,K,!0):(ee[G.index]=2,W.push(ee))}else this._splitCluster(G,W,K,!1)}_getMembers(Z){for(var W=Array(this.nSpins),K=0;K<this.nSpins;K++)W[K]=0;if(!isNaN(Z.index))W[1*Z.index]=1;else for(var Q of Z.index)W[1*Q.index]=1;return W}_mergeClusters(Z){var W=0,K,Q,G,ee,te,ne,ae;for(G=Z.length-1;0<=G;G--){for(K=Z[G],W=K.length,te=0;te<W&&-1!=K[te++];);if(te<W)for(ee=Z.length-1;ee>=G+1;ee--){for(Q=Z[ee],te=0,ne=0,ae=0;te<W;)-1==K[te]*Q[te]&&ne++,(0!==K[te]||0!==Q[te])&&ae++,te++;if(0<ne&&ae<=this.maxClusterSize){for(te=0;te<W;)1===Q[te]?K[te]=1:-1===Q[te]&&1!==K[te]&&(K[te]=-1),te++;Z.splice(ee,1),ee++}}}return Z}}E.exports=$},function(E,D,I){'use strict';function P($){const Z=($-1)/2,W=Array($),K=Array($);for(var Q=0;Q<$;Q++)W[Q]=$-1-Q-Z,K[Q]=Math.sqrt(Z*(Z+1)-W[Q]*(W[Q]+1));const G=R(K,1,$,$);for(Q=0;Q<$;Q++)K[Q]=Math.sqrt(Z*(Z+1)-W[Q]*(W[Q]-1));const ee=R(K,-1,$,$),te=G.clone().add(ee).mul(0.5),ne=ee.clone().mul(-1).add(G).mul(-0.5),ae=R(W,0,$,$);return{x:te,y:ne,z:ae,m:ee,p:G}}function R($,Z,W,K){const Q=new F(W,K,{initialCapacity:20});for(var G=0;G<$.length;G++)0<=G-Z&&G-Z<W&&G<K&&Q.set(G-Z,G,$[G]);return Q}const F=I(40),O=P(2);E.exports=function($){return 2===$?O:P($)}},function(E,D,I){'use strict';function R(te,ne,ae,se,oe,le,de){const ue=0|le*(-ne-se)/(oe-se),he=de.length;for(var ce=0,ge=0,me=ue-he/2;me<ue+he/2;me++)ce=0|me,0<=me&&me<le&&(te[ce]+=de[ge]*ae),ge++}function T(te,ne){te.forEachNonZero((ae,se,oe)=>{return ae>se?0:Math.abs(oe)<=ne?0:oe})}function F(te,ne,ae,se,oe){let le=1;for(var de=0;de<oe.length;de++)le*=ae[oe[de]];const ue=new Z(le,le);for(var he=0,ce;he<oe.length;he++){ce=oe[he];const me=G(ae[ce]);let pe,fe,xe=1;for(let _e=0;_e<he;_e++)xe*=ae[oe[_e]];pe=Z.eye(xe),xe=1;for(let _e=he+1;_e<oe.length;_e++)xe*=ae[oe[_e]];fe=Z.eye(xe);const be=te[ce],ye=pe.kroneckerProduct(me.z).kroneckerProduct(fe);ue.add(ye.mul(be));for(var ge=0;ge<oe.length;ge++){const _e=oe[ge];if(1===se[ce][_e]){const ke=G(ae[_e]);let je,we,Se=1;for(let Ee=0;Ee<ge;Ee++)Se*=ae[oe[Ee]];je=Z.eye(Se),Se=1;for(let Ee=ge+1;Ee<oe.length;Ee++)Se*=ae[oe[Ee]];we=Z.eye(Se);const ve=pe.kroneckerProduct(me.x).kroneckerProduct(fe).mmul(je.kroneckerProduct(ke.x).kroneckerProduct(we));ve.add(pe.kroneckerProduct(me.y).kroneckerProduct(fe).mul(-1).mmul(je.kroneckerProduct(ke.y).kroneckerProduct(we))),ve.add(pe.kroneckerProduct(me.z).kroneckerProduct(fe).mmul(je.kroneckerProduct(ke.z).kroneckerProduct(we))),ue.add(ve.mul(ne[ce][_e]/2))}}}return ue}function O(te,ne,ae){const se=Array(ae);for(var le=0;le<ae;le++)se[le]=te+le*((ne-te)/(ae-1));return se}const $=I(16),Z=I(40),W=I(19),K=I(43).asc,Q=I(14),G=I(114),ee=0.01;E.exports=function(te,ne){var ae,se;const oe=ne.frequency||400,le=(ne.from||0)*oe,de=(ne.to||10)*oe,ue=ne.lineWidth||1,he=ne.nbPoints||1024,ce=ne.maxClusterSize||10,ge=ne.output||'y',me=te.chemicalShifts.slice();for(ae=0;ae<me.length;ae++)me[ae]*=oe;let pe=he*ue/Math.abs(de-le)/2.355,fe=20*pe;const xe=0|fe,be=Array(xe),ye=fe/2;for(ae=0;ae<xe;ae++)be[ae]=1e12*Math.exp(-((ae-ye)*(ae-ye))/(2*(pe*pe)));const ke=new Q(he,0),je=te.multiplicity;for(var we=0;we<te.clusters.length;we++){const Pe=te.clusters[we];var Se=Array(Pe.length);for(ae=0;ae<Pe.length;ae++)Se[ae]=0>Pe[ae]?-Pe[ae]-1:Pe[ae];var ve=1,Ee=0;const Re=[],Te=[];if(Pe.length>ce){for(var De=0;0>Pe[De++];);De=Pe[De-1];var Ce,Ae;for(Re.push(-me[De]),ae=0;ae<Pe.length;ae++)if(0>Pe[ae])for(Ae=te.couplingConstants[De][Se[ae]]/2,Ce=Re.length,se=0;se<Ce;se++)Re.push(Re[se]+Ae),Re[se]-=Ae;for(Re.sort(K),Ee=Re.length,ve=1,ae=0;ae<Ee;ae++)Te.push(1)}else{const ze=F(me,te.couplingConstants,je,te.connectivity,Se),Me=ze.rows,Xe=new $.DC.EVD(ze),Ne=Xe.eigenvectorMatrix,Ye=Xe.realEigenvalues,Oe=new Z(Me,Me),Le=Pe.length;ve=0;for(var Ie=0;Ie<Le;Ie++){const qe=G(je[Se[Ie]]);let $e=1;for(se=0;se<Ie;se++)$e*=je[Se[se]];const Ze=Z.eye($e);for($e=1,se=Ie+1;se<Le;se++)$e*=je[Se[se]];const We=Z.eye($e),He=Ze.kroneckerProduct(qe.m).kroneckerProduct(We);0<=Pe[Ie]?(Oe.add(He.mul(Pe[Ie]+1)),ve++):Oe.add(He.mul(Pe[Ie]))}let Ue=$.zeros(Me,Me);Oe.forEachNonZero((qe,$e,Ze)=>{if(0<Ze){const He=Ne[$e];for(var We=0;We<He.length;We++)0!==He[We]&&Ue.set(qe,We,Ue.get(qe,We)+He[We])}return Ze});let Be=Ue.clone();Oe.forEachNonZero((qe,$e,Ze)=>{if(0>Ze){const He=Ne[$e];for(var We=0;We<He.length;We++)0!==He[We]&&Be.set(qe,We,Be.get(qe,We)+He[We])}return Ze});const Ve=Ne.transpose();Ue=Ve.mmul(Ue),Ue=new Z(Ue,{threshold:ee}),T(Ue,ee),Be=Ve.mmul(Be),Be=new Z(Be,{threshold:ee}),T(Be,ee),Be.forEachNonZero((qe,$e,Ze)=>{var We=Ue.get(qe,$e);We=Math.min(Math.abs(We),Math.abs(Ze)),We*=We,Ee+=We;var He=Ye[qe]-Ye[$e],Je=W(Re,He,K);0>Je?(Re.splice(-1-Je,0,He),Te.splice(-1-Je,0,We)):Te[Je]+=We})}const Fe=Re.length;if(0<Fe){ve/=Ee;let Me=Re[0],Xe=Te[0],Ne=1;for(ae=1;ae<Fe;ae++)Math.abs(Re[ae]-Me/Ne)<ue/32?(Xe+=Te[ae],Me+=Re[ae],Ne++):(R(ke,Me/Ne,Xe*ve,le,de,he,be),Me=Re[ae],Xe=Te[ae],Ne=1);R(ke,Me/Ne,Xe*ve,le,de,he,be)}}return'xy'===ge?{x:O(ne.from,ne.to,he),y:ke}:'y'==ge?ke:void 0}},function(E,D,I){'use strict';function R($,Z,W,K){return(($-Z)*K-1)/(W-Z)}function T($,Z){for(var W=4,K=Math.max(0,Math.round(Z.x-Z.widthX*W)),Q=Math.min($[0].length-1,Math.round(Z.x+Z.widthX*W)),G=Math.max(0,Math.round(Z.y-Z.widthY*W)),ee=Math.min($.length-1,Math.round(Z.y+Z.widthY*W)),te=Z.widthX*Z.widthX,ne=Z.widthY*Z.widthY,ae=G;ae<ee;ae++)for(var se=K;se<Q;se++){var oe=Math.pow(Z.x-se,2)/te+Math.pow(Z.y-ae,2)/ne,le=1e4*Z.z*Math.exp(-oe);$[ae][se]+=le}}const F=I(16);let O={H:{frequency:400,lineWidth:10},C:{frequency:100,lineWidth:10}};E.exports=function($,Z){var W;const Q=$[0].fromAtomLabel,G=$[0].toLabel,ee=Z.frequencyX||O[Q].frequency,te=Z.frequencyY||O[G].frequency;var ne=Z.lineWidthX||O[Q].lineWidth,ae=Z.lineWidthY||O[G].lineWidth,le=$[0].fromChemicalShift,de=$[0].fromChemicalShift,ue=$[0].toChemicalShift,he=$[0].toChemicalShift;for(W=1;W<$.length;)le=Math.min(le,$[W].fromChemicalShift),de=Math.max(de,$[W].fromChemicalShift),ue=Math.min(ue,$[W].toChemicalShift),he=Math.max(he,$[W].toChemicalShift),W++;null===Z.firstX||isNaN(Z.firstX)||(le=Z.firstX),null===Z.firstY||isNaN(Z.firstY)||(ue=Z.firstY),null===Z.lastX||isNaN(Z.lastX)||(de=Z.lastX),null===Z.lastY||isNaN(Z.lastY)||(he=Z.lastY);var ce=Z.nbPointsX||512,ge=Z.nbPointsY||512,me=new F(ge,ce).fill(0);for(W=0;W<$.length;){let pe={x:R($[W].fromChemicalShift,le,de,ce),y:R($[W].toChemicalShift,ue,he,ge),z:$[W].fromAtoms.length+$[W].toAtoms.length,widthX:R(ne/ee+le,le,de,ce),widthY:R(ae/te+ue,ue,he,ge)};T(me,pe),W++}return me}},function(E){'use strict';E.exports=Number.isNaN||function(P){return P!==P}},function(E,D,I){'use strict';var P=I(1).assign,R=I(119),T=I(120),F=I(46),O={};P(O,R,T,F),E.exports=O},function(E,D,I){'use strict';function P(de){if(!(this instanceof P))return new P(de);this.options=$.assign({level:se,method:le,chunkSize:16384,windowBits:15,memLevel:8,strategy:oe,to:''},de||{});var ue=this.options;ue.raw&&0<ue.windowBits?ue.windowBits=-ue.windowBits:ue.gzip&&0<ue.windowBits&&16>ue.windowBits&&(ue.windowBits+=16),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new K,this.strm.avail_out=0;var he=O.deflateInit2(this.strm,ue.level,ue.method,ue.windowBits,ue.memLevel,ue.strategy);if(he!==te)throw new Error(W[he]);if(ue.header&&O.deflateSetHeader(this.strm,ue.header),ue.dictionary){var ce;if(ce='string'==typeof ue.dictionary?Z.string2buf(ue.dictionary):'[object ArrayBuffer]'===Q.call(ue.dictionary)?new Uint8Array(ue.dictionary):ue.dictionary,he=O.deflateSetDictionary(this.strm,ce),he!==te)throw new Error(W[he]);this._dict_set=!0}}function R(de,ue){var he=new P(ue);if(he.push(de,!0),he.err)throw he.msg||W[he.err];return he.result}var O=I(121),$=I(1),Z=I(44),W=I(17),K=I(48),Q=Object.prototype.toString,ee=4,te=0,ne=1,ae=2,se=-1,oe=0,le=8;P.prototype.push=function(de,ue){var he=this.strm,ce=this.options.chunkSize,ge,me;if(this.ended)return!1;me=ue===~~ue?ue:!0===ue?ee:0,he.input='string'==typeof de?Z.string2buf(de):'[object ArrayBuffer]'===Q.call(de)?new Uint8Array(de):de,he.next_in=0,he.avail_in=he.input.length;do{if(0===he.avail_out&&(he.output=new $.Buf8(ce),he.next_out=0,he.avail_out=ce),ge=O.deflate(he,me),ge!==ne&&ge!==te)return this.onEnd(ge),this.ended=!0,!1;(0===he.avail_out||0===he.avail_in&&(me===ee||me===ae))&&('string'===this.options.to?this.onData(Z.buf2binstring($.shrinkBuf(he.output,he.next_out))):this.onData($.shrinkBuf(he.output,he.next_out)))}while((0<he.avail_in||0===he.avail_out)&&ge!==ne);return me===ee?(ge=O.deflateEnd(this.strm),this.onEnd(ge),this.ended=!0,ge===te):me!==ae||(this.onEnd(te),he.avail_out=0,!0)},P.prototype.onData=function(de){this.chunks.push(de)},P.prototype.onEnd=function(de){de===te&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=$.flattenChunks(this.chunks)),this.chunks=[],this.err=de,this.msg=this.strm.msg},D.Deflate=P,D.deflate=R,D.deflateRaw=function(de,ue){return ue=ue||{},ue.raw=!0,R(de,ue)},D.gzip=function(de,ue){return ue=ue||{},ue.gzip=!0,R(de,ue)}},function(E,D,I){'use strict';function P(ee){if(!(this instanceof P))return new P(ee);this.options=O.assign({chunkSize:16384,windowBits:0,to:''},ee||{});var te=this.options;te.raw&&0<=te.windowBits&&16>te.windowBits&&(te.windowBits=-te.windowBits,0===te.windowBits&&(te.windowBits=-15)),0<=te.windowBits&&16>te.windowBits&&!(ee&&ee.windowBits)&&(te.windowBits+=32),15<te.windowBits&&48>te.windowBits&&0==(15&te.windowBits)&&(te.windowBits|=15),this.err=0,this.msg='',this.ended=!1,this.chunks=[],this.strm=new K,this.strm.avail_out=0;var ne=F.inflateInit2(this.strm,te.windowBits);if(ne!==Z.Z_OK)throw new Error(W[ne]);this.header=new Q,F.inflateGetHeader(this.strm,this.header)}function R(ee,te){var ne=new P(te);if(ne.push(ee,!0),ne.err)throw ne.msg||W[ne.err];return ne.result}var F=I(124),O=I(1),$=I(44),Z=I(46),W=I(17),K=I(48),Q=I(122),G=Object.prototype.toString;P.prototype.push=function(ee,te){var ne=this.strm,ae=this.options.chunkSize,se=this.options.dictionary,ge=!1,oe,le,de,ue,he,ce;if(this.ended)return!1;le=te===~~te?te:!0===te?Z.Z_FINISH:Z.Z_NO_FLUSH,ne.input='string'==typeof ee?$.binstring2buf(ee):'[object ArrayBuffer]'===G.call(ee)?new Uint8Array(ee):ee,ne.next_in=0,ne.avail_in=ne.input.length;do{if(0===ne.avail_out&&(ne.output=new O.Buf8(ae),ne.next_out=0,ne.avail_out=ae),oe=F.inflate(ne,Z.Z_NO_FLUSH),oe===Z.Z_NEED_DICT&&se&&(ce='string'==typeof se?$.string2buf(se):'[object ArrayBuffer]'===G.call(se)?new Uint8Array(se):se,oe=F.inflateSetDictionary(this.strm,ce)),oe===Z.Z_BUF_ERROR&&!0==ge&&(oe=Z.Z_OK,ge=!1),oe!==Z.Z_STREAM_END&&oe!==Z.Z_OK)return this.onEnd(oe),this.ended=!0,!1;ne.next_out&&(0===ne.avail_out||oe===Z.Z_STREAM_END||0===ne.avail_in&&(le===Z.Z_FINISH||le===Z.Z_SYNC_FLUSH))&&('string'===this.options.to?(de=$.utf8border(ne.output,ne.next_out),ue=ne.next_out-de,he=$.buf2string(ne.output,de),ne.next_out=ue,ne.avail_out=ae-ue,ue&&O.arraySet(ne.output,ne.output,de,ue,0),this.onData(he)):this.onData(O.shrinkBuf(ne.output,ne.next_out))),0===ne.avail_in&&0===ne.avail_out&&(ge=!0)}while((0<ne.avail_in||0===ne.avail_out)&&oe!==Z.Z_STREAM_END);return oe===Z.Z_STREAM_END&&(le=Z.Z_FINISH),le===Z.Z_FINISH?(oe=F.inflateEnd(this.strm),this.onEnd(oe),this.ended=!0,oe===Z.Z_OK):le!==Z.Z_SYNC_FLUSH||(this.onEnd(Z.Z_OK),ne.avail_out=0,!0)},P.prototype.onData=function(ee){this.chunks.push(ee)},P.prototype.onEnd=function(ee){ee===Z.Z_OK&&('string'===this.options.to?this.result=this.chunks.join(''):this.result=O.flattenChunks(this.chunks)),this.chunks=[],this.err=ee,this.msg=this.strm.msg},D.Inflate=P,D.inflate=R,D.inflateRaw=function(ee,te){return te=te||{},te.raw=!0,R(ee,te)},D.ungzip=R},function(E,D,I){'use strict';function P(pt,xt){return pt.msg=ke[xt],xt}function R(pt){return(pt<<1)-(4<pt?9:0)}function T(pt){for(var xt=pt.length;0<=--xt;)pt[xt]=0}function F(pt){var xt=pt.state,bt=xt.pending;bt>pt.avail_out&&(bt=pt.avail_out);0===bt||(xe.arraySet(pt.output,xt.pending_buf,xt.pending_out,bt,pt.next_out),pt.next_out+=bt,xt.pending_out+=bt,pt.total_out+=bt,pt.avail_out-=bt,xt.pending-=bt,0===xt.pending&&(xt.pending_out=0))}function O(pt,xt){be._tr_flush_block(pt,0<=pt.block_start?pt.block_start:-1,pt.strstart-pt.block_start,xt),pt.block_start=pt.strstart,F(pt.strm)}function $(pt,xt){pt.pending_buf[pt.pending++]=xt}function Z(pt,xt){pt.pending_buf[pt.pending++]=255&xt>>>8,pt.pending_buf[pt.pending++]=255&xt}function W(pt,xt,bt,yt){var _t=pt.avail_in;return(_t>yt&&(_t=yt),0===_t)?0:(pt.avail_in-=_t,xe.arraySet(xt,pt.input,pt.next_in,_t,bt),1===pt.state.wrap?pt.adler=ye(pt.adler,xt,_t,bt):2===pt.state.wrap&&(pt.adler=_e(pt.adler,xt,_t,bt)),pt.next_in+=_t,pt.total_in+=_t,_t)}function K(pt,xt){var bt=pt.max_chain_length,yt=pt.strstart,_t,kt,jt=pt.prev_length,wt=pt.nice_match,St=pt.strstart>pt.w_size-Qe?pt.strstart-(pt.w_size-Qe):0,vt=pt.window,Et=pt.w_mask,Dt=pt.prev,Ct=pt.strstart+Ke,At=vt[yt+jt-1],It=vt[yt+jt];pt.prev_length>=pt.good_match&&(bt>>=2),wt>pt.lookahead&&(wt=pt.lookahead);do{if(_t=xt,vt[_t+jt]!==It||vt[_t+jt-1]!==At||vt[_t]!==vt[yt]||vt[++_t]!==vt[yt+1])continue;yt+=2,_t++;do;while(vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&vt[++yt]===vt[++_t]&&yt<Ct);if(kt=Ke-(Ct-yt),yt=Ct-Ke,kt>jt){if(pt.match_start=xt,jt=kt,kt>=wt)break;At=vt[yt+jt-1],It=vt[yt+jt]}}while((xt=Dt[xt&Et])>St&&0!=--bt);return jt<=pt.lookahead?jt:pt.lookahead}function Q(pt){var xt=pt.w_size,bt,yt,_t,kt,jt;do{if(kt=pt.window_size-pt.lookahead-pt.strstart,pt.strstart>=xt+(xt-Qe)){xe.arraySet(pt.window,pt.window,xt,xt,0),pt.match_start-=xt,pt.strstart-=xt,pt.block_start-=xt,yt=pt.hash_size,bt=yt;do _t=pt.head[--bt],pt.head[bt]=_t>=xt?_t-xt:0;while(--yt);yt=xt,bt=yt;do _t=pt.prev[--bt],pt.prev[bt]=_t>=xt?_t-xt:0;while(--yt);kt+=xt}if(0===pt.strm.avail_in)break;if(yt=W(pt.strm,pt.window,pt.strstart+pt.lookahead,kt),pt.lookahead+=yt,pt.lookahead+pt.insert>=Je)for(jt=pt.strstart-pt.insert,pt.ins_h=pt.window[jt],pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[jt+1])&pt.hash_mask;pt.insert&&(pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[jt+Je-1])&pt.hash_mask,pt.prev[jt&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=jt,jt++,pt.insert--,!(pt.lookahead+pt.insert<Je)););}while(pt.lookahead<Qe&&0!==pt.strm.avail_in)}function ee(pt,xt){for(var bt,yt;;){if(pt.lookahead<Qe){if(Q(pt),pt.lookahead<Qe&&xt===je)return lt;if(0===pt.lookahead)break}if(bt=0,pt.lookahead>=Je&&(pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[pt.strstart+Je-1])&pt.hash_mask,bt=pt.prev[pt.strstart&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=pt.strstart),0!==bt&&pt.strstart-bt<=pt.w_size-Qe&&(pt.match_length=K(pt,bt)),!(pt.match_length>=Je))yt=be._tr_tally(pt,0,pt.window[pt.strstart]),pt.lookahead--,pt.strstart++;else if(yt=be._tr_tally(pt,pt.strstart-pt.match_start,pt.match_length-Je),pt.lookahead-=pt.match_length,pt.match_length<=pt.max_lazy_match&&pt.lookahead>=Je){pt.match_length--;do pt.strstart++,pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[pt.strstart+Je-1])&pt.hash_mask,bt=pt.prev[pt.strstart&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=pt.strstart;while(0!=--pt.match_length);pt.strstart++}else pt.strstart+=pt.match_length,pt.match_length=0,pt.ins_h=pt.window[pt.strstart],pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[pt.strstart+1])&pt.hash_mask;if(yt&&(O(pt,!1),0===pt.strm.avail_out))return lt}return pt.insert=pt.strstart<Je-1?pt.strstart:Je-1,xt===ve?(O(pt,!0),0===pt.strm.avail_out?ht:ct):pt.last_lit&&(O(pt,!1),0===pt.strm.avail_out)?lt:ut}function te(pt,xt){for(var bt,yt,_t;;){if(pt.lookahead<Qe){if(Q(pt),pt.lookahead<Qe&&xt===je)return lt;if(0===pt.lookahead)break}if(bt=0,pt.lookahead>=Je&&(pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[pt.strstart+Je-1])&pt.hash_mask,bt=pt.prev[pt.strstart&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=pt.strstart),pt.prev_length=pt.match_length,pt.prev_match=pt.match_start,pt.match_length=Je-1,0!==bt&&pt.prev_length<pt.max_lazy_match&&pt.strstart-bt<=pt.w_size-Qe&&(pt.match_length=K(pt,bt),5>=pt.match_length&&(pt.strategy===Te||pt.match_length===Je&&4096<pt.strstart-pt.match_start)&&(pt.match_length=Je-1)),pt.prev_length>=Je&&pt.match_length<=pt.prev_length){_t=pt.strstart+pt.lookahead-Je,yt=be._tr_tally(pt,pt.strstart-1-pt.prev_match,pt.prev_length-Je),pt.lookahead-=pt.prev_length-1,pt.prev_length-=2;do++pt.strstart<=_t&&(pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[pt.strstart+Je-1])&pt.hash_mask,bt=pt.prev[pt.strstart&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=pt.strstart);while(0!=--pt.prev_length);if(pt.match_available=0,pt.match_length=Je-1,pt.strstart++,yt&&(O(pt,!1),0===pt.strm.avail_out))return lt}else if(!pt.match_available)pt.match_available=1,pt.strstart++,pt.lookahead--;else if(yt=be._tr_tally(pt,0,pt.window[pt.strstart-1]),yt&&O(pt,!1),pt.strstart++,pt.lookahead--,0===pt.strm.avail_out)return lt}return pt.match_available&&(yt=be._tr_tally(pt,0,pt.window[pt.strstart-1]),pt.match_available=0),pt.insert=pt.strstart<Je-1?pt.strstart:Je-1,xt===ve?(O(pt,!0),0===pt.strm.avail_out?ht:ct):pt.last_lit&&(O(pt,!1),0===pt.strm.avail_out)?lt:ut}function ne(pt,xt){for(var jt=pt.window,bt,yt,_t,kt;;){if(pt.lookahead<=Ke){if(Q(pt),pt.lookahead<=Ke&&xt===je)return lt;if(0===pt.lookahead)break}if(pt.match_length=0,pt.lookahead>=Je&&0<pt.strstart&&(_t=pt.strstart-1,yt=jt[_t],yt===jt[++_t]&&yt===jt[++_t]&&yt===jt[++_t])){kt=pt.strstart+Ke;do;while(yt===jt[++_t]&&yt===jt[++_t]&&yt===jt[++_t]&&yt===jt[++_t]&&yt===jt[++_t]&&yt===jt[++_t]&&yt===jt[++_t]&&yt===jt[++_t]&&_t<kt);pt.match_length=Ke-(kt-_t),pt.match_length>pt.lookahead&&(pt.match_length=pt.lookahead)}if(pt.match_length>=Je?(bt=be._tr_tally(pt,1,pt.match_length-Je),pt.lookahead-=pt.match_length,pt.strstart+=pt.match_length,pt.match_length=0):(bt=be._tr_tally(pt,0,pt.window[pt.strstart]),pt.lookahead--,pt.strstart++),bt&&(O(pt,!1),0===pt.strm.avail_out))return lt}return pt.insert=0,xt===ve?(O(pt,!0),0===pt.strm.avail_out?ht:ct):pt.last_lit&&(O(pt,!1),0===pt.strm.avail_out)?lt:ut}function ae(pt,xt){for(var bt;;){if(0===pt.lookahead&&(Q(pt),0===pt.lookahead)){if(xt===je)return lt;break}if(pt.match_length=0,bt=be._tr_tally(pt,0,pt.window[pt.strstart]),pt.lookahead--,pt.strstart++,bt&&(O(pt,!1),0===pt.strm.avail_out))return lt}return pt.insert=0,xt===ve?(O(pt,!0),0===pt.strm.avail_out?ht:ct):pt.last_lit&&(O(pt,!1),0===pt.strm.avail_out)?lt:ut}function se(pt,xt,bt,yt,_t){this.good_length=pt,this.max_lazy=xt,this.nice_length=bt,this.max_chain=yt,this.func=_t}function oe(pt){pt.window_size=2*pt.w_size,T(pt.head),pt.max_lazy_match=mt[pt.level].max_lazy,pt.good_match=mt[pt.level].good_length,pt.nice_match=mt[pt.level].nice_length,pt.max_chain_length=mt[pt.level].max_chain,pt.strstart=0,pt.block_start=0,pt.lookahead=0,pt.insert=0,pt.match_length=pt.prev_length=Je-1,pt.match_available=0,pt.ins_h=0}function le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ye,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new xe.Buf16(2*We),this.dyn_dtree=new xe.Buf16(2*(2*$e+1)),this.bl_tree=new xe.Buf16(2*(2*Ze+1)),T(this.dyn_ltree),T(this.dyn_dtree),T(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new xe.Buf16(He+1),this.heap=new xe.Buf16(2*qe+1),T(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new xe.Buf16(2*qe+1),T(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(pt){var xt;return pt&&pt.state?(pt.total_in=pt.total_out=0,pt.data_type=Ne,xt=pt.state,xt.pending=0,xt.pending_out=0,0>xt.wrap&&(xt.wrap=-xt.wrap),xt.status=xt.wrap?et:st,pt.adler=2===xt.wrap?0:1,xt.last_flush=je,be._tr_init(xt),De):P(pt,Ae)}function ue(pt){var xt=de(pt);return xt===De&&oe(pt.state),xt}function ce(pt,xt,bt,yt,_t,kt){if(!pt)return Ae;var jt=1;if(xt===Re&&(xt=6),0>yt?(jt=0,yt=-yt):15<yt&&(jt=2,yt-=16),1>_t||_t>Oe||bt!==Ye||8>yt||15<yt||0>xt||9<xt||0>kt||kt>Me)return P(pt,Ae);8===yt&&(yt=9);var wt=new le;return pt.state=wt,wt.strm=pt,wt.wrap=jt,wt.gzhead=null,wt.w_bits=yt,wt.w_size=1<<wt.w_bits,wt.w_mask=wt.w_size-1,wt.hash_bits=_t+7,wt.hash_size=1<<wt.hash_bits,wt.hash_mask=wt.hash_size-1,wt.hash_shift=~~((wt.hash_bits+Je-1)/Je),wt.window=new xe.Buf8(2*wt.w_size),wt.head=new xe.Buf16(wt.hash_size),wt.prev=new xe.Buf16(wt.w_size),wt.lit_bufsize=1<<_t+6,wt.pending_buf_size=4*wt.lit_bufsize,wt.pending_buf=new xe.Buf8(wt.pending_buf_size),wt.d_buf=1*wt.lit_bufsize,wt.l_buf=3*wt.lit_bufsize,wt.level=xt,wt.strategy=kt,wt.method=bt,ue(pt)}var xe=I(1),be=I(126),ye=I(45),_e=I(47),ke=I(17),je=0,ve=4,Ee=5,De=0,Ce=1,Ae=-2,Pe=-5,Re=-1,Te=1,Fe=2,Me=4,Ne=2,Ye=8,Oe=9,qe=256+1+29,$e=30,Ze=19,We=2*qe+1,He=15,Je=3,Ke=258,Qe=Ke+Je+1,et=42,tt=69,it=73,nt=91,at=103,st=113,ot=666,lt=1,ut=2,ht=3,ct=4,mt;mt=[new se(0,0,0,0,function(pt,xt){var bt=65535;for(bt>pt.pending_buf_size-5&&(bt=pt.pending_buf_size-5);;){if(1>=pt.lookahead){if(Q(pt),0===pt.lookahead&&xt===je)return lt;if(0===pt.lookahead)break}pt.strstart+=pt.lookahead,pt.lookahead=0;var yt=pt.block_start+bt;if((0===pt.strstart||pt.strstart>=yt)&&(pt.lookahead=pt.strstart-yt,pt.strstart=yt,O(pt,!1),0===pt.strm.avail_out))return lt;if(pt.strstart-pt.block_start>=pt.w_size-Qe&&(O(pt,!1),0===pt.strm.avail_out))return lt}return pt.insert=0,xt===ve?(O(pt,!0),0===pt.strm.avail_out?ht:ct):pt.strstart>pt.block_start&&(O(pt,!1),0===pt.strm.avail_out)?lt:lt}),new se(4,4,8,4,ee),new se(4,5,16,8,ee),new se(4,6,32,32,ee),new se(4,4,16,16,te),new se(8,16,32,32,te),new se(8,16,128,128,te),new se(8,32,128,256,te),new se(32,128,258,1024,te),new se(32,258,258,4096,te)],D.deflateInit=function(pt,xt){return ce(pt,xt,Ye,15,8,0)},D.deflateInit2=ce,D.deflateReset=ue,D.deflateResetKeep=de,D.deflateSetHeader=function(pt,xt){return pt&&pt.state?2===pt.state.wrap?(pt.state.gzhead=xt,De):Ae:Ae},D.deflate=function(pt,xt){var bt,yt,_t,kt;if(!pt||!pt.state||xt>Ee||0>xt)return pt?P(pt,Ae):Ae;if(yt=pt.state,!pt.output||!pt.input&&0!==pt.avail_in||yt.status===ot&&xt!==ve)return P(pt,0===pt.avail_out?Pe:Ae);if(yt.strm=pt,bt=yt.last_flush,yt.last_flush=xt,yt.status===et)if(2===yt.wrap)pt.adler=0,$(yt,31),$(yt,139),$(yt,8),yt.gzhead?($(yt,(yt.gzhead.text?1:0)+(yt.gzhead.hcrc?2:0)+(yt.gzhead.extra?4:0)+(yt.gzhead.name?8:0)+(yt.gzhead.comment?16:0)),$(yt,255&yt.gzhead.time),$(yt,255&yt.gzhead.time>>8),$(yt,255&yt.gzhead.time>>16),$(yt,255&yt.gzhead.time>>24),$(yt,9===yt.level?2:yt.strategy>=Fe||2>yt.level?4:0),$(yt,255&yt.gzhead.os),yt.gzhead.extra&&yt.gzhead.extra.length&&($(yt,255&yt.gzhead.extra.length),$(yt,255&yt.gzhead.extra.length>>8)),yt.gzhead.hcrc&&(pt.adler=_e(pt.adler,yt.pending_buf,yt.pending,0)),yt.gzindex=0,yt.status=tt):($(yt,0),$(yt,0),$(yt,0),$(yt,0),$(yt,0),$(yt,9===yt.level?2:yt.strategy>=Fe||2>yt.level?4:0),$(yt,3),yt.status=st);else{var jt=Ye+(yt.w_bits-8<<4)<<8,wt=-1;wt=yt.strategy>=Fe||2>yt.level?0:6>yt.level?1:6===yt.level?2:3,jt|=wt<<6,0!==yt.strstart&&(jt|=32),jt+=31-jt%31,yt.status=st,Z(yt,jt),0!==yt.strstart&&(Z(yt,pt.adler>>>16),Z(yt,65535&pt.adler)),pt.adler=1}if(yt.status===tt)if(yt.gzhead.extra){for(_t=yt.pending;yt.gzindex<(65535&yt.gzhead.extra.length)&&!(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>_t&&(pt.adler=_e(pt.adler,yt.pending_buf,yt.pending-_t,_t)),F(pt),_t=yt.pending,yt.pending===yt.pending_buf_size));)$(yt,255&yt.gzhead.extra[yt.gzindex]),yt.gzindex++;yt.gzhead.hcrc&&yt.pending>_t&&(pt.adler=_e(pt.adler,yt.pending_buf,yt.pending-_t,_t)),yt.gzindex===yt.gzhead.extra.length&&(yt.gzindex=0,yt.status=it)}else yt.status=it;if(yt.status===it)if(yt.gzhead.name){_t=yt.pending;do{if(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>_t&&(pt.adler=_e(pt.adler,yt.pending_buf,yt.pending-_t,_t)),F(pt),_t=yt.pending,yt.pending===yt.pending_buf_size)){kt=1;break}kt=yt.gzindex<yt.gzhead.name.length?255&yt.gzhead.name.charCodeAt(yt.gzindex++):0,$(yt,kt)}while(0!==kt);yt.gzhead.hcrc&&yt.pending>_t&&(pt.adler=_e(pt.adler,yt.pending_buf,yt.pending-_t,_t)),0===kt&&(yt.gzindex=0,yt.status=nt)}else yt.status=nt;if(yt.status===nt)if(yt.gzhead.comment){_t=yt.pending;do{if(yt.pending===yt.pending_buf_size&&(yt.gzhead.hcrc&&yt.pending>_t&&(pt.adler=_e(pt.adler,yt.pending_buf,yt.pending-_t,_t)),F(pt),_t=yt.pending,yt.pending===yt.pending_buf_size)){kt=1;break}kt=yt.gzindex<yt.gzhead.comment.length?255&yt.gzhead.comment.charCodeAt(yt.gzindex++):0,$(yt,kt)}while(0!==kt);yt.gzhead.hcrc&&yt.pending>_t&&(pt.adler=_e(pt.adler,yt.pending_buf,yt.pending-_t,_t)),0===kt&&(yt.status=at)}else yt.status=at;if(yt.status===at&&(yt.gzhead.hcrc?(yt.pending+2>yt.pending_buf_size&&F(pt),yt.pending+2<=yt.pending_buf_size&&($(yt,255&pt.adler),$(yt,255&pt.adler>>8),pt.adler=0,yt.status=st)):yt.status=st),0!==yt.pending){if(F(pt),0===pt.avail_out)return yt.last_flush=-1,De;}else if(0===pt.avail_in&&R(xt)<=R(bt)&&xt!==ve)return P(pt,Pe);if(yt.status===ot&&0!==pt.avail_in)return P(pt,Pe);if(0!==pt.avail_in||0!==yt.lookahead||xt!==je&&yt.status!==ot){var St=yt.strategy===Fe?ae(yt,xt):yt.strategy===3?ne(yt,xt):mt[yt.level].func(yt,xt);if((St===ht||St===ct)&&(yt.status=ot),St===lt||St===ht)return 0===pt.avail_out&&(yt.last_flush=-1),De;if(St===ut&&(xt===1?be._tr_align(yt):xt!==Ee&&(be._tr_stored_block(yt,0,0,!1),xt===3&&(T(yt.head),0===yt.lookahead&&(yt.strstart=0,yt.block_start=0,yt.insert=0))),F(pt),0===pt.avail_out))return yt.last_flush=-1,De}return xt===ve?0>=yt.wrap?Ce:(2===yt.wrap?($(yt,255&pt.adler),$(yt,255&pt.adler>>8),$(yt,255&pt.adler>>16),$(yt,255&pt.adler>>24),$(yt,255&pt.total_in),$(yt,255&pt.total_in>>8),$(yt,255&pt.total_in>>16),$(yt,255&pt.total_in>>24)):(Z(yt,pt.adler>>>16),Z(yt,65535&pt.adler)),F(pt),0<yt.wrap&&(yt.wrap=-yt.wrap),0===yt.pending?Ce:De):De},D.deflateEnd=function(pt){var xt;return pt&&pt.state?(xt=pt.state.status,xt!==et&&xt!==tt&&xt!==it&&xt!==nt&&xt!==at&&xt!==st&&xt!==ot)?P(pt,Ae):(pt.state=null,xt===st?P(pt,-3):De):Ae},D.deflateSetDictionary=function(pt,xt){var bt=xt.length,yt,_t,kt,jt,wt,St,vt,Et;if(!pt||!pt.state)return Ae;if(yt=pt.state,jt=yt.wrap,2===jt||1===jt&&yt.status!==et||yt.lookahead)return Ae;for(1===jt&&(pt.adler=ye(pt.adler,xt,bt,0)),yt.wrap=0,bt>=yt.w_size&&(0===jt&&(T(yt.head),yt.strstart=0,yt.block_start=0,yt.insert=0),Et=new xe.Buf8(yt.w_size),xe.arraySet(Et,xt,bt-yt.w_size,yt.w_size,0),xt=Et,bt=yt.w_size),wt=pt.avail_in,St=pt.next_in,vt=pt.input,pt.avail_in=bt,pt.next_in=0,pt.input=xt,Q(yt);yt.lookahead>=Je;){_t=yt.strstart,kt=yt.lookahead-(Je-1);do yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[_t+Je-1])&yt.hash_mask,yt.prev[_t&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=_t,_t++;while(--kt);yt.strstart=_t,yt.lookahead=Je-1,Q(yt)}return yt.strstart+=yt.lookahead,yt.block_start=yt.strstart,yt.insert=yt.lookahead,yt.lookahead=0,yt.match_length=yt.prev_length=Je-1,yt.match_available=0,pt.next_in=St,pt.input=vt,pt.avail_in=wt,yt.wrap=jt,De},D.deflateInfo='pako deflate (from Nodeca project)'},function(E){'use strict';E.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name='',this.comment='',this.hcrc=0,this.done=!1}},function(E){'use strict';var P=30;E.exports=function(F,O){var $,Z,W,K,Q,G,ee,te,ne,ae,se,oe,le,de,ue,he,ce,ge,me,pe,fe,xe,be,ye,_e;$=F.state,Z=F.next_in,ye=F.input,W=Z+(F.avail_in-5),K=F.next_out,_e=F.output,Q=K-(O-F.avail_out),G=K+(F.avail_out-257),ee=$.dmax,te=$.wsize,ne=$.whave,ae=$.wnext,se=$.window,oe=$.hold,le=$.bits,de=$.lencode,ue=$.distcode,he=(1<<$.lenbits)-1,ce=(1<<$.distbits)-1;top:do{15>le&&(oe+=ye[Z++]<<le,le+=8,oe+=ye[Z++]<<le,le+=8),ge=de[oe&he];dolen:for(;;){if(me=ge>>>24,oe>>>=me,le-=me,me=255&ge>>>16,0===me)_e[K++]=65535&ge;else if(16&me){pe=65535&ge,me&=15,me&&(le<me&&(oe+=ye[Z++]<<le,le+=8),pe+=oe&(1<<me)-1,oe>>>=me,le-=me),15>le&&(oe+=ye[Z++]<<le,le+=8,oe+=ye[Z++]<<le,le+=8),ge=ue[oe&ce];dodist:for(;;){if(me=ge>>>24,oe>>>=me,le-=me,me=255&ge>>>16,16&me){if(fe=65535&ge,me&=15,le<me&&(oe+=ye[Z++]<<le,le+=8,le<me&&(oe+=ye[Z++]<<le,le+=8)),fe+=oe&(1<<me)-1,fe>ee){F.msg='invalid distance too far back',$.mode=P;break top}if(oe>>>=me,le-=me,me=K-Q,fe>me){if(me=fe-me,me>ne&&$.sane){F.msg='invalid distance too far back',$.mode=P;break top}if(xe=0,be=se,0===ae){if(xe+=te-me,me<pe){pe-=me;do _e[K++]=se[xe++];while(--me);xe=K-fe,be=_e}}else if(ae<me){if(xe+=te+ae-me,me-=ae,me<pe){pe-=me;do _e[K++]=se[xe++];while(--me);if(xe=0,ae<pe){me=ae,pe-=me;do _e[K++]=se[xe++];while(--me);xe=K-fe,be=_e}}}else if(xe+=ae-me,me<pe){pe-=me;do _e[K++]=se[xe++];while(--me);xe=K-fe,be=_e}for(;2<pe;)_e[K++]=be[xe++],_e[K++]=be[xe++],_e[K++]=be[xe++],pe-=3;pe&&(_e[K++]=be[xe++],1<pe&&(_e[K++]=be[xe++]))}else{xe=K-fe;do _e[K++]=_e[xe++],_e[K++]=_e[xe++],_e[K++]=_e[xe++],pe-=3;while(2<pe);pe&&(_e[K++]=_e[xe++],1<pe&&(_e[K++]=_e[xe++]))}}else if(0==(64&me)){ge=ue[(65535&ge)+(oe&(1<<me)-1)];continue dodist}else{F.msg='invalid distance code',$.mode=P;break top}break}}else if(0==(64&me)){ge=de[(65535&ge)+(oe&(1<<me)-1)];continue dolen}else if(32&me){$.mode=12;break top}else{F.msg='invalid literal/length code',$.mode=P;break top}break}}while(Z<W&&K<G);return pe=le>>3,Z-=pe,le-=pe<<3,oe&=(1<<le)-1,F.next_in=Z,F.next_out=K,F.avail_in=Z<W?5+(W-Z):5-(Z-W),F.avail_out=K<G?257+(G-K):257-(K-G),$.hold=oe,void($.bits=le)}},function(E,D,I){'use strict';function P(ut){return(255&ut>>>24)+(65280&ut>>>8)+((65280&ut)<<8)+((255&ut)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ne.Buf16(320),this.work=new ne.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(ut){var ht;return ut&&ut.state?(ht=ut.state,ut.total_in=ut.total_out=ht.total=0,ut.msg='',ht.wrap&&(ut.adler=1&ht.wrap),ht.mode=we,ht.last=0,ht.havedict=0,ht.dmax=32768,ht.head=null,ht.hold=0,ht.bits=0,ht.lencode=ht.lendyn=new ne.Buf32(tt),ht.distcode=ht.distdyn=new ne.Buf32(it),ht.sane=1,ht.back=-1,pe):be}function F(ut){var ht;return ut&&ut.state?(ht=ut.state,ht.wsize=0,ht.whave=0,ht.wnext=0,T(ut)):be}function O(ut,ht){var ct,gt;return ut&&ut.state?(gt=ut.state,0>ht?(ct=0,ht=-ht):(ct=(ht>>4)+1,48>ht&&(ht&=15)),ht&&(8>ht||15<ht))?be:(null!==gt.window&&gt.wbits!==ht&&(gt.window=null),gt.wrap=ct,gt.wbits=ht,F(ut)):be}function $(ut,ht){var ct,gt;return ut?(gt=new R,ut.state=gt,gt.window=null,ct=O(ut,ht),ct!==pe&&(ut.state=null),ct):be}function W(ut){if(st){var ht;for(ot=new ne.Buf32(512),lt=new ne.Buf32(32),ht=0;144>ht;)ut.lens[ht++]=8;for(;256>ht;)ut.lens[ht++]=9;for(;280>ht;)ut.lens[ht++]=7;for(;288>ht;)ut.lens[ht++]=8;for(le(ue,ut.lens,0,288,ot,0,ut.work,{bits:9}),ht=0;32>ht;)ut.lens[ht++]=5;le(he,ut.lens,0,32,lt,0,ut.work,{bits:5}),st=!1}ut.lencode=ot,ut.lenbits=9,ut.distcode=lt,ut.distbits=5}function K(ut,ht,ct,gt){var pt=ut.state,mt;return null===pt.window&&(pt.wsize=1<<pt.wbits,pt.wnext=0,pt.whave=0,pt.window=new ne.Buf8(pt.wsize)),gt>=pt.wsize?(ne.arraySet(pt.window,ht,ct-pt.wsize,pt.wsize,0),pt.wnext=0,pt.whave=pt.wsize):(mt=pt.wsize-pt.wnext,mt>gt&&(mt=gt),ne.arraySet(pt.window,ht,ct-gt,mt,pt.wnext),gt-=mt,gt?(ne.arraySet(pt.window,ht,ct-gt,gt,0),pt.wnext=gt,pt.whave=pt.wsize):(pt.wnext+=mt,pt.wnext===pt.wsize&&(pt.wnext=0),pt.whave<pt.wsize&&(pt.whave+=mt))),0}var ne=I(1),ae=I(45),se=I(47),oe=I(123),le=I(125),ue=1,he=2,ce=4,me=6,pe=0,be=-2,ye=-3,_e=-4,je=8,we=1,Se=2,ve=3,Ee=4,De=5,Ce=6,Ae=7,Ie=8,Pe=9,Re=10,Te=11,Fe=12,ze=13,Me=14,Xe=15,Ne=16,Ye=17,Oe=18,Le=19,Ue=20,Be=21,Ve=22,qe=23,$e=24,Ze=25,We=26,He=27,Je=28,Ke=29,Qe=30,Ge=31,tt=852,it=592,st=!0,ot,lt;D.inflateReset=F,D.inflateReset2=O,D.inflateResetKeep=T,D.inflateInit=function(ut){return $(ut,15)},D.inflateInit2=$,D.inflate=function(ut,ht){var Dt=0,Mt=new ne.Buf8(4),Yt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ct,gt,mt,pt,xt,bt,yt,_t,kt,jt,wt,St,vt,Et,Ct,At,It,Pt,Rt,Tt,Ft,zt,Xt,Nt;if(!ut||!ut.state||!ut.output||!ut.input&&0!==ut.avail_in)return be;ct=ut.state,ct.mode===Fe&&(ct.mode=ze),xt=ut.next_out,mt=ut.output,yt=ut.avail_out,pt=ut.next_in,gt=ut.input,bt=ut.avail_in,_t=ct.hold,kt=ct.bits,jt=bt,wt=yt,zt=pe;inf_leave:for(;;)switch(ct.mode){case we:if(0===ct.wrap){ct.mode=ze;break}for(;16>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}if(2&ct.wrap&&35615===_t){ct.check=0,Mt[0]=255&_t,Mt[1]=255&_t>>>8,ct.check=se(ct.check,Mt,2,0),_t=0,kt=0,ct.mode=Se;break}if(ct.flags=0,ct.head&&(ct.head.done=!1),!(1&ct.wrap)||(((255&_t)<<8)+(_t>>8))%31){ut.msg='incorrect header check',ct.mode=Qe;break}if((15&_t)!==je){ut.msg='unknown compression method',ct.mode=Qe;break}if(_t>>>=4,kt-=4,Ft=(15&_t)+8,0===ct.wbits)ct.wbits=Ft;else if(Ft>ct.wbits){ut.msg='invalid window size',ct.mode=Qe;break}ct.dmax=1<<Ft,ut.adler=ct.check=1,ct.mode=512&_t?Re:Fe,_t=0,kt=0;break;case Se:for(;16>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}if(ct.flags=_t,(255&ct.flags)!==je){ut.msg='unknown compression method',ct.mode=Qe;break}if(57344&ct.flags){ut.msg='unknown header flags set',ct.mode=Qe;break}ct.head&&(ct.head.text=1&_t>>8),512&ct.flags&&(Mt[0]=255&_t,Mt[1]=255&_t>>>8,ct.check=se(ct.check,Mt,2,0)),_t=0,kt=0,ct.mode=ve;case ve:for(;32>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}ct.head&&(ct.head.time=_t),512&ct.flags&&(Mt[0]=255&_t,Mt[1]=255&_t>>>8,Mt[2]=255&_t>>>16,Mt[3]=255&_t>>>24,ct.check=se(ct.check,Mt,4,0)),_t=0,kt=0,ct.mode=Ee;case Ee:for(;16>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}ct.head&&(ct.head.xflags=255&_t,ct.head.os=_t>>8),512&ct.flags&&(Mt[0]=255&_t,Mt[1]=255&_t>>>8,ct.check=se(ct.check,Mt,2,0)),_t=0,kt=0,ct.mode=De;case De:if(1024&ct.flags){for(;16>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}ct.length=_t,ct.head&&(ct.head.extra_len=_t),512&ct.flags&&(Mt[0]=255&_t,Mt[1]=255&_t>>>8,ct.check=se(ct.check,Mt,2,0)),_t=0,kt=0}else ct.head&&(ct.head.extra=null);ct.mode=Ce;case Ce:if(1024&ct.flags&&(St=ct.length,St>bt&&(St=bt),St&&(ct.head&&(Ft=ct.head.extra_len-ct.length,!ct.head.extra&&(ct.head.extra=Array(ct.head.extra_len)),ne.arraySet(ct.head.extra,gt,pt,St,Ft)),512&ct.flags&&(ct.check=se(ct.check,gt,St,pt)),bt-=St,pt+=St,ct.length-=St),ct.length))break inf_leave;ct.length=0,ct.mode=Ae;case Ae:if(2048&ct.flags){if(0===bt)break inf_leave;St=0;do Ft=gt[pt+St++],ct.head&&Ft&&65536>ct.length&&(ct.head.name+=String.fromCharCode(Ft));while(Ft&&St<bt);if(512&ct.flags&&(ct.check=se(ct.check,gt,St,pt)),bt-=St,pt+=St,Ft)break inf_leave}else ct.head&&(ct.head.name=null);ct.length=0,ct.mode=Ie;case Ie:if(4096&ct.flags){if(0===bt)break inf_leave;St=0;do Ft=gt[pt+St++],ct.head&&Ft&&65536>ct.length&&(ct.head.comment+=String.fromCharCode(Ft));while(Ft&&St<bt);if(512&ct.flags&&(ct.check=se(ct.check,gt,St,pt)),bt-=St,pt+=St,Ft)break inf_leave}else ct.head&&(ct.head.comment=null);ct.mode=Pe;case Pe:if(512&ct.flags){for(;16>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}if(_t!==(65535&ct.check)){ut.msg='header crc mismatch',ct.mode=Qe;break}_t=0,kt=0}ct.head&&(ct.head.hcrc=1&ct.flags>>9,ct.head.done=!0),ut.adler=ct.check=0,ct.mode=Fe;break;case Re:for(;32>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}ut.adler=ct.check=P(_t),_t=0,kt=0,ct.mode=Te;case Te:if(0===ct.havedict)return ut.next_out=xt,ut.avail_out=yt,ut.next_in=pt,ut.avail_in=bt,ct.hold=_t,ct.bits=kt,2;ut.adler=ct.check=1,ct.mode=Fe;case Fe:if(ht===5||ht===me)break inf_leave;case ze:if(ct.last){_t>>>=7&kt,kt-=7&kt,ct.mode=He;break}for(;3>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}switch(ct.last=1&_t,_t>>>=1,kt-=1,3&_t){case 0:ct.mode=Me;break;case 1:if(W(ct),ct.mode=Ue,ht===me){_t>>>=2,kt-=2;break inf_leave}break;case 2:ct.mode=Ye;break;case 3:ut.msg='invalid block type',ct.mode=Qe;}_t>>>=2,kt-=2;break;case Me:for(_t>>>=7&kt,kt-=7&kt;32>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}if((65535&_t)!=(65535^_t>>>16)){ut.msg='invalid stored block lengths',ct.mode=Qe;break}if(ct.length=65535&_t,_t=0,kt=0,ct.mode=Xe,ht===me)break inf_leave;case Xe:ct.mode=Ne;case Ne:if(St=ct.length,St){if(St>bt&&(St=bt),St>yt&&(St=yt),0===St)break inf_leave;ne.arraySet(mt,gt,pt,St,xt),bt-=St,pt+=St,yt-=St,xt+=St,ct.length-=St;break}ct.mode=Fe;break;case Ye:for(;14>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}if(ct.nlen=(31&_t)+257,_t>>>=5,kt-=5,ct.ndist=(31&_t)+1,_t>>>=5,kt-=5,ct.ncode=(15&_t)+4,_t>>>=4,kt-=4,286<ct.nlen||30<ct.ndist){ut.msg='too many length or distance symbols',ct.mode=Qe;break}ct.have=0,ct.mode=Oe;case Oe:for(;ct.have<ct.ncode;){for(;3>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}ct.lens[Yt[ct.have++]]=7&_t,_t>>>=3,kt-=3}for(;19>ct.have;)ct.lens[Yt[ct.have++]]=0;if(ct.lencode=ct.lendyn,ct.lenbits=7,Xt={bits:ct.lenbits},zt=le(0,ct.lens,0,19,ct.lencode,0,ct.work,Xt),ct.lenbits=Xt.bits,zt){ut.msg='invalid code lengths set',ct.mode=Qe;break}ct.have=0,ct.mode=Le;case Le:for(;ct.have<ct.nlen+ct.ndist;){for(;;){if(Dt=ct.lencode[_t&(1<<ct.lenbits)-1],Ct=Dt>>>24,At=255&Dt>>>16,It=65535&Dt,Ct<=kt)break;if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}if(16>It)_t>>>=Ct,kt-=Ct,ct.lens[ct.have++]=It;else{if(16===It){for(Nt=Ct+2;kt<Nt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}if(_t>>>=Ct,kt-=Ct,0===ct.have){ut.msg='invalid bit length repeat',ct.mode=Qe;break}Ft=ct.lens[ct.have-1],St=3+(3&_t),_t>>>=2,kt-=2}else if(17===It){for(Nt=Ct+3;kt<Nt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}_t>>>=Ct,kt-=Ct,Ft=0,St=3+(7&_t),_t>>>=3,kt-=3}else{for(Nt=Ct+7;kt<Nt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}_t>>>=Ct,kt-=Ct,Ft=0,St=11+(127&_t),_t>>>=7,kt-=7}if(ct.have+St>ct.nlen+ct.ndist){ut.msg='invalid bit length repeat',ct.mode=Qe;break}for(;St--;)ct.lens[ct.have++]=Ft}}if(ct.mode===Qe)break;if(0===ct.lens[256]){ut.msg='invalid code -- missing end-of-block',ct.mode=Qe;break}if(ct.lenbits=9,Xt={bits:ct.lenbits},zt=le(ue,ct.lens,0,ct.nlen,ct.lencode,0,ct.work,Xt),ct.lenbits=Xt.bits,zt){ut.msg='invalid literal/lengths set',ct.mode=Qe;break}if(ct.distbits=6,ct.distcode=ct.distdyn,Xt={bits:ct.distbits},zt=le(he,ct.lens,ct.nlen,ct.ndist,ct.distcode,0,ct.work,Xt),ct.distbits=Xt.bits,zt){ut.msg='invalid distances set',ct.mode=Qe;break}if(ct.mode=Ue,ht===me)break inf_leave;case Ue:ct.mode=Be;case Be:if(6<=bt&&258<=yt){ut.next_out=xt,ut.avail_out=yt,ut.next_in=pt,ut.avail_in=bt,ct.hold=_t,ct.bits=kt,oe(ut,wt),xt=ut.next_out,mt=ut.output,yt=ut.avail_out,pt=ut.next_in,gt=ut.input,bt=ut.avail_in,_t=ct.hold,kt=ct.bits,ct.mode===Fe&&(ct.back=-1);break}for(ct.back=0;;){if(Dt=ct.lencode[_t&(1<<ct.lenbits)-1],Ct=Dt>>>24,At=255&Dt>>>16,It=65535&Dt,Ct<=kt)break;if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}if(At&&0==(240&At)){for(Pt=Ct,Rt=At,Tt=It;;){if(Dt=ct.lencode[Tt+((_t&(1<<Pt+Rt)-1)>>Pt)],Ct=Dt>>>24,At=255&Dt>>>16,It=65535&Dt,Pt+Ct<=kt)break;if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}_t>>>=Pt,kt-=Pt,ct.back+=Pt}if(_t>>>=Ct,kt-=Ct,ct.back+=Ct,ct.length=It,0===At){ct.mode=We;break}if(32&At){ct.back=-1,ct.mode=Fe;break}if(64&At){ut.msg='invalid literal/length code',ct.mode=Qe;break}ct.extra=15&At,ct.mode=Ve;case Ve:if(ct.extra){for(Nt=ct.extra;kt<Nt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}ct.length+=_t&(1<<ct.extra)-1,_t>>>=ct.extra,kt-=ct.extra,ct.back+=ct.extra}ct.was=ct.length,ct.mode=qe;case qe:for(;;){if(Dt=ct.distcode[_t&(1<<ct.distbits)-1],Ct=Dt>>>24,At=255&Dt>>>16,It=65535&Dt,Ct<=kt)break;if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}if(0==(240&At)){for(Pt=Ct,Rt=At,Tt=It;;){if(Dt=ct.distcode[Tt+((_t&(1<<Pt+Rt)-1)>>Pt)],Ct=Dt>>>24,At=255&Dt>>>16,It=65535&Dt,Pt+Ct<=kt)break;if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}_t>>>=Pt,kt-=Pt,ct.back+=Pt}if(_t>>>=Ct,kt-=Ct,ct.back+=Ct,64&At){ut.msg='invalid distance code',ct.mode=Qe;break}ct.offset=It,ct.extra=15&At,ct.mode=$e;case $e:if(ct.extra){for(Nt=ct.extra;kt<Nt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}ct.offset+=_t&(1<<ct.extra)-1,_t>>>=ct.extra,kt-=ct.extra,ct.back+=ct.extra}if(ct.offset>ct.dmax){ut.msg='invalid distance too far back',ct.mode=Qe;break}ct.mode=Ze;case Ze:if(0===yt)break inf_leave;if(St=wt-yt,ct.offset>St){if(St=ct.offset-St,St>ct.whave&&ct.sane){ut.msg='invalid distance too far back',ct.mode=Qe;break}St>ct.wnext?(St-=ct.wnext,vt=ct.wsize-St):vt=ct.wnext-St,St>ct.length&&(St=ct.length),Et=ct.window}else Et=mt,vt=xt-ct.offset,St=ct.length;St>yt&&(St=yt),yt-=St,ct.length-=St;do mt[xt++]=Et[vt++];while(--St);0===ct.length&&(ct.mode=Be);break;case We:if(0===yt)break inf_leave;mt[xt++]=ct.length,yt--,ct.mode=Be;break;case He:if(ct.wrap){for(;32>kt;){if(0===bt)break inf_leave;bt--,_t|=gt[pt++]<<kt,kt+=8}if(wt-=yt,ut.total_out+=wt,ct.total+=wt,wt&&(ut.adler=ct.check=ct.flags?se(ct.check,mt,wt,xt-wt):ae(ct.check,mt,wt,xt-wt)),wt=yt,(ct.flags?_t:P(_t))!==ct.check){ut.msg='incorrect data check',ct.mode=Qe;break}_t=0,kt=0}ct.mode=Je;case Je:if(ct.wrap&&ct.flags){for(;32>kt;){if(0===bt)break inf_leave;bt--,_t+=gt[pt++]<<kt,kt+=8}if(_t!==(4294967295&ct.total)){ut.msg='incorrect length check',ct.mode=Qe;break}_t=0,kt=0}ct.mode=Ke;case Ke:zt=1;break inf_leave;case Qe:zt=ye;break inf_leave;case Ge:return _e;case 32:default:return be;}return(ut.next_out=xt,ut.avail_out=yt,ut.next_in=pt,ut.avail_in=bt,ct.hold=_t,ct.bits=kt,(ct.wsize||wt!==ut.avail_out&&ct.mode<Qe&&(ct.mode<He||ht!==ce))&&K(ut,ut.output,ut.next_out,wt-ut.avail_out))?(ct.mode=Ge,_e):(jt-=ut.avail_in,wt-=ut.avail_out,ut.total_in+=jt,ut.total_out+=wt,ct.total+=wt,ct.wrap&&wt&&(ut.adler=ct.check=ct.flags?se(ct.check,mt,wt,ut.next_out-wt):ae(ct.check,mt,wt,ut.next_out-wt)),ut.data_type=ct.bits+(ct.last?64:0)+(ct.mode===Fe?128:0)+(ct.mode===Ue||ct.mode===Xe?256:0),(0===jt&&0===wt||ht===ce)&&zt===pe&&(zt=-5),zt)},D.inflateEnd=function(ut){if(!ut||!ut.state)return be;var ht=ut.state;return ht.window&&(ht.window=null),ut.state=null,pe},D.inflateGetHeader=function(ut,ht){var ct;return ut&&ut.state?(ct=ut.state,0==(2&ct.wrap))?be:(ct.head=ht,ht.done=!1,pe):be},D.inflateSetDictionary=function(ut,ht){var ct=ht.length,gt,mt,pt;return ut&&ut.state?(gt=ut.state,0!==gt.wrap&&gt.mode!==Te)?be:gt.mode===Te&&(mt=1,mt=ae(mt,ht,ct,0),mt!==gt.check)?ye:(pt=K(ut,ht,ct,ct),pt)?(gt.mode=Ge,_e):(gt.havedict=1,pe):be},D.inflateInfo='pako inflate (from Nodeca project)'},function(E,D,I){'use strict';var P=I(1),R=15,T=852,F=592,O=0,$=1,Z=2,W=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],K=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],G=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];E.exports=function(te,ne,ae,se,oe,le,de,ue){var he=ue.bits,ce=0,ge=0,me=0,pe=0,fe=0,xe=0,be=0,ye=0,_e=0,ke=0,De=null,Ce=0,Ie=new P.Buf16(R+1),Pe=new P.Buf16(R+1),Re=null,Te=0,je,we,Se,ve,Ee,Ae,Fe,ze,Me;for(ce=0;ce<=R;ce++)Ie[ce]=0;for(ge=0;ge<se;ge++)Ie[ne[ae+ge]]++;for(fe=he,pe=R;1<=pe&&0===Ie[pe];pe--);if(fe>pe&&(fe=pe),0==pe)return oe[le++]=20971520,oe[le++]=20971520,ue.bits=1,0;for(me=1;me<pe&&0===Ie[me];me++);for(fe<me&&(fe=me),ye=1,ce=1;ce<=R;ce++)if(ye<<=1,ye-=Ie[ce],0>ye)return-1;if(0<ye&&(te===O||1!=pe))return-1;for(Pe[1]=0,ce=1;ce<R;ce++)Pe[ce+1]=Pe[ce]+Ie[ce];for(ge=0;ge<se;ge++)0!==ne[ae+ge]&&(de[Pe[ne[ae+ge]]++]=ge);if(te===O?(De=Re=de,Ae=19):te===$?(De=W,Ce-=257,Re=K,Te-=257,Ae=256):(De=Q,Re=G,Ae=-1),ke=0,ge=0,ce=me,Ee=le,xe=fe,be=0,Se=-1,_e=1<<fe,ve=_e-1,te===$&&_e>T||te===Z&&_e>F)return 1;for(;;){Fe=ce-be,de[ge]<Ae?(ze=0,Me=de[ge]):de[ge]>Ae?(ze=Re[Te+de[ge]],Me=De[Ce+de[ge]]):(ze=96,Me=0),je=1<<ce-be,we=1<<xe,me=we;do we-=je,oe[Ee+(ke>>be)+we]=0|(Fe<<24|ze<<16|Me);while(0!==we);for(je=1<<ce-1;ke&je;)je>>=1;if(0===je?ke=0:(ke&=je-1,ke+=je),ge++,0==--Ie[ce]){if(ce==pe)break;ce=ne[ae+de[ge]]}if(ce>fe&&(ke&ve)!==Se){for(0==be&&(be=fe),Ee+=me,xe=ce-be,ye=1<<xe;xe+be<pe&&(ye-=Ie[xe+be],!(0>=ye));)xe++,ye<<=1;if(_e+=1<<xe,te===$&&_e>T||te===Z&&_e>F)return 1;Se=ke&ve,oe[Se]=0|(fe<<24|xe<<16|Ee-le)}}return 0!=ke&&(oe[Ee+ke]=0|(4194304|ce-be<<24)),ue.bits=fe,0}},function(E,D,I){'use strict';function P(at){for(var st=at.length;0<=--st;)at[st]=0}function R(at,st,ot,lt,ut){this.static_tree=at,this.extra_bits=st,this.extra_base=ot,this.elems=lt,this.max_length=ut,this.has_stree=at&&at.length}function T(at,st){this.dyn_tree=at,this.max_code=0,this.stat_desc=st}function F(at){return 256>at?Je[at]:Je[256+(at>>>7)]}function O(at,st){at.pending_buf[at.pending++]=255&st,at.pending_buf[at.pending++]=255&st>>>8}function $(at,st,ot){at.bi_valid>Xe-ot?(at.bi_buf|=65535&st<<at.bi_valid,O(at,at.bi_buf),at.bi_buf=st>>Xe-at.bi_valid,at.bi_valid+=ot-Xe):(at.bi_buf|=65535&st<<at.bi_valid,at.bi_valid+=ot)}function Z(at,st,ot){$(at,ot[2*st],ot[2*st+1])}function W(at,st){var ot=0;do ot|=1&at,at>>>=1,ot<<=1;while(0<--st);return ot>>>1}function K(at){16===at.bi_valid?(O(at,at.bi_buf),at.bi_buf=0,at.bi_valid=0):8<=at.bi_valid&&(at.pending_buf[at.pending++]=255&at.bi_buf,at.bi_buf>>=8,at.bi_valid-=8)}function Q(at,st){var ot=st.dyn_tree,lt=st.max_code,ut=st.stat_desc.static_tree,ht=st.stat_desc.has_stree,ct=st.stat_desc.extra_bits,gt=st.stat_desc.extra_base,mt=st.stat_desc.max_length,pt,xt,bt,yt,_t,kt,jt=0;for(yt=0;yt<=Me;yt++)at.bl_count[yt]=0;for(ot[2*at.heap[at.heap_max]+1]=0,pt=at.heap_max+1;pt<ze;pt++)(xt=at.heap[pt],yt=ot[2*ot[2*xt+1]+1]+1,yt>mt&&(yt=mt,jt++),ot[2*xt+1]=yt,!(xt>lt))&&(at.bl_count[yt]++,_t=0,xt>=gt&&(_t=ct[xt-gt]),kt=ot[2*xt],at.opt_len+=kt*(yt+_t),ht&&(at.static_len+=kt*(ut[2*xt+1]+_t)));if(0!=jt){do{for(yt=mt-1;0===at.bl_count[yt];)yt--;at.bl_count[yt]--,at.bl_count[yt+1]+=2,at.bl_count[mt]--,jt-=2}while(0<jt);for(yt=mt;0!==yt;yt--)for(xt=at.bl_count[yt];0!==xt;)(bt=at.heap[--pt],!(bt>lt))&&(ot[2*bt+1]!==yt&&(at.opt_len+=(yt-ot[2*bt+1])*ot[2*bt],ot[2*bt+1]=yt),xt--)}}function G(at,st,ot){var lt=Array(Me+1),ut=0,ht,ct;for(ht=1;ht<=Me;ht++)lt[ht]=ut=ut+ot[ht-1]<<1;for(ct=0;ct<=st;ct++){var gt=at[2*ct+1];0!==gt&&(at[2*ct]=W(lt[gt]++,gt))}}function ee(){var at,st,ot,lt,ut,ht=Array(Me+1);for(ot=0,lt=0;lt<Ie-1;lt++)for(Qe[lt]=ot,at=0;at<1<<Be[lt];at++)Ke[ot++]=lt;for(Ke[ot-1]=lt,ut=0,lt=0;16>lt;lt++)for(Ge[lt]=ut,at=0;at<1<<Ve[lt];at++)Je[ut++]=lt;for(ut>>=7;lt<Te;lt++)for(Ge[lt]=ut<<7,at=0;at<1<<Ve[lt]-7;at++)Je[256+ut++]=lt;for(st=0;st<=Me;st++)ht[st]=0;for(at=0;143>=at;)We[2*at+1]=8,at++,ht[8]++;for(;255>=at;)We[2*at+1]=9,at++,ht[9]++;for(;279>=at;)We[2*at+1]=7,at++,ht[7]++;for(;287>=at;)We[2*at+1]=8,at++,ht[8]++;for(G(We,Re+1,ht),at=0;at<Te;at++)He[2*at+1]=5,He[2*at]=W(at,5);et=new R(We,Be,Pe+1,Re,Me),tt=new R(He,Ve,0,Te,Me),it=new R([],qe,0,Fe,Ne)}function te(at){var st;for(st=0;st<Re;st++)at.dyn_ltree[2*st]=0;for(st=0;st<Te;st++)at.dyn_dtree[2*st]=0;for(st=0;st<Fe;st++)at.bl_tree[2*st]=0;at.dyn_ltree[2*Ye]=1,at.opt_len=at.static_len=0,at.last_lit=at.matches=0}function ne(at){8<at.bi_valid?O(at,at.bi_buf):0<at.bi_valid&&(at.pending_buf[at.pending++]=at.bi_buf),at.bi_buf=0,at.bi_valid=0}function ae(at,st,ot,lt){ne(at),lt&&(O(at,ot),O(at,~ot)),_e.arraySet(at.pending_buf,at.window,st,ot,at.pending),at.pending+=ot}function se(at,st,ot,lt){var ut=2*st,ht=2*ot;return at[ut]<at[ht]||at[ut]===at[ht]&&lt[st]<=lt[ot]}function oe(at,st,ot){for(var lt=at.heap[ot],ut=ot<<1;ut<=at.heap_len&&(ut<at.heap_len&&se(st,at.heap[ut+1],at.heap[ut],at.depth)&&ut++,!se(st,lt,at.heap[ut],at.depth));)at.heap[ot]=at.heap[ut],ot=ut,ut<<=1;at.heap[ot]=lt}function le(at,st,ot){var lt,ut,ht=0,ct,gt;if(0!==at.last_lit)do lt=at.pending_buf[at.d_buf+2*ht]<<8|at.pending_buf[at.d_buf+2*ht+1],ut=at.pending_buf[at.l_buf+ht],ht++,0===lt?Z(at,ut,st):(ct=Ke[ut],Z(at,ct+Pe+1,st),gt=Be[ct],0!==gt&&(ut-=Qe[ct],$(at,ut,gt)),lt--,ct=F(lt),Z(at,ct,ot),gt=Ve[ct],0!==gt&&(lt-=Ge[ct],$(at,lt,gt)));while(ht<at.last_lit);Z(at,Ye,st)}function de(at,st){var ot=st.dyn_tree,lt=st.stat_desc.static_tree,ut=st.stat_desc.has_stree,ht=st.stat_desc.elems,ct,gt,mt=-1,pt;for(at.heap_len=0,at.heap_max=ze,ct=0;ct<ht;ct++)0===ot[2*ct]?ot[2*ct+1]=0:(at.heap[++at.heap_len]=mt=ct,at.depth[ct]=0);for(;2>at.heap_len;)pt=at.heap[++at.heap_len]=2>mt?++mt:0,ot[2*pt]=1,at.depth[pt]=0,at.opt_len--,ut&&(at.static_len-=lt[2*pt+1]);for(st.max_code=mt,ct=at.heap_len>>1;1<=ct;ct--)oe(at,ot,ct);pt=ht;do ct=at.heap[1],at.heap[1]=at.heap[at.heap_len--],oe(at,ot,1),gt=at.heap[1],at.heap[--at.heap_max]=ct,at.heap[--at.heap_max]=gt,ot[2*pt]=ot[2*ct]+ot[2*gt],at.depth[pt]=(at.depth[ct]>=at.depth[gt]?at.depth[ct]:at.depth[gt])+1,ot[2*ct+1]=ot[2*gt+1]=pt,at.heap[1]=pt++,oe(at,ot,1);while(2<=at.heap_len);at.heap[--at.heap_max]=at.heap[1],Q(at,st),G(ot,mt,at.bl_count)}function ue(at,st,ot){var lt,ut=-1,ht,ct=st[1],gt=0,mt=7,pt=4;for(0===ct&&(mt=138,pt=3),st[2*(ot+1)+1]=65535,lt=0;lt<=ot;lt++){if(ht=ct,ct=st[2*(lt+1)+1],++gt<mt&&ht===ct)continue;else gt<pt?at.bl_tree[2*ht]+=gt:0===ht?10>=gt?at.bl_tree[2*Le]++:at.bl_tree[2*Ue]++:(ht!==ut&&at.bl_tree[2*ht]++,at.bl_tree[2*Oe]++);gt=0,ut=ht,0===ct?(mt=138,pt=3):ht===ct?(mt=6,pt=3):(mt=7,pt=4)}}function he(at,st,ot){var lt,ut=-1,ht,ct=st[1],gt=0,mt=7,pt=4;for(0===ct&&(mt=138,pt=3),lt=0;lt<=ot;lt++){if(ht=ct,ct=st[2*(lt+1)+1],++gt<mt&&ht===ct)continue;else if(gt<pt)do Z(at,ht,at.bl_tree);while(0!=--gt);else 0===ht?10>=gt?(Z(at,Le,at.bl_tree),$(at,gt-3,3)):(Z(at,Ue,at.bl_tree),$(at,gt-11,7)):(ht!==ut&&(Z(at,ht,at.bl_tree),gt--),Z(at,Oe,at.bl_tree),$(at,gt-3,2));gt=0,ut=ht,0===ct?(mt=138,pt=3):ht===ct?(mt=6,pt=3):(mt=7,pt=4)}}function ce(at){var st;for(ue(at,at.dyn_ltree,at.l_desc.max_code),ue(at,at.dyn_dtree,at.d_desc.max_code),de(at,at.bl_desc),st=Fe-1;3<=st&&0===at.bl_tree[2*$e[st]+1];st--);return at.opt_len+=3*(st+1)+5+5+4,st}function ge(at,st,ot,lt){var ut;for($(at,st-257,5),$(at,ot-1,5),$(at,lt-4,4),ut=0;ut<lt;ut++)$(at,at.bl_tree[2*$e[ut]+1],3);he(at,at.dyn_ltree,st-1),he(at,at.dyn_dtree,ot-1)}function me(at){var st=4093624447,ot;for(ot=0;31>=ot;ot++,st>>>=1)if(1&st&&0!==at.dyn_ltree[2*ot])return je;if(0!==at.dyn_ltree[18]||0!==at.dyn_ltree[20]||0!==at.dyn_ltree[26])return we;for(ot=32;ot<Pe;ot++)if(0!==at.dyn_ltree[2*ot])return we;return je}function fe(at,st,ot,lt){$(at,(ve<<1)+(lt?1:0),3),ae(at,st,ot,!0)}var _e=I(1),je=0,we=1,ve=0,Ee=1,Ie=29,Pe=256,Re=Pe+1+Ie,Te=30,Fe=19,ze=2*Re+1,Me=15,Xe=16,Ne=7,Ye=256,Oe=16,Le=17,Ue=18,Be=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ve=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],We=Array(2*(Re+2));P(We);var He=Array(2*Te);P(He);var Je=Array(512);P(Je);var Ke=Array(258-3+1);P(Ke);var Qe=Array(Ie);P(Qe);var Ge=Array(Te);P(Ge);var et,tt,it,nt=!1;D._tr_init=function(at){nt||(ee(),nt=!0),at.l_desc=new T(at.dyn_ltree,et),at.d_desc=new T(at.dyn_dtree,tt),at.bl_desc=new T(at.bl_tree,it),at.bi_buf=0,at.bi_valid=0,te(at)},D._tr_stored_block=fe,D._tr_flush_block=function(at,st,ot,lt){var ut,ht,ct=0;0<at.level?(at.strm.data_type===2&&(at.strm.data_type=me(at)),de(at,at.l_desc),de(at,at.d_desc),ct=ce(at),ut=at.opt_len+3+7>>>3,ht=at.static_len+3+7>>>3,ht<=ut&&(ut=ht)):ut=ht=ot+5,ot+4<=ut&&-1!==st?fe(at,st,ot,lt):at.strategy===4||ht===ut?($(at,(Ee<<1)+(lt?1:0),3),le(at,We,He)):($(at,(2<<1)+(lt?1:0),3),ge(at,at.l_desc.max_code+1,at.d_desc.max_code+1,ct+1),le(at,at.dyn_ltree,at.dyn_dtree)),te(at),lt&&ne(at)},D._tr_tally=function(at,st,ot){return at.pending_buf[at.d_buf+2*at.last_lit]=255&st>>>8,at.pending_buf[at.d_buf+2*at.last_lit+1]=255&st,at.pending_buf[at.l_buf+at.last_lit]=255&ot,at.last_lit++,0===st?at.dyn_ltree[2*ot]++:(at.matches++,st--,at.dyn_ltree[2*(Ke[ot]+Pe+1)]++,at.dyn_dtree[2*F(st)]++),at.last_lit===at.lit_bufsize-1},D._tr_align=function(at){$(at,Ee<<1,3),Z(at,Ye,We),K(at)}},function(E){function I(){throw new Error('setTimeout has not been defined')}function P(){throw new Error('clearTimeout has not been defined')}function R(ae){if(K===setTimeout)return setTimeout(ae,0);if((K===I||!K)&&setTimeout)return K=setTimeout,setTimeout(ae,0);try{return K(ae,0)}catch(se){try{return K.call(null,ae,0)}catch(oe){return K.call(this,ae,0)}}}function T(ae){if(Q===clearTimeout)return clearTimeout(ae);if((Q===P||!Q)&&clearTimeout)return Q=clearTimeout,clearTimeout(ae);try{return Q(ae)}catch(se){try{return Q.call(null,ae)}catch(oe){return Q.call(this,ae)}}}function F(){ee&&te&&(ee=!1,te.length?G=te.concat(G):ne=-1,G.length&&O())}function O(){if(!ee){var ae=R(F);ee=!0;for(var se=G.length;se;){for(te=G,G=[];++ne<se;)te&&te[ne].run();ne=-1,se=G.length}te=null,ee=!1,T(ae)}}function $(ae,se){this.fun=ae,this.array=se}function Z(){}var W=E.exports={},K,Q;(function(){try{K='function'==typeof setTimeout?setTimeout:I}catch(ae){K=I}try{Q='function'==typeof clearTimeout?clearTimeout:P}catch(ae){Q=P}})();var G=[],ee=!1,te,ne=-1;W.nextTick=function(ae){var se=Array(arguments.length-1);if(1<arguments.length)for(var oe=1;oe<arguments.length;oe++)se[oe-1]=arguments[oe];G.push(new $(ae,se)),1!==G.length||ee||R(O)},$.prototype.run=function(){this.fun.apply(null,this.array)},W.title='browser',W.browser=!0,W.env={},W.argv=[],W.version='',W.versions={},W.on=Z,W.addListener=Z,W.once=Z,W.off=Z,W.removeListener=Z,W.removeAllListeners=Z,W.emit=Z,W.binding=function(){throw new Error('process.binding is not supported')},W.cwd=function(){return'/'},W.chdir=function(){throw new Error('process.chdir is not supported')},W.umask=function(){return 0}},function(E){E.exports='function'==typeof Object.create?function(P,R){P.super_=R,P.prototype=Object.create(R.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}})}:function(P,R){P.super_=R;var T=function(){};T.prototype=R.prototype,P.prototype=new T,P.prototype.constructor=P}},function(E){E.exports=function(P){return P&&'object'==typeof P&&'function'==typeof P.copy&&'function'==typeof P.fill&&'function'==typeof P.readUInt8}},function(E,D,I){(function(P,R){function T(ve,Ee){var De={seen:[],stylize:O};return 3<=arguments.length&&(De.depth=arguments[2]),4<=arguments.length&&(De.colors=arguments[3]),ne(Ee)?De.showHidden=Ee:Ee&&D._extend(De,Ee),ue(De.showHidden)&&(De.showHidden=!1),ue(De.depth)&&(De.depth=2),ue(De.colors)&&(De.colors=!1),ue(De.customInspect)&&(De.customInspect=!0),De.colors&&(De.stylize=F),Z(De,ve,De.depth)}function F(ve,Ee){var De=T.styles[Ee];return De?'\x1B['+T.colors[De][0]+'m'+ve+'\x1B['+T.colors[De][1]+'m':ve}function O(ve){return ve}function $(ve){var Ee={};return ve.forEach(function(De){Ee[De]=!0}),Ee}function Z(ve,Ee,De){if(ve.customInspect&&Ee&&pe(Ee.inspect)&&Ee.inspect!==D.inspect&&!(Ee.constructor&&Ee.constructor.prototype===Ee)){var Ce=Ee.inspect(De,ve);return le(Ce)||(Ce=Z(ve,Ce,De)),Ce}var Ae=W(ve,Ee);if(Ae)return Ae;var Ie=Object.keys(Ee),Pe=$(Ie);if(ve.showHidden&&(Ie=Object.getOwnPropertyNames(Ee)),me(Ee)&&(0<=Ie.indexOf('message')||0<=Ie.indexOf('description')))return K(Ee);if(0===Ie.length){if(pe(Ee)){var Re=Ee.name?': '+Ee.name:'';return ve.stylize('[Function'+Re+']','special')}if(he(Ee))return ve.stylize(RegExp.prototype.toString.call(Ee),'regexp');if(ge(Ee))return ve.stylize(Date.prototype.toString.call(Ee),'date');if(me(Ee))return K(Ee)}var Te='',Fe=!1,ze=['{','}'];if(te(Ee)&&(Fe=!0,ze=['[',']']),pe(Ee)){var Me=Ee.name?': '+Ee.name:'';Te=' [Function'+Me+']'}if(he(Ee)&&(Te=' '+RegExp.prototype.toString.call(Ee)),ge(Ee)&&(Te=' '+Date.prototype.toUTCString.call(Ee)),me(Ee)&&(Te=' '+K(Ee)),0===Ie.length&&(!Fe||0==Ee.length))return ze[0]+Te+ze[1];if(0>De)return he(Ee)?ve.stylize(RegExp.prototype.toString.call(Ee),'regexp'):ve.stylize('[Object]','special');ve.seen.push(Ee);var Xe;return Xe=Fe?Q(ve,Ee,De,Pe,Ie):Ie.map(function(Ne){return G(ve,Ee,De,Pe,Ne,Fe)}),ve.seen.pop(),ee(Xe,Te,ze)}function W(ve,Ee){if(ue(Ee))return ve.stylize('undefined','undefined');if(le(Ee)){var De='\''+JSON.stringify(Ee).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return ve.stylize(De,'string')}return oe(Ee)?ve.stylize(''+Ee,'number'):ne(Ee)?ve.stylize(''+Ee,'boolean'):ae(Ee)?ve.stylize('null','null'):void 0}function K(ve){return'['+Error.prototype.toString.call(ve)+']'}function Q(ve,Ee,De,Ce,Ae){for(var Ie=[],Pe=0,Re=Ee.length;Pe<Re;++Pe)_e(Ee,Pe+'')?Ie.push(G(ve,Ee,De,Ce,Pe+'',!0)):Ie.push('');return Ae.forEach(function(Te){Te.match(/^\d+$/)||Ie.push(G(ve,Ee,De,Ce,Te,!0))}),Ie}function G(ve,Ee,De,Ce,Ae,Ie){var Pe,Re,Te;if(Te=Object.getOwnPropertyDescriptor(Ee,Ae)||{value:Ee[Ae]},Te.get?Te.set?Re=ve.stylize('[Getter/Setter]','special'):Re=ve.stylize('[Getter]','special'):Te.set&&(Re=ve.stylize('[Setter]','special')),_e(Ce,Ae)||(Pe='['+Ae+']'),Re||(0>ve.seen.indexOf(Te.value)?(Re=ae(De)?Z(ve,Te.value,null):Z(ve,Te.value,De-1),-1<Re.indexOf('\n')&&(Ie?Re=Re.split('\n').map(function(Fe){return'  '+Fe}).join('\n').substr(2):Re='\n'+Re.split('\n').map(function(Fe){return'   '+Fe}).join('\n'))):Re=ve.stylize('[Circular]','special')),ue(Pe)){if(Ie&&Ae.match(/^\d+$/))return Re;Pe=JSON.stringify(''+Ae),Pe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Pe=Pe.substr(1,Pe.length-2),Pe=ve.stylize(Pe,'name')):(Pe=Pe.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),Pe=ve.stylize(Pe,'string'))}return Pe+': '+Re}function ee(ve,Ee,De){var Ce=0,Ae=ve.reduce(function(Ie,Pe){return Ce++,0<=Pe.indexOf('\n')&&Ce++,Ie+Pe.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<Ae?De[0]+(''===Ee?'':Ee+'\n ')+' '+ve.join(',\n  ')+' '+De[1]:De[0]+Ee+' '+ve.join(', ')+' '+De[1]}function te(ve){return Array.isArray(ve)}function ne(ve){return'boolean'==typeof ve}function ae(ve){return null===ve}function oe(ve){return'number'==typeof ve}function le(ve){return'string'==typeof ve}function ue(ve){return void 0===ve}function he(ve){return ce(ve)&&'[object RegExp]'===xe(ve)}function ce(ve){return'object'==typeof ve&&null!==ve}function ge(ve){return ce(ve)&&'[object Date]'===xe(ve)}function me(ve){return ce(ve)&&('[object Error]'===xe(ve)||ve instanceof Error)}function pe(ve){return'function'==typeof ve}function xe(ve){return Object.prototype.toString.call(ve)}function be(ve){return 10>ve?'0'+ve.toString(10):ve.toString(10)}function ye(){var ve=new Date,Ee=[be(ve.getHours()),be(ve.getMinutes()),be(ve.getSeconds())].join(':');return[ve.getDate(),Se[ve.getMonth()],Ee].join(' ')}function _e(ve,Ee){return Object.prototype.hasOwnProperty.call(ve,Ee)}var ke=/%[sdj%]/g;D.format=function(ve){if(!le(ve)){for(var Ee=[],De=0;De<arguments.length;De++)Ee.push(T(arguments[De]));return Ee.join(' ')}for(var De=1,Ce=arguments,Ae=Ce.length,Ie=(ve+'').replace(ke,function(Re){if('%%'===Re)return'%';if(De>=Ae)return Re;switch(Re){case'%s':return Ce[De++]+'';case'%d':return+Ce[De++];case'%j':try{return JSON.stringify(Ce[De++])}catch(Te){return'[Circular]'}default:return Re;}}),Pe=Ce[De];De<Ae;Pe=Ce[++De])Ie+=ae(Pe)||!ce(Pe)?' '+Pe:' '+T(Pe);return Ie},D.deprecate=function(ve,Ee){if(ue(P.process))return function(){return D.deprecate(ve,Ee).apply(this,arguments)};if(!0===R.noDeprecation)return ve;var Ce=!1;return function(){if(!Ce){if(R.throwDeprecation)throw new Error(Ee);else R.traceDeprecation?console.trace(Ee):console.error(Ee);Ce=!0}return ve.apply(this,arguments)}};var je={},we;D.debuglog=function(ve){if(ue(we)&&(we=R.env.NODE_DEBUG||''),ve=ve.toUpperCase(),!je[ve])if(new RegExp('\\b'+ve+'\\b','i').test(we)){var Ee=R.pid;je[ve]=function(){var De=D.format.apply(D,arguments);console.error('%s %d: %s',ve,Ee,De)}}else je[ve]=function(){};return je[ve]},D.inspect=T,T.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},T.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey','null':'bold',string:'green',date:'magenta',regexp:'red'},D.isArray=te,D.isBoolean=ne,D.isNull=ae,D.isNullOrUndefined=function(ve){return null==ve},D.isNumber=oe,D.isString=le,D.isSymbol=function(ve){return'symbol'==typeof ve},D.isUndefined=ue,D.isRegExp=he,D.isObject=ce,D.isDate=ge,D.isError=me,D.isFunction=pe,D.isPrimitive=function(ve){return null===ve||'boolean'==typeof ve||'number'==typeof ve||'string'==typeof ve||'symbol'==typeof ve||'undefined'==typeof ve},D.isBuffer=I(129);var Se=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];D.log=function(){console.log('%s - %s',ye(),D.format.apply(D,arguments))},D.inherits=I(128),D._extend=function(ve,Ee){if(!Ee||!ce(Ee))return ve;for(var De=Object.keys(Ee),Ce=De.length;Ce--;)ve[De[Ce]]=Ee[De[Ce]];return ve}}).call(D,I(49),I(127))},function(E){E.exports={name:'spectra-data',version:'3.0.2',description:'spectra-data project - manipulate spectra',keywords:['spectra-data','project'],author:'Andres Castillo',contributors:['Micha\xEBl Zasso','Luc Patiny'],repository:'cheminfo-js/spectra-data',bugs:{url:'https://github.com/cheminfo-js/spectra-data/issues'},homepage:'https://github.com/cheminfo-js/spectra-data',license:'MIT',main:'./src/index.js',scripts:{eslint:'eslint src test --cache','eslint-fix':'npm run eslint -- --fix',test:'npm run test-mocha','test-mocha':'mocha --compilers js:babel-register --require should --reporter mocha-better-spec-reporter --recursive src/**/__tests__/**/*.js','test-cov':'istanbul cover _mocha -- --compilers js:babel-register --require should --reporter dot --recursive src/**/__tests__/**/*.js','test-travis':'istanbul cover _mocha --report lcovonly -- --compilers js:babel-register --require should --reporter mocha-better-spec-reporter --recursive src/**/__tests__/**/*.js && npm run eslint',build:'cheminfo build'},devDependencies:{'babel-cli':'^6.2.0','babel-core':'^6.2.1','babel-plugin-transform-es2015-block-scoping':'^6.1.18','babel-preset-es2015-node4':'^2.0.1','babel-register':'^6.2.0',babelify:'^7.2.0',babili:'0.0.8','cheminfo-tools':'^1.13.0',eslint:'^3.9.1','eslint-config-cheminfo':'^1.5.2','eslint-plugin-no-only-tests':'^1.1.0',mocha:'^3.1.2','mocha-better-spec-reporter':'^3.0.1',should:'^11.1.1'},dependencies:{brukerconverter:'^1.0.1',extend:'^3.0.0',jcampconverter:'^2.4.5','ml-array-utils':'^0.3.0','ml-curve-fitting':'0.0.7','ml-fft':'^1.3.5','ml-gsd':'^2.0.1','ml-matrix':'^2.1.0','ml-matrix-peaks-finder':'^0.2.1','ml-simple-clustering':'0.1.0','ml-stat':'^1.3.0','nmr-auto-assignment':'0.1.3','nmr-predictor':'0.5.3','nmr-simulation':'0.2.2'}}},function(E){'use strict';E.exports=function(R,T){let F=Object.assign({},T);return F?R:R}},function(E,D,I){'use strict';var R=I(136);E.exports=function(T,F){let O=T.activeElement;var $=0;F.nbPoints?$=F.nbPoints:F.brukerFilter&&($=0);var Z=T.getNbSubSpectra();if(0!=$)for(var W=0;W<Z;W++)T.setActiveElement(W),R(T.getYData(),$),F.rotateX&&(R(T.getXData(),$),T.setFirstX(T.getX(0)),T.setLastX(T.getX(T.getNbPoints()-1)));return T.setActiveElement(O),T}},function(E,D,I){'use strict';function R(F,O){var $=F.getParamDouble('$BF1',NaN),Z=F.getParamDouble('$SFO1',NaN),W=F.getParamDouble('$SW',NaN),K=1e6*((Z-$)/$),Q=0.5*W*Z/$;F.setDataType(O),F.setFirstX(K+Q),F.setLastX(K-Q),F.setXUnits('PPM');var G=F.getXData(),ee=K+Q;Q=-2*Q/(G.length-1);for(var te=0;te<G.length;te++)G[te]=ee,ee+=Q}const T=I(34);E.exports=function(F){var O=F.getNbPoints(),$=F.getNbSubSpectra()/2,Z='NMR SPECTRUM',W=T.FFT;1<$&&(Z='nD NMR SPECTRUM'),W.init(O);for(var K=F.getParamDouble('$FCOR',0),Q=0;Q<$;Q++){var G=F.getYData(2*Q),ee=F.getYData(2*Q+1);G[0]*=K,ee[0]*=K,W.fft(G,ee),G=G.concat(G.slice(0,(O+1)/2)),G.splice(0,(O+1)/2),ee=ee.concat(ee.slice(0,(O+1)/2)),ee.splice(0,(O+1)/2),F.setActiveElement(2*Q),R(F,Z),F.setActiveElement(2*Q+1),R(F,Z)}return F.is2D(),F.setActiveElement(0),F}},function(E){'use strict';E.exports=function(R,T,F){T=Number.isFinite(T)?T:0,F=Number.isFinite(F)?F:0;for(var O=R.getNbPoints(),$=R.getYData(0),Z=R.getYData(1),W=F/O,K=2*Math.pow(Math.sin(W/2),2),Q=Math.sin(W),G=Math.cos(T),ee=Math.sin(T),le=0,te,ne,ae,se,oe;le<O;le++)oe=O-le-1,oe=le,ae=$[oe]*G-Z[oe]*ee,se=$[oe]*ee+Z[oe]*G,$[oe]=ae,Z[oe]=se,te=G-(K*G+Q*ee),ne=ee-(K*ee-Q*G),G=te,ee=ne;return R.resetMinMax(),R.putParam('PHC0',T),R.putParam('PHC1',F),R}},function(E){'use strict';function R(T,F){return 0>T&&(T+=F),T>=F&&(T-=F),T}E.exports=function(T,F){var O=T.length;if(F%=O,Math.abs(F)>O/2&&(F=0<F?F-O:F+O),0!==F)for(var $=0,Z=F,W=O,K=T[$],G=F,ee=0<F?1:-1,Q;0<W;)Z=R(Z,O),Q=T[Z],T[Z]=K,Z+=F,K=Q,W--,Z===G&&(Z=R(Z+ee,O),G=Z,$=R(Z-F,O),K=T[$])}},function(E){'use strict';E.exports=function(R,T){var F=R.getNbSubSpectra(),O,$,Z,W,K,Q;if(0!==T)for(var G=0;G<F;G++){for(R.setActiveElement(G),O=R.getNbPoints(),Q=R.getYData(),K=R.getXData(),$=R.getLastX(),Z=($-K[0])/(O-1),W=O;W<T;W++)Q.push(0),K.push($+Z);T<O&&(Q.splice(T,Q.length-1),K.splice(T,K.length-1)),R.setFirstX(K[0]),R.setLastX(K[K.length-1])}return R.setActiveElement(0),R}},function(E,D,I){'use strict';function P(K,Q,G,ee,te){var ne='',ae=K.getSpectraVariable(0),se=K.getSpectraVariable(1),oe=K.getSpectraVariable(2);ne+='##DATA CLASS= NTUPLES'+O,ne+='##NUM DIM= 2'+O;var le=K.getDataType().trim(),de={},ue;for(ue=0;ue<K.getNbSubSpectra();ue++)K.setActiveElement(ue),de[K.getXUnits()]?de[K.getXUnits()].value++:de[K.getXUnits()]={value:1,index:ue};var he=Object.keys(de),ce=he[0],ge=0;for(ue=1;ue<he.length;ue++)de[he[ue]].value>de[ce].value&&(ce=he[ue],ge=de[he[ue]].index);var me=!1;K.setActiveElement(ge);var pe=0<=K.getDataType().indexOf('NMR');pe&&(ne+='##.OBSERVE FREQUENCY= '+K.getParamDouble('observefrequency',0)+O,ne+='##.OBSERVE NUCLEUS= ^'+K.getNucleus()+O,ne+='##$DECIM= '+K.getParamDouble('$DECIM',0)+O,ne+='##$DSPFVS= '+K.getParamDouble('$DSPFVS',0)+O,ne+='##$FCOR= '+Math.floor(K.getParamDouble('$FCOR',0))+O,K.containsParam('$SW_h')?ne+='##$SW_h= '+K.getParamDouble('$SW_h',0)+O:K.containsParam('$SW_p')&&(ne+='##$SW_p= '+K.getParamDouble('$SW_p',0)+O),ne+='##$SW= '+K.getParamDouble('$SW',0)+O,ne+='##$TD= '+Math.floor(K.getParamDouble('$TD',0))+O,ne+='##$BF1= '+K.getParamDouble('$BF1',0)+O,ne+='##$GRPDLY= '+K.getParamDouble('$GRPDLY',0)+O,ne+='##.DIGITISER RES= '+K.getParamInt('.DIGITISER RES',0)+O,ne+='##.PULSE SEQUENCE= '+K.getParamString('.PULSE SEQUENCE','')+O,ne+='##.SOLVENT NAME= '+K.getSolventName()+O,ne+='##$NUC1= <'+K.getNucleus()+'>'+O,ne+=K.containsParam('2D_X_FREQUENCY')?'##$SFO1= '+K.getParamDouble('2D_X_FREQUENCY',0)+O:'##$SFO1= '+K.getParamDouble('$SFO1',0)+O,K.containsParam('2D_X_OFFSET')&&(ne+='##$OFFSET= '+K.getParamDouble('2D_X_OFFSET',0)+O),K.is2D()&&(ne+='$$Parameters for 2D NMR Spectrum'+O,ne+='##$NUC1= <'+K.getNucleus(2)+'>'+O,K.containsParam('2D_Y_FREQUENCY')&&(ne+='##$SFO1= '+K.getParamDouble('2D_Y_FREQUENCY',0)+O,ne+='##$SFO2= '+K.getParamDouble('2D_Y_FREQUENCY',0)+O,ne+='##$BF2= '+K.getParamDouble('2D_Y_FREQUENCY',0)+O),K.containsParam('2D_Y_OFFSET')&&(ne+='##$OFFSET= '+K.getParamDouble('2D_Y_OFFSET',0)+O),ne+='$$End of Parameters for 2D NMR Spectrum'+O)),ne+='##NTUPLES=\t'+le+O;var fe=1,xe=1;if(!K.is2D()&&1<K.getNbSubSpectra()&&pe&&(me=!0),me?(ne+='##VAR_NAME=\t'+K.getXUnits()+',\t'+le.substring(4)+'/REAL,\t'+le.substring(4)+'/IMAG'+O,ne+='##SYMBOL=\tX,\tR,\tI'+O,ne+='##VAR_TYPE=\tINDEPENDENT,\tDEPENDENT,\tDEPENDENT'+O,ne+='CSV'!==ee||'PAC'!==ee?'##VAR_FORM=\tAFFN,\tASDF,\tASDF'+O:'##VAR_FORM=\tAFFN,\tAFFN,\tAFFN'+O,ne+='##VAR_DIM=\t'+K.getNbPoints()+',\t'+K.getNbPoints()+',\t'+K.getNbPoints()+O,ne+='##UNITS=\tHZ,\t'+K.getYUnits()+',\t'+oe.units+O,ne+='##FACTOR=\t'+1/G+',\t'+1/Q+',\t'+1/Q+O,'PPM'===K.getXUnits()&&(fe=K.observeFrequencyX()),ne+='##FIRST=\t'+K.getFirstX()*fe+',\t'+K.getY(0)+',\t0'+O,ne+='##LAST=\t'+K.getLastX()*fe+',\t'+K.getLastY()+',\t0'+O):(fe=1,K.is2D()?(ne+='##VAR_NAME=\tFREQUENCY1,\tFREQUENCY2,\tSPECTRUM'+O,ne+='##SYMBOL=\tF1,\tF2,\tY'+O,ne+='##.NUCLEUS=\t'+K.getNucleus(2)+',\t'+K.getNucleus(1)+O,ne+='##VAR_TYPE=\tINDEPENDENT,\tINDEPENDENT,\tDEPENDENT'+O,ne+='CSV'!==ee||'PAC'!==ee?'##VAR_FORM=\tAFFN,\tAFFN,\tASDF'+O:'##VAR_FORM=\tAFFN,\tAFFN,\tASDF'+O,ne+='##VAR_DIM=\t'+K.getNbSubSpectra()+',\t'+K.getNbPoints()+',\t'+K.getNbPoints()+O,ne+='##UNITS=\tHZ,\tHZ,\t'+K.getZUnits()+O,'PPM'===K.getXUnits()&&(fe=K.getParamDouble('2D_Y_FREQUENCY',1)),'PPM'===K.getYUnits()&&(xe=K.getParamDouble('2D_X_FREQUENCY',1)),ne+='##FACTOR=\t1,\t'+xe/G+',\t'+1/Q+O,ne+='##FIRST=\t'+K.getParamDouble('firstY',0)*fe+',\t'+K.getFirstX()*xe+',\t'+K.getY(0)+O,ne+='##LAST=\t'+K.getParamDouble('lastY',0)*fe+',\t'+K.getLastX()*xe+',\t'+K.getY(K.getNbPoints()-1)+O):(ne+='##VAR_NAME=\t'+ae.varname+',\t'+se.varname+',\t'+ae.varname+O,ne+='##SYMBOL=\t'+ae.symbol+',\t'+se.symbol+',\t'+oe.symbol+O,ne+='##VAR_TYPE=\t'+ae.vartype+',\t'+se.vartype+',\t'+oe.vartype+O,ne+='CSV'!==ee||'PAC'!==ee?'##VAR_FORM=\tAFFN,\tASDF,\tASDF'+O:'##VAR_FORM=\tAFFN,\tAFFN,\tAFFN'+O,ne+='##VAR_DIM=\t'+ae.vardim+',\t'+se.vardim+',\t'+oe.vardim+O,ne+='##UNITS=\tHZ,\t'+K.getYUnits()+',\t'+oe.units+O,'PPM'===K.getXUnits()&&(fe=K.observeFrequencyX()),ne+='##FACTOR=\t'+1/G+',\t'+1/Q+O,ne+='##FIRST=\t'+ae.first*fe+',\t'+se.first+',\t'+oe.first+O,ne+='##LAST=\t'+ae.last*fe+',\t'+se.last+',\t'+oe.last+O)),null!==te)for(var be=te.length-1;0<=be;be--)K.containsParam(te[be])&&(ne+='##'+te[be]+'= '+K.getParam(te[be],'')+O);var ye=0,_e=0,ke=1;for(K.is2D()&&pe&&(ye=K.getParamDouble('firstY',0)*fe,_e=K.getParamDouble('lastY',0)*fe,ke=(_e-ye)/(K.getNbSubSpectra()-1)),ue=0;ue<K.getNbSubSpectra();ue++)if(K.setActiveElement(ue),ye=K.getParamDouble('firstY',0)*fe+ke*ue,ne+='##PAGE= '+ye+O,K.is2D()&&pe&&(ne+='##FIRST=\t'+K.getParamDouble('firstY',0)*fe+',\t'+K.getFirstX()*xe+',\t'+K.getY(0)+O),ne+='##DATA TABLE= ',K.isDataClassPeak()){ne+='(XY..XY), PEAKS'+O;for(let Se=0;Se<K.getNbPoints();Se++)ne+=K.getX(Se)+', '+K.getY(Se)+O}else if(K.isDataClassXY()){ne+=pe?K.is2D()?'(F2++(Y..Y)), PROFILE'+O:0==ue%2?'(X++(R..R)), XYDATA'+O:'(X++(I..I)), XYDATA'+O:'(X++(Y..Y)), XYDATA'+O;var je='',we=Array(K.getNbPoints());for(let Se=we.length-1;0<=Se;Se--)we[Se]=Math.round(K.getY(Se)*Q);je+=T.encode(we,K.getFirstX()*G,K.getDeltaX()*G,ee),ne+=je+O}return ne+='##END NTUPLES= '+le+O,ne+='##END= ',K.setActiveElement(0),ne}function R(K,Q,G,ee,te){var ne='';if(K.isDataClassPeak()&&(ne+='##DATA CLASS= PEAK TABLE'+O),K.isDataClassXY()&&(ne+='##DATA CLASS= XYDATA'+O),K.setActiveElement(0),0<=K.getDataType().indexOf('NMR')&&(ne+='##.OBSERVE FREQUENCY= '+K.getParamDouble('observefrequency',0)+O,ne+='##.OBSERVE NUCLEUS= ^'+K.getNucleus()+O,ne+='##$DECIM= '+Math.round(K.getParamDouble('$DECIM',0))+O,ne+='##$DSPFVS= '+Math.round(K.getParamDouble('$DSPFVS',0))+O,ne+='##$FCOR= '+Math.round(K.getParamDouble('$FCOR',0))+O,ne+='##$SW_h= '+K.getParamDouble('$SW_h',0)+O,ne+='##$SW= '+K.getParamDouble('$SW',0)+O,ne+='##$TD= '+Math.round(K.getParamDouble('$TD',0))+O,ne+='##$GRPDLY= '+K.getParamDouble('$GRPDLY',0)+O,ne+='##$BF1= '+K.getParamDouble('$BF1',0)+O,ne+='##$SFO1= '+K.getParamDouble('$SFO1',0)+O,ne+='##$NUC1= <'+K.getNucleus()+'>'+O,ne+='##.SOLVENT NAME= '+K.getSolventName()+O),ne+='##XUNITS=\t'+K.getXUnits()+O,ne+='##YUNITS=\t'+K.getYUnits()+O,ne+='##NPOINTS=\t'+K.getNbPoints()+O,ne+='##FIRSTX=\t'+K.getFirstX()+O,ne+='##LASTX=\t'+K.getLastX()+O,ne+='##FIRSTY=\t'+K.getFirstY()+O,ne+='##LASTY=\t'+K.getLastY()+O,K.isDataClassPeak()?(ne+='##XFACTOR=1'+O,ne+='##YFACTOR=1'+O):K.isDataClassXY()&&(ne+='##XFACTOR= '+1/G+O,ne+='##YFACTOR= '+1/Q+O),ne+='##MAXY= '+K.getMaxY()+O,ne+='##MINY= '+K.getMinY()+O,null!==te)for(var ae=te.length-1;0<=ae;ae--)K.containsParam(te[ae])&&(ne+='##'+te[ae]+'= '+K.getParam(te[ae],'')+O);if(K.isDataClassPeak()){ne+='##PEAK TABLE= (XY..XY)'+O;for(var se=0;se<K.getNbPoints();se++)ne+=K.getX(se)+', '+K.getY(se)+O;ne+='##END '}else if(K.isDataClassXY()){ne+='##DELTAX= '+K.getDeltaX()+O,ne+='##XYDATA=(X++(Y..Y))'+O;var oe='',le=Array(K.getNbPoints());for(let de=le.length-1;0<=de;de--)le[de]=Math.round(K.getY(de)*Q);oe+=T.encode(le,K.getFirstX()*G,K.getDeltaX()*G,ee),ne+=oe+O,ne+='##END= '}return K.setActiveElement(0),ne}const T=I(139),F={MAX_VALUE:Number.MAX_SAFE_INTEGER,MIN_VALUE:Number.MIN_SAFE_INTEGER},O='\r\n',$='Cheminfo tools '+I(131).version,Z={encode:'DIFDUP',yFactor:1,type:'SIMPLE',keep:[]};E.exports=class{convert(K,Q){Q=Object.assign({},Z,Q);const G=Q.encode.toUpperCase().trim(),ee=Q.yFactor||1;let te=Q.type;const ne=Q.keep;(null===te||0===te.length)&&(te='SIMPLE');var ae='';K.setActiveElement(0);var se=ee/K.getParamDouble('YFACTOR',1);let oe={};oe=K.is2D()?{min:K.getMinZ(),max:K.getMaxZ()}:K.getMinMaxY(),oe.max*se>=F.MAX_VALUE/2&&(se=F.MAX_VALUE/(2*oe.max)),16>Math.abs(oe.max-oe.min)*se&&(se=16/Math.abs(oe.max-oe.min));var le=Math.abs(1/K.getDeltaX());return ae+='##TITLE= '+K.getTitle()+O,ae+='##JCAMP-DX= 5.00\t$$'+$+O,ae+='##OWNER= '+K.getParamString('##OWNER=','')+O,ae+='##DATA TYPE= '+K.getDataType()+O,'NTUPLES'===te&&(ae+=P(K,se,le,G,ne)),'SIMPLE'===te&&(ae+=R(K,se,le,G,ne)),ae}}},function(E){'use strict';function R(de,ue,he){return T(de,ue,he,',')}function T(de,ue,he,ce){ce||(ce=' ');for(var ge='',me=0,pe=de.length,fe;me<pe-7;){for(ge+=Math.ceil(ue+me*he),fe=0;8>fe;fe++)ge+=ce+de[me++];ge+=G}if(me<pe)for(ge+=Math.ceil(ue+me*he),fe=me;fe<pe;fe++)ge+=ce+de[fe];return ge}function F(de,ue,he){for(var ce='',ge=0,me=de.length,pe;ge<me-7;){for(ce+=Math.ceil(ue+ge*he),pe=0;8>pe;pe++)ce+=0>de[ge]?'-'+de[ge++]:'+'+de[ge++];ce+=G}if(ge<me)for(ce+=Math.ceil(ue+ge*he),pe=ge;pe<me;pe++)ce+=0>de[pe]?'-'+de[pe]:'+'+de[pe];return ce}function O(de,ue,he){for(var ce='',ge=0,me=de.length,pe;ge<me-10;){for(ce+=Math.ceil(ue+ge*he),pe=0;10>pe;pe++)ce+=W(de[ge++].toString());ce+=G}if(ge<me)for(ce+=Math.ceil(ue+ge*he),pe=ge;pe<me;pe++)ce+=W(de[pe].toString());return ce}function $(de,ue,he){var ce=0,ge=0,me=0,fe='',xe='',be='',ye=Array(de.length-1),pe;for(pe=0;pe<ye.length;pe++)ye[pe]=de[pe+1]-de[pe];for(var _e=ye.length;ge<_e;)0==me?(xe=Math.ceil(ue+ge*he)+W(de[ge].toString())+K(ye[ge].toString()),fe+=xe,me+=xe.length):ye[ge-1]===ye[ge]?ce++:0<ce?(ce++,xe=Q(ce.toString()),fe+=xe,me+=xe.length,ce=0,ge--):(xe=K(ye[ge].toString()),xe.length+me<le?(fe+=xe,me+=xe.length):(fe+=G,be=Math.ceil(ue+ge*he)+W(de[ge].toString())+xe,fe+=be,me=be.length)),ge++;return 0<ce&&(fe+=Q((ce+1).toString())),fe+=G+Math.ceil(ue+ge*he)+W(de[ge].toString()),fe}function Z(de,ue,he){var ce=0,ge=0,pe='',fe='',xe='',be=Array(de.length-1),me;for(me=0;me<be.length;me++)be[me]=de[me+1]-de[me];ce=0;for(var ye=be.length;ce<ye;)0==ge?(fe=Math.ceil(ue+ce*he)+W(de[ce].toString())+K(be[ce].toString()),pe+=fe,ge+=fe.length):(fe=K(be[ce].toString()),fe.length+ge<le?(pe+=fe,ge+=fe.length):(pe+=G,xe=Math.ceil(ue+ce*he)+W(de[ce].toString())+fe,pe+=xe,ge=xe.length)),ce++;return pe+=G+Math.ceil(ue+ce*he)+W(de[ce].toString()),pe}function W(de){var ue='';return'-'===de.charAt(0)?(ue+=ee[ne][de.charAt(1)],2<de.length&&(ue+=de.substring(2))):(ue+=ee[te][de.charAt(0)],1<de.length&&(ue+=de.substring(1))),ue}function K(de){var ue='';return'-'===de.charAt(0)?(ue+=ee[se][de.charAt(1)],2<de.length&&(ue+=de.substring(2))):(ue+=ee[ae][de.charAt(0)],1<de.length&&(ue+=de.substring(1))),ue}function Q(de){var ue='';return ue+=ee[oe][de.charAt(0)],1<de.length&&(ue+=de.substring(1)),ue}const G='\r\n',ee=[['0','1','2','3','4','5','6','7','8','9'],['@','A','B','C','D','E','F','G','H','I'],['@','a','b','c','d','e','f','g','h','i'],['%','J','K','L','M','N','O','P','Q','R'],['%','j','k','l','m','n','o','p','q','r'],[' ','S','T','U','V','W','X','Y','Z','s']],te=1,ne=2,ae=3,se=4,oe=5,le=100;E.exports={encode:function(de,ue,he,ce){return'FIX'===ce?T(de,ue,he):'SQZ'===ce?O(de,ue,he):'DIF'===ce?Z(de,ue,he):'DIFDUP'===ce?$(de,ue,he):'CSV'===ce?R(de,ue,he):'PAC'===ce?F(de,ue,he):Z(de,ue,he)},fixEncoding:T,commaSeparatedValuesEncoding:R,packedEncoding:F,squeezedEncoding:O,differenceDuplicateEncoding:$,differenceEncoding:Z}},function(E){'use strict';function P(se,oe){var le=se.peaksComp,de=le.length;se.startX=le[0].x/se.observe-le[0].width,se.stopX=le[de-1].x/se.observe+le[de-1].width,se.integralData.from=le[0].x/se.observe-3*le[0].width,se.integralData.to=le[de-1].x/se.observe+3*le[de-1].width,se.maskPattern=se.mask2,se.multiplicity=R(se,oe),se.pattern=se.multiplicity}function R(se,oe){var ue='',he=1,ce=[],de;if(oe&&0<oe.length){for(oe.sort(function(ge,me){return ge-me}),de=0;de<oe.length-1;de++)Math.abs(oe[de]-oe[de+1])<0.05?he++:(ce.push({coupling:Math.abs(oe[de]),multiplicity:ee[he]}),ue+=ee[he],he=1);ce.push({coupling:Math.abs(oe[de]),multiplicity:ee[he]}),ue+=ee[he],se.nmrJs=ce}else ue='s',16<Math.abs(se.startX-se.stopX)*se.observe&&(ue='br s');return ue}function T(se){var oe=Math.pow(2,se.length),le,de,ue=[{x:0,intensity:oe}];for(le=0;le<se.length;le++)for(de=ue.length-1;0<=de;de--)ue.push({x:ue[de].x+se[le]/2,intensity:ue[de].intensity/2}),ue[de].x-=se[le]/2,ue[de].intensity/=2;for(ue.sort(function(ce,ge){return ce.x-ge.x}),de=ue.length-2;0<=de;de--)0.1>Math.abs(ue[de].x-ue[de+1].x)&&(ue[de].intensity+=ue[de+1].intensity,ue.splice(de+1,1));return ue}function F(se,oe){for(var le=Math.ceil(se.values.length/2),de=se.values.length,ue=0,he,ce;ue!==oe;){for(ce=!1;!ce;)if(ce=!0,se.currentIndex[se.active]++,se.currentIndex[se.active]>=se.values[se.active].length){if(se.active+1===le)return null;se.currentIndex[se.active]=0,ce=!1,se.active++}else se.active=0;for(ue=0,he=0;he<le;he++)ue+=2*se.values[he][se.currentIndex[he]];0!=se.values.length%2&&(ue-=se.values[le-1][se.currentIndex[le-1]])}if(ue===oe){var ge=Array(de);for(he=0;he<le;he++)ge[he]=se.values[he][se.currentIndex[he]],ge[de-he-1]=se.values[he][se.currentIndex[he]];return ge}return null}function O(se){var oe=Array(se.length),le=Array(se.length),de,ue;oe[0]=[1],oe[se.length-1]=[1],le[0]=-1,le[se.length-1]=0;for(var he=1;he<se.length-1;he++){de=Math.round(0.85*se[he].intensity),ue=Math.round(1.15*se[he].intensity),oe[he]=[];for(var ce=de;ce<=ue;ce++)oe[he].push(ce);le[he]=0}return{values:oe,currentIndex:le,active:0}}function $(se,oe,le){var de=Z(se,oe,le),ue=se.peaksComp,he=se.mask,ce=se.delta1;se.delta1=(se.peaks[0].x+se.peaks[se.peaks.length-1].x)/2;var ge=Z(se,oe,le);return se.peaksComp.length>ue.length?ge:(se.delta1=ce,se.peaksComp=ue,se.mask=he,de)}function Z(se,oe,le){var pe=Array(se.peaks.length),de,ue,he,ce,ge,me;for(me=0;me<pe.length;me++)pe[me]={x:se.peaks[me].x*se.observe,intensity:se.peaks[me].intensity,width:se.peaks[me].width};for(me=pe.length-2;0<=me;me--)0.25>Math.abs(pe[me].x-pe[me+1].x)&&(pe[me].x=pe[me].x*pe[me].intensity+pe[me+1].x*pe[me+1].intensity,pe[me].intensity+=pe[me+1].intensity,pe[me].x/=pe[me].intensity,pe[me].intensity/=2,pe[me].width+=pe[me+1].width,pe.splice(me+1,1));se.peaksComp=pe;var fe=pe.length,xe=Array(fe);se.mask=xe;var be=0,ye=pe.length-1,_e=se.delta1*se.observe,ke=[(pe[0].x+pe[fe-1].x)/2,1];oe=W(Math.abs(_e-ke[0]));for(var je=0,we=0;we<fe;we++)xe[we]=!0,je+=se.peaks[we].intensity;for(;be<=ye;){if(xe[be]=!0,xe[ye]=!0,be==ye)2<fe&&Math.abs(pe[be].x-_e)>oe&&(xe[be]=!1);else if(de=Math.max(pe[be].intensity,pe[ye].intensity),ue=Math.min(pe[be].intensity,pe[ye].intensity),ce=de/ue,ce>te)pe[be].intensity===ue?(xe[be]=!1,ye++):(xe[ye]=!1,be--);else{var Se=Math.abs(pe[be].x-_e),ve=Math.abs(pe[ye].x-_e);Math.abs(Se-ve)<oe?(he=Math.min(pe[be].intensity,pe[ye].intensity),ge=Math.min(pe[be].width,pe[ye].width),pe[be].intensity=pe[ye].intensity=he,pe[be].width=pe[ye].width=ge,ke=[ke[0]+(pe[ye].x+pe[be].x)/2,ke[1]+1]):Math.max(Se,ve)===ve?(xe[ye]=!1,be--):(xe[be]=!1,ye++)}if(be++,ye--,1===le&&(_e=Q(pe,xe),isNaN(_e)))return 0;oe=W(Math.abs(_e-ke[0]/ke[1]))}for(we=fe-1;0<=we;we--)!1===xe[we]&&pe.splice(we,1);if(_e=Q(pe),isNaN(_e))return 0;se.delta1=_e/se.observe;let Ee=0,De=0;if(1<pe.length){for(we=Math.ceil(pe.length/2)-1;0<=we;we--)Ee+=(3+Math.min(Math.abs(pe[we].x-_e),Math.abs(pe[pe.length-1-we].x-_e)))/(3+Math.max(Math.abs(pe[we].x-_e),Math.abs(pe[pe.length-1-we].x-_e)))*pe[we].intensity,De+=pe[we].intensity;Ee/=De}else 1===pe.length&&(Ee=1);var Ce=0;for(we=0;we<pe.length;we++)Ce+=pe[we].intensity;if(Ee-=0.12*((je-Ce)/je),0.8<Ee&&0.97>Ee&&2>le)return Z(se,ae,2);if(1<pe.length){let Ae;for(we=Math.ceil(pe.length/2)-1;0<=we;we--)Ae=(pe[we].x-pe[pe.length-1-we].x)/2,pe[we].x=_e+Ae,pe[pe.length-1-we].x=_e-Ae}return Ee}function W(se){var oe=2.5*se;return 0.75>oe&&(oe=0.75),3<oe&&(oe=3),oe}function K(se,oe){var le=JSON.parse(JSON.stringify(se.peaksComp)),de=0,ue=0,he;for(he=0;he<le.length;he++)de+=le[he].intensity;de=Math.pow(2,oe)/de,se.mask2=JSON.parse(JSON.stringify(se.mask));var ce=se.mask2.length-1;for(he=le.length-1;0<=he;he--){for(le[he].intensity*=de;0<=ce&&!1===se.mask2[ce];)ce--;0.75>le[he].intensity?(le.splice(he,1),se.mask2[ce]=!1):ue+=le[he].intensity,ce--}for(ue=Math.pow(2,oe)/ue,he=le.length-1;0<=he;he--)le[he].intensity*=ue;return le}function Q(se,oe){var le=0,de=0,ue,he;if(oe)for(ue=0;ue<se.length;ue++)!0===oe[ue]&&(he=G(se[ue]),le+=he,de+=he*se[ue].x);else for(ue=0;ue<se.length;ue++)he=G(se[ue]),le+=he,de+=he*se[ue].x;return de/le}function G(se){return Math.abs(1.57*(se.intensity*se.width))}const ee=['s','d','t','q','quint','h','sept','o','n'];var te=1.5,ae=1;E.exports={compilePattern:function(se){if(se.multiplicity='m',se.symRank=$(se,2.5,1),se.asymmetric=!0,0.95<=se.symRank&&32>se.peaksComp.length){se.asymmetric=!1;var ue=1,ce=[],oe,le,de,he,ge,me;for(de=0;9>de;de++){var pe=K(se,de),fe=!1;if(1===pe.length&&0===de)fe=!0;else if(1>=pe.length)continue;var xe=O(pe);ge=Math.pow(2,de);for(var be=null,ye;!fe&&null!==(be=F(xe,ge));){for(ye=Array(be.length),ue=1,oe=0;oe<be.length;oe++)for(ye[oe]=Array(be[oe]),le=0;le<be[oe];le++)ye[oe][le]=ue++;ce=[],le=1,ce.push(pe[1].x-pe[0].x),he=pe[0].x,ye[0].splice(0,1),ye[1].splice(0,1),ue=1;var _e=2;for(me=Math.pow(2,de)-1;ce.length<de&&_e<me&&ue<pe.length;){for(le++;ue<pe.length&&0===ye[ue].length;)ue++;if(ue<pe.length){ce.push(pe[ue].x-pe[0].x),ye[ue].splice(0,1),_e++;for(var ke=2,je;ke<=le;ke++){for(je=0,oe=0;oe<ke;oe++)je+=ce[oe];for(oe=1;oe<ye.length;oe++)if(0.25>Math.abs(pe[oe].x-(he+je))){ye[oe].splice(0,1),_e++;break}}}}var we=T(ce);for(fe=!0,oe=0;oe<we.length;oe++)we[oe].intensity!==be[oe]&&(fe=!1)}fe&&P(se,ce)}}for(oe=0;oe<se.peaksComp.length;oe++)se.peaksComp[oe].x/=se.observe}}},function(E,D,I){'use strict';function R(K){return K.isHomoNuclear()?1.5:3}function T(K,Q,G){var ee=Q.observeFrequencyX(),te=Q.observeFrequencyY(),ne=Q.getFirstY(),ae=Q.getDeltaY(),se;for(se=K.length-1;0<=se;se--)K[se].x=Q.arrayPointToUnits(K[se].x),K[se].y=ne+ae*K[se].y,(-1>K[se].y||210<=K[se].y)&&K.splice(se,1);var oe=[],le=0;for(G*=G,se=0;se<K.length;se++)for(var de=se;de<K.length;de++)le=Math.pow((K[se].x-K[de].x)*ee,2)+Math.pow((K[se].y-K[de].y)*te,2),le<G?oe.push(1):oe.push(0);var ue=O(oe),he=[];if(null!=K)for(var ce=0,ge;ce<ue.length;ce++){ge={nucleusX:Q.getNucleus(1),nucleusY:Q.getNucleus(2)},ge.resolutionX=(Q.getLastX()-Q.getFirstX())/Q.getNbPoints(),ge.resolutionY=ae;var me=[];ge.shiftX=0,ge.shiftY=0;for(var pe=[Number.MAX_VALUE,0],fe=[Number.MAX_VALUE,0],xe=0,be=ue[ce].length-1;0<=be;be--)1===ue[ce][be]&&(me.push({x:K[be].x,y:K[be].y,z:K[be].z}),ge.shiftX+=K[be].x*K[be].z,ge.shiftY+=K[be].y*K[be].z,xe+=K[be].z,K[be].x<pe[0]&&(pe[0]=K[be].x),K[be].x>pe[1]&&(pe[1]=K[be].x),K[be].y<fe[0]&&(fe[0]=K[be].y),K[be].y>fe[1]&&(fe[1]=K[be].y));ge.fromTo=[{from:pe[0],to:pe[1]},{from:fe[0],to:fe[1]}],ge.shiftX/=xe,ge.shiftY/=xe,ge.peaks=me,he.push(ge)}return he}var F=I(51),O=I(39),$=I(89),Z=I(34).FFTUtils;const W=[[0,0,1,2,2,2,1,0,0],[0,1,4,7,7,7,4,1,0],[1,4,5,3,0,3,5,4,1],[2,7,3,-12,-23,-12,3,7,2],[2,7,0,-23,-40,-23,0,7,2],[2,7,3,-12,-23,-12,3,7,2],[1,4,5,3,0,3,5,4,1],[0,1,3,7,7,7,3,1,0],[0,0,1,2,2,2,1,0,0]];E.exports=function(K,Q){0===Q&&(Q=1),0>Q&&(Q=-Q);for(var G=K.getNbPoints(),ee=K.getNbSubSpectra(),te=Array(G*ee),ne=K.isHomoNuclear(),ae=0,se;ae<ee;ae++){se=K.getYData(ae);for(var oe=0;oe<G;oe++)te[ae*G+oe]=ne?0<se[oe]?se[oe]:0:Math.abs(se[oe])}var le=R(K);if(ne){let he=Z.convolute(te,W,ee,G),ce=$.findPeaks2DRegion(te,{filteredData:he,rows:ee,cols:G,nStdDev:le*Q});for(var de=$.findPeaks2DMax(te,{filteredData:he,rows:ee,cols:G,nStdDev:(le+0.5)*Q}),ue=0;ue<ce.length;ue++)de.push(ce[ue]);return F.enhanceSymmetry(T(de,K,24))}let he=Z.convolute(te,W,ee,G),ce=$.findPeaks2DRegion(te,{filteredData:he,rows:ee,cols:G,nStdDev:le*Q});return T(F.clean(ce,0.05),K,24)}},function(E,D,I){'use strict';function R(Z,W,K,Q,G){const ee=W.observeFrequencyX();var oe=[],le={},de=null,ue={x:1e5,y:0,width:0},he=0,te,ne,ae,se,G=Number.isFinite(G)?G:16,Q='sum'===Q||'peaks'===Q?Q:'sum';for(ae=0;ae<Z.length;ae++){if(Math.abs(Z[ae].x-ue.x)>G/ee)le={nbPeaks:1,units:'PPM',startX:Z[ae].x-Z[ae].width,stopX:Z[ae].x+Z[ae].width,multiplicity:'',pattern:'',observe:ee,nucleus:'1H',integralData:{from:Z[ae].x-3*Z[ae].width,to:Z[ae].x+3*Z[ae].width},peaks:[]},le.peaks.push({x:Z[ae].x,intensity:Z[ae].y,width:Z[ae].width}),oe.push(le);else{var ge=Z[ae].x+Z[ae].width;le.stopX=Math.max(le.stopX,ge),ge=Z[ae].x-Z[ae].width,le.startX=Math.min(le.startX,ge),le.nbPeaks++,le.peaks.push({x:Z[ae].x,intensity:Z[ae].y,width:Z[ae].width}),le.integralData.from=Math.min(le.integralData.from,Z[ae].x-3*Z[ae].width),le.integralData.to=Math.max(le.integralData.to,Z[ae].x+3*Z[ae].width)}ue=Z[ae]}for(ae=0;ae<oe.length;ae++){de=oe[ae].peaks;let me=oe[ae].integralData;for(te=0,ne=0,se=0;se<de.length;se++)te+=de[se].x*T(de[se]),ne+=T(de[se]);oe[ae].delta1=te/ne,me.value='sum'===Q?W.getArea(me.from,me.to):ne,he+=me.value}if(0!==K)for(ae=0;ae<oe.length;ae++){let me=oe[ae].integralData;me.value*=K/he}return oe}function T(Z){return Math.abs(1.57*(Z.intensity*Z.width))}const F=I(140),O=I(18),$={nH:99,clean:!0,compile:!0,integralType:'sum',idPrefix:'',frequencyCluster:16};E.exports=function(Z,W,K){K=Object.assign({},$,K);var ne=R(W,Z,K.nH,K.integralType,K.frequencyCluster),Q,G,ee,te;if(K.clean||!1)for(Q=ne.length-1;0<=Q;Q--)0.5>ne[Q].integralData.value&&ne.splice(Q,1);if(K.compile||!1){for(Q=0;Q<ne.length;Q++)if(F.compilePattern(ne[Q]),ne[Q].maskPattern&&'m'!==ne[Q].multiplicity&&''!==ne[Q].multiplicity){ee=0,te=0;var ae=[];for(G=ne[Q].maskPattern.length-1;0<=G;G--)if(te+=T(ne[Q].peaks[G]),!1===ne[Q].maskPattern[G]){var se=ne[Q].peaks.splice(G,1)[0];ae.push({x:se.x,y:se.intensity,width:se.width}),ne[Q].mask.splice(G,1),ne[Q].mask2.splice(G,1),ne[Q].maskPattern.splice(G,1),ne[Q].nbPeaks--,ee+=T(se)}if(0<ae.length){ee=ee*ne[Q].integralData.value/te,ne[Q].integralData.value-=ee;var oe=[];for(G=ae.length-1;0<=G;G--)oe.push(ae[G]);let ce=R(oe,Z,ee,K.integralType,K.frequencyCluster);for(G=0;G<ce.length;G++)ne.push(ce[G])}}var le=0,de=0;for(Q=0;Q<ne.length;Q++)de+=Math.round(ne[Q].integralData.value);if(de!==K.nH)for(le=K.nH/de,Q=0;Q<ne.length;Q++)ne[Q].integralData.value*=le}if(ne.sort(function(ce,ge){return ge.delta1-ce.delta1}),K.clean||!1)for(Q=ne.length-1;0<=Q;Q--)0.5>ne[Q].integralData.value&&ne.splice(Q,1);for(Q=0;Q<ne.length;Q++)ne[Q].signalID=K.idPrefix&&0<K.idPrefix.length?K.idPrefix+'_'+(Q+1):Q+1+'',ne[Q]._highlight=[ne[Q].signalID];let ue=Array(ne.length);for(Q=0;Q<ne.length;Q++){var he=ne[Q];ue[Q]={from:he.integralData.from,to:he.integralData.to,integral:he.integralData.value,signal:[{nbAtoms:0,diaID:[],multiplicity:he.multiplicity,peak:he.peaks,kind:'',remark:''}],signalID:he.signalID,_highlight:he._highlight},he.nmrJs&&(ue[Q].signal[0].j=he.nmrJs),he.asymmetric&&'m'!==he.multiplicity||(ue[Q].signal[0].delta=he.delta1)}return ne=new O(ue),ne}},function(E){'use strict';function R(le,de,ue,he,ce,ge){te(),T(le,ce,ge);for(var me=le.length,fe=0,pe;fe<me;fe++)pe=de?le[fe]:le[me-fe-1],pe&&(te(),F(pe,ue),O(pe,he))}function T(le,de,ue){'NMR SPEC'===le.type?(ue.nucleus&&(ae+=ee(ue.nucleus)),ae+=' NMR',(de||ue.observe)&&(ae+=' (',ue.observe&&(ae+=(1*ue.observe).toFixed(0)+' MHz',de&&(ae+=', ')),de&&(ae+=G(de)),ae+=')'),ae+=' \u03B4 '):'IR'===le.type?ae+=' IR ':'MASS'===le.type&&(ae+=' MASS ')}function F(le,de){var ue=0,he=0,ce=0,ge;le.from&&('string'==typeof le.from?ue=parseFloat(le.from):ue=le.from),le.to&&('string'==typeof le.to?he=parseFloat(le.to):he=le.to),le.signal[0].delta?'string'==typeof le.signal[0].delta?ce=parseFloat(le.signal[0].delta):ce=le.signal[0].delta:ge=!0,!0===ge||'m'===le.signal[0].multiplicity&&!0===oe?le.from&&le.to?ue<he?ae+=ue.toFixed(de)+'-'+he.toFixed(de):ae+=he.toFixed(de)+'-'+ue.toFixed(de):le.signal[0].delta&&(ae+='?'):le.signal[0].delta?ae+=ce.toFixed(de):le.from&&le.to&&(ae+=((ue+he)/2).toFixed(de))}function O(le,de){se='',W(le),$(le),K(le,de),Z(le),0<se.length&&(ae+=' ('+se+')')}function $(le){le.pubIntegral?(ne(),se+=le.pubIntegral):le.integral&&(ne(),se+=le.integral.toFixed(0)+' H')}function Z(le){le.signal[0].pubAssignment?(ne(),se+=Q(le.signal[0].pubAssignment)):le.signal[0].assignment&&(ne(),se+=Q(le.signal[0].assignment))}function W(le){le.signal[0].pubMultiplicity?(ne(),se+=le.pubMultiplicity):le.signal[0].multiplicity&&(ne(),se+=le.signal[0].multiplicity)}function K(le,de){if(0>'sm'.indexOf(le.signal[0].multiplicity)&&le.signal[0].j&&0<le.signal[0].j.length){for(var ue=le.signal[0].j,he='<i>J</i> = ',ce=0,ge;ce<ue.length;ce++)ge=ue[ce].coupling||0,11<he.length&&(he+=', '),he+=ge.toFixed(de);ne(),se+=he+' Hz'}}function Q(le){return le=le.replace(/([0-9])/g,'<sub>$1</sub>'),le=le.replace(/\"([^\"]*)\"/g,'<i>$1</i>'),le}function G(le){return le=le.replace(/([0-9])/g,'<sub>$1</sub>'),le}function ee(le){return le=le.replace(/([0-9])/g,'<sup>$1</sup>'),le}function te(){0<ae.length&&!ae.match(/ $/)&&(ae+=', ')}function ne(){0<se.length&&!se.match(', $')&&(se+=', ')}var ae='',se='',oe=!1;E.exports=function(le,de){let ue=Object.assign({},{nucleus:'1H'},de);var he=JSON.parse(JSON.stringify(le));if(he[0].delta1)throw new Error('Old unsupported format');he.updateMultiplicity&&(he=he.updateMultiplicity()),ae='',se='';var ce=null;return ue&&ue.solvent&&(ce=ue.solvent),ue&&void 0!==ue.rangeForMultiplet&&(oe=ue.rangeForMultiplet),ue&&ue.ascending?he.sort(function(ge,me){return me.from-ge.from}):he.sort(function(ge,me){return ge.from-me.from}),he.type='NMR SPEC',ue&&'1H'===ue.nucleus&&R(he,!1,2,1,ce,ue),ue&&'13C'===ue.nucleus&&R(he,!1,1,0,ce,ue),0<ae.length&&(ae+='.'),ae}},function(E){'use strict';E.exports=function(R,T){var T=T||{},F=T.from,O=T.to,$=T.nbPoints||16384,Z=T.fnName||'gaussian',W=T.nWidth||4;if(!F){F=Number.MAX_VALUE;for(let le=0;le<R.length;le++)R[le].x-R[le].width*W<F&&(F=R[le].x-R[le].width*W)}if(!O){O=Number.MIN_VALUE;for(let le=0;le<R.length;le++)R[le].x+R[le].width*W>O&&(O=R[le].x+R[le].width*W)}var K=Array($),Q=Array($),G=(O-F)/($-1);for(let le=0;le<$;le++)K[le]=F+le*G,Q[le]=0;var ee='intensity';R[0].y&&(ee='y');for(let le=0;le<R.length;le++){var te=R[le];if(te.x>F&&te.x<O){var ne=Math.round((te.x-F)/G),ae=Math.round(te.width*W/G);if('gaussian'===Z)for(var se=ne-ae;se<ne+ae;se++)0<=se&&se<$&&(Q[se]+=te[ee]*Math.exp(-0.5*Math.pow((te.x-K[se])/(te.width/2),2)));else{var oe=te[ee]*Math.pow(te.width,2)/4;for(let de=ne-ae;de<ne+ae;de++)0<=de&&de<$&&(Q[de]+=oe/(Math.pow(te.x-K[de],2)+Math.pow(te.width/2,2)))}}}return{x:K,y:Q}}},function(E){'use strict';var T={type:'rect',line:0,lineLabel:1,labelColor:'red',strokeColor:'red',strokeWidth:'1px',fillColor:'green',width:0.05,height:10,toFixed:1},F={type:'rect',labelColor:'red',strokeColor:'red',strokeWidth:'1px',fillColor:'green',width:'6px',height:'6px'};E.exports={annotations2D:function(O,$){for(var Z=Object.assign({},F,$),W=[],K=O.length-1;0<=K;K--){var Q=O[K],G={};G.type=Z.type,G._highlight=Q._highlight,G._highlight&&0!==G._highlight.length||(G._highlight=[Q.signalID]),Q._highlight=G._highlight,G.position=[{x:Q.fromTo[0].from-0.01,y:Q.fromTo[1].from-0.01,dx:Z.width,dy:Z.height},{x:Q.fromTo[0].to+0.01,y:Q.fromTo[1].to+0.01}],G.fillColor=Z.fillColor,G.label={text:Q.remark,position:{x:Q.signal[0].delta[0],y:Q.signal[0].delta[1]-0.025}},G.strokeColor=1===Q.integral?Z.strokeColor:'rgb(0,128,0)',G.strokeWidth=Z.strokeWidth,G.width=Z.width,G.height=Z.height,G.info=Q,W.push(G)}return W},annotations1D:function(O,$){for(var Z=Object.assign({},T,$),W=Z.height,K=[],Q=0;Q<O.length;Q++){var G=O[Q],ee={};K.push(ee),ee.line=Z.line,ee._highlight=G._highlight,ee._highlight&&0!==ee._highlight.length||(ee._highlight=[G.signalID],G.signal.forEach(function(te){for(let ne=0;ne<te.diaID.length;ne++)ee._highlight.push(te.diaID[ne])})),G._highlight=ee._highlight,ee.type=Z.type,ee.position=G.to&&G.from&&G.to!==G.from?[{x:G.to,y:Z.line*W+'px'},{x:G.from,y:Z.line*W+3+'px'}]:[{x:G.signal[0].delta-Z.width,y:Z.line*W+'px'},{x:G.signal[0].delta+Z.width,y:Z.line*W+3+'px'}],!Z.noLabel&&G.integral&&(ee.label={text:G.integral.toFixed(Z.toFixed),size:'11px',anchor:'middle',color:Z.labelColor,position:{x:(ee.position[0].x+ee.position[1].x)/2,y:(Z.line+Z.lineLabel)*W+'px',dy:'5px'}}),ee.strokeColor=Z.strokeColor,ee.strokeWidth=Z.strokeWidth,ee.fillColor=Z.fillColor,ee.info=G}return K}}},function(E,D,I){'use strict';D.SD=I(7),D.NMR=I(53),D.NMR2D=I(54),D.Ranges=I(18)}])});
//# sourceMappingURL=spectra-data.min.js.map